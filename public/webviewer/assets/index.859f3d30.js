(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function r(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerpolicy&&(u.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?u.credentials="include":s.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(s){if(s.ep)return;s.ep=!0;const u=r(s);fetch(s.href,u)}})();function makeMap(e,n){const r=Object.create(null),o=e.split(",");for(let s=0;s<o.length;s++)r[o[s]]=!0;return n?s=>!!r[s.toLowerCase()]:s=>!!r[s]}function normalizeStyle(e){if(isArray$4(e)){const n={};for(let r=0;r<e.length;r++){const o=e[r],s=isString$4(o)?parseStringStyle(o):normalizeStyle(o);if(s)for(const u in s)n[u]=s[u]}return n}else{if(isString$4(e))return e;if(isObject$5(e))return e}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*.*?\*\//gs;function parseStringStyle(e){const n={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach(r=>{if(r){const o=r.split(propertyDelimiterRE);o.length>1&&(n[o[0].trim()]=o[1].trim())}}),n}function normalizeClass(e){let n="";if(isString$4(e))n=e;else if(isArray$4(e))for(let r=0;r<e.length;r++){const o=normalizeClass(e[r]);o&&(n+=o+" ")}else if(isObject$5(e))for(const r in e)e[r]&&(n+=r+" ");return n.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}function looseCompareArrays(e,n){if(e.length!==n.length)return!1;let r=!0;for(let o=0;r&&o<e.length;o++)r=looseEqual(e[o],n[o]);return r}function looseEqual(e,n){if(e===n)return!0;let r=isDate$2(e),o=isDate$2(n);if(r||o)return r&&o?e.getTime()===n.getTime():!1;if(r=isSymbol$2(e),o=isSymbol$2(n),r||o)return e===n;if(r=isArray$4(e),o=isArray$4(n),r||o)return r&&o?looseCompareArrays(e,n):!1;if(r=isObject$5(e),o=isObject$5(n),r||o){if(!r||!o)return!1;const s=Object.keys(e).length,u=Object.keys(n).length;if(s!==u)return!1;for(const d in e){const f=e.hasOwnProperty(d),v=n.hasOwnProperty(d);if(f&&!v||!f&&v||!looseEqual(e[d],n[d]))return!1}}return String(e)===String(n)}function looseIndexOf(e,n){return e.findIndex(r=>looseEqual(r,n))}const toDisplayString$1=e=>isString$4(e)?e:e==null?"":isArray$4(e)||isObject$5(e)&&(e.toString===objectToString$3||!isFunction$3(e.toString))?JSON.stringify(e,replacer,2):String(e),replacer=(e,n)=>n&&n.__v_isRef?replacer(e,n.value):isMap(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((r,[o,s])=>(r[`${o} =>`]=s,r),{})}:isSet(n)?{[`Set(${n.size})`]:[...n.values()]}:isObject$5(n)&&!isArray$4(n)&&!isPlainObject$4(n)?String(n):n,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=e=>onRE.test(e),isModelListener=e=>e.startsWith("onUpdate:"),extend$2=Object.assign,remove=(e,n)=>{const r=e.indexOf(n);r>-1&&e.splice(r,1)},hasOwnProperty$e=Object.prototype.hasOwnProperty,hasOwn$1=(e,n)=>hasOwnProperty$e.call(e,n),isArray$4=Array.isArray,isMap=e=>toTypeString$1(e)==="[object Map]",isSet=e=>toTypeString$1(e)==="[object Set]",isDate$2=e=>toTypeString$1(e)==="[object Date]",isFunction$3=e=>typeof e=="function",isString$4=e=>typeof e=="string",isSymbol$2=e=>typeof e=="symbol",isObject$5=e=>e!==null&&typeof e=="object",isPromise=e=>isObject$5(e)&&isFunction$3(e.then)&&isFunction$3(e.catch),objectToString$3=Object.prototype.toString,toTypeString$1=e=>objectToString$3.call(e),toRawType=e=>toTypeString$1(e).slice(8,-1),isPlainObject$4=e=>toTypeString$1(e)==="[object Object]",isIntegerKey=e=>isString$4(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const n=Object.create(null);return r=>n[r]||(n[r]=e(r))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(n,r)=>r?r.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize$1(e)}`:""),hasChanged=(e,n)=>!Object.is(e,n),invokeArrayFns=(e,n)=>{for(let r=0;r<e.length;r++)e[r](n)},def=(e,n,r)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value:r})},looseToNumber=e=>{const n=parseFloat(e);return isNaN(n)?e:n},toNumber$1=e=>{const n=isString$4(e)?Number(e):NaN;return isNaN(n)?e:n};let _globalThis$1;const getGlobalThis$1=()=>_globalThis$1||(_globalThis$1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let activeEffectScope;class EffectScope{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!n&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(n){if(this._active){const r=activeEffectScope;try{return activeEffectScope=this,n()}finally{activeEffectScope=r}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(n){if(this._active){let r,o;for(r=0,o=this.effects.length;r<o;r++)this.effects[r].stop();for(r=0,o=this.cleanups.length;r<o;r++)this.cleanups[r]();if(this.scopes)for(r=0,o=this.scopes.length;r<o;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!n){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(e){return new EffectScope(e)}function recordEffectScope(e,n=activeEffectScope){n&&n.active&&n.effects.push(e)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(e){activeEffectScope&&activeEffectScope.cleanups.push(e)}const createDep=e=>{const n=new Set(e);return n.w=0,n.n=0,n},wasTracked=e=>(e.w&trackOpBit)>0,newTracked=e=>(e.n&trackOpBit)>0,initDepMarkers=({deps:e})=>{if(e.length)for(let n=0;n<e.length;n++)e[n].w|=trackOpBit},finalizeDepMarkers=e=>{const{deps:n}=e;if(n.length){let r=0;for(let o=0;o<n.length;o++){const s=n[o];wasTracked(s)&&!newTracked(s)?s.delete(e):n[r++]=s,s.w&=~trackOpBit,s.n&=~trackOpBit}n.length=r}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(n,r=null,o){this.fn=n,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,o)}run(){if(!this.active)return this.fn();let n=activeEffect,r=shouldTrack;for(;n;){if(n===this)return;n=n.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(e){const{deps:n}=e;if(n.length){for(let r=0;r<n.length;r++)n[r].delete(e);n.length=0}}function effect(e,n){e.effect&&(e=e.effect.fn);const r=new ReactiveEffect(e);n&&(extend$2(r,n),n.scope&&recordEffectScope(r,n.scope)),(!n||!n.lazy)&&r.run();const o=r.run.bind(r);return o.effect=r,o}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function track(e,n,r){if(shouldTrack&&activeEffect){let o=targetMap.get(e);o||targetMap.set(e,o=new Map);let s=o.get(r);s||o.set(r,s=createDep()),trackEffects(s)}}function trackEffects(e,n){let r=!1;effectTrackDepth<=maxMarkerBits?newTracked(e)||(e.n|=trackOpBit,r=!wasTracked(e)):r=!e.has(activeEffect),r&&(e.add(activeEffect),activeEffect.deps.push(e))}function trigger$1(e,n,r,o,s,u){const d=targetMap.get(e);if(!d)return;let f=[];if(n==="clear")f=[...d.values()];else if(r==="length"&&isArray$4(e)){const v=Number(o);d.forEach((m,_)=>{(_==="length"||_>=v)&&f.push(m)})}else switch(r!==void 0&&f.push(d.get(r)),n){case"add":isArray$4(e)?isIntegerKey(r)&&f.push(d.get("length")):(f.push(d.get(ITERATE_KEY)),isMap(e)&&f.push(d.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$4(e)||(f.push(d.get(ITERATE_KEY)),isMap(e)&&f.push(d.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&f.push(d.get(ITERATE_KEY));break}if(f.length===1)f[0]&&triggerEffects(f[0]);else{const v=[];for(const m of f)m&&v.push(...m);triggerEffects(createDep(v))}}function triggerEffects(e,n){const r=isArray$4(e)?e:[...e];for(const o of r)o.computed&&triggerEffect(o);for(const o of r)o.computed||triggerEffect(o)}function triggerEffect(e,n){(e!==activeEffect||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function getDepFromReactive(e,n){var r;return(r=targetMap.get(e))===null||r===void 0?void 0:r.get(n)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol$2)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach(n=>{e[n]=function(...r){const o=toRaw(this);for(let u=0,d=this.length;u<d;u++)track(o,"get",u+"");const s=o[n](...r);return s===-1||s===!1?o[n](...r.map(toRaw)):s}}),["push","pop","shift","unshift","splice"].forEach(n=>{e[n]=function(...r){pauseTracking();const o=toRaw(this)[n].apply(this,r);return resetTracking(),o}}),e}function hasOwnProperty$d(e){const n=toRaw(this);return track(n,"has",e),n.hasOwnProperty(e)}function createGetter(e=!1,n=!1){return function(o,s,u){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_isShallow")return n;if(s==="__v_raw"&&u===(e?n?shallowReadonlyMap:readonlyMap:n?shallowReactiveMap:reactiveMap).get(o))return o;const d=isArray$4(o);if(!e){if(d&&hasOwn$1(arrayInstrumentations,s))return Reflect.get(arrayInstrumentations,s,u);if(s==="hasOwnProperty")return hasOwnProperty$d}const f=Reflect.get(o,s,u);return(isSymbol$2(s)?builtInSymbols.has(s):isNonTrackableKeys(s))||(e||track(o,"get",s),n)?f:isRef(f)?d&&isIntegerKey(s)?f:f.value:isObject$5(f)?e?readonly(f):reactive(f):f}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(e=!1){return function(r,o,s,u){let d=r[o];if(isReadonly(d)&&isRef(d)&&!isRef(s))return!1;if(!e&&(!isShallow(s)&&!isReadonly(s)&&(d=toRaw(d),s=toRaw(s)),!isArray$4(r)&&isRef(d)&&!isRef(s)))return d.value=s,!0;const f=isArray$4(r)&&isIntegerKey(o)?Number(o)<r.length:hasOwn$1(r,o),v=Reflect.set(r,o,s,u);return r===toRaw(u)&&(f?hasChanged(s,d)&&trigger$1(r,"set",o,s):trigger$1(r,"add",o,s)),v}}function deleteProperty(e,n){const r=hasOwn$1(e,n);e[n];const o=Reflect.deleteProperty(e,n);return o&&r&&trigger$1(e,"delete",n,void 0),o}function has$1(e,n){const r=Reflect.has(e,n);return(!isSymbol$2(n)||!builtInSymbols.has(n))&&track(e,"has",n),r}function ownKeys$2(e){return track(e,"iterate",isArray$4(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$1,ownKeys:ownKeys$2},readonlyHandlers={get:readonlyGet,set(e,n){return!0},deleteProperty(e,n){return!0}},shallowReactiveHandlers=extend$2({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function get$2(e,n,r=!1,o=!1){e=e.__v_raw;const s=toRaw(e),u=toRaw(n);r||(n!==u&&track(s,"get",n),track(s,"get",u));const{has:d}=getProto(s),f=o?toShallow:r?toReadonly:toReactive;if(d.call(s,n))return f(e.get(n));if(d.call(s,u))return f(e.get(u));e!==s&&e.get(n)}function has(e,n=!1){const r=this.__v_raw,o=toRaw(r),s=toRaw(e);return n||(e!==s&&track(o,"has",e),track(o,"has",s)),e===s?r.has(e):r.has(e)||r.has(s)}function size$1(e,n=!1){return e=e.__v_raw,!n&&track(toRaw(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add(e){e=toRaw(e);const n=toRaw(this);return getProto(n).has.call(n,e)||(n.add(e),trigger$1(n,"add",e,e)),this}function set(e,n){n=toRaw(n);const r=toRaw(this),{has:o,get:s}=getProto(r);let u=o.call(r,e);u||(e=toRaw(e),u=o.call(r,e));const d=s.call(r,e);return r.set(e,n),u?hasChanged(n,d)&&trigger$1(r,"set",e,n):trigger$1(r,"add",e,n),this}function deleteEntry(e){const n=toRaw(this),{has:r,get:o}=getProto(n);let s=r.call(n,e);s||(e=toRaw(e),s=r.call(n,e)),o&&o.call(n,e);const u=n.delete(e);return s&&trigger$1(n,"delete",e,void 0),u}function clear(){const e=toRaw(this),n=e.size!==0,r=e.clear();return n&&trigger$1(e,"clear",void 0,void 0),r}function createForEach(e,n){return function(o,s){const u=this,d=u.__v_raw,f=toRaw(d),v=n?toShallow:e?toReadonly:toReactive;return!e&&track(f,"iterate",ITERATE_KEY),d.forEach((m,_)=>o.call(s,v(m),v(_),u))}}function createIterableMethod(e,n,r){return function(...o){const s=this.__v_raw,u=toRaw(s),d=isMap(u),f=e==="entries"||e===Symbol.iterator&&d,v=e==="keys"&&d,m=s[e](...o),_=r?toShallow:n?toReadonly:toReactive;return!n&&track(u,"iterate",v?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:g,done:y}=m.next();return y?{value:g,done:y}:{value:f?[_(g[0]),_(g[1])]:_(g),done:y}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...n){return e==="delete"?!1:this}}function createInstrumentations(){const e={get(u){return get$2(this,u)},get size(){return size$1(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},n={get(u){return get$2(this,u,!1,!0)},get size(){return size$1(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},r={get(u){return get$2(this,u,!0)},get size(){return size$1(this,!0)},has(u){return has.call(this,u,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},o={get(u){return get$2(this,u,!0,!0)},get size(){return size$1(this,!0)},has(u){return has.call(this,u,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(u=>{e[u]=createIterableMethod(u,!1,!1),r[u]=createIterableMethod(u,!0,!1),n[u]=createIterableMethod(u,!1,!0),o[u]=createIterableMethod(u,!0,!0)}),[e,r,n,o]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,n){const r=n?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(o,s,u)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?o:Reflect.get(hasOwn$1(r,s)&&s in o?r:o,s,u)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(e,n,r,o,s){if(!isObject$5(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const u=s.get(e);if(u)return u;const d=getTargetType(e);if(d===0)return e;const f=new Proxy(e,d===2?o:r);return s.set(e,f),f}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw(e){const n=e&&e.__v_raw;return n?toRaw(n):e}function markRaw(e){return def(e,"__v_skip",!0),e}const toReactive=e=>isObject$5(e)?reactive(e):e,toReadonly=e=>isObject$5(e)?readonly(e):e;function trackRefValue(e){shouldTrack&&activeEffect&&(e=toRaw(e),trackEffects(e.dep||(e.dep=createDep())))}function triggerRefValue(e,n){e=toRaw(e);const r=e.dep;r&&triggerEffects(r)}function isRef(e){return!!(e&&e.__v_isRef===!0)}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,n){return isRef(e)?e:new RefImpl(e,n)}class RefImpl{constructor(n,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?n:toRaw(n),this._value=r?n:toReactive(n)}get value(){return trackRefValue(this),this._value}set value(n){const r=this.__v_isShallow||isShallow(n)||isReadonly(n);n=r?n:toRaw(n),hasChanged(n,this._rawValue)&&(this._rawValue=n,this._value=r?n:toReactive(n),triggerRefValue(this))}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,n,r)=>unref(Reflect.get(e,n,r)),set:(e,n,r,o)=>{const s=e[n];return isRef(s)&&!isRef(r)?(s.value=r,!0):Reflect.set(e,n,r,o)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}function toRefs(e){const n=isArray$4(e)?new Array(e.length):{};for(const r in e)n[r]=toRef(e,r);return n}class ObjectRefImpl{constructor(n,r,o){this._object=n,this._key=r,this._defaultValue=o,this.__v_isRef=!0}get value(){const n=this._object[this._key];return n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}function toRef(e,n,r){const o=e[n];return isRef(o)?o:new ObjectRefImpl(e,n,r)}var _a$1$1;class ComputedRefImpl{constructor(n,r,o,s){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this[_a$1$1]=!1,this._dirty=!0,this.effect=new ReactiveEffect(n,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=o}get value(){const n=toRaw(this);return trackRefValue(n),(n._dirty||!n._cacheable)&&(n._dirty=!1,n._value=n.effect.run()),n._value}set value(n){this._setter(n)}}_a$1$1="__v_isReadonly";function computed$1(e,n,r=!1){let o,s;const u=isFunction$3(e);return u?(o=e,s=NOOP):(o=e.get,s=e.set),new ComputedRefImpl(o,s,u||!s,r)}function warn$4(e,...n){}function callWithErrorHandling(e,n,r,o){let s;try{s=o?e(...o):e()}catch(u){handleError(u,n,r)}return s}function callWithAsyncErrorHandling(e,n,r,o){if(isFunction$3(e)){const u=callWithErrorHandling(e,n,r,o);return u&&isPromise(u)&&u.catch(d=>{handleError(d,n,r)}),u}const s=[];for(let u=0;u<e.length;u++)s.push(callWithAsyncErrorHandling(e[u],n,r,o));return s}function handleError(e,n,r,o=!0){const s=n?n.vnode:null;if(n){let u=n.parent;const d=n.proxy,f=r;for(;u;){const m=u.ec;if(m){for(let _=0;_<m.length;_++)if(m[_](e,d,f)===!1)return}u=u.parent}const v=n.appContext.config.errorHandler;if(v){callWithErrorHandling(v,null,10,[e,d,f]);return}}logError(e,r,s,o)}function logError(e,n,r,o=!0){console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const n=currentFlushPromise||resolvedPromise;return e?n.then(this?e.bind(this):e):n}function findInsertionIndex(e){let n=flushIndex+1,r=queue.length;for(;n<r;){const o=n+r>>>1;getId(queue[o])<e?n=o+1:r=o}return n}function queueJob(e){(!queue.length||!queue.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex))&&(e.id==null?queue.push(e):queue.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const n=queue.indexOf(e);n>flushIndex&&queue.splice(n,1)}function queuePostFlushCb(e){isArray$4(e)?pendingPostFlushCbs.push(...e):(!activePostFlushCbs||!activePostFlushCbs.includes(e,e.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(e),queueFlush()}function flushPreFlushCbs(e,n=isFlushing?flushIndex+1:0){for(;n<queue.length;n++){const r=queue[n];r&&r.pre&&(queue.splice(n,1),n--,r())}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const n=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...n);return}for(activePostFlushCbs=n,activePostFlushCbs.sort((r,o)=>getId(r)-getId(o)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?1/0:e.id,comparator=(e,n)=>{const r=getId(e)-getId(n);if(r===0){if(e.pre&&!n.pre)return-1;if(n.pre&&!e.pre)return 1}return r};function flushJobs(e){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const n=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const r=queue[flushIndex];r&&r.active!==!1&&callWithErrorHandling(r,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(e,n,...r){if(e.isUnmounted)return;const o=e.vnode.props||EMPTY_OBJ;let s=r;const u=n.startsWith("update:"),d=u&&n.slice(7);if(d&&d in o){const _=`${d==="modelValue"?"model":d}Modifiers`,{number:g,trim:y}=o[_]||EMPTY_OBJ;y&&(s=r.map(w=>isString$4(w)?w.trim():w)),g&&(s=r.map(looseToNumber))}let f,v=o[f=toHandlerKey(n)]||o[f=toHandlerKey(camelize(n))];!v&&u&&(v=o[f=toHandlerKey(hyphenate(n))]),v&&callWithAsyncErrorHandling(v,e,6,s);const m=o[f+"Once"];if(m){if(!e.emitted)e.emitted={};else if(e.emitted[f])return;e.emitted[f]=!0,callWithAsyncErrorHandling(m,e,6,s)}}function normalizeEmitsOptions(e,n,r=!1){const o=n.emitsCache,s=o.get(e);if(s!==void 0)return s;const u=e.emits;let d={},f=!1;if(!isFunction$3(e)){const v=m=>{const _=normalizeEmitsOptions(m,n,!0);_&&(f=!0,extend$2(d,_))};!r&&n.mixins.length&&n.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}return!u&&!f?(isObject$5(e)&&o.set(e,null),null):(isArray$4(u)?u.forEach(v=>d[v]=null):extend$2(d,u),isObject$5(e)&&o.set(e,d),d)}function isEmitListener(e,n){return!e||!isOn(n)?!1:(n=n.slice(2).replace(/Once$/,""),hasOwn$1(e,n[0].toLowerCase()+n.slice(1))||hasOwn$1(e,hyphenate(n))||hasOwn$1(e,n))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const n=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,n}function pushScopeId(e){currentScopeId=e}function popScopeId(){currentScopeId=null}function withCtx(e,n=currentRenderingInstance,r){if(!n||e._n)return e;const o=(...s)=>{o._d&&setBlockTracking(-1);const u=setCurrentRenderingInstance(n);let d;try{d=e(...s)}finally{setCurrentRenderingInstance(u),o._d&&setBlockTracking(1)}return d};return o._n=!0,o._c=!0,o._d=!0,o}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:n,vnode:r,proxy:o,withProxy:s,props:u,propsOptions:[d],slots:f,attrs:v,emit:m,render:_,renderCache:g,data:y,setupState:w,ctx:x,inheritAttrs:k}=e;let S,E;const T=setCurrentRenderingInstance(e);try{if(r.shapeFlag&4){const I=s||o;S=normalizeVNode(_.call(I,I,g,u,w,y,x)),E=v}else{const I=n;S=normalizeVNode(I.length>1?I(u,{attrs:v,slots:f,emit:m}):I(u,null)),E=n.props?v:getFunctionalFallthrough(v)}}catch(I){blockStack.length=0,handleError(I,e,1),S=createVNode(Comment)}let M=S;if(E&&k!==!1){const I=Object.keys(E),{shapeFlag:F}=M;I.length&&F&7&&(d&&I.some(isModelListener)&&(E=filterModelListeners(E,d)),M=cloneVNode(M,E))}return r.dirs&&(M=cloneVNode(M),M.dirs=M.dirs?M.dirs.concat(r.dirs):r.dirs),r.transition&&(M.transition=r.transition),S=M,setCurrentRenderingInstance(T),S}const getFunctionalFallthrough=e=>{let n;for(const r in e)(r==="class"||r==="style"||isOn(r))&&((n||(n={}))[r]=e[r]);return n},filterModelListeners=(e,n)=>{const r={};for(const o in e)(!isModelListener(o)||!(o.slice(9)in n))&&(r[o]=e[o]);return r};function shouldUpdateComponent(e,n,r){const{props:o,children:s,component:u}=e,{props:d,children:f,patchFlag:v}=n,m=u.emitsOptions;if(n.dirs||n.transition)return!0;if(r&&v>=0){if(v&1024)return!0;if(v&16)return o?hasPropsChanged(o,d,m):!!d;if(v&8){const _=n.dynamicProps;for(let g=0;g<_.length;g++){const y=_[g];if(d[y]!==o[y]&&!isEmitListener(m,y))return!0}}}else return(s||f)&&(!f||!f.$stable)?!0:o===d?!1:o?d?hasPropsChanged(o,d,m):!0:!!d;return!1}function hasPropsChanged(e,n,r){const o=Object.keys(n);if(o.length!==Object.keys(e).length)return!0;for(let s=0;s<o.length;s++){const u=o[s];if(n[u]!==e[u]&&!isEmitListener(r,u))return!0}return!1}function updateHOCHostEl({vnode:e,parent:n},r){for(;n&&n.subTree===e;)(e=n.vnode).el=r,n=n.parent}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,n){n&&n.pendingBranch?isArray$4(e)?n.effects.push(...e):n.effects.push(e):queuePostFlushCb(e)}function provide(e,n){if(currentInstance){let r=currentInstance.provides;const o=currentInstance.parent&&currentInstance.parent.provides;o===r&&(r=currentInstance.provides=Object.create(o)),r[e]=n}}function inject(e,n,r=!1){const o=currentInstance||currentRenderingInstance;if(o){const s=o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides;if(s&&e in s)return s[e];if(arguments.length>1)return r&&isFunction$3(n)?n.call(o.proxy):n}}function watchEffect(e,n){return doWatch(e,null,n)}const INITIAL_WATCHER_VALUE={};function watch(e,n,r){return doWatch(e,n,r)}function doWatch(e,n,{immediate:r,deep:o,flush:s,onTrack:u,onTrigger:d}=EMPTY_OBJ){const f=getCurrentScope()===(currentInstance==null?void 0:currentInstance.scope)?currentInstance:null;let v,m=!1,_=!1;if(isRef(e)?(v=()=>e.value,m=isShallow(e)):isReactive(e)?(v=()=>e,o=!0):isArray$4(e)?(_=!0,m=e.some(M=>isReactive(M)||isShallow(M)),v=()=>e.map(M=>{if(isRef(M))return M.value;if(isReactive(M))return traverse(M);if(isFunction$3(M))return callWithErrorHandling(M,f,2)})):isFunction$3(e)?n?v=()=>callWithErrorHandling(e,f,2):v=()=>{if(!(f&&f.isUnmounted))return g&&g(),callWithAsyncErrorHandling(e,f,3,[y])}:v=NOOP,n&&o){const M=v;v=()=>traverse(M())}let g,y=M=>{g=E.onStop=()=>{callWithErrorHandling(M,f,4)}},w;if(isInSSRComponentSetup)if(y=NOOP,n?r&&callWithAsyncErrorHandling(n,f,3,[v(),_?[]:void 0,y]):v(),s==="sync"){const M=useSSRContext();w=M.__watcherHandles||(M.__watcherHandles=[])}else return NOOP;let x=_?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const k=()=>{if(!!E.active)if(n){const M=E.run();(o||m||(_?M.some((I,F)=>hasChanged(I,x[F])):hasChanged(M,x)))&&(g&&g(),callWithAsyncErrorHandling(n,f,3,[M,x===INITIAL_WATCHER_VALUE?void 0:_&&x[0]===INITIAL_WATCHER_VALUE?[]:x,y]),x=M)}else E.run()};k.allowRecurse=!!n;let S;s==="sync"?S=k:s==="post"?S=()=>queuePostRenderEffect(k,f&&f.suspense):(k.pre=!0,f&&(k.id=f.uid),S=()=>queueJob(k));const E=new ReactiveEffect(v,S);n?r?k():x=E.run():s==="post"?queuePostRenderEffect(E.run.bind(E),f&&f.suspense):E.run();const T=()=>{E.stop(),f&&f.scope&&remove(f.scope.effects,E)};return w&&w.push(T),T}function instanceWatch(e,n,r){const o=this.proxy,s=isString$4(e)?e.includes(".")?createPathGetter(o,e):()=>o[e]:e.bind(o,o);let u;isFunction$3(n)?u=n:(u=n.handler,r=n);const d=currentInstance;setCurrentInstance(this);const f=doWatch(s,u.bind(o),r);return d?setCurrentInstance(d):unsetCurrentInstance(),f}function createPathGetter(e,n){const r=n.split(".");return()=>{let o=e;for(let s=0;s<r.length&&o;s++)o=o[r[s]];return o}}function traverse(e,n){if(!isObject$5(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),isRef(e))traverse(e.value,n);else if(isArray$4(e))for(let r=0;r<e.length;r++)traverse(e[r],n);else if(isSet(e)||isMap(e))e.forEach(r=>{traverse(r,n)});else if(isPlainObject$4(e))for(const r in e)traverse(e[r],n);return e}function useTransitionState(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{e.isMounted=!0}),onBeforeUnmount(()=>{e.isUnmounting=!0}),e}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(e,{slots:n}){const r=getCurrentInstance(),o=useTransitionState();let s;return()=>{const u=n.default&&getTransitionRawChildren(n.default(),!0);if(!u||!u.length)return;let d=u[0];if(u.length>1){for(const k of u)if(k.type!==Comment){d=k;break}}const f=toRaw(e),{mode:v}=f;if(o.isLeaving)return emptyPlaceholder(d);const m=getKeepAliveChild(d);if(!m)return emptyPlaceholder(d);const _=resolveTransitionHooks(m,f,o,r);setTransitionHooks(m,_);const g=r.subTree,y=g&&getKeepAliveChild(g);let w=!1;const{getTransitionKey:x}=m.type;if(x){const k=x();s===void 0?s=k:k!==s&&(s=k,w=!0)}if(y&&y.type!==Comment&&(!isSameVNodeType(m,y)||w)){const k=resolveTransitionHooks(y,f,o,r);if(setTransitionHooks(y,k),v==="out-in")return o.isLeaving=!0,k.afterLeave=()=>{o.isLeaving=!1,r.update.active!==!1&&r.update()},emptyPlaceholder(d);v==="in-out"&&m.type!==Comment&&(k.delayLeave=(S,E,T)=>{const M=getLeavingNodesForType(o,y);M[String(y.key)]=y,S._leaveCb=()=>{E(),S._leaveCb=void 0,delete _.delayedLeave},_.delayedLeave=T})}return d}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(e,n){const{leavingVNodes:r}=e;let o=r.get(n.type);return o||(o=Object.create(null),r.set(n.type,o)),o}function resolveTransitionHooks(e,n,r,o){const{appear:s,mode:u,persisted:d=!1,onBeforeEnter:f,onEnter:v,onAfterEnter:m,onEnterCancelled:_,onBeforeLeave:g,onLeave:y,onAfterLeave:w,onLeaveCancelled:x,onBeforeAppear:k,onAppear:S,onAfterAppear:E,onAppearCancelled:T}=n,M=String(e.key),I=getLeavingNodesForType(r,e),F=(D,X)=>{D&&callWithAsyncErrorHandling(D,o,9,X)},O=(D,X)=>{const U=X[1];F(D,X),isArray$4(D)?D.every(Z=>Z.length<=1)&&U():D.length<=1&&U()},N={mode:u,persisted:d,beforeEnter(D){let X=f;if(!r.isMounted)if(s)X=k||f;else return;D._leaveCb&&D._leaveCb(!0);const U=I[M];U&&isSameVNodeType(e,U)&&U.el._leaveCb&&U.el._leaveCb(),F(X,[D])},enter(D){let X=v,U=m,Z=_;if(!r.isMounted)if(s)X=S||v,U=E||m,Z=T||_;else return;let j=!1;const Q=D._enterCb=ve=>{j||(j=!0,ve?F(Z,[D]):F(U,[D]),N.delayedLeave&&N.delayedLeave(),D._enterCb=void 0)};X?O(X,[D,Q]):Q()},leave(D,X){const U=String(e.key);if(D._enterCb&&D._enterCb(!0),r.isUnmounting)return X();F(g,[D]);let Z=!1;const j=D._leaveCb=Q=>{Z||(Z=!0,X(),Q?F(x,[D]):F(w,[D]),D._leaveCb=void 0,I[U]===e&&delete I[U])};I[U]=e,y?O(y,[D,j]):j()},clone(D){return resolveTransitionHooks(D,n,r,o)}};return N}function emptyPlaceholder(e){if(isKeepAlive(e))return e=cloneVNode(e),e.children=null,e}function getKeepAliveChild(e){return isKeepAlive(e)?e.children?e.children[0]:void 0:e}function setTransitionHooks(e,n){e.shapeFlag&6&&e.component?setTransitionHooks(e.component.subTree,n):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function getTransitionRawChildren(e,n=!1,r){let o=[],s=0;for(let u=0;u<e.length;u++){let d=e[u];const f=r==null?d.key:String(r)+String(d.key!=null?d.key:u);d.type===Fragment?(d.patchFlag&128&&s++,o=o.concat(getTransitionRawChildren(d.children,n,f))):(n||d.type!==Comment)&&o.push(f!=null?cloneVNode(d,{key:f}):d)}if(s>1)for(let u=0;u<o.length;u++)o[u].patchFlag=-2;return o}function defineComponent(e){return isFunction$3(e)?{setup:e,name:e.name}:e}const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,n){registerKeepAliveHook(e,"a",n)}function onDeactivated(e,n){registerKeepAliveHook(e,"da",n)}function registerKeepAliveHook(e,n,r=currentInstance){const o=e.__wdc||(e.__wdc=()=>{let s=r;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(injectHook(n,o,r),r){let s=r.parent;for(;s&&s.parent;)isKeepAlive(s.parent.vnode)&&injectToKeepAliveRoot(o,n,r,s),s=s.parent}}function injectToKeepAliveRoot(e,n,r,o){const s=injectHook(n,e,o,!0);onUnmounted(()=>{remove(o[n],s)},r)}function injectHook(e,n,r=currentInstance,o=!1){if(r){const s=r[e]||(r[e]=[]),u=n.__weh||(n.__weh=(...d)=>{if(r.isUnmounted)return;pauseTracking(),setCurrentInstance(r);const f=callWithAsyncErrorHandling(n,r,e,d);return unsetCurrentInstance(),resetTracking(),f});return o?s.unshift(u):s.push(u),u}}const createHook=e=>(n,r=currentInstance)=>(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...o)=>n(...o),r),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,n=currentInstance){injectHook("ec",e,n)}function withDirectives(e,n){const r=currentRenderingInstance;if(r===null)return e;const o=getExposeProxy(r)||r.proxy,s=e.dirs||(e.dirs=[]);for(let u=0;u<n.length;u++){let[d,f,v,m=EMPTY_OBJ]=n[u];d&&(isFunction$3(d)&&(d={mounted:d,updated:d}),d.deep&&traverse(f),s.push({dir:d,instance:o,value:f,oldValue:void 0,arg:v,modifiers:m}))}return e}function invokeDirectiveHook(e,n,r,o){const s=e.dirs,u=n&&n.dirs;for(let d=0;d<s.length;d++){const f=s[d];u&&(f.oldValue=u[d].value);let v=f.dir[o];v&&(pauseTracking(),callWithAsyncErrorHandling(v,r,8,[e.el,f,e,n]),resetTracking())}}const COMPONENTS="components";function resolveComponent(e,n){return resolveAsset(COMPONENTS,e,!0,n)||e}const NULL_DYNAMIC_COMPONENT=Symbol();function resolveAsset(e,n,r=!0,o=!1){const s=currentRenderingInstance||currentInstance;if(s){const u=s.type;if(e===COMPONENTS){const f=getComponentName(u,!1);if(f&&(f===n||f===camelize(n)||f===capitalize$1(camelize(n))))return u}const d=resolve(s[e]||u[e],n)||resolve(s.appContext[e],n);return!d&&o?u:d}}function resolve(e,n){return e&&(e[n]||e[camelize(n)]||e[capitalize$1(camelize(n))])}function renderList(e,n,r,o){let s;const u=r&&r[o];if(isArray$4(e)||isString$4(e)){s=new Array(e.length);for(let d=0,f=e.length;d<f;d++)s[d]=n(e[d],d,void 0,u&&u[d])}else if(typeof e=="number"){s=new Array(e);for(let d=0;d<e;d++)s[d]=n(d+1,d,void 0,u&&u[d])}else if(isObject$5(e))if(e[Symbol.iterator])s=Array.from(e,(d,f)=>n(d,f,void 0,u&&u[f]));else{const d=Object.keys(e);s=new Array(d.length);for(let f=0,v=d.length;f<v;f++){const m=d[f];s[f]=n(e[m],m,f,u&&u[f])}}else s=[];return r&&(r[o]=s),s}function renderSlot(e,n,r={},o,s){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return n!=="default"&&(r.name=n),createVNode("slot",r,o&&o());let u=e[n];u&&u._c&&(u._d=!1),openBlock();const d=u&&ensureValidVNode$1(u(r)),f=createBlock(Fragment,{key:r.key||d&&d.key||`_${n}`},d||(o?o():[]),d&&e._===1?64:-2);return!s&&f.scopeId&&(f.slotScopeIds=[f.scopeId+"-s"]),u&&u._c&&(u._d=!0),f}function ensureValidVNode$1(e){return e.some(n=>isVNode$1(n)?!(n.type===Comment||n.type===Fragment&&!ensureValidVNode$1(n.children)):!0)?e:null}function toHandlers(e,n){const r={};for(const o in e)r[n&&/[A-Z]/.test(o)?`on:${o}`:toHandlerKey(o)]=e[o];return r}const getPublicInstance=e=>e?isStatefulComponent(e)?getExposeProxy(e)||e.proxy:getPublicInstance(e.parent):null,publicPropertiesMap=extend$2(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>queueJob(e.update)),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,n)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn$1(e,n),PublicInstanceProxyHandlers={get({_:e},n){const{ctx:r,setupState:o,data:s,props:u,accessCache:d,type:f,appContext:v}=e;let m;if(n[0]!=="$"){const w=d[n];if(w!==void 0)switch(w){case 1:return o[n];case 2:return s[n];case 4:return r[n];case 3:return u[n]}else{if(hasSetupBinding(o,n))return d[n]=1,o[n];if(s!==EMPTY_OBJ&&hasOwn$1(s,n))return d[n]=2,s[n];if((m=e.propsOptions[0])&&hasOwn$1(m,n))return d[n]=3,u[n];if(r!==EMPTY_OBJ&&hasOwn$1(r,n))return d[n]=4,r[n];shouldCacheAccess&&(d[n]=0)}}const _=publicPropertiesMap[n];let g,y;if(_)return n==="$attrs"&&track(e,"get",n),_(e);if((g=f.__cssModules)&&(g=g[n]))return g;if(r!==EMPTY_OBJ&&hasOwn$1(r,n))return d[n]=4,r[n];if(y=v.config.globalProperties,hasOwn$1(y,n))return y[n]},set({_:e},n,r){const{data:o,setupState:s,ctx:u}=e;return hasSetupBinding(s,n)?(s[n]=r,!0):o!==EMPTY_OBJ&&hasOwn$1(o,n)?(o[n]=r,!0):hasOwn$1(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(u[n]=r,!0)},has({_:{data:e,setupState:n,accessCache:r,ctx:o,appContext:s,propsOptions:u}},d){let f;return!!r[d]||e!==EMPTY_OBJ&&hasOwn$1(e,d)||hasSetupBinding(n,d)||(f=u[0])&&hasOwn$1(f,d)||hasOwn$1(o,d)||hasOwn$1(publicPropertiesMap,d)||hasOwn$1(s.config.globalProperties,d)},defineProperty(e,n,r){return r.get!=null?e._.accessCache[n]=0:hasOwn$1(r,"value")&&this.set(e,n,r.value,null),Reflect.defineProperty(e,n,r)}};let shouldCacheAccess=!0;function applyOptions(e){const n=resolveMergedOptions(e),r=e.proxy,o=e.ctx;shouldCacheAccess=!1,n.beforeCreate&&callHook$1(n.beforeCreate,e,"bc");const{data:s,computed:u,methods:d,watch:f,provide:v,inject:m,created:_,beforeMount:g,mounted:y,beforeUpdate:w,updated:x,activated:k,deactivated:S,beforeDestroy:E,beforeUnmount:T,destroyed:M,unmounted:I,render:F,renderTracked:O,renderTriggered:N,errorCaptured:D,serverPrefetch:X,expose:U,inheritAttrs:Z,components:j,directives:Q,filters:ve}=n;if(m&&resolveInjections(m,o,null,e.appContext.config.unwrapInjectedRef),d)for(const oe in d){const ne=d[oe];isFunction$3(ne)&&(o[oe]=ne.bind(r))}if(s){const oe=s.call(r,r);isObject$5(oe)&&(e.data=reactive(oe))}if(shouldCacheAccess=!0,u)for(const oe in u){const ne=u[oe],q=isFunction$3(ne)?ne.bind(r,r):isFunction$3(ne.get)?ne.get.bind(r,r):NOOP,H=!isFunction$3(ne)&&isFunction$3(ne.set)?ne.set.bind(r):NOOP,Y=computed({get:q,set:H});Object.defineProperty(o,oe,{enumerable:!0,configurable:!0,get:()=>Y.value,set:le=>Y.value=le})}if(f)for(const oe in f)createWatcher(f[oe],o,r,oe);if(v){const oe=isFunction$3(v)?v.call(r):v;Reflect.ownKeys(oe).forEach(ne=>{provide(ne,oe[ne])})}_&&callHook$1(_,e,"c");function we(oe,ne){isArray$4(ne)?ne.forEach(q=>oe(q.bind(r))):ne&&oe(ne.bind(r))}if(we(onBeforeMount,g),we(onMounted,y),we(onBeforeUpdate,w),we(onUpdated,x),we(onActivated,k),we(onDeactivated,S),we(onErrorCaptured,D),we(onRenderTracked,O),we(onRenderTriggered,N),we(onBeforeUnmount,T),we(onUnmounted,I),we(onServerPrefetch,X),isArray$4(U))if(U.length){const oe=e.exposed||(e.exposed={});U.forEach(ne=>{Object.defineProperty(oe,ne,{get:()=>r[ne],set:q=>r[ne]=q})})}else e.exposed||(e.exposed={});F&&e.render===NOOP&&(e.render=F),Z!=null&&(e.inheritAttrs=Z),j&&(e.components=j),Q&&(e.directives=Q)}function resolveInjections(e,n,r=NOOP,o=!1){isArray$4(e)&&(e=normalizeInject(e));for(const s in e){const u=e[s];let d;isObject$5(u)?"default"in u?d=inject(u.from||s,u.default,!0):d=inject(u.from||s):d=inject(u),isRef(d)&&o?Object.defineProperty(n,s,{enumerable:!0,configurable:!0,get:()=>d.value,set:f=>d.value=f}):n[s]=d}}function callHook$1(e,n,r){callWithAsyncErrorHandling(isArray$4(e)?e.map(o=>o.bind(n.proxy)):e.bind(n.proxy),n,r)}function createWatcher(e,n,r,o){const s=o.includes(".")?createPathGetter(r,o):()=>r[o];if(isString$4(e)){const u=n[e];isFunction$3(u)&&watch(s,u)}else if(isFunction$3(e))watch(s,e.bind(r));else if(isObject$5(e))if(isArray$4(e))e.forEach(u=>createWatcher(u,n,r,o));else{const u=isFunction$3(e.handler)?e.handler.bind(r):n[e.handler];isFunction$3(u)&&watch(s,u,e)}}function resolveMergedOptions(e){const n=e.type,{mixins:r,extends:o}=n,{mixins:s,optionsCache:u,config:{optionMergeStrategies:d}}=e.appContext,f=u.get(n);let v;return f?v=f:!s.length&&!r&&!o?v=n:(v={},s.length&&s.forEach(m=>mergeOptions(v,m,d,!0)),mergeOptions(v,n,d)),isObject$5(n)&&u.set(n,v),v}function mergeOptions(e,n,r,o=!1){const{mixins:s,extends:u}=n;u&&mergeOptions(e,u,r,!0),s&&s.forEach(d=>mergeOptions(e,d,r,!0));for(const d in n)if(!(o&&d==="expose")){const f=internalOptionMergeStrats[d]||r&&r[d];e[d]=f?f(e[d],n[d]):n[d]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,n){return n?e?function(){return extend$2(isFunction$3(e)?e.call(this,this):e,isFunction$3(n)?n.call(this,this):n)}:n:e}function mergeInject(e,n){return mergeObjectOptions(normalizeInject(e),normalizeInject(n))}function normalizeInject(e){if(isArray$4(e)){const n={};for(let r=0;r<e.length;r++)n[e[r]]=e[r];return n}return e}function mergeAsArray(e,n){return e?[...new Set([].concat(e,n))]:n}function mergeObjectOptions(e,n){return e?extend$2(extend$2(Object.create(null),e),n):n}function mergeWatchOptions(e,n){if(!e)return n;if(!n)return e;const r=extend$2(Object.create(null),e);for(const o in n)r[o]=mergeAsArray(e[o],n[o]);return r}function initProps(e,n,r,o=!1){const s={},u={};def(u,InternalObjectKey,1),e.propsDefaults=Object.create(null),setFullProps(e,n,s,u);for(const d in e.propsOptions[0])d in s||(s[d]=void 0);r?e.props=o?s:shallowReactive(s):e.type.props?e.props=s:e.props=u,e.attrs=u}function updateProps(e,n,r,o){const{props:s,attrs:u,vnode:{patchFlag:d}}=e,f=toRaw(s),[v]=e.propsOptions;let m=!1;if((o||d>0)&&!(d&16)){if(d&8){const _=e.vnode.dynamicProps;for(let g=0;g<_.length;g++){let y=_[g];if(isEmitListener(e.emitsOptions,y))continue;const w=n[y];if(v)if(hasOwn$1(u,y))w!==u[y]&&(u[y]=w,m=!0);else{const x=camelize(y);s[x]=resolvePropValue(v,f,x,w,e,!1)}else w!==u[y]&&(u[y]=w,m=!0)}}}else{setFullProps(e,n,s,u)&&(m=!0);let _;for(const g in f)(!n||!hasOwn$1(n,g)&&((_=hyphenate(g))===g||!hasOwn$1(n,_)))&&(v?r&&(r[g]!==void 0||r[_]!==void 0)&&(s[g]=resolvePropValue(v,f,g,void 0,e,!0)):delete s[g]);if(u!==f)for(const g in u)(!n||!hasOwn$1(n,g)&&!0)&&(delete u[g],m=!0)}m&&trigger$1(e,"set","$attrs")}function setFullProps(e,n,r,o){const[s,u]=e.propsOptions;let d=!1,f;if(n)for(let v in n){if(isReservedProp(v))continue;const m=n[v];let _;s&&hasOwn$1(s,_=camelize(v))?!u||!u.includes(_)?r[_]=m:(f||(f={}))[_]=m:isEmitListener(e.emitsOptions,v)||(!(v in o)||m!==o[v])&&(o[v]=m,d=!0)}if(u){const v=toRaw(r),m=f||EMPTY_OBJ;for(let _=0;_<u.length;_++){const g=u[_];r[g]=resolvePropValue(s,v,g,m[g],e,!hasOwn$1(m,g))}}return d}function resolvePropValue(e,n,r,o,s,u){const d=e[r];if(d!=null){const f=hasOwn$1(d,"default");if(f&&o===void 0){const v=d.default;if(d.type!==Function&&isFunction$3(v)){const{propsDefaults:m}=s;r in m?o=m[r]:(setCurrentInstance(s),o=m[r]=v.call(null,n),unsetCurrentInstance())}else o=v}d[0]&&(u&&!f?o=!1:d[1]&&(o===""||o===hyphenate(r))&&(o=!0))}return o}function normalizePropsOptions(e,n,r=!1){const o=n.propsCache,s=o.get(e);if(s)return s;const u=e.props,d={},f=[];let v=!1;if(!isFunction$3(e)){const _=g=>{v=!0;const[y,w]=normalizePropsOptions(g,n,!0);extend$2(d,y),w&&f.push(...w)};!r&&n.mixins.length&&n.mixins.forEach(_),e.extends&&_(e.extends),e.mixins&&e.mixins.forEach(_)}if(!u&&!v)return isObject$5(e)&&o.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$4(u))for(let _=0;_<u.length;_++){const g=camelize(u[_]);validatePropName(g)&&(d[g]=EMPTY_OBJ)}else if(u)for(const _ in u){const g=camelize(_);if(validatePropName(g)){const y=u[_],w=d[g]=isArray$4(y)||isFunction$3(y)?{type:y}:Object.assign({},y);if(w){const x=getTypeIndex(Boolean,w.type),k=getTypeIndex(String,w.type);w[0]=x>-1,w[1]=k<0||x<k,(x>-1||hasOwn$1(w,"default"))&&f.push(g)}}}const m=[d,f];return isObject$5(e)&&o.set(e,m),m}function validatePropName(e){return e[0]!=="$"}function getType(e){const n=e&&e.toString().match(/^\s*(function|class) (\w+)/);return n?n[2]:e===null?"null":""}function isSameType(e,n){return getType(e)===getType(n)}function getTypeIndex(e,n){return isArray$4(n)?n.findIndex(r=>isSameType(r,e)):isFunction$3(n)&&isSameType(n,e)?0:-1}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray$4(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot=(e,n,r)=>{if(n._n)return n;const o=withCtx((...s)=>normalizeSlotValue(n(...s)),r);return o._c=!1,o},normalizeObjectSlots=(e,n,r)=>{const o=e._ctx;for(const s in e){if(isInternalKey(s))continue;const u=e[s];if(isFunction$3(u))n[s]=normalizeSlot(s,u,o);else if(u!=null){const d=normalizeSlotValue(u);n[s]=()=>d}}},normalizeVNodeSlots=(e,n)=>{const r=normalizeSlotValue(n);e.slots.default=()=>r},initSlots=(e,n)=>{if(e.vnode.shapeFlag&32){const r=n._;r?(e.slots=toRaw(n),def(n,"_",r)):normalizeObjectSlots(n,e.slots={})}else e.slots={},n&&normalizeVNodeSlots(e,n);def(e.slots,InternalObjectKey,1)},updateSlots=(e,n,r)=>{const{vnode:o,slots:s}=e;let u=!0,d=EMPTY_OBJ;if(o.shapeFlag&32){const f=n._;f?r&&f===1?u=!1:(extend$2(s,n),!r&&f===1&&delete s._):(u=!n.$stable,normalizeObjectSlots(n,s)),d=n}else n&&(normalizeVNodeSlots(e,n),d={default:1});if(u)for(const f in s)!isInternalKey(f)&&!(f in d)&&delete s[f]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,n){return function(o,s=null){isFunction$3(o)||(o=Object.assign({},o)),s!=null&&!isObject$5(s)&&(s=null);const u=createAppContext(),d=new Set;let f=!1;const v=u.app={_uid:uid$1++,_component:o,_props:s,_container:null,_context:u,_instance:null,version:version$2,get config(){return u.config},set config(m){},use(m,..._){return d.has(m)||(m&&isFunction$3(m.install)?(d.add(m),m.install(v,..._)):isFunction$3(m)&&(d.add(m),m(v,..._))),v},mixin(m){return u.mixins.includes(m)||u.mixins.push(m),v},component(m,_){return _?(u.components[m]=_,v):u.components[m]},directive(m,_){return _?(u.directives[m]=_,v):u.directives[m]},mount(m,_,g){if(!f){const y=createVNode(o,s);return y.appContext=u,_&&n?n(y,m):e(y,m,g),f=!0,v._container=m,m.__vue_app__=v,getExposeProxy(y.component)||y.component.proxy}},unmount(){f&&(e(null,v._container),delete v._container.__vue_app__)},provide(m,_){return u.provides[m]=_,v}};return v}}function setRef(e,n,r,o,s=!1){if(isArray$4(e)){e.forEach((y,w)=>setRef(y,n&&(isArray$4(n)?n[w]:n),r,o,s));return}if(isAsyncWrapper(o)&&!s)return;const u=o.shapeFlag&4?getExposeProxy(o.component)||o.component.proxy:o.el,d=s?null:u,{i:f,r:v}=e,m=n&&n.r,_=f.refs===EMPTY_OBJ?f.refs={}:f.refs,g=f.setupState;if(m!=null&&m!==v&&(isString$4(m)?(_[m]=null,hasOwn$1(g,m)&&(g[m]=null)):isRef(m)&&(m.value=null)),isFunction$3(v))callWithErrorHandling(v,f,12,[d,_]);else{const y=isString$4(v),w=isRef(v);if(y||w){const x=()=>{if(e.f){const k=y?hasOwn$1(g,v)?g[v]:_[v]:v.value;s?isArray$4(k)&&remove(k,u):isArray$4(k)?k.includes(u)||k.push(u):y?(_[v]=[u],hasOwn$1(g,v)&&(g[v]=_[v])):(v.value=[u],e.k&&(_[e.k]=v.value))}else y?(_[v]=d,hasOwn$1(g,v)&&(g[v]=d)):w&&(v.value=d,e.k&&(_[e.k]=d))};d?(x.id=-1,queuePostRenderEffect(x,r)):x()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,n){const r=getGlobalThis$1();r.__VUE__=!0;const{insert:o,remove:s,patchProp:u,createElement:d,createText:f,createComment:v,setText:m,setElementText:_,parentNode:g,nextSibling:y,setScopeId:w=NOOP,insertStaticContent:x}=e,k=(J,fe,re,_e=null,be=null,Ae=null,Le=!1,Ve=null,Fe=!!fe.dynamicChildren)=>{if(J===fe)return;J&&!isSameVNodeType(J,fe)&&(_e=Pe(J),le(J,be,Ae,!0),J=null),fe.patchFlag===-2&&(Fe=!1,fe.dynamicChildren=null);const{type:De,ref:We,shapeFlag:Re}=fe;switch(De){case Text$2:S(J,fe,re,_e);break;case Comment:E(J,fe,re,_e);break;case Static:J==null&&T(fe,re,_e,Le);break;case Fragment:j(J,fe,re,_e,be,Ae,Le,Ve,Fe);break;default:Re&1?F(J,fe,re,_e,be,Ae,Le,Ve,Fe):Re&6?Q(J,fe,re,_e,be,Ae,Le,Ve,Fe):(Re&64||Re&128)&&De.process(J,fe,re,_e,be,Ae,Le,Ve,Fe,$e)}We!=null&&be&&setRef(We,J&&J.ref,Ae,fe||J,!fe)},S=(J,fe,re,_e)=>{if(J==null)o(fe.el=f(fe.children),re,_e);else{const be=fe.el=J.el;fe.children!==J.children&&m(be,fe.children)}},E=(J,fe,re,_e)=>{J==null?o(fe.el=v(fe.children||""),re,_e):fe.el=J.el},T=(J,fe,re,_e)=>{[J.el,J.anchor]=x(J.children,fe,re,_e,J.el,J.anchor)},M=({el:J,anchor:fe},re,_e)=>{let be;for(;J&&J!==fe;)be=y(J),o(J,re,_e),J=be;o(fe,re,_e)},I=({el:J,anchor:fe})=>{let re;for(;J&&J!==fe;)re=y(J),s(J),J=re;s(fe)},F=(J,fe,re,_e,be,Ae,Le,Ve,Fe)=>{Le=Le||fe.type==="svg",J==null?O(fe,re,_e,be,Ae,Le,Ve,Fe):X(J,fe,be,Ae,Le,Ve,Fe)},O=(J,fe,re,_e,be,Ae,Le,Ve)=>{let Fe,De;const{type:We,props:Re,shapeFlag:He,transition:Ze,dirs:Xe}=J;if(Fe=J.el=d(J.type,Ae,Re&&Re.is,Re),He&8?_(Fe,J.children):He&16&&D(J.children,Fe,null,_e,be,Ae&&We!=="foreignObject",Le,Ve),Xe&&invokeDirectiveHook(J,null,_e,"created"),N(Fe,J,J.scopeId,Le,_e),Re){for(const ut in Re)ut!=="value"&&!isReservedProp(ut)&&u(Fe,ut,null,Re[ut],Ae,J.children,_e,be,Ee);"value"in Re&&u(Fe,"value",null,Re.value),(De=Re.onVnodeBeforeMount)&&invokeVNodeHook(De,_e,J)}Xe&&invokeDirectiveHook(J,null,_e,"beforeMount");const at=(!be||be&&!be.pendingBranch)&&Ze&&!Ze.persisted;at&&Ze.beforeEnter(Fe),o(Fe,fe,re),((De=Re&&Re.onVnodeMounted)||at||Xe)&&queuePostRenderEffect(()=>{De&&invokeVNodeHook(De,_e,J),at&&Ze.enter(Fe),Xe&&invokeDirectiveHook(J,null,_e,"mounted")},be)},N=(J,fe,re,_e,be)=>{if(re&&w(J,re),_e)for(let Ae=0;Ae<_e.length;Ae++)w(J,_e[Ae]);if(be){let Ae=be.subTree;if(fe===Ae){const Le=be.vnode;N(J,Le,Le.scopeId,Le.slotScopeIds,be.parent)}}},D=(J,fe,re,_e,be,Ae,Le,Ve,Fe=0)=>{for(let De=Fe;De<J.length;De++){const We=J[De]=Ve?cloneIfMounted(J[De]):normalizeVNode(J[De]);k(null,We,fe,re,_e,be,Ae,Le,Ve)}},X=(J,fe,re,_e,be,Ae,Le)=>{const Ve=fe.el=J.el;let{patchFlag:Fe,dynamicChildren:De,dirs:We}=fe;Fe|=J.patchFlag&16;const Re=J.props||EMPTY_OBJ,He=fe.props||EMPTY_OBJ;let Ze;re&&toggleRecurse(re,!1),(Ze=He.onVnodeBeforeUpdate)&&invokeVNodeHook(Ze,re,fe,J),We&&invokeDirectiveHook(fe,J,re,"beforeUpdate"),re&&toggleRecurse(re,!0);const Xe=be&&fe.type!=="foreignObject";if(De?U(J.dynamicChildren,De,Ve,re,_e,Xe,Ae):Le||ne(J,fe,Ve,null,re,_e,Xe,Ae,!1),Fe>0){if(Fe&16)Z(Ve,fe,Re,He,re,_e,be);else if(Fe&2&&Re.class!==He.class&&u(Ve,"class",null,He.class,be),Fe&4&&u(Ve,"style",Re.style,He.style,be),Fe&8){const at=fe.dynamicProps;for(let ut=0;ut<at.length;ut++){const ct=at[ut],mt=Re[ct],pt=He[ct];(pt!==mt||ct==="value")&&u(Ve,ct,mt,pt,be,J.children,re,_e,Ee)}}Fe&1&&J.children!==fe.children&&_(Ve,fe.children)}else!Le&&De==null&&Z(Ve,fe,Re,He,re,_e,be);((Ze=He.onVnodeUpdated)||We)&&queuePostRenderEffect(()=>{Ze&&invokeVNodeHook(Ze,re,fe,J),We&&invokeDirectiveHook(fe,J,re,"updated")},_e)},U=(J,fe,re,_e,be,Ae,Le)=>{for(let Ve=0;Ve<fe.length;Ve++){const Fe=J[Ve],De=fe[Ve],We=Fe.el&&(Fe.type===Fragment||!isSameVNodeType(Fe,De)||Fe.shapeFlag&70)?g(Fe.el):re;k(Fe,De,We,null,_e,be,Ae,Le,!0)}},Z=(J,fe,re,_e,be,Ae,Le)=>{if(re!==_e){if(re!==EMPTY_OBJ)for(const Ve in re)!isReservedProp(Ve)&&!(Ve in _e)&&u(J,Ve,re[Ve],null,Le,fe.children,be,Ae,Ee);for(const Ve in _e){if(isReservedProp(Ve))continue;const Fe=_e[Ve],De=re[Ve];Fe!==De&&Ve!=="value"&&u(J,Ve,De,Fe,Le,fe.children,be,Ae,Ee)}"value"in _e&&u(J,"value",re.value,_e.value)}},j=(J,fe,re,_e,be,Ae,Le,Ve,Fe)=>{const De=fe.el=J?J.el:f(""),We=fe.anchor=J?J.anchor:f("");let{patchFlag:Re,dynamicChildren:He,slotScopeIds:Ze}=fe;Ze&&(Ve=Ve?Ve.concat(Ze):Ze),J==null?(o(De,re,_e),o(We,re,_e),D(fe.children,re,We,be,Ae,Le,Ve,Fe)):Re>0&&Re&64&&He&&J.dynamicChildren?(U(J.dynamicChildren,He,re,be,Ae,Le,Ve),(fe.key!=null||be&&fe===be.subTree)&&traverseStaticChildren(J,fe,!0)):ne(J,fe,re,We,be,Ae,Le,Ve,Fe)},Q=(J,fe,re,_e,be,Ae,Le,Ve,Fe)=>{fe.slotScopeIds=Ve,J==null?fe.shapeFlag&512?be.ctx.activate(fe,re,_e,Le,Fe):ve(fe,re,_e,be,Ae,Le,Fe):Se(J,fe,Fe)},ve=(J,fe,re,_e,be,Ae,Le)=>{const Ve=J.component=createComponentInstance(J,_e,be);if(isKeepAlive(J)&&(Ve.ctx.renderer=$e),setupComponent(Ve),Ve.asyncDep){if(be&&be.registerDep(Ve,we),!J.el){const Fe=Ve.subTree=createVNode(Comment);E(null,Fe,fe,re)}return}we(Ve,J,fe,re,be,Ae,Le)},Se=(J,fe,re)=>{const _e=fe.component=J.component;if(shouldUpdateComponent(J,fe,re))if(_e.asyncDep&&!_e.asyncResolved){oe(_e,fe,re);return}else _e.next=fe,invalidateJob(_e.update),_e.update();else fe.el=J.el,_e.vnode=fe},we=(J,fe,re,_e,be,Ae,Le)=>{const Ve=()=>{if(J.isMounted){let{next:We,bu:Re,u:He,parent:Ze,vnode:Xe}=J,at=We,ut;toggleRecurse(J,!1),We?(We.el=Xe.el,oe(J,We,Le)):We=Xe,Re&&invokeArrayFns(Re),(ut=We.props&&We.props.onVnodeBeforeUpdate)&&invokeVNodeHook(ut,Ze,We,Xe),toggleRecurse(J,!0);const ct=renderComponentRoot(J),mt=J.subTree;J.subTree=ct,k(mt,ct,g(mt.el),Pe(mt),J,be,Ae),We.el=ct.el,at===null&&updateHOCHostEl(J,ct.el),He&&queuePostRenderEffect(He,be),(ut=We.props&&We.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(ut,Ze,We,Xe),be)}else{let We;const{el:Re,props:He}=fe,{bm:Ze,m:Xe,parent:at}=J,ut=isAsyncWrapper(fe);if(toggleRecurse(J,!1),Ze&&invokeArrayFns(Ze),!ut&&(We=He&&He.onVnodeBeforeMount)&&invokeVNodeHook(We,at,fe),toggleRecurse(J,!0),Re&&Ne){const ct=()=>{J.subTree=renderComponentRoot(J),Ne(Re,J.subTree,J,be,null)};ut?fe.type.__asyncLoader().then(()=>!J.isUnmounted&&ct()):ct()}else{const ct=J.subTree=renderComponentRoot(J);k(null,ct,re,_e,J,be,Ae),fe.el=ct.el}if(Xe&&queuePostRenderEffect(Xe,be),!ut&&(We=He&&He.onVnodeMounted)){const ct=fe;queuePostRenderEffect(()=>invokeVNodeHook(We,at,ct),be)}(fe.shapeFlag&256||at&&isAsyncWrapper(at.vnode)&&at.vnode.shapeFlag&256)&&J.a&&queuePostRenderEffect(J.a,be),J.isMounted=!0,fe=re=_e=null}},Fe=J.effect=new ReactiveEffect(Ve,()=>queueJob(De),J.scope),De=J.update=()=>Fe.run();De.id=J.uid,toggleRecurse(J,!0),De()},oe=(J,fe,re)=>{fe.component=J;const _e=J.vnode.props;J.vnode=fe,J.next=null,updateProps(J,fe.props,_e,re),updateSlots(J,fe.children,re),pauseTracking(),flushPreFlushCbs(),resetTracking()},ne=(J,fe,re,_e,be,Ae,Le,Ve,Fe=!1)=>{const De=J&&J.children,We=J?J.shapeFlag:0,Re=fe.children,{patchFlag:He,shapeFlag:Ze}=fe;if(He>0){if(He&128){H(De,Re,re,_e,be,Ae,Le,Ve,Fe);return}else if(He&256){q(De,Re,re,_e,be,Ae,Le,Ve,Fe);return}}Ze&8?(We&16&&Ee(De,be,Ae),Re!==De&&_(re,Re)):We&16?Ze&16?H(De,Re,re,_e,be,Ae,Le,Ve,Fe):Ee(De,be,Ae,!0):(We&8&&_(re,""),Ze&16&&D(Re,re,_e,be,Ae,Le,Ve,Fe))},q=(J,fe,re,_e,be,Ae,Le,Ve,Fe)=>{J=J||EMPTY_ARR,fe=fe||EMPTY_ARR;const De=J.length,We=fe.length,Re=Math.min(De,We);let He;for(He=0;He<Re;He++){const Ze=fe[He]=Fe?cloneIfMounted(fe[He]):normalizeVNode(fe[He]);k(J[He],Ze,re,null,be,Ae,Le,Ve,Fe)}De>We?Ee(J,be,Ae,!0,!1,Re):D(fe,re,_e,be,Ae,Le,Ve,Fe,Re)},H=(J,fe,re,_e,be,Ae,Le,Ve,Fe)=>{let De=0;const We=fe.length;let Re=J.length-1,He=We-1;for(;De<=Re&&De<=He;){const Ze=J[De],Xe=fe[De]=Fe?cloneIfMounted(fe[De]):normalizeVNode(fe[De]);if(isSameVNodeType(Ze,Xe))k(Ze,Xe,re,null,be,Ae,Le,Ve,Fe);else break;De++}for(;De<=Re&&De<=He;){const Ze=J[Re],Xe=fe[He]=Fe?cloneIfMounted(fe[He]):normalizeVNode(fe[He]);if(isSameVNodeType(Ze,Xe))k(Ze,Xe,re,null,be,Ae,Le,Ve,Fe);else break;Re--,He--}if(De>Re){if(De<=He){const Ze=He+1,Xe=Ze<We?fe[Ze].el:_e;for(;De<=He;)k(null,fe[De]=Fe?cloneIfMounted(fe[De]):normalizeVNode(fe[De]),re,Xe,be,Ae,Le,Ve,Fe),De++}}else if(De>He)for(;De<=Re;)le(J[De],be,Ae,!0),De++;else{const Ze=De,Xe=De,at=new Map;for(De=Xe;De<=He;De++){const Pt=fe[De]=Fe?cloneIfMounted(fe[De]):normalizeVNode(fe[De]);Pt.key!=null&&at.set(Pt.key,De)}let ut,ct=0;const mt=He-Xe+1;let pt=!1,kt=0;const Ct=new Array(mt);for(De=0;De<mt;De++)Ct[De]=0;for(De=Ze;De<=Re;De++){const Pt=J[De];if(ct>=mt){le(Pt,be,Ae,!0);continue}let Ue;if(Pt.key!=null)Ue=at.get(Pt.key);else for(ut=Xe;ut<=He;ut++)if(Ct[ut-Xe]===0&&isSameVNodeType(Pt,fe[ut])){Ue=ut;break}Ue===void 0?le(Pt,be,Ae,!0):(Ct[Ue-Xe]=De+1,Ue>=kt?kt=Ue:pt=!0,k(Pt,fe[Ue],re,null,be,Ae,Le,Ve,Fe),ct++)}const ht=pt?getSequence(Ct):EMPTY_ARR;for(ut=ht.length-1,De=mt-1;De>=0;De--){const Pt=Xe+De,Ue=fe[Pt],qe=Pt+1<We?fe[Pt+1].el:_e;Ct[De]===0?k(null,Ue,re,qe,be,Ae,Le,Ve,Fe):pt&&(ut<0||De!==ht[ut]?Y(Ue,re,qe,2):ut--)}}},Y=(J,fe,re,_e,be=null)=>{const{el:Ae,type:Le,transition:Ve,children:Fe,shapeFlag:De}=J;if(De&6){Y(J.component.subTree,fe,re,_e);return}if(De&128){J.suspense.move(fe,re,_e);return}if(De&64){Le.move(J,fe,re,$e);return}if(Le===Fragment){o(Ae,fe,re);for(let Re=0;Re<Fe.length;Re++)Y(Fe[Re],fe,re,_e);o(J.anchor,fe,re);return}if(Le===Static){M(J,fe,re);return}if(_e!==2&&De&1&&Ve)if(_e===0)Ve.beforeEnter(Ae),o(Ae,fe,re),queuePostRenderEffect(()=>Ve.enter(Ae),be);else{const{leave:Re,delayLeave:He,afterLeave:Ze}=Ve,Xe=()=>o(Ae,fe,re),at=()=>{Re(Ae,()=>{Xe(),Ze&&Ze()})};He?He(Ae,Xe,at):at()}else o(Ae,fe,re)},le=(J,fe,re,_e=!1,be=!1)=>{const{type:Ae,props:Le,ref:Ve,children:Fe,dynamicChildren:De,shapeFlag:We,patchFlag:Re,dirs:He}=J;if(Ve!=null&&setRef(Ve,null,re,J,!0),We&256){fe.ctx.deactivate(J);return}const Ze=We&1&&He,Xe=!isAsyncWrapper(J);let at;if(Xe&&(at=Le&&Le.onVnodeBeforeUnmount)&&invokeVNodeHook(at,fe,J),We&6)ke(J.component,re,_e);else{if(We&128){J.suspense.unmount(re,_e);return}Ze&&invokeDirectiveHook(J,null,fe,"beforeUnmount"),We&64?J.type.remove(J,fe,re,be,$e,_e):De&&(Ae!==Fragment||Re>0&&Re&64)?Ee(De,fe,re,!1,!0):(Ae===Fragment&&Re&384||!be&&We&16)&&Ee(Fe,fe,re),_e&&Ce(J)}(Xe&&(at=Le&&Le.onVnodeUnmounted)||Ze)&&queuePostRenderEffect(()=>{at&&invokeVNodeHook(at,fe,J),Ze&&invokeDirectiveHook(J,null,fe,"unmounted")},re)},Ce=J=>{const{type:fe,el:re,anchor:_e,transition:be}=J;if(fe===Fragment){Te(re,_e);return}if(fe===Static){I(J);return}const Ae=()=>{s(re),be&&!be.persisted&&be.afterLeave&&be.afterLeave()};if(J.shapeFlag&1&&be&&!be.persisted){const{leave:Le,delayLeave:Ve}=be,Fe=()=>Le(re,Ae);Ve?Ve(J.el,Ae,Fe):Fe()}else Ae()},Te=(J,fe)=>{let re;for(;J!==fe;)re=y(J),s(J),J=re;s(fe)},ke=(J,fe,re)=>{const{bum:_e,scope:be,update:Ae,subTree:Le,um:Ve}=J;_e&&invokeArrayFns(_e),be.stop(),Ae&&(Ae.active=!1,le(Le,J,fe,re)),Ve&&queuePostRenderEffect(Ve,fe),queuePostRenderEffect(()=>{J.isUnmounted=!0},fe),fe&&fe.pendingBranch&&!fe.isUnmounted&&J.asyncDep&&!J.asyncResolved&&J.suspenseId===fe.pendingId&&(fe.deps--,fe.deps===0&&fe.resolve())},Ee=(J,fe,re,_e=!1,be=!1,Ae=0)=>{for(let Le=Ae;Le<J.length;Le++)le(J[Le],fe,re,_e,be)},Pe=J=>J.shapeFlag&6?Pe(J.component.subTree):J.shapeFlag&128?J.suspense.next():y(J.anchor||J.el),Be=(J,fe,re)=>{J==null?fe._vnode&&le(fe._vnode,null,null,!0):k(fe._vnode||null,J,fe,null,null,null,re),flushPreFlushCbs(),flushPostFlushCbs(),fe._vnode=J},$e={p:k,um:le,m:Y,r:Ce,mt:ve,mc:D,pc:ne,pbc:U,n:Pe,o:e};let Oe,Ne;return n&&([Oe,Ne]=n($e)),{render:Be,hydrate:Oe,createApp:createAppAPI(Be,Oe)}}function toggleRecurse({effect:e,update:n},r){e.allowRecurse=n.allowRecurse=r}function traverseStaticChildren(e,n,r=!1){const o=e.children,s=n.children;if(isArray$4(o)&&isArray$4(s))for(let u=0;u<o.length;u++){const d=o[u];let f=s[u];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=s[u]=cloneIfMounted(s[u]),f.el=d.el),r||traverseStaticChildren(d,f)),f.type===Text$2&&(f.el=d.el)}}function getSequence(e){const n=e.slice(),r=[0];let o,s,u,d,f;const v=e.length;for(o=0;o<v;o++){const m=e[o];if(m!==0){if(s=r[r.length-1],e[s]<m){n[o]=s,r.push(o);continue}for(u=0,d=r.length-1;u<d;)f=u+d>>1,e[r[f]]<m?u=f+1:d=f;m<e[r[u]]&&(u>0&&(n[o]=r[u-1]),r[u]=o)}}for(u=r.length,d=r[u-1];u-- >0;)r[u]=d,d=n[d];return r}const isTeleport=e=>e.__isTeleport,isTeleportDisabled=e=>e&&(e.disabled||e.disabled===""),isTargetSVG=e=>typeof SVGElement<"u"&&e instanceof SVGElement,resolveTarget=(e,n)=>{const r=e&&e.to;return isString$4(r)?n?n(r):null:r},TeleportImpl={__isTeleport:!0,process(e,n,r,o,s,u,d,f,v,m){const{mc:_,pc:g,pbc:y,o:{insert:w,querySelector:x,createText:k,createComment:S}}=m,E=isTeleportDisabled(n.props);let{shapeFlag:T,children:M,dynamicChildren:I}=n;if(e==null){const F=n.el=k(""),O=n.anchor=k("");w(F,r,o),w(O,r,o);const N=n.target=resolveTarget(n.props,x),D=n.targetAnchor=k("");N&&(w(D,N),d=d||isTargetSVG(N));const X=(U,Z)=>{T&16&&_(M,U,Z,s,u,d,f,v)};E?X(r,O):N&&X(N,D)}else{n.el=e.el;const F=n.anchor=e.anchor,O=n.target=e.target,N=n.targetAnchor=e.targetAnchor,D=isTeleportDisabled(e.props),X=D?r:O,U=D?F:N;if(d=d||isTargetSVG(O),I?(y(e.dynamicChildren,I,X,s,u,d,f),traverseStaticChildren(e,n,!0)):v||g(e,n,X,U,s,u,d,f,!1),E)D||moveTeleport(n,r,F,m,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const Z=n.target=resolveTarget(n.props,x);Z&&moveTeleport(n,Z,null,m,0)}else D&&moveTeleport(n,O,N,m,1)}updateCssVars(n)},remove(e,n,r,o,{um:s,o:{remove:u}},d){const{shapeFlag:f,children:v,anchor:m,targetAnchor:_,target:g,props:y}=e;if(g&&u(_),(d||!isTeleportDisabled(y))&&(u(m),f&16))for(let w=0;w<v.length;w++){const x=v[w];s(x,n,r,!0,!!x.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(e,n,r,{o:{insert:o},m:s},u=2){u===0&&o(e.targetAnchor,n,r);const{el:d,anchor:f,shapeFlag:v,children:m,props:_}=e,g=u===2;if(g&&o(d,n,r),(!g||isTeleportDisabled(_))&&v&16)for(let y=0;y<m.length;y++)s(m[y],n,r,2);g&&o(f,n,r)}function hydrateTeleport(e,n,r,o,s,u,{o:{nextSibling:d,parentNode:f,querySelector:v}},m){const _=n.target=resolveTarget(n.props,v);if(_){const g=_._lpa||_.firstChild;if(n.shapeFlag&16)if(isTeleportDisabled(n.props))n.anchor=m(d(e),n,f(e),r,o,s,u),n.targetAnchor=g;else{n.anchor=d(e);let y=g;for(;y;)if(y=d(y),y&&y.nodeType===8&&y.data==="teleport anchor"){n.targetAnchor=y,_._lpa=n.targetAnchor&&d(n.targetAnchor);break}m(g,n,_,r,o,s,u)}updateCssVars(n)}return n.anchor&&d(n.anchor)}const Teleport=TeleportImpl;function updateCssVars(e){const n=e.ctx;if(n&&n.ut){let r=e.children[0].el;for(;r!==e.targetAnchor;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}const Fragment=Symbol(void 0),Text$2=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,n,r,o,s,u){return setupBlock(createBaseVNode(e,n,r,o,s,u,!0))}function createBlock(e,n,r,o,s){return setupBlock(createVNode(e,n,r,o,s,!0))}function isVNode$1(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,n){return e.type===n.type&&e.key===n.key}const InternalObjectKey="__vInternal",normalizeKey=({key:e})=>e!=null?e:null,normalizeRef=({ref:e,ref_key:n,ref_for:r})=>e!=null?isString$4(e)||isRef(e)||isFunction$3(e)?{i:currentRenderingInstance,r:e,k:n,f:!!r}:e:null;function createBaseVNode(e,n=null,r=null,o=0,s=null,u=e===Fragment?0:1,d=!1,f=!1){const v={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&normalizeKey(n),ref:n&&normalizeRef(n),scopeId:currentScopeId,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:u,patchFlag:o,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return f?(normalizeChildren(v,r),u&128&&e.normalize(v)):r&&(v.shapeFlag|=isString$4(r)?8:16),isBlockTreeEnabled>0&&!d&&currentBlock&&(v.patchFlag>0||u&6)&&v.patchFlag!==32&&currentBlock.push(v),v}const createVNode=_createVNode;function _createVNode(e,n=null,r=null,o=0,s=null,u=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode$1(e)){const f=cloneVNode(e,n,!0);return r&&normalizeChildren(f,r),isBlockTreeEnabled>0&&!u&&currentBlock&&(f.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=f:currentBlock.push(f)),f.patchFlag|=-2,f}if(isClassComponent(e)&&(e=e.__vccOpts),n){n=guardReactiveProps(n);let{class:f,style:v}=n;f&&!isString$4(f)&&(n.class=normalizeClass(f)),isObject$5(v)&&(isProxy(v)&&!isArray$4(v)&&(v=extend$2({},v)),n.style=normalizeStyle(v))}const d=isString$4(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject$5(e)?4:isFunction$3(e)?2:0;return createBaseVNode(e,n,r,o,s,d,u,!0)}function guardReactiveProps(e){return e?isProxy(e)||InternalObjectKey in e?extend$2({},e):e:null}function cloneVNode(e,n,r=!1){const{props:o,ref:s,patchFlag:u,children:d}=e,f=n?mergeProps(o||{},n):o;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&normalizeKey(f),ref:n&&n.ref?r&&s?isArray$4(s)?s.concat(normalizeRef(n)):[s,normalizeRef(n)]:normalizeRef(n):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:d,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==Fragment?u===-1?16:u|16:u,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function createTextVNode(e=" ",n=0){return createVNode(Text$2,null,e,n)}function createStaticVNode(e,n){const r=createVNode(Static,null,e);return r.staticCount=n,r}function createCommentVNode(e="",n=!1){return n?(openBlock(),createBlock(Comment,null,e)):createVNode(Comment,null,e)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray$4(e)?createVNode(Fragment,null,e.slice()):typeof e=="object"?cloneIfMounted(e):createVNode(Text$2,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,n){let r=0;const{shapeFlag:o}=e;if(n==null)n=null;else if(isArray$4(n))r=16;else if(typeof n=="object")if(o&65){const s=n.default;s&&(s._c&&(s._d=!1),normalizeChildren(e,s()),s._c&&(s._d=!0));return}else{r=32;const s=n._;!s&&!(InternalObjectKey in n)?n._ctx=currentRenderingInstance:s===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else isFunction$3(n)?(n={default:n,_ctx:currentRenderingInstance},r=32):(n=String(n),o&64?(r=16,n=[createTextVNode(n)]):r=8);e.children=n,e.shapeFlag|=r}function mergeProps(...e){const n={};for(let r=0;r<e.length;r++){const o=e[r];for(const s in o)if(s==="class")n.class!==o.class&&(n.class=normalizeClass([n.class,o.class]));else if(s==="style")n.style=normalizeStyle([n.style,o.style]);else if(isOn(s)){const u=n[s],d=o[s];d&&u!==d&&!(isArray$4(u)&&u.includes(d))&&(n[s]=u?[].concat(u,d):d)}else s!==""&&(n[s]=o[s])}return n}function invokeVNodeHook(e,n,r,o=null){callWithAsyncErrorHandling(e,n,7,[r,o])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(e,n,r){const o=e.type,s=(n?n.appContext:e.appContext)||emptyAppContext,u={uid:uid++,vnode:e,type:o,parent:n,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(o,s),emitsOptions:normalizeEmitsOptions(o,s),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:o.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return u.ctx={_:u},u.root=n?n.root:u,u.emit=emit.bind(null,u),e.ce&&e.ce(u),u}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=e=>{currentInstance=e,e.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,n=!1){isInSSRComponentSetup=n;const{props:r,children:o}=e.vnode,s=isStatefulComponent(e);initProps(e,r,s,n),initSlots(e,o);const u=s?setupStatefulComponent(e,n):void 0;return isInSSRComponentSetup=!1,u}function setupStatefulComponent(e,n){const r=e.type;e.accessCache=Object.create(null),e.proxy=markRaw(new Proxy(e.ctx,PublicInstanceProxyHandlers));const{setup:o}=r;if(o){const s=e.setupContext=o.length>1?createSetupContext(e):null;setCurrentInstance(e),pauseTracking();const u=callWithErrorHandling(o,e,0,[e.props,s]);if(resetTracking(),unsetCurrentInstance(),isPromise(u)){if(u.then(unsetCurrentInstance,unsetCurrentInstance),n)return u.then(d=>{handleSetupResult(e,d,n)}).catch(d=>{handleError(d,e,0)});e.asyncDep=u}else handleSetupResult(e,u,n)}else finishComponentSetup(e,n)}function handleSetupResult(e,n,r){isFunction$3(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:isObject$5(n)&&(e.setupState=proxyRefs(n)),finishComponentSetup(e,r)}let compile$1;function finishComponentSetup(e,n,r){const o=e.type;if(!e.render){if(!n&&compile$1&&!o.render){const s=o.template||resolveMergedOptions(e).template;if(s){const{isCustomElement:u,compilerOptions:d}=e.appContext.config,{delimiters:f,compilerOptions:v}=o,m=extend$2(extend$2({isCustomElement:u,delimiters:f},d),v);o.render=compile$1(s,m)}}e.render=o.render||NOOP}setCurrentInstance(e),pauseTracking(),applyOptions(e),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(e){return new Proxy(e.attrs,{get(n,r){return track(e,"get","$attrs"),n[r]}})}function createSetupContext(e){const n=o=>{e.exposed=o||{}};let r;return{get attrs(){return r||(r=createAttrsProxy(e))},slots:e.slots,emit:e.emit,expose:n}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(n,r){if(r in n)return n[r];if(r in publicPropertiesMap)return publicPropertiesMap[r](e)},has(n,r){return r in n||r in publicPropertiesMap}}))}function getComponentName(e,n=!0){return isFunction$3(e)?e.displayName||e.name:e.name||n&&e.__name}function isClassComponent(e){return isFunction$3(e)&&"__vccOpts"in e}const computed=(e,n)=>computed$1(e,n,isInSSRComponentSetup);function h(e,n,r){const o=arguments.length;return o===2?isObject$5(n)&&!isArray$4(n)?isVNode$1(n)?createVNode(e,null,[n]):createVNode(e,n):createVNode(e,null,n):(o>3?r=Array.prototype.slice.call(arguments,2):o===3&&isVNode$1(r)&&(r=[r]),createVNode(e,n,r))}const ssrContextKey$1=Symbol(""),useSSRContext=()=>inject(ssrContextKey$1),version$2="3.2.47",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,n,r)=>{n.insertBefore(e,r||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,r,o)=>{const s=n?doc.createElementNS(svgNS,e):doc.createElement(e,r?{is:r}:void 0);return e==="select"&&o&&o.multiple!=null&&s.setAttribute("multiple",o.multiple),s},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,r,o,s,u){const d=r?r.previousSibling:n.lastChild;if(s&&(s===u||s.nextSibling))for(;n.insertBefore(s.cloneNode(!0),r),!(s===u||!(s=s.nextSibling)););else{templateContainer.innerHTML=o?`<svg>${e}</svg>`:e;const f=templateContainer.content;if(o){const v=f.firstChild;for(;v.firstChild;)f.appendChild(v.firstChild);f.removeChild(v)}n.insertBefore(f,r)}return[d?d.nextSibling:n.firstChild,r?r.previousSibling:n.lastChild]}};function patchClass(e,n,r){const o=e._vtc;o&&(n=(n?[n,...o]:[...o]).join(" ")),n==null?e.removeAttribute("class"):r?e.setAttribute("class",n):e.className=n}function patchStyle(e,n,r){const o=e.style,s=isString$4(r);if(r&&!s){if(n&&!isString$4(n))for(const u in n)r[u]==null&&setStyle(o,u,"");for(const u in r)setStyle(o,u,r[u])}else{const u=o.display;s?n!==r&&(o.cssText=r):n&&e.removeAttribute("style"),"_vod"in e&&(o.display=u)}}const importantRE=/\s*!important$/;function setStyle(e,n,r){if(isArray$4(r))r.forEach(o=>setStyle(e,n,o));else if(r==null&&(r=""),n.startsWith("--"))e.setProperty(n,r);else{const o=autoPrefix(e,n);importantRE.test(r)?e.setProperty(hyphenate(o),r.replace(importantRE,""),"important"):e[o]=r}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,n){const r=prefixCache[n];if(r)return r;let o=camelize(n);if(o!=="filter"&&o in e)return prefixCache[n]=o;o=capitalize$1(o);for(let s=0;s<prefixes.length;s++){const u=prefixes[s]+o;if(u in e)return prefixCache[n]=u}return n}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,n,r,o,s){if(o&&n.startsWith("xlink:"))r==null?e.removeAttributeNS(xlinkNS,n.slice(6,n.length)):e.setAttributeNS(xlinkNS,n,r);else{const u=isSpecialBooleanAttr(n);r==null||u&&!includeBooleanAttr(r)?e.removeAttribute(n):e.setAttribute(n,u?"":r)}}function patchDOMProp(e,n,r,o,s,u,d){if(n==="innerHTML"||n==="textContent"){o&&d(o,s,u),e[n]=r==null?"":r;return}if(n==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const v=r==null?"":r;(e.value!==v||e.tagName==="OPTION")&&(e.value=v),r==null&&e.removeAttribute(n);return}let f=!1;if(r===""||r==null){const v=typeof e[n];v==="boolean"?r=includeBooleanAttr(r):r==null&&v==="string"?(r="",f=!0):v==="number"&&(r=0,f=!0)}try{e[n]=r}catch{}f&&e.removeAttribute(n)}function addEventListener(e,n,r,o){e.addEventListener(n,r,o)}function removeEventListener(e,n,r,o){e.removeEventListener(n,r,o)}function patchEvent(e,n,r,o,s=null){const u=e._vei||(e._vei={}),d=u[n];if(o&&d)d.value=o;else{const[f,v]=parseName(n);if(o){const m=u[n]=createInvoker(o,s);addEventListener(e,f,m,v)}else d&&(removeEventListener(e,f,d,v),u[n]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let n;if(optionsModifierRE.test(e)){n={};let o;for(;o=e.match(optionsModifierRE);)e=e.slice(0,e.length-o[0].length),n[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),n]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,n){const r=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=r.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(o,r.value),n,5,[o])};return r.value=e,r.attached=getNow(),r}function patchStopImmediatePropagation(e,n){if(isArray$4(n)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},n.map(o=>s=>!s._stopped&&o&&o(s))}else return n}const nativeOnRE=/^on[a-z]/,patchProp=(e,n,r,o,s=!1,u,d,f,v)=>{n==="class"?patchClass(e,o,s):n==="style"?patchStyle(e,r,o):isOn(n)?isModelListener(n)||patchEvent(e,n,r,o,d):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):shouldSetAsProp(e,n,o,s))?patchDOMProp(e,n,o,u,d,f,v):(n==="true-value"?e._trueValue=o:n==="false-value"&&(e._falseValue=o),patchAttr(e,n,o,s))};function shouldSetAsProp(e,n,r,o){return o?!!(n==="innerHTML"||n==="textContent"||n in e&&nativeOnRE.test(n)&&isFunction$3(r)):n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA"||nativeOnRE.test(n)&&isString$4(r)?!1:n in e}const TRANSITION="transition",ANIMATION="animation",Transition=(e,{slots:n})=>h(BaseTransition,resolveTransitionProps(e),n);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend$2({},BaseTransition.props,DOMTransitionPropsValidators),callHook=(e,n=[])=>{isArray$4(e)?e.forEach(r=>r(...n)):e&&e(...n)},hasExplicitCallback=e=>e?isArray$4(e)?e.some(n=>n.length>1):e.length>1:!1;function resolveTransitionProps(e){const n={};for(const j in e)j in DOMTransitionPropsValidators||(n[j]=e[j]);if(e.css===!1)return n;const{name:r="v",type:o,duration:s,enterFromClass:u=`${r}-enter-from`,enterActiveClass:d=`${r}-enter-active`,enterToClass:f=`${r}-enter-to`,appearFromClass:v=u,appearActiveClass:m=d,appearToClass:_=f,leaveFromClass:g=`${r}-leave-from`,leaveActiveClass:y=`${r}-leave-active`,leaveToClass:w=`${r}-leave-to`}=e,x=normalizeDuration(s),k=x&&x[0],S=x&&x[1],{onBeforeEnter:E,onEnter:T,onEnterCancelled:M,onLeave:I,onLeaveCancelled:F,onBeforeAppear:O=E,onAppear:N=T,onAppearCancelled:D=M}=n,X=(j,Q,ve)=>{removeTransitionClass(j,Q?_:f),removeTransitionClass(j,Q?m:d),ve&&ve()},U=(j,Q)=>{j._isLeaving=!1,removeTransitionClass(j,g),removeTransitionClass(j,w),removeTransitionClass(j,y),Q&&Q()},Z=j=>(Q,ve)=>{const Se=j?N:T,we=()=>X(Q,j,ve);callHook(Se,[Q,we]),nextFrame(()=>{removeTransitionClass(Q,j?v:u),addTransitionClass(Q,j?_:f),hasExplicitCallback(Se)||whenTransitionEnds(Q,o,k,we)})};return extend$2(n,{onBeforeEnter(j){callHook(E,[j]),addTransitionClass(j,u),addTransitionClass(j,d)},onBeforeAppear(j){callHook(O,[j]),addTransitionClass(j,v),addTransitionClass(j,m)},onEnter:Z(!1),onAppear:Z(!0),onLeave(j,Q){j._isLeaving=!0;const ve=()=>U(j,Q);addTransitionClass(j,g),forceReflow(),addTransitionClass(j,y),nextFrame(()=>{!j._isLeaving||(removeTransitionClass(j,g),addTransitionClass(j,w),hasExplicitCallback(I)||whenTransitionEnds(j,o,S,ve))}),callHook(I,[j,ve])},onEnterCancelled(j){X(j,!1),callHook(M,[j])},onAppearCancelled(j){X(j,!0),callHook(D,[j])},onLeaveCancelled(j){U(j),callHook(F,[j])}})}function normalizeDuration(e){if(e==null)return null;if(isObject$5(e))return[NumberOf(e.enter),NumberOf(e.leave)];{const n=NumberOf(e);return[n,n]}}function NumberOf(e){return toNumber$1(e)}function addTransitionClass(e,n){n.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e._vtc||(e._vtc=new Set)).add(n)}function removeTransitionClass(e,n){n.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const{_vtc:r}=e;r&&(r.delete(n),r.size||(e._vtc=void 0))}function nextFrame(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let endId=0;function whenTransitionEnds(e,n,r,o){const s=e._endId=++endId,u=()=>{s===e._endId&&o()};if(r)return setTimeout(u,r);const{type:d,timeout:f,propCount:v}=getTransitionInfo(e,n);if(!d)return o();const m=d+"end";let _=0;const g=()=>{e.removeEventListener(m,y),u()},y=w=>{w.target===e&&++_>=v&&g()};setTimeout(()=>{_<v&&g()},f+1),e.addEventListener(m,y)}function getTransitionInfo(e,n){const r=window.getComputedStyle(e),o=x=>(r[x]||"").split(", "),s=o(`${TRANSITION}Delay`),u=o(`${TRANSITION}Duration`),d=getTimeout(s,u),f=o(`${ANIMATION}Delay`),v=o(`${ANIMATION}Duration`),m=getTimeout(f,v);let _=null,g=0,y=0;n===TRANSITION?d>0&&(_=TRANSITION,g=d,y=u.length):n===ANIMATION?m>0&&(_=ANIMATION,g=m,y=v.length):(g=Math.max(d,m),_=g>0?d>m?TRANSITION:ANIMATION:null,y=_?_===TRANSITION?u.length:v.length:0);const w=_===TRANSITION&&/\b(transform|all)(,|$)/.test(o(`${TRANSITION}Property`).toString());return{type:_,timeout:g,propCount:y,hasTransform:w}}function getTimeout(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max(...n.map((r,o)=>toMs(r)+toMs(e[o])))}function toMs(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const positionMap=new WeakMap,newPositionMap=new WeakMap,TransitionGroupImpl={name:"TransitionGroup",props:extend$2({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(e,{slots:n}){const r=getCurrentInstance(),o=useTransitionState();let s,u;return onUpdated(()=>{if(!s.length)return;const d=e.moveClass||`${e.name||"v"}-move`;if(!hasCSSTransform(s[0].el,r.vnode.el,d))return;s.forEach(callPendingCbs),s.forEach(recordPosition);const f=s.filter(applyTranslation);forceReflow(),f.forEach(v=>{const m=v.el,_=m.style;addTransitionClass(m,d),_.transform=_.webkitTransform=_.transitionDuration="";const g=m._moveCb=y=>{y&&y.target!==m||(!y||/transform$/.test(y.propertyName))&&(m.removeEventListener("transitionend",g),m._moveCb=null,removeTransitionClass(m,d))};m.addEventListener("transitionend",g)})}),()=>{const d=toRaw(e),f=resolveTransitionProps(d);let v=d.tag||Fragment;s=u,u=n.default?getTransitionRawChildren(n.default()):[];for(let m=0;m<u.length;m++){const _=u[m];_.key!=null&&setTransitionHooks(_,resolveTransitionHooks(_,f,o,r))}if(s)for(let m=0;m<s.length;m++){const _=s[m];setTransitionHooks(_,resolveTransitionHooks(_,f,o,r)),positionMap.set(_,_.el.getBoundingClientRect())}return createVNode(v,null,u)}}},removeMode=e=>delete e.mode;TransitionGroupImpl.props;const TransitionGroup=TransitionGroupImpl;function callPendingCbs(e){const n=e.el;n._moveCb&&n._moveCb(),n._enterCb&&n._enterCb()}function recordPosition(e){newPositionMap.set(e,e.el.getBoundingClientRect())}function applyTranslation(e){const n=positionMap.get(e),r=newPositionMap.get(e),o=n.left-r.left,s=n.top-r.top;if(o||s){const u=e.el.style;return u.transform=u.webkitTransform=`translate(${o}px,${s}px)`,u.transitionDuration="0s",e}}function hasCSSTransform(e,n,r){const o=e.cloneNode();e._vtc&&e._vtc.forEach(d=>{d.split(/\s+/).forEach(f=>f&&o.classList.remove(f))}),r.split(/\s+/).forEach(d=>d&&o.classList.add(d)),o.style.display="none";const s=n.nodeType===1?n:n.parentNode;s.appendChild(o);const{hasTransform:u}=getTransitionInfo(o);return s.removeChild(o),u}const getModelAssigner=e=>{const n=e.props["onUpdate:modelValue"]||!1;return isArray$4(n)?r=>invokeArrayFns(n,r):n};function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const vModelText={created(e,{modifiers:{lazy:n,trim:r,number:o}},s){e._assign=getModelAssigner(s);const u=o||s.props&&s.props.type==="number";addEventListener(e,n?"change":"input",d=>{if(d.target.composing)return;let f=e.value;r&&(f=f.trim()),u&&(f=looseToNumber(f)),e._assign(f)}),r&&addEventListener(e,"change",()=>{e.value=e.value.trim()}),n||(addEventListener(e,"compositionstart",onCompositionStart),addEventListener(e,"compositionend",onCompositionEnd),addEventListener(e,"change",onCompositionEnd))},mounted(e,{value:n}){e.value=n==null?"":n},beforeUpdate(e,{value:n,modifiers:{lazy:r,trim:o,number:s}},u){if(e._assign=getModelAssigner(u),e.composing||document.activeElement===e&&e.type!=="range"&&(r||o&&e.value.trim()===n||(s||e.type==="number")&&looseToNumber(e.value)===n))return;const d=n==null?"":n;e.value!==d&&(e.value=d)}},vModelCheckbox={deep:!0,created(e,n,r){e._assign=getModelAssigner(r),addEventListener(e,"change",()=>{const o=e._modelValue,s=getValue$1(e),u=e.checked,d=e._assign;if(isArray$4(o)){const f=looseIndexOf(o,s),v=f!==-1;if(u&&!v)d(o.concat(s));else if(!u&&v){const m=[...o];m.splice(f,1),d(m)}}else if(isSet(o)){const f=new Set(o);u?f.add(s):f.delete(s),d(f)}else d(getCheckboxValue(e,u))})},mounted:setChecked,beforeUpdate(e,n,r){e._assign=getModelAssigner(r),setChecked(e,n,r)}};function setChecked(e,{value:n,oldValue:r},o){e._modelValue=n,isArray$4(n)?e.checked=looseIndexOf(n,o.props.value)>-1:isSet(n)?e.checked=n.has(o.props.value):n!==r&&(e.checked=looseEqual(n,getCheckboxValue(e,!0)))}const vModelRadio={created(e,{value:n},r){e.checked=looseEqual(n,r.props.value),e._assign=getModelAssigner(r),addEventListener(e,"change",()=>{e._assign(getValue$1(e))})},beforeUpdate(e,{value:n,oldValue:r},o){e._assign=getModelAssigner(o),n!==r&&(e.checked=looseEqual(n,o.props.value))}},vModelSelect={deep:!0,created(e,{value:n,modifiers:{number:r}},o){const s=isSet(n);addEventListener(e,"change",()=>{const u=Array.prototype.filter.call(e.options,d=>d.selected).map(d=>r?looseToNumber(getValue$1(d)):getValue$1(d));e._assign(e.multiple?s?new Set(u):u:u[0])}),e._assign=getModelAssigner(o)},mounted(e,{value:n}){setSelected(e,n)},beforeUpdate(e,n,r){e._assign=getModelAssigner(r)},updated(e,{value:n}){setSelected(e,n)}};function setSelected(e,n){const r=e.multiple;if(!(r&&!isArray$4(n)&&!isSet(n))){for(let o=0,s=e.options.length;o<s;o++){const u=e.options[o],d=getValue$1(u);if(r)isArray$4(n)?u.selected=looseIndexOf(n,d)>-1:u.selected=n.has(d);else if(looseEqual(getValue$1(u),n)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function getValue$1(e){return"_value"in e?e._value:e.value}function getCheckboxValue(e,n){const r=n?"_trueValue":"_falseValue";return r in e?e[r]:n}const vModelDynamic={created(e,n,r){callModelHook(e,n,r,null,"created")},mounted(e,n,r){callModelHook(e,n,r,null,"mounted")},beforeUpdate(e,n,r,o){callModelHook(e,n,r,o,"beforeUpdate")},updated(e,n,r,o){callModelHook(e,n,r,o,"updated")}};function resolveDynamicModel(e,n){switch(e){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(n){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(e,n,r,o,s){const d=resolveDynamicModel(e.tagName,r.props&&r.props.type)[s];d&&d(e,n,r,o)}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>systemModifiers.some(r=>e[`${r}Key`]&&!n.includes(r))},withModifiers=(e,n)=>(r,...o)=>{for(let s=0;s<n.length;s++){const u=modifierGuards[n[s]];if(u&&u(r,n))return}return e(r,...o)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(e,n)=>r=>{if(!("key"in r))return;const o=hyphenate(r.key);if(n.some(s=>s===o||keyNames[s]===o))return e(r)},vShow={beforeMount(e,{value:n},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&n?r.beforeEnter(e):setDisplay(e,n)},mounted(e,{value:n},{transition:r}){r&&n&&r.enter(e)},updated(e,{value:n,oldValue:r},{transition:o}){!n!=!r&&(o?n?(o.beforeEnter(e),setDisplay(e,!0),o.enter(e)):o.leave(e,()=>{setDisplay(e,!1)}):setDisplay(e,n))},beforeUnmount(e,{value:n}){setDisplay(e,n)}};function setDisplay(e,n){e.style.display=n?e._vod:"none"}const rendererOptions=extend$2({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...e)=>{const n=ensureRenderer().createApp(...e),{mount:r}=n;return n.mount=o=>{const s=normalizeContainer(o);if(!s)return;const u=n._component;!isFunction$3(u)&&!u.render&&!u.template&&(u.template=s.innerHTML),s.innerHTML="";const d=r(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),d},n};function normalizeContainer(e){return isString$4(e)?document.querySelector(e):e}/*!
  * shared v9.3.0
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const inBrowser$1=typeof window<"u",makeSymbol=(e,n=!1)=>n?Symbol.for(e):Symbol(e),generateFormatCacheKey=(e,n,r)=>friendlyJSONstringify({l:e,k:n,s:r}),friendlyJSONstringify=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),isNumber$1=e=>typeof e=="number"&&isFinite(e),isDate$1=e=>toTypeString(e)==="[object Date]",isRegExp=e=>toTypeString(e)==="[object RegExp]",isEmptyObject=e=>isPlainObject$3(e)&&Object.keys(e).length===0,assign$2=Object.assign;let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function escapeHtml(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const hasOwnProperty$c=Object.prototype.hasOwnProperty;function hasOwn(e,n){return hasOwnProperty$c.call(e,n)}const isArray$3=Array.isArray,isFunction$2=e=>typeof e=="function",isString$3=e=>typeof e=="string",isBoolean=e=>typeof e=="boolean",isObject$4=e=>e!==null&&typeof e=="object",objectToString$2=Object.prototype.toString,toTypeString=e=>objectToString$2.call(e),isPlainObject$3=e=>{if(!isObject$4(e))return!1;const n=Object.getPrototypeOf(e);return n===null||n.constructor===Object},toDisplayString=e=>e==null?"":isArray$3(e)||isPlainObject$3(e)&&e.toString===objectToString$2?JSON.stringify(e,null,2):String(e);function join$1(e,n=""){return e.reduce((r,o,s)=>s===0?r+o:r+n+o,"")}function incrementer(e){let n=e;return()=>++n}function warn$3(e,n){typeof console<"u"&&(console.warn("[intlify] "+e),n&&console.warn(n.stack))}/*!
  * message-compiler v9.3.0
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */function createPosition(e,n,r){return{line:e,column:n,offset:r}}function createLocation(e,n,r){const o={start:e,end:n};return r!=null&&(o.source=r),o}const RE_ARGS=/\{([0-9a-zA-Z]+)\}/g;function format$2(e,...n){return n.length===1&&isObject$3(n[0])&&(n=n[0]),(!n||!n.hasOwnProperty)&&(n={}),e.replace(RE_ARGS,(r,o)=>n.hasOwnProperty(o)?n[o]:"")}const assign$1=Object.assign,isString$2=e=>typeof e=="string",isObject$3=e=>e!==null&&typeof e=="object";function join(e,n=""){return e.reduce((r,o,s)=>s===0?r+o:r+n+o,"")}const CompileErrorCodes={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},errorMessages={[CompileErrorCodes.EXPECTED_TOKEN]:"Expected token: '{0}'",[CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[CompileErrorCodes.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[CompileErrorCodes.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[CompileErrorCodes.EMPTY_PLACEHOLDER]:"Empty placeholder",[CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[CompileErrorCodes.INVALID_LINKED_FORMAT]:"Invalid linked format",[CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[CompileErrorCodes.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[CompileErrorCodes.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function createCompileError(e,n,r={}){const{domain:o,messages:s,args:u}=r,d=format$2((s||errorMessages)[e]||"",...u||[]),f=new SyntaxError(String(d));return f.code=e,n&&(f.location=n),f.domain=o,f}function defaultOnError(e){throw e}const CHAR_SP=" ",CHAR_CR="\r",CHAR_LF=`
`,CHAR_LS=String.fromCharCode(8232),CHAR_PS=String.fromCharCode(8233);function createScanner(e){const n=e;let r=0,o=1,s=1,u=0;const d=N=>n[N]===CHAR_CR&&n[N+1]===CHAR_LF,f=N=>n[N]===CHAR_LF,v=N=>n[N]===CHAR_PS,m=N=>n[N]===CHAR_LS,_=N=>d(N)||f(N)||v(N)||m(N),g=()=>r,y=()=>o,w=()=>s,x=()=>u,k=N=>d(N)||v(N)||m(N)?CHAR_LF:n[N],S=()=>k(r),E=()=>k(r+u);function T(){return u=0,_(r)&&(o++,s=0),d(r)&&r++,r++,s++,n[r]}function M(){return d(r+u)&&u++,u++,n[r+u]}function I(){r=0,o=1,s=1,u=0}function F(N=0){u=N}function O(){const N=r+u;for(;N!==r;)T();u=0}return{index:g,line:y,column:w,peekOffset:x,charAt:k,currentChar:S,currentPeek:E,next:T,peek:M,reset:I,resetPeek:F,skipToPeek:O}}const EOF=void 0,DOT=".",LITERAL_DELIMITER="'",ERROR_DOMAIN$3="tokenizer";function createTokenizer(e,n={}){const r=n.location!==!1,o=createScanner(e),s=()=>o.index(),u=()=>createPosition(o.line(),o.column(),o.index()),d=u(),f=s(),v={currentType:14,offset:f,startLoc:d,endLoc:d,lastType:14,lastOffset:f,lastStartLoc:d,lastEndLoc:d,braceNest:0,inLinked:!1,text:""},m=()=>v,{onError:_}=n;function g(fe,re,_e,...be){const Ae=m();if(re.column+=_e,re.offset+=_e,_){const Le=r?createLocation(Ae.startLoc,re):null,Ve=createCompileError(fe,Le,{domain:ERROR_DOMAIN$3,args:be});_(Ve)}}function y(fe,re,_e){fe.endLoc=u(),fe.currentType=re;const be={type:re};return r&&(be.loc=createLocation(fe.startLoc,fe.endLoc)),_e!=null&&(be.value=_e),be}const w=fe=>y(fe,14);function x(fe,re){return fe.currentChar()===re?(fe.next(),re):(g(CompileErrorCodes.EXPECTED_TOKEN,u(),0,re),"")}function k(fe){let re="";for(;fe.currentPeek()===CHAR_SP||fe.currentPeek()===CHAR_LF;)re+=fe.currentPeek(),fe.peek();return re}function S(fe){const re=k(fe);return fe.skipToPeek(),re}function E(fe){if(fe===EOF)return!1;const re=fe.charCodeAt(0);return re>=97&&re<=122||re>=65&&re<=90||re===95}function T(fe){if(fe===EOF)return!1;const re=fe.charCodeAt(0);return re>=48&&re<=57}function M(fe,re){const{currentType:_e}=re;if(_e!==2)return!1;k(fe);const be=E(fe.currentPeek());return fe.resetPeek(),be}function I(fe,re){const{currentType:_e}=re;if(_e!==2)return!1;k(fe);const be=fe.currentPeek()==="-"?fe.peek():fe.currentPeek(),Ae=T(be);return fe.resetPeek(),Ae}function F(fe,re){const{currentType:_e}=re;if(_e!==2)return!1;k(fe);const be=fe.currentPeek()===LITERAL_DELIMITER;return fe.resetPeek(),be}function O(fe,re){const{currentType:_e}=re;if(_e!==8)return!1;k(fe);const be=fe.currentPeek()===".";return fe.resetPeek(),be}function N(fe,re){const{currentType:_e}=re;if(_e!==9)return!1;k(fe);const be=E(fe.currentPeek());return fe.resetPeek(),be}function D(fe,re){const{currentType:_e}=re;if(!(_e===8||_e===12))return!1;k(fe);const be=fe.currentPeek()===":";return fe.resetPeek(),be}function X(fe,re){const{currentType:_e}=re;if(_e!==10)return!1;const be=()=>{const Le=fe.currentPeek();return Le==="{"?E(fe.peek()):Le==="@"||Le==="%"||Le==="|"||Le===":"||Le==="."||Le===CHAR_SP||!Le?!1:Le===CHAR_LF?(fe.peek(),be()):E(Le)},Ae=be();return fe.resetPeek(),Ae}function U(fe){k(fe);const re=fe.currentPeek()==="|";return fe.resetPeek(),re}function Z(fe){const re=k(fe),_e=fe.currentPeek()==="%"&&fe.peek()==="{";return fe.resetPeek(),{isModulo:_e,hasSpace:re.length>0}}function j(fe,re=!0){const _e=(Ae=!1,Le="",Ve=!1)=>{const Fe=fe.currentPeek();return Fe==="{"?Le==="%"?!1:Ae:Fe==="@"||!Fe?Le==="%"?!0:Ae:Fe==="%"?(fe.peek(),_e(Ae,"%",!0)):Fe==="|"?Le==="%"||Ve?!0:!(Le===CHAR_SP||Le===CHAR_LF):Fe===CHAR_SP?(fe.peek(),_e(!0,CHAR_SP,Ve)):Fe===CHAR_LF?(fe.peek(),_e(!0,CHAR_LF,Ve)):!0},be=_e();return re&&fe.resetPeek(),be}function Q(fe,re){const _e=fe.currentChar();return _e===EOF?EOF:re(_e)?(fe.next(),_e):null}function ve(fe){return Q(fe,_e=>{const be=_e.charCodeAt(0);return be>=97&&be<=122||be>=65&&be<=90||be>=48&&be<=57||be===95||be===36})}function Se(fe){return Q(fe,_e=>{const be=_e.charCodeAt(0);return be>=48&&be<=57})}function we(fe){return Q(fe,_e=>{const be=_e.charCodeAt(0);return be>=48&&be<=57||be>=65&&be<=70||be>=97&&be<=102})}function oe(fe){let re="",_e="";for(;re=Se(fe);)_e+=re;return _e}function ne(fe){S(fe);const re=fe.currentChar();return re!=="%"&&g(CompileErrorCodes.EXPECTED_TOKEN,u(),0,re),fe.next(),"%"}function q(fe){let re="";for(;;){const _e=fe.currentChar();if(_e==="{"||_e==="}"||_e==="@"||_e==="|"||!_e)break;if(_e==="%")if(j(fe))re+=_e,fe.next();else break;else if(_e===CHAR_SP||_e===CHAR_LF)if(j(fe))re+=_e,fe.next();else{if(U(fe))break;re+=_e,fe.next()}else re+=_e,fe.next()}return re}function H(fe){S(fe);let re="",_e="";for(;re=ve(fe);)_e+=re;return fe.currentChar()===EOF&&g(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,u(),0),_e}function Y(fe){S(fe);let re="";return fe.currentChar()==="-"?(fe.next(),re+=`-${oe(fe)}`):re+=oe(fe),fe.currentChar()===EOF&&g(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,u(),0),re}function le(fe){S(fe),x(fe,"'");let re="",_e="";const be=Le=>Le!==LITERAL_DELIMITER&&Le!==CHAR_LF;for(;re=Q(fe,be);)re==="\\"?_e+=Ce(fe):_e+=re;const Ae=fe.currentChar();return Ae===CHAR_LF||Ae===EOF?(g(CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,u(),0),Ae===CHAR_LF&&(fe.next(),x(fe,"'")),_e):(x(fe,"'"),_e)}function Ce(fe){const re=fe.currentChar();switch(re){case"\\":case"'":return fe.next(),`\\${re}`;case"u":return Te(fe,re,4);case"U":return Te(fe,re,6);default:return g(CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE,u(),0,re),""}}function Te(fe,re,_e){x(fe,re);let be="";for(let Ae=0;Ae<_e;Ae++){const Le=we(fe);if(!Le){g(CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE,u(),0,`\\${re}${be}${fe.currentChar()}`);break}be+=Le}return`\\${re}${be}`}function ke(fe){S(fe);let re="",_e="";const be=Ae=>Ae!=="{"&&Ae!=="}"&&Ae!==CHAR_SP&&Ae!==CHAR_LF;for(;re=Q(fe,be);)_e+=re;return _e}function Ee(fe){let re="",_e="";for(;re=ve(fe);)_e+=re;return _e}function Pe(fe){const re=(_e=!1,be)=>{const Ae=fe.currentChar();return Ae==="{"||Ae==="%"||Ae==="@"||Ae==="|"||!Ae||Ae===CHAR_SP?be:Ae===CHAR_LF||Ae===DOT?(be+=Ae,fe.next(),re(_e,be)):E(Ae)?(be+=Ae,fe.next(),re(!0,be)):be};return re(!1,"")}function Be(fe){S(fe);const re=x(fe,"|");return S(fe),re}function $e(fe,re){let _e=null;switch(fe.currentChar()){case"{":return re.braceNest>=1&&g(CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER,u(),0),fe.next(),_e=y(re,2,"{"),S(fe),re.braceNest++,_e;case"}":return re.braceNest>0&&re.currentType===2&&g(CompileErrorCodes.EMPTY_PLACEHOLDER,u(),0),fe.next(),_e=y(re,3,"}"),re.braceNest--,re.braceNest>0&&S(fe),re.inLinked&&re.braceNest===0&&(re.inLinked=!1),_e;case"@":return re.braceNest>0&&g(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,u(),0),_e=Oe(fe,re)||w(re),re.braceNest=0,_e;default:let Ae=!0,Le=!0,Ve=!0;if(U(fe))return re.braceNest>0&&g(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,u(),0),_e=y(re,1,Be(fe)),re.braceNest=0,re.inLinked=!1,_e;if(re.braceNest>0&&(re.currentType===5||re.currentType===6||re.currentType===7))return g(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,u(),0),re.braceNest=0,Ne(fe,re);if(Ae=M(fe,re))return _e=y(re,5,H(fe)),S(fe),_e;if(Le=I(fe,re))return _e=y(re,6,Y(fe)),S(fe),_e;if(Ve=F(fe,re))return _e=y(re,7,le(fe)),S(fe),_e;if(!Ae&&!Le&&!Ve)return _e=y(re,13,ke(fe)),g(CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER,u(),0,_e.value),S(fe),_e;break}return _e}function Oe(fe,re){const{currentType:_e}=re;let be=null;const Ae=fe.currentChar();switch((_e===8||_e===9||_e===12||_e===10)&&(Ae===CHAR_LF||Ae===CHAR_SP)&&g(CompileErrorCodes.INVALID_LINKED_FORMAT,u(),0),Ae){case"@":return fe.next(),be=y(re,8,"@"),re.inLinked=!0,be;case".":return S(fe),fe.next(),y(re,9,".");case":":return S(fe),fe.next(),y(re,10,":");default:return U(fe)?(be=y(re,1,Be(fe)),re.braceNest=0,re.inLinked=!1,be):O(fe,re)||D(fe,re)?(S(fe),Oe(fe,re)):N(fe,re)?(S(fe),y(re,12,Ee(fe))):X(fe,re)?(S(fe),Ae==="{"?$e(fe,re)||be:y(re,11,Pe(fe))):(_e===8&&g(CompileErrorCodes.INVALID_LINKED_FORMAT,u(),0),re.braceNest=0,re.inLinked=!1,Ne(fe,re))}}function Ne(fe,re){let _e={type:14};if(re.braceNest>0)return $e(fe,re)||w(re);if(re.inLinked)return Oe(fe,re)||w(re);switch(fe.currentChar()){case"{":return $e(fe,re)||w(re);case"}":return g(CompileErrorCodes.UNBALANCED_CLOSING_BRACE,u(),0),fe.next(),y(re,3,"}");case"@":return Oe(fe,re)||w(re);default:if(U(fe))return _e=y(re,1,Be(fe)),re.braceNest=0,re.inLinked=!1,_e;const{isModulo:Ae,hasSpace:Le}=Z(fe);if(Ae)return Le?y(re,0,q(fe)):y(re,4,ne(fe));if(j(fe))return y(re,0,q(fe));break}return _e}function J(){const{currentType:fe,offset:re,startLoc:_e,endLoc:be}=v;return v.lastType=fe,v.lastOffset=re,v.lastStartLoc=_e,v.lastEndLoc=be,v.offset=s(),v.startLoc=u(),o.currentChar()===EOF?y(v,14):Ne(o,v)}return{nextToken:J,currentOffset:s,currentPosition:u,context:m}}const ERROR_DOMAIN$2="parser",KNOWN_ESCAPES=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function fromEscapeSequence(e,n,r){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const o=parseInt(n||r,16);return o<=55295||o>=57344?String.fromCodePoint(o):"\uFFFD"}}}function createParser(e={}){const n=e.location!==!1,{onError:r}=e;function o(E,T,M,I,...F){const O=E.currentPosition();if(O.offset+=I,O.column+=I,r){const N=n?createLocation(M,O):null,D=createCompileError(T,N,{domain:ERROR_DOMAIN$2,args:F});r(D)}}function s(E,T,M){const I={type:E};return n&&(I.start=T,I.end=T,I.loc={start:M,end:M}),I}function u(E,T,M,I){I&&(E.type=I),n&&(E.end=T,E.loc&&(E.loc.end=M))}function d(E,T){const M=E.context(),I=s(3,M.offset,M.startLoc);return I.value=T,u(I,E.currentOffset(),E.currentPosition()),I}function f(E,T){const M=E.context(),{lastOffset:I,lastStartLoc:F}=M,O=s(5,I,F);return O.index=parseInt(T,10),E.nextToken(),u(O,E.currentOffset(),E.currentPosition()),O}function v(E,T){const M=E.context(),{lastOffset:I,lastStartLoc:F}=M,O=s(4,I,F);return O.key=T,E.nextToken(),u(O,E.currentOffset(),E.currentPosition()),O}function m(E,T){const M=E.context(),{lastOffset:I,lastStartLoc:F}=M,O=s(9,I,F);return O.value=T.replace(KNOWN_ESCAPES,fromEscapeSequence),E.nextToken(),u(O,E.currentOffset(),E.currentPosition()),O}function _(E){const T=E.nextToken(),M=E.context(),{lastOffset:I,lastStartLoc:F}=M,O=s(8,I,F);return T.type!==12?(o(E,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER,M.lastStartLoc,0),O.value="",u(O,I,F),{nextConsumeToken:T,node:O}):(T.value==null&&o(E,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,M.lastStartLoc,0,getTokenCaption(T)),O.value=T.value||"",u(O,E.currentOffset(),E.currentPosition()),{node:O})}function g(E,T){const M=E.context(),I=s(7,M.offset,M.startLoc);return I.value=T,u(I,E.currentOffset(),E.currentPosition()),I}function y(E){const T=E.context(),M=s(6,T.offset,T.startLoc);let I=E.nextToken();if(I.type===9){const F=_(E);M.modifier=F.node,I=F.nextConsumeToken||E.nextToken()}switch(I.type!==10&&o(E,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,getTokenCaption(I)),I=E.nextToken(),I.type===2&&(I=E.nextToken()),I.type){case 11:I.value==null&&o(E,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,getTokenCaption(I)),M.key=g(E,I.value||"");break;case 5:I.value==null&&o(E,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,getTokenCaption(I)),M.key=v(E,I.value||"");break;case 6:I.value==null&&o(E,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,getTokenCaption(I)),M.key=f(E,I.value||"");break;case 7:I.value==null&&o(E,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,getTokenCaption(I)),M.key=m(E,I.value||"");break;default:o(E,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY,T.lastStartLoc,0);const F=E.context(),O=s(7,F.offset,F.startLoc);return O.value="",u(O,F.offset,F.startLoc),M.key=O,u(M,F.offset,F.startLoc),{nextConsumeToken:I,node:M}}return u(M,E.currentOffset(),E.currentPosition()),{node:M}}function w(E){const T=E.context(),M=T.currentType===1?E.currentOffset():T.offset,I=T.currentType===1?T.endLoc:T.startLoc,F=s(2,M,I);F.items=[];let O=null;do{const X=O||E.nextToken();switch(O=null,X.type){case 0:X.value==null&&o(E,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,getTokenCaption(X)),F.items.push(d(E,X.value||""));break;case 6:X.value==null&&o(E,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,getTokenCaption(X)),F.items.push(f(E,X.value||""));break;case 5:X.value==null&&o(E,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,getTokenCaption(X)),F.items.push(v(E,X.value||""));break;case 7:X.value==null&&o(E,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,getTokenCaption(X)),F.items.push(m(E,X.value||""));break;case 8:const U=y(E);F.items.push(U.node),O=U.nextConsumeToken||null;break}}while(T.currentType!==14&&T.currentType!==1);const N=T.currentType===1?T.lastOffset:E.currentOffset(),D=T.currentType===1?T.lastEndLoc:E.currentPosition();return u(F,N,D),F}function x(E,T,M,I){const F=E.context();let O=I.items.length===0;const N=s(1,T,M);N.cases=[],N.cases.push(I);do{const D=w(E);O||(O=D.items.length===0),N.cases.push(D)}while(F.currentType!==14);return O&&o(E,CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL,M,0),u(N,E.currentOffset(),E.currentPosition()),N}function k(E){const T=E.context(),{offset:M,startLoc:I}=T,F=w(E);return T.currentType===14?F:x(E,M,I,F)}function S(E){const T=createTokenizer(E,assign$1({},e)),M=T.context(),I=s(0,M.offset,M.startLoc);return n&&I.loc&&(I.loc.source=E),I.body=k(T),e.onCacheKey&&(I.cacheKey=e.onCacheKey(E)),M.currentType!==14&&o(T,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,M.lastStartLoc,0,E[M.offset]||""),u(I,T.currentOffset(),T.currentPosition()),I}return{parse:S}}function getTokenCaption(e){if(e.type===14)return"EOF";const n=(e.value||"").replace(/\r?\n/gu,"\\n");return n.length>10?n.slice(0,9)+"\u2026":n}function createTransformer(e,n={}){const r={ast:e,helpers:new Set};return{context:()=>r,helper:u=>(r.helpers.add(u),u)}}function traverseNodes(e,n){for(let r=0;r<e.length;r++)traverseNode(e[r],n)}function traverseNode(e,n){switch(e.type){case 1:traverseNodes(e.cases,n),n.helper("plural");break;case 2:traverseNodes(e.items,n);break;case 6:traverseNode(e.key,n),n.helper("linked"),n.helper("type");break;case 5:n.helper("interpolate"),n.helper("list");break;case 4:n.helper("interpolate"),n.helper("named");break}}function transform(e,n={}){const r=createTransformer(e);r.helper("normalize"),e.body&&traverseNode(e.body,r);const o=r.context();e.helpers=Array.from(o.helpers)}function optimize(e){const n=e.body;return n.type===2?optimizeMessageNode(n):n.cases.forEach(r=>optimizeMessageNode(r)),e}function optimizeMessageNode(e){if(e.items.length===1){const n=e.items[0];(n.type===3||n.type===9)&&(e.static=n.value,delete n.value)}else{const n=[];for(let r=0;r<e.items.length;r++){const o=e.items[r];if(!(o.type===3||o.type===9)||o.value==null)break;n.push(o.value)}if(n.length===e.items.length){e.static=join(n);for(let r=0;r<e.items.length;r++){const o=e.items[r];(o.type===3||o.type===9)&&delete o.value}}}}const ERROR_DOMAIN$1="minifier";function minify(e){switch(e.t=e.type,e.type){case 0:const n=e;minify(n.body),n.b=n.body,delete n.body;break;case 1:const r=e,o=r.cases;for(let _=0;_<o.length;_++)minify(o[_]);r.c=o,delete r.cases;break;case 2:const s=e,u=s.items;for(let _=0;_<u.length;_++)minify(u[_]);s.i=u,delete s.items,s.static&&(s.s=s.static,delete s.static);break;case 3:case 9:case 8:case 7:const d=e;d.value&&(d.v=d.value,delete d.value);break;case 6:const f=e;minify(f.key),f.k=f.key,delete f.key,f.modifier&&(minify(f.modifier),f.m=f.modifier,delete f.modifier);break;case 5:const v=e;v.i=v.index,delete v.index;break;case 4:const m=e;m.k=m.key,delete m.key;break;default:throw createCompileError(CompileErrorCodes.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:ERROR_DOMAIN$1,args:[e.type]})}delete e.type}const ERROR_DOMAIN="parser";function createCodeGenerator(e,n){const{sourceMap:r,filename:o,breakLineCode:s,needIndent:u}=n,d=n.location!==!1,f={filename:o,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:s,needIndent:u,indentLevel:0};d&&e.loc&&(f.source=e.loc.source);const v=()=>f;function m(S,E){f.code+=S}function _(S,E=!0){const T=E?s:"";m(u?T+"  ".repeat(S):T)}function g(S=!0){const E=++f.indentLevel;S&&_(E)}function y(S=!0){const E=--f.indentLevel;S&&_(E)}function w(){_(f.indentLevel)}return{context:v,push:m,indent:g,deindent:y,newline:w,helper:S=>`_${S}`,needIndent:()=>f.needIndent}}function generateLinkedNode(e,n){const{helper:r}=e;e.push(`${r("linked")}(`),generateNode(e,n.key),n.modifier?(e.push(", "),generateNode(e,n.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function generateMessageNode(e,n){const{helper:r,needIndent:o}=e;e.push(`${r("normalize")}([`),e.indent(o());const s=n.items.length;for(let u=0;u<s&&(generateNode(e,n.items[u]),u!==s-1);u++)e.push(", ");e.deindent(o()),e.push("])")}function generatePluralNode(e,n){const{helper:r,needIndent:o}=e;if(n.cases.length>1){e.push(`${r("plural")}([`),e.indent(o());const s=n.cases.length;for(let u=0;u<s&&(generateNode(e,n.cases[u]),u!==s-1);u++)e.push(", ");e.deindent(o()),e.push("])")}}function generateResource(e,n){n.body?generateNode(e,n.body):e.push("null")}function generateNode(e,n){const{helper:r}=e;switch(n.type){case 0:generateResource(e,n);break;case 1:generatePluralNode(e,n);break;case 2:generateMessageNode(e,n);break;case 6:generateLinkedNode(e,n);break;case 8:e.push(JSON.stringify(n.value),n);break;case 7:e.push(JSON.stringify(n.value),n);break;case 5:e.push(`${r("interpolate")}(${r("list")}(${n.index}))`,n);break;case 4:e.push(`${r("interpolate")}(${r("named")}(${JSON.stringify(n.key)}))`,n);break;case 9:e.push(JSON.stringify(n.value),n);break;case 3:e.push(JSON.stringify(n.value),n);break;default:throw createCompileError(CompileErrorCodes.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:ERROR_DOMAIN,args:[n.type]})}}const generate=(e,n={})=>{const r=isString$2(n.mode)?n.mode:"normal",o=isString$2(n.filename)?n.filename:"message.intl",s=!!n.sourceMap,u=n.breakLineCode!=null?n.breakLineCode:r==="arrow"?";":`
`,d=n.needIndent?n.needIndent:r!=="arrow",f=e.helpers||[],v=createCodeGenerator(e,{mode:r,filename:o,sourceMap:s,breakLineCode:u,needIndent:d});v.push(r==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),v.indent(d),f.length>0&&(v.push(`const { ${join(f.map(g=>`${g}: _${g}`),", ")} } = ctx`),v.newline()),v.push("return "),generateNode(v,e),v.deindent(d),v.push("}"),delete e.helpers;const{code:m,map:_}=v.context();return{ast:e,code:m,map:_?_.toJSON():void 0}};function baseCompile$1(e,n={}){const r=assign$1({},n),o=!!r.jit,s=!!r.minify,u=r.optimize==null?!0:r.optimize,f=createParser(r).parse(e);return o?(u&&optimize(f),s&&minify(f),{ast:f,code:""}):(transform(f,r),generate(f,r))}/*!
  * devtools-if v9.3.0
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const IntlifyDevToolsHooks={I18nInit:"i18n:init",FunctionTranslate:"function:translate"};/*!
  * core-base v9.3.0
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */function initFeatureFlags$1(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(getGlobalThis().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const pathStateMachine=[];pathStateMachine[0]={w:[0],i:[3,0],["["]:[4],o:[7]};pathStateMachine[1]={w:[1],["."]:[2],["["]:[4],o:[7]};pathStateMachine[2]={w:[2],i:[3,0],[0]:[3,0]};pathStateMachine[3]={i:[3,0],[0]:[3,0],w:[1,1],["."]:[2,1],["["]:[4,1],o:[7,1]};pathStateMachine[4]={["'"]:[5,0],['"']:[6,0],["["]:[4,2],["]"]:[1,3],o:8,l:[4,0]};pathStateMachine[5]={["'"]:[4,0],o:8,l:[5,0]};pathStateMachine[6]={['"']:[4,0],o:8,l:[6,0]};const literalValueRE=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function isLiteral(e){return literalValueRE.test(e)}function stripQuotes(e){const n=e.charCodeAt(0),r=e.charCodeAt(e.length-1);return n===r&&(n===34||n===39)?e.slice(1,-1):e}function getPathCharType(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function formatSubPath(e){const n=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:isLiteral(n)?stripQuotes(n):"*"+n}function parse(e){const n=[];let r=-1,o=0,s=0,u,d,f,v,m,_,g;const y=[];y[0]=()=>{d===void 0?d=f:d+=f},y[1]=()=>{d!==void 0&&(n.push(d),d=void 0)},y[2]=()=>{y[0](),s++},y[3]=()=>{if(s>0)s--,o=4,y[0]();else{if(s=0,d===void 0||(d=formatSubPath(d),d===!1))return!1;y[1]()}};function w(){const x=e[r+1];if(o===5&&x==="'"||o===6&&x==='"')return r++,f="\\"+x,y[0](),!0}for(;o!==null;)if(r++,u=e[r],!(u==="\\"&&w())){if(v=getPathCharType(u),g=pathStateMachine[o],m=g[v]||g.l||8,m===8||(o=m[0],m[1]!==void 0&&(_=y[m[1]],_&&(f=u,_()===!1))))return;if(o===7)return n}}const cache$1=new Map;function resolveWithKeyValue(e,n){return isObject$4(e)?e[n]:null}function resolveValue(e,n){if(!isObject$4(e))return null;let r=cache$1.get(n);if(r||(r=parse(n),r&&cache$1.set(n,r)),!r)return null;const o=r.length;let s=e,u=0;for(;u<o;){const d=s[r[u]];if(d===void 0)return null;s=d,u++}return s}const DEFAULT_MODIFIER=e=>e,DEFAULT_MESSAGE=e=>"",DEFAULT_MESSAGE_DATA_TYPE="text",DEFAULT_NORMALIZE=e=>e.length===0?"":join$1(e),DEFAULT_INTERPOLATE=toDisplayString;function pluralDefault(e,n){return e=Math.abs(e),n===2?e?e>1?1:0:1:e?Math.min(e,2):0}function getPluralIndex(e){const n=isNumber$1(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(isNumber$1(e.named.count)||isNumber$1(e.named.n))?isNumber$1(e.named.count)?e.named.count:isNumber$1(e.named.n)?e.named.n:n:n}function normalizeNamed(e,n){n.count||(n.count=e),n.n||(n.n=e)}function createMessageContext(e={}){const n=e.locale,r=getPluralIndex(e),o=isObject$4(e.pluralRules)&&isString$3(n)&&isFunction$2(e.pluralRules[n])?e.pluralRules[n]:pluralDefault,s=isObject$4(e.pluralRules)&&isString$3(n)&&isFunction$2(e.pluralRules[n])?pluralDefault:void 0,u=E=>E[o(r,E.length,s)],d=e.list||[],f=E=>d[E],v=e.named||{};isNumber$1(e.pluralIndex)&&normalizeNamed(r,v);const m=E=>v[E];function _(E){const T=isFunction$2(e.messages)?e.messages(E):isObject$4(e.messages)?e.messages[E]:!1;return T||(e.parent?e.parent.message(E):DEFAULT_MESSAGE)}const g=E=>e.modifiers?e.modifiers[E]:DEFAULT_MODIFIER,y=isPlainObject$3(e.processor)&&isFunction$2(e.processor.normalize)?e.processor.normalize:DEFAULT_NORMALIZE,w=isPlainObject$3(e.processor)&&isFunction$2(e.processor.interpolate)?e.processor.interpolate:DEFAULT_INTERPOLATE,x=isPlainObject$3(e.processor)&&isString$3(e.processor.type)?e.processor.type:DEFAULT_MESSAGE_DATA_TYPE,S={list:f,named:m,plural:u,linked:(E,...T)=>{const[M,I]=T;let F="text",O="";T.length===1?isObject$4(M)?(O=M.modifier||O,F=M.type||F):isString$3(M)&&(O=M||O):T.length===2&&(isString$3(M)&&(O=M||O),isString$3(I)&&(F=I||F));const N=_(E)(S),D=F==="vnode"&&isArray$3(N)&&O?N[0]:N;return O?g(O)(D,F):D},message:_,type:x,interpolate:w,normalize:y,values:assign$2({},d,v)};return S}let devtools=null;function setDevToolsHook(e){devtools=e}function initI18nDevTools(e,n,r){devtools&&devtools.emit(IntlifyDevToolsHooks.I18nInit,{timestamp:Date.now(),i18n:e,version:n,meta:r})}const translateDevTools=createDevToolsHook(IntlifyDevToolsHooks.FunctionTranslate);function createDevToolsHook(e){return n=>devtools&&devtools.emit(e,n)}const CoreWarnCodes={NOT_FOUND_KEY:1,FALLBACK_TO_TRANSLATE:2,CANNOT_FORMAT_NUMBER:3,FALLBACK_TO_NUMBER_FORMAT:4,CANNOT_FORMAT_DATE:5,FALLBACK_TO_DATE_FORMAT:6,EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:7,__EXTEND_POINT__:8};function fallbackWithSimple(e,n,r){return[...new Set([r,...isArray$3(n)?n:isObject$4(n)?Object.keys(n):isString$3(n)?[n]:[r]])]}function fallbackWithLocaleChain(e,n,r){const o=isString$3(r)?r:DEFAULT_LOCALE,s=e;s.__localeChainCache||(s.__localeChainCache=new Map);let u=s.__localeChainCache.get(o);if(!u){u=[];let d=[r];for(;isArray$3(d);)d=appendBlockToChain(u,d,n);const f=isArray$3(n)||!isPlainObject$3(n)?n:n.default?n.default:null;d=isString$3(f)?[f]:f,isArray$3(d)&&appendBlockToChain(u,d,!1),s.__localeChainCache.set(o,u)}return u}function appendBlockToChain(e,n,r){let o=!0;for(let s=0;s<n.length&&isBoolean(o);s++){const u=n[s];isString$3(u)&&(o=appendLocaleToChain(e,n[s],r))}return o}function appendLocaleToChain(e,n,r){let o;const s=n.split("-");do{const u=s.join("-");o=appendItemToChain(e,u,r),s.splice(-1,1)}while(s.length&&o===!0);return o}function appendItemToChain(e,n,r){let o=!1;if(!e.includes(n)&&(o=!0,n)){o=n[n.length-1]!=="!";const s=n.replace(/!/g,"");e.push(s),(isArray$3(r)||isPlainObject$3(r))&&r[s]&&(o=r[s])}return o}const VERSION$2="9.3.0",NOT_REOSLVED=-1,DEFAULT_LOCALE="en-US",MISSING_RESOLVE_VALUE="",capitalize=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function getDefaultLinkedModifiers(){return{upper:(e,n)=>n==="text"&&isString$3(e)?e.toUpperCase():n==="vnode"&&isObject$4(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,n)=>n==="text"&&isString$3(e)?e.toLowerCase():n==="vnode"&&isObject$4(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,n)=>n==="text"&&isString$3(e)?capitalize(e):n==="vnode"&&isObject$4(e)&&"__v_isVNode"in e?capitalize(e.children):e}}let _compiler;function registerMessageCompiler(e){_compiler=e}let _resolver;function registerMessageResolver(e){_resolver=e}let _fallbacker;function registerLocaleFallbacker(e){_fallbacker=e}let _additionalMeta=null;const setAdditionalMeta=e=>{_additionalMeta=e},getAdditionalMeta=()=>_additionalMeta;let _fallbackContext=null;const setFallbackContext=e=>{_fallbackContext=e},getFallbackContext=()=>_fallbackContext;let _cid=0;function createCoreContext(e={}){const n=isFunction$2(e.onWarn)?e.onWarn:warn$3,r=isString$3(e.version)?e.version:VERSION$2,o=isString$3(e.locale)?e.locale:DEFAULT_LOCALE,s=isArray$3(e.fallbackLocale)||isPlainObject$3(e.fallbackLocale)||isString$3(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:o,u=isPlainObject$3(e.messages)?e.messages:{[o]:{}},d=isPlainObject$3(e.datetimeFormats)?e.datetimeFormats:{[o]:{}},f=isPlainObject$3(e.numberFormats)?e.numberFormats:{[o]:{}},v=assign$2({},e.modifiers||{},getDefaultLinkedModifiers()),m=e.pluralRules||{},_=isFunction$2(e.missing)?e.missing:null,g=isBoolean(e.missingWarn)||isRegExp(e.missingWarn)?e.missingWarn:!0,y=isBoolean(e.fallbackWarn)||isRegExp(e.fallbackWarn)?e.fallbackWarn:!0,w=!!e.fallbackFormat,x=!!e.unresolving,k=isFunction$2(e.postTranslation)?e.postTranslation:null,S=isPlainObject$3(e.processor)?e.processor:null,E=isBoolean(e.warnHtmlMessage)?e.warnHtmlMessage:!0,T=!!e.escapeParameter,M=isFunction$2(e.messageCompiler)?e.messageCompiler:_compiler,I=isFunction$2(e.messageResolver)?e.messageResolver:_resolver||resolveWithKeyValue,F=isFunction$2(e.localeFallbacker)?e.localeFallbacker:_fallbacker||fallbackWithSimple,O=isObject$4(e.fallbackContext)?e.fallbackContext:void 0,N=e,D=isObject$4(N.__datetimeFormatters)?N.__datetimeFormatters:new Map,X=isObject$4(N.__numberFormatters)?N.__numberFormatters:new Map,U=isObject$4(N.__meta)?N.__meta:{};_cid++;const Z={version:r,cid:_cid,locale:o,fallbackLocale:s,messages:u,modifiers:v,pluralRules:m,missing:_,missingWarn:g,fallbackWarn:y,fallbackFormat:w,unresolving:x,postTranslation:k,processor:S,warnHtmlMessage:E,escapeParameter:T,messageCompiler:M,messageResolver:I,localeFallbacker:F,fallbackContext:O,onWarn:n,__meta:U};return Z.datetimeFormats=d,Z.numberFormats=f,Z.__datetimeFormatters=D,Z.__numberFormatters=X,__INTLIFY_PROD_DEVTOOLS__&&initI18nDevTools(Z,r,U),Z}function handleMissing(e,n,r,o,s){const{missing:u,onWarn:d}=e;if(u!==null){const f=u(e,r,n,s);return isString$3(f)?f:n}else return n}function updateFallbackLocale(e,n,r){const o=e;o.__localeChainCache=new Map,e.localeFallbacker(e,r,n)}function format$1(e){return r=>formatParts(r,e)}function formatParts(e,n){const r=n.b||n.body;if((r.t||r.type)===1){const o=r,s=o.c||o.cases;return e.plural(s.reduce((u,d)=>[...u,formatMessageParts(e,d)],[]))}else return formatMessageParts(e,r)}function formatMessageParts(e,n){const r=n.s||n.static;if(r)return e.type==="text"?r:e.normalize([r]);{const o=(n.i||n.items).reduce((s,u)=>[...s,formatMessagePart(e,u)],[]);return e.normalize(o)}}function formatMessagePart(e,n){const r=n.t||n.type;switch(r){case 3:const o=n;return o.v||o.value;case 9:const s=n;return s.v||s.value;case 4:const u=n;return e.interpolate(e.named(u.k||u.key));case 5:const d=n;return e.interpolate(e.list(d.i||d.index));case 6:const f=n,v=f.m||f.modifier;return e.linked(formatMessagePart(e,f.k||f.key),v?formatMessagePart(e,v):void 0,e.type);case 7:const m=n;return m.v||m.value;case 8:const _=n;return _.v||_.value;default:throw new Error(`unhandled node type on format message part: ${r}`)}}const code$2=CompileErrorCodes.__EXTEND_POINT__,inc$2=incrementer(code$2),CoreErrorCodes={INVALID_ARGUMENT:code$2,INVALID_DATE_ARGUMENT:inc$2(),INVALID_ISO_DATE_ARGUMENT:inc$2(),NOT_SUPPORT_NON_STRING_MESSAGE:inc$2(),__EXTEND_POINT__:inc$2()};function createCoreError(e){return createCompileError(e,null,void 0)}const defaultOnCacheKey=e=>e;let compileCache=Object.create(null);const isMessageAST=e=>isObject$4(e)&&(e.t===0||e.type===0)&&("b"in e||"body"in e);function baseCompile(e,n={}){let r=!1;const o=n.onError||defaultOnError;return n.onError=s=>{r=!0,o(s)},{...baseCompile$1(e,n),detectError:r}}function compileToFunction(e,n){if(!isString$3(e))throw createCoreError(CoreErrorCodes.NOT_SUPPORT_NON_STRING_MESSAGE);{isBoolean(n.warnHtmlMessage)&&n.warnHtmlMessage;const o=(n.onCacheKey||defaultOnCacheKey)(e),s=compileCache[o];if(s)return s;const{code:u,detectError:d}=baseCompile(e,n),f=new Function(`return ${u}`)();return d?f:compileCache[o]=f}}function compile(e,n){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&isString$3(e)){isBoolean(n.warnHtmlMessage)&&n.warnHtmlMessage;const o=(n.onCacheKey||defaultOnCacheKey)(e),s=compileCache[o];if(s)return s;const{ast:u,detectError:d}=baseCompile(e,{...n,location:!1,jit:!0}),f=format$1(u);return d?f:compileCache[o]=f}else{const r=e.cacheKey;if(r){const o=compileCache[r];return o||(compileCache[r]=format$1(e))}else return format$1(e)}}const NOOP_MESSAGE_FUNCTION=()=>"",isMessageFunction=e=>isFunction$2(e);function translate(e,...n){const{fallbackFormat:r,postTranslation:o,unresolving:s,messageCompiler:u,fallbackLocale:d,messages:f}=e,[v,m]=parseTranslateArgs(...n),_=isBoolean(m.missingWarn)?m.missingWarn:e.missingWarn,g=isBoolean(m.fallbackWarn)?m.fallbackWarn:e.fallbackWarn,y=isBoolean(m.escapeParameter)?m.escapeParameter:e.escapeParameter,w=!!m.resolvedMessage,x=isString$3(m.default)||isBoolean(m.default)?isBoolean(m.default)?u?v:()=>v:m.default:r?u?v:()=>v:"",k=r||x!=="",S=isString$3(m.locale)?m.locale:e.locale;y&&escapeParams(m);let[E,T,M]=w?[v,S,f[S]||{}]:resolveMessageFormat(e,v,S,d,g,_),I=E,F=v;if(!w&&!(isString$3(I)||isMessageAST(I)||isMessageFunction(I))&&k&&(I=x,F=I),!w&&(!(isString$3(I)||isMessageAST(I)||isMessageFunction(I))||!isString$3(T)))return s?NOT_REOSLVED:v;let O=!1;const N=()=>{O=!0},D=isMessageFunction(I)?I:compileMessageFormat(e,v,T,I,F,N);if(O)return I;const X=getMessageContextOptions(e,T,M,m),U=createMessageContext(X),Z=evaluateMessage(e,D,U),j=o?o(Z,v):Z;if(__INTLIFY_PROD_DEVTOOLS__){const Q={timestamp:Date.now(),key:isString$3(v)?v:isMessageFunction(I)?I.key:"",locale:T||(isMessageFunction(I)?I.locale:""),format:isString$3(I)?I:isMessageFunction(I)?I.source:"",message:j};Q.meta=assign$2({},e.__meta,getAdditionalMeta()||{}),translateDevTools(Q)}return j}function escapeParams(e){isArray$3(e.list)?e.list=e.list.map(n=>isString$3(n)?escapeHtml(n):n):isObject$4(e.named)&&Object.keys(e.named).forEach(n=>{isString$3(e.named[n])&&(e.named[n]=escapeHtml(e.named[n]))})}function resolveMessageFormat(e,n,r,o,s,u){const{messages:d,onWarn:f,messageResolver:v,localeFallbacker:m}=e,_=m(e,o,r);let g={},y,w=null;const x="translate";for(let k=0;k<_.length&&(y=_[k],g=d[y]||{},(w=v(g,n))===null&&(w=g[n]),!(isString$3(w)||isMessageAST(w)||isMessageFunction(w)));k++){const S=handleMissing(e,n,y,u,x);S!==n&&(w=S)}return[w,y,g]}function compileMessageFormat(e,n,r,o,s,u){const{messageCompiler:d,warnHtmlMessage:f}=e;if(isMessageFunction(o)){const m=o;return m.locale=m.locale||r,m.key=m.key||n,m}if(d==null){const m=()=>o;return m.locale=r,m.key=n,m}const v=d(o,getCompileContext(e,r,s,o,f,u));return v.locale=r,v.key=n,v.source=o,v}function evaluateMessage(e,n,r){return n(r)}function parseTranslateArgs(...e){const[n,r,o]=e,s={};if(!isString$3(n)&&!isNumber$1(n)&&!isMessageFunction(n)&&!isMessageAST(n))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const u=isNumber$1(n)?String(n):(isMessageFunction(n),n);return isNumber$1(r)?s.plural=r:isString$3(r)?s.default=r:isPlainObject$3(r)&&!isEmptyObject(r)?s.named=r:isArray$3(r)&&(s.list=r),isNumber$1(o)?s.plural=o:isString$3(o)?s.default=o:isPlainObject$3(o)&&assign$2(s,o),[u,s]}function getCompileContext(e,n,r,o,s,u){return{locale:n,key:r,warnHtmlMessage:s,onError:d=>{throw u&&u(d),d},onCacheKey:d=>generateFormatCacheKey(n,r,d)}}function getMessageContextOptions(e,n,r,o){const{modifiers:s,pluralRules:u,messageResolver:d,fallbackLocale:f,fallbackWarn:v,missingWarn:m,fallbackContext:_}=e,y={locale:n,modifiers:s,pluralRules:u,messages:w=>{let x=d(r,w);if(x==null&&_){const[,,k]=resolveMessageFormat(_,w,n,f,v,m);x=d(k,w)}if(isString$3(x)||isMessageAST(x)){let k=!1;const E=compileMessageFormat(e,w,n,x,w,()=>{k=!0});return k?NOOP_MESSAGE_FUNCTION:E}else return isMessageFunction(x)?x:NOOP_MESSAGE_FUNCTION}};return e.processor&&(y.processor=e.processor),o.list&&(y.list=o.list),o.named&&(y.named=o.named),isNumber$1(o.plural)&&(y.pluralIndex=o.plural),y}function datetime(e,...n){const{datetimeFormats:r,unresolving:o,fallbackLocale:s,onWarn:u,localeFallbacker:d}=e,{__datetimeFormatters:f}=e,[v,m,_,g]=parseDateTimeArgs(...n),y=isBoolean(_.missingWarn)?_.missingWarn:e.missingWarn;isBoolean(_.fallbackWarn)?_.fallbackWarn:e.fallbackWarn;const w=!!_.part,x=isString$3(_.locale)?_.locale:e.locale,k=d(e,s,x);if(!isString$3(v)||v==="")return new Intl.DateTimeFormat(x,g).format(m);let S={},E,T=null;const M="datetime format";for(let O=0;O<k.length&&(E=k[O],S=r[E]||{},T=S[v],!isPlainObject$3(T));O++)handleMissing(e,v,E,y,M);if(!isPlainObject$3(T)||!isString$3(E))return o?NOT_REOSLVED:v;let I=`${E}__${v}`;isEmptyObject(g)||(I=`${I}__${JSON.stringify(g)}`);let F=f.get(I);return F||(F=new Intl.DateTimeFormat(E,assign$2({},T,g)),f.set(I,F)),w?F.formatToParts(m):F.format(m)}const DATETIME_FORMAT_OPTIONS_KEYS=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function parseDateTimeArgs(...e){const[n,r,o,s]=e,u={};let d={},f;if(isString$3(n)){const v=n.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!v)throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT);const m=v[3]?v[3].trim().startsWith("T")?`${v[1].trim()}${v[3].trim()}`:`${v[1].trim()}T${v[3].trim()}`:v[1].trim();f=new Date(m);try{f.toISOString()}catch{throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT)}}else if(isDate$1(n)){if(isNaN(n.getTime()))throw createCoreError(CoreErrorCodes.INVALID_DATE_ARGUMENT);f=n}else if(isNumber$1(n))f=n;else throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);return isString$3(r)?u.key=r:isPlainObject$3(r)&&Object.keys(r).forEach(v=>{DATETIME_FORMAT_OPTIONS_KEYS.includes(v)?d[v]=r[v]:u[v]=r[v]}),isString$3(o)?u.locale=o:isPlainObject$3(o)&&(d=o),isPlainObject$3(s)&&(d=s),[u.key||"",f,u,d]}function clearDateTimeFormat(e,n,r){const o=e;for(const s in r){const u=`${n}__${s}`;!o.__datetimeFormatters.has(u)||o.__datetimeFormatters.delete(u)}}function number(e,...n){const{numberFormats:r,unresolving:o,fallbackLocale:s,onWarn:u,localeFallbacker:d}=e,{__numberFormatters:f}=e,[v,m,_,g]=parseNumberArgs(...n),y=isBoolean(_.missingWarn)?_.missingWarn:e.missingWarn;isBoolean(_.fallbackWarn)?_.fallbackWarn:e.fallbackWarn;const w=!!_.part,x=isString$3(_.locale)?_.locale:e.locale,k=d(e,s,x);if(!isString$3(v)||v==="")return new Intl.NumberFormat(x,g).format(m);let S={},E,T=null;const M="number format";for(let O=0;O<k.length&&(E=k[O],S=r[E]||{},T=S[v],!isPlainObject$3(T));O++)handleMissing(e,v,E,y,M);if(!isPlainObject$3(T)||!isString$3(E))return o?NOT_REOSLVED:v;let I=`${E}__${v}`;isEmptyObject(g)||(I=`${I}__${JSON.stringify(g)}`);let F=f.get(I);return F||(F=new Intl.NumberFormat(E,assign$2({},T,g)),f.set(I,F)),w?F.formatToParts(m):F.format(m)}const NUMBER_FORMAT_OPTIONS_KEYS=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function parseNumberArgs(...e){const[n,r,o,s]=e,u={};let d={};if(!isNumber$1(n))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const f=n;return isString$3(r)?u.key=r:isPlainObject$3(r)&&Object.keys(r).forEach(v=>{NUMBER_FORMAT_OPTIONS_KEYS.includes(v)?d[v]=r[v]:u[v]=r[v]}),isString$3(o)?u.locale=o:isPlainObject$3(o)&&(d=o),isPlainObject$3(s)&&(d=s),[u.key||"",f,u,d]}function clearNumberFormat(e,n,r){const o=e;for(const s in r){const u=`${n}__${s}`;!o.__numberFormatters.has(u)||o.__numberFormatters.delete(u)}}initFeatureFlags$1();/*!
  * vue-i18n v9.3.0
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const VERSION$1="9.3.0";function initFeatureFlags(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(getGlobalThis().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(getGlobalThis().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(getGlobalThis().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1)}const code$1=CoreWarnCodes.__EXTEND_POINT__,inc$1=incrementer(code$1);inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1();const code=CoreErrorCodes.__EXTEND_POINT__,inc=incrementer(code),I18nErrorCodes={UNEXPECTED_RETURN_TYPE:code,INVALID_ARGUMENT:inc(),MUST_BE_CALL_SETUP_TOP:inc(),NOT_INSTALLED:inc(),NOT_AVAILABLE_IN_LEGACY_MODE:inc(),REQUIRED_VALUE:inc(),INVALID_VALUE:inc(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:inc(),NOT_INSTALLED_WITH_PROVIDE:inc(),UNEXPECTED_ERROR:inc(),NOT_COMPATIBLE_LEGACY_VUE_I18N:inc(),BRIDGE_SUPPORT_VUE_2_ONLY:inc(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:inc(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:inc(),__EXTEND_POINT__:inc()};function createI18nError(e,...n){return createCompileError(e,null,void 0)}const TranslateVNodeSymbol=makeSymbol("__translateVNode"),DatetimePartsSymbol=makeSymbol("__datetimeParts"),NumberPartsSymbol=makeSymbol("__numberParts"),SetPluralRulesSymbol=makeSymbol("__setPluralRules");makeSymbol("__intlifyMeta");const InejctWithOptionSymbol=makeSymbol("__injectWithOption"),DisposeSymbol=makeSymbol("__dispose");function handleFlatJson(e){if(!isObject$4(e))return e;for(const n in e)if(!!hasOwn(e,n))if(!n.includes("."))isObject$4(e[n])&&handleFlatJson(e[n]);else{const r=n.split("."),o=r.length-1;let s=e,u=!1;for(let d=0;d<o;d++){if(r[d]in s||(s[r[d]]={}),!isObject$4(s[r[d]])){u=!0;break}s=s[r[d]]}u||(s[r[o]]=e[n],delete e[n]),isObject$4(s[r[o]])&&handleFlatJson(s[r[o]])}return e}function getLocaleMessages(e,n){const{messages:r,__i18n:o,messageResolver:s,flatJson:u}=n,d=isPlainObject$3(r)?r:isArray$3(o)?{}:{[e]:{}};if(isArray$3(o)&&o.forEach(f=>{if("locale"in f&&"resource"in f){const{locale:v,resource:m}=f;v?(d[v]=d[v]||{},deepCopy(m,d[v])):deepCopy(m,d)}else isString$3(f)&&deepCopy(JSON.parse(f),d)}),s==null&&u)for(const f in d)hasOwn(d,f)&&handleFlatJson(d[f]);return d}const isNotObjectOrIsArray=e=>!isObject$4(e)||isArray$3(e);function deepCopy(e,n){if(isNotObjectOrIsArray(e)||isNotObjectOrIsArray(n))throw createI18nError(I18nErrorCodes.INVALID_VALUE);for(const r in e)hasOwn(e,r)&&(isNotObjectOrIsArray(e[r])||isNotObjectOrIsArray(n[r])?n[r]=e[r]:deepCopy(e[r],n[r]))}function getComponentOptions(e){return e.type}function adjustI18nResources(e,n,r){let o=isObject$4(n.messages)?n.messages:{};"__i18nGlobal"in r&&(o=getLocaleMessages(e.locale.value,{messages:o,__i18n:r.__i18nGlobal}));const s=Object.keys(o);s.length&&s.forEach(u=>{e.mergeLocaleMessage(u,o[u])});{if(isObject$4(n.datetimeFormats)){const u=Object.keys(n.datetimeFormats);u.length&&u.forEach(d=>{e.mergeDateTimeFormat(d,n.datetimeFormats[d])})}if(isObject$4(n.numberFormats)){const u=Object.keys(n.numberFormats);u.length&&u.forEach(d=>{e.mergeNumberFormat(d,n.numberFormats[d])})}}}function createTextNode(e){return createVNode(Text$2,null,e,0)}const DEVTOOLS_META="__INTLIFY_META__";let composerID=0;function defineCoreMissingHandler(e){return(n,r,o,s)=>e(r,o,getCurrentInstance()||void 0,s)}const getMetaInfo=()=>{const e=getCurrentInstance();let n=null;return e&&(n=getComponentOptions(e)[DEVTOOLS_META])?{[DEVTOOLS_META]:n}:null};function createComposer(e={},n){const{__root:r,__injectWithOption:o}=e,s=r===void 0;let u=isBoolean(e.inheritLocale)?e.inheritLocale:!0;const d=ref(r&&u?r.locale.value:isString$3(e.locale)?e.locale:DEFAULT_LOCALE),f=ref(r&&u?r.fallbackLocale.value:isString$3(e.fallbackLocale)||isArray$3(e.fallbackLocale)||isPlainObject$3(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:d.value),v=ref(getLocaleMessages(d.value,e)),m=ref(isPlainObject$3(e.datetimeFormats)?e.datetimeFormats:{[d.value]:{}}),_=ref(isPlainObject$3(e.numberFormats)?e.numberFormats:{[d.value]:{}});let g=r?r.missingWarn:isBoolean(e.missingWarn)||isRegExp(e.missingWarn)?e.missingWarn:!0,y=r?r.fallbackWarn:isBoolean(e.fallbackWarn)||isRegExp(e.fallbackWarn)?e.fallbackWarn:!0,w=r?r.fallbackRoot:isBoolean(e.fallbackRoot)?e.fallbackRoot:!0,x=!!e.fallbackFormat,k=isFunction$2(e.missing)?e.missing:null,S=isFunction$2(e.missing)?defineCoreMissingHandler(e.missing):null,E=isFunction$2(e.postTranslation)?e.postTranslation:null,T=r?r.warnHtmlMessage:isBoolean(e.warnHtmlMessage)?e.warnHtmlMessage:!0,M=!!e.escapeParameter;const I=r?r.modifiers:isPlainObject$3(e.modifiers)?e.modifiers:{};let F=e.pluralRules||r&&r.pluralRules,O;O=(()=>{s&&setFallbackContext(null);const Re={version:VERSION$1,locale:d.value,fallbackLocale:f.value,messages:v.value,modifiers:I,pluralRules:F,missing:S===null?void 0:S,missingWarn:g,fallbackWarn:y,fallbackFormat:x,unresolving:!0,postTranslation:E===null?void 0:E,warnHtmlMessage:T,escapeParameter:M,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};Re.datetimeFormats=m.value,Re.numberFormats=_.value,Re.__datetimeFormatters=isPlainObject$3(O)?O.__datetimeFormatters:void 0,Re.__numberFormatters=isPlainObject$3(O)?O.__numberFormatters:void 0;const He=createCoreContext(Re);return s&&setFallbackContext(He),He})(),updateFallbackLocale(O,d.value,f.value);function D(){return[d.value,f.value,v.value,m.value,_.value]}const X=computed({get:()=>d.value,set:Re=>{d.value=Re,O.locale=d.value}}),U=computed({get:()=>f.value,set:Re=>{f.value=Re,O.fallbackLocale=f.value,updateFallbackLocale(O,d.value,Re)}}),Z=computed(()=>v.value),j=computed(()=>m.value),Q=computed(()=>_.value);function ve(){return isFunction$2(E)?E:null}function Se(Re){E=Re,O.postTranslation=Re}function we(){return k}function oe(Re){Re!==null&&(S=defineCoreMissingHandler(Re)),k=Re,O.missing=S}const ne=(Re,He,Ze,Xe,at,ut)=>{D();let ct;try{__INTLIFY_PROD_DEVTOOLS__&&setAdditionalMeta(getMetaInfo()),s||(O.fallbackContext=r?getFallbackContext():void 0),ct=Re(O)}finally{__INTLIFY_PROD_DEVTOOLS__&&setAdditionalMeta(null),s||(O.fallbackContext=void 0)}if(isNumber$1(ct)&&ct===NOT_REOSLVED){const[mt,pt]=He();return r&&w?Xe(r):at(mt)}else{if(ut(ct))return ct;throw createI18nError(I18nErrorCodes.UNEXPECTED_RETURN_TYPE)}};function q(...Re){return ne(He=>Reflect.apply(translate,null,[He,...Re]),()=>parseTranslateArgs(...Re),"translate",He=>Reflect.apply(He.t,He,[...Re]),He=>He,He=>isString$3(He))}function H(...Re){const[He,Ze,Xe]=Re;if(Xe&&!isObject$4(Xe))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);return q(He,Ze,assign$2({resolvedMessage:!0},Xe||{}))}function Y(...Re){return ne(He=>Reflect.apply(datetime,null,[He,...Re]),()=>parseDateTimeArgs(...Re),"datetime format",He=>Reflect.apply(He.d,He,[...Re]),()=>MISSING_RESOLVE_VALUE,He=>isString$3(He))}function le(...Re){return ne(He=>Reflect.apply(number,null,[He,...Re]),()=>parseNumberArgs(...Re),"number format",He=>Reflect.apply(He.n,He,[...Re]),()=>MISSING_RESOLVE_VALUE,He=>isString$3(He))}function Ce(Re){return Re.map(He=>isString$3(He)||isNumber$1(He)||isBoolean(He)?createTextNode(String(He)):He)}const ke={normalize:Ce,interpolate:Re=>Re,type:"vnode"};function Ee(...Re){return ne(He=>{let Ze;const Xe=He;try{Xe.processor=ke,Ze=Reflect.apply(translate,null,[Xe,...Re])}finally{Xe.processor=null}return Ze},()=>parseTranslateArgs(...Re),"translate",He=>He[TranslateVNodeSymbol](...Re),He=>[createTextNode(He)],He=>isArray$3(He))}function Pe(...Re){return ne(He=>Reflect.apply(number,null,[He,...Re]),()=>parseNumberArgs(...Re),"number format",He=>He[NumberPartsSymbol](...Re),()=>[],He=>isString$3(He)||isArray$3(He))}function Be(...Re){return ne(He=>Reflect.apply(datetime,null,[He,...Re]),()=>parseDateTimeArgs(...Re),"datetime format",He=>He[DatetimePartsSymbol](...Re),()=>[],He=>isString$3(He)||isArray$3(He))}function $e(Re){F=Re,O.pluralRules=F}function Oe(Re,He){const Ze=isString$3(He)?He:d.value,Xe=fe(Ze);return O.messageResolver(Xe,Re)!==null}function Ne(Re){let He=null;const Ze=fallbackWithLocaleChain(O,f.value,d.value);for(let Xe=0;Xe<Ze.length;Xe++){const at=v.value[Ze[Xe]]||{},ut=O.messageResolver(at,Re);if(ut!=null){He=ut;break}}return He}function J(Re){const He=Ne(Re);return He!=null?He:r?r.tm(Re)||{}:{}}function fe(Re){return v.value[Re]||{}}function re(Re,He){v.value[Re]=He,O.messages=v.value}function _e(Re,He){v.value[Re]=v.value[Re]||{},deepCopy(He,v.value[Re]),O.messages=v.value}function be(Re){return m.value[Re]||{}}function Ae(Re,He){m.value[Re]=He,O.datetimeFormats=m.value,clearDateTimeFormat(O,Re,He)}function Le(Re,He){m.value[Re]=assign$2(m.value[Re]||{},He),O.datetimeFormats=m.value,clearDateTimeFormat(O,Re,He)}function Ve(Re){return _.value[Re]||{}}function Fe(Re,He){_.value[Re]=He,O.numberFormats=_.value,clearNumberFormat(O,Re,He)}function De(Re,He){_.value[Re]=assign$2(_.value[Re]||{},He),O.numberFormats=_.value,clearNumberFormat(O,Re,He)}composerID++,r&&inBrowser$1&&(watch(r.locale,Re=>{u&&(d.value=Re,O.locale=Re,updateFallbackLocale(O,d.value,f.value))}),watch(r.fallbackLocale,Re=>{u&&(f.value=Re,O.fallbackLocale=Re,updateFallbackLocale(O,d.value,f.value))}));const We={id:composerID,locale:X,fallbackLocale:U,get inheritLocale(){return u},set inheritLocale(Re){u=Re,Re&&r&&(d.value=r.locale.value,f.value=r.fallbackLocale.value,updateFallbackLocale(O,d.value,f.value))},get availableLocales(){return Object.keys(v.value).sort()},messages:Z,get modifiers(){return I},get pluralRules(){return F||{}},get isGlobal(){return s},get missingWarn(){return g},set missingWarn(Re){g=Re,O.missingWarn=g},get fallbackWarn(){return y},set fallbackWarn(Re){y=Re,O.fallbackWarn=y},get fallbackRoot(){return w},set fallbackRoot(Re){w=Re},get fallbackFormat(){return x},set fallbackFormat(Re){x=Re,O.fallbackFormat=x},get warnHtmlMessage(){return T},set warnHtmlMessage(Re){T=Re,O.warnHtmlMessage=Re},get escapeParameter(){return M},set escapeParameter(Re){M=Re,O.escapeParameter=Re},t:q,getLocaleMessage:fe,setLocaleMessage:re,mergeLocaleMessage:_e,getPostTranslationHandler:ve,setPostTranslationHandler:Se,getMissingHandler:we,setMissingHandler:oe,[SetPluralRulesSymbol]:$e};return We.datetimeFormats=j,We.numberFormats=Q,We.rt=H,We.te=Oe,We.tm=J,We.d=Y,We.n=le,We.getDateTimeFormat=be,We.setDateTimeFormat=Ae,We.mergeDateTimeFormat=Le,We.getNumberFormat=Ve,We.setNumberFormat=Fe,We.mergeNumberFormat=De,We[InejctWithOptionSymbol]=o,We[TranslateVNodeSymbol]=Ee,We[DatetimePartsSymbol]=Be,We[NumberPartsSymbol]=Pe,We}function convertComposerOptions(e){const n=isString$3(e.locale)?e.locale:DEFAULT_LOCALE,r=isString$3(e.fallbackLocale)||isArray$3(e.fallbackLocale)||isPlainObject$3(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:n,o=isFunction$2(e.missing)?e.missing:void 0,s=isBoolean(e.silentTranslationWarn)||isRegExp(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,u=isBoolean(e.silentFallbackWarn)||isRegExp(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,d=isBoolean(e.fallbackRoot)?e.fallbackRoot:!0,f=!!e.formatFallbackMessages,v=isPlainObject$3(e.modifiers)?e.modifiers:{},m=e.pluralizationRules,_=isFunction$2(e.postTranslation)?e.postTranslation:void 0,g=isString$3(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,y=!!e.escapeParameterHtml,w=isBoolean(e.sync)?e.sync:!0;let x=e.messages;if(isPlainObject$3(e.sharedMessages)){const F=e.sharedMessages;x=Object.keys(F).reduce((N,D)=>{const X=N[D]||(N[D]={});return assign$2(X,F[D]),N},x||{})}const{__i18n:k,__root:S,__injectWithOption:E}=e,T=e.datetimeFormats,M=e.numberFormats,I=e.flatJson;return{locale:n,fallbackLocale:r,messages:x,flatJson:I,datetimeFormats:T,numberFormats:M,missing:o,missingWarn:s,fallbackWarn:u,fallbackRoot:d,fallbackFormat:f,modifiers:v,pluralRules:m,postTranslation:_,warnHtmlMessage:g,escapeParameter:y,messageResolver:e.messageResolver,inheritLocale:w,__i18n:k,__root:S,__injectWithOption:E}}function createVueI18n(e={},n){{const r=createComposer(convertComposerOptions(e)),{__extender:o}=e,s={id:r.id,get locale(){return r.locale.value},set locale(u){r.locale.value=u},get fallbackLocale(){return r.fallbackLocale.value},set fallbackLocale(u){r.fallbackLocale.value=u},get messages(){return r.messages.value},get datetimeFormats(){return r.datetimeFormats.value},get numberFormats(){return r.numberFormats.value},get availableLocales(){return r.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(u){},get missing(){return r.getMissingHandler()},set missing(u){r.setMissingHandler(u)},get silentTranslationWarn(){return isBoolean(r.missingWarn)?!r.missingWarn:r.missingWarn},set silentTranslationWarn(u){r.missingWarn=isBoolean(u)?!u:u},get silentFallbackWarn(){return isBoolean(r.fallbackWarn)?!r.fallbackWarn:r.fallbackWarn},set silentFallbackWarn(u){r.fallbackWarn=isBoolean(u)?!u:u},get modifiers(){return r.modifiers},get formatFallbackMessages(){return r.fallbackFormat},set formatFallbackMessages(u){r.fallbackFormat=u},get postTranslation(){return r.getPostTranslationHandler()},set postTranslation(u){r.setPostTranslationHandler(u)},get sync(){return r.inheritLocale},set sync(u){r.inheritLocale=u},get warnHtmlInMessage(){return r.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(u){r.warnHtmlMessage=u!=="off"},get escapeParameterHtml(){return r.escapeParameter},set escapeParameterHtml(u){r.escapeParameter=u},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(u){},get pluralizationRules(){return r.pluralRules||{}},__composer:r,t(...u){const[d,f,v]=u,m={};let _=null,g=null;if(!isString$3(d))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const y=d;return isString$3(f)?m.locale=f:isArray$3(f)?_=f:isPlainObject$3(f)&&(g=f),isArray$3(v)?_=v:isPlainObject$3(v)&&(g=v),Reflect.apply(r.t,r,[y,_||g||{},m])},rt(...u){return Reflect.apply(r.rt,r,[...u])},tc(...u){const[d,f,v]=u,m={plural:1};let _=null,g=null;if(!isString$3(d))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const y=d;return isString$3(f)?m.locale=f:isNumber$1(f)?m.plural=f:isArray$3(f)?_=f:isPlainObject$3(f)&&(g=f),isString$3(v)?m.locale=v:isArray$3(v)?_=v:isPlainObject$3(v)&&(g=v),Reflect.apply(r.t,r,[y,_||g||{},m])},te(u,d){return r.te(u,d)},tm(u){return r.tm(u)},getLocaleMessage(u){return r.getLocaleMessage(u)},setLocaleMessage(u,d){r.setLocaleMessage(u,d)},mergeLocaleMessage(u,d){r.mergeLocaleMessage(u,d)},d(...u){return Reflect.apply(r.d,r,[...u])},getDateTimeFormat(u){return r.getDateTimeFormat(u)},setDateTimeFormat(u,d){r.setDateTimeFormat(u,d)},mergeDateTimeFormat(u,d){r.mergeDateTimeFormat(u,d)},n(...u){return Reflect.apply(r.n,r,[...u])},getNumberFormat(u){return r.getNumberFormat(u)},setNumberFormat(u,d){r.setNumberFormat(u,d)},mergeNumberFormat(u,d){r.mergeNumberFormat(u,d)},getChoiceIndex(u,d){return-1}};return s.__extender=o,s}}const baseFormatProps={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function getInterpolateArg({slots:e},n){return n.length===1&&n[0]==="default"?(e.default?e.default():[]).reduce((o,s)=>[...o,...s.type===Fragment?s.children:[s]],[]):n.reduce((r,o)=>{const s=e[o];return s&&(r[o]=s()),r},{})}function getFragmentableTag(e){return Fragment}const TranslationImpl=defineComponent({name:"i18n-t",props:assign$2({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>isNumber$1(e)||!isNaN(e)}},baseFormatProps),setup(e,n){const{slots:r,attrs:o}=n,s=e.i18n||useI18n({useScope:e.scope,__useComponent:!0});return()=>{const u=Object.keys(r).filter(g=>g!=="_"),d={};e.locale&&(d.locale=e.locale),e.plural!==void 0&&(d.plural=isString$3(e.plural)?+e.plural:e.plural);const f=getInterpolateArg(n,u),v=s[TranslateVNodeSymbol](e.keypath,f,d),m=assign$2({},o),_=isString$3(e.tag)||isObject$4(e.tag)?e.tag:getFragmentableTag();return h(_,m,v)}}}),Translation=TranslationImpl;function isVNode(e){return isArray$3(e)&&!isString$3(e[0])}function renderFormatter(e,n,r,o){const{slots:s,attrs:u}=n;return()=>{const d={part:!0};let f={};e.locale&&(d.locale=e.locale),isString$3(e.format)?d.key=e.format:isObject$4(e.format)&&(isString$3(e.format.key)&&(d.key=e.format.key),f=Object.keys(e.format).reduce((y,w)=>r.includes(w)?assign$2({},y,{[w]:e.format[w]}):y,{}));const v=o(e.value,d,f);let m=[d.key];isArray$3(v)?m=v.map((y,w)=>{const x=s[y.type],k=x?x({[y.type]:y.value,index:w,parts:v}):[y.value];return isVNode(k)&&(k[0].key=`${y.type}-${w}`),k}):isString$3(v)&&(m=[v]);const _=assign$2({},u),g=isString$3(e.tag)||isObject$4(e.tag)?e.tag:getFragmentableTag();return h(g,_,m)}}const NumberFormatImpl=defineComponent({name:"i18n-n",props:assign$2({value:{type:Number,required:!0},format:{type:[String,Object]}},baseFormatProps),setup(e,n){const r=e.i18n||useI18n({useScope:"parent",__useComponent:!0});return renderFormatter(e,n,NUMBER_FORMAT_OPTIONS_KEYS,(...o)=>r[NumberPartsSymbol](...o))}}),NumberFormat=NumberFormatImpl,DatetimeFormatImpl=defineComponent({name:"i18n-d",props:assign$2({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},baseFormatProps),setup(e,n){const r=e.i18n||useI18n({useScope:"parent",__useComponent:!0});return renderFormatter(e,n,DATETIME_FORMAT_OPTIONS_KEYS,(...o)=>r[DatetimePartsSymbol](...o))}}),DatetimeFormat=DatetimeFormatImpl;function getComposer$2(e,n){const r=e;if(e.mode==="composition")return r.__getInstance(n)||e.global;{const o=r.__getInstance(n);return o!=null?o.__composer:e.global.__composer}}function vTDirective(e){const n=d=>{const{instance:f,modifiers:v,value:m}=d;if(!f||!f.$)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const _=getComposer$2(e,f.$),g=parseValue(m);return[Reflect.apply(_.t,_,[...makeParams(g)]),_]};return{created:(d,f)=>{const[v,m]=n(f);inBrowser$1&&e.global===m&&(d.__i18nWatcher=watch(m.locale,()=>{f.instance&&f.instance.$forceUpdate()})),d.__composer=m,d.textContent=v},unmounted:d=>{inBrowser$1&&d.__i18nWatcher&&(d.__i18nWatcher(),d.__i18nWatcher=void 0,delete d.__i18nWatcher),d.__composer&&(d.__composer=void 0,delete d.__composer)},beforeUpdate:(d,{value:f})=>{if(d.__composer){const v=d.__composer,m=parseValue(f);d.textContent=Reflect.apply(v.t,v,[...makeParams(m)])}},getSSRProps:d=>{const[f]=n(d);return{textContent:f}}}}function parseValue(e){if(isString$3(e))return{path:e};if(isPlainObject$3(e)){if(!("path"in e))throw createI18nError(I18nErrorCodes.REQUIRED_VALUE,"path");return e}else throw createI18nError(I18nErrorCodes.INVALID_VALUE)}function makeParams(e){const{path:n,locale:r,args:o,choice:s,plural:u}=e,d={},f=o||{};return isString$3(r)&&(d.locale=r),isNumber$1(s)&&(d.plural=s),isNumber$1(u)&&(d.plural=u),[n,f,d]}function apply$1(e,n,...r){const o=isPlainObject$3(r[0])?r[0]:{},s=!!o.useI18nComponentName;(isBoolean(o.globalInstall)?o.globalInstall:!0)&&([s?"i18n":Translation.name,"I18nT"].forEach(d=>e.component(d,Translation)),[NumberFormat.name,"I18nN"].forEach(d=>e.component(d,NumberFormat)),[DatetimeFormat.name,"I18nD"].forEach(d=>e.component(d,DatetimeFormat))),e.directive("t",vTDirective(n))}function defineMixin(e,n,r){return{beforeCreate(){const o=getCurrentInstance();if(!o)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const s=this.$options;if(s.i18n){const u=s.i18n;if(s.__i18n&&(u.__i18n=s.__i18n),u.__root=n,this===this.$root)this.$i18n=mergeToGlobal(e,u);else{u.__injectWithOption=!0,u.__extender=r.__vueI18nExtend,this.$i18n=createVueI18n(u);const d=this.$i18n;d.__extender&&(d.__disposer=d.__extender(this.$i18n))}}else if(s.__i18n)if(this===this.$root)this.$i18n=mergeToGlobal(e,s);else{this.$i18n=createVueI18n({__i18n:s.__i18n,__injectWithOption:!0,__extender:r.__vueI18nExtend,__root:n});const u=this.$i18n;u.__extender&&(u.__disposer=u.__extender(this.$i18n))}else this.$i18n=e;s.__i18nGlobal&&adjustI18nResources(n,s,s),this.$t=(...u)=>this.$i18n.t(...u),this.$rt=(...u)=>this.$i18n.rt(...u),this.$tc=(...u)=>this.$i18n.tc(...u),this.$te=(u,d)=>this.$i18n.te(u,d),this.$d=(...u)=>this.$i18n.d(...u),this.$n=(...u)=>this.$i18n.n(...u),this.$tm=u=>this.$i18n.tm(u),r.__setInstance(o,this.$i18n)},mounted(){},unmounted(){const o=getCurrentInstance();if(!o)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const s=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,s.__disposer&&(s.__disposer(),delete s.__disposer,delete s.__extender),r.__deleteInstance(o),delete this.$i18n}}}function mergeToGlobal(e,n){e.locale=n.locale||e.locale,e.fallbackLocale=n.fallbackLocale||e.fallbackLocale,e.missing=n.missing||e.missing,e.silentTranslationWarn=n.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=n.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=n.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=n.postTranslation||e.postTranslation,e.warnHtmlInMessage=n.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=n.escapeParameterHtml||e.escapeParameterHtml,e.sync=n.sync||e.sync,e.__composer[SetPluralRulesSymbol](n.pluralizationRules||e.pluralizationRules);const r=getLocaleMessages(e.locale,{messages:n.messages,__i18n:n.__i18n});return Object.keys(r).forEach(o=>e.mergeLocaleMessage(o,r[o])),n.datetimeFormats&&Object.keys(n.datetimeFormats).forEach(o=>e.mergeDateTimeFormat(o,n.datetimeFormats[o])),n.numberFormats&&Object.keys(n.numberFormats).forEach(o=>e.mergeNumberFormat(o,n.numberFormats[o])),e}const I18nInjectionKey=makeSymbol("global-vue-i18n");function createI18n(e={},n){const r=__VUE_I18N_LEGACY_API__&&isBoolean(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,o=isBoolean(e.globalInjection)?e.globalInjection:!0,s=__VUE_I18N_LEGACY_API__&&r?!!e.allowComposition:!0,u=new Map,[d,f]=createGlobal(e,r),v=makeSymbol("");function m(y){return u.get(y)||null}function _(y,w){u.set(y,w)}function g(y){u.delete(y)}{const y={get mode(){return __VUE_I18N_LEGACY_API__&&r?"legacy":"composition"},get allowComposition(){return s},async install(w,...x){if(w.__VUE_I18N_SYMBOL__=v,w.provide(w.__VUE_I18N_SYMBOL__,y),isPlainObject$3(x[0])){const E=x[0];y.__composerExtend=E.__composerExtend,y.__vueI18nExtend=E.__vueI18nExtend}let k=null;!r&&o&&(k=injectGlobalFields(w,y.global)),__VUE_I18N_FULL_INSTALL__&&apply$1(w,y,...x),__VUE_I18N_LEGACY_API__&&r&&w.mixin(defineMixin(f,f.__composer,y));const S=w.unmount;w.unmount=()=>{k&&k(),y.dispose(),S()}},get global(){return f},dispose(){d.stop()},__instances:u,__getInstance:m,__setInstance:_,__deleteInstance:g};return y}}function useI18n(e={}){const n=getCurrentInstance();if(n==null)throw createI18nError(I18nErrorCodes.MUST_BE_CALL_SETUP_TOP);if(!n.isCE&&n.appContext.app!=null&&!n.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(I18nErrorCodes.NOT_INSTALLED);const r=getI18nInstance(n),o=getGlobalComposer(r),s=getComponentOptions(n),u=getScope(e,s);if(__VUE_I18N_LEGACY_API__&&r.mode==="legacy"&&!e.__useComponent){if(!r.allowComposition)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_IN_LEGACY_MODE);return useI18nForLegacy(n,u,o,e)}if(u==="global")return adjustI18nResources(o,e,s),o;if(u==="parent"){let v=getComposer(r,n,e.__useComponent);return v==null&&(v=o),v}const d=r;let f=d.__getInstance(n);if(f==null){const v=assign$2({},e);"__i18n"in s&&(v.__i18n=s.__i18n),o&&(v.__root=o),f=createComposer(v),d.__composerExtend&&(f[DisposeSymbol]=d.__composerExtend(f)),setupLifeCycle(d,n,f),d.__setInstance(n,f)}return f}function createGlobal(e,n,r){const o=effectScope();{const s=__VUE_I18N_LEGACY_API__&&n?o.run(()=>createVueI18n(e)):o.run(()=>createComposer(e));if(s==null)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);return[o,s]}}function getI18nInstance(e){{const n=inject(e.isCE?I18nInjectionKey:e.appContext.app.__VUE_I18N_SYMBOL__);if(!n)throw createI18nError(e.isCE?I18nErrorCodes.NOT_INSTALLED_WITH_PROVIDE:I18nErrorCodes.UNEXPECTED_ERROR);return n}}function getScope(e,n){return isEmptyObject(e)?"__i18n"in n?"local":"global":e.useScope?e.useScope:"local"}function getGlobalComposer(e){return e.mode==="composition"?e.global:e.global.__composer}function getComposer(e,n,r=!1){let o=null;const s=n.root;let u=getParentComponentInstance(n,r);for(;u!=null;){const d=e;if(e.mode==="composition")o=d.__getInstance(u);else if(__VUE_I18N_LEGACY_API__){const f=d.__getInstance(u);f!=null&&(o=f.__composer,r&&o&&!o[InejctWithOptionSymbol]&&(o=null))}if(o!=null||s===u)break;u=u.parent}return o}function getParentComponentInstance(e,n=!1){return e==null?null:n&&e.vnode.ctx||e.parent}function setupLifeCycle(e,n,r){onMounted(()=>{},n),onUnmounted(()=>{const o=r;e.__deleteInstance(n);const s=o[DisposeSymbol];s&&(s(),delete o[DisposeSymbol])},n)}function useI18nForLegacy(e,n,r,o={}){const s=n==="local",u=shallowRef(null);if(s&&e.proxy&&!(e.proxy.$options.i18n||e.proxy.$options.__i18n))throw createI18nError(I18nErrorCodes.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const d=isBoolean(o.inheritLocale)?o.inheritLocale:!isString$3(o.locale),f=ref(!s||d?r.locale.value:isString$3(o.locale)?o.locale:DEFAULT_LOCALE),v=ref(!s||d?r.fallbackLocale.value:isString$3(o.fallbackLocale)||isArray$3(o.fallbackLocale)||isPlainObject$3(o.fallbackLocale)||o.fallbackLocale===!1?o.fallbackLocale:f.value),m=ref(getLocaleMessages(f.value,o)),_=ref(isPlainObject$3(o.datetimeFormats)?o.datetimeFormats:{[f.value]:{}}),g=ref(isPlainObject$3(o.numberFormats)?o.numberFormats:{[f.value]:{}}),y=s?r.missingWarn:isBoolean(o.missingWarn)||isRegExp(o.missingWarn)?o.missingWarn:!0,w=s?r.fallbackWarn:isBoolean(o.fallbackWarn)||isRegExp(o.fallbackWarn)?o.fallbackWarn:!0,x=s?r.fallbackRoot:isBoolean(o.fallbackRoot)?o.fallbackRoot:!0,k=!!o.fallbackFormat,S=isFunction$2(o.missing)?o.missing:null,E=isFunction$2(o.postTranslation)?o.postTranslation:null,T=s?r.warnHtmlMessage:isBoolean(o.warnHtmlMessage)?o.warnHtmlMessage:!0,M=!!o.escapeParameter,I=s?r.modifiers:isPlainObject$3(o.modifiers)?o.modifiers:{},F=o.pluralRules||s&&r.pluralRules;function O(){return[f.value,v.value,m.value,_.value,g.value]}const N=computed({get:()=>u.value?u.value.locale.value:f.value,set:re=>{u.value&&(u.value.locale.value=re),f.value=re}}),D=computed({get:()=>u.value?u.value.fallbackLocale.value:v.value,set:re=>{u.value&&(u.value.fallbackLocale.value=re),v.value=re}}),X=computed(()=>u.value?u.value.messages.value:m.value),U=computed(()=>_.value),Z=computed(()=>g.value);function j(){return u.value?u.value.getPostTranslationHandler():E}function Q(re){u.value&&u.value.setPostTranslationHandler(re)}function ve(){return u.value?u.value.getMissingHandler():S}function Se(re){u.value&&u.value.setMissingHandler(re)}function we(re){return O(),re()}function oe(...re){return u.value?we(()=>Reflect.apply(u.value.t,null,[...re])):we(()=>"")}function ne(...re){return u.value?Reflect.apply(u.value.rt,null,[...re]):""}function q(...re){return u.value?we(()=>Reflect.apply(u.value.d,null,[...re])):we(()=>"")}function H(...re){return u.value?we(()=>Reflect.apply(u.value.n,null,[...re])):we(()=>"")}function Y(re){return u.value?u.value.tm(re):{}}function le(re,_e){return u.value?u.value.te(re,_e):!1}function Ce(re){return u.value?u.value.getLocaleMessage(re):{}}function Te(re,_e){u.value&&(u.value.setLocaleMessage(re,_e),m.value[re]=_e)}function ke(re,_e){u.value&&u.value.mergeLocaleMessage(re,_e)}function Ee(re){return u.value?u.value.getDateTimeFormat(re):{}}function Pe(re,_e){u.value&&(u.value.setDateTimeFormat(re,_e),_.value[re]=_e)}function Be(re,_e){u.value&&u.value.mergeDateTimeFormat(re,_e)}function $e(re){return u.value?u.value.getNumberFormat(re):{}}function Oe(re,_e){u.value&&(u.value.setNumberFormat(re,_e),g.value[re]=_e)}function Ne(re,_e){u.value&&u.value.mergeNumberFormat(re,_e)}const J={get id(){return u.value?u.value.id:-1},locale:N,fallbackLocale:D,messages:X,datetimeFormats:U,numberFormats:Z,get inheritLocale(){return u.value?u.value.inheritLocale:d},set inheritLocale(re){u.value&&(u.value.inheritLocale=re)},get availableLocales(){return u.value?u.value.availableLocales:Object.keys(m.value)},get modifiers(){return u.value?u.value.modifiers:I},get pluralRules(){return u.value?u.value.pluralRules:F},get isGlobal(){return u.value?u.value.isGlobal:!1},get missingWarn(){return u.value?u.value.missingWarn:y},set missingWarn(re){u.value&&(u.value.missingWarn=re)},get fallbackWarn(){return u.value?u.value.fallbackWarn:w},set fallbackWarn(re){u.value&&(u.value.missingWarn=re)},get fallbackRoot(){return u.value?u.value.fallbackRoot:x},set fallbackRoot(re){u.value&&(u.value.fallbackRoot=re)},get fallbackFormat(){return u.value?u.value.fallbackFormat:k},set fallbackFormat(re){u.value&&(u.value.fallbackFormat=re)},get warnHtmlMessage(){return u.value?u.value.warnHtmlMessage:T},set warnHtmlMessage(re){u.value&&(u.value.warnHtmlMessage=re)},get escapeParameter(){return u.value?u.value.escapeParameter:M},set escapeParameter(re){u.value&&(u.value.escapeParameter=re)},t:oe,getPostTranslationHandler:j,setPostTranslationHandler:Q,getMissingHandler:ve,setMissingHandler:Se,rt:ne,d:q,n:H,tm:Y,te:le,getLocaleMessage:Ce,setLocaleMessage:Te,mergeLocaleMessage:ke,getDateTimeFormat:Ee,setDateTimeFormat:Pe,mergeDateTimeFormat:Be,getNumberFormat:$e,setNumberFormat:Oe,mergeNumberFormat:Ne};function fe(re){re.locale.value=f.value,re.fallbackLocale.value=v.value,Object.keys(m.value).forEach(_e=>{re.mergeLocaleMessage(_e,m.value[_e])}),Object.keys(_.value).forEach(_e=>{re.mergeDateTimeFormat(_e,_.value[_e])}),Object.keys(g.value).forEach(_e=>{re.mergeNumberFormat(_e,g.value[_e])}),re.escapeParameter=M,re.fallbackFormat=k,re.fallbackRoot=x,re.fallbackWarn=w,re.missingWarn=y,re.warnHtmlMessage=T}return onBeforeMount(()=>{if(e.proxy==null||e.proxy.$i18n==null)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const re=u.value=e.proxy.$i18n.__composer;n==="global"?(f.value=re.locale.value,v.value=re.fallbackLocale.value,m.value=re.messages.value,_.value=re.datetimeFormats.value,g.value=re.numberFormats.value):s&&fe(re)}),J}const globalExportProps=["locale","fallbackLocale","availableLocales"],globalExportMethods=["t","rt","d","n","tm","te"];function injectGlobalFields(e,n){const r=Object.create(null);return globalExportProps.forEach(s=>{const u=Object.getOwnPropertyDescriptor(n,s);if(!u)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const d=isRef(u.value)?{get(){return u.value.value},set(f){u.value.value=f}}:{get(){return u.get&&u.get()}};Object.defineProperty(r,s,d)}),e.config.globalProperties.$i18n=r,globalExportMethods.forEach(s=>{const u=Object.getOwnPropertyDescriptor(n,s);if(!u||!u.value)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${s}`,u)}),()=>{delete e.config.globalProperties.$i18n,globalExportMethods.forEach(s=>{delete e.config.globalProperties[`$${s}`]})}}initFeatureFlags();__INTLIFY_JIT_COMPILATION__?registerMessageCompiler(compile):registerMessageCompiler(compileToFunction);registerMessageResolver(resolveValue);registerLocaleFallbacker(fallbackWithLocaleChain);if(__INTLIFY_PROD_DEVTOOLS__){const e=getGlobalThis();e.__INTLIFY__=!0,setDevToolsHook(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const header$1={leftPanel:"Left Panel",fullScreen:"Full Screen",pan:"Pan",zoomIn:"Zoom In",zoomOut:"Zoom Out",light:"Light",dark:"Dark",viewer:"Viewer",annotations:"Annotations",forms:"Forms",signatures:"Signatures",security:"Security",compare:"Compare Documents",editor:"Content Editor",document:"Document Editor",note:"Note",highlight:"Highlight",underline:"Underline",strikeout:"Strikeout",squiggly:"Squiggly",ink:"Ink",circle:"Circle",square:"Square",arrow:"Arrow",line:"Line",freetext:"Free Text",stamp:"Stamp",image:"Image",link:"Link",textField:"Text Field",checkbox:"Check Box",radioButton:"Radio Button",listBox:"List Box",comboButton:"Combo Button",button:"Push Button",setPassword:"Set Password",removePassword:"Remove Password",openFile:"Open File",search:"Search",rightPanel:"Right Panel",viewSetting:"View Setting",download:"Download",flatten:"Save as Flattened PDF",print:"Print",language:"Language",addText:"Add Text",addImage:"Add Image",undo:"Undo",redo:"Redo"},nextPage$2="Next",previousPage$2="Previous",loading$1="Loading",upload$1="Upload",leftPanel$1={thumbnails:"Thumbnails",outlines:"Outlines",noOutlines:"No Outlines",layers:"Layers",noLayers:"No Layers",annotations:"Annotations",noAnnotations:"No Annotations",importAnnotations:"Import Annotations",exportAnnotations:"Export Annotations",search:"Search",searchPdf:"Search PDF",page:"Page",previousPhrase:"Find the previous occurrence of the phrase",nextPhrase:"Find the next occurrence of the phrase",results:"Results",noResults:"No results"},pageModePanel$1={displayMode:"Display Mode",singlePage:"Single Page",twoPages:"Two Pages",coverMode:"Cover Mode",splitView:"Scroll",vertical:"Vertical Scrolling",horizontal:"Horizontal Scrolling",themes:"Themes"},stampPanel$1={standard:"Standard",dynamic:"Dynamic"},linkPanel$1={linkTo:"Link to",url:"URL",goToPages:"Go To Pages",email:"Email",go:"Go"},rightPanel$1={general:"General",name:"Name",formField:"Form Field",visible:"Visible",hidden:"Hidden",differentNameError:"Please choose a different name.",buttonText:"Button Text",appearance:"Appearance",backgroundColor:"Background Color",preferences:"Preferences",alignment:"Alignment",left:"Left",center:"Center",right:"Right",defaultValue:"Default Value",multiLine:"Multi-line",buttonStyle:"Button Style",check:"Check",circle:"Circle",cross:"Cross",diamond:"Diamond",square:"Square",star:"Star",defaultChecked:"Button is checked by default",item:"Item",itemList:"Item List",option:"Item",selectAction:"Select Action",none:"None",goPage:"Go To Pages",openLink:"Open a Web Link",addUrl:"Add URL",addPage:"Add Page",radioBtnTip1:"1 button in group. At lease 2 buttons needed.",radioBtnTip2:"To create a set of mutualy exclusive radio buttons (i.e., where only one can be selected at a time), please give the fields the same name.",listBoxTip:"Select an item in the item list to make it the default option."},prevent$1={title:"Not Available in Server-Backed",standalone:"Standalone",description:"Content Editor is only available on Standalone. Change to Standalone to edit PDF content.",description1:"Document Editor is only available on Standalone. Change to Standalone to edit PDF pages."},passwordDialog$1={enterPwd:"Enter the Password to View the Document",enterPwdPlaceholder:"Please Enter the Password",wrongPwd:"Wrong Password",encryptPdf:"Encrypt Your PDF",encrypt:"Encrypt",supportTip:"Support: Numbers, letters, {'@'}, $, !, %, ?, & ",removePwdSuccess:"Password Removed Successfully!",removePwdFailure:"Failed to Remove the Password.",setPwdSuccess:"Set the Password for the File Successfully!",setPwdFailure:"Failed to Set Passwords for this Document.",note:["Note\uFF1A","- All changes will take effect after downloading.","- You can reset your password anytime before downloading."]},ok$1="OK",cancel$1="Cancel",signatures$1={trackpad:"Trackpad",lineWidth:"Line Width",keyboard:"Keyboard",signHere:"Sign Here",image:"Image",selectFile:"Select a File",clear:"Clear",save:"Save and Apply",uploadError:"Please upload images less than 1MB"},color$1="Color",opacity$1="Opacity",font$1="Font",regular$1="Regular",oblique$1="Oblique",bold$1="Bold",boldOblique$1="Bold Oblique",compare$2={startCompare:"Start to Compare",exit:"Exit",oldFile:"Old File",newFile:"New File",dropFile:["Drop a PDF file here","or"],chooseOldFile:"Choose Your Old File",chooseNewFile:"Choose Your New File",comingSoon:"The Comparison Results Are Coming Soon!",contentComparison:"Content Comparison",compareItems:"Compare Items",text:"Text",images:"Images",colorMark:"Color to Mark differences",replacedContent:"Replaced Content",insertedContent:"Inserted Content",deletedContent:"Deleted Content",overlayComparison:"Overlay Comparison",blendMode:"Blend Mode",normal:"Normal",multiply:"Multiply",screen:"Screen",overlay:"Overlay",darken:"Darken",lighten:"Lighten",colorDodge:"ColorDodge",colorBurn:"ColorBurn",hardLight:"HardLight",softLight:"SoftLight",difference:"Difference",exclusion:"Exclusion",hue:"Hue",saturation:"Saturation",colour:"Colour",luminosity:"Luminosity",return:"Return",compare:"Compare",downloadOptions:"Select an Output Option",downloadTwoFiles:"Save and Download Separately",downloadOneFile:"Merge into One File",printSetting:"Print Setting",printOldFile:"Print the comparison result of the old file",printNewFile:"Print the comparison result of the new file",byComPDFKit:"Comparison Results by ComPDFKit"},editorPanel$1={textProp:"Text Properties",fontColor:"Font Color",textStyle:"Text Style",imageProp:"Image Properties",rotate:"Rotate",rotateLeft:"Rotate Left",rotateRight:"Rotate Right",flip:"Flip",flipHorizontal:"Flip horizontal",flipVertical:"Flip vertical",tools:"Tools",replace:"Replace",export:"Export",crop:"Crop",maximum:"Maximum upload image size: 2MB."},documentEditor$1={save:"Save",saveAs:"Save As...",insert:"Insert",delete:"Delete",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",copy:"Copy",extract:"Extract",replace:"Replace",move:"Move",selectAll:"Select All",dialog:{insertPages:"Insert Pages",blankPage:"Blank Page",customPage:"Custom Blank Page",fromPdf:"From PDF",selectFile:"Select a File",pageRange:"Page Range",allPages:"All Pages",oddPage:"Odd Pages Only",evenPage:"Even Pages Only",customRange:"Custom Range",insertTo:"Insert to",firstPage:"First Page",lastPage:"Last Page",page:"Page",pageTip:"e.g. 3, 5-10",before:"Before",after:"After"},deleteConfirmText:"Do you want to delete page",eachPage:"Each page in a separate file",deleteAfter:"Delete page after extraction",moveTo:"Move after page:",inputPageTip:"Input 0 to maximum page number"},en={header:header$1,nextPage:nextPage$2,previousPage:previousPage$2,loading:loading$1,upload:upload$1,leftPanel:leftPanel$1,pageModePanel:pageModePanel$1,stampPanel:stampPanel$1,linkPanel:linkPanel$1,rightPanel:rightPanel$1,prevent:prevent$1,passwordDialog:passwordDialog$1,ok:ok$1,cancel:cancel$1,signatures:signatures$1,color:color$1,opacity:opacity$1,font:font$1,regular:regular$1,oblique:oblique$1,bold:bold$1,boldOblique:boldOblique$1,compare:compare$2,editorPanel:editorPanel$1,documentEditor:documentEditor$1},header={leftPanel:"\u5DE6\u4FA7\u9762\u677F",fullScreen:"\u5168\u5C4F",pan:"\u6EDA\u52A8\u5DE5\u5177",zoomIn:"\u653E\u5927",zoomOut:"\u7F29\u5C0F",light:"\u65E5\u95F4",dark:"\u591C\u95F4",viewer:"\u67E5\u770B",annotations:"\u6CE8\u91CA",forms:"\u8868\u5355",signatures:"\u7B7E\u540D",security:"\u5B89\u5168",compare:"\u6587\u6863\u5BF9\u6BD4",editor:"\u5185\u5BB9\u7F16\u8F91\u5668",document:"\u9875\u9762\u7F16\u8F91",note:"\u4FBF\u7B7E",highlight:"\u9AD8\u4EAE",underline:"\u4E0B\u5212\u7EBF",strikeout:"\u5220\u9664\u7EBF",squiggly:"\u6CE2\u6D6A\u7EBF",ink:"\u624B\u7ED8",circle:"\u5706",square:"\u77E9\u5F62",arrow:"\u7BAD\u5934",line:"\u7EBF",freetext:"\u6587\u672C",stamp:"\u56FE\u7AE0",image:"\u56FE\u7247",link:"\u94FE\u63A5",textField:"\u6587\u672C\u57DF",checkbox:"\u590D\u9009\u6846",radioButton:"\u5355\u9009\u6309\u94AE",listBox:"\u5217\u8868\u6846",comboButton:"\u4E0B\u62C9\u83DC\u5355",button:"\u6309\u94AE",setPassword:"\u8BBE\u7F6E\u5BC6\u7801",removePassword:"\u79FB\u9664\u5BC6\u7801",openFile:"\u4E0A\u4F20\u6587\u6863",search:"\u641C\u7D22",rightPanel:"\u53F3\u4FA7\u9762\u677F",viewSetting:"\u9875\u9762\u663E\u793A",download:"\u4E0B\u8F7D",flatten:"\u5C55\u5E73\u540E\u4E0B\u8F7D",print:"\u6253\u5370",language:"\u8BED\u8A00",addText:"\u6DFB\u52A0\u6587\u5B57",addImage:"\u6DFB\u52A0\u56FE\u7247",undo:"\u64A4\u9500",redo:"\u91CD\u505A"},nextPage$1="\u4E0B\u4E00\u9875",previousPage$1="\u4E0A\u4E00\u9875",loading="\u52A0\u8F7D\u4E2D",upload="\u4E0A\u4F20",leftPanel={thumbnails:"\u7F29\u7565\u56FE",outlines:"\u5927\u7EB2",noOutlines:"\u65E0\u5927\u7EB2",layers:"\u56FE\u5C42",noLayers:"\u65E0\u56FE\u5C42",annotations:"\u6CE8\u91CA",noAnnotations:"\u6CA1\u6709\u6CE8\u91CA",importAnnotations:"\u5BFC\u5165\u6CE8\u91CA",exportAnnotations:"\u5BFC\u51FA\u6CE8\u91CA",search:"\u641C\u7D22",searchPdf:"\u641C\u7D22PDF",page:"\u9875\u7801",previousPhrase:"\u67E5\u770B\u4E0A\u4E00\u4E2A\u7ED3\u679C",nextPhrase:"\u67E5\u770B\u4E0B\u4E00\u4E2A\u7ED3\u679C",results:"\u7ED3\u679C",noResults:"\u65E0\u641C\u7D22\u7ED3\u679C"},pageModePanel={displayMode:"\u9605\u8BFB\u6A21\u5F0F",vertical:"\u5782\u76F4\u6EDA\u52A8",horizontal:"\u6C34\u5E73\u6EDA\u52A8",splitView:"\u5206\u5C4F\u89C6\u56FE",singlePage:"\u5355\u9875",twoPages:"\u53CC\u9875",coverMode:"\u5C01\u9762\u6A21\u5F0F",themes:"\u4E3B\u9898"},stampPanel={standard:"\u6807\u51C6\u56FE\u7AE0",dynamic:"\u52A8\u6001\u56FE\u7AE0"},linkPanel={linkTo:"\u94FE\u63A5\u5230",url:"\u8D85\u94FE\u63A5",goToPages:"\u8DF3\u8F6C\u5230\u9875\u9762",email:"\u7535\u5B50\u90AE\u7BB1",go:"\u524D\u5F80"},rightPanel={general:"\u901A\u7528",name:"\u540D\u79F0",formField:"\u8868\u683C\u680F\u4F4D",visible:"\u53EF\u89C1",hidden:"\u9690\u85CF",differentNameError:"\u8BE5\u540D\u79F0\u5DF2\u5B58\u5728",buttonText:"\u6309\u94AE\u6587\u5B57",appearance:"\u5916\u89C2",backgroundColor:"\u80CC\u666F\u8272",preferences:"\u9009\u9879",alignment:"\u6587\u672C\u5BF9\u9F50",left:"\u5DE6\u5BF9\u9F50",center:"\u5C45\u4E2D",right:"\u53F3\u5BF9\u9F50",defaultValue:"\u9884\u8BBE\u503C",multiLine:"\u591A\u884C",buttonStyle:"\u6309\u94AE\u6837\u5F0F",check:"\u52FE\u9009",circle:"\u5706\u5F62",cross:"\u5206\u53C9",diamond:"\u83F1\u5F62",square:"\u65B9\u5F62",star:"\u661F\u5F62",defaultChecked:"\u9884\u8BBE\u4E3A\u5DF2\u9009\u53D6",item:"\u9879\u76EE",option:"\u9009\u9879",itemList:"\u9879\u76EE\u6E05\u5355",selectAction:"\u9009\u62E9\u52A8\u4F5C",none:"\u65E0",goPage:"\u8DF3\u8F6C\u5230\u9875\u9762",openLink:"\u6253\u5F00\u7F51\u9875\u94FE\u63A5",addUrl:"\u6DFB\u52A0\u94FE\u63A5",addPage:"\u52A0\u5165\u9875\u9762",radioBtnTip1:"\u8B66\u544A\uFF1A\u7EC4\u4E2D\u53EA\u6709\u4E00\u4E2A\u6309\u94AE\u3002\u81F3\u5C11\u9700\u89812\u4E2A\u6309\u94AE\u3002",radioBtnTip2:"\u63D0\u793A\uFF1A\u8981\u521B\u5EFA\u4E00\u7EC4\u4E92\u65A5\u7684\u5355\u9009\u6309\u94AE\uFF08\u5373\u4E00\u6B21\u53EA\u80FD\u9009\u62E9\u4E00\u4E2A\uFF09\uFF0C\u8BF7\u786E\u4FDD\u5404\u57DF\u540D\u76F8\u540C\u3002",listBoxTip:"\u4ECE\u9879\u76EE\u6E05\u5355\u4E2D\u9009\u62E9\u4E00\u4E2A\u9009\u9879\uFF0C\u4F5C\u4E3A\u9ED8\u8BA4\u9009\u9879\u3002"},prevent={title:"\u4E0D\u53EF\u7528",standalone:"\u79BB\u7EBF\u7248",description:"\u5728\u7EBF\u7248\u4E0D\u652F\u6301\u5185\u5BB9\u7F16\u8F91\uFF0C\u8BF7\u5207\u6362\u5230\u79BB\u7EBF\u7248\uFF08Standalone\uFF09\u6A21\u5F0F\u4F7F\u7528\u5185\u5BB9\u7F16\u8F91\u3002",description1:"\u5728\u7EBF\u7248\u4E0D\u652F\u6301\u6587\u6863\u7F16\u8F91\uFF0C\u8BF7\u5207\u6362\u5230\u79BB\u7EBF\u7248\uFF08Standalone\uFF09\u6A21\u5F0F\u4F7F\u7528\u6587\u6863\u7F16\u8F91\u3002"},passwordDialog={enterPwd:"\u8F93\u5165\u5BC6\u7801\u67E5\u770B\u6587\u6863",enterPwdPlaceholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",wrongPwd:"\u5BC6\u7801\u9519\u8BEF",encryptPdf:"\u52A0\u5BC6",encrypt:"\u52A0\u5BC6",supportTip:"\u652F\u6301\u5B57\u7B26\uFF1A\u6570\u5B57\u3001\u5B57\u6BCD\u3001{'@'}\u3001$\u3001!\u3001%\u3001?\u3001& ",removePwdSuccess:"\u5BC6\u7801\u5DF2\u79FB\u9664\uFF01",removePwdFailure:"\u5BC6\u7801\u79FB\u9664\u5931\u8D25\uFF01",setPwdSuccess:"\u5BC6\u7801\u8BBE\u7F6E\u6210\u529F\uFF01",setPwdFailure:"\u5BC6\u7801\u8BBE\u7F6E\u5931\u8D25\uFF01",note:["\u6CE8\u610F\uFF1A","- \u6240\u6709\u66F4\u6539\u5C06\u5728\u4E0B\u8F7D\u540E\u751F\u6548\u3002","- \u5728\u4E0B\u8F7D\u6587\u6863\u524D\uFF0C\u60A8\u53EF\u4EE5\u968F\u65F6\u91CD\u7F6E\u5BC6\u7801\u3002"]},ok="\u786E\u5B9A",cancel="\u53D6\u6D88",signatures={trackpad:"\u89E6\u6478\u677F",lineWidth:"\u5BBD\u5EA6",keyboard:"\u952E\u76D8",signHere:"\u8BF7\u5728\u6B64\u5904\u8F93\u5165\u7B7E\u540D",image:"\u56FE\u7247",selectFile:"\u9009\u62E9\u6587\u4EF6",clear:"\u6E05\u9664",save:"\u4FDD\u5B58",uploadError:"\u8BF7\u4E0A\u4F201M\u4EE5\u5185\u7684\u56FE\u7247"},color="\u989C\u8272",opacity="\u4E0D\u900F\u660E\u5EA6",font="\u5B57\u4F53",regular="\u5E38\u89C4",oblique="\u659C\u4F53",bold="\u7C97\u4F53",boldOblique="\u7C97\u659C\u4F53",compare$1={startCompare:"\u5F00\u59CB\u5BF9\u6BD4",exit:"\u9000\u51FA\u5BF9\u6BD4",oldFile:"\u65E7\u6587\u4EF6",newFile:"\u65B0\u6587\u4EF6",dropFile:["\u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u5904\uFF0C","\u6216"],chooseOldFile:"\u6DFB\u52A0\u65E7\u6587\u4EF6",chooseNewFile:"\u6DFB\u52A0\u65B0\u6587\u4EF6",comingSoon:"\u5BF9\u6BD4\u5373\u5C06\u5B8C\u6210\uFF01",contentComparison:"\u5E76\u6392\u5BF9\u6BD4",compareItems:"\u5BF9\u6BD4\u5185\u5BB9\u9009\u62E9",text:"\u6587\u5B57",images:"\u56FE\u7247",colorMark:"\u6807\u8BB0\u989C\u8272",replacedContent:"\u88AB\u66FF\u6362\u7684\u5185\u5BB9",insertedContent:"\u88AB\u63D2\u5165\u7684\u5185\u5BB9",deletedContent:"\u5DF2\u5220\u9664\u7684\u5185\u5BB9",overlayComparison:"\u53E0\u52A0\u5BF9\u6BD4",blendMode:"\u6DF7\u5408\u6A21\u5F0F",normal:"\u666E\u901A",multiply:"\u6B63\u7247\u53E0\u5E95",screen:"\u6EE4\u8272",overlay:"\u53E0\u52A0",darken:"\u53D8\u6697",lighten:"\u53D8\u4EAE",colorDodge:"\u989C\u8272\u51CF\u6DE1",colorBurn:"\u989C\u8272\u52A0\u6DF1",hardLight:"\u5F3A\u5149",softLight:"\u67D4\u5149",difference:"\u5DEE\u503C",exclusion:"\u6392\u9664",hue:"\u8272\u76F8",saturation:"\u9971\u548C\u5EA6",colour:"\u989C\u8272",luminosity:"\u660E\u5EA6",return:"\u8FD4\u56DE",compare:"\u5F00\u59CB\u5BF9\u6BD4",downloadOptions:"\u7ED3\u679C\u6587\u4EF6\u6837\u5F0F",downloadTwoFiles:"\u5BF9\u6BD4\u7ED3\u679C\u5206\u5F00\u4FDD\u5B58\uFF0C\u7ED3\u679C\u6587\u4EF6\u4E3A2\u4EFD",downloadOneFile:"\u5408\u5E76\u5BF9\u6BD4\u7ED3\u679C\uFF0C\u7ED3\u679C\u6587\u4EF6\u4E3A1\u4EFD\u6587\u4EF6",printSetting:"\u6253\u5370\u6587\u4EF6\u9009\u62E9",printOldFile:"\u6253\u5370\u65E7\u6587\u6863\u7684\u5BF9\u6BD4\u7ED3\u679C\u6587\u4EF6",printNewFile:"\u6253\u5370\u65B0\u6587\u6863\u7684\u5BF9\u6BD4\u7ED3\u679C\u6587\u4EF6",byComPDFKit:"\u7531ComPDFKit\u63D0\u4F9B\u5BF9\u6BD4"},editorPanel={textProp:"\u6587\u5B57\u5C5E\u6027",fontColor:"\u6587\u5B57\u989C\u8272",textStyle:"\u6587\u5B57\u6837\u5F0F",imageProp:"\u56FE\u7247\u5C5E\u6027",rotate:"\u65CB\u8F6C",rotateLeft:"\u5DE6\u65CB\u8F6C",rotateRight:"\u53F3\u65CB\u8F6C",flip:"\u7FFB\u8F6C",flipHorizontal:"\u6C34\u5E73\u7FFB\u8F6C",flipVertical:"\u5782\u76F4\u7FFB\u8F6C",tools:"\u5DE5\u5177",replace:"\u66FF\u6362",export:"\u5BFC\u51FA",crop:"\u88C1\u526A",maximum:"\u56FE\u7247\u5927\u5C0F\u4E0A\u9650\uFF1A2MB\u3002"},documentEditor={save:"\u4FDD\u5B58",saveAs:"\u53E6\u5B58\u4E3A",insert:"\u63D2\u5165",delete:"\u5220\u9664",rotateRight:"\u53F3\u65CB\u8F6C",rotateLeft:"\u5DE6\u65CB\u8F6C",copy:"\u590D\u5236",extract:"\u63D0\u53D6",replace:"\u66FF\u6362",move:"\u79FB\u52A8",selectAll:"\u5168\u9009",dialog:{insertPages:"\u9875\u9762\u8303\u56F4",blankPage:"\u7A7A\u767D\u9875",customPage:"\u81EA\u5B9A\u4E49\u7A7A\u767D\u9875",fromPdf:"\u4ECE\u5176\u4ED6PDF",selectFile:"\u9009\u62E9\u6587\u4EF6",pageRange:"\u9875\u9762\u8303\u56F4",allPages:"\u6240\u6709\u9875\u9762",oddPage:"\u5947\u6570\u9875",evenPage:"\u5076\u6570\u9875",customRange:"\u81EA\u5B9A\u4E49\u8303\u56F4",insertTo:"\u9875\u9762\u63D2\u5165\u4F4D\u7F6E",firstPage:"\u9996\u9875",lastPage:"\u672B\u9875",page:"\u9875\u9762",pageTip:"\u4F8B\uFF1A3, 5-10",before:"\u524D",after:"\u540E"},deleteConfirmText:"\u786E\u8BA4\u8981\u5220\u9664\u6240\u9009\u9875\u9762\u5417\uFF1F",eachPage:"\u6BCF\u9875\u4F5C\u4E3A\u5355\u4E2A\u6587\u4EF6",deleteAfter:"\u63D0\u53D6\u540E\u5220\u9664\u9875\u9762",moveTo:"\u79FB\u52A8\u5230",inputPageTip:"\u8F93\u51650~\u6587\u6863\u6700\u5927\u9875\u7801\u6570"},zhCN={header,nextPage:nextPage$1,previousPage:previousPage$1,loading,upload,leftPanel,pageModePanel,stampPanel,linkPanel,rightPanel,prevent,passwordDialog,ok,cancel,signatures,color,opacity,font,regular,oblique,bold,boldOblique,compare:compare$1,editorPanel,documentEditor};let language=window.localStorage.getItem("currentLanguage")||"en";language!=="zh-CN"&&language!=="en"&&(language="en");const i18n=createI18n({legacy:!1,locale:language,fallbackLocale:"en",messages:{en,"zh-CN":zhCN}});let onceCbs=[];const paramsMap=new WeakMap;function flushOnceCallbacks(){onceCbs.forEach(e=>e(...paramsMap.get(e))),onceCbs=[]}function beforeNextFrameOnce(e,...n){paramsMap.set(e,n),!onceCbs.includes(e)&&onceCbs.push(e)===1&&requestAnimationFrame(flushOnceCallbacks)}function happensIn(e,n){let{target:r}=e;for(;r;){if(r.dataset&&r.dataset[n]!==void 0)return!0;r=r.parentElement}return!1}function getPreciseEventTarget(e){return e.composedPath()[0]||null}function depx(e){return typeof e=="string"?e.endsWith("px")?Number(e.slice(0,e.length-2)):Number(e):e}function pxfy(e){if(e!=null)return typeof e=="number"?`${e}px`:e.endsWith("px")?e:`${e}px`}function getMargin(e,n){const r=e.trim().split(/\s+/g),o={top:r[0]};switch(r.length){case 1:o.right=r[0],o.bottom=r[0],o.left=r[0];break;case 2:o.right=r[1],o.left=r[1],o.bottom=r[0];break;case 3:o.right=r[1],o.bottom=r[2],o.left=r[1];break;case 4:o.right=r[1],o.bottom=r[2],o.left=r[3];break;default:throw new Error("[seemly/getMargin]:"+e+" is not a valid value.")}return n===void 0?o:o[n]}const colors={black:"#000",silver:"#C0C0C0",gray:"#808080",white:"#FFF",maroon:"#800000",red:"#F00",purple:"#800080",fuchsia:"#F0F",green:"#008000",lime:"#0F0",olive:"#808000",yellow:"#FF0",navy:"#000080",blue:"#00F",teal:"#008080",aqua:"#0FF",transparent:"#0000"},prefix$1="^\\s*",suffix="\\s*$",float="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",hex="([0-9A-Fa-f])",dhex="([0-9A-Fa-f]{2})",rgbRegex=new RegExp(`${prefix$1}rgb\\s*\\(${float},${float},${float}\\)${suffix}`),rgbaRegex=new RegExp(`${prefix$1}rgba\\s*\\(${float},${float},${float},${float}\\)${suffix}`),sHexRegex=new RegExp(`${prefix$1}#${hex}${hex}${hex}${suffix}`),hexRegex=new RegExp(`${prefix$1}#${dhex}${dhex}${dhex}${suffix}`),sHexaRegex=new RegExp(`${prefix$1}#${hex}${hex}${hex}${hex}${suffix}`),hexaRegex=new RegExp(`${prefix$1}#${dhex}${dhex}${dhex}${dhex}${suffix}`);function parseHex(e){return parseInt(e,16)}function rgba(e){try{let n;if(n=hexRegex.exec(e))return[parseHex(n[1]),parseHex(n[2]),parseHex(n[3]),1];if(n=rgbRegex.exec(e))return[roundChannel(n[1]),roundChannel(n[5]),roundChannel(n[9]),1];if(n=rgbaRegex.exec(e))return[roundChannel(n[1]),roundChannel(n[5]),roundChannel(n[9]),roundAlpha(n[13])];if(n=sHexRegex.exec(e))return[parseHex(n[1]+n[1]),parseHex(n[2]+n[2]),parseHex(n[3]+n[3]),1];if(n=hexaRegex.exec(e))return[parseHex(n[1]),parseHex(n[2]),parseHex(n[3]),roundAlpha(parseHex(n[4])/255)];if(n=sHexaRegex.exec(e))return[parseHex(n[1]+n[1]),parseHex(n[2]+n[2]),parseHex(n[3]+n[3]),roundAlpha(parseHex(n[4]+n[4])/255)];if(e in colors)return rgba(colors[e]);throw new Error(`[seemly/rgba]: Invalid color value ${e}.`)}catch(n){throw n}}function normalizeAlpha(e){return e>1?1:e<0?0:e}function stringifyRgba(e,n,r,o){return`rgba(${roundChannel(e)}, ${roundChannel(n)}, ${roundChannel(r)}, ${normalizeAlpha(o)})`}function compositeChannel(e,n,r,o,s){return roundChannel((e*n*(1-o)+r*o)/s)}function composite(e,n){Array.isArray(e)||(e=rgba(e)),Array.isArray(n)||(n=rgba(n));const r=e[3],o=n[3],s=roundAlpha(r+o-r*o);return stringifyRgba(compositeChannel(e[0],r,n[0],o,s),compositeChannel(e[1],r,n[1],o,s),compositeChannel(e[2],r,n[2],o,s),s)}function changeColor(e,n){const[r,o,s,u=1]=Array.isArray(e)?e:rgba(e);return n.alpha?stringifyRgba(r,o,s,n.alpha):stringifyRgba(r,o,s,u)}function scaleColor(e,n){const[r,o,s,u=1]=Array.isArray(e)?e:rgba(e),{lightness:d=1,alpha:f=1}=n;return toRgbaString([r*d,o*d,s*d,u*f])}function roundAlpha(e){const n=Math.round(Number(e)*100)/100;return n>1?1:n<0?0:n}function roundChannel(e){const n=Math.round(Number(e));return n>255?255:n<0?0:n}function toRgbaString(e){const[n,r,o]=e;return 3 in e?`rgba(${roundChannel(n)}, ${roundChannel(r)}, ${roundChannel(o)}, ${roundAlpha(e[3])})`:`rgba(${roundChannel(n)}, ${roundChannel(r)}, ${roundChannel(o)}, 1)`}function createId(e=8){return Math.random().toString(16).slice(2,2+e)}function keep(e,n=[],r){const o={};return n.forEach(s=>{o[s]=e[s]}),Object.assign(o,r)}function omit(e,n=[],r){const o={};return Object.getOwnPropertyNames(e).forEach(u=>{n.includes(u)||(o[u]=e[u])}),Object.assign(o,r)}function flatten$2(e,n=!0,r=[]){return e.forEach(o=>{if(o!==null){if(typeof o!="object"){(typeof o=="string"||typeof o=="number")&&r.push(createTextVNode(String(o)));return}if(Array.isArray(o)){flatten$2(o,n,r);return}if(o.type===Fragment){if(o.children===null)return;Array.isArray(o.children)&&flatten$2(o.children,n,r)}else o.type!==Comment&&r.push(o)}}),r}function call(e,...n){if(Array.isArray(e))e.forEach(r=>call(r,...n));else return e(...n)}function keysOf(e){return Object.keys(e)}const render$1=(e,...n)=>typeof e=="function"?e(...n):typeof e=="string"?createTextVNode(e):typeof e=="number"?createTextVNode(String(e)):null;function warn$2(e,n){console.error(`[naive/${e}]: ${n}`)}function throwError(e,n){throw new Error(`[naive/${e}]: ${n}`)}function getTitleAttribute(e){switch(typeof e){case"string":return e||void 0;case"number":return String(e);default:return}}function getFirstSlotVNode(e,n="default",r=void 0){const o=e[n];if(!o)return warn$2("getFirstSlotVNode",`slot[${n}] is empty`),null;const s=flatten$2(o(r));return s.length===1?s[0]:(warn$2("getFirstSlotVNode",`slot[${n}] should have exactly one child`),null)}function createRefSetter(e){return n=>{n?e.value=n.$el:e.value=null}}function createInjectionKey(e){return e}function ensureValidVNode(e){return e.some(n=>isVNode$1(n)?!(n.type===Comment||n.type===Fragment&&!ensureValidVNode(n.children)):!0)?e:null}function resolveSlot(e,n){return e&&ensureValidVNode(e())||n()}function resolveWrappedSlot(e,n){const r=e&&ensureValidVNode(e());return n(r||null)}function isSlotEmpty(e){return!(e&&ensureValidVNode(e()))}function mergeEventHandlers(e){const n=e.filter(r=>r!==void 0);if(n.length!==0)return n.length===1?n[0]:r=>{e.forEach(o=>{o&&o(r)})}}const Wrapper=defineComponent({render(){var e,n;return(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e)}}),pureNumberRegex=/^(\d|\.)+$/,numberRegex=/(\d|\.)+/;function formatLength(e,{c:n=1,offset:r=0,attachPx:o=!0}={}){if(typeof e=="number"){const s=(e+r)*n;return s===0?"0":`${s}px`}else if(typeof e=="string")if(pureNumberRegex.test(e)){const s=(Number(e)+r)*n;return o?s===0?"0":`${s}px`:`${s}`}else{const s=numberRegex.exec(e);return s?e.replace(numberRegex,String((Number(s[0])+r)*n)):e}return e}function color2Class(e){return e.replace(/#|\(|\)|,|\s/g,"_")}function ampCount(e){let n=0;for(let r=0;r<e.length;++r)e[r]==="&"&&++n;return n}const separatorRegex=/\s*,(?![^(]*\))\s*/g,extraSpaceRegex=/\s+/g;function resolveSelectorWithAmp(e,n){const r=[];return n.split(separatorRegex).forEach(o=>{let s=ampCount(o);if(s){if(s===1){e.forEach(d=>{r.push(o.replace("&",d))});return}}else{e.forEach(d=>{r.push((d&&d+" ")+o)});return}let u=[o];for(;s--;){const d=[];u.forEach(f=>{e.forEach(v=>{d.push(f.replace("&",v))})}),u=d}u.forEach(d=>r.push(d))}),r}function resolveSelector(e,n){const r=[];return n.split(separatorRegex).forEach(o=>{e.forEach(s=>{r.push((s&&s+" ")+o)})}),r}function parseSelectorPath(e){let n=[""];return e.forEach(r=>{r=r&&r.trim(),r&&(r.includes("&")?n=resolveSelectorWithAmp(n,r):n=resolveSelector(n,r))}),n.join(", ").replace(extraSpaceRegex," ")}function removeElement(e){if(!e)return;const n=e.parentElement;n&&n.removeChild(e)}function queryElement(e){return document.querySelector(`style[cssr-id="${e}"]`)}function createElement$1(e){const n=document.createElement("style");return n.setAttribute("cssr-id",e),n}function isMediaOrSupports(e){return e?/^\s*@(s|m)/.test(e):!1}const kebabRegex=/[A-Z]/g;function kebabCase(e){return e.replace(kebabRegex,n=>"-"+n.toLowerCase())}function unwrapProperty(e,n="  "){return typeof e=="object"&&e!==null?` {
`+Object.entries(e).map(r=>n+`  ${kebabCase(r[0])}: ${r[1]};`).join(`
`)+`
`+n+"}":`: ${e};`}function unwrapProperties(e,n,r){return typeof e=="function"?e({context:n.context,props:r}):e}function createStyle(e,n,r,o){if(!n)return"";const s=unwrapProperties(n,r,o);if(!s)return"";if(typeof s=="string")return`${e} {
${s}
}`;const u=Object.keys(s);if(u.length===0)return r.config.keepEmptyBlock?e+` {
}`:"";const d=e?[e+" {"]:[];return u.forEach(f=>{const v=s[f];if(f==="raw"){d.push(`
`+v+`
`);return}f=kebabCase(f),v!=null&&d.push(`  ${f}${unwrapProperty(v)}`)}),e&&d.push("}"),d.join(`
`)}function loopCNodeListWithCallback(e,n,r){!e||e.forEach(o=>{if(Array.isArray(o))loopCNodeListWithCallback(o,n,r);else if(typeof o=="function"){const s=o(n);Array.isArray(s)?loopCNodeListWithCallback(s,n,r):s&&r(s)}else o&&r(o)})}function traverseCNode(e,n,r,o,s,u){const d=e.$;let f="";if(!d||typeof d=="string")isMediaOrSupports(d)?f=d:n.push(d);else if(typeof d=="function"){const _=d({context:o.context,props:s});isMediaOrSupports(_)?f=_:n.push(_)}else if(d.before&&d.before(o.context),!d.$||typeof d.$=="string")isMediaOrSupports(d.$)?f=d.$:n.push(d.$);else if(d.$){const _=d.$({context:o.context,props:s});isMediaOrSupports(_)?f=_:n.push(_)}const v=parseSelectorPath(n),m=createStyle(v,e.props,o,s);f?(r.push(`${f} {`),u&&m&&u.insertRule(`${f} {
${m}
}
`)):(u&&m&&u.insertRule(m),!u&&m.length&&r.push(m)),e.children&&loopCNodeListWithCallback(e.children,{context:o.context,props:s},_=>{if(typeof _=="string"){const g=createStyle(v,{raw:_},o,s);u?u.insertRule(g):r.push(g)}else traverseCNode(_,n,r,o,s,u)}),n.pop(),f&&r.push("}"),d&&d.after&&d.after(o.context)}function render(e,n,r,o=!1){const s=[];return traverseCNode(e,[],s,n,r,o?e.instance.__styleSheet:void 0),o?"":s.join(`

`)}function murmur2(e){for(var n=0,r,o=0,s=e.length;s>=4;++o,s-=4)r=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,n=(r&65535)*1540483477+((r>>>16)*59797<<16)^(n&65535)*1540483477+((n>>>16)*59797<<16);switch(s){case 3:n^=(e.charCodeAt(o+2)&255)<<16;case 2:n^=(e.charCodeAt(o+1)&255)<<8;case 1:n^=e.charCodeAt(o)&255,n=(n&65535)*1540483477+((n>>>16)*59797<<16)}return n^=n>>>13,n=(n&65535)*1540483477+((n>>>16)*59797<<16),((n^n>>>15)>>>0).toString(36)}typeof window<"u"&&(window.__cssrContext={});function unmount(e,n,r){const{els:o}=n;if(r===void 0)o.forEach(removeElement),n.els=[];else{const s=queryElement(r);s&&o.includes(s)&&(removeElement(s),n.els=o.filter(u=>u!==s))}}function addElementToList(e,n){e.push(n)}function mount(e,n,r,o,s,u,d,f,v){if(u&&!v){if(r===void 0){console.error("[css-render/mount]: `id` is required in `silent` mode.");return}const y=window.__cssrContext;y[r]||(y[r]=!0,render(n,e,o,u));return}let m;if(r===void 0&&(m=n.render(o),r=murmur2(m)),v){v.adapter(r,m!=null?m:n.render(o));return}const _=queryElement(r);if(_!==null&&!d)return _;const g=_!=null?_:createElement$1(r);if(m===void 0&&(m=n.render(o)),g.textContent=m,_!==null)return _;if(f){const y=document.head.querySelector(`meta[name="${f}"]`);if(y)return document.head.insertBefore(g,y),addElementToList(n.els,g),g}return s?document.head.insertBefore(g,document.head.querySelector("style, link")):document.head.appendChild(g),addElementToList(n.els,g),g}function wrappedRender(e){return render(this,this.instance,e)}function wrappedMount(e={}){const{id:n,ssr:r,props:o,head:s=!1,silent:u=!1,force:d=!1,anchorMetaName:f}=e;return mount(this.instance,this,n,o,s,u,d,f,r)}function wrappedUnmount(e={}){const{id:n}=e;unmount(this.instance,this,n)}const createCNode=function(e,n,r,o){return{instance:e,$:n,props:r,children:o,els:[],render:wrappedRender,mount:wrappedMount,unmount:wrappedUnmount}},c$2=function(e,n,r,o){return Array.isArray(n)?createCNode(e,{$:null},null,n):Array.isArray(r)?createCNode(e,n,null,r):Array.isArray(o)?createCNode(e,n,r,o):createCNode(e,n,r,null)};function CssRender(e={}){let n=null;const r={c:(...o)=>c$2(r,...o),use:(o,...s)=>o.install(r,...s),find:queryElement,context:{},config:e,get __styleSheet(){if(!n){const o=document.createElement("style");return document.head.appendChild(o),n=document.styleSheets[document.styleSheets.length-1],n}return n}};return r}function exists(e,n){if(e===void 0)return!1;if(n){const{context:{ids:r}}=n;return r.has(e)}return queryElement(e)!==null}function plugin$1(e){let n=".",r="__",o="--",s;if(e){let x=e.blockPrefix;x&&(n=x),x=e.elementPrefix,x&&(r=x),x=e.modifierPrefix,x&&(o=x)}const u={install(x){s=x.c;const k=x.context;k.bem={},k.bem.b=null,k.bem.els=null}};function d(x){let k,S;return{before(E){k=E.bem.b,S=E.bem.els,E.bem.els=null},after(E){E.bem.b=k,E.bem.els=S},$({context:E,props:T}){return x=typeof x=="string"?x:x({context:E,props:T}),E.bem.b=x,`${(T==null?void 0:T.bPrefix)||n}${E.bem.b}`}}}function f(x){let k;return{before(S){k=S.bem.els},after(S){S.bem.els=k},$({context:S,props:E}){return x=typeof x=="string"?x:x({context:S,props:E}),S.bem.els=x.split(",").map(T=>T.trim()),S.bem.els.map(T=>`${(E==null?void 0:E.bPrefix)||n}${S.bem.b}${r}${T}`).join(", ")}}}function v(x){return{$({context:k,props:S}){x=typeof x=="string"?x:x({context:k,props:S});const E=x.split(",").map(I=>I.trim());function T(I){return E.map(F=>`&${(S==null?void 0:S.bPrefix)||n}${k.bem.b}${I!==void 0?`${r}${I}`:""}${o}${F}`).join(", ")}const M=k.bem.els;return M!==null?T(M[0]):T()}}}function m(x){return{$({context:k,props:S}){x=typeof x=="string"?x:x({context:k,props:S});const E=k.bem.els;return`&:not(${(S==null?void 0:S.bPrefix)||n}${k.bem.b}${E!==null&&E.length>0?`${r}${E[0]}`:""}${o}${x})`}}}return Object.assign(u,{cB:(...x)=>s(d(x[0]),x[1],x[2]),cE:(...x)=>s(f(x[0]),x[1],x[2]),cM:(...x)=>s(v(x[0]),x[1],x[2]),cNotM:(...x)=>s(m(x[0]),x[1],x[2])}),u}function createKey(e,n){return e+(n==="default"?"":n.replace(/^[a-z]/,r=>r.toUpperCase()))}createKey("abc","def");const namespace="n",prefix=`.${namespace}-`,elementPrefix="__",modifierPrefix="--",cssr=CssRender(),plugin=plugin$1({blockPrefix:prefix,elementPrefix,modifierPrefix});cssr.use(plugin);const{c:c$1,find:find$1}=cssr,{cB,cE,cM,cNotM}=plugin;function insideModal(e){return c$1(({props:{bPrefix:n}})=>`${n||prefix}modal, ${n||prefix}drawer`,[e])}function insidePopover(e){return c$1(({props:{bPrefix:n}})=>`${n||prefix}popover`,[e])}function asModal(e){return c$1(({props:{bPrefix:n}})=>`&${n||prefix}modal`,e)}const cCB=(...e)=>c$1(">",[cB(...e)]);let _isJsdom;function isJsdom(){return _isJsdom===void 0&&(_isJsdom=navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),_isJsdom}const isBrowser$2=typeof document<"u"&&typeof window<"u",eventSet=new WeakSet;function markEventEffectPerformed(e){eventSet.add(e)}function eventEffectNotPerformed(e){return!eventSet.has(e)}function useFalseUntilTruthy(e){const n=ref(!!e.value);if(n.value)return readonly(n);const r=watch(e,o=>{o&&(n.value=!0,r())});return readonly(n)}function useMemo(e){const n=computed(e),r=ref(n.value);return watch(n,o=>{r.value=o}),typeof e=="function"?r:{__v_isRef:!0,get value(){return r.value},set value(o){e.set(o)}}}function hasInstance(){return getCurrentInstance()!==null}const isBrowser$1=typeof window<"u";let fontsReady,isFontReady;const init$1=()=>{var e,n;fontsReady=isBrowser$1?(n=(e=document)===null||e===void 0?void 0:e.fonts)===null||n===void 0?void 0:n.ready:void 0,isFontReady=!1,fontsReady!==void 0?fontsReady.then(()=>{isFontReady=!0}):isFontReady=!0};init$1();function onFontsReady(e){if(isFontReady)return;let n=!1;onMounted(()=>{isFontReady||fontsReady==null||fontsReady.then(()=>{n||e()})}),onBeforeUnmount(()=>{n=!0})}function getEventTarget(e){return e.composedPath()[0]}const traps={mousemoveoutside:new WeakMap,clickoutside:new WeakMap};function createTrapHandler(e,n,r){if(e==="mousemoveoutside"){const o=s=>{n.contains(getEventTarget(s))||r(s)};return{mousemove:o,touchstart:o}}else if(e==="clickoutside"){let o=!1;const s=d=>{o=!n.contains(getEventTarget(d))},u=d=>{!o||n.contains(getEventTarget(d))||r(d)};return{mousedown:s,mouseup:u,touchstart:s,touchend:u}}return console.error(`[evtd/create-trap-handler]: name \`${e}\` is invalid. This could be a bug of evtd.`),{}}function ensureTrapHandlers(e,n,r){const o=traps[e];let s=o.get(n);s===void 0&&o.set(n,s=new WeakMap);let u=s.get(r);return u===void 0&&s.set(r,u=createTrapHandler(e,n,r)),u}function trapOn(e,n,r,o){if(e==="mousemoveoutside"||e==="clickoutside"){const s=ensureTrapHandlers(e,n,r);return Object.keys(s).forEach(u=>{on$1(u,document,s[u],o)}),!0}return!1}function trapOff(e,n,r,o){if(e==="mousemoveoutside"||e==="clickoutside"){const s=ensureTrapHandlers(e,n,r);return Object.keys(s).forEach(u=>{off$1(u,document,s[u],o)}),!0}return!1}function createDelegate(){if(typeof window>"u")return{on:()=>{},off:()=>{}};const e=new WeakMap,n=new WeakMap;function r(){e.set(this,!0)}function o(){e.set(this,!0),n.set(this,!0)}function s(N,D,X){const U=N[D];return N[D]=function(){return X.apply(N,arguments),U.apply(N,arguments)},N}function u(N,D){N[D]=Event.prototype[D]}const d=new WeakMap,f=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function v(){var N;return(N=d.get(this))!==null&&N!==void 0?N:null}function m(N,D){f!==void 0&&Object.defineProperty(N,"currentTarget",{configurable:!0,enumerable:!0,get:D!=null?D:f.get})}const _={bubble:{},capture:{}},g={};function y(){const N=function(D){const{type:X,eventPhase:U,bubbles:Z}=D,j=getEventTarget(D);if(U===2)return;const Q=U===1?"capture":"bubble";let ve=j;const Se=[];for(;ve===null&&(ve=window),Se.push(ve),ve!==window;)ve=ve.parentNode||null;const we=_.capture[X],oe=_.bubble[X];if(s(D,"stopPropagation",r),s(D,"stopImmediatePropagation",o),m(D,v),Q==="capture"){if(we===void 0)return;for(let ne=Se.length-1;ne>=0&&!e.has(D);--ne){const q=Se[ne],H=we.get(q);if(H!==void 0){d.set(D,q);for(const Y of H){if(n.has(D))break;Y(D)}}if(ne===0&&!Z&&oe!==void 0){const Y=oe.get(q);if(Y!==void 0)for(const le of Y){if(n.has(D))break;le(D)}}}}else if(Q==="bubble"){if(oe===void 0)return;for(let ne=0;ne<Se.length&&!e.has(D);++ne){const q=Se[ne],H=oe.get(q);if(H!==void 0){d.set(D,q);for(const Y of H){if(n.has(D))break;Y(D)}}}}u(D,"stopPropagation"),u(D,"stopImmediatePropagation"),m(D)};return N.displayName="evtdUnifiedHandler",N}function w(){const N=function(D){const{type:X,eventPhase:U}=D;if(U!==2)return;const Z=g[X];Z!==void 0&&Z.forEach(j=>j(D))};return N.displayName="evtdUnifiedWindowEventHandler",N}const x=y(),k=w();function S(N,D){const X=_[N];return X[D]===void 0&&(X[D]=new Map,window.addEventListener(D,x,N==="capture")),X[D]}function E(N){return g[N]===void 0&&(g[N]=new Set,window.addEventListener(N,k)),g[N]}function T(N,D){let X=N.get(D);return X===void 0&&N.set(D,X=new Set),X}function M(N,D,X,U){const Z=_[D][X];if(Z!==void 0){const j=Z.get(N);if(j!==void 0&&j.has(U))return!0}return!1}function I(N,D){const X=g[N];return!!(X!==void 0&&X.has(D))}function F(N,D,X,U){let Z;if(typeof U=="object"&&U.once===!0?Z=we=>{O(N,D,Z,U),X(we)}:Z=X,trapOn(N,D,Z,U))return;const Q=U===!0||typeof U=="object"&&U.capture===!0?"capture":"bubble",ve=S(Q,N),Se=T(ve,D);if(Se.has(Z)||Se.add(Z),D===window){const we=E(N);we.has(Z)||we.add(Z)}}function O(N,D,X,U){if(trapOff(N,D,X,U))return;const j=U===!0||typeof U=="object"&&U.capture===!0,Q=j?"capture":"bubble",ve=S(Q,N),Se=T(ve,D);if(D===window&&!M(D,j?"bubble":"capture",N,X)&&I(N,X)){const oe=g[N];oe.delete(X),oe.size===0&&(window.removeEventListener(N,k),g[N]=void 0)}Se.has(X)&&Se.delete(X),Se.size===0&&ve.delete(D),ve.size===0&&(window.removeEventListener(N,x,Q==="capture"),_[Q][N]=void 0)}return{on:F,off:O}}const{on:on$1,off:off$1}=createDelegate(),mousePositionRef=ref(null);function clickHandler(e){if(e.clientX>0||e.clientY>0)mousePositionRef.value={x:e.clientX,y:e.clientY};else{const{target:n}=e;if(n instanceof Element){const{left:r,top:o,width:s,height:u}=n.getBoundingClientRect();r>0||o>0?mousePositionRef.value={x:r+s/2,y:o+u/2}:mousePositionRef.value={x:0,y:0}}else mousePositionRef.value=null}}let usedCount$1=0,managable$1=!0;function useClickPosition(){if(!isBrowser$1)return readonly(ref(null));usedCount$1===0&&on$1("click",document,clickHandler,!0);const e=()=>{usedCount$1+=1};return managable$1&&(managable$1=hasInstance())?(onBeforeMount(e),onBeforeUnmount(()=>{usedCount$1-=1,usedCount$1===0&&off$1("click",document,clickHandler,!0)})):e(),readonly(mousePositionRef)}const clickedTimeRef=ref(void 0);let usedCount=0;function handleClick(){clickedTimeRef.value=Date.now()}let managable=!0;function useClicked(e){if(!isBrowser$1)return readonly(ref(!1));const n=ref(!1);let r=null;function o(){r!==null&&window.clearTimeout(r)}function s(){o(),n.value=!0,r=window.setTimeout(()=>{n.value=!1},e)}usedCount===0&&on$1("click",window,handleClick,!0);const u=()=>{usedCount+=1,on$1("click",window,s,!0)};return managable&&(managable=hasInstance())?(onBeforeMount(u),onBeforeUnmount(()=>{usedCount-=1,usedCount===0&&off$1("click",window,handleClick,!0),off$1("click",window,s,!0),o()})):u(),readonly(n)}function useMergedState(e,n){return watch(e,r=>{r!==void 0&&(n.value=r)}),computed(()=>e.value===void 0?n.value:e.value)}function isMounted(){const e=ref(!1);return onMounted(()=>{e.value=!0}),readonly(e)}function useCompitable(e,n){return computed(()=>{for(const r of n)if(e[r]!==void 0)return e[r];return e[n[n.length-1]]})}const isIos=(typeof window>"u"?!1:/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream;function useIsIos(){return isIos}const internalSelectionMenuInjectionKey="n-internal-select-menu",internalSelectionMenuBodyInjectionKey="n-internal-select-menu-body",modalBodyInjectionKey="n-modal-body",modalInjectionKey="n-modal",drawerBodyInjectionKey="n-drawer-body",popoverBodyInjectionKey="n-popover-body",teleportDisabled="__disabled__";function useAdjustedTo(e){const n=inject(modalBodyInjectionKey,null),r=inject(drawerBodyInjectionKey,null),o=inject(popoverBodyInjectionKey,null),s=inject(internalSelectionMenuBodyInjectionKey,null),u=ref();if(typeof document<"u"){u.value=document.fullscreenElement;const d=()=>{u.value=document.fullscreenElement};onMounted(()=>{on$1("fullscreenchange",document,d)}),onBeforeUnmount(()=>{off$1("fullscreenchange",document,d)})}return useMemo(()=>{var d;const{to:f}=e;return f!==void 0?f===!1?teleportDisabled:f===!0?u.value||"body":f:n!=null&&n.value?(d=n.value.$el)!==null&&d!==void 0?d:n.value:r!=null&&r.value?r.value:o!=null&&o.value?o.value:s!=null&&s.value?s.value:f!=null?f:u.value||"body"})}useAdjustedTo.tdkey=teleportDisabled;useAdjustedTo.propTo={type:[String,Object,Boolean],default:void 0};function getSlot(e,n,r="default"){const o=n[r];if(o===void 0)throw new Error(`[vueuc/${e}]: slot[${r}] is empty.`);return o()}function flatten$1(e,n=!0,r=[]){return e.forEach(o=>{if(o!==null){if(typeof o!="object"){(typeof o=="string"||typeof o=="number")&&r.push(createTextVNode(String(o)));return}if(Array.isArray(o)){flatten$1(o,n,r);return}if(o.type===Fragment){if(o.children===null)return;Array.isArray(o.children)&&flatten$1(o.children,n,r)}else o.type!==Comment&&r.push(o)}}),r}function getFirstVNode(e,n,r="default"){const o=n[r];if(o===void 0)throw new Error(`[vueuc/${e}]: slot[${r}] is empty.`);const s=flatten$1(o());if(s.length===1)return s[0];throw new Error(`[vueuc/${e}]: slot[${r}] should have exactly one child.`)}let viewMeasurer=null;function ensureViewBoundingRect(){if(viewMeasurer===null&&(viewMeasurer=document.getElementById("v-binder-view-measurer"),viewMeasurer===null)){viewMeasurer=document.createElement("div"),viewMeasurer.id="v-binder-view-measurer";const{style:e}=viewMeasurer;e.position="fixed",e.left="0",e.right="0",e.top="0",e.bottom="0",e.pointerEvents="none",e.visibility="hidden",document.body.appendChild(viewMeasurer)}return viewMeasurer.getBoundingClientRect()}function getPointRect(e,n){const r=ensureViewBoundingRect();return{top:n,left:e,height:0,width:0,right:r.width-e,bottom:r.height-n}}function getRect$1(e){const n=e.getBoundingClientRect(),r=ensureViewBoundingRect();return{left:n.left-r.left,top:n.top-r.top,bottom:r.height+r.top-n.bottom,right:r.width+r.left-n.right,width:n.width,height:n.height}}function getParentNode(e){return e.nodeType===9?null:e.parentNode}function getScrollParent(e){if(e===null)return null;const n=getParentNode(e);if(n===null)return null;if(n.nodeType===9)return document;if(n.nodeType===1){const{overflow:r,overflowX:o,overflowY:s}=getComputedStyle(n);if(/(auto|scroll|overlay)/.test(r+s+o))return n}return getScrollParent(n)}const Binder=defineComponent({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(e){var n;provide("VBinder",(n=getCurrentInstance())===null||n===void 0?void 0:n.proxy);const r=inject("VBinder",null),o=ref(null),s=E=>{o.value=E,r&&e.syncTargetWithParent&&r.setTargetRef(E)};let u=[];const d=()=>{let E=o.value;for(;E=getScrollParent(E),E!==null;)u.push(E);for(const T of u)on$1("scroll",T,g,!0)},f=()=>{for(const E of u)off$1("scroll",E,g,!0);u=[]},v=new Set,m=E=>{v.size===0&&d(),v.has(E)||v.add(E)},_=E=>{v.has(E)&&v.delete(E),v.size===0&&f()},g=()=>{beforeNextFrameOnce(y)},y=()=>{v.forEach(E=>E())},w=new Set,x=E=>{w.size===0&&on$1("resize",window,S),w.has(E)||w.add(E)},k=E=>{w.has(E)&&w.delete(E),w.size===0&&off$1("resize",window,S)},S=()=>{w.forEach(E=>E())};return onBeforeUnmount(()=>{off$1("resize",window,S),f()}),{targetRef:o,setTargetRef:s,addScrollListener:m,removeScrollListener:_,addResizeListener:x,removeResizeListener:k}},render(){return getSlot("binder",this.$slots)}}),VBinder=Binder,VTarget=defineComponent({name:"Target",setup(){const{setTargetRef:e,syncTarget:n}=inject("VBinder");return{syncTarget:n,setTargetDirective:{mounted:e,updated:e}}},render(){const{syncTarget:e,setTargetDirective:n}=this;return e?withDirectives(getFirstVNode("follower",this.$slots),[[n]]):getFirstVNode("follower",this.$slots)}}),ctxKey$1="@@mmoContext",mousemoveoutside={mounted(e,{value:n}){e[ctxKey$1]={handler:void 0},typeof n=="function"&&(e[ctxKey$1].handler=n,on$1("mousemoveoutside",e,n))},updated(e,{value:n}){const r=e[ctxKey$1];typeof n=="function"?r.handler?r.handler!==n&&(off$1("mousemoveoutside",e,r.handler),r.handler=n,on$1("mousemoveoutside",e,n)):(e[ctxKey$1].handler=n,on$1("mousemoveoutside",e,n)):r.handler&&(off$1("mousemoveoutside",e,r.handler),r.handler=void 0)},unmounted(e){const{handler:n}=e[ctxKey$1];n&&off$1("mousemoveoutside",e,n),e[ctxKey$1].handler=void 0}},mousemoveoutside$1=mousemoveoutside,ctxKey="@@coContext",clickoutside={mounted(e,{value:n,modifiers:r}){e[ctxKey]={handler:void 0},typeof n=="function"&&(e[ctxKey].handler=n,on$1("clickoutside",e,n,{capture:r.capture}))},updated(e,{value:n,modifiers:r}){const o=e[ctxKey];typeof n=="function"?o.handler?o.handler!==n&&(off$1("clickoutside",e,o.handler,{capture:r.capture}),o.handler=n,on$1("clickoutside",e,n,{capture:r.capture})):(e[ctxKey].handler=n,on$1("clickoutside",e,n,{capture:r.capture})):o.handler&&(off$1("clickoutside",e,o.handler,{capture:r.capture}),o.handler=void 0)},unmounted(e,{modifiers:n}){const{handler:r}=e[ctxKey];r&&off$1("clickoutside",e,r,{capture:n.capture}),e[ctxKey].handler=void 0}},clickoutside$1=clickoutside;function warn$1(e,n){console.error(`[vdirs/${e}]: ${n}`)}class ZIndexManager{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(n,r){const{elementZIndex:o}=this;if(r!==void 0){n.style.zIndex=`${r}`,o.delete(n);return}const{nextZIndex:s}=this;o.has(n)&&o.get(n)+1===this.nextZIndex||(n.style.zIndex=`${s}`,o.set(n,s),this.nextZIndex=s+1,this.squashState())}unregister(n,r){const{elementZIndex:o}=this;o.has(n)?o.delete(n):r===void 0&&warn$1("z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:n}=this;n||(this.nextZIndex=2e3),this.nextZIndex-n>2500&&this.rearrange()}rearrange(){const n=Array.from(this.elementZIndex.entries());n.sort((r,o)=>r[1]-o[1]),this.nextZIndex=2e3,n.forEach(r=>{const o=r[0],s=this.nextZIndex++;`${s}`!==o.style.zIndex&&(o.style.zIndex=`${s}`)})}}const zIndexManager=new ZIndexManager,ctx="@@ziContext",zindexable={mounted(e,n){const{value:r={}}=n,{zIndex:o,enabled:s}=r;e[ctx]={enabled:!!s,initialized:!1},s&&(zIndexManager.ensureZIndex(e,o),e[ctx].initialized=!0)},updated(e,n){const{value:r={}}=n,{zIndex:o,enabled:s}=r,u=e[ctx].enabled;s&&!u&&(zIndexManager.ensureZIndex(e,o),e[ctx].initialized=!0),e[ctx].enabled=!!s},unmounted(e,n){if(!e[ctx].initialized)return;const{value:r={}}=n,{zIndex:o}=r;zIndexManager.unregister(e,o)}},zindexable$1=zindexable,ssrContextKey=Symbol("@css-render/vue3-ssr");function createStyleString(e,n){return`<style cssr-id="${e}">
${n}
</style>`}function ssrAdapter(e,n){const r=inject(ssrContextKey,null);if(r===null){console.error("[css-render/vue3-ssr]: no ssr context found.");return}const{styles:o,ids:s}=r;s.has(e)||o!==null&&(s.add(e),o.push(createStyleString(e,n)))}const isBrowser=typeof document<"u";function useSsrAdapter(){if(isBrowser)return;const e=inject(ssrContextKey,null);if(e!==null)return{adapter:ssrAdapter,context:e}}function warn(e,n){console.error(`[vueuc/${e}]: ${n}`)}const{c}=CssRender(),cssrAnchorMetaName$1="vueuc-style";function lowBit(e){return e&-e}class FinweckTree{constructor(n,r){this.l=n,this.min=r;const o=new Array(n+1);for(let s=0;s<n+1;++s)o[s]=0;this.ft=o}add(n,r){if(r===0)return;const{l:o,ft:s}=this;for(n+=1;n<=o;)s[n]+=r,n+=lowBit(n)}get(n){return this.sum(n+1)-this.sum(n)}sum(n){if(n===void 0&&(n=this.l),n<=0)return 0;const{ft:r,min:o,l:s}=this;if(n>s)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let u=n*o;for(;n>0;)u+=r[n],n-=lowBit(n);return u}getBound(n){let r=0,o=this.l;for(;o>r;){const s=Math.floor((r+o)/2),u=this.sum(s);if(u>n){o=s;continue}else if(u<n){if(r===s)return this.sum(r+1)<=n?r+1:s;r=s}else return s}return r}}function resolveTo(e){return typeof e=="string"?document.querySelector(e):e()}const LazyTeleport=defineComponent({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(e){return{showTeleport:useFalseUntilTruthy(toRef(e,"show")),mergedTo:computed(()=>{const{to:n}=e;return n!=null?n:"body"})}},render(){return this.showTeleport?this.disabled?getSlot("lazy-teleport",this.$slots):h(Teleport,{disabled:this.disabled,to:this.mergedTo},getSlot("lazy-teleport",this.$slots)):null}}),oppositionPositions={top:"bottom",bottom:"top",left:"right",right:"left"},oppositeAligns={start:"end",center:"center",end:"start"},propToCompare={top:"height",bottom:"height",left:"width",right:"width"},transformOrigins={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},overlapTransformOrigin={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},oppositeAlignCssPositionProps={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},keepOffsetDirection={top:!0,bottom:!1,left:!0,right:!1},cssPositionToOppositeAlign={top:"end",bottom:"start",left:"end",right:"start"};function getPlacementAndOffsetOfFollower(e,n,r,o,s,u){if(!s||u)return{placement:e,top:0,left:0};const[d,f]=e.split("-");let v=f!=null?f:"center",m={top:0,left:0};const _=(w,x,k)=>{let S=0,E=0;const T=r[w]-n[x]-n[w];return T>0&&o&&(k?E=keepOffsetDirection[x]?T:-T:S=keepOffsetDirection[x]?T:-T),{left:S,top:E}},g=d==="left"||d==="right";if(v!=="center"){const w=oppositeAlignCssPositionProps[e],x=oppositionPositions[w],k=propToCompare[w];if(r[k]>n[k]){if(n[w]+n[k]<r[k]){const S=(r[k]-n[k])/2;n[w]<S||n[x]<S?n[w]<n[x]?(v=oppositeAligns[f],m=_(k,x,g)):m=_(k,w,g):v="center"}}else r[k]<n[k]&&n[x]<0&&n[w]>n[x]&&(v=oppositeAligns[f])}else{const w=d==="bottom"||d==="top"?"left":"top",x=oppositionPositions[w],k=propToCompare[w],S=(r[k]-n[k])/2;(n[w]<S||n[x]<S)&&(n[w]>n[x]?(v=cssPositionToOppositeAlign[w],m=_(k,w,g)):(v=cssPositionToOppositeAlign[x],m=_(k,x,g)))}let y=d;return n[d]<r[propToCompare[d]]&&n[d]<n[oppositionPositions[d]]&&(y=oppositionPositions[d]),{placement:v!=="center"?`${y}-${v}`:y,left:m.left,top:m.top}}function getProperTransformOrigin(e,n){return n?overlapTransformOrigin[e]:transformOrigins[e]}function getOffset(e,n,r,o,s,u){if(u)switch(e){case"bottom-start":return{top:`${Math.round(r.top-n.top+r.height)}px`,left:`${Math.round(r.left-n.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(r.top-n.top+r.height)}px`,left:`${Math.round(r.left-n.left+r.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(r.top-n.top)}px`,left:`${Math.round(r.left-n.left)}px`,transform:""};case"top-end":return{top:`${Math.round(r.top-n.top)}px`,left:`${Math.round(r.left-n.left+r.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(r.top-n.top)}px`,left:`${Math.round(r.left-n.left+r.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(r.top-n.top+r.height)}px`,left:`${Math.round(r.left-n.left+r.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(r.top-n.top)}px`,left:`${Math.round(r.left-n.left)}px`,transform:""};case"left-end":return{top:`${Math.round(r.top-n.top+r.height)}px`,left:`${Math.round(r.left-n.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(r.top-n.top)}px`,left:`${Math.round(r.left-n.left+r.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(r.top-n.top+r.height/2)}px`,left:`${Math.round(r.left-n.left+r.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(r.top-n.top+r.height/2)}px`,left:`${Math.round(r.left-n.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(r.top-n.top+r.height)}px`,left:`${Math.round(r.left-n.left+r.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(e){case"bottom-start":return{top:`${Math.round(r.top-n.top+r.height+o)}px`,left:`${Math.round(r.left-n.left+s)}px`,transform:""};case"bottom-end":return{top:`${Math.round(r.top-n.top+r.height+o)}px`,left:`${Math.round(r.left-n.left+r.width+s)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(r.top-n.top+o)}px`,left:`${Math.round(r.left-n.left+s)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(r.top-n.top+o)}px`,left:`${Math.round(r.left-n.left+r.width+s)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(r.top-n.top+o)}px`,left:`${Math.round(r.left-n.left+r.width+s)}px`,transform:""};case"right-end":return{top:`${Math.round(r.top-n.top+r.height+o)}px`,left:`${Math.round(r.left-n.left+r.width+s)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(r.top-n.top+o)}px`,left:`${Math.round(r.left-n.left+s)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(r.top-n.top+r.height+o)}px`,left:`${Math.round(r.left-n.left+s)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(r.top-n.top+o)}px`,left:`${Math.round(r.left-n.left+r.width/2+s)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(r.top-n.top+r.height/2+o)}px`,left:`${Math.round(r.left-n.left+r.width+s)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(r.top-n.top+r.height/2+o)}px`,left:`${Math.round(r.left-n.left+s)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(r.top-n.top+r.height+o)}px`,left:`${Math.round(r.left-n.left+r.width/2+s)}px`,transform:"translateX(-50%)"}}}const style$m=c([c(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),c(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[c("> *",{pointerEvents:"all"})])]),VFollower=defineComponent({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(e){const n=inject("VBinder"),r=useMemo(()=>e.enabled!==void 0?e.enabled:e.show),o=ref(null),s=ref(null),u=()=>{const{syncTrigger:y}=e;y.includes("scroll")&&n.addScrollListener(v),y.includes("resize")&&n.addResizeListener(v)},d=()=>{n.removeScrollListener(v),n.removeResizeListener(v)};onMounted(()=>{r.value&&(v(),u())});const f=useSsrAdapter();style$m.mount({id:"vueuc/binder",head:!0,anchorMetaName:cssrAnchorMetaName$1,ssr:f}),onBeforeUnmount(()=>{d()}),onFontsReady(()=>{r.value&&v()});const v=()=>{if(!r.value)return;const y=o.value;if(y===null)return;const w=n.targetRef,{x,y:k,overlap:S}=e,E=x!==void 0&&k!==void 0?getPointRect(x,k):getRect$1(w);y.style.setProperty("--v-target-width",`${Math.round(E.width)}px`),y.style.setProperty("--v-target-height",`${Math.round(E.height)}px`);const{width:T,minWidth:M,placement:I,internalShift:F,flip:O}=e;y.setAttribute("v-placement",I),S?y.setAttribute("v-overlap",""):y.removeAttribute("v-overlap");const{style:N}=y;T==="target"?N.width=`${E.width}px`:T!==void 0?N.width=T:N.width="",M==="target"?N.minWidth=`${E.width}px`:M!==void 0?N.minWidth=M:N.minWidth="";const D=getRect$1(y),X=getRect$1(s.value),{left:U,top:Z,placement:j}=getPlacementAndOffsetOfFollower(I,E,D,F,O,S),Q=getProperTransformOrigin(j,S),{left:ve,top:Se,transform:we}=getOffset(j,X,E,Z,U,S);y.setAttribute("v-placement",j),y.style.setProperty("--v-offset-left",`${Math.round(U)}px`),y.style.setProperty("--v-offset-top",`${Math.round(Z)}px`),y.style.transform=`translateX(${ve}) translateY(${Se}) ${we}`,y.style.setProperty("--v-transform-origin",Q),y.style.transformOrigin=Q};watch(r,y=>{y?(u(),m()):d()});const m=()=>{nextTick().then(v).catch(y=>console.error(y))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(y=>{watch(toRef(e,y),v)}),["teleportDisabled"].forEach(y=>{watch(toRef(e,y),m)}),watch(toRef(e,"syncTrigger"),y=>{y.includes("resize")?n.addResizeListener(v):n.removeResizeListener(v),y.includes("scroll")?n.addScrollListener(v):n.removeScrollListener(v)});const _=isMounted(),g=useMemo(()=>{const{to:y}=e;if(y!==void 0)return y;_.value});return{VBinder:n,mergedEnabled:r,offsetContainerRef:s,followerRef:o,mergedTo:g,syncPosition:v}},render(){return h(LazyTeleport,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var e,n;const r=h("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[h("div",{class:"v-binder-follower-content",ref:"followerRef"},(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e))]);return this.zindexable?withDirectives(r,[[zindexable$1,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):r}})}});var resizeObservers=[],hasActiveObservations=function(){return resizeObservers.some(function(e){return e.activeTargets.length>0})},hasSkippedObservations=function(){return resizeObservers.some(function(e){return e.skippedTargets.length>0})},msg="ResizeObserver loop completed with undelivered notifications.",deliverResizeLoopError=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:msg}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=msg),window.dispatchEvent(e)},ResizeObserverBoxOptions;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(ResizeObserverBoxOptions||(ResizeObserverBoxOptions={}));var freeze=function(e){return Object.freeze(e)},ResizeObserverSize=function(){function e(n,r){this.inlineSize=n,this.blockSize=r,freeze(this)}return e}(),DOMRectReadOnly=function(){function e(n,r,o,s){return this.x=n,this.y=r,this.width=o,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,freeze(this)}return e.prototype.toJSON=function(){var n=this,r=n.x,o=n.y,s=n.top,u=n.right,d=n.bottom,f=n.left,v=n.width,m=n.height;return{x:r,y:o,top:s,right:u,bottom:d,left:f,width:v,height:m}},e.fromRect=function(n){return new e(n.x,n.y,n.width,n.height)},e}(),isSVG=function(e){return e instanceof SVGElement&&"getBBox"in e},isHidden=function(e){if(isSVG(e)){var n=e.getBBox(),r=n.width,o=n.height;return!r&&!o}var s=e,u=s.offsetWidth,d=s.offsetHeight;return!(u||d||e.getClientRects().length)},isElement=function(e){var n;if(e instanceof Element)return!0;var r=(n=e==null?void 0:e.ownerDocument)===null||n===void 0?void 0:n.defaultView;return!!(r&&e instanceof r.Element)},isReplacedElement=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},global$1=typeof window<"u"?window:{},cache=new WeakMap,scrollRegexp=/auto|scroll/,verticalRegexp=/^tb|vertical/,IE=/msie|trident/i.test(global$1.navigator&&global$1.navigator.userAgent),parseDimension=function(e){return parseFloat(e||"0")},size=function(e,n,r){return e===void 0&&(e=0),n===void 0&&(n=0),r===void 0&&(r=!1),new ResizeObserverSize((r?n:e)||0,(r?e:n)||0)},zeroBoxes=freeze({devicePixelContentBoxSize:size(),borderBoxSize:size(),contentBoxSize:size(),contentRect:new DOMRectReadOnly(0,0,0,0)}),calculateBoxSizes=function(e,n){if(n===void 0&&(n=!1),cache.has(e)&&!n)return cache.get(e);if(isHidden(e))return cache.set(e,zeroBoxes),zeroBoxes;var r=getComputedStyle(e),o=isSVG(e)&&e.ownerSVGElement&&e.getBBox(),s=!IE&&r.boxSizing==="border-box",u=verticalRegexp.test(r.writingMode||""),d=!o&&scrollRegexp.test(r.overflowY||""),f=!o&&scrollRegexp.test(r.overflowX||""),v=o?0:parseDimension(r.paddingTop),m=o?0:parseDimension(r.paddingRight),_=o?0:parseDimension(r.paddingBottom),g=o?0:parseDimension(r.paddingLeft),y=o?0:parseDimension(r.borderTopWidth),w=o?0:parseDimension(r.borderRightWidth),x=o?0:parseDimension(r.borderBottomWidth),k=o?0:parseDimension(r.borderLeftWidth),S=g+m,E=v+_,T=k+w,M=y+x,I=f?e.offsetHeight-M-e.clientHeight:0,F=d?e.offsetWidth-T-e.clientWidth:0,O=s?S+T:0,N=s?E+M:0,D=o?o.width:parseDimension(r.width)-O-F,X=o?o.height:parseDimension(r.height)-N-I,U=D+S+F+T,Z=X+E+I+M,j=freeze({devicePixelContentBoxSize:size(Math.round(D*devicePixelRatio),Math.round(X*devicePixelRatio),u),borderBoxSize:size(U,Z,u),contentBoxSize:size(D,X,u),contentRect:new DOMRectReadOnly(g,v,D,X)});return cache.set(e,j),j},calculateBoxSize=function(e,n,r){var o=calculateBoxSizes(e,r),s=o.borderBoxSize,u=o.contentBoxSize,d=o.devicePixelContentBoxSize;switch(n){case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:return d;case ResizeObserverBoxOptions.BORDER_BOX:return s;default:return u}},ResizeObserverEntry=function(){function e(n){var r=calculateBoxSizes(n);this.target=n,this.contentRect=r.contentRect,this.borderBoxSize=freeze([r.borderBoxSize]),this.contentBoxSize=freeze([r.contentBoxSize]),this.devicePixelContentBoxSize=freeze([r.devicePixelContentBoxSize])}return e}(),calculateDepthForNode=function(e){if(isHidden(e))return 1/0;for(var n=0,r=e.parentNode;r;)n+=1,r=r.parentNode;return n},broadcastActiveObservations=function(){var e=1/0,n=[];resizeObservers.forEach(function(d){if(d.activeTargets.length!==0){var f=[];d.activeTargets.forEach(function(m){var _=new ResizeObserverEntry(m.target),g=calculateDepthForNode(m.target);f.push(_),m.lastReportedSize=calculateBoxSize(m.target,m.observedBox),g<e&&(e=g)}),n.push(function(){d.callback.call(d.observer,f,d.observer)}),d.activeTargets.splice(0,d.activeTargets.length)}});for(var r=0,o=n;r<o.length;r++){var s=o[r];s()}return e},gatherActiveObservationsAtDepth=function(e){resizeObservers.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(s){s.isActive()&&(calculateDepthForNode(s.target)>e?r.activeTargets.push(s):r.skippedTargets.push(s))})})},process$1=function(){var e=0;for(gatherActiveObservationsAtDepth(e);hasActiveObservations();)e=broadcastActiveObservations(),gatherActiveObservationsAtDepth(e);return hasSkippedObservations()&&deliverResizeLoopError(),e>0},trigger,callbacks=[],notify=function(){return callbacks.splice(0).forEach(function(e){return e()})},queueMicroTask=function(e){if(!trigger){var n=0,r=document.createTextNode(""),o={characterData:!0};new MutationObserver(function(){return notify()}).observe(r,o),trigger=function(){r.textContent="".concat(n?n--:n++)}}callbacks.push(e),trigger()},queueResizeObserver=function(e){queueMicroTask(function(){requestAnimationFrame(e)})},watching=0,isWatching=function(){return!!watching},CATCH_PERIOD=250,observerConfig={attributes:!0,characterData:!0,childList:!0,subtree:!0},events=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],time=function(e){return e===void 0&&(e=0),Date.now()+e},scheduled=!1,Scheduler=function(){function e(){var n=this;this.stopped=!0,this.listener=function(){return n.schedule()}}return e.prototype.run=function(n){var r=this;if(n===void 0&&(n=CATCH_PERIOD),!scheduled){scheduled=!0;var o=time(n);queueResizeObserver(function(){var s=!1;try{s=process$1()}finally{if(scheduled=!1,n=o-time(),!isWatching())return;s?r.run(1e3):n>0?r.run(n):r.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var n=this,r=function(){return n.observer&&n.observer.observe(document.body,observerConfig)};document.body?r():global$1.addEventListener("DOMContentLoaded",r)},e.prototype.start=function(){var n=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),events.forEach(function(r){return global$1.addEventListener(r,n.listener,!0)}))},e.prototype.stop=function(){var n=this;this.stopped||(this.observer&&this.observer.disconnect(),events.forEach(function(r){return global$1.removeEventListener(r,n.listener,!0)}),this.stopped=!0)},e}(),scheduler=new Scheduler,updateCount=function(e){!watching&&e>0&&scheduler.start(),watching+=e,!watching&&scheduler.stop()},skipNotifyOnElement=function(e){return!isSVG(e)&&!isReplacedElement(e)&&getComputedStyle(e).display==="inline"},ResizeObservation=function(){function e(n,r){this.target=n,this.observedBox=r||ResizeObserverBoxOptions.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var n=calculateBoxSize(this.target,this.observedBox,!0);return skipNotifyOnElement(this.target)&&(this.lastReportedSize=n),this.lastReportedSize.inlineSize!==n.inlineSize||this.lastReportedSize.blockSize!==n.blockSize},e}(),ResizeObserverDetail=function(){function e(n,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=n,this.callback=r}return e}(),observerMap=new WeakMap,getObservationIndex=function(e,n){for(var r=0;r<e.length;r+=1)if(e[r].target===n)return r;return-1},ResizeObserverController=function(){function e(){}return e.connect=function(n,r){var o=new ResizeObserverDetail(n,r);observerMap.set(n,o)},e.observe=function(n,r,o){var s=observerMap.get(n),u=s.observationTargets.length===0;getObservationIndex(s.observationTargets,r)<0&&(u&&resizeObservers.push(s),s.observationTargets.push(new ResizeObservation(r,o&&o.box)),updateCount(1),scheduler.schedule())},e.unobserve=function(n,r){var o=observerMap.get(n),s=getObservationIndex(o.observationTargets,r),u=o.observationTargets.length===1;s>=0&&(u&&resizeObservers.splice(resizeObservers.indexOf(o),1),o.observationTargets.splice(s,1),updateCount(-1))},e.disconnect=function(n){var r=this,o=observerMap.get(n);o.observationTargets.slice().forEach(function(s){return r.unobserve(n,s.target)}),o.activeTargets.splice(0,o.activeTargets.length)},e}(),ResizeObserver$1=function(){function e(n){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof n!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");ResizeObserverController.connect(this,n)}return e.prototype.observe=function(n,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!isElement(n))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");ResizeObserverController.observe(this,n,r)},e.prototype.unobserve=function(n){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!isElement(n))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");ResizeObserverController.unobserve(this,n)},e.prototype.disconnect=function(){ResizeObserverController.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();class ResizeObserverDelegate{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new(typeof window<"u"&&window.ResizeObserver||ResizeObserver$1)(this.handleResize),this.elHandlersMap=new Map}handleResize(n){for(const r of n){const o=this.elHandlersMap.get(r.target);o!==void 0&&o(r)}}registerHandler(n,r){this.elHandlersMap.set(n,r),this.observer.observe(n)}unregisterHandler(n){!this.elHandlersMap.has(n)||(this.elHandlersMap.delete(n),this.observer.unobserve(n))}}const resizeObserverManager=new ResizeObserverDelegate,VResizeObserver=defineComponent({name:"ResizeObserver",props:{onResize:Function},setup(e){let n=!1;const r=getCurrentInstance().proxy;function o(s){const{onResize:u}=e;u!==void 0&&u(s)}onMounted(()=>{const s=r.$el;if(s===void 0){warn("resize-observer","$el does not exist.");return}if(s.nextElementSibling!==s.nextSibling&&s.nodeType===3&&s.nodeValue!==""){warn("resize-observer","$el can not be observed (it may be a text node).");return}s.nextElementSibling!==null&&(resizeObserverManager.registerHandler(s.nextElementSibling,o),n=!0)}),onBeforeUnmount(()=>{n&&resizeObserverManager.unregisterHandler(r.$el.nextElementSibling)})},render(){return renderSlot(this.$slots,"default")}});let maybeTouch;function ensureMaybeTouch(){return maybeTouch===void 0&&("matchMedia"in window?maybeTouch=window.matchMedia("(pointer:coarse)").matches:maybeTouch=!1),maybeTouch}let wheelScale;function ensureWheelScale(){return wheelScale===void 0&&(wheelScale="chrome"in window?window.devicePixelRatio:1),wheelScale}const styles=c(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[c("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[c("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),VVirtualList=defineComponent({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(e){const n=useSsrAdapter();styles.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:cssrAnchorMetaName$1,ssr:n}),onMounted(()=>{const{defaultScrollIndex:Z,defaultScrollKey:j}=e;Z!=null?x({index:Z}):j!=null&&x({key:j})});let r=!1,o=!1;onActivated(()=>{if(r=!1,!o){o=!0;return}x({top:g.value,left:_})}),onDeactivated(()=>{r=!0,o||(o=!0)});const s=computed(()=>{const Z=new Map,{keyField:j}=e;return e.items.forEach((Q,ve)=>{Z.set(Q[j],ve)}),Z}),u=ref(null),d=ref(void 0),f=new Map,v=computed(()=>{const{items:Z,itemSize:j,keyField:Q}=e,ve=new FinweckTree(Z.length,j);return Z.forEach((Se,we)=>{const oe=Se[Q],ne=f.get(oe);ne!==void 0&&ve.add(we,ne)}),ve}),m=ref(0);let _=0;const g=ref(0),y=useMemo(()=>Math.max(v.value.getBound(g.value-depx(e.paddingTop))-1,0)),w=computed(()=>{const{value:Z}=d;if(Z===void 0)return[];const{items:j,itemSize:Q}=e,ve=y.value,Se=Math.min(ve+Math.ceil(Z/Q+1),j.length-1),we=[];for(let oe=ve;oe<=Se;++oe)we.push(j[oe]);return we}),x=(Z,j)=>{if(typeof Z=="number"){T(Z,j,"auto");return}const{left:Q,top:ve,index:Se,key:we,position:oe,behavior:ne,debounce:q=!0}=Z;if(Q!==void 0||ve!==void 0)T(Q,ve,ne);else if(Se!==void 0)E(Se,ne,q);else if(we!==void 0){const H=s.value.get(we);H!==void 0&&E(H,ne,q)}else oe==="bottom"?T(0,Number.MAX_SAFE_INTEGER,ne):oe==="top"&&T(0,0,ne)};let k,S=null;function E(Z,j,Q){const{value:ve}=v,Se=ve.sum(Z)+depx(e.paddingTop);if(!Q)u.value.scrollTo({left:0,top:Se,behavior:j});else{k=Z,S!==null&&window.clearTimeout(S),S=window.setTimeout(()=>{k=void 0,S=null},16);const{scrollTop:we,offsetHeight:oe}=u.value;if(Se>we){const ne=ve.get(Z);Se+ne<=we+oe||u.value.scrollTo({left:0,top:Se+ne-oe,behavior:j})}else u.value.scrollTo({left:0,top:Se,behavior:j})}}function T(Z,j,Q){u.value.scrollTo({left:Z,top:j,behavior:Q})}function M(Z,j){var Q,ve,Se;if(r||e.ignoreItemResize||U(j.target))return;const{value:we}=v,oe=s.value.get(Z),ne=we.get(oe),q=(Se=(ve=(Q=j.borderBoxSize)===null||Q===void 0?void 0:Q[0])===null||ve===void 0?void 0:ve.blockSize)!==null&&Se!==void 0?Se:j.contentRect.height;if(q===ne)return;q-e.itemSize===0?f.delete(Z):f.set(Z,q-e.itemSize);const Y=q-ne;if(Y===0)return;we.add(oe,Y);const le=u.value;if(le!=null){if(k===void 0){const Ce=we.sum(oe);le.scrollTop>Ce&&le.scrollBy(0,Y)}else if(oe<k)le.scrollBy(0,Y);else if(oe===k){const Ce=we.sum(oe);q+Ce>le.scrollTop+le.offsetHeight&&le.scrollBy(0,Y)}X()}m.value++}const I=!ensureMaybeTouch();let F=!1;function O(Z){var j;(j=e.onScroll)===null||j===void 0||j.call(e,Z),(!I||!F)&&X()}function N(Z){var j;if((j=e.onWheel)===null||j===void 0||j.call(e,Z),I){const Q=u.value;if(Q!=null){if(Z.deltaX===0&&(Q.scrollTop===0&&Z.deltaY<=0||Q.scrollTop+Q.offsetHeight>=Q.scrollHeight&&Z.deltaY>=0))return;Z.preventDefault(),Q.scrollTop+=Z.deltaY/ensureWheelScale(),Q.scrollLeft+=Z.deltaX/ensureWheelScale(),X(),F=!0,beforeNextFrameOnce(()=>{F=!1})}}}function D(Z){if(r||U(Z.target)||Z.contentRect.height===d.value)return;d.value=Z.contentRect.height;const{onResize:j}=e;j!==void 0&&j(Z)}function X(){const{value:Z}=u;Z!=null&&(g.value=Z.scrollTop,_=Z.scrollLeft)}function U(Z){let j=Z;for(;j!==null;){if(j.style.display==="none")return!0;j=j.parentElement}return!1}return{listHeight:d,listStyle:{overflow:"auto"},keyToIndex:s,itemsStyle:computed(()=>{const{itemResizable:Z}=e,j=pxfy(v.value.sum());return m.value,[e.itemsStyle,{boxSizing:"content-box",height:Z?"":j,minHeight:Z?j:"",paddingTop:pxfy(e.paddingTop),paddingBottom:pxfy(e.paddingBottom)}]}),visibleItemsStyle:computed(()=>(m.value,{transform:`translateY(${pxfy(v.value.sum(y.value))})`})),viewportItems:w,listElRef:u,itemsElRef:ref(null),scrollTo:x,handleListResize:D,handleListScroll:O,handleListWheel:N,handleItemResize:M}},render(){const{itemResizable:e,keyField:n,keyToIndex:r,visibleItemsTag:o}=this;return h(VResizeObserver,{onResize:this.handleListResize},{default:()=>{var s,u;return h("div",mergeProps(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[this.items.length!==0?h("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[h(o,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map(d=>{const f=d[n],v=r.get(f),m=this.$slots.default({item:d,index:v})[0];return e?h(VResizeObserver,{key:f,onResize:_=>this.handleItemResize(f,_)},{default:()=>m}):(m.key=f,m)})})]):(u=(s=this.$slots).empty)===null||u===void 0?void 0:u.call(s)])}})}}),hiddenAttr="v-hidden",style$l=c("[v-hidden]",{display:"none!important"}),VOverflow=defineComponent({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateOverflow:Function},setup(e,{slots:n}){const r=ref(null),o=ref(null);function s(){const{value:d}=r,{getCounter:f,getTail:v}=e;let m;if(f!==void 0?m=f():m=o.value,!d||!m)return;m.hasAttribute(hiddenAttr)&&m.removeAttribute(hiddenAttr);const{children:_}=d,g=d.offsetWidth,y=[],w=n.tail?v==null?void 0:v():null;let x=w?w.offsetWidth:0,k=!1;const S=d.children.length-(n.tail?1:0);for(let T=0;T<S-1;++T){if(T<0)continue;const M=_[T];if(k){M.hasAttribute(hiddenAttr)||M.setAttribute(hiddenAttr,"");continue}else M.hasAttribute(hiddenAttr)&&M.removeAttribute(hiddenAttr);const I=M.offsetWidth;if(x+=I,y[T]=I,x>g){const{updateCounter:F}=e;for(let O=T;O>=0;--O){const N=S-1-O;F!==void 0?F(N):m.textContent=`${N}`;const D=m.offsetWidth;if(x-=y[O],x+D<=g||O===0){k=!0,T=O-1,w&&(T===-1?(w.style.maxWidth=`${g-D}px`,w.style.boxSizing="border-box"):w.style.maxWidth="");break}}}}const{onUpdateOverflow:E}=e;k?E!==void 0&&E(!0):(E!==void 0&&E(!1),m.setAttribute(hiddenAttr,""))}const u=useSsrAdapter();return style$l.mount({id:"vueuc/overflow",head:!0,anchorMetaName:cssrAnchorMetaName$1,ssr:u}),onMounted(s),{selfRef:r,counterRef:o,sync:s}},render(){const{$slots:e}=this;return nextTick(this.sync),h("div",{class:"v-overflow",ref:"selfRef"},[renderSlot(e,"default"),e.counter?e.counter():h("span",{style:{display:"inline-block"},ref:"counterRef"}),e.tail?e.tail():null])}});function isHTMLElement(e){return e instanceof HTMLElement}function focusFirstDescendant(e){for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];if(isHTMLElement(r)&&(attemptFocus(r)||focusFirstDescendant(r)))return!0}return!1}function focusLastDescendant(e){for(let n=e.childNodes.length-1;n>=0;n--){const r=e.childNodes[n];if(isHTMLElement(r)&&(attemptFocus(r)||focusLastDescendant(r)))return!0}return!1}function attemptFocus(e){if(!isFocusable(e))return!1;try{e.focus({preventScroll:!0})}catch{}return document.activeElement===e}function isFocusable(e){if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.getAttribute("disabled"))return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return e.type!=="hidden"&&e.type!=="file";case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}let stack=[];const FocusTrap=defineComponent({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(e){const n=createId(),r=ref(null),o=ref(null);let s=!1,u=!1;const d=typeof document>"u"?null:document.activeElement;function f(){return stack[stack.length-1]===n}function v(S){var E;S.code==="Escape"&&f()&&((E=e.onEsc)===null||E===void 0||E.call(e,S))}onMounted(()=>{watch(()=>e.active,S=>{S?(g(),on$1("keydown",document,v)):(off$1("keydown",document,v),s&&y())},{immediate:!0})}),onBeforeUnmount(()=>{off$1("keydown",document,v),s&&y()});function m(S){if(!u&&f()){const E=_();if(E===null||E.contains(getPreciseEventTarget(S)))return;w("first")}}function _(){const S=r.value;if(S===null)return null;let E=S;for(;E=E.nextSibling,!(E===null||E instanceof Element&&E.tagName==="DIV"););return E}function g(){var S;if(!e.disabled){if(stack.push(n),e.autoFocus){const{initialFocusTo:E}=e;E===void 0?w("first"):(S=resolveTo(E))===null||S===void 0||S.focus({preventScroll:!0})}s=!0,document.addEventListener("focus",m,!0)}}function y(){var S;if(e.disabled||(document.removeEventListener("focus",m,!0),stack=stack.filter(T=>T!==n),f()))return;const{finalFocusTo:E}=e;E!==void 0?(S=resolveTo(E))===null||S===void 0||S.focus({preventScroll:!0}):e.returnFocusOnDeactivated&&d instanceof HTMLElement&&(u=!0,d.focus({preventScroll:!0}),u=!1)}function w(S){if(!!f()&&e.active){const E=r.value,T=o.value;if(E!==null&&T!==null){const M=_();if(M==null||M===T){u=!0,E.focus({preventScroll:!0}),u=!1;return}u=!0;const I=S==="first"?focusFirstDescendant(M):focusLastDescendant(M);u=!1,I||(u=!0,E.focus({preventScroll:!0}),u=!1)}}}function x(S){if(u)return;const E=_();E!==null&&(S.relatedTarget!==null&&E.contains(S.relatedTarget)?w("last"):w("first"))}function k(S){u||(S.relatedTarget!==null&&S.relatedTarget===r.value?w("last"):w("first"))}return{focusableStartRef:r,focusableEndRef:o,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:x,handleEndFocus:k}},render(){const{default:e}=this.$slots;if(e===void 0)return null;if(this.disabled)return e();const{active:n,focusableStyle:r}=this;return h(Fragment,null,[h("div",{"aria-hidden":"true",tabindex:n?"0":"-1",ref:"focusableStartRef",style:r,onFocus:this.handleStartFocus}),e(),h("div",{"aria-hidden":"true",style:r,ref:"focusableEndRef",tabindex:n?"0":"-1",onFocus:this.handleEndFocus})])}});function useOnResize(e,n){n&&(onMounted(()=>{const{value:r}=e;r&&resizeObserverManager.registerHandler(r,n)}),onBeforeUnmount(()=>{const{value:r}=e;r&&resizeObserverManager.unregisterHandler(r)}))}let lockCount=0,originalMarginRight="",originalOverflow="",originalOverflowX="",originalOverflowY="";const lockHtmlScrollRightCompensationRef=ref("0px");function useLockHtmlScroll(e){if(typeof document>"u")return;const n=document.documentElement;let r,o=!1;const s=()=>{n.style.marginRight=originalMarginRight,n.style.overflow=originalOverflow,n.style.overflowX=originalOverflowX,n.style.overflowY=originalOverflowY,lockHtmlScrollRightCompensationRef.value="0px"};onMounted(()=>{r=watch(e,u=>{if(u){if(!lockCount){const d=window.innerWidth-n.offsetWidth;d>0&&(originalMarginRight=n.style.marginRight,n.style.marginRight=`${d}px`,lockHtmlScrollRightCompensationRef.value=`${d}px`),originalOverflow=n.style.overflow,originalOverflowX=n.style.overflowX,originalOverflowY=n.style.overflowY,n.style.overflow="hidden",n.style.overflowX="hidden",n.style.overflowY="hidden"}o=!0,lockCount++}else lockCount--,lockCount||s(),o=!1},{immediate:!0})}),onBeforeUnmount(()=>{r==null||r(),o&&(lockCount--,lockCount||s(),o=!1)})}const isComposingRef=ref(!1),compositionStartHandler=()=>{isComposingRef.value=!0},compositionEndHandler=()=>{isComposingRef.value=!1};let mountedCount=0;const useIsComposing=()=>(isBrowser$2&&(onBeforeMount(()=>{mountedCount||(window.addEventListener("compositionstart",compositionStartHandler),window.addEventListener("compositionend",compositionEndHandler)),mountedCount++}),onBeforeUnmount(()=>{mountedCount<=1?(window.removeEventListener("compositionstart",compositionStartHandler),window.removeEventListener("compositionend",compositionEndHandler),mountedCount=0):mountedCount--})),isComposingRef);function useReactivated(e){const n={isDeactivated:!1};let r=!1;return onActivated(()=>{if(n.isDeactivated=!1,!r){r=!0;return}e()}),onDeactivated(()=>{n.isDeactivated=!0,r||(r=!0)}),n}const formItemInjectionKey="n-form-item";function useFormItem(e,{defaultSize:n="medium",mergedSize:r,mergedDisabled:o}={}){const s=inject(formItemInjectionKey,null);provide(formItemInjectionKey,null);const u=computed(r?()=>r(s):()=>{const{size:v}=e;if(v)return v;if(s){const{mergedSize:m}=s;if(m.value!==void 0)return m.value}return n}),d=computed(o?()=>o(s):()=>{const{disabled:v}=e;return v!==void 0?v:s?s.disabled.value:!1}),f=computed(()=>{const{status:v}=e;return v||(s==null?void 0:s.mergedValidationStatus.value)});return onBeforeUnmount(()=>{s&&s.restoreValidation()}),{mergedSizeRef:u,mergedDisabledRef:d,mergedStatusRef:f,nTriggerFormBlur(){s&&s.handleContentBlur()},nTriggerFormChange(){s&&s.handleContentChange()},nTriggerFormFocus(){s&&s.handleContentFocus()},nTriggerFormInput(){s&&s.handleContentInput()}}}var freeGlobal$1=typeof global=="object"&&global&&global.Object===Object&&global;const freeGlobal$2=freeGlobal$1;var freeSelf$1=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal$2||freeSelf$1||Function("return this")();const root$2=root$1;var Symbol$1=root$2.Symbol;const Symbol$2=Symbol$1;var objectProto$f=Object.prototype,hasOwnProperty$b=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(e){var n=hasOwnProperty$b.call(e,symToStringTag$1),r=e[symToStringTag$1];try{e[symToStringTag$1]=void 0;var o=!0}catch{}var s=nativeObjectToString$1.call(e);return o&&(n?e[symToStringTag$1]=r:delete e[symToStringTag$1]),s}var objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString$1(e){return nativeObjectToString.call(e)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(e){return e==null?e===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString$1(e)}function isObjectLike$1(e){return e!=null&&typeof e=="object"}var symbolTag$2="[object Symbol]";function isSymbol$1(e){return typeof e=="symbol"||isObjectLike$1(e)&&baseGetTag(e)==symbolTag$2}function arrayMap(e,n){for(var r=-1,o=e==null?0:e.length,s=Array(o);++r<o;)s[r]=n(e[r],r,e);return s}var isArray$1=Array.isArray;const isArray$2=isArray$1;var INFINITY$1=1/0,symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$1?symbolProto$1.toString:void 0;function baseToString(e){if(typeof e=="string")return e;if(isArray$2(e))return arrayMap(e,baseToString)+"";if(isSymbol$1(e))return symbolToString?symbolToString.call(e):"";var n=e+"";return n=="0"&&1/e==-INFINITY$1?"-0":n}function isObject$2(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}function identity(e){return e}var asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(e){if(!isObject$2(e))return!1;var n=baseGetTag(e);return n==funcTag$1||n==genTag||n==asyncTag||n==proxyTag}var coreJsData=root$2["__core-js_shared__"];const coreJsData$1=coreJsData;var maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(e){if(e!=null){try{return funcToString$2.call(e)}catch{}try{return e+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$d=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$a=objectProto$d.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$a).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){if(!isObject$2(e)||isMasked(e))return!1;var n=isFunction$1(e)?reIsNative:reIsHostCtor;return n.test(toSource(e))}function getValue(e,n){return e==null?void 0:e[n]}function getNative(e,n){var r=getValue(e,n);return baseIsNative(r)?r:void 0}var WeakMap$1=getNative(root$2,"WeakMap");const WeakMap$2=WeakMap$1;var objectCreate=Object.create,baseCreate=function(){function e(){}return function(n){if(!isObject$2(n))return{};if(objectCreate)return objectCreate(n);e.prototype=n;var r=new e;return e.prototype=void 0,r}}();const baseCreate$1=baseCreate;function apply(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}function copyArray(e,n){var r=-1,o=e.length;for(n||(n=Array(o));++r<o;)n[r]=e[r];return n}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(e){var n=0,r=0;return function(){var o=nativeNow(),s=HOT_SPAN-(o-r);if(r=o,s>0){if(++n>=HOT_COUNT)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}function constant(e){return function(){return e}}var defineProperty=function(){try{var e=getNative(Object,"defineProperty");return e({},"",{}),e}catch{}}();const defineProperty$1=defineProperty;var baseSetToString=defineProperty$1?function(e,n){return defineProperty$1(e,"toString",{configurable:!0,enumerable:!1,value:constant(n),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);const setToString$1=setToString;var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(e,n){var r=typeof e;return n=n==null?MAX_SAFE_INTEGER$1:n,!!n&&(r=="number"||r!="symbol"&&reIsUint.test(e))&&e>-1&&e%1==0&&e<n}function baseAssignValue(e,n,r){n=="__proto__"&&defineProperty$1?defineProperty$1(e,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[n]=r}function eq(e,n){return e===n||e!==e&&n!==n}var objectProto$c=Object.prototype,hasOwnProperty$9=objectProto$c.hasOwnProperty;function assignValue(e,n,r){var o=e[n];(!(hasOwnProperty$9.call(e,n)&&eq(o,r))||r===void 0&&!(n in e))&&baseAssignValue(e,n,r)}function copyObject(e,n,r,o){var s=!r;r||(r={});for(var u=-1,d=n.length;++u<d;){var f=n[u],v=o?o(r[f],e[f],f,r,e):void 0;v===void 0&&(v=e[f]),s?baseAssignValue(r,f,v):assignValue(r,f,v)}return r}var nativeMax$1=Math.max;function overRest(e,n,r){return n=nativeMax$1(n===void 0?e.length-1:n,0),function(){for(var o=arguments,s=-1,u=nativeMax$1(o.length-n,0),d=Array(u);++s<u;)d[s]=o[n+s];s=-1;for(var f=Array(n+1);++s<n;)f[s]=o[s];return f[n]=r(d),apply(e,this,f)}}function baseRest(e,n){return setToString$1(overRest(e,n,identity),e+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isArrayLike(e){return e!=null&&isLength(e.length)&&!isFunction$1(e)}function isIterateeCall(e,n,r){if(!isObject$2(r))return!1;var o=typeof n;return(o=="number"?isArrayLike(r)&&isIndex(n,r.length):o=="string"&&n in r)?eq(r[n],e):!1}function createAssigner(e){return baseRest(function(n,r){var o=-1,s=r.length,u=s>1?r[s-1]:void 0,d=s>2?r[2]:void 0;for(u=e.length>3&&typeof u=="function"?(s--,u):void 0,d&&isIterateeCall(r[0],r[1],d)&&(u=s<3?void 0:u,s=1),n=Object(n);++o<s;){var f=r[o];f&&e(n,f,o,u)}return n})}var objectProto$b=Object.prototype;function isPrototype(e){var n=e&&e.constructor,r=typeof n=="function"&&n.prototype||objectProto$b;return e===r}function baseTimes(e,n){for(var r=-1,o=Array(e);++r<e;)o[r]=n(r);return o}var argsTag$2="[object Arguments]";function baseIsArguments(e){return isObjectLike$1(e)&&baseGetTag(e)==argsTag$2}var objectProto$a=Object.prototype,hasOwnProperty$8=objectProto$a.hasOwnProperty,propertyIsEnumerable$1=objectProto$a.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike$1(e)&&hasOwnProperty$8.call(e,"callee")&&!propertyIsEnumerable$1.call(e,"callee")};const isArguments$1=isArguments;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$2.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer$1=nativeIsBuffer||stubFalse;const isBuffer$2=isBuffer$1;var argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$3="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$1]=typedArrayTags[boolTag$1]=typedArrayTags[dataViewTag$2]=typedArrayTags[dateTag$1]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag]=typedArrayTags[mapTag$2]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag$3]=typedArrayTags[regexpTag$1]=typedArrayTags[setTag$2]=typedArrayTags[stringTag$1]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray(e){return isObjectLike$1(e)&&isLength(e.length)&&!!typedArrayTags[baseGetTag(e)]}function baseUnary(e){return function(n){return e(n)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$2.process,nodeUtil=function(){try{var e=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return e||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}();const nodeUtil$1=nodeUtil;var nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray$1=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;const isTypedArray$2=isTypedArray$1;var objectProto$9=Object.prototype,hasOwnProperty$7=objectProto$9.hasOwnProperty;function arrayLikeKeys(e,n){var r=isArray$2(e),o=!r&&isArguments$1(e),s=!r&&!o&&isBuffer$2(e),u=!r&&!o&&!s&&isTypedArray$2(e),d=r||o||s||u,f=d?baseTimes(e.length,String):[],v=f.length;for(var m in e)(n||hasOwnProperty$7.call(e,m))&&!(d&&(m=="length"||s&&(m=="offset"||m=="parent")||u&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||isIndex(m,v)))&&f.push(m);return f}function overArg(e,n){return function(r){return e(n(r))}}var nativeKeys=overArg(Object.keys,Object);const nativeKeys$1=nativeKeys;var objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty;function baseKeys(e){if(!isPrototype(e))return nativeKeys$1(e);var n=[];for(var r in Object(e))hasOwnProperty$6.call(e,r)&&r!="constructor"&&n.push(r);return n}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function nativeKeysIn(e){var n=[];if(e!=null)for(var r in Object(e))n.push(r);return n}var objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function baseKeysIn(e){if(!isObject$2(e))return nativeKeysIn(e);var n=isPrototype(e),r=[];for(var o in e)o=="constructor"&&(n||!hasOwnProperty$5.call(e,o))||r.push(o);return r}function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(e,n){if(isArray$2(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||isSymbol$1(e)?!0:reIsPlainProp.test(e)||!reIsDeepProp.test(e)||n!=null&&e in Object(n)}var nativeCreate=getNative(Object,"create");const nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$6=Object.prototype,hasOwnProperty$4=objectProto$6.hasOwnProperty;function hashGet(e){var n=this.__data__;if(nativeCreate$1){var r=n[e];return r===HASH_UNDEFINED$2?void 0:r}return hasOwnProperty$4.call(n,e)?n[e]:void 0}var objectProto$5=Object.prototype,hasOwnProperty$3=objectProto$5.hasOwnProperty;function hashHas(e){var n=this.__data__;return nativeCreate$1?n[e]!==void 0:hasOwnProperty$3.call(n,e)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,n){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=nativeCreate$1&&n===void 0?HASH_UNDEFINED$1:n,this}function Hash(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var o=e[n];this.set(o[0],o[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(e,n){for(var r=e.length;r--;)if(eq(e[r][0],n))return r;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(e){var n=this.__data__,r=assocIndexOf(n,e);if(r<0)return!1;var o=n.length-1;return r==o?n.pop():splice.call(n,r,1),--this.size,!0}function listCacheGet(e){var n=this.__data__,r=assocIndexOf(n,e);return r<0?void 0:n[r][1]}function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,n){var r=this.__data__,o=assocIndexOf(r,e);return o<0?(++this.size,r.push([e,n])):r[o][1]=n,this}function ListCache(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var o=e[n];this.set(o[0],o[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$2,"Map");const Map$2=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function getMapData(e,n){var r=e.__data__;return isKeyable(n)?r[typeof n=="string"?"string":"hash"]:r.map}function mapCacheDelete(e){var n=getMapData(this,e).delete(e);return this.size-=n?1:0,n}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,n){var r=getMapData(this,e),o=r.size;return r.set(e,n),this.size+=r.size==o?0:1,this}function MapCache(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var o=e[n];this.set(o[0],o[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$1="Expected a function";function memoize(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new TypeError(FUNC_ERROR_TEXT$1);var r=function(){var o=arguments,s=n?n.apply(this,o):o[0],u=r.cache;if(u.has(s))return u.get(s);var d=e.apply(this,o);return r.cache=u.set(s,d)||u,d};return r.cache=new(memoize.Cache||MapCache),r}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var n=memoize(e,function(o){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),o}),r=n.cache;return n}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(rePropName,function(r,o,s,u){n.push(s?u.replace(reEscapeChar,"$1"):o||r)}),n});const stringToPath$1=stringToPath;function toString$1(e){return e==null?"":baseToString(e)}function castPath(e,n){return isArray$2(e)?e:isKey(e,n)?[e]:stringToPath$1(toString$1(e))}var INFINITY=1/0;function toKey(e){if(typeof e=="string"||isSymbol$1(e))return e;var n=e+"";return n=="0"&&1/e==-INFINITY?"-0":n}function baseGet(e,n){n=castPath(n,e);for(var r=0,o=n.length;e!=null&&r<o;)e=e[toKey(n[r++])];return r&&r==o?e:void 0}function get(e,n,r){var o=e==null?void 0:baseGet(e,n);return o===void 0?r:o}function arrayPush(e,n){for(var r=-1,o=n.length,s=e.length;++r<o;)e[s+r]=n[r];return e}var getPrototype=overArg(Object.getPrototypeOf,Object);const getPrototype$1=getPrototype;var objectTag$2="[object Object]",funcProto=Function.prototype,objectProto$4=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$2=objectProto$4.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$2(e){if(!isObjectLike$1(e)||baseGetTag(e)!=objectTag$2)return!1;var n=getPrototype$1(e);if(n===null)return!0;var r=hasOwnProperty$2.call(n,"constructor")&&n.constructor;return typeof r=="function"&&r instanceof r&&funcToString.call(r)==objectCtorString}function baseSlice(e,n,r){var o=-1,s=e.length;n<0&&(n=-n>s?0:s+n),r=r>s?s:r,r<0&&(r+=s),s=n>r?0:r-n>>>0,n>>>=0;for(var u=Array(s);++o<s;)u[o]=e[o+n];return u}function castSlice(e,n,r){var o=e.length;return r=r===void 0?o:r,!n&&r>=o?e:baseSlice(e,n,r)}var rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsVarRange$1="\\ufe0e\\ufe0f",rsZWJ$1="\\u200d",reHasUnicode=RegExp("["+rsZWJ$1+rsAstralRange$1+rsComboRange$1+rsVarRange$1+"]");function hasUnicode(e){return reHasUnicode.test(e)}function asciiToArray(e){return e.split("")}var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsVarRange="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange+"]",rsCombo="["+rsComboRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function unicodeToArray(e){return e.match(reUnicode)||[]}function stringToArray(e){return hasUnicode(e)?unicodeToArray(e):asciiToArray(e)}function createCaseFirst(e){return function(n){n=toString$1(n);var r=hasUnicode(n)?stringToArray(n):void 0,o=r?r[0]:n.charAt(0),s=r?castSlice(r,1).join(""):n.slice(1);return o[e]()+s}}var upperFirst=createCaseFirst("toUpperCase");const upperFirst$1=upperFirst;function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}function stackGet(e){return this.__data__.get(e)}function stackHas(e){return this.__data__.has(e)}var LARGE_ARRAY_SIZE=200;function stackSet(e,n){var r=this.__data__;if(r instanceof ListCache){var o=r.__data__;if(!Map$2||o.length<LARGE_ARRAY_SIZE-1)return o.push([e,n]),this.size=++r.size,this;r=this.__data__=new MapCache(o)}return r.set(e,n),this.size=r.size,this}function Stack(e){var n=this.__data__=new ListCache(e);this.size=n.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$2.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(e,n){if(n)return e.slice();var r=e.length,o=allocUnsafe?allocUnsafe(r):new e.constructor(r);return e.copy(o),o}function arrayFilter(e,n){for(var r=-1,o=e==null?0:e.length,s=0,u=[];++r<o;){var d=e[r];n(d,r,e)&&(u[s++]=d)}return u}function stubArray(){return[]}var objectProto$3=Object.prototype,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(e){return e==null?[]:(e=Object(e),arrayFilter(nativeGetSymbols(e),function(n){return propertyIsEnumerable.call(e,n)}))}:stubArray;const getSymbols$1=getSymbols;function baseGetAllKeys(e,n,r){var o=n(e);return isArray$2(e)?o:arrayPush(o,r(e))}function getAllKeys(e){return baseGetAllKeys(e,keys,getSymbols$1)}var DataView$1=getNative(root$2,"DataView");const DataView$2=DataView$1;var Promise$1=getNative(root$2,"Promise");const Promise$2=Promise$1;var Set$1=getNative(root$2,"Set");const Set$2=Set$1;var mapTag$1="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag="[object WeakMap]",dataViewTag$1="[object DataView]",dataViewCtorString=toSource(DataView$2),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$2&&getTag(new DataView$2(new ArrayBuffer(1)))!=dataViewTag$1||Map$2&&getTag(new Map$2)!=mapTag$1||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$1||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag)&&(getTag=function(e){var n=baseGetTag(e),r=n==objectTag$1?e.constructor:void 0,o=r?toSource(r):"";if(o)switch(o){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag}return n});const getTag$1=getTag;var Uint8Array$1=root$2.Uint8Array;const Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(e){var n=new e.constructor(e.byteLength);return new Uint8Array$2(n).set(new Uint8Array$2(e)),n}function cloneTypedArray(e,n){var r=n?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function initCloneObject(e){return typeof e.constructor=="function"&&!isPrototype(e)?baseCreate$1(getPrototype$1(e)):{}}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED),this}function setCacheHas(e){return this.__data__.has(e)}function SetCache(e){var n=-1,r=e==null?0:e.length;for(this.__data__=new MapCache;++n<r;)this.add(e[n])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(e,n){for(var r=-1,o=e==null?0:e.length;++r<o;)if(n(e[r],r,e))return!0;return!1}function cacheHas(e,n){return e.has(n)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(e,n,r,o,s,u){var d=r&COMPARE_PARTIAL_FLAG$5,f=e.length,v=n.length;if(f!=v&&!(d&&v>f))return!1;var m=u.get(e),_=u.get(n);if(m&&_)return m==n&&_==e;var g=-1,y=!0,w=r&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(u.set(e,n),u.set(n,e);++g<f;){var x=e[g],k=n[g];if(o)var S=d?o(k,x,g,n,e,u):o(x,k,g,e,n,u);if(S!==void 0){if(S)continue;y=!1;break}if(w){if(!arraySome(n,function(E,T){if(!cacheHas(w,T)&&(x===E||s(x,E,r,o,u)))return w.push(T)})){y=!1;break}}else if(!(x===k||s(x,k,r,o,u))){y=!1;break}}return u.delete(e),u.delete(n),y}function mapToArray(e){var n=-1,r=Array(e.size);return e.forEach(function(o,s){r[++n]=[s,o]}),r}function setToArray(e){var n=-1,r=Array(e.size);return e.forEach(function(o){r[++n]=o}),r}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag$1="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(e,n,r,o,s,u,d){switch(r){case dataViewTag:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case arrayBufferTag:return!(e.byteLength!=n.byteLength||!u(new Uint8Array$2(e),new Uint8Array$2(n)));case boolTag:case dateTag:case numberTag:return eq(+e,+n);case errorTag:return e.name==n.name&&e.message==n.message;case regexpTag:case stringTag:return e==n+"";case mapTag:var f=mapToArray;case setTag:var v=o&COMPARE_PARTIAL_FLAG$4;if(f||(f=setToArray),e.size!=n.size&&!v)return!1;var m=d.get(e);if(m)return m==n;o|=COMPARE_UNORDERED_FLAG$2,d.set(e,n);var _=equalArrays(f(e),f(n),o,s,u,d);return d.delete(e),_;case symbolTag$1:if(symbolValueOf)return symbolValueOf.call(e)==symbolValueOf.call(n)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$2=Object.prototype,hasOwnProperty$1=objectProto$2.hasOwnProperty;function equalObjects(e,n,r,o,s,u){var d=r&COMPARE_PARTIAL_FLAG$3,f=getAllKeys(e),v=f.length,m=getAllKeys(n),_=m.length;if(v!=_&&!d)return!1;for(var g=v;g--;){var y=f[g];if(!(d?y in n:hasOwnProperty$1.call(n,y)))return!1}var w=u.get(e),x=u.get(n);if(w&&x)return w==n&&x==e;var k=!0;u.set(e,n),u.set(n,e);for(var S=d;++g<v;){y=f[g];var E=e[y],T=n[y];if(o)var M=d?o(T,E,y,n,e,u):o(E,T,y,e,n,u);if(!(M===void 0?E===T||s(E,T,r,o,u):M)){k=!1;break}S||(S=y=="constructor")}if(k&&!S){var I=e.constructor,F=n.constructor;I!=F&&"constructor"in e&&"constructor"in n&&!(typeof I=="function"&&I instanceof I&&typeof F=="function"&&F instanceof F)&&(k=!1)}return u.delete(e),u.delete(n),k}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto$1=Object.prototype,hasOwnProperty=objectProto$1.hasOwnProperty;function baseIsEqualDeep(e,n,r,o,s,u){var d=isArray$2(e),f=isArray$2(n),v=d?arrayTag:getTag$1(e),m=f?arrayTag:getTag$1(n);v=v==argsTag?objectTag:v,m=m==argsTag?objectTag:m;var _=v==objectTag,g=m==objectTag,y=v==m;if(y&&isBuffer$2(e)){if(!isBuffer$2(n))return!1;d=!0,_=!1}if(y&&!_)return u||(u=new Stack),d||isTypedArray$2(e)?equalArrays(e,n,r,o,s,u):equalByTag(e,n,v,r,o,s,u);if(!(r&COMPARE_PARTIAL_FLAG$2)){var w=_&&hasOwnProperty.call(e,"__wrapped__"),x=g&&hasOwnProperty.call(n,"__wrapped__");if(w||x){var k=w?e.value():e,S=x?n.value():n;return u||(u=new Stack),s(k,S,r,o,u)}}return y?(u||(u=new Stack),equalObjects(e,n,r,o,s,u)):!1}function baseIsEqual(e,n,r,o,s){return e===n?!0:e==null||n==null||!isObjectLike$1(e)&&!isObjectLike$1(n)?e!==e&&n!==n:baseIsEqualDeep(e,n,r,o,baseIsEqual,s)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(e,n,r,o){var s=r.length,u=s,d=!o;if(e==null)return!u;for(e=Object(e);s--;){var f=r[s];if(d&&f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}for(;++s<u;){f=r[s];var v=f[0],m=e[v],_=f[1];if(d&&f[2]){if(m===void 0&&!(v in e))return!1}else{var g=new Stack;if(o)var y=o(m,_,v,e,n,g);if(!(y===void 0?baseIsEqual(_,m,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,o,g):y))return!1}}return!0}function isStrictComparable(e){return e===e&&!isObject$2(e)}function getMatchData(e){for(var n=keys(e),r=n.length;r--;){var o=n[r],s=e[o];n[r]=[o,s,isStrictComparable(s)]}return n}function matchesStrictComparable(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}function baseMatches(e){var n=getMatchData(e);return n.length==1&&n[0][2]?matchesStrictComparable(n[0][0],n[0][1]):function(r){return r===e||baseIsMatch(r,e,n)}}function baseHasIn(e,n){return e!=null&&n in Object(e)}function hasPath(e,n,r){n=castPath(n,e);for(var o=-1,s=n.length,u=!1;++o<s;){var d=toKey(n[o]);if(!(u=e!=null&&r(e,d)))break;e=e[d]}return u||++o!=s?u:(s=e==null?0:e.length,!!s&&isLength(s)&&isIndex(d,s)&&(isArray$2(e)||isArguments$1(e)))}function hasIn(e,n){return e!=null&&hasPath(e,n,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(e,n){return isKey(e)&&isStrictComparable(n)?matchesStrictComparable(toKey(e),n):function(r){var o=get(r,e);return o===void 0&&o===n?hasIn(r,e):baseIsEqual(n,o,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(e){return function(n){return n==null?void 0:n[e]}}function basePropertyDeep(e){return function(n){return baseGet(n,e)}}function property(e){return isKey(e)?baseProperty(toKey(e)):basePropertyDeep(e)}function baseIteratee(e){return typeof e=="function"?e:e==null?identity:typeof e=="object"?isArray$2(e)?baseMatchesProperty(e[0],e[1]):baseMatches(e):property(e)}function createBaseFor(e){return function(n,r,o){for(var s=-1,u=Object(n),d=o(n),f=d.length;f--;){var v=d[e?f:++s];if(r(u[v],v,u)===!1)break}return n}}var baseFor=createBaseFor();const baseFor$1=baseFor;function baseForOwn(e,n){return e&&baseFor$1(e,n,keys)}function createBaseEach(e,n){return function(r,o){if(r==null)return r;if(!isArrayLike(r))return e(r,o);for(var s=r.length,u=n?s:-1,d=Object(r);(n?u--:++u<s)&&o(d[u],u,d)!==!1;);return r}}var baseEach=createBaseEach(baseForOwn);const baseEach$1=baseEach;function assignMergeValue(e,n,r){(r!==void 0&&!eq(e[n],r)||r===void 0&&!(n in e))&&baseAssignValue(e,n,r)}function isArrayLikeObject(e){return isObjectLike$1(e)&&isArrayLike(e)}function safeGet(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}function toPlainObject(e){return copyObject(e,keysIn(e))}function baseMergeDeep(e,n,r,o,s,u,d){var f=safeGet(e,r),v=safeGet(n,r),m=d.get(v);if(m){assignMergeValue(e,r,m);return}var _=u?u(f,v,r+"",e,n,d):void 0,g=_===void 0;if(g){var y=isArray$2(v),w=!y&&isBuffer$2(v),x=!y&&!w&&isTypedArray$2(v);_=v,y||w||x?isArray$2(f)?_=f:isArrayLikeObject(f)?_=copyArray(f):w?(g=!1,_=cloneBuffer(v,!0)):x?(g=!1,_=cloneTypedArray(v,!0)):_=[]:isPlainObject$2(v)||isArguments$1(v)?(_=f,isArguments$1(f)?_=toPlainObject(f):(!isObject$2(f)||isFunction$1(f))&&(_=initCloneObject(v))):g=!1}g&&(d.set(v,_),s(_,v,o,u,d),d.delete(v)),assignMergeValue(e,r,_)}function baseMerge(e,n,r,o,s){e!==n&&baseFor$1(n,function(u,d){if(s||(s=new Stack),isObject$2(u))baseMergeDeep(e,n,d,r,baseMerge,o,s);else{var f=o?o(safeGet(e,d),u,d+"",e,n,s):void 0;f===void 0&&(f=u),assignMergeValue(e,d,f)}},keysIn)}function baseMap(e,n){var r=-1,o=isArrayLike(e)?Array(e.length):[];return baseEach$1(e,function(s,u,d){o[++r]=n(s,u,d)}),o}function map(e,n){var r=isArray$2(e)?arrayMap:baseMap;return r(e,baseIteratee(n))}var merge$2=createAssigner(function(e,n,r){baseMerge(e,n,r)});const merge$3=merge$2,commonVariables$6={fontFamily:'v-sans, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontFamilyMono:"v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace",fontWeight:"400",fontWeightStrong:"500",cubicBezierEaseInOut:"cubic-bezier(.4, 0, .2, 1)",cubicBezierEaseOut:"cubic-bezier(0, 0, .2, 1)",cubicBezierEaseIn:"cubic-bezier(.4, 0, 1, 1)",borderRadius:"3px",borderRadiusSmall:"2px",fontSize:"14px",fontSizeMini:"12px",fontSizeTiny:"12px",fontSizeSmall:"14px",fontSizeMedium:"14px",fontSizeLarge:"15px",fontSizeHuge:"16px",lineHeight:"1.6",heightMini:"16px",heightTiny:"22px",heightSmall:"28px",heightMedium:"34px",heightLarge:"40px",heightHuge:"46px"},{fontSize,fontFamily,lineHeight}=commonVariables$6,globalStyle=c$1("body",`
 margin: 0;
 font-size: ${fontSize};
 font-family: ${fontFamily};
 line-height: ${lineHeight};
 -webkit-text-size-adjust: 100%;
 -webkit-tap-highlight-color: transparent;
`,[c$1("input",`
 font-family: inherit;
 font-size: inherit;
 `)]),configProviderInjectionKey="n-config-provider",cssrAnchorMetaName="naive-ui-style";function createTheme(e){return e}function useTheme(e,n,r,o,s,u){const d=useSsrAdapter(),f=inject(configProviderInjectionKey,null);if(r){const m=()=>{const _=u==null?void 0:u.value;r.mount({id:_===void 0?n:_+n,head:!0,props:{bPrefix:_?`.${_}-`:void 0},anchorMetaName:cssrAnchorMetaName,ssr:d}),f!=null&&f.preflightStyleDisabled||globalStyle.mount({id:"n-global",head:!0,anchorMetaName:cssrAnchorMetaName,ssr:d})};d?m():onBeforeMount(m)}return computed(()=>{var m;const{theme:{common:_,self:g,peers:y={}}={},themeOverrides:w={},builtinThemeOverrides:x={}}=s,{common:k,peers:S}=w,{common:E=void 0,[e]:{common:T=void 0,self:M=void 0,peers:I={}}={}}=(f==null?void 0:f.mergedThemeRef.value)||{},{common:F=void 0,[e]:O={}}=(f==null?void 0:f.mergedThemeOverridesRef.value)||{},{common:N,peers:D={}}=O,X=merge$3({},_||T||E||o.common,F,N,k),U=merge$3((m=g||M||o.self)===null||m===void 0?void 0:m(X),x,O,w);return{common:X,self:U,peers:merge$3({},o.peers,I,y),peerOverrides:merge$3({},x.peers,D,S)}})}useTheme.props={theme:Object,themeOverrides:Object,builtinThemeOverrides:Object};const defaultClsPrefix="n";function useConfig(e={},n={defaultBordered:!0}){const r=inject(configProviderInjectionKey,null);return{inlineThemeDisabled:r==null?void 0:r.inlineThemeDisabled,mergedRtlRef:r==null?void 0:r.mergedRtlRef,mergedComponentPropsRef:r==null?void 0:r.mergedComponentPropsRef,mergedBreakpointsRef:r==null?void 0:r.mergedBreakpointsRef,mergedBorderedRef:computed(()=>{var o,s;const{bordered:u}=e;return u!==void 0?u:(s=(o=r==null?void 0:r.mergedBorderedRef.value)!==null&&o!==void 0?o:n.defaultBordered)!==null&&s!==void 0?s:!0}),mergedClsPrefixRef:computed(()=>(r==null?void 0:r.mergedClsPrefixRef.value)||defaultClsPrefix),namespaceRef:computed(()=>r==null?void 0:r.mergedNamespaceRef.value)}}const enUS={name:"en-US",global:{undo:"Undo",redo:"Redo",confirm:"Confirm",clear:"Clear"},Popconfirm:{positiveText:"Confirm",negativeText:"Cancel"},Cascader:{placeholder:"Please Select",loading:"Loading",loadingRequiredMessage:e=>`Please load all ${e}'s descendants before checking it.`},Time:{dateFormat:"yyyy-MM-dd",dateTimeFormat:"yyyy-MM-dd HH:mm:ss"},DatePicker:{yearFormat:"yyyy",monthFormat:"MMM",dayFormat:"eeeeee",yearTypeFormat:"yyyy",monthTypeFormat:"yyyy-MM",dateFormat:"yyyy-MM-dd",dateTimeFormat:"yyyy-MM-dd HH:mm:ss",quarterFormat:"yyyy-qqq",clear:"Clear",now:"Now",confirm:"Confirm",selectTime:"Select Time",selectDate:"Select Date",datePlaceholder:"Select Date",datetimePlaceholder:"Select Date and Time",monthPlaceholder:"Select Month",yearPlaceholder:"Select Year",quarterPlaceholder:"Select Quarter",startDatePlaceholder:"Start Date",endDatePlaceholder:"End Date",startDatetimePlaceholder:"Start Date and Time",endDatetimePlaceholder:"End Date and Time",startMonthPlaceholder:"Start Month",endMonthPlaceholder:"End Month",monthBeforeYear:!0,firstDayOfWeek:6,today:"Today"},DataTable:{checkTableAll:"Select all in the table",uncheckTableAll:"Unselect all in the table",confirm:"Confirm",clear:"Clear"},LegacyTransfer:{sourceTitle:"Source",targetTitle:"Target"},Transfer:{selectAll:"Select all",unselectAll:"Unselect all",clearAll:"Clear",total:e=>`Total ${e} items`,selected:e=>`${e} items selected`},Empty:{description:"No Data"},Select:{placeholder:"Please Select"},TimePicker:{placeholder:"Select Time",positiveText:"OK",negativeText:"Cancel",now:"Now"},Pagination:{goto:"Goto",selectionSuffix:"page"},DynamicTags:{add:"Add"},Log:{loading:"Loading"},Input:{placeholder:"Please Input"},InputNumber:{placeholder:"Please Input"},DynamicInput:{create:"Create"},ThemeEditor:{title:"Theme Editor",clearAllVars:"Clear All Variables",clearSearch:"Clear Search",filterCompName:"Filter Component Name",filterVarName:"Filter Variable Name",import:"Import",export:"Export",restore:"Reset to Default"},Image:{tipPrevious:"Previous picture (\u2190)",tipNext:"Next picture (\u2192)",tipCounterclockwise:"Counterclockwise",tipClockwise:"Clockwise",tipZoomOut:"Zoom out",tipZoomIn:"Zoom in",tipClose:"Close (Esc)",tipOriginalSize:"Zoom to original size"}},enUS$1=enUS;function buildFormatLongFn(e){return function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.width?String(n.width):e.defaultWidth,o=e.formats[r]||e.formats[e.defaultWidth];return o}}function buildLocalizeFn(e){return function(n,r){var o=r!=null&&r.context?String(r.context):"standalone",s;if(o==="formatting"&&e.formattingValues){var u=e.defaultFormattingWidth||e.defaultWidth,d=r!=null&&r.width?String(r.width):u;s=e.formattingValues[d]||e.formattingValues[u]}else{var f=e.defaultWidth,v=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[v]||e.values[f]}var m=e.argumentCallback?e.argumentCallback(n):n;return s[m]}}function buildMatchFn(e){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.width,s=o&&e.matchPatterns[o]||e.matchPatterns[e.defaultMatchWidth],u=n.match(s);if(!u)return null;var d=u[0],f=o&&e.parsePatterns[o]||e.parsePatterns[e.defaultParseWidth],v=Array.isArray(f)?findIndex$1(f,function(g){return g.test(d)}):findKey(f,function(g){return g.test(d)}),m;m=e.valueCallback?e.valueCallback(v):v,m=r.valueCallback?r.valueCallback(m):m;var _=n.slice(d.length);return{value:m,rest:_}}}function findKey(e,n){for(var r in e)if(e.hasOwnProperty(r)&&n(e[r]))return r}function findIndex$1(e,n){for(var r=0;r<e.length;r++)if(n(e[r]))return r}function buildMatchPatternFn(e){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=n.match(e.matchPattern);if(!o)return null;var s=o[0],u=n.match(e.parsePattern);if(!u)return null;var d=e.valueCallback?e.valueCallback(u[0]):u[0];d=r.valueCallback?r.valueCallback(d):d;var f=n.slice(s.length);return{value:d,rest:f}}}var formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance=function(n,r,o){var s,u=formatDistanceLocale[n];return typeof u=="string"?s=u:r===1?s=u.one:s=u.other.replace("{{count}}",r.toString()),o!=null&&o.addSuffix?o.comparison&&o.comparison>0?"in "+s:s+" ago":s};const formatDistance$1=formatDistance;var dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})};const formatLong$1=formatLong;var formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=function(n,r,o,s){return formatRelativeLocale[n]};const formatRelative$1=formatRelative;var eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=function(n,r){var o=Number(n),s=o%100;if(s>20||s<10)switch(s%10){case 1:return o+"st";case 2:return o+"nd";case 3:return o+"rd"}return o+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:function(n){return n-1}}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};const localize$1=localize;var matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:function(n){return parseInt(n,10)}}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:function(n){return n+1}}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})};const match$1=match;var locale$1={code:"en-US",formatDistance:formatDistance$1,formatLong:formatLong$1,formatRelative:formatRelative$1,localize:localize$1,match:match$1,options:{weekStartsOn:0,firstWeekContainsDate:1}};const defaultLocale=locale$1,dateEnUs={name:"en-US",locale:defaultLocale},dateEnUS=dateEnUs;function useLocale(e){const{mergedLocaleRef:n,mergedDateLocaleRef:r}=inject(configProviderInjectionKey,null)||{},o=computed(()=>{var u,d;return(d=(u=n==null?void 0:n.value)===null||u===void 0?void 0:u[e])!==null&&d!==void 0?d:enUS$1[e]});return{dateLocaleRef:computed(()=>{var u;return(u=r==null?void 0:r.value)!==null&&u!==void 0?u:dateEnUS}),localeRef:o}}function useStyle(e,n,r){if(!n)return;const o=useSsrAdapter(),s=inject(configProviderInjectionKey,null),u=()=>{const d=r==null?void 0:r.value;n.mount({id:d===void 0?e:d+e,head:!0,anchorMetaName:cssrAnchorMetaName,props:{bPrefix:d?`.${d}-`:void 0},ssr:o}),s!=null&&s.preflightStyleDisabled||globalStyle.mount({id:"n-global",head:!0,anchorMetaName:cssrAnchorMetaName,ssr:o})};o?u():onBeforeMount(u)}function useThemeClass(e,n,r,o){var s;r||throwError("useThemeClass","cssVarsRef is not passed");const u=(s=inject(configProviderInjectionKey,null))===null||s===void 0?void 0:s.mergedThemeHashRef,d=ref(""),f=useSsrAdapter();let v;const m=`__${e}`,_=()=>{let g=m;const y=n?n.value:void 0,w=u==null?void 0:u.value;w&&(g+="-"+w),y&&(g+="-"+y);const{themeOverrides:x,builtinThemeOverrides:k}=o;x&&(g+="-"+murmur2(JSON.stringify(x))),k&&(g+="-"+murmur2(JSON.stringify(k))),d.value=g,v=()=>{const S=r.value;let E="";for(const T in S)E+=`${T}: ${S[T]};`;c$1(`.${g}`,E).mount({id:g,ssr:f}),v=void 0}};return watchEffect(()=>{_()}),{themeClass:d,onRender:()=>{v==null||v()}}}function useRtl(e,n,r){if(!n)return;const o=useSsrAdapter(),s=computed(()=>{const{value:d}=n;if(!d)return;const f=d[e];if(!!f)return f}),u=()=>{watchEffect(()=>{const{value:d}=r,f=`${d}${e}Rtl`;if(exists(f,o))return;const{value:v}=s;!v||v.style.mount({id:f,head:!0,anchorMetaName:cssrAnchorMetaName,props:{bPrefix:d?`.${d}-`:void 0},ssr:o})})};return o?u():onBeforeMount(u),s}function replaceable(e,n){return defineComponent({name:upperFirst$1(e),setup(){var r;const o=(r=inject(configProviderInjectionKey,null))===null||r===void 0?void 0:r.mergedIconsRef;return()=>{var s;const u=(s=o==null?void 0:o.value)===null||s===void 0?void 0:s[e];return u?u():n}}})}const FinishedIcon=defineComponent({name:"Checkmark",render(){return h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},h("g",{fill:"none"},h("path",{d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032z",fill:"currentColor"})))}}),ErrorIcon$1=replaceable("close",h("svg",{viewBox:"0 0 12 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0},h("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},h("g",{fill:"currentColor","fill-rule":"nonzero"},h("path",{d:"M2.08859116,2.2156945 L2.14644661,2.14644661 C2.32001296,1.97288026 2.58943736,1.95359511 2.7843055,2.08859116 L2.85355339,2.14644661 L6,5.293 L9.14644661,2.14644661 C9.34170876,1.95118446 9.65829124,1.95118446 9.85355339,2.14644661 C10.0488155,2.34170876 10.0488155,2.65829124 9.85355339,2.85355339 L6.707,6 L9.85355339,9.14644661 C10.0271197,9.32001296 10.0464049,9.58943736 9.91140884,9.7843055 L9.85355339,9.85355339 C9.67998704,10.0271197 9.41056264,10.0464049 9.2156945,9.91140884 L9.14644661,9.85355339 L6,6.707 L2.85355339,9.85355339 C2.65829124,10.0488155 2.34170876,10.0488155 2.14644661,9.85355339 C1.95118446,9.65829124 1.95118446,9.34170876 2.14644661,9.14644661 L5.293,6 L2.14644661,2.85355339 C1.97288026,2.67998704 1.95359511,2.41056264 2.08859116,2.2156945 L2.14644661,2.14644661 L2.08859116,2.2156945 Z"}))))),EmptyIcon=defineComponent({name:"Empty",render(){return h("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h("path",{d:"M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z",fill:"currentColor"}),h("path",{d:"M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z",fill:"currentColor"}))}}),ErrorIcon=replaceable("error",h("svg",{viewBox:"0 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},h("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},h("g",{"fill-rule":"nonzero"},h("path",{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M17.8838835,16.1161165 L17.7823881,16.0249942 C17.3266086,15.6583353 16.6733914,15.6583353 16.2176119,16.0249942 L16.1161165,16.1161165 L16.0249942,16.2176119 C15.6583353,16.6733914 15.6583353,17.3266086 16.0249942,17.7823881 L16.1161165,17.8838835 L22.233,24 L16.1161165,30.1161165 L16.0249942,30.2176119 C15.6583353,30.6733914 15.6583353,31.3266086 16.0249942,31.7823881 L16.1161165,31.8838835 L16.2176119,31.9750058 C16.6733914,32.3416647 17.3266086,32.3416647 17.7823881,31.9750058 L17.8838835,31.8838835 L24,25.767 L30.1161165,31.8838835 L30.2176119,31.9750058 C30.6733914,32.3416647 31.3266086,32.3416647 31.7823881,31.9750058 L31.8838835,31.8838835 L31.9750058,31.7823881 C32.3416647,31.3266086 32.3416647,30.6733914 31.9750058,30.2176119 L31.8838835,30.1161165 L25.767,24 L31.8838835,17.8838835 L31.9750058,17.7823881 C32.3416647,17.3266086 32.3416647,16.6733914 31.9750058,16.2176119 L31.8838835,16.1161165 L31.7823881,16.0249942 C31.3266086,15.6583353 30.6733914,15.6583353 30.2176119,16.0249942 L30.1161165,16.1161165 L24,22.233 L17.8838835,16.1161165 L17.7823881,16.0249942 L17.8838835,16.1161165 Z"}))))),InfoIcon=replaceable("info",h("svg",{viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},h("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},h("g",{"fill-rule":"nonzero"},h("path",{d:"M14,2 C20.6274,2 26,7.37258 26,14 C26,20.6274 20.6274,26 14,26 C7.37258,26 2,20.6274 2,14 C2,7.37258 7.37258,2 14,2 Z M14,11 C13.4477,11 13,11.4477 13,12 L13,12 L13,20 C13,20.5523 13.4477,21 14,21 C14.5523,21 15,20.5523 15,20 L15,20 L15,12 C15,11.4477 14.5523,11 14,11 Z M14,6.75 C13.3096,6.75 12.75,7.30964 12.75,8 C12.75,8.69036 13.3096,9.25 14,9.25 C14.6904,9.25 15.25,8.69036 15.25,8 C15.25,7.30964 14.6904,6.75 14,6.75 Z"}))))),SuccessIcon=replaceable("success",h("svg",{viewBox:"0 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},h("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},h("g",{"fill-rule":"nonzero"},h("path",{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M32.6338835,17.6161165 C32.1782718,17.1605048 31.4584514,17.1301307 30.9676119,17.5249942 L30.8661165,17.6161165 L20.75,27.732233 L17.1338835,24.1161165 C16.6457281,23.6279612 15.8542719,23.6279612 15.3661165,24.1161165 C14.9105048,24.5717282 14.8801307,25.2915486 15.2749942,25.7823881 L15.3661165,25.8838835 L19.8661165,30.3838835 C20.3217282,30.8394952 21.0415486,30.8698693 21.5323881,30.4750058 L21.6338835,30.3838835 L32.6338835,19.3838835 C33.1220388,18.8957281 33.1220388,18.1042719 32.6338835,17.6161165 Z"}))))),WarningIcon=replaceable("warning",h("svg",{viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},h("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},h("g",{"fill-rule":"nonzero"},h("path",{d:"M12,2 C17.523,2 22,6.478 22,12 C22,17.522 17.523,22 12,22 C6.477,22 2,17.522 2,12 C2,6.478 6.477,2 12,2 Z M12.0018002,15.0037242 C11.450254,15.0037242 11.0031376,15.4508407 11.0031376,16.0023869 C11.0031376,16.553933 11.450254,17.0010495 12.0018002,17.0010495 C12.5533463,17.0010495 13.0004628,16.553933 13.0004628,16.0023869 C13.0004628,15.4508407 12.5533463,15.0037242 12.0018002,15.0037242 Z M11.99964,7 C11.4868042,7.00018474 11.0642719,7.38637706 11.0066858,7.8837365 L11,8.00036004 L11.0018003,13.0012393 L11.00857,13.117858 C11.0665141,13.6151758 11.4893244,14.0010638 12.0021602,14.0008793 C12.514996,14.0006946 12.9375283,13.6145023 12.9951144,13.1171428 L13.0018002,13.0005193 L13,7.99964009 L12.9932303,7.8830214 C12.9352861,7.38570354 12.5124758,6.99981552 11.99964,7 Z"}))))),ChevronDownIcon=defineComponent({name:"ChevronDown",render(){return h("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h("path",{d:"M3.14645 5.64645C3.34171 5.45118 3.65829 5.45118 3.85355 5.64645L8 9.79289L12.1464 5.64645C12.3417 5.45118 12.6583 5.45118 12.8536 5.64645C13.0488 5.84171 13.0488 6.15829 12.8536 6.35355L8.35355 10.8536C8.15829 11.0488 7.84171 11.0488 7.64645 10.8536L3.14645 6.35355C2.95118 6.15829 2.95118 5.84171 3.14645 5.64645Z",fill:"currentColor"}))}}),ClearIcon=replaceable("clear",h("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},h("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},h("g",{fill:"currentColor","fill-rule":"nonzero"},h("path",{d:"M8,2 C11.3137085,2 14,4.6862915 14,8 C14,11.3137085 11.3137085,14 8,14 C4.6862915,14 2,11.3137085 2,8 C2,4.6862915 4.6862915,2 8,2 Z M6.5343055,5.83859116 C6.33943736,5.70359511 6.07001296,5.72288026 5.89644661,5.89644661 L5.89644661,5.89644661 L5.83859116,5.9656945 C5.70359511,6.16056264 5.72288026,6.42998704 5.89644661,6.60355339 L5.89644661,6.60355339 L7.293,8 L5.89644661,9.39644661 L5.83859116,9.4656945 C5.70359511,9.66056264 5.72288026,9.92998704 5.89644661,10.1035534 L5.89644661,10.1035534 L5.9656945,10.1614088 C6.16056264,10.2964049 6.42998704,10.2771197 6.60355339,10.1035534 L6.60355339,10.1035534 L8,8.707 L9.39644661,10.1035534 L9.4656945,10.1614088 C9.66056264,10.2964049 9.92998704,10.2771197 10.1035534,10.1035534 L10.1035534,10.1035534 L10.1614088,10.0343055 C10.2964049,9.83943736 10.2771197,9.57001296 10.1035534,9.39644661 L10.1035534,9.39644661 L8.707,8 L10.1035534,6.60355339 L10.1614088,6.5343055 C10.2964049,6.33943736 10.2771197,6.07001296 10.1035534,5.89644661 L10.1035534,5.89644661 L10.0343055,5.83859116 C9.83943736,5.70359511 9.57001296,5.72288026 9.39644661,5.89644661 L9.39644661,5.89644661 L8,7.293 L6.60355339,5.89644661 Z"}))))),NIconSwitchTransition=defineComponent({name:"BaseIconSwitchTransition",setup(e,{slots:n}){const r=isMounted();return()=>h(Transition,{name:"icon-switch-transition",appear:r.value},n)}}),NFadeInExpandTransition=defineComponent({name:"FadeInExpandTransition",props:{appear:Boolean,group:Boolean,mode:String,onLeave:Function,onAfterLeave:Function,onAfterEnter:Function,width:Boolean,reverse:Boolean},setup(e,{slots:n}){function r(f){e.width?f.style.maxWidth=`${f.offsetWidth}px`:f.style.maxHeight=`${f.offsetHeight}px`,f.offsetWidth}function o(f){e.width?f.style.maxWidth="0":f.style.maxHeight="0",f.offsetWidth;const{onLeave:v}=e;v&&v()}function s(f){e.width?f.style.maxWidth="":f.style.maxHeight="";const{onAfterLeave:v}=e;v&&v()}function u(f){if(f.style.transition="none",e.width){const v=f.offsetWidth;f.style.maxWidth="0",f.offsetWidth,f.style.transition="",f.style.maxWidth=`${v}px`}else if(e.reverse)f.style.maxHeight=`${f.offsetHeight}px`,f.offsetHeight,f.style.transition="",f.style.maxHeight="0";else{const v=f.offsetHeight;f.style.maxHeight="0",f.offsetWidth,f.style.transition="",f.style.maxHeight=`${v}px`}f.offsetWidth}function d(f){var v;e.width?f.style.maxWidth="":e.reverse||(f.style.maxHeight=""),(v=e.onAfterEnter)===null||v===void 0||v.call(e)}return()=>{const f=e.group?TransitionGroup:Transition;return h(f,{name:e.width?"fade-in-width-expand-transition":"fade-in-height-expand-transition",mode:e.mode,appear:e.appear,onEnter:u,onAfterEnter:d,onBeforeLeave:r,onLeave:o,onAfterLeave:s},n)}}}),style$k=cB("base-icon",`
 height: 1em;
 width: 1em;
 line-height: 1em;
 text-align: center;
 display: inline-block;
 position: relative;
 fill: currentColor;
 transform: translateZ(0);
`,[c$1("svg",`
 height: 1em;
 width: 1em;
 `)]),NBaseIcon=defineComponent({name:"BaseIcon",props:{role:String,ariaLabel:String,ariaDisabled:{type:Boolean,default:void 0},ariaHidden:{type:Boolean,default:void 0},clsPrefix:{type:String,required:!0},onClick:Function,onMousedown:Function,onMouseup:Function},setup(e){useStyle("-base-icon",style$k,toRef(e,"clsPrefix"))},render(){return h("i",{class:`${this.clsPrefix}-base-icon`,onClick:this.onClick,onMousedown:this.onMousedown,onMouseup:this.onMouseup,role:this.role,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,"aria-disabled":this.ariaDisabled},this.$slots)}}),style$j=cB("base-close",`
 display: flex;
 align-items: center;
 justify-content: center;
 cursor: pointer;
 background-color: transparent;
 color: var(--n-close-icon-color);
 border-radius: var(--n-close-border-radius);
 height: var(--n-close-size);
 width: var(--n-close-size);
 font-size: var(--n-close-icon-size);
 outline: none;
 border: none;
 position: relative;
 padding: 0;
`,[cM("absolute",`
 height: var(--n-close-icon-size);
 width: var(--n-close-icon-size);
 `),c$1("&::before",`
 content: "";
 position: absolute;
 width: var(--n-close-size);
 height: var(--n-close-size);
 left: 50%;
 top: 50%;
 transform: translateY(-50%) translateX(-50%);
 transition: inherit;
 border-radius: inherit;
 `),cNotM("disabled",[c$1("&:hover",`
 color: var(--n-close-icon-color-hover);
 `),c$1("&:hover::before",`
 background-color: var(--n-close-color-hover);
 `),c$1("&:focus::before",`
 background-color: var(--n-close-color-hover);
 `),c$1("&:active",`
 color: var(--n-close-icon-color-pressed);
 `),c$1("&:active::before",`
 background-color: var(--n-close-color-pressed);
 `)]),cM("disabled",`
 cursor: not-allowed;
 color: var(--n-close-icon-color-disabled);
 background-color: transparent;
 `),cM("round",[c$1("&::before",`
 border-radius: 50%;
 `)])]),NBaseClose=defineComponent({name:"BaseClose",props:{isButtonTag:{type:Boolean,default:!0},clsPrefix:{type:String,required:!0},disabled:{type:Boolean,default:void 0},focusable:{type:Boolean,default:!0},round:Boolean,onClick:Function,absolute:Boolean},setup(e){return useStyle("-base-close",style$j,toRef(e,"clsPrefix")),()=>{const{clsPrefix:n,disabled:r,absolute:o,round:s,isButtonTag:u}=e;return h(u?"button":"div",{type:u?"button":void 0,tabindex:r||!e.focusable?-1:0,"aria-disabled":r,"aria-label":"close",role:u?void 0:"button",disabled:r,class:[`${n}-base-close`,o&&`${n}-base-close--absolute`,r&&`${n}-base-close--disabled`,s&&`${n}-base-close--round`],onMousedown:f=>{e.focusable||f.preventDefault()},onClick:e.onClick},h(NBaseIcon,{clsPrefix:n},{default:()=>h(ErrorIcon$1,null)}))}}}),FocusDetector=defineComponent({props:{onFocus:Function,onBlur:Function},setup(e){return()=>h("div",{style:"width: 0; height: 0",tabindex:0,onFocus:e.onFocus,onBlur:e.onBlur})}}),{cubicBezierEaseInOut:cubicBezierEaseInOut$3}=commonVariables$6;function iconSwitchTransition({originalTransform:e="",left:n=0,top:r=0,transition:o=`all .3s ${cubicBezierEaseInOut$3} !important`}={}){return[c$1("&.icon-switch-transition-enter-from, &.icon-switch-transition-leave-to",{transform:e+" scale(0.75)",left:n,top:r,opacity:0}),c$1("&.icon-switch-transition-enter-to, &.icon-switch-transition-leave-from",{transform:`scale(1) ${e}`,left:n,top:r,opacity:1}),c$1("&.icon-switch-transition-enter-active, &.icon-switch-transition-leave-active",{transformOrigin:"center",position:"absolute",left:n,top:r,transition:o})]}const style$i=c$1([c$1("@keyframes loading-container-rotate",`
 to {
 -webkit-transform: rotate(360deg);
 transform: rotate(360deg);
 }
 `),c$1("@keyframes loading-layer-rotate",`
 12.5% {
 -webkit-transform: rotate(135deg);
 transform: rotate(135deg);
 }
 25% {
 -webkit-transform: rotate(270deg);
 transform: rotate(270deg);
 }
 37.5% {
 -webkit-transform: rotate(405deg);
 transform: rotate(405deg);
 }
 50% {
 -webkit-transform: rotate(540deg);
 transform: rotate(540deg);
 }
 62.5% {
 -webkit-transform: rotate(675deg);
 transform: rotate(675deg);
 }
 75% {
 -webkit-transform: rotate(810deg);
 transform: rotate(810deg);
 }
 87.5% {
 -webkit-transform: rotate(945deg);
 transform: rotate(945deg);
 }
 100% {
 -webkit-transform: rotate(1080deg);
 transform: rotate(1080deg);
 } 
 `),c$1("@keyframes loading-left-spin",`
 from {
 -webkit-transform: rotate(265deg);
 transform: rotate(265deg);
 }
 50% {
 -webkit-transform: rotate(130deg);
 transform: rotate(130deg);
 }
 to {
 -webkit-transform: rotate(265deg);
 transform: rotate(265deg);
 }
 `),c$1("@keyframes loading-right-spin",`
 from {
 -webkit-transform: rotate(-265deg);
 transform: rotate(-265deg);
 }
 50% {
 -webkit-transform: rotate(-130deg);
 transform: rotate(-130deg);
 }
 to {
 -webkit-transform: rotate(-265deg);
 transform: rotate(-265deg);
 }
 `),cB("base-loading",`
 position: relative;
 line-height: 0;
 width: 1em;
 height: 1em;
 `,[cE("transition-wrapper",`
 position: absolute;
 width: 100%;
 height: 100%;
 `,[iconSwitchTransition()]),cE("container",`
 display: inline-flex;
 position: relative;
 direction: ltr;
 line-height: 0;
 animation: loading-container-rotate 1568.2352941176ms linear infinite;
 font-size: 0;
 letter-spacing: 0;
 white-space: nowrap;
 opacity: 1;
 width: 100%;
 height: 100%;
 `,[cE("svg",`
 stroke: var(--n-text-color);
 fill: transparent;
 position: absolute;
 height: 100%;
 overflow: hidden;
 `),cE("container-layer",`
 position: absolute;
 width: 100%;
 height: 100%;
 animation: loading-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both;
 `,[cE("container-layer-left",`
 display: inline-flex;
 position: relative;
 width: 50%;
 height: 100%;
 overflow: hidden;
 `,[cE("svg",`
 animation: loading-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both;
 width: 200%;
 `)]),cE("container-layer-patch",`
 position: absolute;
 top: 0;
 left: 47.5%;
 box-sizing: border-box;
 width: 5%;
 height: 100%;
 overflow: hidden;
 `,[cE("svg",`
 left: -900%;
 width: 2000%;
 transform: rotate(180deg);
 `)]),cE("container-layer-right",`
 display: inline-flex;
 position: relative;
 width: 50%;
 height: 100%;
 overflow: hidden;
 `,[cE("svg",`
 animation: loading-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both;
 left: -100%;
 width: 200%;
 `)])])]),cE("placeholder",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[iconSwitchTransition({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})])])]),exposedLoadingProps={strokeWidth:{type:Number,default:28},stroke:{type:String,default:void 0}},NBaseLoading=defineComponent({name:"BaseLoading",props:Object.assign({clsPrefix:{type:String,required:!0},show:{type:Boolean,default:!0},scale:{type:Number,default:1},radius:{type:Number,default:100}},exposedLoadingProps),setup(e){useStyle("-base-loading",style$i,toRef(e,"clsPrefix"))},render(){const{clsPrefix:e,radius:n,strokeWidth:r,stroke:o,scale:s}=this,u=n/s;return h("div",{class:`${e}-base-loading`,role:"img","aria-label":"loading"},h(NIconSwitchTransition,null,{default:()=>this.show?h("div",{key:"icon",class:`${e}-base-loading__transition-wrapper`},h("div",{class:`${e}-base-loading__container`},h("div",{class:`${e}-base-loading__container-layer`},h("div",{class:`${e}-base-loading__container-layer-left`},h("svg",{class:`${e}-base-loading__svg`,viewBox:`0 0 ${2*u} ${2*u}`,xmlns:"http://www.w3.org/2000/svg",style:{color:o}},h("circle",{fill:"none",stroke:"currentColor","stroke-width":r,"stroke-linecap":"round",cx:u,cy:u,r:n-r/2,"stroke-dasharray":4.91*n,"stroke-dashoffset":2.46*n}))),h("div",{class:`${e}-base-loading__container-layer-patch`},h("svg",{class:`${e}-base-loading__svg`,viewBox:`0 0 ${2*u} ${2*u}`,xmlns:"http://www.w3.org/2000/svg",style:{color:o}},h("circle",{fill:"none",stroke:"currentColor","stroke-width":r,"stroke-linecap":"round",cx:u,cy:u,r:n-r/2,"stroke-dasharray":4.91*n,"stroke-dashoffset":2.46*n}))),h("div",{class:`${e}-base-loading__container-layer-right`},h("svg",{class:`${e}-base-loading__svg`,viewBox:`0 0 ${2*u} ${2*u}`,xmlns:"http://www.w3.org/2000/svg",style:{color:o}},h("circle",{fill:"none",stroke:"currentColor","stroke-width":r,"stroke-linecap":"round",cx:u,cy:u,r:n-r/2,"stroke-dasharray":4.91*n,"stroke-dashoffset":2.46*n})))))):h("div",{key:"placeholder",class:`${e}-base-loading__placeholder`},this.$slots)}))}});function toArray$1(e){return Array.isArray(e)?e:[e]}const TRAVERSE_COMMAND={STOP:"STOP"};function traverseWithCb(e,n){const r=n(e);e.children!==void 0&&r!==TRAVERSE_COMMAND.STOP&&e.children.forEach(o=>traverseWithCb(o,n))}function getNonLeafKeys(e,n={}){const{preserveGroup:r=!1}=n,o=[],s=r?d=>{d.isLeaf||(o.push(d.key),u(d.children))}:d=>{d.isLeaf||(d.isGroup||o.push(d.key),u(d.children))};function u(d){d.forEach(s)}return u(e),o}function isLeaf(e,n){const{isLeaf:r}=e;return r!==void 0?r:!n(e)}function defaultGetChildren(e){return e.children}function defaultGetKey(e){return e.key}function isIgnored(){return!1}function isShallowLoaded(e,n){const{isLeaf:r}=e;return!(r===!1&&!Array.isArray(n(e)))}function isDisabled(e){return e.disabled===!0}function isExpilicitlyNotLoaded(e,n){return e.isLeaf===!1&&!Array.isArray(n(e))}function unwrapCheckedKeys(e){var n;return e==null?[]:Array.isArray(e)?e:(n=e.checkedKeys)!==null&&n!==void 0?n:[]}function unwrapIndeterminateKeys(e){var n;return e==null||Array.isArray(e)?[]:(n=e.indeterminateKeys)!==null&&n!==void 0?n:[]}function merge$1(e,n){const r=new Set(e);return n.forEach(o=>{r.has(o)||r.add(o)}),Array.from(r)}function minus(e,n){const r=new Set(e);return n.forEach(o=>{r.has(o)&&r.delete(o)}),Array.from(r)}function isGroup(e){return(e==null?void 0:e.type)==="group"}function createIndexGetter(e){const n=new Map;return e.forEach((r,o)=>{n.set(r.key,o)}),r=>{var o;return(o=n.get(r))!==null&&o!==void 0?o:null}}class SubtreeNotLoadedError extends Error{constructor(){super(),this.message="SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded."}}function getExtendedCheckedKeySetAfterCheck(e,n,r,o){return getExtendedCheckedKeySet(n.concat(e),r,o,!1)}function getAvailableAscendantNodeSet(e,n){const r=new Set;return e.forEach(o=>{const s=n.treeNodeMap.get(o);if(s!==void 0){let u=s.parent;for(;u!==null&&!(u.disabled||r.has(u.key));)r.add(u.key),u=u.parent}}),r}function getExtendedCheckedKeySetAfterUncheck(e,n,r,o){const s=getExtendedCheckedKeySet(n,r,o,!1),u=getExtendedCheckedKeySet(e,r,o,!0),d=getAvailableAscendantNodeSet(e,r),f=[];return s.forEach(v=>{(u.has(v)||d.has(v))&&f.push(v)}),f.forEach(v=>s.delete(v)),s}function getCheckedKeys(e,n){const{checkedKeys:r,keysToCheck:o,keysToUncheck:s,indeterminateKeys:u,cascade:d,leafOnly:f,checkStrategy:v,allowNotLoaded:m}=e;if(!d)return o!==void 0?{checkedKeys:merge$1(r,o),indeterminateKeys:Array.from(u)}:s!==void 0?{checkedKeys:minus(r,s),indeterminateKeys:Array.from(u)}:{checkedKeys:Array.from(r),indeterminateKeys:Array.from(u)};const{levelTreeNodeMap:_}=n;let g;s!==void 0?g=getExtendedCheckedKeySetAfterUncheck(s,r,n,m):o!==void 0?g=getExtendedCheckedKeySetAfterCheck(o,r,n,m):g=getExtendedCheckedKeySet(r,n,m,!1);const y=v==="parent",w=v==="child"||f,x=g,k=new Set,S=Math.max.apply(null,Array.from(_.keys()));for(let E=S;E>=0;E-=1){const T=E===0,M=_.get(E);for(const I of M){if(I.isLeaf)continue;const{key:F,shallowLoaded:O}=I;if(w&&O&&I.children.forEach(U=>{!U.disabled&&!U.isLeaf&&U.shallowLoaded&&x.has(U.key)&&x.delete(U.key)}),I.disabled||!O)continue;let N=!0,D=!1,X=!0;for(const U of I.children){const Z=U.key;if(!U.disabled){if(X&&(X=!1),x.has(Z))D=!0;else if(k.has(Z)){D=!0,N=!1;break}else if(N=!1,D)break}}N&&!X?(y&&I.children.forEach(U=>{!U.disabled&&x.has(U.key)&&x.delete(U.key)}),x.add(F)):D&&k.add(F),T&&w&&x.has(F)&&x.delete(F)}}return{checkedKeys:Array.from(x),indeterminateKeys:Array.from(k)}}function getExtendedCheckedKeySet(e,n,r,o){const{treeNodeMap:s,getChildren:u}=n,d=new Set,f=new Set(e);return e.forEach(v=>{const m=s.get(v);m!==void 0&&traverseWithCb(m,_=>{if(_.disabled)return TRAVERSE_COMMAND.STOP;const{key:g}=_;if(!d.has(g)&&(d.add(g),f.add(g),isExpilicitlyNotLoaded(_.rawNode,u))){if(o)return TRAVERSE_COMMAND.STOP;if(!r)throw new SubtreeNotLoadedError}})}),f}function getPath(e,{includeGroup:n=!1,includeSelf:r=!0},o){var s;const u=o.treeNodeMap;let d=e==null?null:(s=u.get(e))!==null&&s!==void 0?s:null;const f={keyPath:[],treeNodePath:[],treeNode:d};if(d!=null&&d.ignored)return f.treeNode=null,f;for(;d;)!d.ignored&&(n||!d.isGroup)&&f.treeNodePath.push(d),d=d.parent;return f.treeNodePath.reverse(),r||f.treeNodePath.pop(),f.keyPath=f.treeNodePath.map(v=>v.key),f}function getFirstAvailableNode(e){if(e.length===0)return null;const n=e[0];return n.isGroup||n.ignored||n.disabled?n.getNext():n}function rawGetNext(e,n){const r=e.siblings,o=r.length,{index:s}=e;return n?r[(s+1)%o]:s===r.length-1?null:r[s+1]}function move(e,n,{loop:r=!1,includeDisabled:o=!1}={}){const s=n==="prev"?rawGetPrev:rawGetNext,u={reverse:n==="prev"};let d=!1,f=null;function v(m){if(m!==null){if(m===e){if(!d)d=!0;else if(!e.disabled&&!e.isGroup){f=e;return}}else if((!m.disabled||o)&&!m.ignored&&!m.isGroup){f=m;return}if(m.isGroup){const _=getChild$1(m,u);_!==null?f=_:v(s(m,r))}else{const _=s(m,!1);if(_!==null)v(_);else{const g=rawGetParent(m);g!=null&&g.isGroup?v(s(g,r)):r&&v(s(m,!0))}}}}return v(e),f}function rawGetPrev(e,n){const r=e.siblings,o=r.length,{index:s}=e;return n?r[(s-1+o)%o]:s===0?null:r[s-1]}function rawGetParent(e){return e.parent}function getChild$1(e,n={}){const{reverse:r=!1}=n,{children:o}=e;if(o){const{length:s}=o,u=r?s-1:0,d=r?-1:s,f=r?-1:1;for(let v=u;v!==d;v+=f){const m=o[v];if(!m.disabled&&!m.ignored)if(m.isGroup){const _=getChild$1(m,n);if(_!==null)return _}else return m}}return null}const moveMethods={getChild(){return this.ignored?null:getChild$1(this)},getParent(){const{parent:e}=this;return e!=null&&e.isGroup?e.getParent():e},getNext(e={}){return move(this,"next",e)},getPrev(e={}){return move(this,"prev",e)}};function flatten(e,n){const r=n?new Set(n):void 0,o=[];function s(u){u.forEach(d=>{o.push(d),!(d.isLeaf||!d.children||d.ignored)&&(d.isGroup||r===void 0||r.has(d.key))&&s(d.children)})}return s(e),o}function contains(e,n){const r=e.key;for(;n;){if(n.key===r)return!0;n=n.parent}return!1}function createTreeNodes(e,n,r,o,s,u=null,d=0){const f=[];return e.forEach((v,m)=>{var _;const g=Object.create(o);if(g.rawNode=v,g.siblings=f,g.level=d,g.index=m,g.isFirstChild=m===0,g.isLastChild=m+1===e.length,g.parent=u,!g.ignored){const y=s(v);Array.isArray(y)&&(g.children=createTreeNodes(y,n,r,o,s,g,d+1))}f.push(g),n.set(g.key,g),r.has(d)||r.set(d,[]),(_=r.get(d))===null||_===void 0||_.push(g)}),f}function createTreeMate(e,n={}){var r;const o=new Map,s=new Map,{getDisabled:u=isDisabled,getIgnored:d=isIgnored,getIsGroup:f=isGroup,getKey:v=defaultGetKey}=n,m=(r=n.getChildren)!==null&&r!==void 0?r:defaultGetChildren,_=n.ignoreEmptyChildren?I=>{const F=m(I);return Array.isArray(F)?F.length?F:null:F}:m,g=Object.assign({get key(){return v(this.rawNode)},get disabled(){return u(this.rawNode)},get isGroup(){return f(this.rawNode)},get isLeaf(){return isLeaf(this.rawNode,_)},get shallowLoaded(){return isShallowLoaded(this.rawNode,_)},get ignored(){return d(this.rawNode)},contains(I){return contains(this,I)}},moveMethods),y=createTreeNodes(e,o,s,g,_);function w(I){if(I==null)return null;const F=o.get(I);return F&&!F.isGroup&&!F.ignored?F:null}function x(I){if(I==null)return null;const F=o.get(I);return F&&!F.ignored?F:null}function k(I,F){const O=x(I);return O?O.getPrev(F):null}function S(I,F){const O=x(I);return O?O.getNext(F):null}function E(I){const F=x(I);return F?F.getParent():null}function T(I){const F=x(I);return F?F.getChild():null}const M={treeNodes:y,treeNodeMap:o,levelTreeNodeMap:s,maxLevel:Math.max(...s.keys()),getChildren:_,getFlattenedNodes(I){return flatten(y,I)},getNode:w,getPrev:k,getNext:S,getParent:E,getChild:T,getFirstAvailableNode(){return getFirstAvailableNode(y)},getPath(I,F={}){return getPath(I,F,M)},getCheckedKeys(I,F={}){const{cascade:O=!0,leafOnly:N=!1,checkStrategy:D="all",allowNotLoaded:X=!1}=F;return getCheckedKeys({checkedKeys:unwrapCheckedKeys(I),indeterminateKeys:unwrapIndeterminateKeys(I),cascade:O,leafOnly:N,checkStrategy:D,allowNotLoaded:X},M)},check(I,F,O={}){const{cascade:N=!0,leafOnly:D=!1,checkStrategy:X="all",allowNotLoaded:U=!1}=O;return getCheckedKeys({checkedKeys:unwrapCheckedKeys(F),indeterminateKeys:unwrapIndeterminateKeys(F),keysToCheck:I==null?[]:toArray$1(I),cascade:N,leafOnly:D,checkStrategy:X,allowNotLoaded:U},M)},uncheck(I,F,O={}){const{cascade:N=!0,leafOnly:D=!1,checkStrategy:X="all",allowNotLoaded:U=!1}=O;return getCheckedKeys({checkedKeys:unwrapCheckedKeys(F),indeterminateKeys:unwrapIndeterminateKeys(F),keysToUncheck:I==null?[]:toArray$1(I),cascade:N,leafOnly:D,checkStrategy:X,allowNotLoaded:U},M)},getNonLeafKeys(I={}){return getNonLeafKeys(y,I)}};return M}const base={neutralBase:"#FFF",neutralInvertBase:"#000",neutralTextBase:"#000",neutralPopover:"#fff",neutralCard:"#fff",neutralModal:"#fff",neutralBody:"#fff",alpha1:"0.82",alpha2:"0.72",alpha3:"0.38",alpha4:"0.24",alpha5:"0.18",alphaClose:"0.6",alphaDisabled:"0.5",alphaDisabledInput:"0.02",alphaPending:"0.05",alphaTablePending:"0.02",alphaPressed:"0.07",alphaAvatar:"0.2",alphaRail:"0.14",alphaProgressRail:".08",alphaBorder:"0.12",alphaDivider:"0.06",alphaInput:"0",alphaAction:"0.02",alphaTab:"0.04",alphaScrollbar:"0.25",alphaScrollbarHover:"0.4",alphaCode:"0.05",alphaTag:"0.02",primaryHover:"#36ad6a",primaryDefault:"#18a058",primaryActive:"#0c7a43",primarySuppl:"#36ad6a",infoHover:"#4098fc",infoDefault:"#2080f0",infoActive:"#1060c9",infoSuppl:"#4098fc",errorHover:"#de576d",errorDefault:"#d03050",errorActive:"#ab1f3f",errorSuppl:"#de576d",warningHover:"#fcb040",warningDefault:"#f0a020",warningActive:"#c97c10",warningSuppl:"#fcb040",successHover:"#36ad6a",successDefault:"#18a058",successActive:"#0c7a43",successSuppl:"#36ad6a"},baseBackgroundRgb=rgba(base.neutralBase),baseInvertBackgroundRgb=rgba(base.neutralInvertBase),overlayPrefix="rgba("+baseInvertBackgroundRgb.slice(0,3).join(", ")+", ";function overlay(e){return overlayPrefix+String(e)+")"}function neutral(e){const n=Array.from(baseInvertBackgroundRgb);return n[3]=Number(e),composite(baseBackgroundRgb,n)}const derived=Object.assign(Object.assign({name:"common"},commonVariables$6),{baseColor:base.neutralBase,primaryColor:base.primaryDefault,primaryColorHover:base.primaryHover,primaryColorPressed:base.primaryActive,primaryColorSuppl:base.primarySuppl,infoColor:base.infoDefault,infoColorHover:base.infoHover,infoColorPressed:base.infoActive,infoColorSuppl:base.infoSuppl,successColor:base.successDefault,successColorHover:base.successHover,successColorPressed:base.successActive,successColorSuppl:base.successSuppl,warningColor:base.warningDefault,warningColorHover:base.warningHover,warningColorPressed:base.warningActive,warningColorSuppl:base.warningSuppl,errorColor:base.errorDefault,errorColorHover:base.errorHover,errorColorPressed:base.errorActive,errorColorSuppl:base.errorSuppl,textColorBase:base.neutralTextBase,textColor1:"rgb(31, 34, 37)",textColor2:"rgb(51, 54, 57)",textColor3:"rgb(118, 124, 130)",textColorDisabled:neutral(base.alpha4),placeholderColor:neutral(base.alpha4),placeholderColorDisabled:neutral(base.alpha5),iconColor:neutral(base.alpha4),iconColorHover:scaleColor(neutral(base.alpha4),{lightness:.75}),iconColorPressed:scaleColor(neutral(base.alpha4),{lightness:.9}),iconColorDisabled:neutral(base.alpha5),opacity1:base.alpha1,opacity2:base.alpha2,opacity3:base.alpha3,opacity4:base.alpha4,opacity5:base.alpha5,dividerColor:"rgb(239, 239, 245)",borderColor:"rgb(224, 224, 230)",closeIconColor:neutral(Number(base.alphaClose)),closeIconColorHover:neutral(Number(base.alphaClose)),closeIconColorPressed:neutral(Number(base.alphaClose)),closeColorHover:"rgba(0, 0, 0, .09)",closeColorPressed:"rgba(0, 0, 0, .13)",clearColor:neutral(base.alpha4),clearColorHover:scaleColor(neutral(base.alpha4),{lightness:.75}),clearColorPressed:scaleColor(neutral(base.alpha4),{lightness:.9}),scrollbarColor:overlay(base.alphaScrollbar),scrollbarColorHover:overlay(base.alphaScrollbarHover),scrollbarWidth:"5px",scrollbarHeight:"5px",scrollbarBorderRadius:"5px",progressRailColor:neutral(base.alphaProgressRail),railColor:"rgb(219, 219, 223)",popoverColor:base.neutralPopover,tableColor:base.neutralCard,cardColor:base.neutralCard,modalColor:base.neutralModal,bodyColor:base.neutralBody,tagColor:"#eee",avatarColor:neutral(base.alphaAvatar),invertedColor:"rgb(0, 20, 40)",inputColor:neutral(base.alphaInput),codeColor:"rgb(244, 244, 248)",tabColor:"rgb(247, 247, 250)",actionColor:"rgb(250, 250, 252)",tableHeaderColor:"rgb(250, 250, 252)",hoverColor:"rgb(243, 243, 245)",tableColorHover:"rgba(0, 0, 100, 0.03)",tableColorStriped:"rgba(0, 0, 100, 0.02)",pressedColor:"rgb(237, 237, 239)",opacityDisabled:base.alphaDisabled,inputColorDisabled:"rgb(250, 250, 252)",buttonColor2:"rgba(46, 51, 56, .05)",buttonColor2Hover:"rgba(46, 51, 56, .09)",buttonColor2Pressed:"rgba(46, 51, 56, .13)",boxShadow1:"0 1px 2px -2px rgba(0, 0, 0, .08), 0 3px 6px 0 rgba(0, 0, 0, .06), 0 5px 12px 4px rgba(0, 0, 0, .04)",boxShadow2:"0 3px 6px -4px rgba(0, 0, 0, .12), 0 6px 16px 0 rgba(0, 0, 0, .08), 0 9px 28px 8px rgba(0, 0, 0, .05)",boxShadow3:"0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03)"}),commonLight=derived,commonVars$3={iconSizeSmall:"34px",iconSizeMedium:"40px",iconSizeLarge:"46px",iconSizeHuge:"52px"},self$g=e=>{const{textColorDisabled:n,iconColor:r,textColor2:o,fontSizeSmall:s,fontSizeMedium:u,fontSizeLarge:d,fontSizeHuge:f}=e;return Object.assign(Object.assign({},commonVars$3),{fontSizeSmall:s,fontSizeMedium:u,fontSizeLarge:d,fontSizeHuge:f,textColor:n,iconColor:r,extraTextColor:o})},emptyLight={name:"Empty",common:commonLight,self:self$g},emptyLight$1=emptyLight,style$h=cB("empty",`
 display: flex;
 flex-direction: column;
 align-items: center;
 font-size: var(--n-font-size);
`,[cE("icon",`
 width: var(--n-icon-size);
 height: var(--n-icon-size);
 font-size: var(--n-icon-size);
 line-height: var(--n-icon-size);
 color: var(--n-icon-color);
 transition:
 color .3s var(--n-bezier);
 `,[c$1("+",[cE("description",`
 margin-top: 8px;
 `)])]),cE("description",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),cE("extra",`
 text-align: center;
 transition: color .3s var(--n-bezier);
 margin-top: 12px;
 color: var(--n-extra-text-color);
 `)]),emptyProps=Object.assign(Object.assign({},useTheme.props),{description:String,showDescription:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},size:{type:String,default:"medium"},renderIcon:Function}),NEmpty=defineComponent({name:"Empty",props:emptyProps,setup(e){const{mergedClsPrefixRef:n,inlineThemeDisabled:r}=useConfig(e),o=useTheme("Empty","-empty",style$h,emptyLight$1,e,n),{localeRef:s}=useLocale("Empty"),u=inject(configProviderInjectionKey,null),d=computed(()=>{var _,g,y;return(_=e.description)!==null&&_!==void 0?_:(y=(g=u==null?void 0:u.mergedComponentPropsRef.value)===null||g===void 0?void 0:g.Empty)===null||y===void 0?void 0:y.description}),f=computed(()=>{var _,g;return((g=(_=u==null?void 0:u.mergedComponentPropsRef.value)===null||_===void 0?void 0:_.Empty)===null||g===void 0?void 0:g.renderIcon)||(()=>h(EmptyIcon,null))}),v=computed(()=>{const{size:_}=e,{common:{cubicBezierEaseInOut:g},self:{[createKey("iconSize",_)]:y,[createKey("fontSize",_)]:w,textColor:x,iconColor:k,extraTextColor:S}}=o.value;return{"--n-icon-size":y,"--n-font-size":w,"--n-bezier":g,"--n-text-color":x,"--n-icon-color":k,"--n-extra-text-color":S}}),m=r?useThemeClass("empty",computed(()=>{let _="";const{size:g}=e;return _+=g[0],_}),v,e):void 0;return{mergedClsPrefix:n,mergedRenderIcon:f,localizedDescription:computed(()=>d.value||s.value.description),cssVars:r?void 0:v,themeClass:m==null?void 0:m.themeClass,onRender:m==null?void 0:m.onRender}},render(){const{$slots:e,mergedClsPrefix:n,onRender:r}=this;return r==null||r(),h("div",{class:[`${n}-empty`,this.themeClass],style:this.cssVars},this.showIcon?h("div",{class:`${n}-empty__icon`},e.icon?e.icon():h(NBaseIcon,{clsPrefix:n},{default:this.mergedRenderIcon})):null,this.showDescription?h("div",{class:`${n}-empty__description`},e.default?e.default():this.localizedDescription):null,e.extra?h("div",{class:`${n}-empty__extra`},e.extra()):null)}}),self$f=e=>{const{scrollbarColor:n,scrollbarColorHover:r}=e;return{color:n,colorHover:r}},scrollbarLight={name:"Scrollbar",common:commonLight,self:self$f},scrollbarLight$1=scrollbarLight,{cubicBezierEaseInOut:cubicBezierEaseInOut$2}=commonVariables$6;function fadeInTransition({name:e="fade-in",enterDuration:n="0.2s",leaveDuration:r="0.2s",enterCubicBezier:o=cubicBezierEaseInOut$2,leaveCubicBezier:s=cubicBezierEaseInOut$2}={}){return[c$1(`&.${e}-transition-enter-active`,{transition:`all ${n} ${o}!important`}),c$1(`&.${e}-transition-leave-active`,{transition:`all ${r} ${s}!important`}),c$1(`&.${e}-transition-enter-from, &.${e}-transition-leave-to`,{opacity:0}),c$1(`&.${e}-transition-leave-from, &.${e}-transition-enter-to`,{opacity:1})]}const style$g=cB("scrollbar",`
 overflow: hidden;
 position: relative;
 z-index: auto;
 height: 100%;
 width: 100%;
`,[c$1(">",[cB("scrollbar-container",`
 width: 100%;
 overflow: scroll;
 height: 100%;
 max-height: inherit;
 scrollbar-width: none;
 `,[c$1("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),c$1(">",[cB("scrollbar-content",`
 box-sizing: border-box;
 min-width: 100%;
 `)])])]),c$1(">, +",[cB("scrollbar-rail",`
 position: absolute;
 pointer-events: none;
 user-select: none;
 -webkit-user-select: none;
 `,[cM("horizontal",`
 left: 2px;
 right: 2px;
 bottom: 4px;
 height: var(--n-scrollbar-height);
 `,[c$1(">",[cE("scrollbar",`
 height: var(--n-scrollbar-height);
 border-radius: var(--n-scrollbar-border-radius);
 right: 0;
 `)])]),cM("vertical",`
 right: 4px;
 top: 2px;
 bottom: 2px;
 width: var(--n-scrollbar-width);
 `,[c$1(">",[cE("scrollbar",`
 width: var(--n-scrollbar-width);
 border-radius: var(--n-scrollbar-border-radius);
 bottom: 0;
 `)])]),cM("disabled",[c$1(">",[cE("scrollbar",{pointerEvents:"none"})])]),c$1(">",[cE("scrollbar",`
 position: absolute;
 cursor: pointer;
 pointer-events: all;
 background-color: var(--n-scrollbar-color);
 transition: background-color .2s var(--n-scrollbar-bezier);
 `,[fadeInTransition(),c$1("&:hover",{backgroundColor:"var(--n-scrollbar-color-hover)"})])])])])]),scrollbarProps=Object.assign(Object.assign({},useTheme.props),{size:{type:Number,default:5},duration:{type:Number,default:0},scrollable:{type:Boolean,default:!0},xScrollable:Boolean,trigger:{type:String,default:"hover"},useUnifiedContainer:Boolean,triggerDisplayManually:Boolean,container:Function,content:Function,containerClass:String,containerStyle:[String,Object],contentClass:String,contentStyle:[String,Object],horizontalRailStyle:[String,Object],verticalRailStyle:[String,Object],onScroll:Function,onWheel:Function,onResize:Function,internalOnUpdateScrollLeft:Function,internalHoistYRail:Boolean}),Scrollbar=defineComponent({name:"Scrollbar",props:scrollbarProps,inheritAttrs:!1,setup(e){const{mergedClsPrefixRef:n,inlineThemeDisabled:r,mergedRtlRef:o}=useConfig(e),s=useRtl("Scrollbar",o,n),u=ref(null),d=ref(null),f=ref(null),v=ref(null),m=ref(null),_=ref(null),g=ref(null),y=ref(null),w=ref(null),x=ref(null),k=ref(null),S=ref(0),E=ref(0),T=ref(!1),M=ref(!1);let I=!1,F=!1,O,N,D=0,X=0,U=0,Z=0;const j=useIsIos(),Q=computed(()=>{const{value:Ue}=y,{value:qe}=_,{value:Ye}=x;return Ue===null||qe===null||Ye===null?0:Math.min(Ue,Ye*Ue/qe+e.size*1.5)}),ve=computed(()=>`${Q.value}px`),Se=computed(()=>{const{value:Ue}=w,{value:qe}=g,{value:Ye}=k;return Ue===null||qe===null||Ye===null?0:Ye*Ue/qe+e.size*1.5}),we=computed(()=>`${Se.value}px`),oe=computed(()=>{const{value:Ue}=y,{value:qe}=S,{value:Ye}=_,{value:st}=x;if(Ue===null||Ye===null||st===null)return 0;{const ot=Ye-Ue;return ot?qe/ot*(st-Q.value):0}}),ne=computed(()=>`${oe.value}px`),q=computed(()=>{const{value:Ue}=w,{value:qe}=E,{value:Ye}=g,{value:st}=k;if(Ue===null||Ye===null||st===null)return 0;{const ot=Ye-Ue;return ot?qe/ot*(st-Se.value):0}}),H=computed(()=>`${q.value}px`),Y=computed(()=>{const{value:Ue}=y,{value:qe}=_;return Ue!==null&&qe!==null&&qe>Ue}),le=computed(()=>{const{value:Ue}=w,{value:qe}=g;return Ue!==null&&qe!==null&&qe>Ue}),Ce=computed(()=>{const{trigger:Ue}=e;return Ue==="none"||T.value}),Te=computed(()=>{const{trigger:Ue}=e;return Ue==="none"||M.value}),ke=computed(()=>{const{container:Ue}=e;return Ue?Ue():d.value}),Ee=computed(()=>{const{content:Ue}=e;return Ue?Ue():f.value}),Pe=useReactivated(()=>{e.container||Oe({top:S.value,left:E.value})}),Be=()=>{Pe.isDeactivated||He()},$e=Ue=>{if(Pe.isDeactivated)return;const{onResize:qe}=e;qe&&qe(Ue),He()},Oe=(Ue,qe)=>{if(!e.scrollable)return;if(typeof Ue=="number"){J(qe!=null?qe:0,Ue,0,!1,"auto");return}const{left:Ye,top:st,index:ot,elSize:Qe,position:tt,behavior:nt,el:it,debounce:lt=!0}=Ue;(Ye!==void 0||st!==void 0)&&J(Ye!=null?Ye:0,st!=null?st:0,0,!1,nt),it!==void 0?J(0,it.offsetTop,it.offsetHeight,lt,nt):ot!==void 0&&Qe!==void 0?J(0,ot*Qe,Qe,lt,nt):tt==="bottom"?J(0,Number.MAX_SAFE_INTEGER,0,!1,nt):tt==="top"&&J(0,0,0,!1,nt)},Ne=(Ue,qe)=>{if(!e.scrollable)return;const{value:Ye}=ke;!Ye||(typeof Ue=="object"?Ye.scrollBy(Ue):Ye.scrollBy(Ue,qe||0))};function J(Ue,qe,Ye,st,ot){const{value:Qe}=ke;if(!!Qe){if(st){const{scrollTop:tt,offsetHeight:nt}=Qe;if(qe>tt){qe+Ye<=tt+nt||Qe.scrollTo({left:Ue,top:qe+Ye-nt,behavior:ot});return}}Qe.scrollTo({left:Ue,top:qe,behavior:ot})}}function fe(){Le(),Ve(),He()}function re(){_e()}function _e(){be(),Ae()}function be(){N!==void 0&&window.clearTimeout(N),N=window.setTimeout(()=>{M.value=!1},e.duration)}function Ae(){O!==void 0&&window.clearTimeout(O),O=window.setTimeout(()=>{T.value=!1},e.duration)}function Le(){O!==void 0&&window.clearTimeout(O),T.value=!0}function Ve(){N!==void 0&&window.clearTimeout(N),M.value=!0}function Fe(Ue){const{onScroll:qe}=e;qe&&qe(Ue),De()}function De(){const{value:Ue}=ke;Ue&&(S.value=Ue.scrollTop,E.value=Ue.scrollLeft*(s!=null&&s.value?-1:1))}function We(){const{value:Ue}=Ee;Ue&&(_.value=Ue.offsetHeight,g.value=Ue.offsetWidth);const{value:qe}=ke;qe&&(y.value=qe.offsetHeight,w.value=qe.offsetWidth);const{value:Ye}=m,{value:st}=v;Ye&&(k.value=Ye.offsetWidth),st&&(x.value=st.offsetHeight)}function Re(){const{value:Ue}=ke;Ue&&(S.value=Ue.scrollTop,E.value=Ue.scrollLeft*(s!=null&&s.value?-1:1),y.value=Ue.offsetHeight,w.value=Ue.offsetWidth,_.value=Ue.scrollHeight,g.value=Ue.scrollWidth);const{value:qe}=m,{value:Ye}=v;qe&&(k.value=qe.offsetWidth),Ye&&(x.value=Ye.offsetHeight)}function He(){!e.scrollable||(e.useUnifiedContainer?Re():(We(),De()))}function Ze(Ue){var qe;return!(!((qe=u.value)===null||qe===void 0)&&qe.contains(getPreciseEventTarget(Ue)))}function Xe(Ue){Ue.preventDefault(),Ue.stopPropagation(),F=!0,on$1("mousemove",window,at,!0),on$1("mouseup",window,ut,!0),X=E.value,U=s!=null&&s.value?window.innerWidth-Ue.clientX:Ue.clientX}function at(Ue){if(!F)return;O!==void 0&&window.clearTimeout(O),N!==void 0&&window.clearTimeout(N);const{value:qe}=w,{value:Ye}=g,{value:st}=Se;if(qe===null||Ye===null)return;const Qe=(s!=null&&s.value?window.innerWidth-Ue.clientX-U:Ue.clientX-U)*(Ye-qe)/(qe-st),tt=Ye-qe;let nt=X+Qe;nt=Math.min(tt,nt),nt=Math.max(nt,0);const{value:it}=ke;if(it){it.scrollLeft=nt*(s!=null&&s.value?-1:1);const{internalOnUpdateScrollLeft:lt}=e;lt&&lt(nt)}}function ut(Ue){Ue.preventDefault(),Ue.stopPropagation(),off$1("mousemove",window,at,!0),off$1("mouseup",window,ut,!0),F=!1,He(),Ze(Ue)&&_e()}function ct(Ue){Ue.preventDefault(),Ue.stopPropagation(),I=!0,on$1("mousemove",window,mt,!0),on$1("mouseup",window,pt,!0),D=S.value,Z=Ue.clientY}function mt(Ue){if(!I)return;O!==void 0&&window.clearTimeout(O),N!==void 0&&window.clearTimeout(N);const{value:qe}=y,{value:Ye}=_,{value:st}=Q;if(qe===null||Ye===null)return;const Qe=(Ue.clientY-Z)*(Ye-qe)/(qe-st),tt=Ye-qe;let nt=D+Qe;nt=Math.min(tt,nt),nt=Math.max(nt,0);const{value:it}=ke;it&&(it.scrollTop=nt)}function pt(Ue){Ue.preventDefault(),Ue.stopPropagation(),off$1("mousemove",window,mt,!0),off$1("mouseup",window,pt,!0),I=!1,He(),Ze(Ue)&&_e()}watchEffect(()=>{const{value:Ue}=le,{value:qe}=Y,{value:Ye}=n,{value:st}=m,{value:ot}=v;st&&(Ue?st.classList.remove(`${Ye}-scrollbar-rail--disabled`):st.classList.add(`${Ye}-scrollbar-rail--disabled`)),ot&&(qe?ot.classList.remove(`${Ye}-scrollbar-rail--disabled`):ot.classList.add(`${Ye}-scrollbar-rail--disabled`))}),onMounted(()=>{e.container||He()}),onBeforeUnmount(()=>{O!==void 0&&window.clearTimeout(O),N!==void 0&&window.clearTimeout(N),off$1("mousemove",window,mt,!0),off$1("mouseup",window,pt,!0)});const kt=useTheme("Scrollbar","-scrollbar",style$g,scrollbarLight$1,e,n),Ct=computed(()=>{const{common:{cubicBezierEaseInOut:Ue,scrollbarBorderRadius:qe,scrollbarHeight:Ye,scrollbarWidth:st},self:{color:ot,colorHover:Qe}}=kt.value;return{"--n-scrollbar-bezier":Ue,"--n-scrollbar-color":ot,"--n-scrollbar-color-hover":Qe,"--n-scrollbar-border-radius":qe,"--n-scrollbar-width":st,"--n-scrollbar-height":Ye}}),ht=r?useThemeClass("scrollbar",void 0,Ct,e):void 0;return Object.assign(Object.assign({},{scrollTo:Oe,scrollBy:Ne,sync:He,syncUnifiedContainer:Re,handleMouseEnterWrapper:fe,handleMouseLeaveWrapper:re}),{mergedClsPrefix:n,rtlEnabled:s,containerScrollTop:S,wrapperRef:u,containerRef:d,contentRef:f,yRailRef:v,xRailRef:m,needYBar:Y,needXBar:le,yBarSizePx:ve,xBarSizePx:we,yBarTopPx:ne,xBarLeftPx:H,isShowXBar:Ce,isShowYBar:Te,isIos:j,handleScroll:Fe,handleContentResize:Be,handleContainerResize:$e,handleYScrollMouseDown:ct,handleXScrollMouseDown:Xe,cssVars:r?void 0:Ct,themeClass:ht==null?void 0:ht.themeClass,onRender:ht==null?void 0:ht.onRender})},render(){var e;const{$slots:n,mergedClsPrefix:r,triggerDisplayManually:o,rtlEnabled:s,internalHoistYRail:u}=this;if(!this.scrollable)return(e=n.default)===null||e===void 0?void 0:e.call(n);const d=this.trigger==="none",f=()=>h("div",{ref:"yRailRef",class:[`${r}-scrollbar-rail`,`${r}-scrollbar-rail--vertical`],"data-scrollbar-rail":!0,style:this.verticalRailStyle,"aria-hidden":!0},h(d?Wrapper:Transition,d?null:{name:"fade-in-transition"},{default:()=>this.needYBar&&this.isShowYBar&&!this.isIos?h("div",{class:`${r}-scrollbar-rail__scrollbar`,style:{height:this.yBarSizePx,top:this.yBarTopPx},onMousedown:this.handleYScrollMouseDown}):null})),v=()=>{var _,g;return(_=this.onRender)===null||_===void 0||_.call(this),h("div",mergeProps(this.$attrs,{role:"none",ref:"wrapperRef",class:[`${r}-scrollbar`,this.themeClass,s&&`${r}-scrollbar--rtl`],style:this.cssVars,onMouseenter:o?void 0:this.handleMouseEnterWrapper,onMouseleave:o?void 0:this.handleMouseLeaveWrapper}),[this.container?(g=n.default)===null||g===void 0?void 0:g.call(n):h("div",{role:"none",ref:"containerRef",class:[`${r}-scrollbar-container`,this.containerClass],style:this.containerStyle,onScroll:this.handleScroll,onWheel:this.onWheel},h(VResizeObserver,{onResize:this.handleContentResize},{default:()=>h("div",{ref:"contentRef",role:"none",style:[{width:this.xScrollable?"fit-content":null},this.contentStyle],class:[`${r}-scrollbar-content`,this.contentClass]},n)})),u?null:f(),this.xScrollable&&h("div",{ref:"xRailRef",class:[`${r}-scrollbar-rail`,`${r}-scrollbar-rail--horizontal`],style:this.horizontalRailStyle,"data-scrollbar-rail":!0,"aria-hidden":!0},h(d?Wrapper:Transition,d?null:{name:"fade-in-transition"},{default:()=>this.needXBar&&this.isShowXBar&&!this.isIos?h("div",{class:`${r}-scrollbar-rail__scrollbar`,style:{width:this.xBarSizePx,right:s?this.xBarLeftPx:void 0,left:s?void 0:this.xBarLeftPx},onMousedown:this.handleXScrollMouseDown}):null}))])},m=this.container?v():h(VResizeObserver,{onResize:this.handleContainerResize},{default:v});return u?h(Fragment,null,m,f()):m}}),NScrollbar=Scrollbar,XScrollbar=Scrollbar,commonVariables$5={height:"calc(var(--n-option-height) * 7.6)",paddingSmall:"4px 0",paddingMedium:"4px 0",paddingLarge:"4px 0",paddingHuge:"4px 0",optionPaddingSmall:"0 12px",optionPaddingMedium:"0 12px",optionPaddingLarge:"0 12px",optionPaddingHuge:"0 12px",loadingSize:"18px"},self$e=e=>{const{borderRadius:n,popoverColor:r,textColor3:o,dividerColor:s,textColor2:u,primaryColorPressed:d,textColorDisabled:f,primaryColor:v,opacityDisabled:m,hoverColor:_,fontSizeSmall:g,fontSizeMedium:y,fontSizeLarge:w,fontSizeHuge:x,heightSmall:k,heightMedium:S,heightLarge:E,heightHuge:T}=e;return Object.assign(Object.assign({},commonVariables$5),{optionFontSizeSmall:g,optionFontSizeMedium:y,optionFontSizeLarge:w,optionFontSizeHuge:x,optionHeightSmall:k,optionHeightMedium:S,optionHeightLarge:E,optionHeightHuge:T,borderRadius:n,color:r,groupHeaderTextColor:o,actionDividerColor:s,optionTextColor:u,optionTextColorPressed:d,optionTextColorDisabled:f,optionTextColorActive:v,optionOpacityDisabled:m,optionCheckColor:v,optionColorPending:_,optionColorActive:"rgba(0, 0, 0, 0)",optionColorActivePending:_,actionTextColor:u,loadingColor:v})},internalSelectMenuLight={name:"InternalSelectMenu",common:commonLight,peers:{Scrollbar:scrollbarLight$1,Empty:emptyLight$1},self:self$e},internalSelectMenuLight$1=internalSelectMenuLight;function renderCheckMark(e,n){return h(Transition,{name:"fade-in-scale-up-transition"},{default:()=>e?h(NBaseIcon,{clsPrefix:n,class:`${n}-base-select-option__check`},{default:()=>h(FinishedIcon)}):null})}const NSelectOption=defineComponent({name:"NBaseSelectOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const{valueRef:n,pendingTmNodeRef:r,multipleRef:o,valueSetRef:s,renderLabelRef:u,renderOptionRef:d,labelFieldRef:f,valueFieldRef:v,showCheckmarkRef:m,nodePropsRef:_,handleOptionClick:g,handleOptionMouseEnter:y}=inject(internalSelectionMenuInjectionKey),w=useMemo(()=>{const{value:E}=r;return E?e.tmNode.key===E.key:!1});function x(E){const{tmNode:T}=e;T.disabled||g(E,T)}function k(E){const{tmNode:T}=e;T.disabled||y(E,T)}function S(E){const{tmNode:T}=e,{value:M}=w;T.disabled||M||y(E,T)}return{multiple:o,isGrouped:useMemo(()=>{const{tmNode:E}=e,{parent:T}=E;return T&&T.rawNode.type==="group"}),showCheckmark:m,nodeProps:_,isPending:w,isSelected:useMemo(()=>{const{value:E}=n,{value:T}=o;if(E===null)return!1;const M=e.tmNode.rawNode[v.value];if(T){const{value:I}=s;return I.has(M)}else return E===M}),labelField:f,renderLabel:u,renderOption:d,handleMouseMove:S,handleMouseEnter:k,handleClick:x}},render(){const{clsPrefix:e,tmNode:{rawNode:n},isSelected:r,isPending:o,isGrouped:s,showCheckmark:u,nodeProps:d,renderOption:f,renderLabel:v,handleClick:m,handleMouseEnter:_,handleMouseMove:g}=this,y=renderCheckMark(r,e),w=v?[v(n,r),u&&y]:[render$1(n[this.labelField],n,r),u&&y],x=d==null?void 0:d(n),k=h("div",Object.assign({},x,{class:[`${e}-base-select-option`,n.class,x==null?void 0:x.class,{[`${e}-base-select-option--disabled`]:n.disabled,[`${e}-base-select-option--selected`]:r,[`${e}-base-select-option--grouped`]:s,[`${e}-base-select-option--pending`]:o,[`${e}-base-select-option--show-checkmark`]:u}],style:[(x==null?void 0:x.style)||"",n.style||""],onClick:mergeEventHandlers([m,x==null?void 0:x.onClick]),onMouseenter:mergeEventHandlers([_,x==null?void 0:x.onMouseenter]),onMousemove:mergeEventHandlers([g,x==null?void 0:x.onMousemove])}),h("div",{class:`${e}-base-select-option__content`},w));return n.render?n.render({node:k,option:n,selected:r}):f?f({node:k,option:n,selected:r}):k}}),NSelectGroupHeader=defineComponent({name:"NBaseSelectGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{renderLabelRef:e,renderOptionRef:n,labelFieldRef:r,nodePropsRef:o}=inject(internalSelectionMenuInjectionKey);return{labelField:r,nodeProps:o,renderLabel:e,renderOption:n}},render(){const{clsPrefix:e,renderLabel:n,renderOption:r,nodeProps:o,tmNode:{rawNode:s}}=this,u=o==null?void 0:o(s),d=n?n(s,!1):render$1(s[this.labelField],s,!1),f=h("div",Object.assign({},u,{class:[`${e}-base-select-group-header`,u==null?void 0:u.class]}),d);return s.render?s.render({node:f,option:s}):r?r({node:f,option:s,selected:!1}):f}}),{cubicBezierEaseIn:cubicBezierEaseIn$1,cubicBezierEaseOut:cubicBezierEaseOut$1}=commonVariables$6;function fadeInScaleUpTransition({transformOrigin:e="inherit",duration:n=".2s",enterScale:r=".9",originalTransform:o="",originalTransition:s=""}={}){return[c$1("&.fade-in-scale-up-transition-leave-active",{transformOrigin:e,transition:`opacity ${n} ${cubicBezierEaseIn$1}, transform ${n} ${cubicBezierEaseIn$1} ${s&&","+s}`}),c$1("&.fade-in-scale-up-transition-enter-active",{transformOrigin:e,transition:`opacity ${n} ${cubicBezierEaseOut$1}, transform ${n} ${cubicBezierEaseOut$1} ${s&&","+s}`}),c$1("&.fade-in-scale-up-transition-enter-from, &.fade-in-scale-up-transition-leave-to",{opacity:0,transform:`${o} scale(${r})`}),c$1("&.fade-in-scale-up-transition-leave-from, &.fade-in-scale-up-transition-enter-to",{opacity:1,transform:`${o} scale(1)`})]}const style$f=cB("base-select-menu",`
 line-height: 1.5;
 outline: none;
 z-index: 0;
 position: relative;
 border-radius: var(--n-border-radius);
 transition:
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 background-color: var(--n-color);
`,[cB("scrollbar",`
 max-height: var(--n-height);
 `),cB("virtual-list",`
 max-height: var(--n-height);
 `),cB("base-select-option",`
 min-height: var(--n-option-height);
 font-size: var(--n-option-font-size);
 display: flex;
 align-items: center;
 `,[cE("content",`
 z-index: 1;
 white-space: nowrap;
 text-overflow: ellipsis;
 overflow: hidden;
 `)]),cB("base-select-group-header",`
 min-height: var(--n-option-height);
 font-size: .93em;
 display: flex;
 align-items: center;
 `),cB("base-select-menu-option-wrapper",`
 position: relative;
 width: 100%;
 `),cE("loading, empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),cE("loading",`
 color: var(--n-loading-color);
 font-size: var(--n-loading-size);
 `),cE("action",`
 padding: 8px var(--n-option-padding-left);
 font-size: var(--n-option-font-size);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 border-top: 1px solid var(--n-action-divider-color);
 color: var(--n-action-text-color);
 `),cB("base-select-group-header",`
 position: relative;
 cursor: default;
 padding: var(--n-option-padding);
 color: var(--n-group-header-text-color);
 `),cB("base-select-option",`
 cursor: pointer;
 position: relative;
 padding: var(--n-option-padding);
 transition:
 color .3s var(--n-bezier),
 opacity .3s var(--n-bezier);
 box-sizing: border-box;
 color: var(--n-option-text-color);
 opacity: 1;
 `,[cM("show-checkmark",`
 padding-right: calc(var(--n-option-padding-right) + 20px);
 `),c$1("&::before",`
 content: "";
 position: absolute;
 left: 4px;
 right: 4px;
 top: 0;
 bottom: 0;
 border-radius: var(--n-border-radius);
 transition: background-color .3s var(--n-bezier);
 `),c$1("&:active",`
 color: var(--n-option-text-color-pressed);
 `),cM("grouped",`
 padding-left: calc(var(--n-option-padding-left) * 1.5);
 `),cM("pending",[c$1("&::before",`
 background-color: var(--n-option-color-pending);
 `)]),cM("selected",`
 color: var(--n-option-text-color-active);
 `,[c$1("&::before",`
 background-color: var(--n-option-color-active);
 `),cM("pending",[c$1("&::before",`
 background-color: var(--n-option-color-active-pending);
 `)])]),cM("disabled",`
 cursor: not-allowed;
 `,[cNotM("selected",`
 color: var(--n-option-text-color-disabled);
 `),cM("selected",`
 opacity: var(--n-option-opacity-disabled);
 `)]),cE("check",`
 font-size: 16px;
 position: absolute;
 right: calc(var(--n-option-padding-right) - 4px);
 top: calc(50% - 7px);
 color: var(--n-option-check-color);
 transition: color .3s var(--n-bezier);
 `,[fadeInScaleUpTransition({enterScale:"0.5"})])])]),NInternalSelectMenu=defineComponent({name:"InternalSelectMenu",props:Object.assign(Object.assign({},useTheme.props),{clsPrefix:{type:String,required:!0},scrollable:{type:Boolean,default:!0},treeMate:{type:Object,required:!0},multiple:Boolean,size:{type:String,default:"medium"},value:{type:[String,Number,Array],default:null},autoPending:Boolean,virtualScroll:{type:Boolean,default:!0},show:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},loading:Boolean,focusable:Boolean,renderLabel:Function,renderOption:Function,nodeProps:Function,showCheckmark:{type:Boolean,default:!0},onMousedown:Function,onScroll:Function,onFocus:Function,onBlur:Function,onKeyup:Function,onKeydown:Function,onTabOut:Function,onMouseenter:Function,onMouseleave:Function,onResize:Function,resetMenuOnOptionsChange:{type:Boolean,default:!0},inlineThemeDisabled:Boolean,onToggle:Function}),setup(e){const n=useTheme("InternalSelectMenu","-internal-select-menu",style$f,internalSelectMenuLight$1,e,toRef(e,"clsPrefix")),r=ref(null),o=ref(null),s=ref(null),u=computed(()=>e.treeMate.getFlattenedNodes()),d=computed(()=>createIndexGetter(u.value)),f=ref(null);function v(){const{treeMate:q}=e;let H=null;const{value:Y}=e;Y===null?H=q.getFirstAvailableNode():(e.multiple?H=q.getNode((Y||[])[(Y||[]).length-1]):H=q.getNode(Y),(!H||H.disabled)&&(H=q.getFirstAvailableNode())),Z(H||null)}function m(){const{value:q}=f;q&&!e.treeMate.getNode(q.key)&&(f.value=null)}let _;watch(()=>e.show,q=>{q?_=watch(()=>e.treeMate,()=>{e.resetMenuOnOptionsChange?(e.autoPending?v():m(),nextTick(j)):m()},{immediate:!0}):_==null||_()},{immediate:!0}),onBeforeUnmount(()=>{_==null||_()});const g=computed(()=>depx(n.value.self[createKey("optionHeight",e.size)])),y=computed(()=>getMargin(n.value.self[createKey("padding",e.size)])),w=computed(()=>e.multiple&&Array.isArray(e.value)?new Set(e.value):new Set),x=computed(()=>{const q=u.value;return q&&q.length===0});function k(q){const{onToggle:H}=e;H&&H(q)}function S(q){const{onScroll:H}=e;H&&H(q)}function E(q){var H;(H=s.value)===null||H===void 0||H.sync(),S(q)}function T(){var q;(q=s.value)===null||q===void 0||q.sync()}function M(){const{value:q}=f;return q||null}function I(q,H){H.disabled||Z(H,!1)}function F(q,H){H.disabled||k(H)}function O(q){var H;happensIn(q,"action")||(H=e.onKeyup)===null||H===void 0||H.call(e,q)}function N(q){var H;happensIn(q,"action")||(H=e.onKeydown)===null||H===void 0||H.call(e,q)}function D(q){var H;(H=e.onMousedown)===null||H===void 0||H.call(e,q),!e.focusable&&q.preventDefault()}function X(){const{value:q}=f;q&&Z(q.getNext({loop:!0}),!0)}function U(){const{value:q}=f;q&&Z(q.getPrev({loop:!0}),!0)}function Z(q,H=!1){f.value=q,H&&j()}function j(){var q,H;const Y=f.value;if(!Y)return;const le=d.value(Y.key);le!==null&&(e.virtualScroll?(q=o.value)===null||q===void 0||q.scrollTo({index:le}):(H=s.value)===null||H===void 0||H.scrollTo({index:le,elSize:g.value}))}function Q(q){var H,Y;!((H=r.value)===null||H===void 0)&&H.contains(q.target)&&((Y=e.onFocus)===null||Y===void 0||Y.call(e,q))}function ve(q){var H,Y;!((H=r.value)===null||H===void 0)&&H.contains(q.relatedTarget)||(Y=e.onBlur)===null||Y===void 0||Y.call(e,q)}provide(internalSelectionMenuInjectionKey,{handleOptionMouseEnter:I,handleOptionClick:F,valueSetRef:w,pendingTmNodeRef:f,nodePropsRef:toRef(e,"nodeProps"),showCheckmarkRef:toRef(e,"showCheckmark"),multipleRef:toRef(e,"multiple"),valueRef:toRef(e,"value"),renderLabelRef:toRef(e,"renderLabel"),renderOptionRef:toRef(e,"renderOption"),labelFieldRef:toRef(e,"labelField"),valueFieldRef:toRef(e,"valueField")}),provide(internalSelectionMenuBodyInjectionKey,r),onMounted(()=>{const{value:q}=s;q&&q.sync()});const Se=computed(()=>{const{size:q}=e,{common:{cubicBezierEaseInOut:H},self:{height:Y,borderRadius:le,color:Ce,groupHeaderTextColor:Te,actionDividerColor:ke,optionTextColorPressed:Ee,optionTextColor:Pe,optionTextColorDisabled:Be,optionTextColorActive:$e,optionOpacityDisabled:Oe,optionCheckColor:Ne,actionTextColor:J,optionColorPending:fe,optionColorActive:re,loadingColor:_e,loadingSize:be,optionColorActivePending:Ae,[createKey("optionFontSize",q)]:Le,[createKey("optionHeight",q)]:Ve,[createKey("optionPadding",q)]:Fe}}=n.value;return{"--n-height":Y,"--n-action-divider-color":ke,"--n-action-text-color":J,"--n-bezier":H,"--n-border-radius":le,"--n-color":Ce,"--n-option-font-size":Le,"--n-group-header-text-color":Te,"--n-option-check-color":Ne,"--n-option-color-pending":fe,"--n-option-color-active":re,"--n-option-color-active-pending":Ae,"--n-option-height":Ve,"--n-option-opacity-disabled":Oe,"--n-option-text-color":Pe,"--n-option-text-color-active":$e,"--n-option-text-color-disabled":Be,"--n-option-text-color-pressed":Ee,"--n-option-padding":Fe,"--n-option-padding-left":getMargin(Fe,"left"),"--n-option-padding-right":getMargin(Fe,"right"),"--n-loading-color":_e,"--n-loading-size":be}}),{inlineThemeDisabled:we}=e,oe=we?useThemeClass("internal-select-menu",computed(()=>e.size[0]),Se,e):void 0,ne={selfRef:r,next:X,prev:U,getPendingTmNode:M};return useOnResize(r,e.onResize),Object.assign({mergedTheme:n,virtualListRef:o,scrollbarRef:s,itemSize:g,padding:y,flattenedNodes:u,empty:x,virtualListContainer(){const{value:q}=o;return q==null?void 0:q.listElRef},virtualListContent(){const{value:q}=o;return q==null?void 0:q.itemsElRef},doScroll:S,handleFocusin:Q,handleFocusout:ve,handleKeyUp:O,handleKeyDown:N,handleMouseDown:D,handleVirtualListResize:T,handleVirtualListScroll:E,cssVars:we?void 0:Se,themeClass:oe==null?void 0:oe.themeClass,onRender:oe==null?void 0:oe.onRender},ne)},render(){const{$slots:e,virtualScroll:n,clsPrefix:r,mergedTheme:o,themeClass:s,onRender:u}=this;return u==null||u(),h("div",{ref:"selfRef",tabindex:this.focusable?0:-1,class:[`${r}-base-select-menu`,s,this.multiple&&`${r}-base-select-menu--multiple`],style:this.cssVars,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeyup:this.handleKeyUp,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},this.loading?h("div",{class:`${r}-base-select-menu__loading`},h(NBaseLoading,{clsPrefix:r,strokeWidth:20})):this.empty?h("div",{class:`${r}-base-select-menu__empty`,"data-empty":!0},resolveSlot(e.empty,()=>[h(NEmpty,{theme:o.peers.Empty,themeOverrides:o.peerOverrides.Empty})])):h(NScrollbar,{ref:"scrollbarRef",theme:o.peers.Scrollbar,themeOverrides:o.peerOverrides.Scrollbar,scrollable:this.scrollable,container:n?this.virtualListContainer:void 0,content:n?this.virtualListContent:void 0,onScroll:n?void 0:this.doScroll},{default:()=>n?h(VVirtualList,{ref:"virtualListRef",class:`${r}-virtual-list`,items:this.flattenedNodes,itemSize:this.itemSize,showScrollbar:!1,paddingTop:this.padding.top,paddingBottom:this.padding.bottom,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemResizable:!0},{default:({item:d})=>d.isGroup?h(NSelectGroupHeader,{key:d.key,clsPrefix:r,tmNode:d}):d.ignored?null:h(NSelectOption,{clsPrefix:r,key:d.key,tmNode:d})}):h("div",{class:`${r}-base-select-menu-option-wrapper`,style:{paddingTop:this.padding.top,paddingBottom:this.padding.bottom}},this.flattenedNodes.map(d=>d.isGroup?h(NSelectGroupHeader,{key:d.key,clsPrefix:r,tmNode:d}):h(NSelectOption,{clsPrefix:r,key:d.key,tmNode:d})))}),resolveWrappedSlot(e.action,d=>d&&[h("div",{class:`${r}-base-select-menu__action`,"data-action":!0,key:"action"},d),h(FocusDetector,{onFocus:this.onTabOut,key:"focus-detector"})]))}}),style$e=cB("base-wave",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
`),NBaseWave=defineComponent({name:"BaseWave",props:{clsPrefix:{type:String,required:!0}},setup(e){useStyle("-base-wave",style$e,toRef(e,"clsPrefix"));const n=ref(null),r=ref(!1);let o=null;return onBeforeUnmount(()=>{o!==null&&window.clearTimeout(o)}),{active:r,selfRef:n,play(){o!==null&&(window.clearTimeout(o),r.value=!1,o=null),nextTick(()=>{var s;(s=n.value)===null||s===void 0||s.offsetHeight,r.value=!0,o=window.setTimeout(()=>{r.value=!1,o=null},1e3)})}}},render(){const{clsPrefix:e}=this;return h("div",{ref:"selfRef","aria-hidden":!0,class:[`${e}-base-wave`,this.active&&`${e}-base-wave--active`]})}}),commonVariables$4={space:"6px",spaceArrow:"10px",arrowOffset:"10px",arrowOffsetVertical:"10px",arrowHeight:"6px",padding:"8px 14px"},self$d=e=>{const{boxShadow2:n,popoverColor:r,textColor2:o,borderRadius:s,fontSize:u,dividerColor:d}=e;return Object.assign(Object.assign({},commonVariables$4),{fontSize:u,borderRadius:s,color:r,dividerColor:d,textColor:o,boxShadow:n})},popoverLight={name:"Popover",common:commonLight,self:self$d},popoverLight$1=popoverLight,oppositePlacement={top:"bottom",bottom:"top",left:"right",right:"left"},arrowSize="var(--n-arrow-height) * 1.414",style$d=c$1([cB("popover",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 position: relative;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 box-shadow: var(--n-box-shadow);
 word-break: break-word;
 `,[c$1(">",[cB("scrollbar",`
 height: inherit;
 max-height: inherit;
 `)]),cNotM("raw",`
 background-color: var(--n-color);
 border-radius: var(--n-border-radius);
 `,[cNotM("scrollable",[cNotM("show-header-or-footer","padding: var(--n-padding);")])]),cE("header",`
 padding: var(--n-padding);
 border-bottom: 1px solid var(--n-divider-color);
 transition: border-color .3s var(--n-bezier);
 `),cE("footer",`
 padding: var(--n-padding);
 border-top: 1px solid var(--n-divider-color);
 transition: border-color .3s var(--n-bezier);
 `),cM("scrollable, show-header-or-footer",[cE("content",`
 padding: var(--n-padding);
 `)])]),cB("popover-shared",`
 transform-origin: inherit;
 `,[cB("popover-arrow-wrapper",`
 position: absolute;
 overflow: hidden;
 pointer-events: none;
 `,[cB("popover-arrow",`
 transition: background-color .3s var(--n-bezier);
 position: absolute;
 display: block;
 width: calc(${arrowSize});
 height: calc(${arrowSize});
 box-shadow: 0 0 8px 0 rgba(0, 0, 0, .12);
 transform: rotate(45deg);
 background-color: var(--n-color);
 pointer-events: all;
 `)]),c$1("&.popover-transition-enter-from, &.popover-transition-leave-to",`
 opacity: 0;
 transform: scale(.85);
 `),c$1("&.popover-transition-enter-to, &.popover-transition-leave-from",`
 transform: scale(1);
 opacity: 1;
 `),c$1("&.popover-transition-enter-active",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .15s var(--n-bezier-ease-out),
 transform .15s var(--n-bezier-ease-out);
 `),c$1("&.popover-transition-leave-active",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .15s var(--n-bezier-ease-in),
 transform .15s var(--n-bezier-ease-in);
 `)]),placementStyle("top-start",`
 top: calc(${arrowSize} / -2);
 left: calc(${getArrowOffset("top-start")} - var(--v-offset-left));
 `),placementStyle("top",`
 top: calc(${arrowSize} / -2);
 transform: translateX(calc(${arrowSize} / -2)) rotate(45deg);
 left: 50%;
 `),placementStyle("top-end",`
 top: calc(${arrowSize} / -2);
 right: calc(${getArrowOffset("top-end")} + var(--v-offset-left));
 `),placementStyle("bottom-start",`
 bottom: calc(${arrowSize} / -2);
 left: calc(${getArrowOffset("bottom-start")} - var(--v-offset-left));
 `),placementStyle("bottom",`
 bottom: calc(${arrowSize} / -2);
 transform: translateX(calc(${arrowSize} / -2)) rotate(45deg);
 left: 50%;
 `),placementStyle("bottom-end",`
 bottom: calc(${arrowSize} / -2);
 right: calc(${getArrowOffset("bottom-end")} + var(--v-offset-left));
 `),placementStyle("left-start",`
 left: calc(${arrowSize} / -2);
 top: calc(${getArrowOffset("left-start")} - var(--v-offset-top));
 `),placementStyle("left",`
 left: calc(${arrowSize} / -2);
 transform: translateY(calc(${arrowSize} / -2)) rotate(45deg);
 top: 50%;
 `),placementStyle("left-end",`
 left: calc(${arrowSize} / -2);
 bottom: calc(${getArrowOffset("left-end")} + var(--v-offset-top));
 `),placementStyle("right-start",`
 right: calc(${arrowSize} / -2);
 top: calc(${getArrowOffset("right-start")} - var(--v-offset-top));
 `),placementStyle("right",`
 right: calc(${arrowSize} / -2);
 transform: translateY(calc(${arrowSize} / -2)) rotate(45deg);
 top: 50%;
 `),placementStyle("right-end",`
 right: calc(${arrowSize} / -2);
 bottom: calc(${getArrowOffset("right-end")} + var(--v-offset-top));
 `),...map({top:["right-start","left-start"],right:["top-end","bottom-end"],bottom:["right-end","left-end"],left:["top-start","bottom-start"]},(e,n)=>{const r=["right","left"].includes(n),o=r?"width":"height";return e.map(s=>{const u=s.split("-")[1]==="end",f=`calc((${`var(--v-target-${o}, 0px)`} - ${arrowSize}) / 2)`,v=getArrowOffset(s);return c$1(`[v-placement="${s}"] >`,[cB("popover-shared",[cM("center-arrow",[cB("popover-arrow",`${n}: calc(max(${f}, ${v}) ${u?"+":"-"} var(--v-offset-${r?"left":"top"}));`)])])])})})]);function getArrowOffset(e){return["top","bottom"].includes(e.split("-")[0])?"var(--n-arrow-offset)":"var(--n-arrow-offset-vertical)"}function placementStyle(e,n){const r=e.split("-")[0],o=["top","bottom"].includes(r)?"height: var(--n-space-arrow);":"width: var(--n-space-arrow);";return c$1(`[v-placement="${e}"] >`,[cB("popover-shared",`
 margin-${oppositePlacement[r]}: var(--n-space);
 `,[cM("show-arrow",`
 margin-${oppositePlacement[r]}: var(--n-space-arrow);
 `),cM("overlap",`
 margin: 0;
 `),cCB("popover-arrow-wrapper",`
 right: 0;
 left: 0;
 top: 0;
 bottom: 0;
 ${r}: 100%;
 ${oppositePlacement[r]}: auto;
 ${o}
 `,[cB("popover-arrow",n)])])])}const popoverBodyProps=Object.assign(Object.assign({},useTheme.props),{to:useAdjustedTo.propTo,show:Boolean,trigger:String,showArrow:Boolean,delay:Number,duration:Number,raw:Boolean,arrowPointToCenter:Boolean,arrowStyle:[String,Object],displayDirective:String,x:Number,y:Number,flip:Boolean,overlap:Boolean,placement:String,width:[Number,String],keepAliveOnHover:Boolean,scrollable:Boolean,contentStyle:[Object,String],headerStyle:[Object,String],footerStyle:[Object,String],internalDeactivateImmediately:Boolean,animated:Boolean,onClickoutside:Function,internalTrapFocus:Boolean,internalOnAfterLeave:Function,minWidth:Number,maxWidth:Number}),renderArrow=({arrowStyle:e,clsPrefix:n})=>h("div",{key:"__popover-arrow__",class:`${n}-popover-arrow-wrapper`},h("div",{class:`${n}-popover-arrow`,style:e})),NPopoverBody=defineComponent({name:"PopoverBody",inheritAttrs:!1,props:popoverBodyProps,setup(e,{slots:n,attrs:r}){const{namespaceRef:o,mergedClsPrefixRef:s,inlineThemeDisabled:u}=useConfig(e),d=useTheme("Popover","-popover",style$d,popoverLight$1,e,s),f=ref(null),v=inject("NPopover"),m=ref(null),_=ref(e.show),g=ref(!1);watchEffect(()=>{const{show:N}=e;N&&!isJsdom()&&!e.internalDeactivateImmediately&&(g.value=!0)});const y=computed(()=>{const{trigger:N,onClickoutside:D}=e,X=[],{positionManuallyRef:{value:U}}=v;return U||(N==="click"&&!D&&X.push([clickoutside$1,I,void 0,{capture:!0}]),N==="hover"&&X.push([mousemoveoutside$1,M])),D&&X.push([clickoutside$1,I,void 0,{capture:!0}]),(e.displayDirective==="show"||e.animated&&g.value)&&X.push([vShow,e.show]),X}),w=computed(()=>{const N=e.width==="trigger"?void 0:formatLength(e.width),D=[];N&&D.push({width:N});const{maxWidth:X,minWidth:U}=e;return X&&D.push({maxWidth:formatLength(X)}),U&&D.push({maxWidth:formatLength(U)}),u||D.push(x.value),D}),x=computed(()=>{const{common:{cubicBezierEaseInOut:N,cubicBezierEaseIn:D,cubicBezierEaseOut:X},self:{space:U,spaceArrow:Z,padding:j,fontSize:Q,textColor:ve,dividerColor:Se,color:we,boxShadow:oe,borderRadius:ne,arrowHeight:q,arrowOffset:H,arrowOffsetVertical:Y}}=d.value;return{"--n-box-shadow":oe,"--n-bezier":N,"--n-bezier-ease-in":D,"--n-bezier-ease-out":X,"--n-font-size":Q,"--n-text-color":ve,"--n-color":we,"--n-divider-color":Se,"--n-border-radius":ne,"--n-arrow-height":q,"--n-arrow-offset":H,"--n-arrow-offset-vertical":Y,"--n-padding":j,"--n-space":U,"--n-space-arrow":Z}}),k=u?useThemeClass("popover",void 0,x,e):void 0;v.setBodyInstance({syncPosition:S}),onBeforeUnmount(()=>{v.setBodyInstance(null)}),watch(toRef(e,"show"),N=>{e.animated||(N?_.value=!0:_.value=!1)});function S(){var N;(N=f.value)===null||N===void 0||N.syncPosition()}function E(N){e.trigger==="hover"&&e.keepAliveOnHover&&e.show&&v.handleMouseEnter(N)}function T(N){e.trigger==="hover"&&e.keepAliveOnHover&&v.handleMouseLeave(N)}function M(N){e.trigger==="hover"&&!F().contains(getPreciseEventTarget(N))&&v.handleMouseMoveOutside(N)}function I(N){(e.trigger==="click"&&!F().contains(getPreciseEventTarget(N))||e.onClickoutside)&&v.handleClickOutside(N)}function F(){return v.getTriggerElement()}provide(popoverBodyInjectionKey,m),provide(drawerBodyInjectionKey,null),provide(modalBodyInjectionKey,null);function O(){if(k==null||k.onRender(),!(e.displayDirective==="show"||e.show||e.animated&&g.value))return null;let D;const X=v.internalRenderBodyRef.value,{value:U}=s;if(X)D=X([`${U}-popover-shared`,k==null?void 0:k.themeClass.value,e.overlap&&`${U}-popover-shared--overlap`,e.showArrow&&`${U}-popover-shared--show-arrow`,e.arrowPointToCenter&&`${U}-popover-shared--center-arrow`],m,w.value,E,T);else{const{value:Z}=v.extraClassRef,{internalTrapFocus:j}=e,Q=!isSlotEmpty(n.header)||!isSlotEmpty(n.footer),ve=()=>{var Se;const we=Q?h(Fragment,null,resolveWrappedSlot(n.header,q=>q?h("div",{class:`${U}-popover__header`,style:e.headerStyle},q):null),resolveWrappedSlot(n.default,q=>q?h("div",{class:`${U}-popover__content`,style:e.contentStyle},n):null),resolveWrappedSlot(n.footer,q=>q?h("div",{class:`${U}-popover__footer`,style:e.footerStyle},q):null)):e.scrollable?(Se=n.default)===null||Se===void 0?void 0:Se.call(n):h("div",{class:`${U}-popover__content`,style:e.contentStyle},n),oe=e.scrollable?h(XScrollbar,{contentClass:Q?void 0:`${U}-popover__content`,contentStyle:Q?void 0:e.contentStyle},{default:()=>we}):we,ne=e.showArrow?renderArrow({arrowStyle:e.arrowStyle,clsPrefix:U}):null;return[oe,ne]};D=h("div",mergeProps({class:[`${U}-popover`,`${U}-popover-shared`,k==null?void 0:k.themeClass.value,Z.map(Se=>`${U}-${Se}`),{[`${U}-popover--scrollable`]:e.scrollable,[`${U}-popover--show-header-or-footer`]:Q,[`${U}-popover--raw`]:e.raw,[`${U}-popover-shared--overlap`]:e.overlap,[`${U}-popover-shared--show-arrow`]:e.showArrow,[`${U}-popover-shared--center-arrow`]:e.arrowPointToCenter}],ref:m,style:w.value,onKeydown:v.handleKeydown,onMouseenter:E,onMouseleave:T},r),j?h(FocusTrap,{active:e.show,autoFocus:!0},{default:ve}):ve())}return withDirectives(D,y.value)}return{displayed:g,namespace:o,isMounted:v.isMountedRef,zIndex:v.zIndexRef,followerRef:f,adjustedTo:useAdjustedTo(e),followerEnabled:_,renderContentNode:O}},render(){return h(VFollower,{ref:"followerRef",zIndex:this.zIndex,show:this.show,enabled:this.followerEnabled,to:this.adjustedTo,x:this.x,y:this.y,flip:this.flip,placement:this.placement,containerClass:this.namespace,overlap:this.overlap,width:this.width==="trigger"?"target":void 0,teleportDisabled:this.adjustedTo===useAdjustedTo.tdkey},{default:()=>this.animated?h(Transition,{name:"popover-transition",appear:this.isMounted,onEnter:()=>{this.followerEnabled=!0},onAfterLeave:()=>{var e;(e=this.internalOnAfterLeave)===null||e===void 0||e.call(this),this.followerEnabled=!1,this.displayed=!1}},{default:this.renderContentNode}):this.renderContentNode()})}}),bodyPropKeys=Object.keys(popoverBodyProps),triggerEventMap={focus:["onFocus","onBlur"],click:["onClick"],hover:["onMouseenter","onMouseleave"],manual:[],nested:["onFocus","onBlur","onMouseenter","onMouseleave","onClick"]};function appendEvents(e,n,r){triggerEventMap[n].forEach(o=>{e.props?e.props=Object.assign({},e.props):e.props={};const s=e.props[o],u=r[o];s?e.props[o]=(...d)=>{s(...d),u(...d)}:e.props[o]=u})}const textVNodeType=createTextVNode("").type,popoverBaseProps={show:{type:Boolean,default:void 0},defaultShow:Boolean,showArrow:{type:Boolean,default:!0},trigger:{type:String,default:"hover"},delay:{type:Number,default:100},duration:{type:Number,default:100},raw:Boolean,placement:{type:String,default:"top"},x:Number,y:Number,arrowPointToCenter:Boolean,disabled:Boolean,getDisabled:Function,displayDirective:{type:String,default:"if"},arrowStyle:[String,Object],flip:{type:Boolean,default:!0},animated:{type:Boolean,default:!0},width:{type:[Number,String],default:void 0},overlap:Boolean,keepAliveOnHover:{type:Boolean,default:!0},zIndex:Number,to:useAdjustedTo.propTo,scrollable:Boolean,contentStyle:[Object,String],headerStyle:[Object,String],footerStyle:[Object,String],onClickoutside:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],internalDeactivateImmediately:Boolean,internalSyncTargetWithParent:Boolean,internalInheritedEventHandlers:{type:Array,default:()=>[]},internalTrapFocus:Boolean,internalExtraClass:{type:Array,default:()=>[]},onShow:[Function,Array],onHide:[Function,Array],arrow:{type:Boolean,default:void 0},minWidth:Number,maxWidth:Number},popoverProps=Object.assign(Object.assign(Object.assign({},useTheme.props),popoverBaseProps),{internalOnAfterLeave:Function,internalRenderBody:Function}),NPopover=defineComponent({name:"Popover",inheritAttrs:!1,props:popoverProps,__popover__:!0,setup(e){const n=isMounted(),r=ref(null),o=computed(()=>e.show),s=ref(e.defaultShow),u=useMergedState(o,s),d=useMemo(()=>e.disabled?!1:u.value),f=()=>{if(e.disabled)return!0;const{getDisabled:ve}=e;return!!(ve!=null&&ve())},v=()=>f()?!1:u.value,m=useCompitable(e,["arrow","showArrow"]),_=computed(()=>e.overlap?!1:m.value);let g=null;const y=ref(null),w=ref(null),x=useMemo(()=>e.x!==void 0&&e.y!==void 0);function k(ve){const{"onUpdate:show":Se,onUpdateShow:we,onShow:oe,onHide:ne}=e;s.value=ve,Se&&call(Se,ve),we&&call(we,ve),ve&&oe&&call(oe,!0),ve&&ne&&call(ne,!1)}function S(){g&&g.syncPosition()}function E(){const{value:ve}=y;ve&&(window.clearTimeout(ve),y.value=null)}function T(){const{value:ve}=w;ve&&(window.clearTimeout(ve),w.value=null)}function M(){const ve=f();if(e.trigger==="focus"&&!ve){if(v())return;k(!0)}}function I(){const ve=f();if(e.trigger==="focus"&&!ve){if(!v())return;k(!1)}}function F(){const ve=f();if(e.trigger==="hover"&&!ve){if(T(),y.value!==null||v())return;const Se=()=>{k(!0),y.value=null},{delay:we}=e;we===0?Se():y.value=window.setTimeout(Se,we)}}function O(){const ve=f();if(e.trigger==="hover"&&!ve){if(E(),w.value!==null||!v())return;const Se=()=>{k(!1),w.value=null},{duration:we}=e;we===0?Se():w.value=window.setTimeout(Se,we)}}function N(){O()}function D(ve){var Se;!v()||(e.trigger==="click"&&(E(),T(),k(!1)),(Se=e.onClickoutside)===null||Se===void 0||Se.call(e,ve))}function X(){if(e.trigger==="click"&&!f()){E(),T();const ve=!v();k(ve)}}function U(ve){!e.internalTrapFocus||ve.key==="Escape"&&(E(),T(),k(!1))}function Z(ve){s.value=ve}function j(){var ve;return(ve=r.value)===null||ve===void 0?void 0:ve.targetRef}function Q(ve){g=ve}return provide("NPopover",{getTriggerElement:j,handleKeydown:U,handleMouseEnter:F,handleMouseLeave:O,handleClickOutside:D,handleMouseMoveOutside:N,setBodyInstance:Q,positionManuallyRef:x,isMountedRef:n,zIndexRef:toRef(e,"zIndex"),extraClassRef:toRef(e,"internalExtraClass"),internalRenderBodyRef:toRef(e,"internalRenderBody")}),watchEffect(()=>{u.value&&f()&&k(!1)}),{binderInstRef:r,positionManually:x,mergedShowConsideringDisabledProp:d,uncontrolledShow:s,mergedShowArrow:_,getMergedShow:v,setShow:Z,handleClick:X,handleMouseEnter:F,handleMouseLeave:O,handleFocus:M,handleBlur:I,syncPosition:S}},render(){var e;const{positionManually:n,$slots:r}=this;let o,s=!1;if(!n&&(r.activator?o=getFirstSlotVNode(r,"activator"):o=getFirstSlotVNode(r,"trigger"),o)){o=cloneVNode(o),o=o.type===textVNodeType?h("span",[o]):o;const u={onClick:this.handleClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onFocus:this.handleFocus,onBlur:this.handleBlur};if(!((e=o.type)===null||e===void 0)&&e.__popover__)s=!0,o.props||(o.props={internalSyncTargetWithParent:!0,internalInheritedEventHandlers:[]}),o.props.internalSyncTargetWithParent=!0,o.props.internalInheritedEventHandlers?o.props.internalInheritedEventHandlers=[u,...o.props.internalInheritedEventHandlers]:o.props.internalInheritedEventHandlers=[u];else{const{internalInheritedEventHandlers:d}=this,f=[u,...d],v={onBlur:m=>{f.forEach(_=>{_.onBlur(m)})},onFocus:m=>{f.forEach(_=>{_.onFocus(m)})},onClick:m=>{f.forEach(_=>{_.onClick(m)})},onMouseenter:m=>{f.forEach(_=>{_.onMouseenter(m)})},onMouseleave:m=>{f.forEach(_=>{_.onMouseleave(m)})}};appendEvents(o,d?"nested":n?"manual":this.trigger,v)}}return h(VBinder,{ref:"binderInstRef",syncTarget:!s,syncTargetWithParent:this.internalSyncTargetWithParent},{default:()=>{this.mergedShowConsideringDisabledProp;const u=this.getMergedShow();return[this.internalTrapFocus&&u?withDirectives(h("div",{style:{position:"fixed",inset:0}}),[[zindexable$1,{enabled:u,zIndex:this.zIndex}]]):null,n?null:h(VTarget,null,{default:()=>o}),h(NPopoverBody,keep(this.$props,bodyPropKeys,Object.assign(Object.assign({},this.$attrs),{showArrow:this.mergedShowArrow,show:u})),{default:()=>{var d,f;return(f=(d=this.$slots).default)===null||f===void 0?void 0:f.call(d)},header:()=>{var d,f;return(f=(d=this.$slots).header)===null||f===void 0?void 0:f.call(d)},footer:()=>{var d,f;return(f=(d=this.$slots).footer)===null||f===void 0?void 0:f.call(d)}})]}})}}),commonVariables$3={closeIconSizeTiny:"12px",closeIconSizeSmall:"12px",closeIconSizeMedium:"14px",closeIconSizeLarge:"14px",closeSizeTiny:"16px",closeSizeSmall:"16px",closeSizeMedium:"18px",closeSizeLarge:"18px",padding:"0 7px",closeMargin:"0 0 0 4px",closeMarginRtl:"0 4px 0 0"},self$c=e=>{const{textColor2:n,primaryColorHover:r,primaryColorPressed:o,primaryColor:s,infoColor:u,successColor:d,warningColor:f,errorColor:v,baseColor:m,borderColor:_,opacityDisabled:g,tagColor:y,closeIconColor:w,closeIconColorHover:x,closeIconColorPressed:k,borderRadiusSmall:S,fontSizeMini:E,fontSizeTiny:T,fontSizeSmall:M,fontSizeMedium:I,heightMini:F,heightTiny:O,heightSmall:N,heightMedium:D,closeColorHover:X,closeColorPressed:U,buttonColor2Hover:Z,buttonColor2Pressed:j,fontWeightStrong:Q}=e;return Object.assign(Object.assign({},commonVariables$3),{closeBorderRadius:S,heightTiny:F,heightSmall:O,heightMedium:N,heightLarge:D,borderRadius:S,opacityDisabled:g,fontSizeTiny:E,fontSizeSmall:T,fontSizeMedium:M,fontSizeLarge:I,fontWeightStrong:Q,textColorCheckable:n,textColorHoverCheckable:n,textColorPressedCheckable:n,textColorChecked:m,colorCheckable:"#0000",colorHoverCheckable:Z,colorPressedCheckable:j,colorChecked:s,colorCheckedHover:r,colorCheckedPressed:o,border:`1px solid ${_}`,textColor:n,color:y,colorBordered:"rgb(250, 250, 252)",closeIconColor:w,closeIconColorHover:x,closeIconColorPressed:k,closeColorHover:X,closeColorPressed:U,borderPrimary:`1px solid ${changeColor(s,{alpha:.3})}`,textColorPrimary:s,colorPrimary:changeColor(s,{alpha:.12}),colorBorderedPrimary:changeColor(s,{alpha:.1}),closeIconColorPrimary:s,closeIconColorHoverPrimary:s,closeIconColorPressedPrimary:s,closeColorHoverPrimary:changeColor(s,{alpha:.12}),closeColorPressedPrimary:changeColor(s,{alpha:.18}),borderInfo:`1px solid ${changeColor(u,{alpha:.3})}`,textColorInfo:u,colorInfo:changeColor(u,{alpha:.12}),colorBorderedInfo:changeColor(u,{alpha:.1}),closeIconColorInfo:u,closeIconColorHoverInfo:u,closeIconColorPressedInfo:u,closeColorHoverInfo:changeColor(u,{alpha:.12}),closeColorPressedInfo:changeColor(u,{alpha:.18}),borderSuccess:`1px solid ${changeColor(d,{alpha:.3})}`,textColorSuccess:d,colorSuccess:changeColor(d,{alpha:.12}),colorBorderedSuccess:changeColor(d,{alpha:.1}),closeIconColorSuccess:d,closeIconColorHoverSuccess:d,closeIconColorPressedSuccess:d,closeColorHoverSuccess:changeColor(d,{alpha:.12}),closeColorPressedSuccess:changeColor(d,{alpha:.18}),borderWarning:`1px solid ${changeColor(f,{alpha:.35})}`,textColorWarning:f,colorWarning:changeColor(f,{alpha:.15}),colorBorderedWarning:changeColor(f,{alpha:.12}),closeIconColorWarning:f,closeIconColorHoverWarning:f,closeIconColorPressedWarning:f,closeColorHoverWarning:changeColor(f,{alpha:.12}),closeColorPressedWarning:changeColor(f,{alpha:.18}),borderError:`1px solid ${changeColor(v,{alpha:.23})}`,textColorError:v,colorError:changeColor(v,{alpha:.1}),colorBorderedError:changeColor(v,{alpha:.08}),closeIconColorError:v,closeIconColorHoverError:v,closeIconColorPressedError:v,closeColorHoverError:changeColor(v,{alpha:.12}),closeColorPressedError:changeColor(v,{alpha:.18})})},tagLight={name:"Tag",common:commonLight,self:self$c},tagLight$1=tagLight,commonProps={color:Object,type:{type:String,default:"default"},round:Boolean,size:{type:String,default:"medium"},closable:Boolean,disabled:{type:Boolean,default:void 0}},style$c=cB("tag",`
 white-space: nowrap;
 position: relative;
 box-sizing: border-box;
 cursor: default;
 display: inline-flex;
 align-items: center;
 flex-wrap: nowrap;
 padding: var(--n-padding);
 border-radius: var(--n-border-radius);
 color: var(--n-text-color);
 background-color: var(--n-color);
 transition: 
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 opacity .3s var(--n-bezier);
 line-height: 1;
 height: var(--n-height);
 font-size: var(--n-font-size);
`,[cM("strong",`
 font-weight: var(--n-font-weight-strong);
 `),cE("border",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 border: var(--n-border);
 transition: border-color .3s var(--n-bezier);
 `),cE("icon",`
 display: flex;
 margin: 0 4px 0 0;
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 font-size: var(--n-avatar-size-override);
 `),cE("avatar",`
 display: flex;
 margin: 0 6px 0 0;
 `),cE("close",`
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `),cM("round",`
 padding: 0 calc(var(--n-height) / 3);
 border-radius: calc(var(--n-height) / 2);
 `,[cE("icon",`
 margin: 0 4px 0 calc((var(--n-height) - 8px) / -2);
 `),cE("avatar",`
 margin: 0 6px 0 calc((var(--n-height) - 8px) / -2);
 `),cM("closable",`
 padding: 0 calc(var(--n-height) / 4) 0 calc(var(--n-height) / 3);
 `)]),cM("icon, avatar",[cM("round",`
 padding: 0 calc(var(--n-height) / 3) 0 calc(var(--n-height) / 2);
 `)]),cM("disabled",`
 cursor: not-allowed !important;
 opacity: var(--n-opacity-disabled);
 `),cM("checkable",`
 cursor: pointer;
 box-shadow: none;
 color: var(--n-text-color-checkable);
 background-color: var(--n-color-checkable);
 `,[cNotM("disabled",[c$1("&:hover","background-color: var(--n-color-hover-checkable);",[cNotM("checked","color: var(--n-text-color-hover-checkable);")]),c$1("&:active","background-color: var(--n-color-pressed-checkable);",[cNotM("checked","color: var(--n-text-color-pressed-checkable);")])]),cM("checked",`
 color: var(--n-text-color-checked);
 background-color: var(--n-color-checked);
 `,[cNotM("disabled",[c$1("&:hover","background-color: var(--n-color-checked-hover);"),c$1("&:active","background-color: var(--n-color-checked-pressed);")])])])]),tagProps=Object.assign(Object.assign(Object.assign({},useTheme.props),commonProps),{bordered:{type:Boolean,default:void 0},checked:Boolean,checkable:Boolean,strong:Boolean,triggerClickOnClose:Boolean,onClose:[Array,Function],onMouseenter:Function,onMouseleave:Function,"onUpdate:checked":Function,onUpdateChecked:Function,internalCloseFocusable:{type:Boolean,default:!0},internalCloseIsButtonTag:{type:Boolean,default:!0},onCheckedChange:Function}),tagInjectionKey="n-tag",NTag=defineComponent({name:"Tag",props:tagProps,setup(e){const n=ref(null),{mergedBorderedRef:r,mergedClsPrefixRef:o,inlineThemeDisabled:s,mergedRtlRef:u}=useConfig(e),d=useTheme("Tag","-tag",style$c,tagLight$1,e,o);provide(tagInjectionKey,{roundRef:toRef(e,"round")});function f(w){if(!e.disabled&&e.checkable){const{checked:x,onCheckedChange:k,onUpdateChecked:S,"onUpdate:checked":E}=e;S&&S(!x),E&&E(!x),k&&k(!x)}}function v(w){if(e.triggerClickOnClose||w.stopPropagation(),!e.disabled){const{onClose:x}=e;x&&call(x,w)}}const m={setTextContent(w){const{value:x}=n;x&&(x.textContent=w)}},_=useRtl("Tag",u,o),g=computed(()=>{const{type:w,size:x,color:{color:k,textColor:S}={}}=e,{common:{cubicBezierEaseInOut:E},self:{padding:T,closeMargin:M,closeMarginRtl:I,borderRadius:F,opacityDisabled:O,textColorCheckable:N,textColorHoverCheckable:D,textColorPressedCheckable:X,textColorChecked:U,colorCheckable:Z,colorHoverCheckable:j,colorPressedCheckable:Q,colorChecked:ve,colorCheckedHover:Se,colorCheckedPressed:we,closeBorderRadius:oe,fontWeightStrong:ne,[createKey("colorBordered",w)]:q,[createKey("closeSize",x)]:H,[createKey("closeIconSize",x)]:Y,[createKey("fontSize",x)]:le,[createKey("height",x)]:Ce,[createKey("color",w)]:Te,[createKey("textColor",w)]:ke,[createKey("border",w)]:Ee,[createKey("closeIconColor",w)]:Pe,[createKey("closeIconColorHover",w)]:Be,[createKey("closeIconColorPressed",w)]:$e,[createKey("closeColorHover",w)]:Oe,[createKey("closeColorPressed",w)]:Ne}}=d.value;return{"--n-font-weight-strong":ne,"--n-avatar-size-override":`calc(${Ce} - 8px)`,"--n-bezier":E,"--n-border-radius":F,"--n-border":Ee,"--n-close-icon-size":Y,"--n-close-color-pressed":Ne,"--n-close-color-hover":Oe,"--n-close-border-radius":oe,"--n-close-icon-color":Pe,"--n-close-icon-color-hover":Be,"--n-close-icon-color-pressed":$e,"--n-close-icon-color-disabled":Pe,"--n-close-margin":M,"--n-close-margin-rtl":I,"--n-close-size":H,"--n-color":k||(r.value?q:Te),"--n-color-checkable":Z,"--n-color-checked":ve,"--n-color-checked-hover":Se,"--n-color-checked-pressed":we,"--n-color-hover-checkable":j,"--n-color-pressed-checkable":Q,"--n-font-size":le,"--n-height":Ce,"--n-opacity-disabled":O,"--n-padding":T,"--n-text-color":S||ke,"--n-text-color-checkable":N,"--n-text-color-checked":U,"--n-text-color-hover-checkable":D,"--n-text-color-pressed-checkable":X}}),y=s?useThemeClass("tag",computed(()=>{let w="";const{type:x,size:k,color:{color:S,textColor:E}={}}=e;return w+=x[0],w+=k[0],S&&(w+=`a${color2Class(S)}`),E&&(w+=`b${color2Class(E)}`),r.value&&(w+="c"),w}),g,e):void 0;return Object.assign(Object.assign({},m),{rtlEnabled:_,mergedClsPrefix:o,contentRef:n,mergedBordered:r,handleClick:f,handleCloseClick:v,cssVars:s?void 0:g,themeClass:y==null?void 0:y.themeClass,onRender:y==null?void 0:y.onRender})},render(){var e,n;const{mergedClsPrefix:r,rtlEnabled:o,closable:s,color:{borderColor:u}={},round:d,onRender:f,$slots:v}=this;f==null||f();const m=resolveWrappedSlot(v.avatar,g=>g&&h("div",{class:`${r}-tag__avatar`},g)),_=resolveWrappedSlot(v.icon,g=>g&&h("div",{class:`${r}-tag__icon`},g));return h("div",{class:[`${r}-tag`,this.themeClass,{[`${r}-tag--rtl`]:o,[`${r}-tag--strong`]:this.strong,[`${r}-tag--disabled`]:this.disabled,[`${r}-tag--checkable`]:this.checkable,[`${r}-tag--checked`]:this.checkable&&this.checked,[`${r}-tag--round`]:d,[`${r}-tag--avatar`]:m,[`${r}-tag--icon`]:_,[`${r}-tag--closable`]:s}],style:this.cssVars,onClick:this.handleClick,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},_||m,h("span",{class:`${r}-tag__content`,ref:"contentRef"},(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e)),!this.checkable&&s?h(NBaseClose,{clsPrefix:r,class:`${r}-tag__close`,disabled:this.disabled,onClick:this.handleCloseClick,focusable:this.internalCloseFocusable,round:d,isButtonTag:this.internalCloseIsButtonTag,absolute:!0}):null,!this.checkable&&this.mergedBordered?h("div",{class:`${r}-tag__border`,style:{borderColor:u}}):null)}}),style$b=cB("base-clear",`
 flex-shrink: 0;
 height: 1em;
 width: 1em;
 position: relative;
`,[c$1(">",[cE("clear",`
 font-size: var(--n-clear-size);
 height: 1em;
 width: 1em;
 cursor: pointer;
 color: var(--n-clear-color);
 transition: color .3s var(--n-bezier);
 display: flex;
 `,[c$1("&:hover",`
 color: var(--n-clear-color-hover)!important;
 `),c$1("&:active",`
 color: var(--n-clear-color-pressed)!important;
 `)]),cE("placeholder",`
 display: flex;
 `),cE("clear, placeholder",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[iconSwitchTransition({originalTransform:"translateX(-50%) translateY(-50%)",left:"50%",top:"50%"})])])]),NBaseClear=defineComponent({name:"BaseClear",props:{clsPrefix:{type:String,required:!0},show:Boolean,onClear:Function},setup(e){return useStyle("-base-clear",style$b,toRef(e,"clsPrefix")),{handleMouseDown(n){n.preventDefault()}}},render(){const{clsPrefix:e}=this;return h("div",{class:`${e}-base-clear`},h(NIconSwitchTransition,null,{default:()=>{var n,r;return this.show?h("div",{key:"dismiss",class:`${e}-base-clear__clear`,onClick:this.onClear,onMousedown:this.handleMouseDown,"data-clear":!0},resolveSlot(this.$slots.icon,()=>[h(NBaseIcon,{clsPrefix:e},{default:()=>h(ClearIcon,null)})])):h("div",{key:"icon",class:`${e}-base-clear__placeholder`},(r=(n=this.$slots).placeholder)===null||r===void 0?void 0:r.call(n))}}))}}),NBaseSuffix=defineComponent({name:"InternalSelectionSuffix",props:{clsPrefix:{type:String,required:!0},showArrow:{type:Boolean,default:void 0},showClear:{type:Boolean,default:void 0},loading:{type:Boolean,default:!1},onClear:Function},setup(e,{slots:n}){return()=>{const{clsPrefix:r}=e;return h(NBaseLoading,{clsPrefix:r,class:`${r}-base-suffix`,strokeWidth:24,scale:.85,show:e.loading},{default:()=>e.showArrow?h(NBaseClear,{clsPrefix:r,show:e.showClear,onClear:e.onClear},{placeholder:()=>h(NBaseIcon,{clsPrefix:r,class:`${r}-base-suffix__arrow`},{default:()=>resolveSlot(n.default,()=>[h(ChevronDownIcon,null)])})}):null})}}}),commonVars$2={paddingSingle:"0 26px 0 12px",paddingMultiple:"3px 26px 0 12px",clearSize:"16px",arrowSize:"16px"},self$b=e=>{const{borderRadius:n,textColor2:r,textColorDisabled:o,inputColor:s,inputColorDisabled:u,primaryColor:d,primaryColorHover:f,warningColor:v,warningColorHover:m,errorColor:_,errorColorHover:g,borderColor:y,iconColor:w,iconColorDisabled:x,clearColor:k,clearColorHover:S,clearColorPressed:E,placeholderColor:T,placeholderColorDisabled:M,fontSizeTiny:I,fontSizeSmall:F,fontSizeMedium:O,fontSizeLarge:N,heightTiny:D,heightSmall:X,heightMedium:U,heightLarge:Z}=e;return Object.assign(Object.assign({},commonVars$2),{fontSizeTiny:I,fontSizeSmall:F,fontSizeMedium:O,fontSizeLarge:N,heightTiny:D,heightSmall:X,heightMedium:U,heightLarge:Z,borderRadius:n,textColor:r,textColorDisabled:o,placeholderColor:T,placeholderColorDisabled:M,color:s,colorDisabled:u,colorActive:s,border:`1px solid ${y}`,borderHover:`1px solid ${f}`,borderActive:`1px solid ${d}`,borderFocus:`1px solid ${f}`,boxShadowHover:"none",boxShadowActive:`0 0 0 2px ${changeColor(d,{alpha:.2})}`,boxShadowFocus:`0 0 0 2px ${changeColor(d,{alpha:.2})}`,caretColor:d,arrowColor:w,arrowColorDisabled:x,loadingColor:d,borderWarning:`1px solid ${v}`,borderHoverWarning:`1px solid ${m}`,borderActiveWarning:`1px solid ${v}`,borderFocusWarning:`1px solid ${m}`,boxShadowHoverWarning:"none",boxShadowActiveWarning:`0 0 0 2px ${changeColor(v,{alpha:.2})}`,boxShadowFocusWarning:`0 0 0 2px ${changeColor(v,{alpha:.2})}`,colorActiveWarning:s,caretColorWarning:v,borderError:`1px solid ${_}`,borderHoverError:`1px solid ${g}`,borderActiveError:`1px solid ${_}`,borderFocusError:`1px solid ${g}`,boxShadowHoverError:"none",boxShadowActiveError:`0 0 0 2px ${changeColor(_,{alpha:.2})}`,boxShadowFocusError:`0 0 0 2px ${changeColor(_,{alpha:.2})}`,colorActiveError:s,caretColorError:_,clearColor:k,clearColorHover:S,clearColorPressed:E})},internalSelectionLight={name:"InternalSelection",common:commonLight,peers:{Popover:popoverLight$1},self:self$b},internalSelectionLight$1=internalSelectionLight,style$a=c$1([cB("base-selection",`
 position: relative;
 z-index: auto;
 box-shadow: none;
 width: 100%;
 max-width: 100%;
 display: inline-block;
 vertical-align: bottom;
 border-radius: var(--n-border-radius);
 min-height: var(--n-height);
 line-height: 1.5;
 font-size: var(--n-font-size);
 `,[cB("base-loading",`
 color: var(--n-loading-color);
 `),cB("base-selection-tags","min-height: var(--n-height);"),cE("border, state-border",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border: var(--n-border);
 border-radius: inherit;
 transition:
 box-shadow .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `),cE("state-border",`
 z-index: 1;
 border-color: #0000;
 `),cB("base-suffix",`
 cursor: pointer;
 position: absolute;
 top: 50%;
 transform: translateY(-50%);
 right: 10px;
 `,[cE("arrow",`
 font-size: var(--n-arrow-size);
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 `)]),cB("base-selection-overlay",`
 display: flex;
 align-items: center;
 white-space: nowrap;
 pointer-events: none;
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 padding: var(--n-padding-single);
 transition: color .3s var(--n-bezier);
 `,[cE("wrapper",`
 flex-basis: 0;
 flex-grow: 1;
 overflow: hidden;
 text-overflow: ellipsis;
 `)]),cB("base-selection-placeholder",`
 color: var(--n-placeholder-color);
 `,[cE("inner",`
 max-width: 100%;
 overflow: hidden;
 `)]),cB("base-selection-tags",`
 cursor: pointer;
 outline: none;
 box-sizing: border-box;
 position: relative;
 z-index: auto;
 display: flex;
 padding: var(--n-padding-multiple);
 flex-wrap: wrap;
 align-items: center;
 width: 100%;
 vertical-align: bottom;
 background-color: var(--n-color);
 border-radius: inherit;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 `),cB("base-selection-label",`
 height: var(--n-height);
 display: inline-flex;
 width: 100%;
 vertical-align: bottom;
 cursor: pointer;
 outline: none;
 z-index: auto;
 box-sizing: border-box;
 position: relative;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 border-radius: inherit;
 background-color: var(--n-color);
 align-items: center;
 `,[cB("base-selection-input",`
 font-size: inherit;
 line-height: inherit;
 outline: none;
 cursor: pointer;
 box-sizing: border-box;
 border:none;
 width: 100%;
 padding: var(--n-padding-single);
 background-color: #0000;
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 caret-color: var(--n-caret-color);
 `,[cE("content",`
 text-overflow: ellipsis;
 overflow: hidden;
 white-space: nowrap; 
 `)]),cE("render-label",`
 color: var(--n-text-color);
 `)]),cNotM("disabled",[c$1("&:hover",[cE("state-border",`
 box-shadow: var(--n-box-shadow-hover);
 border: var(--n-border-hover);
 `)]),cM("focus",[cE("state-border",`
 box-shadow: var(--n-box-shadow-focus);
 border: var(--n-border-focus);
 `)]),cM("active",[cE("state-border",`
 box-shadow: var(--n-box-shadow-active);
 border: var(--n-border-active);
 `),cB("base-selection-label","background-color: var(--n-color-active);"),cB("base-selection-tags","background-color: var(--n-color-active);")])]),cM("disabled","cursor: not-allowed;",[cE("arrow",`
 color: var(--n-arrow-color-disabled);
 `),cB("base-selection-label",`
 cursor: not-allowed;
 background-color: var(--n-color-disabled);
 `,[cB("base-selection-input",`
 cursor: not-allowed;
 color: var(--n-text-color-disabled);
 `),cE("render-label",`
 color: var(--n-text-color-disabled);
 `)]),cB("base-selection-tags",`
 cursor: not-allowed;
 background-color: var(--n-color-disabled);
 `),cB("base-selection-placeholder",`
 cursor: not-allowed;
 color: var(--n-placeholder-color-disabled);
 `)]),cB("base-selection-input-tag",`
 height: calc(var(--n-height) - 6px);
 line-height: calc(var(--n-height) - 6px);
 outline: none;
 display: none;
 position: relative;
 margin-bottom: 3px;
 max-width: 100%;
 vertical-align: bottom;
 `,[cE("input",`
 font-size: inherit;
 font-family: inherit;
 min-width: 1px;
 padding: 0;
 background-color: #0000;
 outline: none;
 border: none;
 max-width: 100%;
 overflow: hidden;
 width: 1em;
 line-height: inherit;
 cursor: pointer;
 color: var(--n-text-color);
 caret-color: var(--n-caret-color);
 `),cE("mirror",`
 position: absolute;
 left: 0;
 top: 0;
 white-space: pre;
 visibility: hidden;
 user-select: none;
 -webkit-user-select: none;
 opacity: 0;
 `)]),["warning","error"].map(e=>cM(`${e}-status`,[cE("state-border",`border: var(--n-border-${e});`),cNotM("disabled",[c$1("&:hover",[cE("state-border",`
 box-shadow: var(--n-box-shadow-hover-${e});
 border: var(--n-border-hover-${e});
 `)]),cM("active",[cE("state-border",`
 box-shadow: var(--n-box-shadow-active-${e});
 border: var(--n-border-active-${e});
 `),cB("base-selection-label",`background-color: var(--n-color-active-${e});`),cB("base-selection-tags",`background-color: var(--n-color-active-${e});`)]),cM("focus",[cE("state-border",`
 box-shadow: var(--n-box-shadow-focus-${e});
 border: var(--n-border-focus-${e});
 `)])])]))]),cB("base-selection-popover",`
 margin-bottom: -3px;
 display: flex;
 flex-wrap: wrap;
 margin-right: -8px;
 `),cB("base-selection-tag-wrapper",`
 max-width: 100%;
 display: inline-flex;
 padding: 0 7px 3px 0;
 `,[c$1("&:last-child","padding-right: 0;"),cB("tag",`
 font-size: 14px;
 max-width: 100%;
 `,[cE("content",`
 line-height: 1.25;
 text-overflow: ellipsis;
 overflow: hidden;
 `)])])]),NInternalSelection=defineComponent({name:"InternalSelection",props:Object.assign(Object.assign({},useTheme.props),{clsPrefix:{type:String,required:!0},bordered:{type:Boolean,default:void 0},active:Boolean,pattern:{type:String,default:""},placeholder:String,selectedOption:{type:Object,default:null},selectedOptions:{type:Array,default:null},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},multiple:Boolean,filterable:Boolean,clearable:Boolean,disabled:Boolean,size:{type:String,default:"medium"},loading:Boolean,autofocus:Boolean,showArrow:{type:Boolean,default:!0},inputProps:Object,focused:Boolean,renderTag:Function,onKeydown:Function,onClick:Function,onBlur:Function,onFocus:Function,onDeleteOption:Function,maxTagCount:[String,Number],onClear:Function,onPatternInput:Function,onPatternFocus:Function,onPatternBlur:Function,renderLabel:Function,status:String,inlineThemeDisabled:Boolean,ignoreComposition:{type:Boolean,default:!0},onResize:Function}),setup(e){const n=ref(null),r=ref(null),o=ref(null),s=ref(null),u=ref(null),d=ref(null),f=ref(null),v=ref(null),m=ref(null),_=ref(null),g=ref(!1),y=ref(!1),w=ref(!1),x=useTheme("InternalSelection","-internal-selection",style$a,internalSelectionLight$1,e,toRef(e,"clsPrefix")),k=computed(()=>e.clearable&&!e.disabled&&(w.value||e.active)),S=computed(()=>e.selectedOption?e.renderTag?e.renderTag({option:e.selectedOption,handleClose:()=>{}}):e.renderLabel?e.renderLabel(e.selectedOption,!0):render$1(e.selectedOption[e.labelField],e.selectedOption,!0):e.placeholder),E=computed(()=>{const De=e.selectedOption;if(!!De)return De[e.labelField]}),T=computed(()=>e.multiple?!!(Array.isArray(e.selectedOptions)&&e.selectedOptions.length):e.selectedOption!==null);function M(){var De;const{value:We}=n;if(We){const{value:Re}=r;Re&&(Re.style.width=`${We.offsetWidth}px`,e.maxTagCount!=="responsive"&&((De=m.value)===null||De===void 0||De.sync()))}}function I(){const{value:De}=_;De&&(De.style.display="none")}function F(){const{value:De}=_;De&&(De.style.display="inline-block")}watch(toRef(e,"active"),De=>{De||I()}),watch(toRef(e,"pattern"),()=>{e.multiple&&nextTick(M)});function O(De){const{onFocus:We}=e;We&&We(De)}function N(De){const{onBlur:We}=e;We&&We(De)}function D(De){const{onDeleteOption:We}=e;We&&We(De)}function X(De){const{onClear:We}=e;We&&We(De)}function U(De){const{onPatternInput:We}=e;We&&We(De)}function Z(De){var We;(!De.relatedTarget||!(!((We=o.value)===null||We===void 0)&&We.contains(De.relatedTarget)))&&O(De)}function j(De){var We;!((We=o.value)===null||We===void 0)&&We.contains(De.relatedTarget)||N(De)}function Q(De){X(De)}function ve(){w.value=!0}function Se(){w.value=!1}function we(De){!e.active||!e.filterable||De.target!==r.value&&De.preventDefault()}function oe(De){D(De)}function ne(De){if(De.key==="Backspace"&&!q.value&&!e.pattern.length){const{selectedOptions:We}=e;We!=null&&We.length&&oe(We[We.length-1])}}const q=ref(!1);let H=null;function Y(De){const{value:We}=n;if(We){const Re=De.target.value;We.textContent=Re,M()}e.ignoreComposition&&q.value?H=De:U(De)}function le(){q.value=!0}function Ce(){q.value=!1,e.ignoreComposition&&U(H),H=null}function Te(De){var We;y.value=!0,(We=e.onPatternFocus)===null||We===void 0||We.call(e,De)}function ke(De){var We;y.value=!1,(We=e.onPatternBlur)===null||We===void 0||We.call(e,De)}function Ee(){var De,We;if(e.filterable)y.value=!1,(De=d.value)===null||De===void 0||De.blur(),(We=r.value)===null||We===void 0||We.blur();else if(e.multiple){const{value:Re}=s;Re==null||Re.blur()}else{const{value:Re}=u;Re==null||Re.blur()}}function Pe(){var De,We,Re;e.filterable?(y.value=!1,(De=d.value)===null||De===void 0||De.focus()):e.multiple?(We=s.value)===null||We===void 0||We.focus():(Re=u.value)===null||Re===void 0||Re.focus()}function Be(){const{value:De}=r;De&&(F(),De.focus())}function $e(){const{value:De}=r;De&&De.blur()}function Oe(De){const{value:We}=f;We&&We.setTextContent(`+${De}`)}function Ne(){const{value:De}=v;return De}function J(){return r.value}let fe=null;function re(){fe!==null&&window.clearTimeout(fe)}function _e(){e.disabled||e.active||(re(),fe=window.setTimeout(()=>{T.value&&(g.value=!0)},100))}function be(){re()}function Ae(De){De||(re(),g.value=!1)}watch(T,De=>{De||(g.value=!1)}),onMounted(()=>{watchEffect(()=>{const De=d.value;!De||(De.tabIndex=e.disabled||y.value?-1:0)})}),useOnResize(o,e.onResize);const{inlineThemeDisabled:Le}=e,Ve=computed(()=>{const{size:De}=e,{common:{cubicBezierEaseInOut:We},self:{borderRadius:Re,color:He,placeholderColor:Ze,textColor:Xe,paddingSingle:at,paddingMultiple:ut,caretColor:ct,colorDisabled:mt,textColorDisabled:pt,placeholderColorDisabled:kt,colorActive:Ct,boxShadowFocus:ht,boxShadowActive:Pt,boxShadowHover:Ue,border:qe,borderFocus:Ye,borderHover:st,borderActive:ot,arrowColor:Qe,arrowColorDisabled:tt,loadingColor:nt,colorActiveWarning:it,boxShadowFocusWarning:lt,boxShadowActiveWarning:Et,boxShadowHoverWarning:St,borderWarning:Mt,borderFocusWarning:Lt,borderHoverWarning:Gt,borderActiveWarning:vn,colorActiveError:nn,boxShadowFocusError:Qt,boxShadowActiveError:un,boxShadowHoverError:dn,borderError:xn,borderFocusError:Pn,borderHoverError:Mn,borderActiveError:Fn,clearColor:ur,clearColorHover:xr,clearColorPressed:Dn,clearSize:Jn,arrowSize:Rr,[createKey("height",De)]:Qn,[createKey("fontSize",De)]:Wn}}=x.value;return{"--n-bezier":We,"--n-border":qe,"--n-border-active":ot,"--n-border-focus":Ye,"--n-border-hover":st,"--n-border-radius":Re,"--n-box-shadow-active":Pt,"--n-box-shadow-focus":ht,"--n-box-shadow-hover":Ue,"--n-caret-color":ct,"--n-color":He,"--n-color-active":Ct,"--n-color-disabled":mt,"--n-font-size":Wn,"--n-height":Qn,"--n-padding-single":at,"--n-padding-multiple":ut,"--n-placeholder-color":Ze,"--n-placeholder-color-disabled":kt,"--n-text-color":Xe,"--n-text-color-disabled":pt,"--n-arrow-color":Qe,"--n-arrow-color-disabled":tt,"--n-loading-color":nt,"--n-color-active-warning":it,"--n-box-shadow-focus-warning":lt,"--n-box-shadow-active-warning":Et,"--n-box-shadow-hover-warning":St,"--n-border-warning":Mt,"--n-border-focus-warning":Lt,"--n-border-hover-warning":Gt,"--n-border-active-warning":vn,"--n-color-active-error":nn,"--n-box-shadow-focus-error":Qt,"--n-box-shadow-active-error":un,"--n-box-shadow-hover-error":dn,"--n-border-error":xn,"--n-border-focus-error":Pn,"--n-border-hover-error":Mn,"--n-border-active-error":Fn,"--n-clear-size":Jn,"--n-clear-color":ur,"--n-clear-color-hover":xr,"--n-clear-color-pressed":Dn,"--n-arrow-size":Rr}}),Fe=Le?useThemeClass("internal-selection",computed(()=>e.size[0]),Ve,e):void 0;return{mergedTheme:x,mergedClearable:k,patternInputFocused:y,filterablePlaceholder:S,label:E,selected:T,showTagsPanel:g,isComposing:q,counterRef:f,counterWrapperRef:v,patternInputMirrorRef:n,patternInputRef:r,selfRef:o,multipleElRef:s,singleElRef:u,patternInputWrapperRef:d,overflowRef:m,inputTagElRef:_,handleMouseDown:we,handleFocusin:Z,handleClear:Q,handleMouseEnter:ve,handleMouseLeave:Se,handleDeleteOption:oe,handlePatternKeyDown:ne,handlePatternInputInput:Y,handlePatternInputBlur:ke,handlePatternInputFocus:Te,handleMouseEnterCounter:_e,handleMouseLeaveCounter:be,handleFocusout:j,handleCompositionEnd:Ce,handleCompositionStart:le,onPopoverUpdateShow:Ae,focus:Pe,focusInput:Be,blur:Ee,blurInput:$e,updateCounter:Oe,getCounter:Ne,getTail:J,renderLabel:e.renderLabel,cssVars:Le?void 0:Ve,themeClass:Fe==null?void 0:Fe.themeClass,onRender:Fe==null?void 0:Fe.onRender}},render(){const{status:e,multiple:n,size:r,disabled:o,filterable:s,maxTagCount:u,bordered:d,clsPrefix:f,onRender:v,renderTag:m,renderLabel:_}=this;v==null||v();const g=u==="responsive",y=typeof u=="number",w=g||y,x=h(Wrapper,null,{default:()=>h(NBaseSuffix,{clsPrefix:f,loading:this.loading,showArrow:this.showArrow,showClear:this.mergedClearable&&this.selected,onClear:this.handleClear},{default:()=>{var S,E;return(E=(S=this.$slots).arrow)===null||E===void 0?void 0:E.call(S)}})});let k;if(n){const{labelField:S}=this,E=j=>h("div",{class:`${f}-base-selection-tag-wrapper`,key:j.value},m?m({option:j,handleClose:()=>this.handleDeleteOption(j)}):h(NTag,{size:r,closable:!j.disabled,disabled:o,onClose:()=>this.handleDeleteOption(j),internalCloseIsButtonTag:!1,internalCloseFocusable:!1},{default:()=>_?_(j,!0):render$1(j[S],j,!0)})),T=()=>(y?this.selectedOptions.slice(0,u):this.selectedOptions).map(E),M=s?h("div",{class:`${f}-base-selection-input-tag`,ref:"inputTagElRef",key:"__input-tag__"},h("input",Object.assign({},this.inputProps,{ref:"patternInputRef",tabindex:-1,disabled:o,value:this.pattern,autofocus:this.autofocus,class:`${f}-base-selection-input-tag__input`,onBlur:this.handlePatternInputBlur,onFocus:this.handlePatternInputFocus,onKeydown:this.handlePatternKeyDown,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),h("span",{ref:"patternInputMirrorRef",class:`${f}-base-selection-input-tag__mirror`},this.pattern)):null,I=g?()=>h("div",{class:`${f}-base-selection-tag-wrapper`,ref:"counterWrapperRef"},h(NTag,{size:r,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,onMouseleave:this.handleMouseLeaveCounter,disabled:o})):void 0;let F;if(y){const j=this.selectedOptions.length-u;j>0&&(F=h("div",{class:`${f}-base-selection-tag-wrapper`,key:"__counter__"},h(NTag,{size:r,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,disabled:o},{default:()=>`+${j}`})))}const O=g?s?h(VOverflow,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,getTail:this.getTail,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:T,counter:I,tail:()=>M}):h(VOverflow,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:T,counter:I}):y?T().concat(F):T(),N=w?()=>h("div",{class:`${f}-base-selection-popover`},g?T():this.selectedOptions.map(E)):void 0,D=w?{show:this.showTagsPanel,trigger:"hover",overlap:!0,placement:"top",width:"trigger",onUpdateShow:this.onPopoverUpdateShow,theme:this.mergedTheme.peers.Popover,themeOverrides:this.mergedTheme.peerOverrides.Popover}:null,U=(this.selected?!1:this.active?!this.pattern&&!this.isComposing:!0)?h("div",{class:`${f}-base-selection-placeholder ${f}-base-selection-overlay`},h("div",{class:`${f}-base-selection-placeholder__inner`},this.placeholder)):null,Z=s?h("div",{ref:"patternInputWrapperRef",class:`${f}-base-selection-tags`},O,g?null:M,x):h("div",{ref:"multipleElRef",class:`${f}-base-selection-tags`,tabindex:o?void 0:0},O,x);k=h(Fragment,null,w?h(NPopover,Object.assign({},D,{scrollable:!0,style:"max-height: calc(var(--v-target-height) * 6.6);"}),{trigger:()=>Z,default:N}):Z,U)}else if(s){const S=this.pattern||this.isComposing,E=this.active?!S:!this.selected,T=this.active?!1:this.selected;k=h("div",{ref:"patternInputWrapperRef",class:`${f}-base-selection-label`},h("input",Object.assign({},this.inputProps,{ref:"patternInputRef",class:`${f}-base-selection-input`,value:this.active?this.pattern:"",placeholder:"",readonly:o,disabled:o,tabindex:-1,autofocus:this.autofocus,onFocus:this.handlePatternInputFocus,onBlur:this.handlePatternInputBlur,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),T?h("div",{class:`${f}-base-selection-label__render-label ${f}-base-selection-overlay`,key:"input"},h("div",{class:`${f}-base-selection-overlay__wrapper`},m?m({option:this.selectedOption,handleClose:()=>{}}):_?_(this.selectedOption,!0):render$1(this.label,this.selectedOption,!0))):null,E?h("div",{class:`${f}-base-selection-placeholder ${f}-base-selection-overlay`,key:"placeholder"},h("div",{class:`${f}-base-selection-overlay__wrapper`},this.filterablePlaceholder)):null,x)}else k=h("div",{ref:"singleElRef",class:`${f}-base-selection-label`,tabindex:this.disabled?void 0:0},this.label!==void 0?h("div",{class:`${f}-base-selection-input`,title:getTitleAttribute(this.label),key:"input"},h("div",{class:`${f}-base-selection-input__content`},m?m({option:this.selectedOption,handleClose:()=>{}}):_?_(this.selectedOption,!0):render$1(this.label,this.selectedOption,!0))):h("div",{class:`${f}-base-selection-placeholder ${f}-base-selection-overlay`,key:"placeholder"},h("div",{class:`${f}-base-selection-placeholder__inner`},this.placeholder)),x);return h("div",{ref:"selfRef",class:[`${f}-base-selection`,this.themeClass,e&&`${f}-base-selection--${e}-status`,{[`${f}-base-selection--active`]:this.active,[`${f}-base-selection--selected`]:this.selected||this.active&&this.pattern,[`${f}-base-selection--disabled`]:this.disabled,[`${f}-base-selection--multiple`]:this.multiple,[`${f}-base-selection--focus`]:this.focused}],style:this.cssVars,onClick:this.onClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onKeydown:this.onKeydown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onMousedown:this.handleMouseDown},k,d?h("div",{class:`${f}-base-selection__border`}):null,d?h("div",{class:`${f}-base-selection__state-border`}):null)}}),{cubicBezierEaseInOut:cubicBezierEaseInOut$1}=commonVariables$6;function fadeInWidthExpandTransition({duration:e=".2s",delay:n=".1s"}={}){return[c$1("&.fade-in-width-expand-transition-leave-from, &.fade-in-width-expand-transition-enter-to",{opacity:1}),c$1("&.fade-in-width-expand-transition-leave-to, &.fade-in-width-expand-transition-enter-from",`
 opacity: 0!important;
 margin-left: 0!important;
 margin-right: 0!important;
 `),c$1("&.fade-in-width-expand-transition-leave-active",`
 overflow: hidden;
 transition:
 opacity ${e} ${cubicBezierEaseInOut$1},
 max-width ${e} ${cubicBezierEaseInOut$1} ${n},
 margin-left ${e} ${cubicBezierEaseInOut$1} ${n},
 margin-right ${e} ${cubicBezierEaseInOut$1} ${n};
 `),c$1("&.fade-in-width-expand-transition-enter-active",`
 overflow: hidden;
 transition:
 opacity ${e} ${cubicBezierEaseInOut$1} ${n},
 max-width ${e} ${cubicBezierEaseInOut$1},
 margin-left ${e} ${cubicBezierEaseInOut$1},
 margin-right ${e} ${cubicBezierEaseInOut$1};
 `)]}const{cubicBezierEaseInOut,cubicBezierEaseOut,cubicBezierEaseIn}=commonVariables$6;function fadeInHeightExpandTransition({overflow:e="hidden",duration:n=".3s",originalTransition:r="",leavingDelay:o="0s",foldPadding:s=!1,enterToProps:u=void 0,leaveToProps:d=void 0,reverse:f=!1}={}){const v=f?"leave":"enter",m=f?"enter":"leave";return[c$1(`&.fade-in-height-expand-transition-${m}-from,
 &.fade-in-height-expand-transition-${v}-to`,Object.assign(Object.assign({},u),{opacity:1})),c$1(`&.fade-in-height-expand-transition-${m}-to,
 &.fade-in-height-expand-transition-${v}-from`,Object.assign(Object.assign({},d),{opacity:0,marginTop:"0 !important",marginBottom:"0 !important",paddingTop:s?"0 !important":void 0,paddingBottom:s?"0 !important":void 0})),c$1(`&.fade-in-height-expand-transition-${m}-active`,`
 overflow: ${e};
 transition:
 max-height ${n} ${cubicBezierEaseInOut} ${o},
 opacity ${n} ${cubicBezierEaseOut} ${o},
 margin-top ${n} ${cubicBezierEaseInOut} ${o},
 margin-bottom ${n} ${cubicBezierEaseInOut} ${o},
 padding-top ${n} ${cubicBezierEaseInOut} ${o},
 padding-bottom ${n} ${cubicBezierEaseInOut} ${o}
 ${r?","+r:""}
 `),c$1(`&.fade-in-height-expand-transition-${v}-active`,`
 overflow: ${e};
 transition:
 max-height ${n} ${cubicBezierEaseInOut},
 opacity ${n} ${cubicBezierEaseIn},
 margin-top ${n} ${cubicBezierEaseInOut},
 margin-bottom ${n} ${cubicBezierEaseInOut},
 padding-top ${n} ${cubicBezierEaseInOut},
 padding-bottom ${n} ${cubicBezierEaseInOut}
 ${r?","+r:""}
 `)]}function getIsGroup(e){return e.type==="group"}function getIgnored(e){return e.type==="ignored"}function patternMatched(e,n){try{return!!(1+n.toString().toLowerCase().indexOf(e.trim().toLowerCase()))}catch{return!1}}function createTmOptions(e,n){return{getIsGroup,getIgnored,getKey(o){return getIsGroup(o)?o.name||o.key||"key-required":o[e]},getChildren(o){return o[n]}}}function filterOptions(e,n,r,o){if(!n)return e;function s(u){if(!Array.isArray(u))return[];const d=[];for(const f of u)if(getIsGroup(f)){const v=s(f[o]);v.length&&d.push(Object.assign({},f,{[o]:v}))}else{if(getIgnored(f))continue;n(r,f)&&d.push(f)}return d}return s(e)}function createValOptMap(e,n,r){const o=new Map;return e.forEach(s=>{getIsGroup(s)?s[r].forEach(u=>{o.set(u[n],u)}):o.set(s[n],s)}),o}const isChrome=isBrowser$2&&"chrome"in window;isBrowser$2&&navigator.userAgent.includes("Firefox");const isSafari=isBrowser$2&&navigator.userAgent.includes("Safari")&&!isChrome;function createHoverColor(e){return composite(e,[255,255,255,.16])}function createPressedColor(e){return composite(e,[0,0,0,.12])}const buttonGroupInjectionKey="n-button-group",commonVariables$2={paddingTiny:"0 6px",paddingSmall:"0 10px",paddingMedium:"0 14px",paddingLarge:"0 18px",paddingRoundTiny:"0 10px",paddingRoundSmall:"0 14px",paddingRoundMedium:"0 18px",paddingRoundLarge:"0 22px",iconMarginTiny:"6px",iconMarginSmall:"6px",iconMarginMedium:"6px",iconMarginLarge:"6px",iconSizeTiny:"14px",iconSizeSmall:"18px",iconSizeMedium:"18px",iconSizeLarge:"20px",rippleDuration:".6s"},self$a=e=>{const{heightTiny:n,heightSmall:r,heightMedium:o,heightLarge:s,borderRadius:u,fontSizeTiny:d,fontSizeSmall:f,fontSizeMedium:v,fontSizeLarge:m,opacityDisabled:_,textColor2:g,textColor3:y,primaryColorHover:w,primaryColorPressed:x,borderColor:k,primaryColor:S,baseColor:E,infoColor:T,infoColorHover:M,infoColorPressed:I,successColor:F,successColorHover:O,successColorPressed:N,warningColor:D,warningColorHover:X,warningColorPressed:U,errorColor:Z,errorColorHover:j,errorColorPressed:Q,fontWeight:ve,buttonColor2:Se,buttonColor2Hover:we,buttonColor2Pressed:oe,fontWeightStrong:ne}=e;return Object.assign(Object.assign({},commonVariables$2),{heightTiny:n,heightSmall:r,heightMedium:o,heightLarge:s,borderRadiusTiny:u,borderRadiusSmall:u,borderRadiusMedium:u,borderRadiusLarge:u,fontSizeTiny:d,fontSizeSmall:f,fontSizeMedium:v,fontSizeLarge:m,opacityDisabled:_,colorOpacitySecondary:"0.16",colorOpacitySecondaryHover:"0.22",colorOpacitySecondaryPressed:"0.28",colorSecondary:Se,colorSecondaryHover:we,colorSecondaryPressed:oe,colorTertiary:Se,colorTertiaryHover:we,colorTertiaryPressed:oe,colorQuaternary:"#0000",colorQuaternaryHover:we,colorQuaternaryPressed:oe,color:"#0000",colorHover:"#0000",colorPressed:"#0000",colorFocus:"#0000",colorDisabled:"#0000",textColor:g,textColorTertiary:y,textColorHover:w,textColorPressed:x,textColorFocus:w,textColorDisabled:g,textColorText:g,textColorTextHover:w,textColorTextPressed:x,textColorTextFocus:w,textColorTextDisabled:g,textColorGhost:g,textColorGhostHover:w,textColorGhostPressed:x,textColorGhostFocus:w,textColorGhostDisabled:g,border:`1px solid ${k}`,borderHover:`1px solid ${w}`,borderPressed:`1px solid ${x}`,borderFocus:`1px solid ${w}`,borderDisabled:`1px solid ${k}`,rippleColor:S,colorPrimary:S,colorHoverPrimary:w,colorPressedPrimary:x,colorFocusPrimary:w,colorDisabledPrimary:S,textColorPrimary:E,textColorHoverPrimary:E,textColorPressedPrimary:E,textColorFocusPrimary:E,textColorDisabledPrimary:E,textColorTextPrimary:S,textColorTextHoverPrimary:w,textColorTextPressedPrimary:x,textColorTextFocusPrimary:w,textColorTextDisabledPrimary:g,textColorGhostPrimary:S,textColorGhostHoverPrimary:w,textColorGhostPressedPrimary:x,textColorGhostFocusPrimary:w,textColorGhostDisabledPrimary:S,borderPrimary:`1px solid ${S}`,borderHoverPrimary:`1px solid ${w}`,borderPressedPrimary:`1px solid ${x}`,borderFocusPrimary:`1px solid ${w}`,borderDisabledPrimary:`1px solid ${S}`,rippleColorPrimary:S,colorInfo:T,colorHoverInfo:M,colorPressedInfo:I,colorFocusInfo:M,colorDisabledInfo:T,textColorInfo:E,textColorHoverInfo:E,textColorPressedInfo:E,textColorFocusInfo:E,textColorDisabledInfo:E,textColorTextInfo:T,textColorTextHoverInfo:M,textColorTextPressedInfo:I,textColorTextFocusInfo:M,textColorTextDisabledInfo:g,textColorGhostInfo:T,textColorGhostHoverInfo:M,textColorGhostPressedInfo:I,textColorGhostFocusInfo:M,textColorGhostDisabledInfo:T,borderInfo:`1px solid ${T}`,borderHoverInfo:`1px solid ${M}`,borderPressedInfo:`1px solid ${I}`,borderFocusInfo:`1px solid ${M}`,borderDisabledInfo:`1px solid ${T}`,rippleColorInfo:T,colorSuccess:F,colorHoverSuccess:O,colorPressedSuccess:N,colorFocusSuccess:O,colorDisabledSuccess:F,textColorSuccess:E,textColorHoverSuccess:E,textColorPressedSuccess:E,textColorFocusSuccess:E,textColorDisabledSuccess:E,textColorTextSuccess:F,textColorTextHoverSuccess:O,textColorTextPressedSuccess:N,textColorTextFocusSuccess:O,textColorTextDisabledSuccess:g,textColorGhostSuccess:F,textColorGhostHoverSuccess:O,textColorGhostPressedSuccess:N,textColorGhostFocusSuccess:O,textColorGhostDisabledSuccess:F,borderSuccess:`1px solid ${F}`,borderHoverSuccess:`1px solid ${O}`,borderPressedSuccess:`1px solid ${N}`,borderFocusSuccess:`1px solid ${O}`,borderDisabledSuccess:`1px solid ${F}`,rippleColorSuccess:F,colorWarning:D,colorHoverWarning:X,colorPressedWarning:U,colorFocusWarning:X,colorDisabledWarning:D,textColorWarning:E,textColorHoverWarning:E,textColorPressedWarning:E,textColorFocusWarning:E,textColorDisabledWarning:E,textColorTextWarning:D,textColorTextHoverWarning:X,textColorTextPressedWarning:U,textColorTextFocusWarning:X,textColorTextDisabledWarning:g,textColorGhostWarning:D,textColorGhostHoverWarning:X,textColorGhostPressedWarning:U,textColorGhostFocusWarning:X,textColorGhostDisabledWarning:D,borderWarning:`1px solid ${D}`,borderHoverWarning:`1px solid ${X}`,borderPressedWarning:`1px solid ${U}`,borderFocusWarning:`1px solid ${X}`,borderDisabledWarning:`1px solid ${D}`,rippleColorWarning:D,colorError:Z,colorHoverError:j,colorPressedError:Q,colorFocusError:j,colorDisabledError:Z,textColorError:E,textColorHoverError:E,textColorPressedError:E,textColorFocusError:E,textColorDisabledError:E,textColorTextError:Z,textColorTextHoverError:j,textColorTextPressedError:Q,textColorTextFocusError:j,textColorTextDisabledError:g,textColorGhostError:Z,textColorGhostHoverError:j,textColorGhostPressedError:Q,textColorGhostFocusError:j,textColorGhostDisabledError:Z,borderError:`1px solid ${Z}`,borderHoverError:`1px solid ${j}`,borderPressedError:`1px solid ${Q}`,borderFocusError:`1px solid ${j}`,borderDisabledError:`1px solid ${Z}`,rippleColorError:Z,waveOpacity:"0.6",fontWeight:ve,fontWeightStrong:ne})},buttonLight={name:"Button",common:commonLight,self:self$a},buttonLight$1=buttonLight,style$9=c$1([cB("button",`
 margin: 0;
 font-weight: var(--n-font-weight);
 line-height: 1;
 font-family: inherit;
 padding: var(--n-padding);
 height: var(--n-height);
 font-size: var(--n-font-size);
 border-radius: var(--n-border-radius);
 color: var(--n-text-color);
 background-color: var(--n-color);
 width: var(--n-width);
 white-space: nowrap;
 outline: none;
 position: relative;
 z-index: auto;
 border: none;
 display: inline-flex;
 flex-wrap: nowrap;
 flex-shrink: 0;
 align-items: center;
 justify-content: center;
 user-select: none;
 -webkit-user-select: none;
 text-align: center;
 cursor: pointer;
 text-decoration: none;
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[cM("color",[cE("border",{borderColor:"var(--n-border-color)"}),cM("disabled",[cE("border",{borderColor:"var(--n-border-color-disabled)"})]),cNotM("disabled",[c$1("&:focus",[cE("state-border",{borderColor:"var(--n-border-color-focus)"})]),c$1("&:hover",[cE("state-border",{borderColor:"var(--n-border-color-hover)"})]),c$1("&:active",[cE("state-border",{borderColor:"var(--n-border-color-pressed)"})]),cM("pressed",[cE("state-border",{borderColor:"var(--n-border-color-pressed)"})])])]),cM("disabled",{backgroundColor:"var(--n-color-disabled)",color:"var(--n-text-color-disabled)"},[cE("border",{border:"var(--n-border-disabled)"})]),cNotM("disabled",[c$1("&:focus",{backgroundColor:"var(--n-color-focus)",color:"var(--n-text-color-focus)"},[cE("state-border",{border:"var(--n-border-focus)"})]),c$1("&:hover",{backgroundColor:"var(--n-color-hover)",color:"var(--n-text-color-hover)"},[cE("state-border",{border:"var(--n-border-hover)"})]),c$1("&:active",{backgroundColor:"var(--n-color-pressed)",color:"var(--n-text-color-pressed)"},[cE("state-border",{border:"var(--n-border-pressed)"})]),cM("pressed",{backgroundColor:"var(--n-color-pressed)",color:"var(--n-text-color-pressed)"},[cE("state-border",{border:"var(--n-border-pressed)"})])]),cM("loading","cursor: wait;"),cB("base-wave",`
 pointer-events: none;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 animation-iteration-count: 1;
 animation-duration: var(--n-ripple-duration);
 animation-timing-function: var(--n-bezier-ease-out), var(--n-bezier-ease-out);
 `,[cM("active",{zIndex:1,animationName:"button-wave-spread, button-wave-opacity"})]),isBrowser$2&&"MozBoxSizing"in document.createElement("div").style?c$1("&::moz-focus-inner",{border:0}):null,cE("border, state-border",`
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 border-radius: inherit;
 transition: border-color .3s var(--n-bezier);
 pointer-events: none;
 `),cE("border",{border:"var(--n-border)"}),cE("state-border",{border:"var(--n-border)",borderColor:"#0000",zIndex:1}),cE("icon",`
 margin: var(--n-icon-margin);
 margin-left: 0;
 height: var(--n-icon-size);
 width: var(--n-icon-size);
 max-width: var(--n-icon-size);
 font-size: var(--n-icon-size);
 position: relative;
 flex-shrink: 0;
 `,[cB("icon-slot",`
 height: var(--n-icon-size);
 width: var(--n-icon-size);
 position: absolute;
 left: 0;
 top: 50%;
 transform: translateY(-50%);
 display: flex;
 align-items: center;
 justify-content: center;
 `,[iconSwitchTransition({top:"50%",originalTransform:"translateY(-50%)"})]),fadeInWidthExpandTransition()]),cE("content",`
 display: flex;
 align-items: center;
 flex-wrap: nowrap;
 min-width: 0;
 `,[c$1("~",[cE("icon",{margin:"var(--n-icon-margin)",marginRight:0})])]),cM("block",`
 display: flex;
 width: 100%;
 `),cM("dashed",[cE("border, state-border",{borderStyle:"dashed !important"})]),cM("disabled",{cursor:"not-allowed",opacity:"var(--n-opacity-disabled)"})]),c$1("@keyframes button-wave-spread",{from:{boxShadow:"0 0 0.5px 0 var(--n-ripple-color)"},to:{boxShadow:"0 0 0.5px 4.5px var(--n-ripple-color)"}}),c$1("@keyframes button-wave-opacity",{from:{opacity:"var(--n-wave-opacity)"},to:{opacity:0}})]),buttonProps=Object.assign(Object.assign({},useTheme.props),{color:String,textColor:String,text:Boolean,block:Boolean,loading:Boolean,disabled:Boolean,circle:Boolean,size:String,ghost:Boolean,round:Boolean,secondary:Boolean,tertiary:Boolean,quaternary:Boolean,strong:Boolean,focusable:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},tag:{type:String,default:"button"},type:{type:String,default:"default"},dashed:Boolean,renderIcon:Function,iconPlacement:{type:String,default:"left"},attrType:{type:String,default:"button"},bordered:{type:Boolean,default:!0},onClick:[Function,Array],nativeFocusBehavior:{type:Boolean,default:!isSafari}}),Button=defineComponent({name:"Button",props:buttonProps,setup(e){const n=ref(null),r=ref(null),o=ref(!1),s=useMemo(()=>!e.quaternary&&!e.tertiary&&!e.secondary&&!e.text&&(!e.color||e.ghost||e.dashed)&&e.bordered),u=inject(buttonGroupInjectionKey,{}),{mergedSizeRef:d}=useFormItem({},{defaultSize:"medium",mergedSize:I=>{const{size:F}=e;if(F)return F;const{size:O}=u;if(O)return O;const{mergedSize:N}=I||{};return N?N.value:"medium"}}),f=computed(()=>e.focusable&&!e.disabled),v=I=>{var F;f.value||I.preventDefault(),!e.nativeFocusBehavior&&(I.preventDefault(),!e.disabled&&f.value&&((F=n.value)===null||F===void 0||F.focus({preventScroll:!0})))},m=I=>{var F;if(!e.disabled&&!e.loading){const{onClick:O}=e;O&&call(O,I),e.text||(F=r.value)===null||F===void 0||F.play()}},_=I=>{switch(I.key){case"Enter":if(!e.keyboard)return;o.value=!1}},g=I=>{switch(I.key){case"Enter":if(!e.keyboard||e.loading){I.preventDefault();return}o.value=!0}},y=()=>{o.value=!1},{inlineThemeDisabled:w,mergedClsPrefixRef:x,mergedRtlRef:k}=useConfig(e),S=useTheme("Button","-button",style$9,buttonLight$1,e,x),E=useRtl("Button",k,x),T=computed(()=>{const I=S.value,{common:{cubicBezierEaseInOut:F,cubicBezierEaseOut:O},self:N}=I,{rippleDuration:D,opacityDisabled:X,fontWeight:U,fontWeightStrong:Z}=N,j=d.value,{dashed:Q,type:ve,ghost:Se,text:we,color:oe,round:ne,circle:q,textColor:H,secondary:Y,tertiary:le,quaternary:Ce,strong:Te}=e,ke={"font-weight":Te?Z:U};let Ee={"--n-color":"initial","--n-color-hover":"initial","--n-color-pressed":"initial","--n-color-focus":"initial","--n-color-disabled":"initial","--n-ripple-color":"initial","--n-text-color":"initial","--n-text-color-hover":"initial","--n-text-color-pressed":"initial","--n-text-color-focus":"initial","--n-text-color-disabled":"initial"};const Pe=ve==="tertiary",Be=ve==="default",$e=Pe?"default":ve;if(we){const Fe=H||oe;Ee={"--n-color":"#0000","--n-color-hover":"#0000","--n-color-pressed":"#0000","--n-color-focus":"#0000","--n-color-disabled":"#0000","--n-ripple-color":"#0000","--n-text-color":Fe||N[createKey("textColorText",$e)],"--n-text-color-hover":Fe?createHoverColor(Fe):N[createKey("textColorTextHover",$e)],"--n-text-color-pressed":Fe?createPressedColor(Fe):N[createKey("textColorTextPressed",$e)],"--n-text-color-focus":Fe?createHoverColor(Fe):N[createKey("textColorTextHover",$e)],"--n-text-color-disabled":Fe||N[createKey("textColorTextDisabled",$e)]}}else if(Se||Q){const Fe=H||oe;Ee={"--n-color":"#0000","--n-color-hover":"#0000","--n-color-pressed":"#0000","--n-color-focus":"#0000","--n-color-disabled":"#0000","--n-ripple-color":oe||N[createKey("rippleColor",$e)],"--n-text-color":Fe||N[createKey("textColorGhost",$e)],"--n-text-color-hover":Fe?createHoverColor(Fe):N[createKey("textColorGhostHover",$e)],"--n-text-color-pressed":Fe?createPressedColor(Fe):N[createKey("textColorGhostPressed",$e)],"--n-text-color-focus":Fe?createHoverColor(Fe):N[createKey("textColorGhostHover",$e)],"--n-text-color-disabled":Fe||N[createKey("textColorGhostDisabled",$e)]}}else if(Y){const Fe=Be?N.textColor:Pe?N.textColorTertiary:N[createKey("color",$e)],De=oe||Fe,We=ve!=="default"&&ve!=="tertiary";Ee={"--n-color":We?changeColor(De,{alpha:Number(N.colorOpacitySecondary)}):N.colorSecondary,"--n-color-hover":We?changeColor(De,{alpha:Number(N.colorOpacitySecondaryHover)}):N.colorSecondaryHover,"--n-color-pressed":We?changeColor(De,{alpha:Number(N.colorOpacitySecondaryPressed)}):N.colorSecondaryPressed,"--n-color-focus":We?changeColor(De,{alpha:Number(N.colorOpacitySecondaryHover)}):N.colorSecondaryHover,"--n-color-disabled":N.colorSecondary,"--n-ripple-color":"#0000","--n-text-color":De,"--n-text-color-hover":De,"--n-text-color-pressed":De,"--n-text-color-focus":De,"--n-text-color-disabled":De}}else if(le||Ce){const Fe=Be?N.textColor:Pe?N.textColorTertiary:N[createKey("color",$e)],De=oe||Fe;le?(Ee["--n-color"]=N.colorTertiary,Ee["--n-color-hover"]=N.colorTertiaryHover,Ee["--n-color-pressed"]=N.colorTertiaryPressed,Ee["--n-color-focus"]=N.colorSecondaryHover,Ee["--n-color-disabled"]=N.colorTertiary):(Ee["--n-color"]=N.colorQuaternary,Ee["--n-color-hover"]=N.colorQuaternaryHover,Ee["--n-color-pressed"]=N.colorQuaternaryPressed,Ee["--n-color-focus"]=N.colorQuaternaryHover,Ee["--n-color-disabled"]=N.colorQuaternary),Ee["--n-ripple-color"]="#0000",Ee["--n-text-color"]=De,Ee["--n-text-color-hover"]=De,Ee["--n-text-color-pressed"]=De,Ee["--n-text-color-focus"]=De,Ee["--n-text-color-disabled"]=De}else Ee={"--n-color":oe||N[createKey("color",$e)],"--n-color-hover":oe?createHoverColor(oe):N[createKey("colorHover",$e)],"--n-color-pressed":oe?createPressedColor(oe):N[createKey("colorPressed",$e)],"--n-color-focus":oe?createHoverColor(oe):N[createKey("colorFocus",$e)],"--n-color-disabled":oe||N[createKey("colorDisabled",$e)],"--n-ripple-color":oe||N[createKey("rippleColor",$e)],"--n-text-color":H||(oe?N.textColorPrimary:Pe?N.textColorTertiary:N[createKey("textColor",$e)]),"--n-text-color-hover":H||(oe?N.textColorHoverPrimary:N[createKey("textColorHover",$e)]),"--n-text-color-pressed":H||(oe?N.textColorPressedPrimary:N[createKey("textColorPressed",$e)]),"--n-text-color-focus":H||(oe?N.textColorFocusPrimary:N[createKey("textColorFocus",$e)]),"--n-text-color-disabled":H||(oe?N.textColorDisabledPrimary:N[createKey("textColorDisabled",$e)])};let Oe={"--n-border":"initial","--n-border-hover":"initial","--n-border-pressed":"initial","--n-border-focus":"initial","--n-border-disabled":"initial"};we?Oe={"--n-border":"none","--n-border-hover":"none","--n-border-pressed":"none","--n-border-focus":"none","--n-border-disabled":"none"}:Oe={"--n-border":N[createKey("border",$e)],"--n-border-hover":N[createKey("borderHover",$e)],"--n-border-pressed":N[createKey("borderPressed",$e)],"--n-border-focus":N[createKey("borderFocus",$e)],"--n-border-disabled":N[createKey("borderDisabled",$e)]};const{[createKey("height",j)]:Ne,[createKey("fontSize",j)]:J,[createKey("padding",j)]:fe,[createKey("paddingRound",j)]:re,[createKey("iconSize",j)]:_e,[createKey("borderRadius",j)]:be,[createKey("iconMargin",j)]:Ae,waveOpacity:Le}=N,Ve={"--n-width":q&&!we?Ne:"initial","--n-height":we?"initial":Ne,"--n-font-size":J,"--n-padding":q||we?"initial":ne?re:fe,"--n-icon-size":_e,"--n-icon-margin":Ae,"--n-border-radius":we?"initial":q||ne?Ne:be};return Object.assign(Object.assign(Object.assign(Object.assign({"--n-bezier":F,"--n-bezier-ease-out":O,"--n-ripple-duration":D,"--n-opacity-disabled":X,"--n-wave-opacity":Le},ke),Ee),Oe),Ve)}),M=w?useThemeClass("button",computed(()=>{let I="";const{dashed:F,type:O,ghost:N,text:D,color:X,round:U,circle:Z,textColor:j,secondary:Q,tertiary:ve,quaternary:Se,strong:we}=e;F&&(I+="a"),N&&(I+="b"),D&&(I+="c"),U&&(I+="d"),Z&&(I+="e"),Q&&(I+="f"),ve&&(I+="g"),Se&&(I+="h"),we&&(I+="i"),X&&(I+="j"+color2Class(X)),j&&(I+="k"+color2Class(j));const{value:oe}=d;return I+="l"+oe[0],I+="m"+O[0],I}),T,e):void 0;return{selfElRef:n,waveElRef:r,mergedClsPrefix:x,mergedFocusable:f,mergedSize:d,showBorder:s,enterPressed:o,rtlEnabled:E,handleMousedown:v,handleKeydown:g,handleBlur:y,handleKeyup:_,handleClick:m,customColorCssVars:computed(()=>{const{color:I}=e;if(!I)return null;const F=createHoverColor(I);return{"--n-border-color":I,"--n-border-color-hover":F,"--n-border-color-pressed":createPressedColor(I),"--n-border-color-focus":F,"--n-border-color-disabled":I}}),cssVars:w?void 0:T,themeClass:M==null?void 0:M.themeClass,onRender:M==null?void 0:M.onRender}},render(){const{mergedClsPrefix:e,tag:n,onRender:r}=this;r==null||r();const o=resolveWrappedSlot(this.$slots.default,s=>s&&h("span",{class:`${e}-button__content`},s));return h(n,{ref:"selfElRef",class:[this.themeClass,`${e}-button`,`${e}-button--${this.type}-type`,`${e}-button--${this.mergedSize}-type`,this.rtlEnabled&&`${e}-button--rtl`,this.disabled&&`${e}-button--disabled`,this.block&&`${e}-button--block`,this.enterPressed&&`${e}-button--pressed`,!this.text&&this.dashed&&`${e}-button--dashed`,this.color&&`${e}-button--color`,this.secondary&&`${e}-button--secondary`,this.loading&&`${e}-button--loading`,this.ghost&&`${e}-button--ghost`],tabindex:this.mergedFocusable?0:-1,type:this.attrType,style:this.cssVars,disabled:this.disabled,onClick:this.handleClick,onBlur:this.handleBlur,onMousedown:this.handleMousedown,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},this.iconPlacement==="right"&&o,h(NFadeInExpandTransition,{width:!0},{default:()=>resolveWrappedSlot(this.$slots.icon,s=>(this.loading||this.renderIcon||s)&&h("span",{class:`${e}-button__icon`,style:{margin:isSlotEmpty(this.$slots.default)?"0":""}},h(NIconSwitchTransition,null,{default:()=>this.loading?h(NBaseLoading,{clsPrefix:e,key:"loading",class:`${e}-icon-slot`,strokeWidth:20}):h("div",{key:"icon",class:`${e}-icon-slot`,role:"none"},this.renderIcon?this.renderIcon():s)})))}),this.iconPlacement==="left"&&o,this.text?null:h(NBaseWave,{ref:"waveElRef",clsPrefix:e}),this.showBorder?h("div",{"aria-hidden":!0,class:`${e}-button__border`,style:this.customColorCssVars}):null,this.showBorder?h("div",{"aria-hidden":!0,class:`${e}-button__state-border`,style:this.customColorCssVars}):null)}}),NButton=Button,commonVariables$1={paddingSmall:"12px 16px 12px",paddingMedium:"19px 24px 20px",paddingLarge:"23px 32px 24px",paddingHuge:"27px 40px 28px",titleFontSizeSmall:"16px",titleFontSizeMedium:"18px",titleFontSizeLarge:"18px",titleFontSizeHuge:"18px",closeIconSize:"18px",closeSize:"22px"},self$9=e=>{const{primaryColor:n,borderRadius:r,lineHeight:o,fontSize:s,cardColor:u,textColor2:d,textColor1:f,dividerColor:v,fontWeightStrong:m,closeIconColor:_,closeIconColorHover:g,closeIconColorPressed:y,closeColorHover:w,closeColorPressed:x,modalColor:k,boxShadow1:S,popoverColor:E,actionColor:T}=e;return Object.assign(Object.assign({},commonVariables$1),{lineHeight:o,color:u,colorModal:k,colorPopover:E,colorTarget:n,colorEmbedded:T,colorEmbeddedModal:T,colorEmbeddedPopover:T,textColor:d,titleTextColor:f,borderColor:v,actionColor:T,titleFontWeight:m,closeColorHover:w,closeColorPressed:x,closeBorderRadius:r,closeIconColor:_,closeIconColorHover:g,closeIconColorPressed:y,fontSizeSmall:s,fontSizeMedium:s,fontSizeLarge:s,fontSizeHuge:s,boxShadow:S,borderRadius:r})},cardLight={name:"Card",common:commonLight,self:self$9},cardLight$1=cardLight,style$8=c$1([cB("card",`
 font-size: var(--n-font-size);
 line-height: var(--n-line-height);
 display: flex;
 flex-direction: column;
 width: 100%;
 box-sizing: border-box;
 position: relative;
 border-radius: var(--n-border-radius);
 background-color: var(--n-color);
 color: var(--n-text-color);
 word-break: break-word;
 transition: 
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[asModal({background:"var(--n-color-modal)"}),cM("hoverable",[c$1("&:hover","box-shadow: var(--n-box-shadow);")]),cM("content-segmented",[c$1(">",[cE("content",{paddingTop:"var(--n-padding-bottom)"})])]),cM("content-soft-segmented",[c$1(">",[cE("content",`
 margin: 0 var(--n-padding-left);
 padding: var(--n-padding-bottom) 0;
 `)])]),cM("footer-segmented",[c$1(">",[cE("footer",{paddingTop:"var(--n-padding-bottom)"})])]),cM("footer-soft-segmented",[c$1(">",[cE("footer",`
 padding: var(--n-padding-bottom) 0;
 margin: 0 var(--n-padding-left);
 `)])]),c$1(">",[cB("card-header",`
 box-sizing: border-box;
 display: flex;
 align-items: center;
 font-size: var(--n-title-font-size);
 padding:
 var(--n-padding-top)
 var(--n-padding-left)
 var(--n-padding-bottom)
 var(--n-padding-left);
 `,[cE("main",`
 font-weight: var(--n-title-font-weight);
 transition: color .3s var(--n-bezier);
 flex: 1;
 min-width: 0;
 color: var(--n-title-text-color);
 `),cE("extra",`
 display: flex;
 align-items: center;
 font-size: var(--n-font-size);
 font-weight: 400;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),cE("close",`
 margin: 0 0 0 8px;
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `)]),cE("action",`
 box-sizing: border-box;
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 background-clip: padding-box;
 background-color: var(--n-action-color);
 `),cE("content","flex: 1; min-width: 0;"),cE("content, footer",`
 box-sizing: border-box;
 padding: 0 var(--n-padding-left) var(--n-padding-bottom) var(--n-padding-left);
 font-size: var(--n-font-size);
 `,[c$1("&:first-child",{paddingTop:"var(--n-padding-bottom)"})]),cE("action",`
 background-color: var(--n-action-color);
 padding: var(--n-padding-bottom) var(--n-padding-left);
 border-bottom-left-radius: var(--n-border-radius);
 border-bottom-right-radius: var(--n-border-radius);
 `)]),cB("card-cover",`
 overflow: hidden;
 width: 100%;
 border-radius: var(--n-border-radius) var(--n-border-radius) 0 0;
 `,[c$1("img",`
 display: block;
 width: 100%;
 `)]),cM("bordered",`
 border: 1px solid var(--n-border-color);
 `,[c$1("&:target","border-color: var(--n-color-target);")]),cM("action-segmented",[c$1(">",[cE("action",[c$1("&:not(:first-child)",{borderTop:"1px solid var(--n-border-color)"})])])]),cM("content-segmented, content-soft-segmented",[c$1(">",[cE("content",{transition:"border-color 0.3s var(--n-bezier)"},[c$1("&:not(:first-child)",{borderTop:"1px solid var(--n-border-color)"})])])]),cM("footer-segmented, footer-soft-segmented",[c$1(">",[cE("footer",{transition:"border-color 0.3s var(--n-bezier)"},[c$1("&:not(:first-child)",{borderTop:"1px solid var(--n-border-color)"})])])]),cM("embedded",`
 background-color: var(--n-color-embedded);
 `)]),insideModal(cB("card",`
 background: var(--n-color-modal);
 `,[cM("embedded",`
 background-color: var(--n-color-embedded-modal);
 `)])),insidePopover(cB("card",`
 background: var(--n-color-popover);
 `,[cM("embedded",`
 background-color: var(--n-color-embedded-popover);
 `)]))]),cardBaseProps={title:String,contentStyle:[Object,String],headerStyle:[Object,String],headerExtraStyle:[Object,String],footerStyle:[Object,String],embedded:Boolean,segmented:{type:[Boolean,Object],default:!1},size:{type:String,default:"medium"},bordered:{type:Boolean,default:!0},closable:Boolean,hoverable:Boolean,role:String,onClose:[Function,Array],tag:{type:String,default:"div"}},cardBasePropKeys=keysOf(cardBaseProps),cardProps=Object.assign(Object.assign({},useTheme.props),cardBaseProps),NCard=defineComponent({name:"Card",props:cardProps,setup(e){const n=()=>{const{onClose:m}=e;m&&call(m)},{inlineThemeDisabled:r,mergedClsPrefixRef:o,mergedRtlRef:s}=useConfig(e),u=useTheme("Card","-card",style$8,cardLight$1,e,o),d=useRtl("Card",s,o),f=computed(()=>{const{size:m}=e,{self:{color:_,colorModal:g,colorTarget:y,textColor:w,titleTextColor:x,titleFontWeight:k,borderColor:S,actionColor:E,borderRadius:T,lineHeight:M,closeIconColor:I,closeIconColorHover:F,closeIconColorPressed:O,closeColorHover:N,closeColorPressed:D,closeBorderRadius:X,closeIconSize:U,closeSize:Z,boxShadow:j,colorPopover:Q,colorEmbedded:ve,colorEmbeddedModal:Se,colorEmbeddedPopover:we,[createKey("padding",m)]:oe,[createKey("fontSize",m)]:ne,[createKey("titleFontSize",m)]:q},common:{cubicBezierEaseInOut:H}}=u.value,{top:Y,left:le,bottom:Ce}=getMargin(oe);return{"--n-bezier":H,"--n-border-radius":T,"--n-color":_,"--n-color-modal":g,"--n-color-popover":Q,"--n-color-embedded":ve,"--n-color-embedded-modal":Se,"--n-color-embedded-popover":we,"--n-color-target":y,"--n-text-color":w,"--n-line-height":M,"--n-action-color":E,"--n-title-text-color":x,"--n-title-font-weight":k,"--n-close-icon-color":I,"--n-close-icon-color-hover":F,"--n-close-icon-color-pressed":O,"--n-close-color-hover":N,"--n-close-color-pressed":D,"--n-border-color":S,"--n-box-shadow":j,"--n-padding-top":Y,"--n-padding-bottom":Ce,"--n-padding-left":le,"--n-font-size":ne,"--n-title-font-size":q,"--n-close-size":Z,"--n-close-icon-size":U,"--n-close-border-radius":X}}),v=r?useThemeClass("card",computed(()=>e.size[0]),f,e):void 0;return{rtlEnabled:d,mergedClsPrefix:o,mergedTheme:u,handleCloseClick:n,cssVars:r?void 0:f,themeClass:v==null?void 0:v.themeClass,onRender:v==null?void 0:v.onRender}},render(){const{segmented:e,bordered:n,hoverable:r,mergedClsPrefix:o,rtlEnabled:s,onRender:u,embedded:d,tag:f,$slots:v}=this;return u==null||u(),h(f,{class:[`${o}-card`,this.themeClass,d&&`${o}-card--embedded`,{[`${o}-card--rtl`]:s,[`${o}-card--content${typeof e!="boolean"&&e.content==="soft"?"-soft":""}-segmented`]:e===!0||e!==!1&&e.content,[`${o}-card--footer${typeof e!="boolean"&&e.footer==="soft"?"-soft":""}-segmented`]:e===!0||e!==!1&&e.footer,[`${o}-card--action-segmented`]:e===!0||e!==!1&&e.action,[`${o}-card--bordered`]:n,[`${o}-card--hoverable`]:r}],style:this.cssVars,role:this.role},resolveWrappedSlot(v.cover,m=>m&&h("div",{class:`${o}-card-cover`,role:"none"},m)),resolveWrappedSlot(v.header,m=>m||this.title||this.closable?h("div",{class:`${o}-card-header`,style:this.headerStyle},h("div",{class:`${o}-card-header__main`,role:"heading"},m||this.title),resolveWrappedSlot(v["header-extra"],_=>_&&h("div",{class:`${o}-card-header__extra`,style:this.headerExtraStyle},_)),this.closable?h(NBaseClose,{clsPrefix:o,class:`${o}-card-header__close`,onClick:this.handleCloseClick,absolute:!0}):null):null),resolveWrappedSlot(v.default,m=>m&&h("div",{class:`${o}-card__content`,style:this.contentStyle,role:"none"},m)),resolveWrappedSlot(v.footer,m=>m&&[h("div",{class:`${o}-card__footer`,style:this.footerStyle,role:"none"},m)]),resolveWrappedSlot(v.action,m=>m&&h("div",{class:`${o}-card__action`,role:"none"},m)))}}),configProviderProps={abstract:Boolean,bordered:{type:Boolean,default:void 0},clsPrefix:String,locale:Object,dateLocale:Object,namespace:String,rtl:Array,tag:{type:String,default:"div"},hljs:Object,katex:Object,theme:Object,themeOverrides:Object,componentOptions:Object,icons:Object,breakpoints:Object,preflightStyleDisabled:Boolean,inlineThemeDisabled:{type:Boolean,default:void 0},as:{type:String,validator:()=>(warn$2("config-provider","`as` is deprecated, please use `tag` instead."),!0),default:void 0}},NConfigProvider=defineComponent({name:"ConfigProvider",alias:["App"],props:configProviderProps,setup(e){const n=inject(configProviderInjectionKey,null),r=computed(()=>{const{theme:x}=e;if(x===null)return;const k=n==null?void 0:n.mergedThemeRef.value;return x===void 0?k:k===void 0?x:Object.assign({},k,x)}),o=computed(()=>{const{themeOverrides:x}=e;if(x!==null){if(x===void 0)return n==null?void 0:n.mergedThemeOverridesRef.value;{const k=n==null?void 0:n.mergedThemeOverridesRef.value;return k===void 0?x:merge$3({},k,x)}}}),s=useMemo(()=>{const{namespace:x}=e;return x===void 0?n==null?void 0:n.mergedNamespaceRef.value:x}),u=useMemo(()=>{const{bordered:x}=e;return x===void 0?n==null?void 0:n.mergedBorderedRef.value:x}),d=computed(()=>{const{icons:x}=e;return x===void 0?n==null?void 0:n.mergedIconsRef.value:x}),f=computed(()=>{const{componentOptions:x}=e;return x!==void 0?x:n==null?void 0:n.mergedComponentPropsRef.value}),v=computed(()=>{const{clsPrefix:x}=e;return x!==void 0?x:n==null?void 0:n.mergedClsPrefixRef.value}),m=computed(()=>{var x;const{rtl:k}=e;if(k===void 0)return n==null?void 0:n.mergedRtlRef.value;const S={};for(const E of k)S[E.name]=markRaw(E),(x=E.peers)===null||x===void 0||x.forEach(T=>{T.name in S||(S[T.name]=markRaw(T))});return S}),_=computed(()=>e.breakpoints||(n==null?void 0:n.mergedBreakpointsRef.value)),g=e.inlineThemeDisabled||(n==null?void 0:n.inlineThemeDisabled),y=e.preflightStyleDisabled||(n==null?void 0:n.preflightStyleDisabled),w=computed(()=>{const{value:x}=r,{value:k}=o,S=k&&Object.keys(k).length!==0,E=x==null?void 0:x.name;return E?S?`${E}-${murmur2(JSON.stringify(o.value))}`:E:S?murmur2(JSON.stringify(o.value)):""});return provide(configProviderInjectionKey,{mergedThemeHashRef:w,mergedBreakpointsRef:_,mergedRtlRef:m,mergedIconsRef:d,mergedComponentPropsRef:f,mergedBorderedRef:u,mergedNamespaceRef:s,mergedClsPrefixRef:v,mergedLocaleRef:computed(()=>{const{locale:x}=e;if(x!==null)return x===void 0?n==null?void 0:n.mergedLocaleRef.value:x}),mergedDateLocaleRef:computed(()=>{const{dateLocale:x}=e;if(x!==null)return x===void 0?n==null?void 0:n.mergedDateLocaleRef.value:x}),mergedHljsRef:computed(()=>{const{hljs:x}=e;return x===void 0?n==null?void 0:n.mergedHljsRef.value:x}),mergedKatexRef:computed(()=>{const{katex:x}=e;return x===void 0?n==null?void 0:n.mergedKatexRef.value:x}),mergedThemeRef:r,mergedThemeOverridesRef:o,inlineThemeDisabled:g||!1,preflightStyleDisabled:y||!1}),{mergedClsPrefix:v,mergedBordered:u,mergedNamespace:s,mergedTheme:r,mergedThemeOverrides:o}},render(){var e,n,r,o;return this.abstract?(o=(r=this.$slots).default)===null||o===void 0?void 0:o.call(r):h(this.as||this.tag,{class:`${this.mergedClsPrefix||defaultClsPrefix}-config-provider`},(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e))}});function self$8(e){const{boxShadow2:n}=e;return{menuBoxShadow:n}}const popselectLight={name:"Popselect",common:commonLight,peers:{Popover:popoverLight$1,InternalSelectMenu:internalSelectMenuLight$1},self:self$8},popselectLight$1=popselectLight,popselectInjectionKey="n-popselect",style$7=cB("popselect-menu",`
 box-shadow: var(--n-menu-box-shadow);
`),panelProps={multiple:Boolean,value:{type:[String,Number,Array],default:null},cancelable:Boolean,options:{type:Array,default:()=>[]},size:{type:String,default:"medium"},scrollable:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onMouseenter:Function,onMouseleave:Function,renderLabel:Function,showCheckmark:{type:Boolean,default:void 0},nodeProps:Function,virtualScroll:Boolean,onChange:[Function,Array]},panelPropKeys=keysOf(panelProps),NPopselectPanel=defineComponent({name:"PopselectPanel",props:panelProps,setup(e){const n=inject(popselectInjectionKey),{mergedClsPrefixRef:r,inlineThemeDisabled:o}=useConfig(e),s=useTheme("Popselect","-pop-select",style$7,popselectLight$1,n.props,r),u=computed(()=>createTreeMate(e.options,createTmOptions("value","children")));function d(y,w){const{onUpdateValue:x,"onUpdate:value":k,onChange:S}=e;x&&call(x,y,w),k&&call(k,y,w),S&&call(S,y,w)}function f(y){m(y.key)}function v(y){happensIn(y,"action")||y.preventDefault()}function m(y){const{value:{getNode:w}}=u;if(e.multiple)if(Array.isArray(e.value)){const x=[],k=[];let S=!0;e.value.forEach(E=>{if(E===y){S=!1;return}const T=w(E);T&&(x.push(T.key),k.push(T.rawNode))}),S&&(x.push(y),k.push(w(y).rawNode)),d(x,k)}else{const x=w(y);x&&d([y],[x.rawNode])}else if(e.value===y&&e.cancelable)d(null,null);else{const x=w(y);x&&d(y,x.rawNode);const{"onUpdate:show":k,onUpdateShow:S}=n.props;k&&call(k,!1),S&&call(S,!1),n.setShow(!1)}nextTick(()=>{n.syncPosition()})}watch(toRef(e,"options"),()=>{nextTick(()=>{n.syncPosition()})});const _=computed(()=>{const{self:{menuBoxShadow:y}}=s.value;return{"--n-menu-box-shadow":y}}),g=o?useThemeClass("select",void 0,_,n.props):void 0;return{mergedTheme:n.mergedThemeRef,mergedClsPrefix:r,treeMate:u,handleToggle:f,handleMenuMousedown:v,cssVars:o?void 0:_,themeClass:g==null?void 0:g.themeClass,onRender:g==null?void 0:g.onRender}},render(){var e;return(e=this.onRender)===null||e===void 0||e.call(this),h(NInternalSelectMenu,{clsPrefix:this.mergedClsPrefix,focusable:!0,nodeProps:this.nodeProps,class:[`${this.mergedClsPrefix}-popselect-menu`,this.themeClass],style:this.cssVars,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,multiple:this.multiple,treeMate:this.treeMate,size:this.size,value:this.value,virtualScroll:this.virtualScroll,scrollable:this.scrollable,renderLabel:this.renderLabel,onToggle:this.handleToggle,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseenter,onMousedown:this.handleMenuMousedown,showCheckmark:this.showCheckmark},{action:()=>{var n,r;return((r=(n=this.$slots).action)===null||r===void 0?void 0:r.call(n))||[]},empty:()=>{var n,r;return((r=(n=this.$slots).empty)===null||r===void 0?void 0:r.call(n))||[]}})}}),popselectProps=Object.assign(Object.assign(Object.assign(Object.assign({},useTheme.props),omit(popoverBaseProps,["showArrow","arrow"])),{placement:Object.assign(Object.assign({},popoverBaseProps.placement),{default:"bottom"}),trigger:{type:String,default:"hover"}}),panelProps),NPopselect=defineComponent({name:"Popselect",props:popselectProps,inheritAttrs:!1,__popover__:!0,setup(e){const n=useTheme("Popselect","-popselect",void 0,popselectLight$1,e),r=ref(null);function o(){var d;(d=r.value)===null||d===void 0||d.syncPosition()}function s(d){var f;(f=r.value)===null||f===void 0||f.setShow(d)}return provide(popselectInjectionKey,{props:e,mergedThemeRef:n,syncPosition:o,setShow:s}),Object.assign(Object.assign({},{syncPosition:o,setShow:s}),{popoverInstRef:r,mergedTheme:n})},render(){const{mergedTheme:e}=this,n={theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,builtinThemeOverrides:{padding:"0"},ref:"popoverInstRef",internalRenderBody:(r,o,s,u,d)=>{const{$attrs:f}=this;return h(NPopselectPanel,Object.assign({},f,{class:[f.class,r],style:[f.style,s]},keep(this.$props,panelPropKeys),{ref:createRefSetter(o),onMouseenter:mergeEventHandlers([u,f.onMouseenter]),onMouseleave:mergeEventHandlers([d,f.onMouseleave])}),{action:()=>{var v,m;return(m=(v=this.$slots).action)===null||m===void 0?void 0:m.call(v)},empty:()=>{var v,m;return(m=(v=this.$slots).empty)===null||m===void 0?void 0:m.call(v)}})}};return h(NPopover,Object.assign({},omit(this.$props,panelPropKeys),n,{internalDeactivateImmediately:!0}),{trigger:()=>{var r,o;return(o=(r=this.$slots).default)===null||o===void 0?void 0:o.call(r)}})}});function self$7(e){const{boxShadow2:n}=e;return{menuBoxShadow:n}}const selectLight={name:"Select",common:commonLight,peers:{InternalSelection:internalSelectionLight$1,InternalSelectMenu:internalSelectMenuLight$1},self:self$7},selectLight$1=selectLight,style$6=c$1([cB("select",`
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 `),cB("select-menu",`
 margin: 4px 0;
 box-shadow: var(--n-menu-box-shadow);
 `,[fadeInScaleUpTransition({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})])]),selectProps=Object.assign(Object.assign({},useTheme.props),{to:useAdjustedTo.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},defaultValue:{type:[String,Number,Array],default:null},value:[String,Number,Array],placeholder:String,menuProps:Object,multiple:Boolean,size:String,filterable:Boolean,disabled:{type:Boolean,default:void 0},remote:Boolean,loading:Boolean,filter:Function,placement:{type:String,default:"bottom-start"},widthMode:{type:String,default:"trigger"},tag:Boolean,onCreate:Function,fallbackOption:{type:[Function,Boolean],default:void 0},show:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:!0},maxTagCount:[Number,String],consistentMenuWidth:{type:Boolean,default:!0},virtualScroll:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},childrenField:{type:String,default:"children"},renderLabel:Function,renderOption:Function,renderTag:Function,"onUpdate:value":[Function,Array],inputProps:Object,nodeProps:Function,ignoreComposition:{type:Boolean,default:!0},showOnFocus:Boolean,onUpdateValue:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onScroll:[Function,Array],onSearch:[Function,Array],onUpdateShow:[Function,Array],"onUpdate:show":[Function,Array],displayDirective:{type:String,default:"show"},resetMenuOnOptionsChange:{type:Boolean,default:!0},status:String,showCheckmark:{type:Boolean,default:!0},onChange:[Function,Array],items:Array}),NSelect=defineComponent({name:"Select",props:selectProps,setup(e){const{mergedClsPrefixRef:n,mergedBorderedRef:r,namespaceRef:o,inlineThemeDisabled:s}=useConfig(e),u=useTheme("Select","-select",style$6,selectLight$1,e,n),d=ref(e.defaultValue),f=toRef(e,"value"),v=useMergedState(f,d),m=ref(!1),_=ref(""),g=computed(()=>{const{valueField:Ue,childrenField:qe}=e,Ye=createTmOptions(Ue,qe);return createTreeMate(j.value,Ye)}),y=computed(()=>createValOptMap(U.value,e.valueField,e.childrenField)),w=ref(!1),x=useMergedState(toRef(e,"show"),w),k=ref(null),S=ref(null),E=ref(null),{localeRef:T}=useLocale("Select"),M=computed(()=>{var Ue;return(Ue=e.placeholder)!==null&&Ue!==void 0?Ue:T.value.placeholder}),I=useCompitable(e,["items","options"]),F=[],O=ref([]),N=ref([]),D=ref(new Map),X=computed(()=>{const{fallbackOption:Ue}=e;if(Ue===void 0){const{labelField:qe,valueField:Ye}=e;return st=>({[qe]:String(st),[Ye]:st})}return Ue===!1?!1:qe=>Object.assign(Ue(qe),{value:qe})}),U=computed(()=>N.value.concat(O.value).concat(I.value)),Z=computed(()=>{const{filter:Ue}=e;if(Ue)return Ue;const{labelField:qe,valueField:Ye}=e;return(st,ot)=>{if(!ot)return!1;const Qe=ot[qe];if(typeof Qe=="string")return patternMatched(st,Qe);const tt=ot[Ye];return typeof tt=="string"?patternMatched(st,tt):typeof tt=="number"?patternMatched(st,String(tt)):!1}}),j=computed(()=>{if(e.remote)return I.value;{const{value:Ue}=U,{value:qe}=_;return!qe.length||!e.filterable?Ue:filterOptions(Ue,Z.value,qe,e.childrenField)}});function Q(Ue){const qe=e.remote,{value:Ye}=D,{value:st}=y,{value:ot}=X,Qe=[];return Ue.forEach(tt=>{if(st.has(tt))Qe.push(st.get(tt));else if(qe&&Ye.has(tt))Qe.push(Ye.get(tt));else if(ot){const nt=ot(tt);nt&&Qe.push(nt)}}),Qe}const ve=computed(()=>{if(e.multiple){const{value:Ue}=v;return Array.isArray(Ue)?Q(Ue):[]}return null}),Se=computed(()=>{const{value:Ue}=v;return!e.multiple&&!Array.isArray(Ue)?Ue===null?null:Q([Ue])[0]||null:null}),we=useFormItem(e),{mergedSizeRef:oe,mergedDisabledRef:ne,mergedStatusRef:q}=we;function H(Ue,qe){const{onChange:Ye,"onUpdate:value":st,onUpdateValue:ot}=e,{nTriggerFormChange:Qe,nTriggerFormInput:tt}=we;Ye&&call(Ye,Ue,qe),ot&&call(ot,Ue,qe),st&&call(st,Ue,qe),d.value=Ue,Qe(),tt()}function Y(Ue){const{onBlur:qe}=e,{nTriggerFormBlur:Ye}=we;qe&&call(qe,Ue),Ye()}function le(){const{onClear:Ue}=e;Ue&&call(Ue)}function Ce(Ue){const{onFocus:qe,showOnFocus:Ye}=e,{nTriggerFormFocus:st}=we;qe&&call(qe,Ue),st(),Ye&&Be()}function Te(Ue){const{onSearch:qe}=e;qe&&call(qe,Ue)}function ke(Ue){const{onScroll:qe}=e;qe&&call(qe,Ue)}function Ee(){var Ue;const{remote:qe,multiple:Ye}=e;if(qe){const{value:st}=D;if(Ye){const{valueField:ot}=e;(Ue=ve.value)===null||Ue===void 0||Ue.forEach(Qe=>{st.set(Qe[ot],Qe)})}else{const ot=Se.value;ot&&st.set(ot[e.valueField],ot)}}}function Pe(Ue){const{onUpdateShow:qe,"onUpdate:show":Ye}=e;qe&&call(qe,Ue),Ye&&call(Ye,Ue),w.value=Ue}function Be(){ne.value||(Pe(!0),w.value=!0,e.filterable&&pt())}function $e(){Pe(!1)}function Oe(){_.value="",N.value=F}const Ne=ref(!1);function J(){e.filterable&&(Ne.value=!0)}function fe(){e.filterable&&(Ne.value=!1,x.value||Oe())}function re(){ne.value||(x.value?e.filterable?pt():$e():Be())}function _e(Ue){var qe,Ye;!((Ye=(qe=E.value)===null||qe===void 0?void 0:qe.selfRef)===null||Ye===void 0)&&Ye.contains(Ue.relatedTarget)||(m.value=!1,Y(Ue),$e())}function be(Ue){Ce(Ue),m.value=!0}function Ae(Ue){m.value=!0}function Le(Ue){var qe;!((qe=k.value)===null||qe===void 0)&&qe.$el.contains(Ue.relatedTarget)||(m.value=!1,Y(Ue),$e())}function Ve(){var Ue;(Ue=k.value)===null||Ue===void 0||Ue.focus(),$e()}function Fe(Ue){var qe;x.value&&(!((qe=k.value)===null||qe===void 0)&&qe.$el.contains(getPreciseEventTarget(Ue))||$e())}function De(Ue){if(!Array.isArray(Ue))return[];if(X.value)return Array.from(Ue);{const{remote:qe}=e,{value:Ye}=y;if(qe){const{value:st}=D;return Ue.filter(ot=>Ye.has(ot)||st.has(ot))}else return Ue.filter(st=>Ye.has(st))}}function We(Ue){Re(Ue.rawNode)}function Re(Ue){if(ne.value)return;const{tag:qe,remote:Ye,clearFilterAfterSelect:st,valueField:ot}=e;if(qe&&!Ye){const{value:Qe}=N,tt=Qe[0]||null;if(tt){const nt=O.value;nt.length?nt.push(tt):O.value=[tt],N.value=F}}if(Ye&&D.value.set(Ue[ot],Ue),e.multiple){const Qe=De(v.value),tt=Qe.findIndex(nt=>nt===Ue[ot]);if(~tt){if(Qe.splice(tt,1),qe&&!Ye){const nt=He(Ue[ot]);~nt&&(O.value.splice(nt,1),st&&(_.value=""))}}else Qe.push(Ue[ot]),st&&(_.value="");H(Qe,Q(Qe))}else{if(qe&&!Ye){const Qe=He(Ue[ot]);~Qe?O.value=[O.value[Qe]]:O.value=F}mt(),$e(),H(Ue[ot],Ue)}}function He(Ue){return O.value.findIndex(Ye=>Ye[e.valueField]===Ue)}function Ze(Ue){x.value||Be();const{value:qe}=Ue.target;_.value=qe;const{tag:Ye,remote:st}=e;if(Te(qe),Ye&&!st){if(!qe){N.value=F;return}const{onCreate:ot}=e,Qe=ot?ot(qe):{[e.labelField]:qe,[e.valueField]:qe},{valueField:tt}=e;I.value.some(nt=>nt[tt]===Qe[tt])||O.value.some(nt=>nt[tt]===Qe[tt])?N.value=F:N.value=[Qe]}}function Xe(Ue){Ue.stopPropagation();const{multiple:qe}=e;!qe&&e.filterable&&$e(),le(),qe?H([],[]):H(null,null)}function at(Ue){!happensIn(Ue,"action")&&!happensIn(Ue,"empty")&&Ue.preventDefault()}function ut(Ue){ke(Ue)}function ct(Ue){var qe,Ye,st,ot,Qe;switch(Ue.key){case" ":if(e.filterable)break;Ue.preventDefault();case"Enter":if(!(!((qe=k.value)===null||qe===void 0)&&qe.isComposing)){if(x.value){const tt=(Ye=E.value)===null||Ye===void 0?void 0:Ye.getPendingTmNode();tt?We(tt):e.filterable||($e(),mt())}else if(Be(),e.tag&&Ne.value){const tt=N.value[0];if(tt){const nt=tt[e.valueField],{value:it}=v;e.multiple&&Array.isArray(it)&&it.some(lt=>lt===nt)||Re(tt)}}}Ue.preventDefault();break;case"ArrowUp":if(Ue.preventDefault(),e.loading)return;x.value&&((st=E.value)===null||st===void 0||st.prev());break;case"ArrowDown":if(Ue.preventDefault(),e.loading)return;x.value?(ot=E.value)===null||ot===void 0||ot.next():Be();break;case"Escape":x.value&&(markEventEffectPerformed(Ue),$e()),(Qe=k.value)===null||Qe===void 0||Qe.focus();break}}function mt(){var Ue;(Ue=k.value)===null||Ue===void 0||Ue.focus()}function pt(){var Ue;(Ue=k.value)===null||Ue===void 0||Ue.focusInput()}function kt(){var Ue;!x.value||(Ue=S.value)===null||Ue===void 0||Ue.syncPosition()}Ee(),watch(toRef(e,"options"),Ee);const Ct={focus:()=>{var Ue;(Ue=k.value)===null||Ue===void 0||Ue.focus()},blur:()=>{var Ue;(Ue=k.value)===null||Ue===void 0||Ue.blur()}},ht=computed(()=>{const{self:{menuBoxShadow:Ue}}=u.value;return{"--n-menu-box-shadow":Ue}}),Pt=s?useThemeClass("select",void 0,ht,e):void 0;return Object.assign(Object.assign({},Ct),{mergedStatus:q,mergedClsPrefix:n,mergedBordered:r,namespace:o,treeMate:g,isMounted:isMounted(),triggerRef:k,menuRef:E,pattern:_,uncontrolledShow:w,mergedShow:x,adjustedTo:useAdjustedTo(e),uncontrolledValue:d,mergedValue:v,followerRef:S,localizedPlaceholder:M,selectedOption:Se,selectedOptions:ve,mergedSize:oe,mergedDisabled:ne,focused:m,activeWithoutMenuOpen:Ne,inlineThemeDisabled:s,onTriggerInputFocus:J,onTriggerInputBlur:fe,handleTriggerOrMenuResize:kt,handleMenuFocus:Ae,handleMenuBlur:Le,handleMenuTabOut:Ve,handleTriggerClick:re,handleToggle:We,handleDeleteOption:Re,handlePatternInput:Ze,handleClear:Xe,handleTriggerBlur:_e,handleTriggerFocus:be,handleKeydown:ct,handleMenuAfterLeave:Oe,handleMenuClickOutside:Fe,handleMenuScroll:ut,handleMenuKeydown:ct,handleMenuMousedown:at,mergedTheme:u,cssVars:s?void 0:ht,themeClass:Pt==null?void 0:Pt.themeClass,onRender:Pt==null?void 0:Pt.onRender})},render(){return h("div",{class:`${this.mergedClsPrefix}-select`},h(VBinder,null,{default:()=>[h(VTarget,null,{default:()=>h(NInternalSelection,{ref:"triggerRef",inlineThemeDisabled:this.inlineThemeDisabled,status:this.mergedStatus,inputProps:this.inputProps,clsPrefix:this.mergedClsPrefix,showArrow:this.showArrow,maxTagCount:this.maxTagCount,bordered:this.mergedBordered,active:this.activeWithoutMenuOpen||this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,renderTag:this.renderTag,renderLabel:this.renderLabel,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,labelField:this.labelField,valueField:this.valueField,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,loading:this.loading,focused:this.focused,onClick:this.handleTriggerClick,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onBlur:this.handleTriggerBlur,onFocus:this.handleTriggerFocus,onKeydown:this.handleKeydown,onPatternBlur:this.onTriggerInputBlur,onPatternFocus:this.onTriggerInputFocus,onResize:this.handleTriggerOrMenuResize,ignoreComposition:this.ignoreComposition},{arrow:()=>{var e,n;return[(n=(e=this.$slots).arrow)===null||n===void 0?void 0:n.call(e)]}})}),h(VFollower,{ref:"followerRef",show:this.mergedShow,to:this.adjustedTo,teleportDisabled:this.adjustedTo===useAdjustedTo.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target",placement:this.placement},{default:()=>h(Transition,{name:"fade-in-scale-up-transition",appear:this.isMounted,onAfterLeave:this.handleMenuAfterLeave},{default:()=>{var e,n,r;return this.mergedShow||this.displayDirective==="show"?((e=this.onRender)===null||e===void 0||e.call(this),withDirectives(h(NInternalSelectMenu,Object.assign({},this.menuProps,{ref:"menuRef",onResize:this.handleTriggerOrMenuResize,inlineThemeDisabled:this.inlineThemeDisabled,virtualScroll:this.consistentMenuWidth&&this.virtualScroll,class:[`${this.mergedClsPrefix}-select-menu`,this.themeClass,(n=this.menuProps)===null||n===void 0?void 0:n.class],clsPrefix:this.mergedClsPrefix,focusable:!0,labelField:this.labelField,valueField:this.valueField,autoPending:!0,nodeProps:this.nodeProps,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,treeMate:this.treeMate,multiple:this.multiple,size:"medium",renderOption:this.renderOption,renderLabel:this.renderLabel,value:this.mergedValue,style:[(r=this.menuProps)===null||r===void 0?void 0:r.style,this.cssVars],onToggle:this.handleToggle,onScroll:this.handleMenuScroll,onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeydown:this.handleMenuKeydown,onTabOut:this.handleMenuTabOut,onMousedown:this.handleMenuMousedown,show:this.mergedShow,showCheckmark:this.showCheckmark,resetMenuOnOptionsChange:this.resetMenuOnOptionsChange}),{empty:()=>{var o,s;return[(s=(o=this.$slots).empty)===null||s===void 0?void 0:s.call(o)]},action:()=>{var o,s;return[(s=(o=this.$slots).action)===null||s===void 0?void 0:s.call(o)]}}),this.displayDirective==="show"?[[vShow,this.mergedShow],[clickoutside$1,this.handleMenuClickOutside,void 0,{capture:!0}]]:[[clickoutside$1,this.handleMenuClickOutside,void 0,{capture:!0}]])):null}})})]}))}});var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const commonVars$1={titleFontSize:"18px",padding:"16px 28px 20px 28px",iconSize:"28px",actionSpace:"12px",contentMargin:"8px 0 16px 0",iconMargin:"0 4px 0 0",iconMarginIconTop:"4px 0 8px 0",closeSize:"22px",closeIconSize:"18px",closeMargin:"20px 26px 0 0",closeMarginIconTop:"10px 16px 0 0"},self$6=e=>{const{textColor1:n,textColor2:r,modalColor:o,closeIconColor:s,closeIconColorHover:u,closeIconColorPressed:d,closeColorHover:f,closeColorPressed:v,infoColor:m,successColor:_,warningColor:g,errorColor:y,primaryColor:w,dividerColor:x,borderRadius:k,fontWeightStrong:S,lineHeight:E,fontSize:T}=e;return Object.assign(Object.assign({},commonVars$1),{fontSize:T,lineHeight:E,border:`1px solid ${x}`,titleTextColor:n,textColor:r,color:o,closeColorHover:f,closeColorPressed:v,closeIconColor:s,closeIconColorHover:u,closeIconColorPressed:d,closeBorderRadius:k,iconColor:w,iconColorInfo:m,iconColorSuccess:_,iconColorWarning:g,iconColorError:y,borderRadius:k,titleFontWeight:S})},dialogLight={name:"Dialog",common:commonLight,peers:{Button:buttonLight$1},self:self$6},dialogLight$1=dialogLight,dialogProps={icon:Function,type:{type:String,default:"default"},title:[String,Function],closable:{type:Boolean,default:!0},negativeText:String,positiveText:String,positiveButtonProps:Object,negativeButtonProps:Object,content:[String,Function],action:Function,showIcon:{type:Boolean,default:!0},loading:Boolean,bordered:Boolean,iconPlacement:String,onPositiveClick:Function,onNegativeClick:Function,onClose:Function},dialogPropKeys=keysOf(dialogProps),style$5=c$1([cB("dialog",`
 word-break: break-word;
 line-height: var(--n-line-height);
 position: relative;
 background: var(--n-color);
 color: var(--n-text-color);
 box-sizing: border-box;
 margin: auto;
 border-radius: var(--n-border-radius);
 padding: var(--n-padding);
 transition: 
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `,[cE("icon",{color:"var(--n-icon-color)"}),cM("bordered",{border:"var(--n-border)"}),cM("icon-top",[cE("close",{margin:"var(--n-close-margin)"}),cE("icon",{margin:"var(--n-icon-margin)"}),cE("content",{textAlign:"center"}),cE("title",{justifyContent:"center"}),cE("action",{justifyContent:"center"})]),cM("icon-left",[cE("icon",{margin:"var(--n-icon-margin)"}),cM("closable",[cE("title",`
 padding-right: calc(var(--n-close-size) + 6px);
 `)])]),cE("close",`
 position: absolute;
 right: 0;
 top: 0;
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 z-index: 1;
 `),cE("content",`
 font-size: var(--n-font-size);
 margin: var(--n-content-margin);
 position: relative;
 word-break: break-word;
 `,[cM("last","margin-bottom: 0;")]),cE("action",`
 display: flex;
 justify-content: flex-end;
 `,[c$1("> *:not(:last-child)",{marginRight:"var(--n-action-space)"})]),cE("icon",{fontSize:"var(--n-icon-size)",transition:"color .3s var(--n-bezier)"}),cE("title",`
 transition: color .3s var(--n-bezier);
 display: flex;
 align-items: center;
 font-size: var(--n-title-font-size);
 font-weight: var(--n-title-font-weight);
 color: var(--n-title-text-color);
 `),cB("dialog-icon-container",{display:"flex",justifyContent:"center"})]),insideModal(cB("dialog",`
 width: 446px;
 max-width: calc(100vw - 32px);
 `)),cB("dialog",[asModal(`
 width: 446px;
 max-width: calc(100vw - 32px);
 `)])]),iconRenderMap$2={default:()=>h(InfoIcon,null),info:()=>h(InfoIcon,null),success:()=>h(SuccessIcon,null),warning:()=>h(WarningIcon,null),error:()=>h(ErrorIcon,null)},NDialog=defineComponent({name:"Dialog",alias:["NimbusConfirmCard","Confirm"],props:Object.assign(Object.assign({},useTheme.props),dialogProps),setup(e){const{mergedComponentPropsRef:n,mergedClsPrefixRef:r,inlineThemeDisabled:o}=useConfig(e),s=computed(()=>{var g,y;const{iconPlacement:w}=e;return w||((y=(g=n==null?void 0:n.value)===null||g===void 0?void 0:g.Dialog)===null||y===void 0?void 0:y.iconPlacement)||"left"});function u(g){const{onPositiveClick:y}=e;y&&y(g)}function d(g){const{onNegativeClick:y}=e;y&&y(g)}function f(){const{onClose:g}=e;g&&g()}const v=useTheme("Dialog","-dialog",style$5,dialogLight$1,e,r),m=computed(()=>{const{type:g}=e,y=s.value,{common:{cubicBezierEaseInOut:w},self:{fontSize:x,lineHeight:k,border:S,titleTextColor:E,textColor:T,color:M,closeBorderRadius:I,closeColorHover:F,closeColorPressed:O,closeIconColor:N,closeIconColorHover:D,closeIconColorPressed:X,closeIconSize:U,borderRadius:Z,titleFontWeight:j,titleFontSize:Q,padding:ve,iconSize:Se,actionSpace:we,contentMargin:oe,closeSize:ne,[y==="top"?"iconMarginIconTop":"iconMargin"]:q,[y==="top"?"closeMarginIconTop":"closeMargin"]:H,[createKey("iconColor",g)]:Y}}=v.value;return{"--n-font-size":x,"--n-icon-color":Y,"--n-bezier":w,"--n-close-margin":H,"--n-icon-margin":q,"--n-icon-size":Se,"--n-close-size":ne,"--n-close-icon-size":U,"--n-close-border-radius":I,"--n-close-color-hover":F,"--n-close-color-pressed":O,"--n-close-icon-color":N,"--n-close-icon-color-hover":D,"--n-close-icon-color-pressed":X,"--n-color":M,"--n-text-color":T,"--n-border-radius":Z,"--n-padding":ve,"--n-line-height":k,"--n-border":S,"--n-content-margin":oe,"--n-title-font-size":Q,"--n-title-font-weight":j,"--n-title-text-color":E,"--n-action-space":we}}),_=o?useThemeClass("dialog",computed(()=>`${e.type[0]}${s.value[0]}`),m,e):void 0;return{mergedClsPrefix:r,mergedIconPlacement:s,mergedTheme:v,handlePositiveClick:u,handleNegativeClick:d,handleCloseClick:f,cssVars:o?void 0:m,themeClass:_==null?void 0:_.themeClass,onRender:_==null?void 0:_.onRender}},render(){var e;const{bordered:n,mergedIconPlacement:r,cssVars:o,closable:s,showIcon:u,title:d,content:f,action:v,negativeText:m,positiveText:_,positiveButtonProps:g,negativeButtonProps:y,handlePositiveClick:w,handleNegativeClick:x,mergedTheme:k,loading:S,type:E,mergedClsPrefix:T}=this;(e=this.onRender)===null||e===void 0||e.call(this);const M=u?h(NBaseIcon,{clsPrefix:T,class:`${T}-dialog__icon`},{default:()=>resolveWrappedSlot(this.$slots.icon,F=>F||(this.icon?render$1(this.icon):iconRenderMap$2[this.type]()))}):null,I=resolveWrappedSlot(this.$slots.action,F=>F||_||m||v?h("div",{class:`${T}-dialog__action`},F||(v?[render$1(v)]:[this.negativeText&&h(NButton,Object.assign({theme:k.peers.Button,themeOverrides:k.peerOverrides.Button,ghost:!0,size:"small",onClick:x},y),{default:()=>render$1(this.negativeText)}),this.positiveText&&h(NButton,Object.assign({theme:k.peers.Button,themeOverrides:k.peerOverrides.Button,size:"small",type:E==="default"?"primary":E,disabled:S,loading:S,onClick:w},g),{default:()=>render$1(this.positiveText)})])):null);return h("div",{class:[`${T}-dialog`,this.themeClass,this.closable&&`${T}-dialog--closable`,`${T}-dialog--icon-${r}`,n&&`${T}-dialog--bordered`],style:o,role:"dialog"},s?h(NBaseClose,{clsPrefix:T,class:`${T}-dialog__close`,onClick:this.handleCloseClick}):null,u&&r==="top"?h("div",{class:`${T}-dialog-icon-container`},M):null,h("div",{class:`${T}-dialog__title`},u&&r==="left"?M:null,resolveSlot(this.$slots.header,()=>[render$1(d)])),h("div",{class:[`${T}-dialog__content`,I?"":`${T}-dialog__content--last`]},resolveSlot(this.$slots.default,()=>[render$1(f)])),I)}}),dialogProviderInjectionKey="n-dialog-provider",dialogApiInjectionKey="n-dialog-api",dialogReactiveListInjectionKey="n-dialog-reactive-list",self$5=e=>{const{modalColor:n,textColor2:r,boxShadow3:o}=e;return{color:n,textColor:r,boxShadow:o}},modalLight={name:"Modal",common:commonLight,peers:{Scrollbar:scrollbarLight$1,Dialog:dialogLight$1,Card:cardLight$1},self:self$5},modalLight$1=modalLight,presetProps=Object.assign(Object.assign({},cardBaseProps),dialogProps),presetPropsKeys=keysOf(presetProps),NModalBodyWrapper=defineComponent({name:"ModalBody",inheritAttrs:!1,props:Object.assign(Object.assign({show:{type:Boolean,required:!0},preset:String,displayDirective:{type:String,required:!0},trapFocus:{type:Boolean,default:!0},autoFocus:{type:Boolean,default:!0},blockScroll:Boolean},presetProps),{renderMask:Function,onClickoutside:Function,onBeforeLeave:{type:Function,required:!0},onAfterLeave:{type:Function,required:!0},onPositiveClick:{type:Function,required:!0},onNegativeClick:{type:Function,required:!0},onClose:{type:Function,required:!0},onAfterEnter:Function,onEsc:Function}),setup(e){const n=ref(null),r=ref(null),o=ref(e.show),s=ref(null),u=ref(null);watch(toRef(e,"show"),S=>{S&&(o.value=!0)}),useLockHtmlScroll(computed(()=>e.blockScroll&&o.value));const d=inject(modalInjectionKey);function f(){if(d.transformOriginRef.value==="center")return"";const{value:S}=s,{value:E}=u;if(S===null||E===null)return"";if(r.value){const T=r.value.containerScrollTop;return`${S}px ${E+T}px`}return""}function v(S){if(d.transformOriginRef.value==="center")return;const E=d.getMousePosition();if(!E||!r.value)return;const T=r.value.containerScrollTop,{offsetLeft:M,offsetTop:I}=S;if(E){const F=E.y,O=E.x;s.value=-(M-O),u.value=-(I-F-T)}S.style.transformOrigin=f()}function m(S){nextTick(()=>{v(S)})}function _(S){S.style.transformOrigin=f(),e.onBeforeLeave()}function g(){o.value=!1,s.value=null,u.value=null,e.onAfterLeave()}function y(){const{onClose:S}=e;S&&S()}function w(){e.onNegativeClick()}function x(){e.onPositiveClick()}const k=ref(null);return watch(k,S=>{S&&nextTick(()=>{const E=S.el;E&&n.value!==E&&(n.value=E)})}),provide(modalBodyInjectionKey,n),provide(drawerBodyInjectionKey,null),provide(popoverBodyInjectionKey,null),{mergedTheme:d.mergedThemeRef,appear:d.appearRef,isMounted:d.isMountedRef,mergedClsPrefix:d.mergedClsPrefixRef,bodyRef:n,scrollbarRef:r,displayed:o,childNodeRef:k,handlePositiveClick:x,handleNegativeClick:w,handleCloseClick:y,handleAfterLeave:g,handleBeforeLeave:_,handleEnter:m}},render(){const{$slots:e,$attrs:n,handleEnter:r,handleAfterLeave:o,handleBeforeLeave:s,preset:u,mergedClsPrefix:d}=this;let f=null;if(!u){if(f=getFirstSlotVNode(e),!f){warn$2("modal","default slot is empty");return}f=cloneVNode(f),f.props=mergeProps({class:`${d}-modal`},n,f.props||{})}return this.displayDirective==="show"||this.displayed||this.show?withDirectives(h("div",{role:"none",class:`${d}-modal-body-wrapper`},h(NScrollbar,{ref:"scrollbarRef",theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,contentClass:`${d}-modal-scroll-content`},{default:()=>{var v;return[(v=this.renderMask)===null||v===void 0?void 0:v.call(this),h(FocusTrap,{disabled:!this.trapFocus,active:this.show,onEsc:this.onEsc,autoFocus:this.autoFocus},{default:()=>{var m;return h(Transition,{name:"fade-in-scale-up-transition",appear:(m=this.appear)!==null&&m!==void 0?m:this.isMounted,onEnter:r,onAfterEnter:this.onAfterEnter,onAfterLeave:o,onBeforeLeave:s},{default:()=>{const _=[[vShow,this.show]],{onClickoutside:g}=this;return g&&_.push([clickoutside$1,this.onClickoutside,void 0,{capture:!0}]),withDirectives(this.preset==="confirm"||this.preset==="dialog"?h(NDialog,Object.assign({},this.$attrs,{class:[`${d}-modal`,this.$attrs.class],ref:"bodyRef",theme:this.mergedTheme.peers.Dialog,themeOverrides:this.mergedTheme.peerOverrides.Dialog},keep(this.$props,dialogPropKeys),{"aria-modal":"true"}),e):this.preset==="card"?h(NCard,Object.assign({},this.$attrs,{ref:"bodyRef",class:[`${d}-modal`,this.$attrs.class],theme:this.mergedTheme.peers.Card,themeOverrides:this.mergedTheme.peerOverrides.Card},keep(this.$props,cardBasePropKeys),{"aria-modal":"true",role:"dialog"}),e):this.childNodeRef=f,_)}})}})]}})),[[vShow,this.displayDirective==="if"||this.displayed||this.show]]):null}}),style$4=c$1([cB("modal-container",`
 position: fixed;
 left: 0;
 top: 0;
 height: 0;
 width: 0;
 display: flex;
 `),cB("modal-mask",`
 position: fixed;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 background-color: rgba(0, 0, 0, .4);
 `,[fadeInTransition({enterDuration:".25s",leaveDuration:".25s",enterCubicBezier:"var(--n-bezier-ease-out)",leaveCubicBezier:"var(--n-bezier-ease-out)"})]),cB("modal-body-wrapper",`
 position: fixed;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 overflow: visible;
 `,[cB("modal-scroll-content",`
 min-height: 100%;
 display: flex;
 position: relative;
 `)]),cB("modal",`
 position: relative;
 align-self: center;
 color: var(--n-text-color);
 margin: auto;
 box-shadow: var(--n-box-shadow);
 `,[fadeInScaleUpTransition({duration:".25s",enterScale:".5"})])]),modalProps=Object.assign(Object.assign(Object.assign(Object.assign({},useTheme.props),{show:Boolean,unstableShowMask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},preset:String,to:[String,Object],displayDirective:{type:String,default:"if"},transformOrigin:{type:String,default:"mouse"},zIndex:Number,autoFocus:{type:Boolean,default:!0},trapFocus:{type:Boolean,default:!0},closeOnEsc:{type:Boolean,default:!0},blockScroll:{type:Boolean,default:!0}}),presetProps),{onEsc:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],onAfterEnter:Function,onBeforeLeave:Function,onAfterLeave:Function,onClose:Function,onPositiveClick:Function,onNegativeClick:Function,onMaskClick:Function,internalDialog:Boolean,internalAppear:{type:Boolean,default:void 0},overlayStyle:[String,Object],onBeforeHide:Function,onAfterHide:Function,onHide:Function}),NModal=defineComponent({name:"Modal",inheritAttrs:!1,props:modalProps,setup(e){const n=ref(null),{mergedClsPrefixRef:r,namespaceRef:o,inlineThemeDisabled:s}=useConfig(e),u=useTheme("Modal","-modal",style$4,modalLight$1,e,r),d=useClicked(64),f=useClickPosition(),v=isMounted(),m=e.internalDialog?inject(dialogProviderInjectionKey,null):null,_=useIsComposing();function g(F){const{onUpdateShow:O,"onUpdate:show":N,onHide:D}=e;O&&call(O,F),N&&call(N,F),D&&!F&&D(F)}function y(){const{onClose:F}=e;F?Promise.resolve(F()).then(O=>{O!==!1&&g(!1)}):g(!1)}function w(){const{onPositiveClick:F}=e;F?Promise.resolve(F()).then(O=>{O!==!1&&g(!1)}):g(!1)}function x(){const{onNegativeClick:F}=e;F?Promise.resolve(F()).then(O=>{O!==!1&&g(!1)}):g(!1)}function k(){const{onBeforeLeave:F,onBeforeHide:O}=e;F&&call(F),O&&O()}function S(){const{onAfterLeave:F,onAfterHide:O}=e;F&&call(F),O&&O()}function E(F){var O;const{onMaskClick:N}=e;N&&N(F),e.maskClosable&&!((O=n.value)===null||O===void 0)&&O.contains(getPreciseEventTarget(F))&&g(!1)}function T(F){var O;(O=e.onEsc)===null||O===void 0||O.call(e),e.show&&e.closeOnEsc&&eventEffectNotPerformed(F)&&!_.value&&g(!1)}provide(modalInjectionKey,{getMousePosition:()=>{if(m){const{clickedRef:F,clickPositionRef:O}=m;if(F.value&&O.value)return O.value}return d.value?f.value:null},mergedClsPrefixRef:r,mergedThemeRef:u,isMountedRef:v,appearRef:toRef(e,"internalAppear"),transformOriginRef:toRef(e,"transformOrigin")});const M=computed(()=>{const{common:{cubicBezierEaseOut:F},self:{boxShadow:O,color:N,textColor:D}}=u.value;return{"--n-bezier-ease-out":F,"--n-box-shadow":O,"--n-color":N,"--n-text-color":D}}),I=s?useThemeClass("theme-class",void 0,M,e):void 0;return{mergedClsPrefix:r,namespace:o,isMounted:v,containerRef:n,presetProps:computed(()=>keep(e,presetPropsKeys)),handleEsc:T,handleAfterLeave:S,handleClickoutside:E,handleBeforeLeave:k,doUpdateShow:g,handleNegativeClick:x,handlePositiveClick:w,handleCloseClick:y,cssVars:s?void 0:M,themeClass:I==null?void 0:I.themeClass,onRender:I==null?void 0:I.onRender}},render(){const{mergedClsPrefix:e}=this;return h(LazyTeleport,{to:this.to,show:this.show},{default:()=>{var n;(n=this.onRender)===null||n===void 0||n.call(this);const{unstableShowMask:r}=this;return withDirectives(h("div",{role:"none",ref:"containerRef",class:[`${e}-modal-container`,this.themeClass,this.namespace],style:this.cssVars},h(NModalBodyWrapper,Object.assign({style:this.overlayStyle},this.$attrs,{ref:"bodyWrapper",displayDirective:this.displayDirective,show:this.show,preset:this.preset,autoFocus:this.autoFocus,trapFocus:this.trapFocus,blockScroll:this.blockScroll},this.presetProps,{onEsc:this.handleEsc,onClose:this.handleCloseClick,onNegativeClick:this.handleNegativeClick,onPositiveClick:this.handlePositiveClick,onBeforeLeave:this.handleBeforeLeave,onAfterEnter:this.onAfterEnter,onAfterLeave:this.handleAfterLeave,onClickoutside:r?void 0:this.handleClickoutside,renderMask:r?()=>{var o;return h(Transition,{name:"fade-in-transition",key:"mask",appear:(o=this.internalAppear)!==null&&o!==void 0?o:this.isMounted},{default:()=>this.show?h("div",{"aria-hidden":!0,ref:"containerRef",class:`${e}-modal-mask`,onClick:this.handleClickoutside}):null})}:void 0}),this.$slots)),[[zindexable$1,{zIndex:this.zIndex,enabled:this.show}]])}})}}),exposedDialogEnvProps=Object.assign(Object.assign({},dialogProps),{onAfterEnter:Function,onAfterLeave:Function,transformOrigin:String,blockScroll:{type:Boolean,default:!0},closeOnEsc:{type:Boolean,default:!0},onEsc:Function,autoFocus:{type:Boolean,default:!0},internalStyle:[String,Object],maskClosable:{type:Boolean,default:!0},onPositiveClick:Function,onNegativeClick:Function,onClose:Function,onMaskClick:Function}),NDialogEnvironment=defineComponent({name:"DialogEnvironment",props:Object.assign(Object.assign({},exposedDialogEnvProps),{internalKey:{type:String,required:!0},to:[String,Object],onInternalAfterLeave:{type:Function,required:!0}}),setup(e){const n=ref(!0);function r(){const{onInternalAfterLeave:_,internalKey:g,onAfterLeave:y}=e;_&&_(g),y&&y()}function o(_){const{onPositiveClick:g}=e;g?Promise.resolve(g(_)).then(y=>{y!==!1&&v()}):v()}function s(_){const{onNegativeClick:g}=e;g?Promise.resolve(g(_)).then(y=>{y!==!1&&v()}):v()}function u(){const{onClose:_}=e;_?Promise.resolve(_()).then(g=>{g!==!1&&v()}):v()}function d(_){const{onMaskClick:g,maskClosable:y}=e;g&&(g(_),y&&v())}function f(){const{onEsc:_}=e;_&&_()}function v(){n.value=!1}function m(_){n.value=_}return{show:n,hide:v,handleUpdateShow:m,handleAfterLeave:r,handleCloseClick:u,handleNegativeClick:s,handlePositiveClick:o,handleMaskClick:d,handleEsc:f}},render(){const{handlePositiveClick:e,handleUpdateShow:n,handleNegativeClick:r,handleCloseClick:o,handleAfterLeave:s,handleMaskClick:u,handleEsc:d,to:f,maskClosable:v,show:m}=this;return h(NModal,{show:m,onUpdateShow:n,onMaskClick:u,onEsc:d,to:f,maskClosable:v,onAfterEnter:this.onAfterEnter,onAfterLeave:s,closeOnEsc:this.closeOnEsc,blockScroll:this.blockScroll,autoFocus:this.autoFocus,transformOrigin:this.transformOrigin,internalAppear:!0,internalDialog:!0},{default:()=>h(NDialog,Object.assign({},keep(this.$props,dialogPropKeys),{style:this.internalStyle,onClose:o,onNegativeClick:r,onPositiveClick:e}))})}}),dialogProviderProps={injectionKey:String,to:[String,Object]},NDialogProvider=defineComponent({name:"DialogProvider",props:dialogProviderProps,setup(){const e=ref([]),n={};function r(f={}){const v=createId(),m=reactive(Object.assign(Object.assign({},f),{key:v,destroy:()=>{n[`n-dialog-${v}`].hide()}}));return e.value.push(m),m}const o=["info","success","warning","error"].map(f=>v=>r(Object.assign(Object.assign({},v),{type:f})));function s(f){const{value:v}=e;v.splice(v.findIndex(m=>m.key===f),1)}function u(){Object.values(n).forEach(f=>f.hide())}const d={create:r,destroyAll:u,info:o[0],success:o[1],warning:o[2],error:o[3]};return provide(dialogApiInjectionKey,d),provide(dialogProviderInjectionKey,{clickedRef:useClicked(64),clickPositionRef:useClickPosition()}),provide(dialogReactiveListInjectionKey,e),Object.assign(Object.assign({},d),{dialogList:e,dialogInstRefs:n,handleAfterLeave:s})},render(){var e,n;return h(Fragment,null,[this.dialogList.map(r=>h(NDialogEnvironment,omit(r,["destroy","style"],{internalStyle:r.style,to:this.to,ref:o=>{o===null?delete this.dialogInstRefs[`n-dialog-${r.key}`]:this.dialogInstRefs[`n-dialog-${r.key}`]=o},internalKey:r.key,onInternalAfterLeave:this.handleAfterLeave}))),(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e)])}});function useDialog(){const e=inject(dialogApiInjectionKey,null);return e===null&&throwError("use-dialog","No outer <n-dialog-provider /> founded."),e}const commonVars={closeMargin:"16px 12px",closeSize:"20px",closeIconSize:"16px",width:"365px",padding:"16px",titleFontSize:"16px",metaFontSize:"12px",descriptionFontSize:"12px"},self$4=e=>{const{textColor2:n,successColor:r,infoColor:o,warningColor:s,errorColor:u,popoverColor:d,closeIconColor:f,closeIconColorHover:v,closeIconColorPressed:m,closeColorHover:_,closeColorPressed:g,textColor1:y,textColor3:w,borderRadius:x,fontWeightStrong:k,boxShadow2:S,lineHeight:E,fontSize:T}=e;return Object.assign(Object.assign({},commonVars),{borderRadius:x,lineHeight:E,fontSize:T,headerFontWeight:k,iconColor:n,iconColorSuccess:r,iconColorInfo:o,iconColorWarning:s,iconColorError:u,color:d,textColor:n,closeIconColor:f,closeIconColorHover:v,closeIconColorPressed:m,closeBorderRadius:x,closeColorHover:_,closeColorPressed:g,headerTextColor:y,descriptionTextColor:w,actionTextColor:n,boxShadow:S})},notificationLight={name:"Notification",common:commonLight,peers:{Scrollbar:scrollbarLight$1},self:self$4},notificationLight$1=notificationLight,commonVariables={margin:"0 0 8px 0",padding:"10px 20px",maxWidth:"720px",minWidth:"420px",iconMargin:"0 10px 0 0",closeMargin:"0 0 0 10px",closeSize:"20px",closeIconSize:"16px",iconSize:"20px",fontSize:"14px"},self$3=e=>{const{textColor2:n,closeIconColor:r,closeIconColorHover:o,closeIconColorPressed:s,infoColor:u,successColor:d,errorColor:f,warningColor:v,popoverColor:m,boxShadow2:_,primaryColor:g,lineHeight:y,borderRadius:w,closeColorHover:x,closeColorPressed:k}=e;return Object.assign(Object.assign({},commonVariables),{closeBorderRadius:w,textColor:n,textColorInfo:n,textColorSuccess:n,textColorError:n,textColorWarning:n,textColorLoading:n,color:m,colorInfo:m,colorSuccess:m,colorError:m,colorWarning:m,colorLoading:m,boxShadow:_,boxShadowInfo:_,boxShadowSuccess:_,boxShadowError:_,boxShadowWarning:_,boxShadowLoading:_,iconColor:n,iconColorInfo:u,iconColorSuccess:d,iconColorWarning:v,iconColorError:f,iconColorLoading:g,closeColorHover:x,closeColorPressed:k,closeIconColor:r,closeIconColorHover:o,closeIconColorPressed:s,closeColorHoverInfo:x,closeColorPressedInfo:k,closeIconColorInfo:r,closeIconColorHoverInfo:o,closeIconColorPressedInfo:s,closeColorHoverSuccess:x,closeColorPressedSuccess:k,closeIconColorSuccess:r,closeIconColorHoverSuccess:o,closeIconColorPressedSuccess:s,closeColorHoverError:x,closeColorPressedError:k,closeIconColorError:r,closeIconColorHoverError:o,closeIconColorPressedError:s,closeColorHoverWarning:x,closeColorPressedWarning:k,closeIconColorWarning:r,closeIconColorHoverWarning:o,closeIconColorPressedWarning:s,closeColorHoverLoading:x,closeColorPressedLoading:k,closeIconColorLoading:r,closeIconColorHoverLoading:o,closeIconColorPressedLoading:s,loadingColor:g,lineHeight:y,borderRadius:w})},messageLight={name:"Message",common:commonLight,self:self$3},messageLight$1=messageLight,self$2=e=>{const{primaryColor:n,errorColor:r}=e;return{colorError:r,colorLoading:n,height:"2px"}},loadingBarLight={name:"LoadingBar",common:commonLight,self:self$2},loadingBarLight$1=loadingBarLight,sizeVariables={railHeight:"4px",railWidthVertical:"4px",handleSize:"18px",dotHeight:"8px",dotWidth:"8px",dotBorderRadius:"4px"},self$1=e=>{const n="rgba(0, 0, 0, .85)",r="0 2px 8px 0 rgba(0, 0, 0, 0.12)",{railColor:o,primaryColor:s,baseColor:u,cardColor:d,modalColor:f,popoverColor:v,borderRadius:m,fontSize:_,opacityDisabled:g}=e;return Object.assign(Object.assign({},sizeVariables),{fontSize:_,markFontSize:_,railColor:o,railColorHover:o,fillColor:s,fillColorHover:s,opacityDisabled:g,handleColor:"#FFF",dotColor:d,dotColorModal:f,dotColorPopover:v,handleBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",handleBoxShadowHover:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",handleBoxShadowActive:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",handleBoxShadowFocus:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",indicatorColor:n,indicatorBoxShadow:r,indicatorTextColor:u,indicatorBorderRadius:m,dotBorder:`2px solid ${o}`,dotBorderActive:`2px solid ${s}`,dotBoxShadow:""})},sliderLight={name:"Slider",common:commonLight,self:self$1},sliderLight$1=sliderLight,loadingBarProviderInjectionKey="n-loading-bar",loadingBarApiInjectionKey="n-loading-bar-api",style$3=cB("loading-bar-container",`
 z-index: 5999;
 position: fixed;
 top: 0;
 left: 0;
 right: 0;
 height: 2px;
`,[fadeInTransition({enterDuration:"0.3s",leaveDuration:"0.8s"}),cB("loading-bar",`
 width: 100%;
 transition:
 max-width 4s linear,
 background .2s linear;
 height: var(--n-height);
 `,[cM("starting",`
 background: var(--n-color-loading);
 `),cM("finishing",`
 background: var(--n-color-loading);
 transition:
 max-width .2s linear,
 background .2s linear;
 `),cM("error",`
 background: var(--n-color-error);
 transition:
 max-width .2s linear,
 background .2s linear;
 `)])]);var __awaiter$1=globalThis&&globalThis.__awaiter||function(e,n,r,o){function s(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function f(_){try{m(o.next(_))}catch(g){d(g)}}function v(_){try{m(o.throw(_))}catch(g){d(g)}}function m(_){_.done?u(_.value):s(_.value).then(f,v)}m((o=o.apply(e,n||[])).next())})};function createClassName(e,n){return`${n}-loading-bar ${n}-loading-bar--${e}`}const NLoadingBar=defineComponent({name:"LoadingBar",props:{containerStyle:[String,Object]},setup(){const{inlineThemeDisabled:e}=useConfig(),{props:n,mergedClsPrefixRef:r}=inject(loadingBarProviderInjectionKey),o=ref(null),s=ref(!1),u=ref(!1),d=ref(!1),f=ref(!1);let v=!1;const m=ref(!1),_=computed(()=>{const{loadingBarStyle:F}=n;return F?F[m.value?"error":"loading"]:""});function g(){return __awaiter$1(this,void 0,void 0,function*(){s.value=!1,d.value=!1,v=!1,m.value=!1,f.value=!0,yield nextTick(),f.value=!1})}function y(F=0,O=80,N="starting"){return __awaiter$1(this,void 0,void 0,function*(){yield g(),d.value=!0,u.value=!0,yield nextTick();const D=o.value;!D||(D.style.maxWidth=`${F}%`,D.style.transition="none",D.offsetWidth,D.className=createClassName(N,r.value),D.style.transition="",D.style.maxWidth=`${O}%`)})}function w(){if(v||m.value||!d.value)return;v=!0;const F=o.value;!F||(F.className=createClassName("finishing",r.value),F.style.maxWidth="100%",F.offsetWidth,d.value=!1)}function x(){if(!(v||m.value))if(!d.value)y(100,100,"error").then(()=>{m.value=!0;const F=o.value;!F||(F.className=createClassName("error",r.value),F.offsetWidth,d.value=!1)});else{m.value=!0;const F=o.value;if(!F)return;F.className=createClassName("error",r.value),F.style.maxWidth="100%",F.offsetWidth,d.value=!1}}function k(){s.value=!0}function S(){s.value=!1}function E(){return __awaiter$1(this,void 0,void 0,function*(){yield g()})}const T=useTheme("LoadingBar","-loading-bar",style$3,loadingBarLight$1,n,r),M=computed(()=>{const{self:{height:F,colorError:O,colorLoading:N}}=T.value;return{"--n-height":F,"--n-color-loading":N,"--n-color-error":O}}),I=e?useThemeClass("loading-bar",void 0,M,n):void 0;return{mergedClsPrefix:r,loadingBarRef:o,started:u,loading:d,entering:s,transitionDisabled:f,start:y,error:x,finish:w,handleEnter:k,handleAfterEnter:S,handleAfterLeave:E,mergedLoadingBarStyle:_,cssVars:e?void 0:M,themeClass:I==null?void 0:I.themeClass,onRender:I==null?void 0:I.onRender}},render(){if(!this.started)return null;const{mergedClsPrefix:e}=this;return h(Transition,{name:"fade-in-transition",appear:!0,onEnter:this.handleEnter,onAfterEnter:this.handleAfterEnter,onAfterLeave:this.handleAfterLeave,css:!this.transitionDisabled},{default:()=>{var n;return(n=this.onRender)===null||n===void 0||n.call(this),withDirectives(h("div",{class:[`${e}-loading-bar-container`,this.themeClass],style:this.containerStyle},h("div",{ref:"loadingBarRef",class:[`${e}-loading-bar`],style:[this.cssVars,this.mergedLoadingBarStyle]})),[[vShow,this.loading||!this.loading&&this.entering]])}})}}),loadingBarProviderProps=Object.assign(Object.assign({},useTheme.props),{to:{type:[String,Object,Boolean],default:void 0},containerStyle:[String,Object],loadingBarStyle:{type:Object}}),NLoadingBarProvider=defineComponent({name:"LoadingBarProvider",props:loadingBarProviderProps,setup(e){const n=isMounted(),r=ref(null),o={start(){var u;n.value?(u=r.value)===null||u===void 0||u.start():nextTick(()=>{var d;(d=r.value)===null||d===void 0||d.start()})},error(){var u;n.value?(u=r.value)===null||u===void 0||u.error():nextTick(()=>{var d;(d=r.value)===null||d===void 0||d.error()})},finish(){var u;n.value?(u=r.value)===null||u===void 0||u.finish():nextTick(()=>{var d;(d=r.value)===null||d===void 0||d.finish()})}},{mergedClsPrefixRef:s}=useConfig(e);return provide(loadingBarApiInjectionKey,o),provide(loadingBarProviderInjectionKey,{props:e,mergedClsPrefixRef:s}),Object.assign(o,{loadingBarRef:r})},render(){var e,n;return h(Fragment,null,h(Teleport,{disabled:this.to===!1,to:this.to||"body"},h(NLoadingBar,{ref:"loadingBarRef",containerStyle:this.containerStyle})),(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e))}});function useLoadingBar(){const e=inject(loadingBarApiInjectionKey,null);return e===null&&throwError("use-loading-bar","No outer <n-loading-bar-provider /> founded."),e}const messageProps={icon:Function,type:{type:String,default:"info"},content:[String,Number,Function],showIcon:{type:Boolean,default:!0},closable:Boolean,keepAliveOnHover:Boolean,onClose:Function,onMouseenter:Function,onMouseleave:Function},messageApiInjectionKey="n-message-api",messageProviderInjectionKey="n-message-provider",style$2=c$1([cB("message-wrapper",`
 margin: var(--n-margin);
 z-index: 0;
 transform-origin: top center;
 display: flex;
 `,[fadeInHeightExpandTransition({overflow:"visible",originalTransition:"transform .3s var(--n-bezier)",enterToProps:{transform:"scale(1)"},leaveToProps:{transform:"scale(0.85)"}})]),cB("message",`
 box-sizing: border-box;
 display: flex;
 align-items: center;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 transform .3s var(--n-bezier),
 margin-bottom .3s var(--n-bezier);
 padding: var(--n-padding);
 border-radius: var(--n-border-radius);
 flex-wrap: nowrap;
 overflow: hidden;
 max-width: var(--n-max-width);
 color: var(--n-text-color);
 background-color: var(--n-color);
 box-shadow: var(--n-box-shadow);
 `,[cE("content",`
 display: inline-block;
 line-height: var(--n-line-height);
 font-size: var(--n-font-size);
 `),cE("icon",`
 position: relative;
 margin: var(--n-icon-margin);
 height: var(--n-icon-size);
 width: var(--n-icon-size);
 font-size: var(--n-icon-size);
 flex-shrink: 0;
 `,[["default","info","success","warning","error","loading"].map(e=>cM(`${e}-type`,[c$1("> *",`
 color: var(--n-icon-color-${e});
 transition: color .3s var(--n-bezier);
 `)])),c$1("> *",`
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[iconSwitchTransition()])]),cE("close",`
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 flex-shrink: 0;
 `,[c$1("&:hover",`
 color: var(--n-close-icon-color-hover);
 `),c$1("&:active",`
 color: var(--n-close-icon-color-pressed);
 `)])]),cB("message-container",`
 z-index: 6000;
 position: fixed;
 height: 0;
 overflow: visible;
 display: flex;
 flex-direction: column;
 align-items: center;
 `,[cM("top",`
 top: 12px;
 left: 0;
 right: 0;
 `),cM("top-left",`
 top: 12px;
 left: 12px;
 right: 0;
 align-items: flex-start;
 `),cM("top-right",`
 top: 12px;
 left: 0;
 right: 12px;
 align-items: flex-end;
 `),cM("bottom",`
 bottom: 4px;
 left: 0;
 right: 0;
 justify-content: flex-end;
 `),cM("bottom-left",`
 bottom: 4px;
 left: 12px;
 right: 0;
 justify-content: flex-end;
 align-items: flex-start;
 `),cM("bottom-right",`
 bottom: 4px;
 left: 0;
 right: 12px;
 justify-content: flex-end;
 align-items: flex-end;
 `)])]),iconRenderMap$1={info:()=>h(InfoIcon,null),success:()=>h(SuccessIcon,null),warning:()=>h(WarningIcon,null),error:()=>h(ErrorIcon,null),default:()=>null},NMessage=defineComponent({name:"Message",props:Object.assign(Object.assign({},messageProps),{render:Function}),setup(e){const{inlineThemeDisabled:n,mergedRtlRef:r}=useConfig(e),{props:o,mergedClsPrefixRef:s}=inject(messageProviderInjectionKey),u=useRtl("Message",r,s),d=useTheme("Message","-message",style$2,messageLight$1,o,s),f=computed(()=>{const{type:m}=e,{common:{cubicBezierEaseInOut:_},self:{padding:g,margin:y,maxWidth:w,iconMargin:x,closeMargin:k,closeSize:S,iconSize:E,fontSize:T,lineHeight:M,borderRadius:I,iconColorInfo:F,iconColorSuccess:O,iconColorWarning:N,iconColorError:D,iconColorLoading:X,closeIconSize:U,closeBorderRadius:Z,[createKey("textColor",m)]:j,[createKey("boxShadow",m)]:Q,[createKey("color",m)]:ve,[createKey("closeColorHover",m)]:Se,[createKey("closeColorPressed",m)]:we,[createKey("closeIconColor",m)]:oe,[createKey("closeIconColorPressed",m)]:ne,[createKey("closeIconColorHover",m)]:q}}=d.value;return{"--n-bezier":_,"--n-margin":y,"--n-padding":g,"--n-max-width":w,"--n-font-size":T,"--n-icon-margin":x,"--n-icon-size":E,"--n-close-icon-size":U,"--n-close-border-radius":Z,"--n-close-size":S,"--n-close-margin":k,"--n-text-color":j,"--n-color":ve,"--n-box-shadow":Q,"--n-icon-color-info":F,"--n-icon-color-success":O,"--n-icon-color-warning":N,"--n-icon-color-error":D,"--n-icon-color-loading":X,"--n-close-color-hover":Se,"--n-close-color-pressed":we,"--n-close-icon-color":oe,"--n-close-icon-color-pressed":ne,"--n-close-icon-color-hover":q,"--n-line-height":M,"--n-border-radius":I}}),v=n?useThemeClass("message",computed(()=>e.type[0]),f,{}):void 0;return{mergedClsPrefix:s,rtlEnabled:u,messageProviderProps:o,handleClose(){var m;(m=e.onClose)===null||m===void 0||m.call(e)},cssVars:n?void 0:f,themeClass:v==null?void 0:v.themeClass,onRender:v==null?void 0:v.onRender,placement:o.placement}},render(){const{render:e,type:n,closable:r,content:o,mergedClsPrefix:s,cssVars:u,themeClass:d,onRender:f,icon:v,handleClose:m,showIcon:_}=this;f==null||f();let g;return h("div",{class:[`${s}-message-wrapper`,d],onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave,style:[{alignItems:this.placement.startsWith("top")?"flex-start":"flex-end"},u]},e?e(this.$props):h("div",{class:[`${s}-message ${s}-message--${n}-type`,this.rtlEnabled&&`${s}-message--rtl`]},(g=createIconVNode(v,n,s))&&_?h("div",{class:`${s}-message__icon ${s}-message__icon--${n}-type`},h(NIconSwitchTransition,null,{default:()=>g})):null,h("div",{class:`${s}-message__content`},render$1(o)),r?h(NBaseClose,{clsPrefix:s,class:`${s}-message__close`,onClick:m,absolute:!0}):null))}});function createIconVNode(e,n,r){if(typeof e=="function")return e();{const o=n==="loading"?h(NBaseLoading,{clsPrefix:r,strokeWidth:24,scale:.85}):iconRenderMap$1[n]();return o?h(NBaseIcon,{clsPrefix:r,key:n},{default:()=>o}):null}}const MessageEnvironment=defineComponent({name:"MessageEnvironment",props:Object.assign(Object.assign({},messageProps),{duration:{type:Number,default:3e3},onAfterLeave:Function,onLeave:Function,internalKey:{type:String,required:!0},onInternalAfterLeave:Function,onHide:Function,onAfterHide:Function}),setup(e){let n=null;const r=ref(!0);onMounted(()=>{o()});function o(){const{duration:_}=e;_&&(n=window.setTimeout(d,_))}function s(_){_.currentTarget===_.target&&n!==null&&(window.clearTimeout(n),n=null)}function u(_){_.currentTarget===_.target&&o()}function d(){const{onHide:_}=e;r.value=!1,n&&(window.clearTimeout(n),n=null),_&&_()}function f(){const{onClose:_}=e;_&&_(),d()}function v(){const{onAfterLeave:_,onInternalAfterLeave:g,onAfterHide:y,internalKey:w}=e;_&&_(),g&&g(w),y&&y()}function m(){d()}return{show:r,hide:d,handleClose:f,handleAfterLeave:v,handleMouseleave:u,handleMouseenter:s,deactivate:m}},render(){return h(NFadeInExpandTransition,{appear:!0,onAfterLeave:this.handleAfterLeave,onLeave:this.onLeave},{default:()=>[this.show?h(NMessage,{content:this.content,type:this.type,icon:this.icon,showIcon:this.showIcon,closable:this.closable,onClose:this.handleClose,onMouseenter:this.keepAliveOnHover?this.handleMouseenter:void 0,onMouseleave:this.keepAliveOnHover?this.handleMouseleave:void 0}):null]})}}),messageProviderProps=Object.assign(Object.assign({},useTheme.props),{to:[String,Object],duration:{type:Number,default:3e3},keepAliveOnHover:Boolean,max:Number,placement:{type:String,default:"top"},closable:Boolean,containerStyle:[String,Object]}),NMessageProvider=defineComponent({name:"MessageProvider",props:messageProviderProps,setup(e){const{mergedClsPrefixRef:n}=useConfig(e),r=ref([]),o=ref({}),s={create(v,m){return u(v,Object.assign({type:"default"},m))},info(v,m){return u(v,Object.assign(Object.assign({},m),{type:"info"}))},success(v,m){return u(v,Object.assign(Object.assign({},m),{type:"success"}))},warning(v,m){return u(v,Object.assign(Object.assign({},m),{type:"warning"}))},error(v,m){return u(v,Object.assign(Object.assign({},m),{type:"error"}))},loading(v,m){return u(v,Object.assign(Object.assign({},m),{type:"loading"}))},destroyAll:f};provide(messageProviderInjectionKey,{props:e,mergedClsPrefixRef:n}),provide(messageApiInjectionKey,s);function u(v,m){const _=createId(),g=reactive(Object.assign(Object.assign({},m),{content:v,key:_,destroy:()=>{var w;(w=o.value[_])===null||w===void 0||w.hide()}})),{max:y}=e;return y&&r.value.length>=y&&r.value.shift(),r.value.push(g),g}function d(v){r.value.splice(r.value.findIndex(m=>m.key===v),1),delete o.value[v]}function f(){Object.values(o.value).forEach(v=>{v.hide()})}return Object.assign({mergedClsPrefix:n,messageRefs:o,messageList:r,handleAfterLeave:d},s)},render(){var e,n,r;return h(Fragment,null,(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e),this.messageList.length?h(Teleport,{to:(r=this.to)!==null&&r!==void 0?r:"body"},h("div",{class:[`${this.mergedClsPrefix}-message-container`,`${this.mergedClsPrefix}-message-container--${this.placement}`],key:"message-container",style:this.containerStyle},this.messageList.map(o=>h(MessageEnvironment,Object.assign({ref:s=>{s&&(this.messageRefs[o.key]=s)},internalKey:o.key,onInternalAfterLeave:this.handleAfterLeave},omit(o,["destroy"],void 0),{duration:o.duration===void 0?this.duration:o.duration,keepAliveOnHover:o.keepAliveOnHover===void 0?this.keepAliveOnHover:o.keepAliveOnHover,closable:o.closable===void 0?this.closable:o.closable}))))):null)}});function useMessage(){const e=inject(messageApiInjectionKey,null);return e===null&&throwError("use-message","No outer <n-message-provider /> founded. See prerequisite in https://www.naiveui.com/en-US/os-theme/components/message for more details. If you want to use `useMessage` outside setup, please check https://www.naiveui.com/zh-CN/os-theme/components/message#Q-&-A."),e}const notificationProviderInjectionKey="n-notification-provider",NotificationContainer=defineComponent({name:"NotificationContainer",props:{scrollable:{type:Boolean,required:!0},placement:{type:String,required:!0}},setup(){const{mergedThemeRef:e,mergedClsPrefixRef:n,wipTransitionCountRef:r}=inject(notificationProviderInjectionKey),o=ref(null);return watchEffect(()=>{var s,u;r.value>0?(s=o==null?void 0:o.value)===null||s===void 0||s.classList.add("transitioning"):(u=o==null?void 0:o.value)===null||u===void 0||u.classList.remove("transitioning")}),{selfRef:o,mergedTheme:e,mergedClsPrefix:n,transitioning:r}},render(){const{$slots:e,scrollable:n,mergedClsPrefix:r,mergedTheme:o,placement:s}=this;return h("div",{ref:"selfRef",class:[`${r}-notification-container`,n&&`${r}-notification-container--scrollable`,`${r}-notification-container--${s}`]},n?h(NScrollbar,{theme:o.peers.Scrollbar,themeOverrides:o.peerOverrides.Scrollbar,contentStyle:{overflow:"hidden"}},e):e)}}),iconRenderMap={info:()=>h(InfoIcon,null),success:()=>h(SuccessIcon,null),warning:()=>h(WarningIcon,null),error:()=>h(ErrorIcon,null),default:()=>null},notificationProps={closable:{type:Boolean,default:!0},type:{type:String,default:"default"},avatar:Function,title:[String,Function],description:[String,Function],content:[String,Function],meta:[String,Function],action:[String,Function],onClose:{type:Function,required:!0},keepAliveOnHover:Boolean,onMouseenter:Function,onMouseleave:Function},notificationPropKeys=keysOf(notificationProps),Notification=defineComponent({name:"Notification",props:notificationProps,setup(e){const{mergedClsPrefixRef:n,mergedThemeRef:r,props:o}=inject(notificationProviderInjectionKey),{inlineThemeDisabled:s,mergedRtlRef:u}=useConfig(),d=useRtl("Notification",u,n),f=computed(()=>{const{type:m}=e,{self:{color:_,textColor:g,closeIconColor:y,closeIconColorHover:w,closeIconColorPressed:x,headerTextColor:k,descriptionTextColor:S,actionTextColor:E,borderRadius:T,headerFontWeight:M,boxShadow:I,lineHeight:F,fontSize:O,closeMargin:N,closeSize:D,width:X,padding:U,closeIconSize:Z,closeBorderRadius:j,closeColorHover:Q,closeColorPressed:ve,titleFontSize:Se,metaFontSize:we,descriptionFontSize:oe,[createKey("iconColor",m)]:ne},common:{cubicBezierEaseOut:q,cubicBezierEaseIn:H,cubicBezierEaseInOut:Y}}=r.value,{left:le,right:Ce,top:Te,bottom:ke}=getMargin(U);return{"--n-color":_,"--n-font-size":O,"--n-text-color":g,"--n-description-text-color":S,"--n-action-text-color":E,"--n-title-text-color":k,"--n-title-font-weight":M,"--n-bezier":Y,"--n-bezier-ease-out":q,"--n-bezier-ease-in":H,"--n-border-radius":T,"--n-box-shadow":I,"--n-close-border-radius":j,"--n-close-color-hover":Q,"--n-close-color-pressed":ve,"--n-close-icon-color":y,"--n-close-icon-color-hover":w,"--n-close-icon-color-pressed":x,"--n-line-height":F,"--n-icon-color":ne,"--n-close-margin":N,"--n-close-size":D,"--n-close-icon-size":Z,"--n-width":X,"--n-padding-left":le,"--n-padding-right":Ce,"--n-padding-top":Te,"--n-padding-bottom":ke,"--n-title-font-size":Se,"--n-meta-font-size":we,"--n-description-font-size":oe}}),v=s?useThemeClass("notification",computed(()=>e.type[0]),f,o):void 0;return{mergedClsPrefix:n,showAvatar:computed(()=>e.avatar||e.type!=="default"),handleCloseClick(){e.onClose()},rtlEnabled:d,cssVars:s?void 0:f,themeClass:v==null?void 0:v.themeClass,onRender:v==null?void 0:v.onRender}},render(){var e;const{mergedClsPrefix:n}=this;return(e=this.onRender)===null||e===void 0||e.call(this),h("div",{class:[`${n}-notification-wrapper`,this.themeClass],onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave,style:this.cssVars},h("div",{class:[`${n}-notification`,this.rtlEnabled&&`${n}-notification--rtl`,this.themeClass,{[`${n}-notification--closable`]:this.closable,[`${n}-notification--show-avatar`]:this.showAvatar}],style:this.cssVars},this.showAvatar?h("div",{class:`${n}-notification__avatar`},this.avatar?render$1(this.avatar):this.type!=="default"?h(NBaseIcon,{clsPrefix:n},{default:()=>iconRenderMap[this.type]()}):null):null,this.closable?h(NBaseClose,{clsPrefix:n,class:`${n}-notification__close`,onClick:this.handleCloseClick}):null,h("div",{ref:"bodyRef",class:`${n}-notification-main`},this.title?h("div",{class:`${n}-notification-main__header`},render$1(this.title)):null,this.description?h("div",{class:`${n}-notification-main__description`},render$1(this.description)):null,this.content?h("pre",{class:`${n}-notification-main__content`},render$1(this.content)):null,this.meta||this.action?h("div",{class:`${n}-notification-main-footer`},this.meta?h("div",{class:`${n}-notification-main-footer__meta`},render$1(this.meta)):null,this.action?h("div",{class:`${n}-notification-main-footer__action`},render$1(this.action)):null):null)))}}),notificationEnvOptions=Object.assign(Object.assign({},notificationProps),{duration:Number,onClose:Function,onLeave:Function,onAfterEnter:Function,onAfterLeave:Function,onHide:Function,onAfterShow:Function,onAfterHide:Function}),NotificationEnvironment=defineComponent({name:"NotificationEnvironment",props:Object.assign(Object.assign({},notificationEnvOptions),{internalKey:{type:String,required:!0},onInternalAfterLeave:{type:Function,required:!0}}),setup(e){const{wipTransitionCountRef:n}=inject(notificationProviderInjectionKey),r=ref(!0);let o=null;function s(){r.value=!1,o&&window.clearTimeout(o)}function u(x){n.value++,nextTick(()=>{x.style.height=`${x.offsetHeight}px`,x.style.maxHeight="0",x.style.transition="none",x.offsetHeight,x.style.transition="",x.style.maxHeight=x.style.height})}function d(x){n.value--,x.style.height="",x.style.maxHeight="";const{onAfterEnter:k,onAfterShow:S}=e;k&&k(),S&&S()}function f(x){n.value++,x.style.maxHeight=`${x.offsetHeight}px`,x.style.height=`${x.offsetHeight}px`,x.offsetHeight}function v(x){const{onHide:k}=e;k&&k(),x.style.maxHeight="0",x.offsetHeight}function m(){n.value--;const{onAfterLeave:x,onInternalAfterLeave:k,onAfterHide:S,internalKey:E}=e;x&&x(),k(E),S&&S()}function _(){const{duration:x}=e;x&&(o=window.setTimeout(s,x))}function g(x){x.currentTarget===x.target&&o!==null&&(window.clearTimeout(o),o=null)}function y(x){x.currentTarget===x.target&&_()}function w(){const{onClose:x}=e;x?Promise.resolve(x()).then(k=>{k!==!1&&s()}):s()}return onMounted(()=>{e.duration&&(o=window.setTimeout(s,e.duration))}),{show:r,hide:s,handleClose:w,handleAfterLeave:m,handleLeave:v,handleBeforeLeave:f,handleAfterEnter:d,handleBeforeEnter:u,handleMouseenter:g,handleMouseleave:y}},render(){return h(Transition,{name:"notification-transition",appear:!0,onBeforeEnter:this.handleBeforeEnter,onAfterEnter:this.handleAfterEnter,onBeforeLeave:this.handleBeforeLeave,onLeave:this.handleLeave,onAfterLeave:this.handleAfterLeave},{default:()=>this.show?h(Notification,Object.assign({},keep(this.$props,notificationPropKeys),{onClose:this.handleClose,onMouseenter:this.duration&&this.keepAliveOnHover?this.handleMouseenter:void 0,onMouseleave:this.duration&&this.keepAliveOnHover?this.handleMouseleave:void 0})):null})}}),style$1=c$1([cB("notification-container",`
 z-index: 4000;
 position: fixed;
 overflow: visible;
 display: flex;
 flex-direction: column;
 align-items: flex-end;
 `,[c$1(">",[cB("scrollbar",`
 width: initial;
 overflow: visible;
 height: -moz-fit-content !important;
 height: fit-content !important;
 max-height: 100vh !important;
 `,[c$1(">",[cB("scrollbar-container",`
 height: -moz-fit-content !important;
 height: fit-content !important;
 max-height: 100vh !important;
 `,[cB("scrollbar-content",`
 padding-top: 12px;
 padding-bottom: 33px;
 `)])])])]),cM("top, top-right, top-left",`
 top: 12px;
 `,[c$1("&.transitioning >",[cB("scrollbar",[c$1(">",[cB("scrollbar-container",`
 min-height: 100vh !important;
 `)])])])]),cM("bottom, bottom-right, bottom-left",`
 bottom: 12px;
 `,[c$1(">",[cB("scrollbar",[c$1(">",[cB("scrollbar-container",[cB("scrollbar-content",`
 padding-bottom: 12px;
 `)])])])]),cB("notification-wrapper",`
 display: flex;
 align-items: flex-end;
 margin-bottom: 0;
 margin-top: 12px;
 `)]),cM("top, bottom",`
 left: 50%;
 transform: translateX(-50%);
 `,[cB("notification-wrapper",[c$1("&.notification-transition-enter-from, &.notification-transition-leave-to",`
 transform: scale(0.85);
 `),c$1("&.notification-transition-leave-from, &.notification-transition-enter-to",`
 transform: scale(1);
 `)])]),cM("top",[cB("notification-wrapper",`
 transform-origin: top center;
 `)]),cM("bottom",[cB("notification-wrapper",`
 transform-origin: bottom center;
 `)]),cM("top-right, bottom-right",[cB("notification",`
 margin-left: 28px;
 margin-right: 16px;
 `)]),cM("top-left, bottom-left",[cB("notification",`
 margin-left: 16px;
 margin-right: 28px;
 `)]),cM("top-right",`
 right: 0;
 `,[placementTransformStyle("top-right")]),cM("top-left",`
 left: 0;
 `,[placementTransformStyle("top-left")]),cM("bottom-right",`
 right: 0;
 `,[placementTransformStyle("bottom-right")]),cM("bottom-left",`
 left: 0;
 `,[placementTransformStyle("bottom-left")]),cM("scrollable",[cM("top-right",`
 top: 0;
 `),cM("top-left",`
 top: 0;
 `),cM("bottom-right",`
 bottom: 0;
 `),cM("bottom-left",`
 bottom: 0;
 `)]),cB("notification-wrapper",`
 margin-bottom: 12px;
 `,[c$1("&.notification-transition-enter-from, &.notification-transition-leave-to",`
 opacity: 0;
 margin-top: 0 !important;
 margin-bottom: 0 !important;
 `),c$1("&.notification-transition-leave-from, &.notification-transition-enter-to",`
 opacity: 1;
 `),c$1("&.notification-transition-leave-active",`
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 transform .3s var(--n-bezier-ease-in),
 max-height .3s var(--n-bezier),
 margin-top .3s linear,
 margin-bottom .3s linear,
 box-shadow .3s var(--n-bezier);
 `),c$1("&.notification-transition-enter-active",`
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 transform .3s var(--n-bezier-ease-out),
 max-height .3s var(--n-bezier),
 margin-top .3s linear,
 margin-bottom .3s linear,
 box-shadow .3s var(--n-bezier);
 `)]),cB("notification",`
 background-color: var(--n-color);
 color: var(--n-text-color);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 font-family: inherit;
 font-size: var(--n-font-size);
 font-weight: 400;
 position: relative;
 display: flex;
 overflow: hidden;
 flex-shrink: 0;
 padding-left: var(--n-padding-left);
 padding-right: var(--n-padding-right);
 width: var(--n-width);
 border-radius: var(--n-border-radius);
 box-shadow: var(--n-box-shadow);
 box-sizing: border-box;
 opacity: 1;
 `,[cE("avatar",[cB("icon",{color:"var(--n-icon-color)"}),cB("base-icon",{color:"var(--n-icon-color)"})]),cM("show-avatar",[cB("notification-main",`
 margin-left: 40px;
 width: calc(100% - 40px); 
 `)]),cM("closable",[cB("notification-main",[c$1("> *:first-child",{paddingRight:"20px"})]),cE("close",`
 position: absolute;
 top: 0;
 right: 0;
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `)]),cE("avatar",`
 position: absolute;
 top: var(--n-padding-top);
 left: var(--n-padding-left);
 width: 28px;
 height: 28px;
 font-size: 28px;
 display: flex;
 align-items: center;
 justify-content: center;
 `,[cB("icon","transition: color .3s var(--n-bezier);")]),cB("notification-main",`
 padding-top: var(--n-padding-top);
 padding-bottom: var(--n-padding-bottom);
 box-sizing: border-box;
 display: flex;
 flex-direction: column;
 margin-left: 8px;
 width: calc(100% - 8px);
 `,[cB("notification-main-footer",`
 display: flex;
 align-items: center;
 justify-content: space-between;
 margin-top: 12px;
 `,[cE("meta",`
 font-size: var(--n-meta-font-size);
 transition: color .3s var(--n-bezier-ease-out);
 color: var(--n-description-text-color);
 `),cE("action",`
 cursor: pointer;
 transition: color .3s var(--n-bezier-ease-out);
 color: var(--n-action-text-color);
 `)]),cE("header",`
 font-weight: var(--n-title-font-weight);
 font-size: var(--n-title-font-size);
 transition: color .3s var(--n-bezier-ease-out);
 color: var(--n-title-text-color);
 `),cE("description",`
 margin-top: 8px;
 font-size: var(--n-description-font-size);
 transition: color .3s var(--n-bezier-ease-out);
 color: var(--n-description-text-color);
 `),cE("content",`
 line-height: var(--n-line-height);
 margin: 12px 0 0 0;
 font-family: inherit;
 white-space: pre-wrap;
 word-wrap: break-word;
 transition: color .3s var(--n-bezier-ease-out);
 color: var(--n-text-color);
 `,[c$1("&:first-child",{margin:0})])])])])]);function placementTransformStyle(e){const r=e.split("-")[1]==="left"?"calc(-100%)":"calc(100%)",o="0";return cB("notification-wrapper",[c$1("&.notification-transition-enter-from, &.notification-transition-leave-to",`
 transform: translate(${r}, 0);
 `),c$1("&.notification-transition-leave-from, &.notification-transition-enter-to",`
 transform: translate(${o}, 0);
 `)])}const notificationApiInjectionKey="n-notification-api",notificationProviderProps=Object.assign(Object.assign({},useTheme.props),{containerStyle:[String,Object],to:[String,Object],scrollable:{type:Boolean,default:!0},max:Number,placement:{type:String,default:"top-right"},keepAliveOnHover:Boolean}),NNotificationProvider=defineComponent({name:"NotificationProvider",props:notificationProviderProps,setup(e){const{mergedClsPrefixRef:n}=useConfig(e),r=ref([]),o={},s=new Set;function u(w){const x=createId(),k=()=>{s.add(x),o[x]&&o[x].hide()},S=reactive(Object.assign(Object.assign({},w),{key:x,destroy:k,hide:k,deactivate:k})),{max:E}=e;if(E&&r.value.length-s.size>=E){let T=!1,M=0;for(const I of r.value){if(!s.has(I.key)){o[I.key]&&(I.destroy(),T=!0);break}M++}T||r.value.splice(M,1)}return r.value.push(S),S}const d=["info","success","warning","error"].map(w=>x=>u(Object.assign(Object.assign({},x),{type:w})));function f(w){s.delete(w),r.value.splice(r.value.findIndex(x=>x.key===w),1)}const v=useTheme("Notification","-notification",style$1,notificationLight$1,e,n),m={create:u,info:d[0],success:d[1],warning:d[2],error:d[3],open:g,destroyAll:y},_=ref(0);provide(notificationApiInjectionKey,m),provide(notificationProviderInjectionKey,{props:e,mergedClsPrefixRef:n,mergedThemeRef:v,wipTransitionCountRef:_});function g(w){return u(w)}function y(){Object.values(r.value).forEach(w=>{w.hide()})}return Object.assign({mergedClsPrefix:n,notificationList:r,notificationRefs:o,handleAfterLeave:f},m)},render(){var e,n,r;const{placement:o}=this;return h(Fragment,null,(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e),this.notificationList.length?h(Teleport,{to:(r=this.to)!==null&&r!==void 0?r:"body"},h(NotificationContainer,{style:this.containerStyle,scrollable:this.scrollable&&o!=="top"&&o!=="bottom",placement:o},{default:()=>this.notificationList.map(s=>h(NotificationEnvironment,Object.assign({ref:u=>{const d=s.key;u===null?delete this.notificationRefs[d]:this.notificationRefs[d]=u}},omit(s,["destroy","hide","deactivate"]),{internalKey:s.key,onInternalAfterLeave:this.handleAfterLeave,keepAliveOnHover:s.keepAliveOnHover===void 0?this.keepAliveOnHover:s.keepAliveOnHover})))})):null)}});function useNotification(){const e=inject(notificationApiInjectionKey,null);return e===null&&throwError("use-notification","No outer `n-notification-provider` found."),e}function isTouchEvent(e){return window.TouchEvent&&e instanceof window.TouchEvent}function useRefs(){const e=ref(new Map),n=r=>o=>{e.value.set(r,o)};return onBeforeUpdate(()=>e.value.clear()),[e,n]}const style=c$1([cB("slider",`
 display: block;
 padding: calc((var(--n-handle-size) - var(--n-rail-height)) / 2) 0;
 position: relative;
 z-index: 0;
 width: 100%;
 cursor: pointer;
 user-select: none;
 -webkit-user-select: none;
 `,[cM("reverse",[cB("slider-handles",[cB("slider-handle-wrapper",`
 transform: translate(50%, -50%);
 `)]),cB("slider-dots",[cB("slider-dot",`
 transform: translateX(50%, -50%);
 `)]),cM("vertical",[cB("slider-handles",[cB("slider-handle-wrapper",`
 transform: translate(-50%, -50%);
 `)]),cB("slider-marks",[cB("slider-mark",`
 transform: translateY(calc(-50% + var(--n-dot-height) / 2));
 `)]),cB("slider-dots",[cB("slider-dot",`
 transform: translateX(-50%) translateY(0);
 `)])])]),cM("vertical",`
 padding: 0 calc((var(--n-handle-size) - var(--n-rail-height)) / 2);
 width: var(--n-rail-width-vertical);
 height: 100%;
 `,[cB("slider-handles",`
 top: calc(var(--n-handle-size) / 2);
 right: 0;
 bottom: calc(var(--n-handle-size) / 2);
 left: 0;
 `,[cB("slider-handle-wrapper",`
 top: unset;
 left: 50%;
 transform: translate(-50%, 50%);
 `)]),cB("slider-rail",`
 height: 100%;
 `,[cE("fill",`
 top: unset;
 right: 0;
 bottom: unset;
 left: 0;
 `)]),cM("with-mark",`
 width: var(--n-rail-width-vertical);
 margin: 0 32px 0 8px;
 `),cB("slider-marks",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 22px;
 font-size: var(--n-mark-font-size);
 `,[cB("slider-mark",`
 transform: translateY(50%);
 white-space: nowrap;
 `)]),cB("slider-dots",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 50%;
 `,[cB("slider-dot",`
 transform: translateX(-50%) translateY(50%);
 `)])]),cM("disabled",`
 cursor: not-allowed;
 opacity: var(--n-opacity-disabled);
 `,[cB("slider-handle",`
 cursor: not-allowed;
 `)]),cM("with-mark",`
 width: 100%;
 margin: 8px 0 32px 0;
 `),c$1("&:hover",[cB("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[cE("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),cB("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),cM("active",[cB("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[cE("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),cB("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),cB("slider-marks",`
 position: absolute;
 top: 18px;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[cB("slider-mark",`
 position: absolute;
 transform: translateX(-50%);
 white-space: nowrap;
 `)]),cB("slider-rail",`
 width: 100%;
 position: relative;
 height: var(--n-rail-height);
 background-color: var(--n-rail-color);
 transition: background-color .3s var(--n-bezier);
 border-radius: calc(var(--n-rail-height) / 2);
 `,[cE("fill",`
 position: absolute;
 top: 0;
 bottom: 0;
 border-radius: calc(var(--n-rail-height) / 2);
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-fill-color);
 `)]),cB("slider-handles",`
 position: absolute;
 top: 0;
 right: calc(var(--n-handle-size) / 2);
 bottom: 0;
 left: calc(var(--n-handle-size) / 2);
 `,[cB("slider-handle-wrapper",`
 outline: none;
 position: absolute;
 top: 50%;
 transform: translate(-50%, -50%);
 cursor: pointer;
 display: flex;
 `,[cB("slider-handle",`
 height: var(--n-handle-size);
 width: var(--n-handle-size);
 border-radius: 50%;
 overflow: hidden;
 transition: box-shadow .2s var(--n-bezier), background-color .3s var(--n-bezier);
 background-color: var(--n-handle-color);
 box-shadow: var(--n-handle-box-shadow);
 `,[c$1("&:hover",`
 box-shadow: var(--n-handle-box-shadow-hover);
 `)]),c$1("&:focus",[cB("slider-handle",`
 box-shadow: var(--n-handle-box-shadow-focus);
 `,[c$1("&:hover",`
 box-shadow: var(--n-handle-box-shadow-active);
 `)])])])]),cB("slider-dots",`
 position: absolute;
 top: 50%;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[cM("transition-disabled",[cB("slider-dot","transition: none;")]),cB("slider-dot",`
 transition:
 border-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 position: absolute;
 transform: translate(-50%, -50%);
 height: var(--n-dot-height);
 width: var(--n-dot-width);
 border-radius: var(--n-dot-border-radius);
 overflow: hidden;
 box-sizing: border-box;
 border: var(--n-dot-border);
 background-color: var(--n-dot-color);
 `,[cM("active","border: var(--n-dot-border-active);")])])]),cB("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[fadeInScaleUpTransition()]),cB("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[cM("top",`
 margin-bottom: 12px;
 `),cM("right",`
 margin-left: 12px;
 `),cM("bottom",`
 margin-top: 12px;
 `),cM("left",`
 margin-right: 12px;
 `),fadeInScaleUpTransition()]),insideModal(cB("slider",[cB("slider-dot","background-color: var(--n-dot-color-modal);")])),insidePopover(cB("slider",[cB("slider-dot","background-color: var(--n-dot-color-popover);")]))]),eventButtonLeft=0,sliderProps=Object.assign(Object.assign({},useTheme.props),{to:useAdjustedTo.propTo,defaultValue:{type:[Number,Array],default:0},marks:Object,disabled:{type:Boolean,default:void 0},formatTooltip:Function,keyboard:{type:Boolean,default:!0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:[Number,String],default:1},range:Boolean,value:[Number,Array],placement:String,showTooltip:{type:Boolean,default:void 0},tooltip:{type:Boolean,default:!0},vertical:Boolean,reverse:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),NSlider=defineComponent({name:"Slider",props:sliderProps,setup(e){const{mergedClsPrefixRef:n,namespaceRef:r,inlineThemeDisabled:o}=useConfig(e),s=useTheme("Slider","-slider",style,sliderLight$1,e,n),u=ref(null),[d,f]=useRefs(),[v,m]=useRefs(),_=ref(new Set),g=useFormItem(e),{mergedDisabledRef:y}=g,w=computed(()=>{const{step:Re}=e;if(Re<=0||Re==="mark")return 0;const He=Re.toString();let Ze=0;return He.includes(".")&&(Ze=He.length-He.indexOf(".")-1),Ze}),x=ref(e.defaultValue),k=toRef(e,"value"),S=useMergedState(k,x),E=computed(()=>{const{value:Re}=S;return(e.range?Re:[Re]).map(le)}),T=computed(()=>E.value.length>2),M=computed(()=>e.placement===void 0?e.vertical?"right":"top":e.placement),I=computed(()=>{const{marks:Re}=e;return Re?Object.keys(Re).map(parseFloat):null}),F=ref(-1),O=ref(-1),N=ref(-1),D=ref(!1),X=ref(!1),U=computed(()=>{const{vertical:Re,reverse:He}=e;return Re?He?"top":"bottom":He?"right":"left"}),Z=computed(()=>{if(T.value)return;const Re=E.value,He=Ce(e.range?Math.min(...Re):e.min),Ze=Ce(e.range?Math.max(...Re):Re[0]),{value:Xe}=U;return e.vertical?{[Xe]:`${He}%`,height:`${Ze-He}%`}:{[Xe]:`${He}%`,width:`${Ze-He}%`}}),j=computed(()=>{const Re=[],{marks:He}=e;if(He){const Ze=E.value.slice();Ze.sort((mt,pt)=>mt-pt);const{value:Xe}=U,{value:at}=T,{range:ut}=e,ct=at?()=>!1:mt=>ut?mt>=Ze[0]&&mt<=Ze[Ze.length-1]:mt<=Ze[0];for(const mt of Object.keys(He)){const pt=Number(mt);Re.push({active:ct(pt),label:He[mt],style:{[Xe]:`${Ce(pt)}%`}})}}return Re});function Q(Re,He){const Ze=Ce(Re),{value:Xe}=U;return{[Xe]:`${Ze}%`,zIndex:He===F.value?1:0}}function ve(Re){return e.showTooltip||N.value===Re||F.value===Re&&D.value}function Se(Re){return D.value?!(F.value===Re&&O.value===Re):!0}function we(Re){var He;~Re&&(F.value=Re,(He=d.value.get(Re))===null||He===void 0||He.focus())}function oe(){v.value.forEach((Re,He)=>{ve(He)&&Re.syncPosition()})}function ne(Re){const{"onUpdate:value":He,onUpdateValue:Ze}=e,{nTriggerFormInput:Xe,nTriggerFormChange:at}=g;Ze&&call(Ze,Re),He&&call(He,Re),x.value=Re,Xe(),at()}function q(Re){const{range:He}=e;if(He){if(Array.isArray(Re)){const{value:Ze}=E;Re.join()!==Ze.join()&&ne(Re)}}else Array.isArray(Re)||E.value[0]!==Re&&ne(Re)}function H(Re,He){if(e.range){const Ze=E.value.slice();Ze.splice(He,1,Re),q(Ze)}else q(Re)}function Y(Re,He,Ze){const Xe=Ze!==void 0;Ze||(Ze=Re-He>0?1:-1);const at=I.value||[],{step:ut}=e;if(ut==="mark"){const pt=Ee(Re,at.concat(He),Xe?Ze:void 0);return pt?pt.value:He}if(ut<=0)return He;const{value:ct}=w;let mt;if(Xe){const pt=Number((He/ut).toFixed(ct)),kt=Math.floor(pt),Ct=pt>kt?kt:kt-1,ht=pt<kt?kt:kt+1;mt=Ee(He,[Number((Ct*ut).toFixed(ct)),Number((ht*ut).toFixed(ct)),...at],Ze)}else{const pt=ke(Re);mt=Ee(Re,[...at,pt])}return mt?le(mt.value):He}function le(Re){return Math.min(e.max,Math.max(e.min,Re))}function Ce(Re){const{max:He,min:Ze}=e;return(Re-Ze)/(He-Ze)*100}function Te(Re){const{max:He,min:Ze}=e;return Ze+(He-Ze)*Re}function ke(Re){const{step:He,min:Ze}=e;if(He<=0||He==="mark")return Re;const Xe=Math.round((Re-Ze)/He)*He+Ze;return Number(Xe.toFixed(w.value))}function Ee(Re,He=I.value,Ze){if(!(He!=null&&He.length))return null;let Xe=null,at=-1;for(;++at<He.length;){const ut=He[at]-Re,ct=Math.abs(ut);(Ze===void 0||ut*Ze>0)&&(Xe===null||ct<Xe.distance)&&(Xe={index:at,distance:ct,value:He[at]})}return Xe}function Pe(Re){const He=u.value;if(!He)return;const Ze=isTouchEvent(Re)?Re.touches[0]:Re,Xe=He.getBoundingClientRect();let at;return e.vertical?at=(Xe.bottom-Ze.clientY)/Xe.height:at=(Ze.clientX-Xe.left)/Xe.width,e.reverse&&(at=1-at),Te(at)}function Be(Re){if(y.value||!e.keyboard)return;const{vertical:He,reverse:Ze}=e;switch(Re.key){case"ArrowUp":Re.preventDefault(),$e(He&&Ze?-1:1);break;case"ArrowRight":Re.preventDefault(),$e(!He&&Ze?-1:1);break;case"ArrowDown":Re.preventDefault(),$e(He&&Ze?1:-1);break;case"ArrowLeft":Re.preventDefault(),$e(!He&&Ze?1:-1);break}}function $e(Re){const He=F.value;if(He===-1)return;const{step:Ze}=e,Xe=E.value[He],at=Ze<=0||Ze==="mark"?Xe:Xe+Ze*Re;H(Y(at,Xe,Re>0?1:-1),He)}function Oe(Re){var He,Ze;if(y.value||!isTouchEvent(Re)&&Re.button!==eventButtonLeft)return;const Xe=Pe(Re);if(Xe===void 0)return;const at=E.value.slice(),ut=e.range?(Ze=(He=Ee(Xe,at))===null||He===void 0?void 0:He.index)!==null&&Ze!==void 0?Ze:-1:0;ut!==-1&&(Re.preventDefault(),we(ut),Ne(),H(Y(Xe,E.value[ut]),ut))}function Ne(){D.value||(D.value=!0,on$1("touchend",document,re),on$1("mouseup",document,re),on$1("touchmove",document,fe),on$1("mousemove",document,fe))}function J(){D.value&&(D.value=!1,off$1("touchend",document,re),off$1("mouseup",document,re),off$1("touchmove",document,fe),off$1("mousemove",document,fe))}function fe(Re){const{value:He}=F;if(!D.value||He===-1){J();return}const Ze=Pe(Re);H(Y(Ze,E.value[He]),He)}function re(){J()}function _e(Re){F.value=Re,y.value||(N.value=Re)}function be(Re){F.value===Re&&(F.value=-1,J()),N.value===Re&&(N.value=-1)}function Ae(Re){N.value=Re}function Le(Re){N.value===Re&&(N.value=-1)}watch(F,(Re,He)=>void nextTick(()=>O.value=He)),watch(S,()=>{if(e.marks){if(X.value)return;X.value=!0,nextTick(()=>{X.value=!1})}nextTick(oe)}),onBeforeUnmount(()=>{J()});const Ve=computed(()=>{const{self:{markFontSize:Re,railColor:He,railColorHover:Ze,fillColor:Xe,fillColorHover:at,handleColor:ut,opacityDisabled:ct,dotColor:mt,dotColorModal:pt,handleBoxShadow:kt,handleBoxShadowHover:Ct,handleBoxShadowActive:ht,handleBoxShadowFocus:Pt,dotBorder:Ue,dotBoxShadow:qe,railHeight:Ye,railWidthVertical:st,handleSize:ot,dotHeight:Qe,dotWidth:tt,dotBorderRadius:nt,fontSize:it,dotBorderActive:lt,dotColorPopover:Et},common:{cubicBezierEaseInOut:St}}=s.value;return{"--n-bezier":St,"--n-dot-border":Ue,"--n-dot-border-active":lt,"--n-dot-border-radius":nt,"--n-dot-box-shadow":qe,"--n-dot-color":mt,"--n-dot-color-modal":pt,"--n-dot-color-popover":Et,"--n-dot-height":Qe,"--n-dot-width":tt,"--n-fill-color":Xe,"--n-fill-color-hover":at,"--n-font-size":it,"--n-handle-box-shadow":kt,"--n-handle-box-shadow-active":ht,"--n-handle-box-shadow-focus":Pt,"--n-handle-box-shadow-hover":Ct,"--n-handle-color":ut,"--n-handle-size":ot,"--n-opacity-disabled":ct,"--n-rail-color":He,"--n-rail-color-hover":Ze,"--n-rail-height":Ye,"--n-rail-width-vertical":st,"--n-mark-font-size":Re}}),Fe=o?useThemeClass("slider",void 0,Ve,e):void 0,De=computed(()=>{const{self:{fontSize:Re,indicatorColor:He,indicatorBoxShadow:Ze,indicatorTextColor:Xe,indicatorBorderRadius:at}}=s.value;return{"--n-font-size":Re,"--n-indicator-border-radius":at,"--n-indicator-box-shadow":Ze,"--n-indicator-color":He,"--n-indicator-text-color":Xe}}),We=o?useThemeClass("slider-indicator",void 0,De,e):void 0;return{mergedClsPrefix:n,namespace:r,uncontrolledValue:x,mergedValue:S,mergedDisabled:y,mergedPlacement:M,isMounted:isMounted(),adjustedTo:useAdjustedTo(e),dotTransitionDisabled:X,markInfos:j,isShowTooltip:ve,shouldKeepTooltipTransition:Se,handleRailRef:u,setHandleRefs:f,setFollowerRefs:m,fillStyle:Z,getHandleStyle:Q,activeIndex:F,arrifiedValues:E,followerEnabledIndexSet:_,handleRailMouseDown:Oe,handleHandleFocus:_e,handleHandleBlur:be,handleHandleMouseEnter:Ae,handleHandleMouseLeave:Le,handleRailKeyDown:Be,indicatorCssVars:o?void 0:De,indicatorThemeClass:We==null?void 0:We.themeClass,indicatorOnRender:We==null?void 0:We.onRender,cssVars:o?void 0:Ve,themeClass:Fe==null?void 0:Fe.themeClass,onRender:Fe==null?void 0:Fe.onRender}},render(){var e;const{mergedClsPrefix:n,themeClass:r,formatTooltip:o}=this;return(e=this.onRender)===null||e===void 0||e.call(this),h("div",{class:[`${n}-slider`,r,{[`${n}-slider--disabled`]:this.mergedDisabled,[`${n}-slider--active`]:this.activeIndex!==-1,[`${n}-slider--with-mark`]:this.marks,[`${n}-slider--vertical`]:this.vertical,[`${n}-slider--reverse`]:this.reverse}],style:this.cssVars,onKeydown:this.handleRailKeyDown,onMousedown:this.handleRailMouseDown,onTouchstart:this.handleRailMouseDown},h("div",{class:`${n}-slider-rail`},h("div",{class:`${n}-slider-rail__fill`,style:this.fillStyle}),this.marks?h("div",{class:[`${n}-slider-dots`,this.dotTransitionDisabled&&`${n}-slider-dots--transition-disabled`]},this.markInfos.map(s=>h("div",{key:s.label,class:[`${n}-slider-dot`,{[`${n}-slider-dot--active`]:s.active}],style:s.style}))):null,h("div",{ref:"handleRailRef",class:`${n}-slider-handles`},this.arrifiedValues.map((s,u)=>{const d=this.isShowTooltip(u);return h(VBinder,null,{default:()=>[h(VTarget,null,{default:()=>h("div",{ref:this.setHandleRefs(u),class:`${n}-slider-handle-wrapper`,tabindex:this.mergedDisabled?-1:0,style:this.getHandleStyle(s,u),onFocus:()=>this.handleHandleFocus(u),onBlur:()=>this.handleHandleBlur(u),onMouseenter:()=>this.handleHandleMouseEnter(u),onMouseleave:()=>this.handleHandleMouseLeave(u)},resolveSlot(this.$slots.thumb,()=>[h("div",{class:`${n}-slider-handle`})]))}),this.tooltip&&h(VFollower,{ref:this.setFollowerRefs(u),show:d,to:this.adjustedTo,enabled:this.showTooltip&&!this.range||this.followerEnabledIndexSet.has(u),teleportDisabled:this.adjustedTo===useAdjustedTo.tdkey,placement:this.mergedPlacement,containerClass:this.namespace},{default:()=>h(Transition,{name:"fade-in-scale-up-transition",appear:this.isMounted,css:this.shouldKeepTooltipTransition(u),onEnter:()=>{this.followerEnabledIndexSet.add(u)},onAfterLeave:()=>{this.followerEnabledIndexSet.delete(u)}},{default:()=>{var f;return d?((f=this.indicatorOnRender)===null||f===void 0||f.call(this),h("div",{class:[`${n}-slider-handle-indicator`,this.indicatorThemeClass,`${n}-slider-handle-indicator--${this.mergedPlacement}`],style:this.indicatorCssVars},typeof o=="function"?o(s):s)):null}})})]})})),this.marks?h("div",{class:`${n}-slider-marks`},this.markInfos.map(s=>h("div",{key:s.label,class:`${n}-slider-mark`,style:s.style},s.label))):null))}}),NInjectionExtractor=defineComponent({name:"InjectionExtractor",props:{onSetup:Function},setup(e,{slots:n}){var r;return(r=e.onSetup)===null||r===void 0||r.call(e),()=>{var o;return(o=n.default)===null||o===void 0?void 0:o.call(n)}}}),injectionFactoryMap={message:useMessage,notification:useNotification,loadingBar:useLoadingBar,dialog:useDialog};function createDiscreteApp({providersAndProps:e,configProviderProps:n}){let o=createApp(()=>h(NConfigProvider,unref(n),{default:()=>e.map(({type:f,Provider:v,props:m})=>h(v,unref(m),{default:()=>h(NInjectionExtractor,{onSetup:()=>s[f]=injectionFactoryMap[f]()})}))}));const s={app:o};let u;return isBrowser$2&&(u=document.createElement("div"),document.body.appendChild(u),o.mount(u)),Object.assign({unmount:()=>{var f;if(o===null||u===null){warn$2("discrete","unmount call no need because discrete app has been unmounted");return}o.unmount(),(f=u.parentNode)===null||f===void 0||f.removeChild(u),u=null,o=null}},s)}function createDiscreteApi(e,{configProviderProps:n,messageProviderProps:r,dialogProviderProps:o,notificationProviderProps:s,loadingBarProviderProps:u}={}){const d=[];return e.forEach(v=>{switch(v){case"message":d.push({type:v,Provider:NMessageProvider,props:r});break;case"notification":d.push({type:v,Provider:NNotificationProvider,props:s});break;case"dialog":d.push({type:v,Provider:NDialogProvider,props:o});break;case"loadingBar":d.push({type:v,Provider:NLoadingBarProvider,props:u});break}}),createDiscreteApp({providersAndProps:d,configProviderProps:n})}const _export_sfc=(e,n)=>{const r=e.__vccOpts||e;for(const[o,s]of n)r[o]=s;return r},{message}=createDiscreteApi(["message"]);window.$message=message;const _sfc_main$2G=defineComponent({});function _sfc_render$1x(e,n,r,o,s,u){return openBlock(),createElementBlock("div")}const __unplugin_components_15$1=_export_sfc(_sfc_main$2G,[["render",_sfc_render$1x]]),_sfc_main$2F={},_hoisted_1$2j={width:"8",height:"16",viewBox:"0 0 8 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$29=createBaseVNode("g",{id:".base / Sliders"},[createBaseVNode("rect",{id:"Rectangle",width:"8",height:"16",rx:"4",fill:"#1460F3"})],-1),_hoisted_3$1_=[_hoisted_2$29];function _sfc_render$1w(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2j,_hoisted_3$1_)}const __unplugin_components_1$8=_export_sfc(_sfc_main$2F,[["render",_sfc_render$1w]]);var isVue2=!1;/*!
  * pinia v2.0.36
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let activePinia;const setActivePinia=e=>activePinia=e,piniaSymbol=Symbol();function isPlainObject$1(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var MutationType;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const e=effectScope(!0),n=e.run(()=>ref({}));let r=[],o=[];const s=markRaw({install(u){setActivePinia(s),s._a=u,u.provide(piniaSymbol,s),u.config.globalProperties.$pinia=s,o.forEach(d=>r.push(d)),o=[]},use(u){return!this._a&&!isVue2?o.push(u):r.push(u),this},_p:r,_a:null,_e:e,_s:new Map,state:n});return s}const noop=()=>{};function addSubscription(e,n,r,o=noop){e.push(n);const s=()=>{const u=e.indexOf(n);u>-1&&(e.splice(u,1),o())};return!r&&getCurrentScope()&&onScopeDispose(s),s}function triggerSubscriptions(e,...n){e.slice().forEach(r=>{r(...n)})}function mergeReactiveObjects(e,n){e instanceof Map&&n instanceof Map&&n.forEach((r,o)=>e.set(o,r)),e instanceof Set&&n instanceof Set&&n.forEach(e.add,e);for(const r in n){if(!n.hasOwnProperty(r))continue;const o=n[r],s=e[r];isPlainObject$1(s)&&isPlainObject$1(o)&&e.hasOwnProperty(r)&&!isRef(o)&&!isReactive(o)?e[r]=mergeReactiveObjects(s,o):e[r]=o}return e}const skipHydrateSymbol=Symbol();function shouldHydrate(e){return!isPlainObject$1(e)||!e.hasOwnProperty(skipHydrateSymbol)}const{assign}=Object;function isComputed(e){return!!(isRef(e)&&e.effect)}function createOptionsStore(e,n,r,o){const{state:s,actions:u,getters:d}=n,f=r.state.value[e];let v;function m(){f||(r.state.value[e]=s?s():{});const _=toRefs(r.state.value[e]);return assign(_,u,Object.keys(d||{}).reduce((g,y)=>(g[y]=markRaw(computed(()=>{setActivePinia(r);const w=r._s.get(e);return d[y].call(w,w)})),g),{}))}return v=createSetupStore(e,m,n,r,o,!0),v}function createSetupStore(e,n,r={},o,s,u){let d;const f=assign({actions:{}},r),v={deep:!0};let m,_,g=markRaw([]),y=markRaw([]),w;const x=o.state.value[e];!u&&!x&&(o.state.value[e]={}),ref({});let k;function S(N){let D;m=_=!1,typeof N=="function"?(N(o.state.value[e]),D={type:MutationType.patchFunction,storeId:e,events:w}):(mergeReactiveObjects(o.state.value[e],N),D={type:MutationType.patchObject,payload:N,storeId:e,events:w});const X=k=Symbol();nextTick().then(()=>{k===X&&(m=!0)}),_=!0,triggerSubscriptions(g,D,o.state.value[e])}const E=u?function(){const{state:D}=r,X=D?D():{};this.$patch(U=>{assign(U,X)})}:noop;function T(){d.stop(),g=[],y=[],o._s.delete(e)}function M(N,D){return function(){setActivePinia(o);const X=Array.from(arguments),U=[],Z=[];function j(Se){U.push(Se)}function Q(Se){Z.push(Se)}triggerSubscriptions(y,{args:X,name:N,store:F,after:j,onError:Q});let ve;try{ve=D.apply(this&&this.$id===e?this:F,X)}catch(Se){throw triggerSubscriptions(Z,Se),Se}return ve instanceof Promise?ve.then(Se=>(triggerSubscriptions(U,Se),Se)).catch(Se=>(triggerSubscriptions(Z,Se),Promise.reject(Se))):(triggerSubscriptions(U,ve),ve)}}const I={_p:o,$id:e,$onAction:addSubscription.bind(null,y),$patch:S,$reset:E,$subscribe(N,D={}){const X=addSubscription(g,N,D.detached,()=>U()),U=d.run(()=>watch(()=>o.state.value[e],Z=>{(D.flush==="sync"?_:m)&&N({storeId:e,type:MutationType.direct,events:w},Z)},assign({},v,D)));return X},$dispose:T},F=reactive(I);o._s.set(e,F);const O=o._e.run(()=>(d=effectScope(),d.run(()=>n())));for(const N in O){const D=O[N];if(isRef(D)&&!isComputed(D)||isReactive(D))u||(x&&shouldHydrate(D)&&(isRef(D)?D.value=x[N]:mergeReactiveObjects(D,x[N])),o.state.value[e][N]=D);else if(typeof D=="function"){const X=M(N,D);O[N]=X,f.actions[N]=D}}return assign(F,O),assign(toRaw(F),O),Object.defineProperty(F,"$state",{get:()=>o.state.value[e],set:N=>{S(D=>{assign(D,N)})}}),o._p.forEach(N=>{assign(F,d.run(()=>N({store:F,app:o._a,pinia:o,options:f})))}),x&&u&&r.hydrate&&r.hydrate(F.$state,x),m=!0,_=!0,F}function defineStore(e,n,r){let o,s;const u=typeof n=="function";typeof e=="string"?(o=e,s=u?r:n):(s=e,o=e.id);function d(f,v){const m=getCurrentInstance();return f=f||m&&inject(piniaSymbol,null),f&&setActivePinia(f),f=activePinia,f._s.has(o)||(u?createSetupStore(o,n,s,f):createOptionsStore(o,s,f)),f._s.get(o)}return d.$id=o,d}function _iterableToArrayLimit(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var o,s,u,d,f=[],v=!0,m=!1;try{if(u=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;v=!1}else for(;!(v=(o=u.call(r)).done)&&(f.push(o.value),f.length!==n);v=!0);}catch(_){m=!0,s=_}finally{try{if(!v&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(m)throw s}}return f}}function ownKeys$1(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,o)}return r}function _objectSpread2$1(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$1(Object(r),!0).forEach(function(o){_defineProperty$1(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function _regeneratorRuntime(){_regeneratorRuntime=function(){return e};var e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(j,Q,ve){j[Q]=ve.value},s=typeof Symbol=="function"?Symbol:{},u=s.iterator||"@@iterator",d=s.asyncIterator||"@@asyncIterator",f=s.toStringTag||"@@toStringTag";function v(j,Q,ve){return Object.defineProperty(j,Q,{value:ve,enumerable:!0,configurable:!0,writable:!0}),j[Q]}try{v({},"")}catch{v=function(Q,ve,Se){return Q[ve]=Se}}function m(j,Q,ve,Se){var we=Q&&Q.prototype instanceof y?Q:y,oe=Object.create(we.prototype),ne=new X(Se||[]);return o(oe,"_invoke",{value:F(j,ve,ne)}),oe}function _(j,Q,ve){try{return{type:"normal",arg:j.call(Q,ve)}}catch(Se){return{type:"throw",arg:Se}}}e.wrap=m;var g={};function y(){}function w(){}function x(){}var k={};v(k,u,function(){return this});var S=Object.getPrototypeOf,E=S&&S(S(U([])));E&&E!==n&&r.call(E,u)&&(k=E);var T=x.prototype=y.prototype=Object.create(k);function M(j){["next","throw","return"].forEach(function(Q){v(j,Q,function(ve){return this._invoke(Q,ve)})})}function I(j,Q){function ve(we,oe,ne,q){var H=_(j[we],j,oe);if(H.type!=="throw"){var Y=H.arg,le=Y.value;return le&&typeof le=="object"&&r.call(le,"__await")?Q.resolve(le.__await).then(function(Ce){ve("next",Ce,ne,q)},function(Ce){ve("throw",Ce,ne,q)}):Q.resolve(le).then(function(Ce){Y.value=Ce,ne(Y)},function(Ce){return ve("throw",Ce,ne,q)})}q(H.arg)}var Se;o(this,"_invoke",{value:function(we,oe){function ne(){return new Q(function(q,H){ve(we,oe,q,H)})}return Se=Se?Se.then(ne,ne):ne()}})}function F(j,Q,ve){var Se="suspendedStart";return function(we,oe){if(Se==="executing")throw new Error("Generator is already running");if(Se==="completed"){if(we==="throw")throw oe;return Z()}for(ve.method=we,ve.arg=oe;;){var ne=ve.delegate;if(ne){var q=O(ne,ve);if(q){if(q===g)continue;return q}}if(ve.method==="next")ve.sent=ve._sent=ve.arg;else if(ve.method==="throw"){if(Se==="suspendedStart")throw Se="completed",ve.arg;ve.dispatchException(ve.arg)}else ve.method==="return"&&ve.abrupt("return",ve.arg);Se="executing";var H=_(j,Q,ve);if(H.type==="normal"){if(Se=ve.done?"completed":"suspendedYield",H.arg===g)continue;return{value:H.arg,done:ve.done}}H.type==="throw"&&(Se="completed",ve.method="throw",ve.arg=H.arg)}}}function O(j,Q){var ve=Q.method,Se=j.iterator[ve];if(Se===void 0)return Q.delegate=null,ve==="throw"&&j.iterator.return&&(Q.method="return",Q.arg=void 0,O(j,Q),Q.method==="throw")||ve!=="return"&&(Q.method="throw",Q.arg=new TypeError("The iterator does not provide a '"+ve+"' method")),g;var we=_(Se,j.iterator,Q.arg);if(we.type==="throw")return Q.method="throw",Q.arg=we.arg,Q.delegate=null,g;var oe=we.arg;return oe?oe.done?(Q[j.resultName]=oe.value,Q.next=j.nextLoc,Q.method!=="return"&&(Q.method="next",Q.arg=void 0),Q.delegate=null,g):oe:(Q.method="throw",Q.arg=new TypeError("iterator result is not an object"),Q.delegate=null,g)}function N(j){var Q={tryLoc:j[0]};1 in j&&(Q.catchLoc=j[1]),2 in j&&(Q.finallyLoc=j[2],Q.afterLoc=j[3]),this.tryEntries.push(Q)}function D(j){var Q=j.completion||{};Q.type="normal",delete Q.arg,j.completion=Q}function X(j){this.tryEntries=[{tryLoc:"root"}],j.forEach(N,this),this.reset(!0)}function U(j){if(j){var Q=j[u];if(Q)return Q.call(j);if(typeof j.next=="function")return j;if(!isNaN(j.length)){var ve=-1,Se=function we(){for(;++ve<j.length;)if(r.call(j,ve))return we.value=j[ve],we.done=!1,we;return we.value=void 0,we.done=!0,we};return Se.next=Se}}return{next:Z}}function Z(){return{value:void 0,done:!0}}return w.prototype=x,o(T,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=v(x,f,"GeneratorFunction"),e.isGeneratorFunction=function(j){var Q=typeof j=="function"&&j.constructor;return!!Q&&(Q===w||(Q.displayName||Q.name)==="GeneratorFunction")},e.mark=function(j){return Object.setPrototypeOf?Object.setPrototypeOf(j,x):(j.__proto__=x,v(j,f,"GeneratorFunction")),j.prototype=Object.create(T),j},e.awrap=function(j){return{__await:j}},M(I.prototype),v(I.prototype,d,function(){return this}),e.AsyncIterator=I,e.async=function(j,Q,ve,Se,we){we===void 0&&(we=Promise);var oe=new I(m(j,Q,ve,Se),we);return e.isGeneratorFunction(Q)?oe:oe.next().then(function(ne){return ne.done?ne.value:oe.next()})},M(T),v(T,f,"Generator"),v(T,u,function(){return this}),v(T,"toString",function(){return"[object Generator]"}),e.keys=function(j){var Q=Object(j),ve=[];for(var Se in Q)ve.push(Se);return ve.reverse(),function we(){for(;ve.length;){var oe=ve.pop();if(oe in Q)return we.value=oe,we.done=!1,we}return we.done=!0,we}},e.values=U,X.prototype={constructor:X,reset:function(j){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(D),!j)for(var Q in this)Q.charAt(0)==="t"&&r.call(this,Q)&&!isNaN(+Q.slice(1))&&(this[Q]=void 0)},stop:function(){this.done=!0;var j=this.tryEntries[0].completion;if(j.type==="throw")throw j.arg;return this.rval},dispatchException:function(j){if(this.done)throw j;var Q=this;function ve(H,Y){return oe.type="throw",oe.arg=j,Q.next=H,Y&&(Q.method="next",Q.arg=void 0),!!Y}for(var Se=this.tryEntries.length-1;Se>=0;--Se){var we=this.tryEntries[Se],oe=we.completion;if(we.tryLoc==="root")return ve("end");if(we.tryLoc<=this.prev){var ne=r.call(we,"catchLoc"),q=r.call(we,"finallyLoc");if(ne&&q){if(this.prev<we.catchLoc)return ve(we.catchLoc,!0);if(this.prev<we.finallyLoc)return ve(we.finallyLoc)}else if(ne){if(this.prev<we.catchLoc)return ve(we.catchLoc,!0)}else{if(!q)throw new Error("try statement without catch or finally");if(this.prev<we.finallyLoc)return ve(we.finallyLoc)}}}},abrupt:function(j,Q){for(var ve=this.tryEntries.length-1;ve>=0;--ve){var Se=this.tryEntries[ve];if(Se.tryLoc<=this.prev&&r.call(Se,"finallyLoc")&&this.prev<Se.finallyLoc){var we=Se;break}}we&&(j==="break"||j==="continue")&&we.tryLoc<=Q&&Q<=we.finallyLoc&&(we=null);var oe=we?we.completion:{};return oe.type=j,oe.arg=Q,we?(this.method="next",this.next=we.finallyLoc,g):this.complete(oe)},complete:function(j,Q){if(j.type==="throw")throw j.arg;return j.type==="break"||j.type==="continue"?this.next=j.arg:j.type==="return"?(this.rval=this.arg=j.arg,this.method="return",this.next="end"):j.type==="normal"&&Q&&(this.next=Q),g},finish:function(j){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var ve=this.tryEntries[Q];if(ve.finallyLoc===j)return this.complete(ve.completion,ve.afterLoc),D(ve),g}},catch:function(j){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var ve=this.tryEntries[Q];if(ve.tryLoc===j){var Se=ve.completion;if(Se.type==="throw"){var we=Se.arg;D(ve)}return we}}throw new Error("illegal catch attempt")},delegateYield:function(j,Q,ve){return this.delegate={iterator:U(j),resultName:Q,nextLoc:ve},this.method==="next"&&(this.arg=void 0),g}},e}function _typeof$1(e){return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$1(e)}function asyncGeneratorStep(e,n,r,o,s,u,d){try{var f=e[u](d),v=f.value}catch(m){return void r(m)}f.done?n(v):Promise.resolve(v).then(o,s)}function _asyncToGenerator(e){return function(){var n=this,r=arguments;return new Promise(function(o,s){var u=e.apply(n,r);function d(v){asyncGeneratorStep(u,o,s,d,f,"next",v)}function f(v){asyncGeneratorStep(u,o,s,d,f,"throw",v)}d(void 0)})}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,n,r){return n&&_defineProperties(e.prototype,n),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty$1(e,n,r){return(n=_toPropertyKey(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function _inherits(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&_setPrototypeOf(e,n)}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf(e)}function _setPrototypeOf(e,n){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},_setPrototypeOf(e,n)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _assertThisInitialized(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,n){if(n&&(typeof n=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _createSuper(e){var n=_isNativeReflectConstruct();return function(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _superPropBase(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&(e=_getPrototypeOf(e))!==null;);return e}function _get(){return _get=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,n,r){var o=_superPropBase(e,n);if(o){var s=Object.getOwnPropertyDescriptor(o,n);return s.get?s.get.call(arguments.length<3?e:r):s.value}},_get.apply(this,arguments)}function _slicedToArray(e,n){return _arrayWithHoles(e)||_iterableToArrayLimit(e,n)||_unsupportedIterableToArray$1(e,n)||_nonIterableRest()}function _toConsumableArray$1(e){return _arrayWithoutHoles$1(e)||_iterableToArray$1(e)||_unsupportedIterableToArray$1(e)||_nonIterableSpread$1()}function _arrayWithoutHoles$1(e){if(Array.isArray(e))return _arrayLikeToArray$1(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray$1(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _unsupportedIterableToArray$1(e,n){if(e){if(typeof e=="string")return _arrayLikeToArray$1(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$1(e,n):void 0}}function _arrayLikeToArray$1(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _createForOfIteratorHelper(e,n){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray$1(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,s=function(){};return{s,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(v){throw v},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u,d=!0,f=!1;return{s:function(){r=r.call(e)},n:function(){var v=r.next();return d=v.done,v},e:function(v){f=!0,u=v},f:function(){try{d||r.return==null||r.return()}finally{if(f)throw u}}}}function _toPrimitive(e,n){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,n||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function _toPropertyKey(e){var n=_toPrimitive(e,"string");return typeof n=="symbol"?n:String(n)}function _classPrivateFieldGet(e,n){return _classApplyDescriptorGet(e,_classExtractFieldDescriptor(e,n,"get"))}function _classPrivateFieldSet(e,n,r){return _classApplyDescriptorSet(e,_classExtractFieldDescriptor(e,n,"set"),r),r}function _classExtractFieldDescriptor(e,n,r){if(!n.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return n.get(e)}function _classStaticPrivateFieldSpecGet(e,n,r){return _classCheckPrivateStaticAccess(e,n),_classCheckPrivateStaticFieldDescriptor(r,"get"),_classApplyDescriptorGet(e,r)}function _classStaticPrivateFieldSpecSet(e,n,r,o){return _classCheckPrivateStaticAccess(e,n),_classCheckPrivateStaticFieldDescriptor(r,"set"),_classApplyDescriptorSet(e,r,o),o}function _classStaticPrivateMethodGet(e,n,r){return _classCheckPrivateStaticAccess(e,n),r}function _classApplyDescriptorGet(e,n){return n.get?n.get.call(e):n.value}function _classApplyDescriptorSet(e,n,r){if(n.set)n.set.call(e,r);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=r}}function _classCheckPrivateStaticAccess(e,n){if(e!==n)throw new TypeError("Private static access of wrong provenance")}function _classCheckPrivateStaticFieldDescriptor(e,n){if(e===void 0)throw new TypeError("attempted to "+n+" private static field before its declaration")}function _classPrivateMethodGet(e,n,r){if(!n.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function _checkPrivateRedeclaration(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldInitSpec(e,n,r){_checkPrivateRedeclaration(e,n),n.set(e,r)}function _classPrivateMethodInitSpec(e,n){_checkPrivateRedeclaration(e,n),n.add(e)}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var r=function o(){if(this instanceof o){var s=[null];return s.push.apply(s,arguments),new(Function.bind.apply(n,s))}return n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var s=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,s.get?s:{enumerable:!0,get:function(){return e[o]}})}),r}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdfExports={},pdf={get exports(){return pdfExports},set exports(e){pdfExports=e}},_nodeResolve_empty={},_nodeResolve_empty$1=Object.freeze({__proto__:null,default:_nodeResolve_empty}),require$$0=getAugmentedNamespace(_nodeResolve_empty$1),path2dPolyfill_esm={},hasRequiredPath2dPolyfill_esm;function requirePath2dPolyfill_esm(){if(hasRequiredPath2dPolyfill_esm)return path2dPolyfill_esm;function e(_,g,y){if(y||arguments.length===2)for(var w,x=0,k=g.length;x<k;x++)!w&&x in g||(w||(w=Array.prototype.slice.call(g,0,x)),w[x]=g[x]);return _.concat(w||Array.prototype.slice.call(g))}hasRequiredPath2dPolyfill_esm=1;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/gi,o=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function s(_){var g=[],y=String(_).trim();return y[0]!=="M"&&y[0]!=="m"||y.replace(r,function(w,x,k){var S=function(M){var I=M.match(o);return I?I.map(Number):[]}(k),E=x.toLowerCase(),T=x;if(E==="m"&&S.length>2&&(g.push(e([T],S.splice(0,2),!0)),E="l",T=T==="m"?"l":"L"),S.length<n[E])return"";for(g.push(e([T],S.splice(0,n[E]),!0));S.length>=n[E]&&S.length&&n[E];)g.push(e([T],S.splice(0,n[E]),!0));return""}),g}function u(_,g){var y=_.x*Math.cos(g)-_.y*Math.sin(g),w=_.y*Math.cos(g)+_.x*Math.sin(g);_.x=y,_.y=w}function d(_,g){_.x*=g,_.y*=g}var f=function(){function _(g){var y;this.commands=[],g&&g instanceof _?(y=this.commands).push.apply(y,g.commands):g&&(this.commands=s(g))}return _.prototype.addPath=function(g){var y;g&&g instanceof _&&(y=this.commands).push.apply(y,g.commands)},_.prototype.moveTo=function(g,y){this.commands.push(["M",g,y])},_.prototype.lineTo=function(g,y){this.commands.push(["L",g,y])},_.prototype.arc=function(g,y,w,x,k,S){this.commands.push(["AC",g,y,w,x,k,!!S])},_.prototype.arcTo=function(g,y,w,x,k){this.commands.push(["AT",g,y,w,x,k])},_.prototype.ellipse=function(g,y,w,x,k,S,E,T){this.commands.push(["E",g,y,w,x,k,S,E,!!T])},_.prototype.closePath=function(){this.commands.push(["Z"])},_.prototype.bezierCurveTo=function(g,y,w,x,k,S){this.commands.push(["C",g,y,w,x,k,S])},_.prototype.quadraticCurveTo=function(g,y,w,x){this.commands.push(["Q",g,y,w,x])},_.prototype.rect=function(g,y,w,x){this.commands.push(["R",g,y,w,x])},_.prototype.roundRect=function(g,y,w,x,k){k===void 0?this.commands.push(["RR",g,y,w,x,0]):this.commands.push(["RR",g,y,w,x,k])},_}();function v(_,g){var y,w,x,k,S,E,T,M,I,F,O,N,D,X,U,Z,j,Q,ve,Se,we,oe,ne,q,H=0,Y=0,le=null,Ce=null,Te=null,ke=null,Ee=null,Pe=null;_.beginPath();for(var Be=0;Be<g.length;++Be){(Q=g[Be][0])!=="S"&&Q!=="s"&&Q!=="C"&&Q!=="c"&&(le=null,Ce=null),Q!=="T"&&Q!=="t"&&Q!=="Q"&&Q!=="q"&&(Te=null,ke=null);var $e=void 0;switch(Q){case"m":case"M":$e=g[Be],Q==="m"?(H+=$e[1],Y+=$e[2]):(H=$e[1],Y=$e[2]),Q!=="M"&&Ee||(Ee={x:H,y:Y}),_.moveTo(H,Y);break;case"l":H+=($e=g[Be])[1],Y+=$e[2],_.lineTo(H,Y);break;case"L":H=($e=g[Be])[1],Y=$e[2],_.lineTo(H,Y);break;case"H":H=($e=g[Be])[1],_.lineTo(H,Y);break;case"h":H+=($e=g[Be])[1],_.lineTo(H,Y);break;case"V":Y=($e=g[Be])[1],_.lineTo(H,Y);break;case"v":Y+=($e=g[Be])[1],_.lineTo(H,Y);break;case"a":case"A":if($e=g[Be],Pe===null)throw new Error("This should never happen");Q==="a"?(H+=$e[6],Y+=$e[7]):(H=$e[6],Y=$e[7]),X=$e[1],U=$e[2],T=$e[3]*Math.PI/180,x=!!$e[4],k=!!$e[5],S={x:H,y:Y},u(E={x:(Pe.x-S.x)/2,y:(Pe.y-S.y)/2},-T),(M=E.x*E.x/(X*X)+E.y*E.y/(U*U))>1&&(X*=M=Math.sqrt(M),U*=M),I=X*X*U*U,F=X*X*E.y*E.y+U*U*E.x*E.x,d(ve={x:X*E.y/U,y:-U*E.x/X},k!==x?Math.sqrt((I-F)/F)||0:-Math.sqrt((I-F)/F)||0),w=Math.atan2((E.y-ve.y)/U,(E.x-ve.x)/X),y=Math.atan2(-(E.y+ve.y)/U,-(E.x+ve.x)/X),u(ve,T),oe=ve,ne=(S.x+Pe.x)/2,q=(S.y+Pe.y)/2,oe.x+=ne,oe.y+=q,_.save(),_.translate(ve.x,ve.y),_.rotate(T),_.scale(X,U),_.arc(0,0,1,w,y,!k),_.restore();break;case"C":le=($e=g[Be])[3],Ce=$e[4],H=$e[5],Y=$e[6],_.bezierCurveTo($e[1],$e[2],le,Ce,H,Y);break;case"c":$e=g[Be],_.bezierCurveTo($e[1]+H,$e[2]+Y,$e[3]+H,$e[4]+Y,$e[5]+H,$e[6]+Y),le=$e[3]+H,Ce=$e[4]+Y,H+=$e[5],Y+=$e[6];break;case"S":$e=g[Be],le!==null&&Ce!==null||(le=H,Ce=Y),_.bezierCurveTo(2*H-le,2*Y-Ce,$e[1],$e[2],$e[3],$e[4]),le=$e[1],Ce=$e[2],H=$e[3],Y=$e[4];break;case"s":$e=g[Be],le!==null&&Ce!==null||(le=H,Ce=Y),_.bezierCurveTo(2*H-le,2*Y-Ce,$e[1]+H,$e[2]+Y,$e[3]+H,$e[4]+Y),le=$e[1]+H,Ce=$e[2]+Y,H+=$e[3],Y+=$e[4];break;case"Q":Te=($e=g[Be])[1],ke=$e[2],H=$e[3],Y=$e[4],_.quadraticCurveTo(Te,ke,H,Y);break;case"q":Te=($e=g[Be])[1]+H,ke=$e[2]+Y,H+=$e[3],Y+=$e[4],_.quadraticCurveTo(Te,ke,H,Y);break;case"T":Te!==null&&ke!==null||(Te=H,ke=Y),Te=2*H-Te,ke=2*Y-ke,H=($e=g[Be])[1],Y=$e[2],_.quadraticCurveTo(Te,ke,H,Y);break;case"t":Te!==null&&ke!==null||(Te=H,ke=Y),Te=2*H-Te,ke=2*Y-ke,H+=($e=g[Be])[1],Y+=$e[2],_.quadraticCurveTo(Te,ke,H,Y);break;case"z":case"Z":Ee&&(H=Ee.x,Y=Ee.y),Ee=null,_.closePath();break;case"AC":H=($e=g[Be])[1],Y=$e[2],D=$e[3],w=$e[4],y=$e[5],Se=$e[6],_.arc(H,Y,D,w,y,Se);break;case"AT":O=($e=g[Be])[1],N=$e[2],H=$e[3],Y=$e[4],D=$e[5],_.arcTo(O,N,H,Y,D);break;case"E":H=($e=g[Be])[1],Y=$e[2],X=$e[3],U=$e[4],T=$e[5],w=$e[6],y=$e[7],Se=$e[8],_.save(),_.translate(H,Y),_.rotate(T),_.scale(X,U),_.arc(0,0,1,w,y,Se),_.restore();break;case"R":H=($e=g[Be])[1],Y=$e[2],Z=$e[3],j=$e[4],Ee={x:H,y:Y},_.rect(H,Y,Z,j);break;case"RR":H=($e=g[Be])[1],Y=$e[2],Z=$e[3],j=$e[4],we=$e[5],Ee={x:H,y:Y},_.roundRect(H,Y,Z,j,we)}Pe?(Pe.x=H,Pe.y=Y):Pe={x:H,y:Y}}}function m(_,g,y,w,x){var k=this;if(x===void 0&&(x=0),typeof x=="number"&&(x=[x]),Array.isArray(x)){if(x.length===0||x.length>4)throw new RangeError("Failed to execute 'roundRect' on '".concat(this.constructor.name,"': ").concat(x.length," radii provided. Between one and four radii are necessary."));if(x.forEach(function(F){if(F<0)throw new RangeError("Failed to execute 'roundRect' on '".concat(k.constructor.name,"': Radius value ").concat(F," is negative."))}),x.length===1&&x[0]===0)return this.rect(_,g,y,w);var S,E,T,M=Math.min(y,w)/2,I=S=E=T=Math.min(M,x[0]);x.length===2&&(S=T=Math.min(M,x[1])),x.length===3&&(S=T=Math.min(M,x[1]),E=Math.min(M,x[2])),x.length===4&&(S=Math.min(M,x[1]),E=Math.min(M,x[2]),T=Math.min(M,x[3])),this.moveTo(_,g+w-T),this.arcTo(_,g,_+I,g,I),this.arcTo(_+y,g,_+y,g+S,S),this.arcTo(_+y,g+w,_+y-E,g+w,E),this.arcTo(_,g+w,_,g+w-T,T),this.moveTo(_,g)}}return function(_){if(_&&_.CanvasRenderingContext2D&&!_.Path2D){var g=_.CanvasRenderingContext2D,y=g.prototype.fill,w=g.prototype.stroke,x=g.prototype.isPointInPath;g.prototype.fill=function(){for(var k=[],S=0;S<arguments.length;S++)k[S]=arguments[S];if(!(k[0]instanceof f))return T=k[0]||"nonzero",y.apply(this,[T]);var E=k[0],T=k[1]||"nonzero";v(this,E.commands),y.apply(this,[T])},g.prototype.stroke=function(k){k&&v(this,k.commands),w.apply(this)},g.prototype.isPointInPath=function(){for(var k=[],S=0;S<arguments.length;S++)k[S]=arguments[S];if(k[0]instanceof f){var E=k[0],T=k[1],M=k[2],I=k[3]||"nonzero";return v(this,E.commands),x.apply(this,[T,M,I])}return x.apply(this,k)},_.Path2D=f}}(window),function(_){if(_&&_.CanvasRenderingContext2D){var g=_.CanvasRenderingContext2D,y=_.Path2D;g&&!g.prototype.roundRect&&(g.prototype.roundRect=m),y&&!y.prototype.roundRect&&(y.prototype.roundRect=m)}}(window),path2dPolyfill_esm}var ponyfillExports={},hasRequiredPonyfill;function requirePonyfill(){return hasRequiredPonyfill||(hasRequiredPonyfill=1,function(e){var n=typeof Symbol=="function"&&_typeof$1(Symbol.iterator)==="symbol"?Symbol:function(te){return"Symbol("+te+")"};function r(){}function o(){return typeof self<"u"?self:typeof window<"u"?window:commonjsGlobal!==void 0?commonjsGlobal:void 0}var s=o();function u(te){return _typeof$1(te)==="object"&&te!==null||typeof te=="function"}var d=r,f=Promise,v=Promise.prototype.then,m=Promise.resolve.bind(f),_=Promise.reject.bind(f);function g(te){return new f(te)}function y(te){return m(te)}function w(te){return _(te)}function x(te,Me,je){return v.call(te,Me,je)}function k(te,Me,je){x(x(te,Me,je),void 0,d)}function S(te,Me){k(te,Me)}function E(te,Me){k(te,void 0,Me)}function T(te,Me,je){return x(te,Me,je)}function M(te){x(te,void 0,d)}var I=function(){var te=s&&s.queueMicrotask;if(typeof te=="function")return te;var Me=y(void 0);return function(je){return x(Me,je)}}();function F(te,Me,je){if(typeof te!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(te,Me,je)}function O(te,Me,je){try{return y(F(te,Me,je))}catch(Je){return w(Je)}}var N=16384,D=function(){function te(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(te.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),te.prototype.push=function(Me){var je=this._back,Je=je;je._elements.length===N-1&&(Je={_elements:[],_next:void 0}),je._elements.push(Me),Je!==je&&(this._back=Je,je._next=Je),++this._size},te.prototype.shift=function(){var Me=this._front,je=Me,Je=this._cursor,dt=Je+1,gt=Me._elements,Tt=gt[Je];return dt===N&&(je=Me._next,dt=0),--this._size,this._cursor=dt,Me!==je&&(this._front=je),gt[Je]=void 0,Tt},te.prototype.forEach=function(Me){for(var je=this._cursor,Je=this._front,dt=Je._elements;!(je===dt.length&&Je._next===void 0||je===dt.length&&(je=0,(dt=(Je=Je._next)._elements).length===0));)Me(dt[je]),++je},te.prototype.peek=function(){var Me=this._front,je=this._cursor;return Me._elements[je]},te}();function X(te,Me){te._ownerReadableStream=Me,Me._reader=te,Me._state==="readable"?Q(te):Me._state==="closed"?Se(te):ve(te,Me._storedError)}function U(te,Me){return mr(te._ownerReadableStream,Me)}function Z(te){te._ownerReadableStream._state==="readable"?we(te,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):oe(te,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),te._ownerReadableStream._reader=void 0,te._ownerReadableStream=void 0}function j(te){return new TypeError("Cannot "+te+" a stream using a released reader")}function Q(te){te._closedPromise=g(function(Me,je){te._closedPromise_resolve=Me,te._closedPromise_reject=je})}function ve(te,Me){Q(te),we(te,Me)}function Se(te){Q(te),ne(te)}function we(te,Me){te._closedPromise_reject!==void 0&&(M(te._closedPromise),te._closedPromise_reject(Me),te._closedPromise_resolve=void 0,te._closedPromise_reject=void 0)}function oe(te,Me){ve(te,Me)}function ne(te){te._closedPromise_resolve!==void 0&&(te._closedPromise_resolve(void 0),te._closedPromise_resolve=void 0,te._closedPromise_reject=void 0)}var q=n("[[AbortSteps]]"),H=n("[[ErrorSteps]]"),Y=n("[[CancelSteps]]"),le=n("[[PullSteps]]"),Ce=Number.isFinite||function(te){return typeof te=="number"&&isFinite(te)},Te=Math.trunc||function(te){return te<0?Math.ceil(te):Math.floor(te)};function ke(te){return _typeof$1(te)==="object"||typeof te=="function"}function Ee(te,Me){if(te!==void 0&&!ke(te))throw new TypeError(Me+" is not an object.")}function Pe(te,Me){if(typeof te!="function")throw new TypeError(Me+" is not a function.")}function Be(te){return _typeof$1(te)==="object"&&te!==null||typeof te=="function"}function $e(te,Me){if(!Be(te))throw new TypeError(Me+" is not an object.")}function Oe(te,Me,je){if(te===void 0)throw new TypeError("Parameter "+Me+" is required in '"+je+"'.")}function Ne(te,Me,je){if(te===void 0)throw new TypeError(Me+" is required in '"+je+"'.")}function J(te){return Number(te)}function fe(te){return te===0?0:te}function re(te){return fe(Te(te))}function _e(te,Me){var je=0,Je=Number.MAX_SAFE_INTEGER,dt=Number(te);if(dt=fe(dt),!Ce(dt))throw new TypeError(Me+" is not a finite number");if((dt=re(dt))<je||dt>Je)throw new TypeError(Me+" is outside the accepted range of "+je+" to "+Je+", inclusive");return Ce(dt)&&dt!==0?dt:0}function be(te,Me){if(!Yr(te))throw new TypeError(Me+" is not a ReadableStream.")}function Ae(te){return new He(te)}function Le(te,Me){te._reader._readRequests.push(Me)}function Ve(te,Me,je){var Je=te._reader._readRequests.shift();je?Je._closeSteps():Je._chunkSteps(Me)}function Fe(te){return te._reader._readRequests.length}function De(te){var Me=te._reader;return Me!==void 0&&!!Ze(Me)}var We,Re,He=function(){function te(Me){if(Oe(Me,1,"ReadableStreamDefaultReader"),be(Me,"First parameter"),Xr(Me))throw new TypeError("This stream has already been locked for exclusive reading by another reader");X(this,Me),this._readRequests=new D}return Object.defineProperty(te.prototype,"closed",{get:function(){return Ze(this)?this._closedPromise:w(at("closed"))},enumerable:!1,configurable:!0}),te.prototype.cancel=function(Me){return Me===void 0&&(Me=void 0),Ze(this)?this._ownerReadableStream===void 0?w(j("cancel")):U(this,Me):w(at("cancel"))},te.prototype.read=function(){if(!Ze(this))return w(at("read"));if(this._ownerReadableStream===void 0)return w(j("read from"));var Me,je,Je=g(function(dt,gt){Me=dt,je=gt});return Xe(this,{_chunkSteps:function(dt){return Me({value:dt,done:!1})},_closeSteps:function(){return Me({value:void 0,done:!0})},_errorSteps:function(dt){return je(dt)}}),Je},te.prototype.releaseLock=function(){if(!Ze(this))throw at("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Z(this)}},te}();function Ze(te){return!!u(te)&&!!Object.prototype.hasOwnProperty.call(te,"_readRequests")&&te instanceof He}function Xe(te,Me){var je=te._ownerReadableStream;je._disturbed=!0,je._state==="closed"?Me._closeSteps():je._state==="errored"?Me._errorSteps(je._storedError):je._readableStreamController[le](Me)}function at(te){return new TypeError("ReadableStreamDefaultReader.prototype."+te+" can only be used on a ReadableStreamDefaultReader")}Object.defineProperties(He.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(He.prototype,n.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0}),_typeof$1(n.asyncIterator)==="symbol"&&((We={})[n.asyncIterator]=function(){return this},Re=We,Object.defineProperty(Re,n.asyncIterator,{enumerable:!1}));var ut=function(){function te(Me,je){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=Me,this._preventCancel=je}return te.prototype.next=function(){var Me=this,je=function(){return Me._nextSteps()};return this._ongoingPromise=this._ongoingPromise?T(this._ongoingPromise,je,je):je(),this._ongoingPromise},te.prototype.return=function(Me){var je=this,Je=function(){return je._returnSteps(Me)};return this._ongoingPromise?T(this._ongoingPromise,Je,Je):Je()},te.prototype._nextSteps=function(){var Me=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var je,Je,dt=this._reader;if(dt._ownerReadableStream===void 0)return w(j("iterate"));var gt=g(function(Tt,Bt){je=Tt,Je=Bt});return Xe(dt,{_chunkSteps:function(Tt){Me._ongoingPromise=void 0,I(function(){return je({value:Tt,done:!1})})},_closeSteps:function(){Me._ongoingPromise=void 0,Me._isFinished=!0,Z(dt),je({value:void 0,done:!0})},_errorSteps:function(Tt){Me._ongoingPromise=void 0,Me._isFinished=!0,Z(dt),Je(Tt)}}),gt},te.prototype._returnSteps=function(Me){if(this._isFinished)return Promise.resolve({value:Me,done:!0});this._isFinished=!0;var je=this._reader;if(je._ownerReadableStream===void 0)return w(j("finish iterating"));if(!this._preventCancel){var Je=U(je,Me);return Z(je),T(Je,function(){return{value:Me,done:!0}})}return Z(je),y({value:Me,done:!0})},te}(),ct={next:function(){return pt(this)?this._asyncIteratorImpl.next():w(kt("next"))},return:function(te){return pt(this)?this._asyncIteratorImpl.return(te):w(kt("return"))}};function mt(te,Me){var je=Ae(te),Je=new ut(je,Me),dt=Object.create(ct);return dt._asyncIteratorImpl=Je,dt}function pt(te){if(!u(te)||!Object.prototype.hasOwnProperty.call(te,"_asyncIteratorImpl"))return!1;try{return te._asyncIteratorImpl instanceof ut}catch{return!1}}function kt(te){return new TypeError("ReadableStreamAsyncIterator."+te+" can only be used on a ReadableSteamAsyncIterator")}Re!==void 0&&Object.setPrototypeOf(ct,Re);var Ct=Number.isNaN||function(te){return te!=te};function ht(te){return te.slice()}function Pt(te,Me,je,Je,dt){new Uint8Array(te).set(new Uint8Array(je,Je,dt),Me)}function Ue(te){return te}function qe(te){return!1}function Ye(te,Me,je){if(te.slice)return te.slice(Me,je);var Je=je-Me,dt=new ArrayBuffer(Je);return Pt(dt,0,te,Me,Je),dt}function st(te){return!(typeof te!="number"||Ct(te)||te<0)}function ot(te){var Me=Ye(te.buffer,te.byteOffset,te.byteOffset+te.byteLength);return new Uint8Array(Me)}function Qe(te){var Me=te._queue.shift();return te._queueTotalSize-=Me.size,te._queueTotalSize<0&&(te._queueTotalSize=0),Me.value}function tt(te,Me,je){if(!st(je)||je===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");te._queue.push({value:Me,size:je}),te._queueTotalSize+=je}function nt(te){return te._queue.peek().value}function it(te){te._queue=new D,te._queueTotalSize=0}var lt=function(){function te(){throw new TypeError("Illegal constructor")}return Object.defineProperty(te.prototype,"view",{get:function(){if(!Mt(this))throw To("view");return this._view},enumerable:!1,configurable:!0}),te.prototype.respond=function(Me){if(!Mt(this))throw To("respond");if(Oe(Me,1,"respond"),Me=_e(Me,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");qe(this._view.buffer),Lr(this._associatedReadableByteStreamController,Me)},te.prototype.respondWithNewView=function(Me){if(!Mt(this))throw To("respondWithNewView");if(Oe(Me,1,"respondWithNewView"),!ArrayBuffer.isView(Me))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");qe(Me.buffer),Wr(this._associatedReadableByteStreamController,Me)},te}();Object.defineProperties(lt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(lt.prototype,n.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var Et=function(){function te(){throw new TypeError("Illegal constructor")}return Object.defineProperty(te.prototype,"byobRequest",{get:function(){if(!St(this))throw Hi("byobRequest");return yi(this)},enumerable:!1,configurable:!0}),Object.defineProperty(te.prototype,"desiredSize",{get:function(){if(!St(this))throw Hi("desiredSize");return fo(this)},enumerable:!1,configurable:!0}),te.prototype.close=function(){if(!St(this))throw Hi("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var Me=this._controlledReadableByteStream._state;if(Me!=="readable")throw new TypeError("The stream (in "+Me+" state) is not in the readable state and cannot be closed");Wn(this)},te.prototype.enqueue=function(Me){if(!St(this))throw Hi("enqueue");if(Oe(Me,1,"enqueue"),!ArrayBuffer.isView(Me))throw new TypeError("chunk must be an array buffer view");if(Me.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(Me.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var je=this._controlledReadableByteStream._state;if(je!=="readable")throw new TypeError("The stream (in "+je+" state) is not in the readable state and cannot be enqueued to");Ir(this,Me)},te.prototype.error=function(Me){if(Me===void 0&&(Me=void 0),!St(this))throw Hi("error");Hn(this,Me)},te.prototype[Y]=function(Me){Gt(this),it(this);var je=this._cancelAlgorithm(Me);return Qn(this),je},te.prototype[le]=function(Me){var je=this._controlledReadableByteStream;if(this._queueTotalSize>0){var Je=this._queue.shift();this._queueTotalSize-=Je.byteLength,xn(this);var dt=new Uint8Array(Je.buffer,Je.byteOffset,Je.byteLength);Me._chunkSteps(dt)}else{var gt=this._autoAllocateChunkSize;if(gt!==void 0){var Tt=void 0;try{Tt=new ArrayBuffer(gt)}catch(Xt){return void Me._errorSteps(Xt)}var Bt={buffer:Tt,bufferByteLength:gt,byteOffset:0,byteLength:gt,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(Bt)}Le(je,Me),Lt(this)}},te}();function St(te){return!!u(te)&&!!Object.prototype.hasOwnProperty.call(te,"_controlledReadableByteStream")&&te instanceof Et}function Mt(te){return!!u(te)&&!!Object.prototype.hasOwnProperty.call(te,"_associatedReadableByteStreamController")&&te instanceof lt}function Lt(te){Rr(te)&&(te._pulling?te._pullAgain=!0:(te._pulling=!0,k(te._pullAlgorithm(),function(){te._pulling=!1,te._pullAgain&&(te._pullAgain=!1,Lt(te))},function(Me){Hn(te,Me)})))}function Gt(te){Pn(te),te._pendingPullIntos=new D}function vn(te,Me){var je=!1;te._state==="closed"&&(je=!0);var Je=nn(Me);Me.readerType==="default"?Ve(te,Je,je):Za(te,Je,je)}function nn(te){var Me=te.bytesFilled,je=te.elementSize;return new te.viewConstructor(te.buffer,te.byteOffset,Me/je)}function Qt(te,Me,je,Je){te._queue.push({buffer:Me,byteOffset:je,byteLength:Je}),te._queueTotalSize+=Je}function un(te,Me){var je=Me.elementSize,Je=Me.bytesFilled-Me.bytesFilled%je,dt=Math.min(te._queueTotalSize,Me.byteLength-Me.bytesFilled),gt=Me.bytesFilled+dt,Tt=gt-gt%je,Bt=dt,Xt=!1;Tt>Je&&(Bt=Tt-Me.bytesFilled,Xt=!0);for(var hn=te._queue;Bt>0;){var an=hn.peek(),rn=Math.min(Bt,an.byteLength),wn=Me.byteOffset+Me.bytesFilled;Pt(Me.buffer,wn,an.buffer,an.byteOffset,rn),an.byteLength===rn?hn.shift():(an.byteOffset+=rn,an.byteLength-=rn),te._queueTotalSize-=rn,dn(te,rn,Me),Bt-=rn}return Xt}function dn(te,Me,je){je.bytesFilled+=Me}function xn(te){te._queueTotalSize===0&&te._closeRequested?(Qn(te),eo(te._controlledReadableByteStream)):Lt(te)}function Pn(te){te._byobRequest!==null&&(te._byobRequest._associatedReadableByteStreamController=void 0,te._byobRequest._view=null,te._byobRequest=null)}function Mn(te){for(;te._pendingPullIntos.length>0;){if(te._queueTotalSize===0)return;var Me=te._pendingPullIntos.peek();un(te,Me)&&(Jn(te),vn(te._controlledReadableByteStream,Me))}}function Fn(te,Me,je){var Je=te._controlledReadableByteStream,dt=1;Me.constructor!==DataView&&(dt=Me.constructor.BYTES_PER_ELEMENT);var gt=Me.constructor,Tt=Me.buffer,Bt={buffer:Tt,bufferByteLength:Tt.byteLength,byteOffset:Me.byteOffset,byteLength:Me.byteLength,bytesFilled:0,elementSize:dt,viewConstructor:gt,readerType:"byob"};if(te._pendingPullIntos.length>0)return te._pendingPullIntos.push(Bt),void gn(Je,je);if(Je._state!=="closed"){if(te._queueTotalSize>0){if(un(te,Bt)){var Xt=nn(Bt);return xn(te),void je._chunkSteps(Xt)}if(te._closeRequested){var hn=new TypeError("Insufficient bytes to fill elements in the given buffer");return Hn(te,hn),void je._errorSteps(hn)}}te._pendingPullIntos.push(Bt),gn(Je,je),Lt(te)}else{var an=new gt(Bt.buffer,Bt.byteOffset,0);je._closeSteps(an)}}function ur(te,Me){var je=te._controlledReadableByteStream;if($o(je))for(;ea(je)>0;)vn(je,Jn(te))}function xr(te,Me,je){if(dn(te,Me,je),!(je.bytesFilled<je.elementSize)){Jn(te);var Je=je.bytesFilled%je.elementSize;if(Je>0){var dt=je.byteOffset+je.bytesFilled,gt=Ye(je.buffer,dt-Je,dt);Qt(te,gt,0,gt.byteLength)}je.bytesFilled-=Je,vn(te._controlledReadableByteStream,je),Mn(te)}}function Dn(te,Me){var je=te._pendingPullIntos.peek();Pn(te),te._controlledReadableByteStream._state==="closed"?ur(te):xr(te,Me,je),Lt(te)}function Jn(te){return te._pendingPullIntos.shift()}function Rr(te){var Me=te._controlledReadableByteStream;return Me._state==="readable"&&!te._closeRequested&&!!te._started&&(!!(De(Me)&&Fe(Me)>0)||!!($o(Me)&&ea(Me)>0)||fo(te)>0)}function Qn(te){te._pullAlgorithm=void 0,te._cancelAlgorithm=void 0}function Wn(te){var Me=te._controlledReadableByteStream;if(!te._closeRequested&&Me._state==="readable")if(te._queueTotalSize>0)te._closeRequested=!0;else{if(te._pendingPullIntos.length>0&&te._pendingPullIntos.peek().bytesFilled>0){var je=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Hn(te,je),je}Qn(te),eo(Me)}}function Ir(te,Me){var je=te._controlledReadableByteStream;if(!te._closeRequested&&je._state==="readable"){var Je=Me.buffer,dt=Me.byteOffset,gt=Me.byteLength,Tt=Je;if(te._pendingPullIntos.length>0){var Bt=te._pendingPullIntos.peek();qe(Bt.buffer),Bt.buffer=Bt.buffer}Pn(te),De(je)?Fe(je)===0?Qt(te,Tt,dt,gt):(te._pendingPullIntos.length>0&&Jn(te),Ve(je,new Uint8Array(Tt,dt,gt),!1)):$o(je)?(Qt(te,Tt,dt,gt),Mn(te)):Qt(te,Tt,dt,gt),Lt(te)}}function Hn(te,Me){var je=te._controlledReadableByteStream;je._state==="readable"&&(Gt(te),it(te),Qn(te),ya(je,Me))}function yi(te){if(te._byobRequest===null&&te._pendingPullIntos.length>0){var Me=te._pendingPullIntos.peek(),je=new Uint8Array(Me.buffer,Me.byteOffset+Me.bytesFilled,Me.byteLength-Me.bytesFilled),Je=Object.create(lt.prototype);Xa(Je,te,je),te._byobRequest=Je}return te._byobRequest}function fo(te){var Me=te._controlledReadableByteStream._state;return Me==="errored"?null:Me==="closed"?0:te._strategyHWM-te._queueTotalSize}function Lr(te,Me){var je=te._pendingPullIntos.peek();if(te._controlledReadableByteStream._state==="closed"){if(Me!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(Me===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(je.bytesFilled+Me>je.byteLength)throw new RangeError("bytesWritten out of range")}je.buffer=je.buffer,Dn(te,Me)}function Wr(te,Me){var je=te._pendingPullIntos.peek();if(te._controlledReadableByteStream._state==="closed"){if(Me.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(Me.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(je.byteOffset+je.bytesFilled!==Me.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(je.bufferByteLength!==Me.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(je.bytesFilled+Me.byteLength>je.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var Je=Me.byteLength;je.buffer=Me.buffer,Dn(te,Je)}function Qo(te,Me,je,Je,dt,gt,Tt){Me._controlledReadableByteStream=te,Me._pullAgain=!1,Me._pulling=!1,Me._byobRequest=null,Me._queue=Me._queueTotalSize=void 0,it(Me),Me._closeRequested=!1,Me._started=!1,Me._strategyHWM=gt,Me._pullAlgorithm=Je,Me._cancelAlgorithm=dt,Me._autoAllocateChunkSize=Tt,Me._pendingPullIntos=new D,te._readableStreamController=Me,k(y(je()),function(){Me._started=!0,Lt(Me)},function(Bt){Hn(Me,Bt)})}function Ya(te,Me,je){var Je=Object.create(Et.prototype),dt=function(){},gt=function(){return y(void 0)},Tt=function(){return y(void 0)};Me.start!==void 0&&(dt=function(){return Me.start(Je)}),Me.pull!==void 0&&(gt=function(){return Me.pull(Je)}),Me.cancel!==void 0&&(Tt=function(Xt){return Me.cancel(Xt)});var Bt=Me.autoAllocateChunkSize;if(Bt===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Qo(te,Je,dt,gt,Tt,je,Bt)}function Xa(te,Me,je){te._associatedReadableByteStreamController=Me,te._view=je}function To(te){return new TypeError("ReadableStreamBYOBRequest.prototype."+te+" can only be used on a ReadableStreamBYOBRequest")}function Hi(te){return new TypeError("ReadableByteStreamController.prototype."+te+" can only be used on a ReadableByteStreamController")}function yn(te){return new bi(te)}function gn(te,Me){te._reader._readIntoRequests.push(Me)}function Za(te,Me,je){var Je=te._reader._readIntoRequests.shift();je?Je._closeSteps(Me):Je._chunkSteps(Me)}function ea(te){return te._reader._readIntoRequests.length}function $o(te){var Me=te._reader;return Me!==void 0&&!!ii(Me)}Object.defineProperties(Et.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(Et.prototype,n.toStringTag,{value:"ReadableByteStreamController",configurable:!0});var bi=function(){function te(Me){if(Oe(Me,1,"ReadableStreamBYOBReader"),be(Me,"First parameter"),Xr(Me))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!St(Me._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");X(this,Me),this._readIntoRequests=new D}return Object.defineProperty(te.prototype,"closed",{get:function(){return ii(this)?this._closedPromise:w(wi("closed"))},enumerable:!1,configurable:!0}),te.prototype.cancel=function(Me){return Me===void 0&&(Me=void 0),ii(this)?this._ownerReadableStream===void 0?w(j("cancel")):U(this,Me):w(wi("cancel"))},te.prototype.read=function(Me){if(!ii(this))return w(wi("read"));if(!ArrayBuffer.isView(Me))return w(new TypeError("view must be an array buffer view"));if(Me.byteLength===0)return w(new TypeError("view must have non-zero byteLength"));if(Me.buffer.byteLength===0)return w(new TypeError("view's buffer must have non-zero byteLength"));if(qe(Me.buffer),this._ownerReadableStream===void 0)return w(j("read from"));var je,Je,dt=g(function(gt,Tt){je=gt,Je=Tt});return In(this,Me,{_chunkSteps:function(gt){return je({value:gt,done:!1})},_closeSteps:function(gt){return je({value:gt,done:!0})},_errorSteps:function(gt){return Je(gt)}}),dt},te.prototype.releaseLock=function(){if(!ii(this))throw wi("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Z(this)}},te}();function ii(te){return!!u(te)&&!!Object.prototype.hasOwnProperty.call(te,"_readIntoRequests")&&te instanceof bi}function In(te,Me,je){var Je=te._ownerReadableStream;Je._disturbed=!0,Je._state==="errored"?je._errorSteps(Je._storedError):Fn(Je._readableStreamController,Me,je)}function wi(te){return new TypeError("ReadableStreamBYOBReader.prototype."+te+" can only be used on a ReadableStreamBYOBReader")}function dr(te,Me){var je=te.highWaterMark;if(je===void 0)return Me;if(Ct(je)||je<0)throw new RangeError("Invalid highWaterMark");return je}function zi(te){var Me=te.size;return Me||function(){return 1}}function xi(te,Me){Ee(te,Me);var je=te==null?void 0:te.highWaterMark,Je=te==null?void 0:te.size;return{highWaterMark:je===void 0?void 0:J(je),size:Je===void 0?void 0:er(Je,Me+" has member 'size' that")}}function er(te,Me){return Pe(te,Me),function(je){return J(te(je))}}function ta(te,Me){Ee(te,Me);var je=te==null?void 0:te.abort,Je=te==null?void 0:te.close,dt=te==null?void 0:te.start,gt=te==null?void 0:te.type,Tt=te==null?void 0:te.write;return{abort:je===void 0?void 0:na(je,te,Me+" has member 'abort' that"),close:Je===void 0?void 0:ra(Je,te,Me+" has member 'close' that"),start:dt===void 0?void 0:ia(dt,te,Me+" has member 'start' that"),write:Tt===void 0?void 0:oa(Tt,te,Me+" has member 'write' that"),type:gt}}function na(te,Me,je){return Pe(te,je),function(Je){return O(te,Me,[Je])}}function ra(te,Me,je){return Pe(te,je),function(){return O(te,Me,[])}}function ia(te,Me,je){return Pe(te,je),function(Je){return F(te,Me,[Je])}}function oa(te,Me,je){return Pe(te,je),function(Je,dt){return O(te,Me,[Je,dt])}}function Bo(te,Me){if(!qr(te))throw new TypeError(Me+" is not a WritableStream.")}function Un(te){if(_typeof$1(te)!=="object"||te===null)return!1;try{return typeof te.aborted=="boolean"}catch{return!1}}Object.defineProperties(bi.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(bi.prototype,n.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});var Ja=typeof AbortController=="function";function tr(){if(Ja)return new AbortController}var ji=function(){function te(Me,je){Me===void 0&&(Me={}),je===void 0&&(je={}),Me===void 0?Me=null:$e(Me,"First parameter");var Je=xi(je,"Second parameter"),dt=ta(Me,"First parameter");if(Wi(this),dt.type!==void 0)throw new RangeError("Invalid type is specified");var gt=zi(Je);ns(this,dt,dr(Je,1),gt)}return Object.defineProperty(te.prototype,"locked",{get:function(){if(!qr(this))throw kn("locked");return pn(this)},enumerable:!1,configurable:!0}),te.prototype.abort=function(Me){return Me===void 0&&(Me=void 0),qr(this)?pn(this)?w(new TypeError("Cannot abort a stream that already has a writer")):hr(this,Me):w(kn("abort"))},te.prototype.close=function(){return qr(this)?pn(this)?w(new TypeError("Cannot close a stream that already has a writer")):fr(this)?w(new TypeError("Cannot close an already-closing stream")):po(this):w(kn("close"))},te.prototype.getWriter=function(){if(!qr(this))throw kn("getWriter");return Ro(this)},te}();function Ro(te){return new Si(te)}function Ur(te,Me,je,Je,dt,gt){dt===void 0&&(dt=1),gt===void 0&&(gt=function(){return 1});var Tt=Object.create(ji.prototype);return Wi(Tt),Gi(Tt,Object.create(ai.prototype),te,Me,je,Je,dt,gt),Tt}function Wi(te){te._state="writable",te._storedError=void 0,te._writer=void 0,te._writableStreamController=void 0,te._writeRequests=new D,te._inFlightWriteRequest=void 0,te._closeRequest=void 0,te._inFlightCloseRequest=void 0,te._pendingAbortRequest=void 0,te._backpressure=!1}function qr(te){return!!u(te)&&!!Object.prototype.hasOwnProperty.call(te,"_writableStreamController")&&te instanceof ji}function pn(te){return te._writer!==void 0}function hr(te,Me){var je;if(te._state==="closed"||te._state==="errored")return y(void 0);te._writableStreamController._abortReason=Me,(je=te._writableStreamController._abortController)===null||je===void 0||je.abort();var Je=te._state;if(Je==="closed"||Je==="errored")return y(void 0);if(te._pendingAbortRequest!==void 0)return te._pendingAbortRequest._promise;var dt=!1;Je==="erroring"&&(dt=!0,Me=void 0);var gt=g(function(Tt,Bt){te._pendingAbortRequest={_promise:void 0,_resolve:Tt,_reject:Bt,_reason:Me,_wasAlreadyErroring:dt}});return te._pendingAbortRequest._promise=gt,dt||Io(te,Me),gt}function po(te){var Me=te._state;if(Me==="closed"||Me==="errored")return w(new TypeError("The stream (in "+Me+" state) is not in the writable state and cannot be closed"));var je=g(function(dt,gt){var Tt={_resolve:dt,_reject:gt};te._closeRequest=Tt}),Je=te._writer;return Je!==void 0&&te._backpressure&&Me==="writable"&&Vo(Je),pr(te._writableStreamController),je}function Qa(te){return g(function(Me,je){var Je={_resolve:Me,_reject:je};te._writeRequests.push(Je)})}function Ui(te,Me){te._state!=="writable"?vo(te):Io(te,Me)}function Io(te,Me){var je=te._writableStreamController;te._state="erroring",te._storedError=Me;var Je=te._writer;Je!==void 0&&ua(Je,Me),!Lo(te)&&je._started&&vo(te)}function vo(te){te._state="errored",te._writableStreamController[H]();var Me=te._storedError;if(te._writeRequests.forEach(function(Je){Je._reject(Me)}),te._writeRequests=new D,te._pendingAbortRequest!==void 0){var je=te._pendingAbortRequest;if(te._pendingAbortRequest=void 0,je._wasAlreadyErroring)return je._reject(Me),void ki(te);k(te._writableStreamController[q](je._reason),function(){je._resolve(),ki(te)},function(Je){je._reject(Je),ki(te)})}else ki(te)}function mo(te){te._inFlightWriteRequest._resolve(void 0),te._inFlightWriteRequest=void 0}function Ci(te,Me){te._inFlightWriteRequest._reject(Me),te._inFlightWriteRequest=void 0,Ui(te,Me)}function es(te){te._inFlightCloseRequest._resolve(void 0),te._inFlightCloseRequest=void 0,te._state==="erroring"&&(te._storedError=void 0,te._pendingAbortRequest!==void 0&&(te._pendingAbortRequest._resolve(),te._pendingAbortRequest=void 0)),te._state="closed";var Me=te._writer;Me!==void 0&&Ki(Me)}function aa(te,Me){te._inFlightCloseRequest._reject(Me),te._inFlightCloseRequest=void 0,te._pendingAbortRequest!==void 0&&(te._pendingAbortRequest._reject(Me),te._pendingAbortRequest=void 0),Ui(te,Me)}function fr(te){return te._closeRequest!==void 0||te._inFlightCloseRequest!==void 0}function Lo(te){return te._inFlightWriteRequest!==void 0||te._inFlightCloseRequest!==void 0}function No(te){te._inFlightCloseRequest=te._closeRequest,te._closeRequest=void 0}function sa(te){te._inFlightWriteRequest=te._writeRequests.shift()}function ki(te){te._closeRequest!==void 0&&(te._closeRequest._reject(te._storedError),te._closeRequest=void 0);var Me=te._writer;Me!==void 0&&Do(Me,te._storedError)}function qi(te,Me){var je=te._writer;je!==void 0&&Me!==te._backpressure&&(Me?bo(je):Vo(je)),te._backpressure=Me}Object.defineProperties(ji.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(ji.prototype,n.toStringTag,{value:"WritableStream",configurable:!0});var Si=function(){function te(Me){if(Oe(Me,1,"WritableStreamDefaultWriter"),Bo(Me,"First parameter"),pn(Me))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=Me,Me._writer=this;var je=Me._state;if(je==="writable")!fr(Me)&&Me._backpressure?li(this):pa(this),_o(this);else if(je==="erroring")cn(this,Me._storedError),_o(this);else if(je==="closed")pa(this),yo(this);else{var Je=Me._storedError;cn(this,Je),qn(this,Je)}}return Object.defineProperty(te.prototype,"closed",{get:function(){return An(this)?this._closedPromise:w(ln("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(te.prototype,"desiredSize",{get:function(){if(!An(this))throw ln("desiredSize");if(this._ownerWritableStream===void 0)throw si("desiredSize");return ts(this)},enumerable:!1,configurable:!0}),Object.defineProperty(te.prototype,"ready",{get:function(){return An(this)?this._readyPromise:w(ln("ready"))},enumerable:!1,configurable:!0}),te.prototype.abort=function(Me){return Me===void 0&&(Me=void 0),An(this)?this._ownerWritableStream===void 0?w(si("abort")):Fo(this,Me):w(ln("abort"))},te.prototype.close=function(){if(!An(this))return w(ln("close"));var Me=this._ownerWritableStream;return Me===void 0?w(si("close")):fr(Me)?w(new TypeError("Cannot close an already-closing stream")):Ei(this)},te.prototype.releaseLock=function(){if(!An(this))throw ln("releaseLock");this._ownerWritableStream!==void 0&&da(this)},te.prototype.write=function(Me){return Me===void 0&&(Me=void 0),An(this)?this._ownerWritableStream===void 0?w(si("write to")):oi(this,Me):w(ln("write"))},te}();function An(te){return!!u(te)&&!!Object.prototype.hasOwnProperty.call(te,"_ownerWritableStream")&&te instanceof Si}function Fo(te,Me){return hr(te._ownerWritableStream,Me)}function Ei(te){return po(te._ownerWritableStream)}function la(te){var Me=te._ownerWritableStream,je=Me._state;return fr(Me)||je==="closed"?y(void 0):je==="errored"?w(Me._storedError):Ei(te)}function ca(te,Me){te._closedPromiseState==="pending"?Do(te,Me):Mi(te,Me)}function ua(te,Me){te._readyPromiseState==="pending"?Oo(te,Me):rs(te,Me)}function ts(te){var Me=te._ownerWritableStream,je=Me._state;return je==="errored"||je==="erroring"?null:je==="closed"?0:fa(Me._writableStreamController)}function da(te){var Me=te._ownerWritableStream,je=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");ua(te,je),ca(te,je),Me._writer=void 0,te._ownerWritableStream=void 0}function oi(te,Me){var je=te._ownerWritableStream,Je=je._writableStreamController,dt=ha(Je,Me);if(je!==te._ownerWritableStream)return w(si("write to"));var gt=je._state;if(gt==="errored")return w(je._storedError);if(fr(je)||gt==="closed")return w(new TypeError("The stream is closing or closed and cannot be written to"));if(gt==="erroring")return w(je._storedError);var Tt=Qa(je);return Pi(Je,Me,dt),Tt}Object.defineProperties(Si.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(Si.prototype,n.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});var go={},ai=function(){function te(){throw new TypeError("Illegal constructor")}return Object.defineProperty(te.prototype,"abortReason",{get:function(){if(!Cr(this))throw nr("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(te.prototype,"signal",{get:function(){if(!Cr(this))throw nr("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),te.prototype.error=function(Me){if(Me===void 0&&(Me=void 0),!Cr(this))throw nr("error");this._controlledWritableStream._state==="writable"&&tn(this,Me)},te.prototype[q]=function(Me){var je=this._abortAlgorithm(Me);return Nr(this),je},te.prototype[H]=function(){it(this)},te}();function Cr(te){return!!u(te)&&!!Object.prototype.hasOwnProperty.call(te,"_controlledWritableStream")&&te instanceof ai}function Gi(te,Me,je,Je,dt,gt,Tt,Bt){Me._controlledWritableStream=te,te._writableStreamController=Me,Me._queue=void 0,Me._queueTotalSize=void 0,it(Me),Me._abortReason=void 0,Me._abortController=tr(),Me._started=!1,Me._strategySizeAlgorithm=Bt,Me._strategyHWM=Tt,Me._writeAlgorithm=Je,Me._closeAlgorithm=dt,Me._abortAlgorithm=gt;var Xt=jt(Me);qi(te,Xt),k(y(je()),function(){Me._started=!0,vt(Me)},function(hn){Me._started=!0,Ui(te,hn)})}function ns(te,Me,je,Je){var dt=Object.create(ai.prototype),gt=function(){},Tt=function(){return y(void 0)},Bt=function(){return y(void 0)},Xt=function(){return y(void 0)};Me.start!==void 0&&(gt=function(){return Me.start(dt)}),Me.write!==void 0&&(Tt=function(hn){return Me.write(hn,dt)}),Me.close!==void 0&&(Bt=function(){return Me.close()}),Me.abort!==void 0&&(Xt=function(hn){return Me.abort(hn)}),Gi(te,dt,gt,Tt,Bt,Xt,je,Je)}function Nr(te){te._writeAlgorithm=void 0,te._closeAlgorithm=void 0,te._abortAlgorithm=void 0,te._strategySizeAlgorithm=void 0}function pr(te){tt(te,go,0),vt(te)}function ha(te,Me){try{return te._strategySizeAlgorithm(Me)}catch(je){return _t(te,je),1}}function fa(te){return te._strategyHWM-te._queueTotalSize}function Pi(te,Me,je){try{tt(te,Me,je)}catch(dt){return void _t(te,dt)}var Je=te._controlledWritableStream;fr(Je)||Je._state!=="writable"||qi(Je,jt(te)),vt(te)}function vt(te){var Me=te._controlledWritableStream;if(te._started&&Me._inFlightWriteRequest===void 0)if(Me._state!=="erroring"){if(te._queue.length!==0){var je=nt(te);je===go?xt(te):It(te,je)}}else vo(Me)}function _t(te,Me){te._controlledWritableStream._state==="writable"&&tn(te,Me)}function xt(te){var Me=te._controlledWritableStream;No(Me),Qe(te);var je=te._closeAlgorithm();Nr(te),k(je,function(){es(Me)},function(Je){aa(Me,Je)})}function It(te,Me){var je=te._controlledWritableStream;sa(je),k(te._writeAlgorithm(Me),function(){mo(je);var Je=je._state;if(Qe(te),!fr(je)&&Je==="writable"){var dt=jt(te);qi(je,dt)}vt(te)},function(Je){je._state==="writable"&&Nr(te),Ci(je,Je)})}function jt(te){return fa(te)<=0}function tn(te,Me){var je=te._controlledWritableStream;Nr(te),Io(je,Me)}function kn(te){return new TypeError("WritableStream.prototype."+te+" can only be used on a WritableStream")}function nr(te){return new TypeError("WritableStreamDefaultController.prototype."+te+" can only be used on a WritableStreamDefaultController")}function ln(te){return new TypeError("WritableStreamDefaultWriter.prototype."+te+" can only be used on a WritableStreamDefaultWriter")}function si(te){return new TypeError("Cannot "+te+" a stream using a released writer")}function _o(te){te._closedPromise=g(function(Me,je){te._closedPromise_resolve=Me,te._closedPromise_reject=je,te._closedPromiseState="pending"})}function qn(te,Me){_o(te),Do(te,Me)}function yo(te){_o(te),Ki(te)}function Do(te,Me){te._closedPromise_reject!==void 0&&(M(te._closedPromise),te._closedPromise_reject(Me),te._closedPromise_resolve=void 0,te._closedPromise_reject=void 0,te._closedPromiseState="rejected")}function Mi(te,Me){qn(te,Me)}function Ki(te){te._closedPromise_resolve!==void 0&&(te._closedPromise_resolve(void 0),te._closedPromise_resolve=void 0,te._closedPromise_reject=void 0,te._closedPromiseState="resolved")}function li(te){te._readyPromise=g(function(Me,je){te._readyPromise_resolve=Me,te._readyPromise_reject=je}),te._readyPromiseState="pending"}function cn(te,Me){li(te),Oo(te,Me)}function pa(te){li(te),Vo(te)}function Oo(te,Me){te._readyPromise_reject!==void 0&&(M(te._readyPromise),te._readyPromise_reject(Me),te._readyPromise_resolve=void 0,te._readyPromise_reject=void 0,te._readyPromiseState="rejected")}function bo(te){li(te)}function rs(te,Me){cn(te,Me)}function Vo(te){te._readyPromise_resolve!==void 0&&(te._readyPromise_resolve(void 0),te._readyPromise_resolve=void 0,te._readyPromise_reject=void 0,te._readyPromiseState="fulfilled")}Object.defineProperties(ai.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(ai.prototype,n.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});var va=typeof DOMException<"u"?DOMException:void 0;function wo(te){if(typeof te!="function"&&_typeof$1(te)!=="object")return!1;try{return new te,!0}catch{return!1}}function Gr(){var te=function(Me,je){this.message=Me||"",this.name=je||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return te.prototype=Object.create(Error.prototype),Object.defineProperty(te.prototype,"constructor",{value:te,writable:!0,configurable:!0}),te}var xo=wo(va)?va:Gr();function Ho(te,Me,je,Je,dt,gt){var Tt=Ae(te),Bt=Ro(Me);te._disturbed=!0;var Xt=!1,hn=y(void 0);return g(function(an,rn){var wn;if(gt!==void 0){if(wn=function(){var Wt=new xo("Aborted","AbortError"),sn=[];Je||sn.push(function(){return Me._state==="writable"?hr(Me,Wt):y(void 0)}),dt||sn.push(function(){return te._state==="readable"?mr(te,Wt):y(void 0)}),Yn(function(){return Promise.all(sn.map(function(_n){return _n()}))},!0,Wt)},gt.aborted)return void wn();gt.addEventListener("abort",wn)}function Pr(){return g(function(Wt,sn){function _n(or){or?Wt():x(Mr(),_n,sn)}_n(!1)})}function Mr(){return Xt?y(!0):x(Bt._readyPromise,function(){return g(function(Wt,sn){Xe(Tt,{_chunkSteps:function(_n){hn=x(oi(Bt,_n),void 0,r),Wt(!1)},_closeSteps:function(){return Wt(!0)},_errorSteps:sn})})})}if($n(te,Tt._closedPromise,function(Wt){Je?Hr(!0,Wt):Yn(function(){return hr(Me,Wt)},!0,Wt)}),$n(Me,Bt._closedPromise,function(Wt){dt?Hr(!0,Wt):Yn(function(){return mr(te,Wt)},!0,Wt)}),yr(te,Tt._closedPromise,function(){je?Hr():Yn(function(){return la(Bt)})}),fr(Me)||Me._state==="closed"){var Ar=new TypeError("the destination writable stream closed before all data could be piped to it");dt?Hr(!0,Ar):Yn(function(){return mr(te,Ar)},!0,Ar)}function _r(){var Wt=hn;return x(hn,function(){return Wt!==hn?_r():void 0})}function $n(Wt,sn,_n){Wt._state==="errored"?_n(Wt._storedError):E(sn,_n)}function yr(Wt,sn,_n){Wt._state==="closed"?_n():S(sn,_n)}function Yn(Wt,sn,_n){function or(){k(Wt(),function(){return bn(sn,_n)},function(zr){return bn(!0,zr)})}Xt||(Xt=!0,Me._state!=="writable"||fr(Me)?or():S(_r(),or))}function Hr(Wt,sn){Xt||(Xt=!0,Me._state!=="writable"||fr(Me)?bn(Wt,sn):S(_r(),function(){return bn(Wt,sn)}))}function bn(Wt,sn){da(Bt),Z(Tt),gt!==void 0&&gt.removeEventListener("abort",wn),Wt?rn(sn):an(void 0)}M(Pr())})}var Fr=function(){function te(){throw new TypeError("Illegal constructor")}return Object.defineProperty(te.prototype,"desiredSize",{get:function(){if(!Yi(this))throw $i("desiredSize");return zo(this)},enumerable:!1,configurable:!0}),te.prototype.close=function(){if(!Yi(this))throw $i("close");if(!Ti(this))throw new TypeError("The stream is not in a state that permits close");Dr(this)},te.prototype.enqueue=function(Me){if(Me===void 0&&(Me=void 0),!Yi(this))throw $i("enqueue");if(!Ti(this))throw new TypeError("The stream is not in a state that permits enqueue");return kr(this,Me)},te.prototype.error=function(Me){if(Me===void 0&&(Me=void 0),!Yi(this))throw $i("error");vr(this,Me)},te.prototype[Y]=function(Me){it(this);var je=this._cancelAlgorithm(Me);return Zi(this),je},te.prototype[le]=function(Me){var je=this._controlledReadableStream;if(this._queue.length>0){var Je=Qe(this);this._closeRequested&&this._queue.length===0?(Zi(this),eo(je)):Ai(this),Me._chunkSteps(Je)}else Le(je,Me),Ai(this)},te}();function Yi(te){return!!u(te)&&!!Object.prototype.hasOwnProperty.call(te,"_controlledReadableStream")&&te instanceof Fr}function Ai(te){Xi(te)&&(te._pulling?te._pullAgain=!0:(te._pulling=!0,k(te._pullAlgorithm(),function(){te._pulling=!1,te._pullAgain&&(te._pullAgain=!1,Ai(te))},function(Me){vr(te,Me)})))}function Xi(te){var Me=te._controlledReadableStream;return!!Ti(te)&&!!te._started&&(!!(Xr(Me)&&Fe(Me)>0)||zo(te)>0)}function Zi(te){te._pullAlgorithm=void 0,te._cancelAlgorithm=void 0,te._strategySizeAlgorithm=void 0}function Dr(te){if(Ti(te)){var Me=te._controlledReadableStream;te._closeRequested=!0,te._queue.length===0&&(Zi(te),eo(Me))}}function kr(te,Me){if(Ti(te)){var je=te._controlledReadableStream;if(Xr(je)&&Fe(je)>0)Ve(je,Me,!1);else{var Je=void 0;try{Je=te._strategySizeAlgorithm(Me)}catch(dt){throw vr(te,dt),dt}try{tt(te,Me,Je)}catch(dt){throw vr(te,dt),dt}}Ai(te)}}function vr(te,Me){var je=te._controlledReadableStream;je._state==="readable"&&(it(te),Zi(te),ya(je,Me))}function zo(te){var Me=te._controlledReadableStream._state;return Me==="errored"?null:Me==="closed"?0:te._strategyHWM-te._queueTotalSize}function is(te){return!Xi(te)}function Ti(te){var Me=te._controlledReadableStream._state;return!te._closeRequested&&Me==="readable"}function Ji(te,Me,je,Je,dt,gt,Tt){Me._controlledReadableStream=te,Me._queue=void 0,Me._queueTotalSize=void 0,it(Me),Me._started=!1,Me._closeRequested=!1,Me._pullAgain=!1,Me._pulling=!1,Me._strategySizeAlgorithm=Tt,Me._strategyHWM=gt,Me._pullAlgorithm=Je,Me._cancelAlgorithm=dt,te._readableStreamController=Me,k(y(je()),function(){Me._started=!0,Ai(Me)},function(Bt){vr(Me,Bt)})}function Co(te,Me,je,Je){var dt=Object.create(Fr.prototype),gt=function(){},Tt=function(){return y(void 0)},Bt=function(){return y(void 0)};Me.start!==void 0&&(gt=function(){return Me.start(dt)}),Me.pull!==void 0&&(Tt=function(){return Me.pull(dt)}),Me.cancel!==void 0&&(Bt=function(Xt){return Me.cancel(Xt)}),Ji(te,dt,gt,Tt,Bt,je,Je)}function $i(te){return new TypeError("ReadableStreamDefaultController.prototype."+te+" can only be used on a ReadableStreamDefaultController")}function os(te,Me){return St(te._readableStreamController)?as(te):ma(te)}function ma(te,Me){var je,Je,dt,gt,Tt,Bt=Ae(te),Xt=!1,hn=!1,an=!1,rn=!1,wn=g(function($n){Tt=$n});function Pr(){return Xt?(hn=!0,y(void 0)):(Xt=!0,Xe(Bt,{_chunkSteps:function($n){I(function(){hn=!1;var yr=$n,Yn=$n;an||kr(dt._readableStreamController,yr),rn||kr(gt._readableStreamController,Yn),Xt=!1,hn&&Pr()})},_closeSteps:function(){Xt=!1,an||Dr(dt._readableStreamController),rn||Dr(gt._readableStreamController),an&&rn||Tt(void 0)},_errorSteps:function(){Xt=!1}}),y(void 0))}function Mr($n){if(an=!0,je=$n,rn){var yr=ht([je,Je]),Yn=mr(te,yr);Tt(Yn)}return wn}function Ar($n){if(rn=!0,Je=$n,an){var yr=ht([je,Je]),Yn=mr(te,yr);Tt(Yn)}return wn}function _r(){}return dt=ci(_r,Pr,Mr),gt=ci(_r,Pr,Ar),E(Bt._closedPromise,function($n){vr(dt._readableStreamController,$n),vr(gt._readableStreamController,$n),an&&rn||Tt(void 0)}),[dt,gt]}function as(te){var Me,je,Je,dt,gt,Tt=Ae(te),Bt=!1,Xt=!1,hn=!1,an=!1,rn=!1,wn=g(function(bn){gt=bn});function Pr(bn){E(bn._closedPromise,function(Wt){bn===Tt&&(Hn(Je._readableStreamController,Wt),Hn(dt._readableStreamController,Wt),an&&rn||gt(void 0))})}function Mr(){ii(Tt)&&(Z(Tt),Pr(Tt=Ae(te))),Xe(Tt,{_chunkSteps:function(bn){I(function(){Xt=!1,hn=!1;var Wt=bn,sn=bn;if(!an&&!rn)try{sn=ot(bn)}catch(_n){return Hn(Je._readableStreamController,_n),Hn(dt._readableStreamController,_n),void gt(mr(te,_n))}an||Ir(Je._readableStreamController,Wt),rn||Ir(dt._readableStreamController,sn),Bt=!1,Xt?_r():hn&&$n()})},_closeSteps:function(){Bt=!1,an||Wn(Je._readableStreamController),rn||Wn(dt._readableStreamController),Je._readableStreamController._pendingPullIntos.length>0&&Lr(Je._readableStreamController,0),dt._readableStreamController._pendingPullIntos.length>0&&Lr(dt._readableStreamController,0),an&&rn||gt(void 0)},_errorSteps:function(){Bt=!1}})}function Ar(bn,Wt){Ze(Tt)&&(Z(Tt),Pr(Tt=yn(te)));var sn=Wt?dt:Je,_n=Wt?Je:dt;In(Tt,bn,{_chunkSteps:function(or){I(function(){Xt=!1,hn=!1;var zr=Wt?rn:an;if(Wt?an:rn)zr||Wr(sn._readableStreamController,or);else{var fi=void 0;try{fi=ot(or)}catch(so){return Hn(sn._readableStreamController,so),Hn(_n._readableStreamController,so),void gt(mr(te,so))}zr||Wr(sn._readableStreamController,or),Ir(_n._readableStreamController,fi)}Bt=!1,Xt?_r():hn&&$n()})},_closeSteps:function(or){Bt=!1;var zr=Wt?rn:an,fi=Wt?an:rn;zr||Wn(sn._readableStreamController),fi||Wn(_n._readableStreamController),or!==void 0&&(zr||Wr(sn._readableStreamController,or),!fi&&_n._readableStreamController._pendingPullIntos.length>0&&Lr(_n._readableStreamController,0)),zr&&fi||gt(void 0)},_errorSteps:function(){Bt=!1}})}function _r(){if(Bt)return Xt=!0,y(void 0);Bt=!0;var bn=yi(Je._readableStreamController);return bn===null?Mr():Ar(bn._view,!1),y(void 0)}function $n(){if(Bt)return hn=!0,y(void 0);Bt=!0;var bn=yi(dt._readableStreamController);return bn===null?Mr():Ar(bn._view,!0),y(void 0)}function yr(bn){if(an=!0,Me=bn,rn){var Wt=ht([Me,je]),sn=mr(te,Wt);gt(sn)}return wn}function Yn(bn){if(rn=!0,je=bn,an){var Wt=ht([Me,je]),sn=mr(te,Wt);gt(sn)}return wn}function Hr(){}return Je=Qi(Hr,_r,yr),dt=Qi(Hr,$n,Yn),Pr(Tt),[Je,dt]}function ss(te,Me){Ee(te,Me);var je=te,Je=je==null?void 0:je.autoAllocateChunkSize,dt=je==null?void 0:je.cancel,gt=je==null?void 0:je.pull,Tt=je==null?void 0:je.start,Bt=je==null?void 0:je.type;return{autoAllocateChunkSize:Je===void 0?void 0:_e(Je,Me+" has member 'autoAllocateChunkSize' that"),cancel:dt===void 0?void 0:Tn(dt,je,Me+" has member 'cancel' that"),pull:gt===void 0?void 0:On(gt,je,Me+" has member 'pull' that"),start:Tt===void 0?void 0:ls(Tt,je,Me+" has member 'start' that"),type:Bt===void 0?void 0:cs(Bt,Me+" has member 'type' that")}}function Tn(te,Me,je){return Pe(te,je),function(Je){return O(te,Me,[Je])}}function On(te,Me,je){return Pe(te,je),function(Je){return O(te,Me,[Je])}}function ls(te,Me,je){return Pe(te,je),function(Je){return F(te,Me,[Je])}}function cs(te,Me){if((te=""+te)!="bytes")throw new TypeError(Me+" '"+te+"' is not a valid enumeration value for ReadableStreamType");return te}function ga(te,Me){Ee(te,Me);var je=te==null?void 0:te.mode;return{mode:je===void 0?void 0:us(je,Me+" has member 'mode' that")}}function us(te,Me){if((te=""+te)!="byob")throw new TypeError(Me+" '"+te+"' is not a valid enumeration value for ReadableStreamReaderMode");return te}function jo(te,Me){Ee(te,Me);var je=te==null?void 0:te.preventCancel;return{preventCancel:Boolean(je)}}function Bi(te,Me){Ee(te,Me);var je=te==null?void 0:te.preventAbort,Je=te==null?void 0:te.preventCancel,dt=te==null?void 0:te.preventClose,gt=te==null?void 0:te.signal;return gt!==void 0&&Wo(gt,Me+" has member 'signal' that"),{preventAbort:Boolean(je),preventCancel:Boolean(Je),preventClose:Boolean(dt),signal:gt}}function Wo(te,Me){if(!Un(te))throw new TypeError(Me+" is not an AbortSignal.")}function Ri(te,Me){Ee(te,Me);var je=te==null?void 0:te.readable;Ne(je,"readable","ReadableWritablePair"),be(je,Me+" has member 'readable' that");var Je=te==null?void 0:te.writable;return Ne(Je,"writable","ReadableWritablePair"),Bo(Je,Me+" has member 'writable' that"),{readable:je,writable:Je}}Object.defineProperties(Fr.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(Fr.prototype,n.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});var ir=function(){function te(Me,je){Me===void 0&&(Me={}),je===void 0&&(je={}),Me===void 0?Me=null:$e(Me,"First parameter");var Je=xi(je,"Second parameter"),dt=ss(Me,"First parameter");if(Kr(this),dt.type==="bytes"){if(Je.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");Ya(this,dt,dr(Je,0))}else{var gt=zi(Je);Co(this,dt,dr(Je,1),gt)}}return Object.defineProperty(te.prototype,"locked",{get:function(){if(!Yr(this))throw Sr("locked");return Xr(this)},enumerable:!1,configurable:!0}),te.prototype.cancel=function(Me){return Me===void 0&&(Me=void 0),Yr(this)?Xr(this)?w(new TypeError("Cannot cancel a stream that already has a reader")):mr(this,Me):w(Sr("cancel"))},te.prototype.getReader=function(Me){if(Me===void 0&&(Me=void 0),!Yr(this))throw Sr("getReader");return ga(Me,"First parameter").mode===void 0?Ae(this):yn(this)},te.prototype.pipeThrough=function(Me,je){if(je===void 0&&(je={}),!Yr(this))throw Sr("pipeThrough");Oe(Me,1,"pipeThrough");var Je=Ri(Me,"First parameter"),dt=Bi(je,"Second parameter");if(Xr(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(pn(Je.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return M(Ho(this,Je.writable,dt.preventClose,dt.preventAbort,dt.preventCancel,dt.signal)),Je.readable},te.prototype.pipeTo=function(Me,je){if(je===void 0&&(je={}),!Yr(this))return w(Sr("pipeTo"));if(Me===void 0)return w("Parameter 1 is required in 'pipeTo'.");if(!qr(Me))return w(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var Je;try{Je=Bi(je,"Second parameter")}catch(dt){return w(dt)}return Xr(this)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):pn(Me)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Ho(this,Me,Je.preventClose,Je.preventAbort,Je.preventCancel,Je.signal)},te.prototype.tee=function(){if(!Yr(this))throw Sr("tee");return ht(os(this))},te.prototype.values=function(Me){if(Me===void 0&&(Me=void 0),!Yr(this))throw Sr("values");return mt(this,jo(Me,"First parameter").preventCancel)},te}();function ci(te,Me,je,Je,dt){Je===void 0&&(Je=1),dt===void 0&&(dt=function(){return 1});var gt=Object.create(ir.prototype);return Kr(gt),Ji(gt,Object.create(Fr.prototype),te,Me,je,Je,dt),gt}function Qi(te,Me,je){var Je=Object.create(ir.prototype);return Kr(Je),Qo(Je,Object.create(Et.prototype),te,Me,je,0,void 0),Je}function Kr(te){te._state="readable",te._reader=void 0,te._storedError=void 0,te._disturbed=!1}function Yr(te){return!!u(te)&&!!Object.prototype.hasOwnProperty.call(te,"_readableStreamController")&&te instanceof ir}function Xr(te){return te._reader!==void 0}function mr(te,Me){if(te._disturbed=!0,te._state==="closed")return y(void 0);if(te._state==="errored")return w(te._storedError);eo(te);var je=te._reader;return je!==void 0&&ii(je)&&(je._readIntoRequests.forEach(function(Je){Je._closeSteps(void 0)}),je._readIntoRequests=new D),T(te._readableStreamController[Y](Me),r)}function eo(te){te._state="closed";var Me=te._reader;Me!==void 0&&(ne(Me),Ze(Me)&&(Me._readRequests.forEach(function(je){je._closeSteps()}),Me._readRequests=new D))}function ya(te,Me){te._state="errored",te._storedError=Me;var je=te._reader;je!==void 0&&(we(je,Me),Ze(je)?(je._readRequests.forEach(function(Je){Je._errorSteps(Me)}),je._readRequests=new D):(je._readIntoRequests.forEach(function(Je){Je._errorSteps(Me)}),je._readIntoRequests=new D))}function Sr(te){return new TypeError("ReadableStream.prototype."+te+" can only be used on a ReadableStream")}function Ii(te,Me){Ee(te,Me);var je=te==null?void 0:te.highWaterMark;return Ne(je,"highWaterMark","QueuingStrategyInit"),{highWaterMark:J(je)}}Object.defineProperties(ir.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(ir.prototype,n.toStringTag,{value:"ReadableStream",configurable:!0}),_typeof$1(n.asyncIterator)==="symbol"&&Object.defineProperty(ir.prototype,n.asyncIterator,{value:ir.prototype.values,writable:!0,configurable:!0});var Uo=function(te){return te.byteLength};try{Object.defineProperty(Uo,"name",{value:"size",configurable:!0})}catch{}var Ge=function(){function te(Me){Oe(Me,1,"ByteLengthQueuingStrategy"),Me=Ii(Me,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=Me.highWaterMark}return Object.defineProperty(te.prototype,"highWaterMark",{get:function(){if(!to(this))throw ui("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(te.prototype,"size",{get:function(){if(!to(this))throw ui("size");return Uo},enumerable:!1,configurable:!0}),te}();function ui(te){return new TypeError("ByteLengthQueuingStrategy.prototype."+te+" can only be used on a ByteLengthQueuingStrategy")}function to(te){return!!u(te)&&!!Object.prototype.hasOwnProperty.call(te,"_byteLengthQueuingStrategyHighWaterMark")&&te instanceof Ge}Object.defineProperties(Ge.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(Ge.prototype,n.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});var Gn=function(){return 1};try{Object.defineProperty(Gn,"name",{value:"size",configurable:!0})}catch{}var Yt=function(){function te(Me){Oe(Me,1,"CountQueuingStrategy"),Me=Ii(Me,"First parameter"),this._countQueuingStrategyHighWaterMark=Me.highWaterMark}return Object.defineProperty(te.prototype,"highWaterMark",{get:function(){if(!Er(this))throw Zr("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(te.prototype,"size",{get:function(){if(!Er(this))throw Zr("size");return Gn},enumerable:!1,configurable:!0}),te}();function Zr(te){return new TypeError("CountQueuingStrategy.prototype."+te+" can only be used on a CountQueuingStrategy")}function Er(te){return!!u(te)&&!!Object.prototype.hasOwnProperty.call(te,"_countQueuingStrategyHighWaterMark")&&te instanceof Yt}function Or(te,Me){Ee(te,Me);var je=te==null?void 0:te.flush,Je=te==null?void 0:te.readableType,dt=te==null?void 0:te.start,gt=te==null?void 0:te.transform,Tt=te==null?void 0:te.writableType;return{flush:je===void 0?void 0:di(je,te,Me+" has member 'flush' that"),readableType:Je,start:dt===void 0?void 0:gr(dt,te,Me+" has member 'start' that"),transform:gt===void 0?void 0:ba(gt,te,Me+" has member 'transform' that"),writableType:Tt}}function di(te,Me,je){return Pe(te,je),function(Je){return O(te,Me,[Je])}}function gr(te,Me,je){return Pe(te,je),function(Je){return F(te,Me,[Je])}}function ba(te,Me,je){return Pe(te,je),function(Je,dt){return O(te,Me,[Je,dt])}}Object.defineProperties(Yt.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(Yt.prototype,n.toStringTag,{value:"CountQueuingStrategy",configurable:!0});var no=function(){function te(Me,je,Je){Me===void 0&&(Me={}),je===void 0&&(je={}),Je===void 0&&(Je={}),Me===void 0&&(Me=null);var dt=xi(je,"Second parameter"),gt=xi(Je,"Third parameter"),Tt=Or(Me,"First parameter");if(Tt.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(Tt.writableType!==void 0)throw new RangeError("Invalid writableType specified");var Bt,Xt=dr(gt,0),hn=zi(gt),an=dr(dt,1),rn=zi(dt);ds(this,g(function(wn){Bt=wn}),an,rn,Xt,hn),qo(this,Tt),Tt.start!==void 0?Bt(Tt.start(this._transformStreamController)):Bt(void 0)}return Object.defineProperty(te.prototype,"readable",{get:function(){if(!wa(this))throw Ln("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(te.prototype,"writable",{get:function(){if(!wa(this))throw Ln("writable");return this._writable},enumerable:!1,configurable:!0}),te}();function ds(te,Me,je,Je,dt,gt){function Tt(){return Me}function Bt(wn){return ei(te,wn)}function Xt(wn){return Ca(te,wn)}function hn(){return hs(te)}function an(){return ko(te)}function rn(wn){return Jr(te,wn),y(void 0)}te._writable=Ur(Tt,Bt,hn,Xt,je,Je),te._readable=ci(Tt,an,rn,dt,gt),te._backpressure=void 0,te._backpressureChangePromise=void 0,te._backpressureChangePromise_resolve=void 0,hi(te,!0),te._transformStreamController=void 0}function wa(te){return!!u(te)&&!!Object.prototype.hasOwnProperty.call(te,"_transformStreamController")&&te instanceof no}function Li(te,Me){vr(te._readable._readableStreamController,Me),Jr(te,Me)}function Jr(te,Me){Qr(te._transformStreamController),_t(te._writable._writableStreamController,Me),te._backpressure&&hi(te,!1)}function hi(te,Me){te._backpressureChangePromise!==void 0&&te._backpressureChangePromise_resolve(),te._backpressureChangePromise=g(function(je){te._backpressureChangePromise_resolve=je}),te._backpressure=Me}Object.defineProperties(no.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(no.prototype,n.toStringTag,{value:"TransformStream",configurable:!0});var ro=function(){function te(){throw new TypeError("Illegal constructor")}return Object.defineProperty(te.prototype,"desiredSize",{get:function(){if(!io(this))throw ao("desiredSize");return zo(this._controlledTransformStream._readable._readableStreamController)},enumerable:!1,configurable:!0}),te.prototype.enqueue=function(Me){if(Me===void 0&&(Me=void 0),!io(this))throw ao("enqueue");Kn(this,Me)},te.prototype.error=function(Me){if(Me===void 0&&(Me=void 0),!io(this))throw ao("error");xa(this,Me)},te.prototype.terminate=function(){if(!io(this))throw ao("terminate");oo(this)},te}();function io(te){return!!u(te)&&!!Object.prototype.hasOwnProperty.call(te,"_controlledTransformStream")&&te instanceof ro}function Vr(te,Me,je,Je){Me._controlledTransformStream=te,te._transformStreamController=Me,Me._transformAlgorithm=je,Me._flushAlgorithm=Je}function qo(te,Me){var je=Object.create(ro.prototype),Je=function(gt){try{return Kn(je,gt),y(void 0)}catch(Tt){return w(Tt)}},dt=function(){return y(void 0)};Me.transform!==void 0&&(Je=function(gt){return Me.transform(gt,je)}),Me.flush!==void 0&&(dt=function(){return Me.flush(je)}),Vr(te,je,Je,dt)}function Qr(te){te._transformAlgorithm=void 0,te._flushAlgorithm=void 0}function Kn(te,Me){var je=te._controlledTransformStream,Je=je._readable._readableStreamController;if(!Ti(Je))throw new TypeError("Readable side is not in a state that permits enqueue");try{kr(Je,Me)}catch(dt){throw Jr(je,dt),je._readable._storedError}is(Je)!==je._backpressure&&hi(je,!0)}function xa(te,Me){Li(te._controlledTransformStream,Me)}function Go(te,Me){return T(te._transformAlgorithm(Me),void 0,function(je){throw Li(te._controlledTransformStream,je),je})}function oo(te){var Me=te._controlledTransformStream;Dr(Me._readable._readableStreamController),Jr(Me,new TypeError("TransformStream terminated"))}function ei(te,Me){var je=te._transformStreamController;return te._backpressure?T(te._backpressureChangePromise,function(){var Je=te._writable;if(Je._state==="erroring")throw Je._storedError;return Go(je,Me)}):Go(je,Me)}function Ca(te,Me){return Li(te,Me),y(void 0)}function hs(te){var Me=te._readable,je=te._transformStreamController,Je=je._flushAlgorithm();return Qr(je),T(Je,function(){if(Me._state==="errored")throw Me._storedError;Dr(Me._readableStreamController)},function(dt){throw Li(te,dt),Me._storedError})}function ko(te){return hi(te,!1),te._backpressureChangePromise}function ao(te){return new TypeError("TransformStreamDefaultController.prototype."+te+" can only be used on a TransformStreamDefaultController")}function Ln(te){return new TypeError("TransformStream.prototype."+te+" can only be used on a TransformStream")}Object.defineProperties(ro.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(ro.prototype,n.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),e.ByteLengthQueuingStrategy=Ge,e.CountQueuingStrategy=Yt,e.ReadableByteStreamController=Et,e.ReadableStream=ir,e.ReadableStreamBYOBReader=bi,e.ReadableStreamBYOBRequest=lt,e.ReadableStreamDefaultController=Fr,e.ReadableStreamDefaultReader=He,e.TransformStream=no,e.TransformStreamDefaultController=ro,e.WritableStream=ji,e.WritableStreamDefaultController=ai,e.WritableStreamDefaultWriter=Si,Object.defineProperty(e,"__esModule",{value:!0})}(ponyfillExports)),ponyfillExports}(function(module,exports){var factory;factory=function(){return function(){var __webpack_modules__=[,function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.VerbosityLevel=n.Util=n.UnknownErrorException=n.UnexpectedResponseException=n.TextRenderingMode=n.RenderingIntentFlag=n.PermissionFlag=n.PasswordResponses=n.PasswordException=n.PageActionEventType=n.OPS=n.MissingPDFException=n.MAX_IMAGE_SIZE_TO_CACHE=n.LINE_FACTOR=n.LINE_DESCENT_FACTOR=n.InvalidPDFException=n.ImageKind=n.IDENTITY_MATRIX=n.FormatError=n.FeatureTest=n.FONT_IDENTITY_MATRIX=n.DocumentActionEventType=n.CMapCompressionType=n.BaseException=n.BASELINE_FACTOR=n.AnnotationType=n.AnnotationStateModelType=n.AnnotationReviewState=n.AnnotationReplyType=n.AnnotationMode=n.AnnotationMarkedState=n.AnnotationFlag=n.AnnotationFieldFlag=n.AnnotationEditorType=n.AnnotationEditorPrefix=n.AnnotationEditorParamsType=n.AnnotationBorderStyleType=n.AnnotationActionEventType=n.AbortException=void 0,n.assert=function(O,N){O||d(N)},n.bytesToString=function(O){_typeof$1(O)==="object"&&O!==null&&O.length!==void 0||d("Invalid argument for bytesToString");var N=O.length,D=8192;if(N<D)return String.fromCharCode.apply(null,O);for(var X=[],U=0;U<N;U+=D){var Z=Math.min(U+D,N),j=O.subarray(U,Z);X.push(String.fromCharCode.apply(null,j))}return X.join("")},n.createPromiseCapability=function(){var O=Object.create(null),N=!1;return Object.defineProperty(O,"settled",{get:function(){return N}}),O.promise=new Promise(function(D,X){O.resolve=function(U){N=!0,D(U)},O.reject=function(U){N=!0,X(U)}}),O},n.createValidAbsoluteUrl=function(O){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!O)return null;try{if(D&&typeof O=="string"){if(D.addDefaultProtocol&&O.startsWith("www.")){var X=O.match(/\./g);X&&X.length>=2&&(O="http://".concat(O))}if(D.tryConvertEncoding)try{O=F(O)}catch{}}var U=N?new URL(O,N):new URL(O);if(function(Z){if(!Z)return!1;switch(Z.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(U))return U}catch{}return null},n.getModificationDate=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date;return[O.getUTCFullYear().toString(),(O.getUTCMonth()+1).toString().padStart(2,"0"),O.getUTCDate().toString().padStart(2,"0"),O.getUTCHours().toString().padStart(2,"0"),O.getUTCMinutes().toString().padStart(2,"0"),O.getUTCSeconds().toString().padStart(2,"0")].join("")},n.getVerbosityLevel=function(){return s},n.info=function(O){s>=o.INFOS&&console.log("Info: ".concat(O))},n.isArrayBuffer=function(O){return _typeof$1(O)==="object"&&O!==null&&O.byteLength!==void 0},n.isArrayEqual=function(O,N){if(O.length!==N.length)return!1;for(var D=0,X=O.length;D<X;D++)if(O[D]!==N[D])return!1;return!0},n.objectFromMap=function(O){var N,D=Object.create(null),X=_createForOfIteratorHelper(O);try{for(X.s();!(N=X.n()).done;){var U=_slicedToArray(N.value,2),Z=U[0],j=U[1];D[Z]=j}}catch(Q){X.e(Q)}finally{X.f()}return D},n.objectSize=function(O){return Object.keys(O).length},n.setVerbosityLevel=function(O){Number.isInteger(O)&&(s=O)},n.shadow=f,n.string32=function(O){return String.fromCharCode(O>>24&255,O>>16&255,O>>8&255,255&O)},n.stringToBytes=S,n.stringToPDFString=function(O){var N;if(O[0]>="\xEF"&&(O[0]==="\xFE"&&O[1]==="\xFF"?N="utf-16be":O[0]==="\xFF"&&O[1]==="\xFE"?N="utf-16le":O[0]==="\xEF"&&O[1]==="\xBB"&&O[2]==="\xBF"&&(N="utf-8"),N))try{var D=new TextDecoder(N,{fatal:!0}),X=S(O);return D.decode(X)}catch(ve){u('stringToPDFString: "'.concat(ve,'".'))}for(var U=[],Z=0,j=O.length;Z<j;Z++){var Q=I[O.charCodeAt(Z)];U.push(Q?String.fromCharCode(Q):O.charAt(Z))}return U.join("")},n.stringToUTF8String=F,n.unreachable=d,n.utf8StringToString=function(O){return unescape(encodeURIComponent(O))},n.warn=u,globalThis._pdfjsCompatibilityChecked||(globalThis._pdfjsCompatibilityChecked=!0,r(2)),n.IDENTITY_MATRIX=[1,0,0,1,0,0],n.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],n.MAX_IMAGE_SIZE_TO_CACHE=1e7,n.LINE_FACTOR=1.35,n.LINE_DESCENT_FACTOR=.35,n.BASELINE_FACTOR=.25925925925925924,n.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},n.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},n.AnnotationEditorPrefix="pdfjs_internal_editor_",n.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15},n.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13},n.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},n.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},n.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},n.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},n.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},n.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},n.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},n.AnnotationReplyType={GROUP:"Group",REPLY:"R"},n.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},n.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},n.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},n.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},n.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},n.PageActionEventType={O:"PageOpen",C:"PageClose"};var o={ERRORS:0,WARNINGS:1,INFOS:5};n.VerbosityLevel=o,n.CMapCompressionType={NONE:0,BINARY:1},n.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},n.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var s=o.WARNINGS;function u(O){s>=o.WARNINGS&&console.log("Warning: ".concat(O))}function d(O){throw new Error(O)}function f(O,N,D){var X=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return Object.defineProperty(O,N,{value:D,enumerable:!X,configurable:!0,writable:!1}),D}var v=function(){function O(N,D){this.constructor===O&&d("Cannot initialize BaseException."),this.message=N,this.name=D}return O.prototype=new Error,O.constructor=O,O}();n.BaseException=v;var m=function(O){_inherits(D,O);var N=_createSuper(D);function D(X,U){var Z;return _classCallCheck(this,D),(Z=N.call(this,X,"PasswordException")).code=U,Z}return _createClass(D)}(v);n.PasswordException=m;var _=function(O){_inherits(D,O);var N=_createSuper(D);function D(X,U){var Z;return _classCallCheck(this,D),(Z=N.call(this,X,"UnknownErrorException")).details=U,Z}return _createClass(D)}(v);n.UnknownErrorException=_;var g=function(O){_inherits(D,O);var N=_createSuper(D);function D(X){return _classCallCheck(this,D),N.call(this,X,"InvalidPDFException")}return _createClass(D)}(v);n.InvalidPDFException=g;var y=function(O){_inherits(D,O);var N=_createSuper(D);function D(X){return _classCallCheck(this,D),N.call(this,X,"MissingPDFException")}return _createClass(D)}(v);n.MissingPDFException=y;var w=function(O){_inherits(D,O);var N=_createSuper(D);function D(X,U){var Z;return _classCallCheck(this,D),(Z=N.call(this,X,"UnexpectedResponseException")).status=U,Z}return _createClass(D)}(v);n.UnexpectedResponseException=w;var x=function(O){_inherits(D,O);var N=_createSuper(D);function D(X){return _classCallCheck(this,D),N.call(this,X,"FormatError")}return _createClass(D)}(v);n.FormatError=x;var k=function(O){_inherits(D,O);var N=_createSuper(D);function D(X){return _classCallCheck(this,D),N.call(this,X,"AbortException")}return _createClass(D)}(v);function S(O){typeof O!="string"&&d("Invalid argument for stringToBytes");for(var N=O.length,D=new Uint8Array(N),X=0;X<N;++X)D[X]=255&O.charCodeAt(X);return D}n.AbortException=k;var E=function(){function O(){_classCallCheck(this,O)}return _createClass(O,null,[{key:"isLittleEndian",get:function(){return f(this,"isLittleEndian",((N=new Uint8Array(4))[0]=1,new Uint32Array(N.buffer,0,1)[0]===1));var N}},{key:"isEvalSupported",get:function(){return f(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}},{key:"isOffscreenCanvasSupported",get:function(){return f(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}},{key:"platform",get:function(){return typeof navigator>"u"?f(this,"platform",{isWin:!1,isMac:!1}):f(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}]),O}();n.FeatureTest=E;var T=_toConsumableArray$1(Array(256).keys()).map(function(O){return O.toString(16).padStart(2,"0")}),M=function(){function O(){_classCallCheck(this,O)}return _createClass(O,null,[{key:"makeHexColor",value:function(N,D,X){return"#".concat(T[N]).concat(T[D]).concat(T[X])}},{key:"scaleMinMax",value:function(N,D){var X;N[0]?(N[0]<0&&(X=D[0],D[0]=D[1],D[1]=X),D[0]*=N[0],D[1]*=N[0],N[3]<0&&(X=D[2],D[2]=D[3],D[3]=X),D[2]*=N[3],D[3]*=N[3]):(X=D[0],D[0]=D[2],D[2]=X,X=D[1],D[1]=D[3],D[3]=X,N[1]<0&&(X=D[2],D[2]=D[3],D[3]=X),D[2]*=N[1],D[3]*=N[1],N[2]<0&&(X=D[0],D[0]=D[1],D[1]=X),D[0]*=N[2],D[1]*=N[2]),D[0]+=N[4],D[1]+=N[4],D[2]+=N[5],D[3]+=N[5]}},{key:"transform",value:function(N,D){return[N[0]*D[0]+N[2]*D[1],N[1]*D[0]+N[3]*D[1],N[0]*D[2]+N[2]*D[3],N[1]*D[2]+N[3]*D[3],N[0]*D[4]+N[2]*D[5]+N[4],N[1]*D[4]+N[3]*D[5]+N[5]]}},{key:"applyTransform",value:function(N,D){return[N[0]*D[0]+N[1]*D[2]+D[4],N[0]*D[1]+N[1]*D[3]+D[5]]}},{key:"applyInverseTransform",value:function(N,D){var X=D[0]*D[3]-D[1]*D[2];return[(N[0]*D[3]-N[1]*D[2]+D[2]*D[5]-D[4]*D[3])/X,(-N[0]*D[1]+N[1]*D[0]+D[4]*D[1]-D[5]*D[0])/X]}},{key:"getAxialAlignedBoundingBox",value:function(N,D){var X=O.applyTransform(N,D),U=O.applyTransform(N.slice(2,4),D),Z=O.applyTransform([N[0],N[3]],D),j=O.applyTransform([N[2],N[1]],D);return[Math.min(X[0],U[0],Z[0],j[0]),Math.min(X[1],U[1],Z[1],j[1]),Math.max(X[0],U[0],Z[0],j[0]),Math.max(X[1],U[1],Z[1],j[1])]}},{key:"inverseTransform",value:function(N){var D=N[0]*N[3]-N[1]*N[2];return[N[3]/D,-N[1]/D,-N[2]/D,N[0]/D,(N[2]*N[5]-N[4]*N[3])/D,(N[4]*N[1]-N[5]*N[0])/D]}},{key:"singularValueDecompose2dScale",value:function(N){var D=[N[0],N[2],N[1],N[3]],X=N[0]*D[0]+N[1]*D[2],U=N[0]*D[1]+N[1]*D[3],Z=N[2]*D[0]+N[3]*D[2],j=N[2]*D[1]+N[3]*D[3],Q=(X+j)/2,ve=Math.sqrt(Math.pow(X+j,2)-4*(X*j-Z*U))/2,Se=Q+ve||1,we=Q-ve||1;return[Math.sqrt(Se),Math.sqrt(we)]}},{key:"normalizeRect",value:function(N){var D=N.slice(0);return N[0]>N[2]&&(D[0]=N[2],D[2]=N[0]),N[1]>N[3]&&(D[1]=N[3],D[3]=N[1]),D}},{key:"intersect",value:function(N,D){var X=Math.max(Math.min(N[0],N[2]),Math.min(D[0],D[2])),U=Math.min(Math.max(N[0],N[2]),Math.max(D[0],D[2]));if(X>U)return null;var Z=Math.max(Math.min(N[1],N[3]),Math.min(D[1],D[3])),j=Math.min(Math.max(N[1],N[3]),Math.max(D[1],D[3]));return Z>j?null:[X,Z,U,j]}},{key:"bezierBoundingBox",value:function(N,D,X,U,Z,j,Q,ve){for(var Se,we,oe,ne,q,H,Y,le,Ce=[],Te=[[],[]],ke=0;ke<2;++ke)if(ke===0?(we=6*N-12*X+6*Z,Se=-3*N+9*X-9*Z+3*Q,oe=3*X-3*N):(we=6*D-12*U+6*j,Se=-3*D+9*U-9*j+3*ve,oe=3*U-3*D),Math.abs(Se)<1e-12){if(Math.abs(we)<1e-12)continue;0<(ne=-oe/we)&&ne<1&&Ce.push(ne)}else Y=we*we-4*oe*Se,le=Math.sqrt(Y),Y<0||(0<(q=(-we+le)/(2*Se))&&q<1&&Ce.push(q),0<(H=(-we-le)/(2*Se))&&H<1&&Ce.push(H));for(var Ee,Pe=Ce.length,Be=Pe;Pe--;)Ee=1-(ne=Ce[Pe]),Te[0][Pe]=Ee*Ee*Ee*N+3*Ee*Ee*ne*X+3*Ee*ne*ne*Z+ne*ne*ne*Q,Te[1][Pe]=Ee*Ee*Ee*D+3*Ee*Ee*ne*U+3*Ee*ne*ne*j+ne*ne*ne*ve;return Te[0][Be]=N,Te[1][Be]=D,Te[0][Be+1]=Q,Te[1][Be+1]=ve,Te[0].length=Te[1].length=Be+2,[Math.min.apply(Math,_toConsumableArray$1(Te[0])),Math.min.apply(Math,_toConsumableArray$1(Te[1])),Math.max.apply(Math,_toConsumableArray$1(Te[0])),Math.max.apply(Math,_toConsumableArray$1(Te[1]))]}}]),O}();n.Util=M;var I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function F(O){return decodeURIComponent(escape(O))}},function(e,n,r){var o=r(3);!globalThis.DOMMatrix&&o.isNodeJS&&(globalThis.DOMMatrix=require$$0.DOMMatrix),function(){if(!globalThis.Path2D&&o.isNodeJS){var s=require$$0.CanvasRenderingContext2D,u=requirePath2dPolyfill_esm().polyfillPath2D;globalThis.CanvasRenderingContext2D=s,u(globalThis)}}(),!globalThis.ReadableStream&&o.isNodeJS&&(globalThis.ReadableStream=requirePonyfill().ReadableStream),Array.prototype.at||r(4),Uint8Array.prototype.at||r(78),globalThis.structuredClone||r(90)},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNodeJS=void 0;var r=!((typeof process>"u"?"undefined":_typeof$1(process))!=="object"||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&process.type!=="browser");n.isNodeJS=r},function(e,n,r){r(5);var o=r(77);e.exports=o("Array","at")},function(e,n,r){var o=r(6),s=r(43),u=r(67),d=r(65),f=r(72);o({target:"Array",proto:!0},{at:function(v){var m=s(this),_=u(m),g=d(v),y=g>=0?g:_+g;return y<0||y>=_?void 0:m[y]}}),f("at")},function(e,n,r){var o=r(7),s=r(8).f,u=r(47),d=r(51),f=r(41),v=r(59),m=r(71);e.exports=function(_,g){var y,w,x,k,S,E=_.target,T=_.global,M=_.stat;if(y=T?o:M?o[E]||f(E,{}):(o[E]||{}).prototype)for(w in g){if(k=g[w],x=_.dontCallGetSet?(S=s(y,w))&&S.value:y[w],!m(T?w:E+(M?".":"#")+w,_.forced)&&x!==void 0){if(_typeof$1(k)==_typeof$1(x))continue;v(k,x)}(_.sham||x&&x.sham)&&u(k,"sham",!0),d(y,w,k,_)}}},function(e){var n=function(r){return r&&r.Math==Math&&r};e.exports=n((typeof globalThis>"u"?"undefined":_typeof$1(globalThis))=="object"&&globalThis)||n((typeof window>"u"?"undefined":_typeof$1(window))=="object"&&window)||n((typeof self>"u"?"undefined":_typeof$1(self))=="object"&&self)||n(_typeof$1(commonjsGlobal)=="object"&&commonjsGlobal)||function(){return this}()||Function("return this")()},function(e,n,r){var o=r(9),s=r(11),u=r(13),d=r(14),f=r(15),v=r(21),m=r(42),_=r(45),g=Object.getOwnPropertyDescriptor;n.f=o?g:function(y,w){if(y=f(y),w=v(w),_)try{return g(y,w)}catch{}if(m(y,w))return d(!s(u.f,y,w),y[w])}},function(e,n,r){var o=r(10);e.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(e){e.exports=function(n){try{return!!n()}catch{return!0}}},function(e,n,r){var o=r(12),s=Function.prototype.call;e.exports=o?s.bind(s):function(){return s.apply(s,arguments)}},function(e,n,r){var o=r(10);e.exports=!o(function(){var s=function(){}.bind();return typeof s!="function"||s.hasOwnProperty("prototype")})},function(e,n){var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,s=o&&!r.call({1:2},1);n.f=s?function(u){var d=o(this,u);return!!d&&d.enumerable}:r},function(e){e.exports=function(n,r){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:r}}},function(e,n,r){var o=r(16),s=r(19);e.exports=function(u){return o(s(u))}},function(e,n,r){var o=r(17),s=r(10),u=r(18),d=Object,f=o("".split);e.exports=s(function(){return!d("z").propertyIsEnumerable(0)})?function(v){return u(v)=="String"?f(v,""):d(v)}:d},function(e,n,r){var o=r(12),s=Function.prototype,u=s.call,d=o&&s.bind.bind(u,u);e.exports=o?d:function(f){return function(){return u.apply(f,arguments)}}},function(e,n,r){var o=r(17),s=o({}.toString),u=o("".slice);e.exports=function(d){return u(s(d),8,-1)}},function(e,n,r){var o=r(20),s=TypeError;e.exports=function(u){if(o(u))throw s("Can't call method on "+u);return u}},function(e){e.exports=function(n){return n==null}},function(e,n,r){var o=r(22),s=r(26);e.exports=function(u){var d=o(u,"string");return s(d)?d:d+""}},function(e,n,r){var o=r(11),s=r(23),u=r(26),d=r(33),f=r(36),v=r(37),m=TypeError,_=v("toPrimitive");e.exports=function(g,y){if(!s(g)||u(g))return g;var w,x=d(g,_);if(x){if(y===void 0&&(y="default"),w=o(x,g,y),!s(w)||u(w))return w;throw m("Can't convert object to primitive value")}return y===void 0&&(y="number"),f(g,y)}},function(e,n,r){var o=r(24),s=r(25),u=s.all;e.exports=s.IS_HTMLDDA?function(d){return _typeof$1(d)=="object"?d!==null:o(d)||d===u}:function(d){return _typeof$1(d)=="object"?d!==null:o(d)}},function(e,n,r){var o=r(25),s=o.all;e.exports=o.IS_HTMLDDA?function(u){return typeof u=="function"||u===s}:function(u){return typeof u=="function"}},function(e){var n=(typeof document>"u"?"undefined":_typeof$1(document))=="object"&&document.all,r=n===void 0&&n!==void 0;e.exports={all:n,IS_HTMLDDA:r}},function(e,n,r){var o=r(27),s=r(24),u=r(28),d=r(29),f=Object;e.exports=d?function(v){return _typeof$1(v)=="symbol"}:function(v){var m=o("Symbol");return s(m)&&u(m.prototype,f(v))}},function(e,n,r){var o=r(7),s=r(24);e.exports=function(u,d){return arguments.length<2?(f=o[u],s(f)?f:void 0):o[u]&&o[u][d];var f}},function(e,n,r){var o=r(17);e.exports=o({}.isPrototypeOf)},function(e,n,r){var o=r(30);e.exports=o&&!Symbol.sham&&_typeof$1(Symbol.iterator)=="symbol"},function(e,n,r){var o=r(31),s=r(10);e.exports=!!Object.getOwnPropertySymbols&&!s(function(){var u=Symbol();return!String(u)||!(Object(u)instanceof Symbol)||!Symbol.sham&&o&&o<41})},function(e,n,r){var o,s,u=r(7),d=r(32),f=u.process,v=u.Deno,m=f&&f.versions||v&&v.version,_=m&&m.v8;_&&(s=(o=_.split("."))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!s&&d&&(!(o=d.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=d.match(/Chrome\/(\d+)/))&&(s=+o[1]),e.exports=s},function(e){e.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},function(e,n,r){var o=r(34),s=r(20);e.exports=function(u,d){var f=u[d];return s(f)?void 0:o(f)}},function(e,n,r){var o=r(24),s=r(35),u=TypeError;e.exports=function(d){if(o(d))return d;throw u(s(d)+" is not a function")}},function(e){var n=String;e.exports=function(r){try{return n(r)}catch{return"Object"}}},function(e,n,r){var o=r(11),s=r(24),u=r(23),d=TypeError;e.exports=function(f,v){var m,_;if(v==="string"&&s(m=f.toString)&&!u(_=o(m,f))||s(m=f.valueOf)&&!u(_=o(m,f))||v!=="string"&&s(m=f.toString)&&!u(_=o(m,f)))return _;throw d("Can't convert object to primitive value")}},function(e,n,r){var o=r(7),s=r(38),u=r(42),d=r(44),f=r(30),v=r(29),m=o.Symbol,_=s("wks"),g=v?m.for||m:m&&m.withoutSetter||d;e.exports=function(y){return u(_,y)||(_[y]=f&&u(m,y)?m[y]:g("Symbol."+y)),_[y]}},function(e,n,r){var o=r(39),s=r(40);(e.exports=function(u,d){return s[u]||(s[u]=d!==void 0?d:{})})("versions",[]).push({version:"3.29.1",mode:o?"pure":"global",copyright:"\xA9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(e){e.exports=!1},function(e,n,r){var o=r(7),s=r(41),u="__core-js_shared__",d=o[u]||s(u,{});e.exports=d},function(e,n,r){var o=r(7),s=Object.defineProperty;e.exports=function(u,d){try{s(o,u,{value:d,configurable:!0,writable:!0})}catch{o[u]=d}return d}},function(e,n,r){var o=r(17),s=r(43),u=o({}.hasOwnProperty);e.exports=Object.hasOwn||function(d,f){return u(s(d),f)}},function(e,n,r){var o=r(19),s=Object;e.exports=function(u){return s(o(u))}},function(e,n,r){var o=r(17),s=0,u=Math.random(),d=o(1 .toString);e.exports=function(f){return"Symbol("+(f===void 0?"":f)+")_"+d(++s+u,36)}},function(e,n,r){var o=r(9),s=r(10),u=r(46);e.exports=!o&&!s(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},function(e,n,r){var o=r(7),s=r(23),u=o.document,d=s(u)&&s(u.createElement);e.exports=function(f){return d?u.createElement(f):{}}},function(e,n,r){var o=r(9),s=r(48),u=r(14);e.exports=o?function(d,f,v){return s.f(d,f,u(1,v))}:function(d,f,v){return d[f]=v,d}},function(e,n,r){var o=r(9),s=r(45),u=r(49),d=r(50),f=r(21),v=TypeError,m=Object.defineProperty,_=Object.getOwnPropertyDescriptor,g="enumerable",y="configurable",w="writable";n.f=o?u?function(x,k,S){if(d(x),k=f(k),d(S),typeof x=="function"&&k==="prototype"&&"value"in S&&w in S&&!S[w]){var E=_(x,k);E&&E[w]&&(x[k]=S.value,S={configurable:y in S?S[y]:E[y],enumerable:g in S?S[g]:E[g],writable:!1})}return m(x,k,S)}:m:function(x,k,S){if(d(x),k=f(k),d(S),s)try{return m(x,k,S)}catch{}if("get"in S||"set"in S)throw v("Accessors not supported");return"value"in S&&(x[k]=S.value),x}},function(e,n,r){var o=r(9),s=r(10);e.exports=o&&s(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},function(e,n,r){var o=r(23),s=String,u=TypeError;e.exports=function(d){if(o(d))return d;throw u(s(d)+" is not an object")}},function(e,n,r){var o=r(24),s=r(48),u=r(52),d=r(41);e.exports=function(f,v,m,_){_||(_={});var g=_.enumerable,y=_.name!==void 0?_.name:v;if(o(m)&&u(m,y,_),_.global)g?f[v]=m:d(v,m);else{try{_.unsafe?f[v]&&(g=!0):delete f[v]}catch{}g?f[v]=m:s.f(f,v,{value:m,enumerable:!1,configurable:!_.nonConfigurable,writable:!_.nonWritable})}return f}},function(e,n,r){var o=r(17),s=r(10),u=r(24),d=r(42),f=r(9),v=r(53).CONFIGURABLE,m=r(54),_=r(55),g=_.enforce,y=_.get,w=String,x=Object.defineProperty,k=o("".slice),S=o("".replace),E=o([].join),T=f&&!s(function(){return x(function(){},"length",{value:8}).length!==8}),M=String(String).split("String"),I=e.exports=function(F,O,N){k(w(O),0,7)==="Symbol("&&(O="["+S(w(O),/^Symbol\(([^)]*)\)/,"$1")+"]"),N&&N.getter&&(O="get "+O),N&&N.setter&&(O="set "+O),(!d(F,"name")||v&&F.name!==O)&&(f?x(F,"name",{value:O,configurable:!0}):F.name=O),T&&N&&d(N,"arity")&&F.length!==N.arity&&x(F,"length",{value:N.arity});try{N&&d(N,"constructor")&&N.constructor?f&&x(F,"prototype",{writable:!1}):F.prototype&&(F.prototype=void 0)}catch{}var D=g(F);return d(D,"source")||(D.source=E(M,typeof O=="string"?O:"")),F};Function.prototype.toString=I(function(){return u(this)&&y(this).source||m(this)},"toString")},function(e,n,r){var o=r(9),s=r(42),u=Function.prototype,d=o&&Object.getOwnPropertyDescriptor,f=s(u,"name"),v=f&&function(){}.name==="something",m=f&&(!o||o&&d(u,"name").configurable);e.exports={EXISTS:f,PROPER:v,CONFIGURABLE:m}},function(e,n,r){var o=r(17),s=r(24),u=r(40),d=o(Function.toString);s(u.inspectSource)||(u.inspectSource=function(f){return d(f)}),e.exports=u.inspectSource},function(e,n,r){var o,s,u,d=r(56),f=r(7),v=r(23),m=r(47),_=r(42),g=r(40),y=r(57),w=r(58),x="Object already initialized",k=f.TypeError,S=f.WeakMap;if(d||g.state){var E=g.state||(g.state=new S);E.get=E.get,E.has=E.has,E.set=E.set,o=function(M,I){if(E.has(M))throw k(x);return I.facade=M,E.set(M,I),I},s=function(M){return E.get(M)||{}},u=function(M){return E.has(M)}}else{var T=y("state");w[T]=!0,o=function(M,I){if(_(M,T))throw k(x);return I.facade=M,m(M,T,I),I},s=function(M){return _(M,T)?M[T]:{}},u=function(M){return _(M,T)}}e.exports={set:o,get:s,has:u,enforce:function(M){return u(M)?s(M):o(M,{})},getterFor:function(M){return function(I){var F;if(!v(I)||(F=s(I)).type!==M)throw k("Incompatible receiver, "+M+" required");return F}}}},function(e,n,r){var o=r(7),s=r(24),u=o.WeakMap;e.exports=s(u)&&/native code/.test(String(u))},function(e,n,r){var o=r(38),s=r(44),u=o("keys");e.exports=function(d){return u[d]||(u[d]=s(d))}},function(e){e.exports={}},function(e,n,r){var o=r(42),s=r(60),u=r(8),d=r(48);e.exports=function(f,v,m){for(var _=s(v),g=d.f,y=u.f,w=0;w<_.length;w++){var x=_[w];o(f,x)||m&&o(m,x)||g(f,x,y(v,x))}}},function(e,n,r){var o=r(27),s=r(17),u=r(61),d=r(70),f=r(50),v=s([].concat);e.exports=o("Reflect","ownKeys")||function(m){var _=u.f(f(m)),g=d.f;return g?v(_,g(m)):_}},function(e,n,r){var o=r(62),s=r(69).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(u){return o(u,s)}},function(e,n,r){var o=r(17),s=r(42),u=r(15),d=r(63).indexOf,f=r(58),v=o([].push);e.exports=function(m,_){var g,y=u(m),w=0,x=[];for(g in y)!s(f,g)&&s(y,g)&&v(x,g);for(;_.length>w;)s(y,g=_[w++])&&(~d(x,g)||v(x,g));return x}},function(e,n,r){var o=r(15),s=r(64),u=r(67),d=function(f){return function(v,m,_){var g,y=o(v),w=u(y),x=s(_,w);if(f&&m!=m){for(;w>x;)if((g=y[x++])!=g)return!0}else for(;w>x;x++)if((f||x in y)&&y[x]===m)return f||x||0;return!f&&-1}};e.exports={includes:d(!0),indexOf:d(!1)}},function(e,n,r){var o=r(65),s=Math.max,u=Math.min;e.exports=function(d,f){var v=o(d);return v<0?s(v+f,0):u(v,f)}},function(e,n,r){var o=r(66);e.exports=function(s){var u=+s;return u!=u||u===0?0:o(u)}},function(e){var n=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(o){var s=+o;return(s>0?r:n)(s)}},function(e,n,r){var o=r(68);e.exports=function(s){return o(s.length)}},function(e,n,r){var o=r(65),s=Math.min;e.exports=function(u){return u>0?s(o(u),9007199254740991):0}},function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,n){n.f=Object.getOwnPropertySymbols},function(e,n,r){var o=r(10),s=r(24),u=/#|\.prototype\./,d=function(g,y){var w=v[f(g)];return w==_||w!=m&&(s(y)?o(y):!!y)},f=d.normalize=function(g){return String(g).replace(u,".").toLowerCase()},v=d.data={},m=d.NATIVE="N",_=d.POLYFILL="P";e.exports=d},function(e,n,r){var o=r(37),s=r(73),u=r(48).f,d=o("unscopables"),f=Array.prototype;f[d]==null&&u(f,d,{configurable:!0,value:s(null)}),e.exports=function(v){f[d][v]=!0}},function(e,n,r){var o,s=r(50),u=r(74),d=r(69),f=r(58),v=r(76),m=r(46),_=r(57),g="prototype",y="script",w=_("IE_PROTO"),x=function(){},k=function(T){return"<"+y+">"+T+"</"+y+">"},S=function(T){T.write(k("")),T.close();var M=T.parentWindow.Object;return T=null,M},E=function(){try{o=new ActiveXObject("htmlfile")}catch{}var T,M,I;E=typeof document<"u"?document.domain&&o?S(o):(M=m("iframe"),I="java"+y+":",M.style.display="none",v.appendChild(M),M.src=String(I),(T=M.contentWindow.document).open(),T.write(k("document.F=Object")),T.close(),T.F):S(o);for(var F=d.length;F--;)delete E[g][d[F]];return E()};f[w]=!0,e.exports=Object.create||function(T,M){var I;return T!==null?(x[g]=s(T),I=new x,x[g]=null,I[w]=T):I=E(),M===void 0?I:u.f(I,M)}},function(e,n,r){var o=r(9),s=r(49),u=r(48),d=r(50),f=r(15),v=r(75);n.f=o&&!s?Object.defineProperties:function(m,_){d(m);for(var g,y=f(_),w=v(_),x=w.length,k=0;x>k;)u.f(m,g=w[k++],y[g]);return m}},function(e,n,r){var o=r(62),s=r(69);e.exports=Object.keys||function(u){return o(u,s)}},function(e,n,r){var o=r(27);e.exports=o("document","documentElement")},function(e,n,r){var o=r(7),s=r(17);e.exports=function(u,d){return s(o[u].prototype[d])}},function(e,n,r){r(79)},function(e,n,r){var o=r(80),s=r(67),u=r(65),d=o.aTypedArray;(0,o.exportTypedArrayMethod)("at",function(f){var v=d(this),m=s(v),_=u(f),g=_>=0?_:m+_;return g<0||g>=m?void 0:v[g]})},function(e,n,r){var o,s,u,d=r(81),f=r(9),v=r(7),m=r(24),_=r(23),g=r(42),y=r(82),w=r(35),x=r(47),k=r(51),S=r(84),E=r(28),T=r(85),M=r(87),I=r(37),F=r(44),O=r(55),N=O.enforce,D=O.get,X=v.Int8Array,U=X&&X.prototype,Z=v.Uint8ClampedArray,j=Z&&Z.prototype,Q=X&&T(X),ve=U&&T(U),Se=Object.prototype,we=v.TypeError,oe=I("toStringTag"),ne=F("TYPED_ARRAY_TAG"),q="TypedArrayConstructor",H=d&&!!M&&y(v.opera)!=="Opera",Y=!1,le={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Ce={BigInt64Array:8,BigUint64Array:8},Te=function(ke){if(!_(ke))return!1;var Ee=y(ke);return g(le,Ee)||g(Ce,Ee)};for(o in le)(u=(s=v[o])&&s.prototype)?N(u)[q]=s:H=!1;for(o in Ce)(u=(s=v[o])&&s.prototype)&&(N(u)[q]=s);if((!H||!m(Q)||Q===Function.prototype)&&(Q=function(){throw we("Incorrect invocation")},H))for(o in le)v[o]&&M(v[o],Q);if((!H||!ve||ve===Se)&&(ve=Q.prototype,H))for(o in le)v[o]&&M(v[o].prototype,ve);if(H&&T(j)!==ve&&M(j,ve),f&&!g(ve,oe))for(o in Y=!0,S(ve,oe,{configurable:!0,get:function(){return _(this)?this[ne]:void 0}}),le)v[o]&&x(v[o],ne,o);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:H,TYPED_ARRAY_TAG:Y&&ne,aTypedArray:function(ke){if(Te(ke))return ke;throw we("Target is not a typed array")},aTypedArrayConstructor:function(ke){if(m(ke)&&(!M||E(Q,ke)))return ke;throw we(w(ke)+" is not a typed array constructor")},exportTypedArrayMethod:function(ke,Ee,Pe,Be){if(f){if(Pe)for(var $e in le){var Oe=v[$e];if(Oe&&g(Oe.prototype,ke))try{delete Oe.prototype[ke]}catch{try{Oe.prototype[ke]=Ee}catch{}}}ve[ke]&&!Pe||k(ve,ke,Pe?Ee:H&&U[ke]||Ee,Be)}},exportTypedArrayStaticMethod:function(ke,Ee,Pe){var Be,$e;if(f){if(M){if(Pe){for(Be in le)if(($e=v[Be])&&g($e,ke))try{delete $e[ke]}catch{}}if(Q[ke]&&!Pe)return;try{return k(Q,ke,Pe?Ee:H&&Q[ke]||Ee)}catch{}}for(Be in le)!($e=v[Be])||$e[ke]&&!Pe||k($e,ke,Ee)}},getTypedArrayConstructor:function ke(Ee){var Pe=T(Ee);if(_(Pe)){var Be=D(Pe);return Be&&g(Be,q)?Be[q]:ke(Pe)}},isView:function(ke){if(!_(ke))return!1;var Ee=y(ke);return Ee==="DataView"||g(le,Ee)||g(Ce,Ee)},isTypedArray:Te,TypedArray:Q,TypedArrayPrototype:ve}},function(e){e.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},function(e,n,r){var o=r(83),s=r(24),u=r(18),d=r(37)("toStringTag"),f=Object,v=u(function(){return arguments}())=="Arguments";e.exports=o?u:function(m){var _,g,y;return m===void 0?"Undefined":m===null?"Null":typeof(g=function(w,x){try{return w[x]}catch{}}(_=f(m),d))=="string"?g:v?u(_):(y=u(_))=="Object"&&s(_.callee)?"Arguments":y}},function(e,n,r){var o={};o[r(37)("toStringTag")]="z",e.exports=String(o)==="[object z]"},function(e,n,r){var o=r(52),s=r(48);e.exports=function(u,d,f){return f.get&&o(f.get,d,{getter:!0}),f.set&&o(f.set,d,{setter:!0}),s.f(u,d,f)}},function(e,n,r){var o=r(42),s=r(24),u=r(43),d=r(57),f=r(86),v=d("IE_PROTO"),m=Object,_=m.prototype;e.exports=f?m.getPrototypeOf:function(g){var y=u(g);if(o(y,v))return y[v];var w=y.constructor;return s(w)&&y instanceof w?w.prototype:y instanceof m?_:null}},function(e,n,r){var o=r(10);e.exports=!o(function(){function s(){}return s.prototype.constructor=null,Object.getPrototypeOf(new s)!==s.prototype})},function(e,n,r){var o=r(88),s=r(50),u=r(89);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d,f=!1,v={};try{(d=o(Object.prototype,"__proto__","set"))(v,[]),f=v instanceof Array}catch{}return function(m,_){return s(m),u(_),f?d(m,_):m.__proto__=_,m}}():void 0)},function(e,n,r){var o=r(17),s=r(34);e.exports=function(u,d,f){try{return o(s(Object.getOwnPropertyDescriptor(u,d)[f]))}catch{}}},function(e,n,r){var o=r(24),s=String,u=TypeError;e.exports=function(d){if(_typeof$1(d)=="object"||o(d))return d;throw u("Can't set "+s(d)+" as a prototype")}},function(e,n,r){r(91),r(98),r(100),r(123),r(125);var o=r(137);e.exports=o.structuredClone},function(e,n,r){var o=r(15),s=r(72),u=r(92),d=r(55),f=r(48).f,v=r(93),m=r(97),_=r(39),g=r(9),y="Array Iterator",w=d.set,x=d.getterFor(y);e.exports=v(Array,"Array",function(S,E){w(this,{type:y,target:o(S),index:0,kind:E})},function(){var S=x(this),E=S.target,T=S.kind,M=S.index++;return!E||M>=E.length?(S.target=void 0,m(void 0,!0)):m(T=="keys"?M:T=="values"?E[M]:[M,E[M]],!1)},"values");var k=u.Arguments=u.Array;if(s("keys"),s("values"),s("entries"),!_&&g&&k.name!=="values")try{f(k,"name",{value:"values"})}catch{}},function(e){e.exports={}},function(e,n,r){var o=r(6),s=r(11),u=r(39),d=r(53),f=r(24),v=r(94),m=r(85),_=r(87),g=r(96),y=r(47),w=r(51),x=r(37),k=r(92),S=r(95),E=d.PROPER,T=d.CONFIGURABLE,M=S.IteratorPrototype,I=S.BUGGY_SAFARI_ITERATORS,F=x("iterator"),O="keys",N="values",D="entries",X=function(){return this};e.exports=function(U,Z,j,Q,ve,Se,we){v(j,Z,Q);var oe,ne,q,H=function(Pe){if(Pe===ve&&ke)return ke;if(!I&&Pe in Ce)return Ce[Pe];switch(Pe){case O:case N:case D:return function(){return new j(this,Pe)}}return function(){return new j(this)}},Y=Z+" Iterator",le=!1,Ce=U.prototype,Te=Ce[F]||Ce["@@iterator"]||ve&&Ce[ve],ke=!I&&Te||H(ve),Ee=Z=="Array"&&Ce.entries||Te;if(Ee&&(oe=m(Ee.call(new U)))!==Object.prototype&&oe.next&&(u||m(oe)===M||(_?_(oe,M):f(oe[F])||w(oe,F,X)),g(oe,Y,!0,!0),u&&(k[Y]=X)),E&&ve==N&&Te&&Te.name!==N&&(!u&&T?y(Ce,"name",N):(le=!0,ke=function(){return s(Te,this)})),ve)if(ne={values:H(N),keys:Se?ke:H(O),entries:H(D)},we)for(q in ne)(I||le||!(q in Ce))&&w(Ce,q,ne[q]);else o({target:Z,proto:!0,forced:I||le},ne);return u&&!we||Ce[F]===ke||w(Ce,F,ke,{name:ve}),k[Z]=ke,ne}},function(e,n,r){var o=r(95).IteratorPrototype,s=r(73),u=r(14),d=r(96),f=r(92),v=function(){return this};e.exports=function(m,_,g,y){var w=_+" Iterator";return m.prototype=s(o,{next:u(+!y,g)}),d(m,w,!1,!0),f[w]=v,m}},function(e,n,r){var o,s,u,d=r(10),f=r(24),v=r(23),m=r(73),_=r(85),g=r(51),y=r(37),w=r(39),x=y("iterator"),k=!1;[].keys&&("next"in(u=[].keys())?(s=_(_(u)))!==Object.prototype&&(o=s):k=!0),!v(o)||d(function(){var S={};return o[x].call(S)!==S})?o={}:w&&(o=m(o)),f(o[x])||g(o,x,function(){return this}),e.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:k}},function(e,n,r){var o=r(48).f,s=r(42),u=r(37)("toStringTag");e.exports=function(d,f,v){d&&!v&&(d=d.prototype),d&&!s(d,u)&&o(d,u,{configurable:!0,value:f})}},function(e){e.exports=function(n,r){return{value:n,done:r}}},function(e,n,r){var o=r(83),s=r(51),u=r(99);o||s(Object.prototype,"toString",u,{unsafe:!0})},function(e,n,r){var o=r(83),s=r(82);e.exports=o?{}.toString:function(){return"[object "+s(this)+"]"}},function(e,n,r){r(101)},function(e,n,r){r(102)("Map",function(o){return function(){return o(this,arguments.length?arguments[0]:void 0)}},r(120))},function(e,n,r){var o=r(6),s=r(7),u=r(17),d=r(71),f=r(51),v=r(103),m=r(110),_=r(117),g=r(24),y=r(20),w=r(23),x=r(10),k=r(118),S=r(96),E=r(119);e.exports=function(T,M,I){var F=T.indexOf("Map")!==-1,O=T.indexOf("Weak")!==-1,N=F?"set":"add",D=s[T],X=D&&D.prototype,U=D,Z={},j=function(ne){var q=u(X[ne]);f(X,ne,ne=="add"?function(H){return q(this,H===0?0:H),this}:ne=="delete"?function(H){return!(O&&!w(H))&&q(this,H===0?0:H)}:ne=="get"?function(H){return O&&!w(H)?void 0:q(this,H===0?0:H)}:ne=="has"?function(H){return!(O&&!w(H))&&q(this,H===0?0:H)}:function(H,Y){return q(this,H===0?0:H,Y),this})};if(d(T,!g(D)||!(O||X.forEach&&!x(function(){new D().entries().next()}))))U=I.getConstructor(M,T,F,N),v.enable();else if(d(T,!0)){var Q=new U,ve=Q[N](O?{}:-0,1)!=Q,Se=x(function(){Q.has(1)}),we=k(function(ne){new D(ne)}),oe=!O&&x(function(){for(var ne=new D,q=5;q--;)ne[N](q,q);return!ne.has(-0)});we||((U=M(function(ne,q){_(ne,X);var H=E(new D,ne,U);return y(q)||m(q,H[N],{that:H,AS_ENTRIES:F}),H})).prototype=X,X.constructor=U),(Se||oe)&&(j("delete"),j("has"),F&&j("get")),(oe||ve)&&j(N),O&&X.clear&&delete X.clear}return Z[T]=U,o({global:!0,constructor:!0,forced:U!=D},Z),S(U,T),O||I.setStrong(U,T,F),U}},function(e,n,r){var o=r(6),s=r(17),u=r(58),d=r(23),f=r(42),v=r(48).f,m=r(61),_=r(104),g=r(107),y=r(44),w=r(109),x=!1,k=y("meta"),S=0,E=function(M){v(M,k,{value:{objectID:"O"+S++,weakData:{}}})},T=e.exports={enable:function(){T.enable=function(){},x=!0;var M=m.f,I=s([].splice),F={};F[k]=1,M(F).length&&(m.f=function(O){for(var N=M(O),D=0,X=N.length;D<X;D++)if(N[D]===k){I(N,D,1);break}return N},o({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:_.f}))},fastKey:function(M,I){if(!d(M))return _typeof$1(M)=="symbol"?M:(typeof M=="string"?"S":"P")+M;if(!f(M,k)){if(!g(M))return"F";if(!I)return"E";E(M)}return M[k].objectID},getWeakData:function(M,I){if(!f(M,k)){if(!g(M))return!0;if(!I)return!1;E(M)}return M[k].weakData},onFreeze:function(M){return w&&x&&g(M)&&!f(M,k)&&E(M),M}};u[k]=!0},function(e,n,r){var o=r(18),s=r(15),u=r(61).f,d=r(105),f=(typeof window>"u"?"undefined":_typeof$1(window))=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(v){return f&&o(v)=="Window"?function(m){try{return u(m)}catch{return d(f)}}(v):u(s(v))}},function(e,n,r){var o=r(64),s=r(67),u=r(106),d=Array,f=Math.max;e.exports=function(v,m,_){for(var g=s(v),y=o(m,g),w=o(_===void 0?g:_,g),x=d(f(w-y,0)),k=0;y<w;y++,k++)u(x,k,v[y]);return x.length=k,x}},function(e,n,r){var o=r(21),s=r(48),u=r(14);e.exports=function(d,f,v){var m=o(f);m in d?s.f(d,m,u(0,v)):d[m]=v}},function(e,n,r){var o=r(10),s=r(23),u=r(18),d=r(108),f=Object.isExtensible,v=o(function(){});e.exports=v||d?function(m){return!!s(m)&&(!d||u(m)!="ArrayBuffer")&&(!f||f(m))}:f},function(e,n,r){var o=r(10);e.exports=o(function(){if(typeof ArrayBuffer=="function"){var s=new ArrayBuffer(8);Object.isExtensible(s)&&Object.defineProperty(s,"a",{value:8})}})},function(e,n,r){var o=r(10);e.exports=!o(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(e,n,r){var o=r(111),s=r(11),u=r(50),d=r(35),f=r(113),v=r(67),m=r(28),_=r(114),g=r(115),y=r(116),w=TypeError,x=function(S,E){this.stopped=S,this.result=E},k=x.prototype;e.exports=function(S,E,T){var M,I,F,O,N,D,X,U=T&&T.that,Z=!(!T||!T.AS_ENTRIES),j=!(!T||!T.IS_RECORD),Q=!(!T||!T.IS_ITERATOR),ve=!(!T||!T.INTERRUPTED),Se=o(E,U),we=function(ne){return M&&y(M,"normal",ne),new x(!0,ne)},oe=function(ne){return Z?(u(ne),ve?Se(ne[0],ne[1],we):Se(ne[0],ne[1])):ve?Se(ne,we):Se(ne)};if(j)M=S.iterator;else if(Q)M=S;else{if(!(I=g(S)))throw w(d(S)+" is not iterable");if(f(I)){for(F=0,O=v(S);O>F;F++)if((N=oe(S[F]))&&m(k,N))return N;return new x(!1)}M=_(S,I)}for(D=j?S.next:M.next;!(X=s(D,M)).done;){try{N=oe(X.value)}catch(ne){y(M,"throw",ne)}if(_typeof$1(N)=="object"&&N&&m(k,N))return N}return new x(!1)}},function(e,n,r){var o=r(112),s=r(34),u=r(12),d=o(o.bind);e.exports=function(f,v){return s(f),v===void 0?f:u?d(f,v):function(){return f.apply(v,arguments)}}},function(e,n,r){var o=r(18),s=r(17);e.exports=function(u){if(o(u)==="Function")return s(u)}},function(e,n,r){var o=r(37),s=r(92),u=o("iterator"),d=Array.prototype;e.exports=function(f){return f!==void 0&&(s.Array===f||d[u]===f)}},function(e,n,r){var o=r(11),s=r(34),u=r(50),d=r(35),f=r(115),v=TypeError;e.exports=function(m,_){var g=arguments.length<2?f(m):_;if(s(g))return u(o(g,m));throw v(d(m)+" is not iterable")}},function(e,n,r){var o=r(82),s=r(33),u=r(20),d=r(92),f=r(37)("iterator");e.exports=function(v){if(!u(v))return s(v,f)||s(v,"@@iterator")||d[o(v)]}},function(e,n,r){var o=r(11),s=r(50),u=r(33);e.exports=function(d,f,v){var m,_;s(d);try{if(!(m=u(d,"return"))){if(f==="throw")throw v;return v}m=o(m,d)}catch(g){_=!0,m=g}if(f==="throw")throw v;if(_)throw m;return s(m),v}},function(e,n,r){var o=r(28),s=TypeError;e.exports=function(u,d){if(o(d,u))return u;throw s("Incorrect invocation")}},function(e,n,r){var o=r(37)("iterator"),s=!1;try{var u=0,d={next:function(){return{done:!!u++}},return:function(){s=!0}};d[o]=function(){return this},Array.from(d,function(){throw 2})}catch{}e.exports=function(f,v){if(!v&&!s)return!1;var m=!1;try{var _={};_[o]=function(){return{next:function(){return{done:m=!0}}}},f(_)}catch{}return m}},function(e,n,r){var o=r(24),s=r(23),u=r(87);e.exports=function(d,f,v){var m,_;return u&&o(m=f.constructor)&&m!==v&&s(_=m.prototype)&&_!==v.prototype&&u(d,_),d}},function(e,n,r){var o=r(73),s=r(84),u=r(121),d=r(111),f=r(117),v=r(20),m=r(110),_=r(93),g=r(97),y=r(122),w=r(9),x=r(103).fastKey,k=r(55),S=k.set,E=k.getterFor;e.exports={getConstructor:function(T,M,I,F){var O=T(function(Z,j){f(Z,N),S(Z,{type:M,index:o(null),first:void 0,last:void 0,size:0}),w||(Z.size=0),v(j)||m(j,Z[F],{that:Z,AS_ENTRIES:I})}),N=O.prototype,D=E(M),X=function(Z,j,Q){var ve,Se,we=D(Z),oe=U(Z,j);return oe?oe.value=Q:(we.last=oe={index:Se=x(j,!0),key:j,value:Q,previous:ve=we.last,next:void 0,removed:!1},we.first||(we.first=oe),ve&&(ve.next=oe),w?we.size++:Z.size++,Se!=="F"&&(we.index[Se]=oe)),Z},U=function(Z,j){var Q,ve=D(Z),Se=x(j);if(Se!=="F")return ve.index[Se];for(Q=ve.first;Q;Q=Q.next)if(Q.key==j)return Q};return u(N,{clear:function(){for(var Z=D(this),j=Z.index,Q=Z.first;Q;)Q.removed=!0,Q.previous&&(Q.previous=Q.previous.next=void 0),delete j[Q.index],Q=Q.next;Z.first=Z.last=void 0,w?Z.size=0:this.size=0},delete:function(Z){var j=this,Q=D(j),ve=U(j,Z);if(ve){var Se=ve.next,we=ve.previous;delete Q.index[ve.index],ve.removed=!0,we&&(we.next=Se),Se&&(Se.previous=we),Q.first==ve&&(Q.first=Se),Q.last==ve&&(Q.last=we),w?Q.size--:j.size--}return!!ve},forEach:function(Z){for(var j,Q=D(this),ve=d(Z,arguments.length>1?arguments[1]:void 0);j=j?j.next:Q.first;)for(ve(j.value,j.key,this);j&&j.removed;)j=j.previous},has:function(Z){return!!U(this,Z)}}),u(N,I?{get:function(Z){var j=U(this,Z);return j&&j.value},set:function(Z,j){return X(this,Z===0?0:Z,j)}}:{add:function(Z){return X(this,Z=Z===0?0:Z,Z)}}),w&&s(N,"size",{configurable:!0,get:function(){return D(this).size}}),O},setStrong:function(T,M,I){var F=M+" Iterator",O=E(M),N=E(F);_(T,M,function(D,X){S(this,{type:F,target:D,state:O(D),kind:X,last:void 0})},function(){for(var D=N(this),X=D.kind,U=D.last;U&&U.removed;)U=U.previous;return D.target&&(D.last=U=U?U.next:D.state.first)?g(X=="keys"?U.key:X=="values"?U.value:[U.key,U.value],!1):(D.target=void 0,g(void 0,!0))},I?"entries":"values",!I,!0),y(M)}}},function(e,n,r){var o=r(51);e.exports=function(s,u,d){for(var f in u)o(s,f,u[f],d);return s}},function(e,n,r){var o=r(27),s=r(84),u=r(37),d=r(9),f=u("species");e.exports=function(v){var m=o(v);d&&m&&!m[f]&&s(m,f,{configurable:!0,get:function(){return this}})}},function(e,n,r){r(124)},function(e,n,r){r(102)("Set",function(o){return function(){return o(this,arguments.length?arguments[0]:void 0)}},r(120))},function(e,n,r){var o,s=r(39),u=r(6),d=r(7),f=r(27),v=r(17),m=r(10),_=r(44),g=r(24),y=r(126),w=r(20),x=r(23),k=r(26),S=r(110),E=r(50),T=r(82),M=r(42),I=r(106),F=r(47),O=r(67),N=r(127),D=r(128),X=r(130),U=r(131),Z=r(132),j=r(133),Q=d.Object,ve=d.Array,Se=d.Date,we=d.Error,oe=d.EvalError,ne=d.RangeError,q=d.ReferenceError,H=d.SyntaxError,Y=d.TypeError,le=d.URIError,Ce=d.PerformanceMark,Te=d.WebAssembly,ke=Te&&Te.CompileError||we,Ee=Te&&Te.LinkError||we,Pe=Te&&Te.RuntimeError||we,Be=f("DOMException"),$e=X.Map,Oe=X.has,Ne=X.get,J=X.set,fe=U.Set,re=U.add,_e=f("Object","keys"),be=v([].push),Ae=v((!0).valueOf),Le=v(1 .valueOf),Ve=v("".valueOf),Fe=v(Se.prototype.getTime),De=_("structuredClone"),We="DataCloneError",Re="Transferring",He=function(Ct){return!m(function(){var ht=new d.Set([7]),Pt=Ct(ht),Ue=Ct(Q(7));return Pt==ht||!Pt.has(7)||_typeof$1(Ue)!="object"||Ue!=7})&&Ct},Ze=function(Ct,ht){return!m(function(){var Pt=new ht,Ue=Ct({a:Pt,b:Pt});return!(Ue&&Ue.a===Ue.b&&Ue.a instanceof ht&&Ue.a.stack===Pt.stack)})},Xe=d.structuredClone,at=s||!Ze(Xe,we)||!Ze(Xe,Be)||(o=Xe,!!m(function(){var Ct=o(new d.AggregateError([1],De,{cause:3}));return Ct.name!="AggregateError"||Ct.errors[0]!=1||Ct.message!=De||Ct.cause!=3})),ut=!Xe&&He(function(Ct){return new Ce(De,{detail:Ct}).detail}),ct=He(Xe)||ut,mt=function(Ct){throw new Be("Uncloneable type: "+Ct,We)},pt=function(Ct,ht){throw new Be((ht||"Cloning")+" of "+Ct+" cannot be properly polyfilled in this engine",We)},kt=function Ct(ht,Pt){if(k(ht)&&mt("Symbol"),!x(ht))return ht;if(Pt){if(Oe(Pt,ht))return Ne(Pt,ht)}else Pt=new $e;var Ue,qe,Ye,st,ot,Qe,tt,nt,it,lt,Et,St=T(ht),Mt=!1;switch(St){case"Array":Ye=ve(O(ht)),Mt=!0;break;case"Object":Ye={},Mt=!0;break;case"Map":Ye=new $e,Mt=!0;break;case"Set":Ye=new fe,Mt=!0;break;case"RegExp":Ye=new RegExp(ht.source,D(ht));break;case"Error":switch(qe=ht.name){case"AggregateError":Ye=f("AggregateError")([]);break;case"EvalError":Ye=oe();break;case"RangeError":Ye=ne();break;case"ReferenceError":Ye=q();break;case"SyntaxError":Ye=H();break;case"TypeError":Ye=Y();break;case"URIError":Ye=le();break;case"CompileError":Ye=ke();break;case"LinkError":Ye=Ee();break;case"RuntimeError":Ye=Pe();break;default:Ye=we()}Mt=!0;break;case"DOMException":Ye=new Be(ht.message,ht.name),Mt=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":Ue=d[St],x(Ue)||pt(St),Ye=new Ue(Ct(ht.buffer,Pt),ht.byteOffset,St==="DataView"?ht.byteLength:ht.length);break;case"DOMQuad":try{Ye=new DOMQuad(Ct(ht.p1,Pt),Ct(ht.p2,Pt),Ct(ht.p3,Pt),Ct(ht.p4,Pt))}catch{ct?Ye=ct(ht):pt(St)}break;case"FileList":if(st=function(){var Lt;try{Lt=new d.DataTransfer}catch{try{Lt=new d.ClipboardEvent("").clipboardData}catch{}}return Lt&&Lt.items&&Lt.files?Lt:null}()){for(ot=0,Qe=O(ht);ot<Qe;ot++)st.items.add(Ct(ht[ot],Pt));Ye=st.files}else ct?Ye=ct(ht):pt(St);break;case"ImageData":try{Ye=new ImageData(Ct(ht.data,Pt),ht.width,ht.height,{colorSpace:ht.colorSpace})}catch{ct?Ye=ct(ht):pt(St)}break;default:if(ct)Ye=ct(ht);else switch(St){case"BigInt":Ye=Q(ht.valueOf());break;case"Boolean":Ye=Q(Ae(ht));break;case"Number":Ye=Q(Le(ht));break;case"String":Ye=Q(Ve(ht));break;case"Date":Ye=new Se(Fe(ht));break;case"ArrayBuffer":(Ue=d.DataView)||typeof ht.slice=="function"||pt(St);try{if(typeof ht.slice!="function"||ht.resizable)for(Qe=ht.byteLength,Et=("maxByteLength"in ht)?{maxByteLength:ht.maxByteLength}:void 0,Ye=new ArrayBuffer(Qe,Et),it=new Ue(ht),lt=new Ue(Ye),ot=0;ot<Qe;ot++)lt.setUint8(ot,it.getUint8(ot));else Ye=ht.slice(0)}catch{throw new Be("ArrayBuffer is detached",We)}break;case"SharedArrayBuffer":Ye=ht;break;case"Blob":try{Ye=ht.slice(0,ht.size,ht.type)}catch{pt(St)}break;case"DOMPoint":case"DOMPointReadOnly":Ue=d[St];try{Ye=Ue.fromPoint?Ue.fromPoint(ht):new Ue(ht.x,ht.y,ht.z,ht.w)}catch{pt(St)}break;case"DOMRect":case"DOMRectReadOnly":Ue=d[St];try{Ye=Ue.fromRect?Ue.fromRect(ht):new Ue(ht.x,ht.y,ht.width,ht.height)}catch{pt(St)}break;case"DOMMatrix":case"DOMMatrixReadOnly":Ue=d[St];try{Ye=Ue.fromMatrix?Ue.fromMatrix(ht):new Ue(ht)}catch{pt(St)}break;case"AudioData":case"VideoFrame":g(ht.clone)||pt(St);try{Ye=ht.clone()}catch{mt(St)}break;case"File":try{Ye=new File([ht],ht.name,ht)}catch{pt(St)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":pt(St);default:mt(St)}}if(J(Pt,ht,Ye),Mt)switch(St){case"Array":case"Object":for(tt=_e(ht),ot=0,Qe=O(tt);ot<Qe;ot++)nt=tt[ot],I(Ye,nt,Ct(ht[nt],Pt));break;case"Map":ht.forEach(function(Lt,Gt){J(Ye,Ct(Gt,Pt),Ct(Lt,Pt))});break;case"Set":ht.forEach(function(Lt){re(Ye,Ct(Lt,Pt))});break;case"Error":F(Ye,"message",Ct(ht.message,Pt)),M(ht,"cause")&&F(Ye,"cause",Ct(ht.cause,Pt)),qe=="AggregateError"&&(Ye.errors=Ct(ht.errors,Pt));case"DOMException":Z&&F(Ye,"stack",Ct(ht.stack,Pt))}return Ye};u({global:!0,enumerable:!0,sham:!j,forced:at},{structuredClone:function(Ct){var ht,Pt=N(arguments.length,1)>1&&!w(arguments[1])?E(arguments[1]):void 0,Ue=Pt?Pt.transfer:void 0;return Ue!==void 0&&function(qe,Ye){if(!x(qe))throw Y("Transfer option cannot be converted to a sequence");var st=[];S(qe,function(Mt){be(st,E(Mt))});var ot,Qe,tt,nt,it,lt,Et=0,St=O(st);if(j)for(nt=Xe(st,{transfer:st});Et<St;)J(Ye,st[Et],nt[Et++]);else for(;Et<St;){if(ot=st[Et++],Oe(Ye,ot))throw new Be("Duplicate transferable",We);switch(Qe=T(ot)){case"ImageBitmap":tt=d.OffscreenCanvas,y(tt)||pt(Qe,Re);try{(lt=new tt(ot.width,ot.height)).getContext("bitmaprenderer").transferFromImageBitmap(ot),it=lt.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":g(ot.clone)&&g(ot.close)||pt(Qe,Re);try{it=ot.clone(),ot.close()}catch{}break;case"ArrayBuffer":g(ot.transfer)||pt(Qe,Re),it=ot.transfer();break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":pt(Qe,Re)}if(it===void 0)throw new Be("This object cannot be transferred: "+Qe,We);J(Ye,ot,it)}}(Ue,ht=new $e),kt(Ct,ht)}})},function(e,n,r){var o=r(17),s=r(10),u=r(24),d=r(82),f=r(27),v=r(54),m=function(){},_=[],g=f("Reflect","construct"),y=/^\s*(?:class|function)\b/,w=o(y.exec),x=!y.exec(m),k=function(E){if(!u(E))return!1;try{return g(m,_,E),!0}catch{return!1}},S=function(E){if(!u(E))return!1;switch(d(E)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return x||!!w(y,v(E))}catch{return!0}};S.sham=!0,e.exports=!g||s(function(){var E;return k(k.call)||!k(Object)||!k(function(){E=!0})||E})?S:k},function(e){var n=TypeError;e.exports=function(r,o){if(r<o)throw n("Not enough arguments");return r}},function(e,n,r){var o=r(11),s=r(42),u=r(28),d=r(129),f=RegExp.prototype;e.exports=function(v){var m=v.flags;return m!==void 0||"flags"in f||s(v,"flags")||!u(f,v)?m:o(d,v)}},function(e,n,r){var o=r(50);e.exports=function(){var s=o(this),u="";return s.hasIndices&&(u+="d"),s.global&&(u+="g"),s.ignoreCase&&(u+="i"),s.multiline&&(u+="m"),s.dotAll&&(u+="s"),s.unicode&&(u+="u"),s.unicodeSets&&(u+="v"),s.sticky&&(u+="y"),u}},function(e,n,r){var o=r(17),s=Map.prototype;e.exports={Map,set:o(s.set),get:o(s.get),has:o(s.has),remove:o(s.delete),proto:s}},function(e,n,r){var o=r(17),s=Set.prototype;e.exports={Set,add:o(s.add),has:o(s.has),remove:o(s.delete),proto:s,$has:s.has,$keys:s.keys}},function(e,n,r){var o=r(10),s=r(14);e.exports=!o(function(){var u=Error("a");return!("stack"in u)||(Object.defineProperty(u,"stack",s(1,7)),u.stack!==7)})},function(e,n,r){var o=r(7),s=r(10),u=r(31),d=r(134),f=r(135),v=r(136),m=o.structuredClone;e.exports=!!m&&!s(function(){if(f&&u>92||v&&u>94||d&&u>97)return!1;var _=new ArrayBuffer(8),g=m(_,{transfer:[_]});return _.byteLength!=0||g.byteLength!=8})},function(e,n,r){var o=r(135),s=r(136);e.exports=!o&&!s&&(typeof window>"u"?"undefined":_typeof$1(window))=="object"&&(typeof document>"u"?"undefined":_typeof$1(document))=="object"},function(e){e.exports=(typeof Deno>"u"?"undefined":_typeof$1(Deno))=="object"&&Deno&&_typeof$1(Deno.version)=="object"},function(e,n,r){var o=r(18);e.exports=typeof process<"u"&&o(process)=="process"},function(e,n,r){var o=r(7);e.exports=o},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(139),_display_utils=__w_pdfjs_require__(142),_font_loader=__w_pdfjs_require__(145),_canvas=__w_pdfjs_require__(146),_worker_options=__w_pdfjs_require__(149),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(150),_metadata=__w_pdfjs_require__(151),_optional_content_config=__w_pdfjs_require__(152),_transport_stream=__w_pdfjs_require__(153),_xfa_text=__w_pdfjs_require__(154);function _classPrivateMethodInitSpec(e,n){_checkPrivateRedeclaration(e,n),n.add(e)}function _classPrivateFieldInitSpec$1(e,n,r){_checkPrivateRedeclaration(e,n),n.set(e,r)}function _checkPrivateRedeclaration(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet$1(e,n){return _classApplyDescriptorGet(e,_classExtractFieldDescriptor(e,n,"get"))}function _classApplyDescriptorGet(e,n){return n.get?n.get.call(e):n.value}function _classPrivateMethodGet(e,n,r){if(!n.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function _classPrivateFieldSet$1(e,n,r){return _classApplyDescriptorSet(e,_classExtractFieldDescriptor(e,n,"set"),r),r}function _classExtractFieldDescriptor(e,n,r){if(!n.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return n.get(e)}function _classApplyDescriptorSet(e,n,r){if(n.set)n.set.call(e,r);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=r}}var DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;var DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;var DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;var DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){var _w_pdfjs_require__=__w_pdfjs_require__(155),NodeCanvasFactory=_w_pdfjs_require__.NodeCanvasFactory,NodeCMapReaderFactory=_w_pdfjs_require__.NodeCMapReaderFactory,NodeFilterFactory=_w_pdfjs_require__.NodeFilterFactory,NodeStandardFontDataFactory=_w_pdfjs_require__.NodeStandardFontDataFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory=NodeCanvasFactory,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=NodeCMapReaderFactory,exports.DefaultFilterFactory=DefaultFilterFactory=NodeFilterFactory,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=NodeStandardFontDataFactory}if(_is_node.isNodeJS){var _w_pdfjs_require__2=__w_pdfjs_require__(156),PDFNodeStream=_w_pdfjs_require__2.PDFNodeStream;createPDFNetworkStream=function(e){return new PDFNodeStream(e)}}else{var _w_pdfjs_require__3=__w_pdfjs_require__(159),PDFNetworkStream=_w_pdfjs_require__3.PDFNetworkStream,_w_pdfjs_require__4=__w_pdfjs_require__(160),PDFFetchStream=_w_pdfjs_require__4.PDFFetchStream;createPDFNetworkStream=function(e){return(0,_display_utils.isValidFetchUrl)(e.url)?new PDFFetchStream(e):new PDFNetworkStream(e)}}function getDocument(e){var n,r;if(typeof e=="string"||e instanceof URL?e={url:e}:(0,_util.isArrayBuffer)(e)&&(e={data:e}),_typeof$1(e)!=="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");var o=new PDFDocumentLoadingTask,s=o.docId,u=e.url?getUrlProp(e.url):null,d=e.data?getDataProp(e.data):null,f=e.httpHeaders||null,v=e.withCredentials===!0,m=(n=e.password)!==null&&n!==void 0?n:null,_=e.range instanceof PDFDataRangeTransport?e.range:null,g=Number.isInteger(e.rangeChunkSize)&&e.rangeChunkSize>0?e.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE,y=e.worker instanceof PDFWorker?e.worker:null,w=e.verbosity,x=typeof e.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(e.docBaseUrl)?null:e.docBaseUrl,k=typeof e.cMapUrl=="string"?e.cMapUrl:null,S=e.cMapPacked!==!1,E=e.CMapReaderFactory||DefaultCMapReaderFactory,T=typeof e.standardFontDataUrl=="string"?e.standardFontDataUrl:null,M=e.StandardFontDataFactory||DefaultStandardFontDataFactory,I=e.stopAtErrors!==!0,F=Number.isInteger(e.maxImageSize)&&e.maxImageSize>-1?e.maxImageSize:-1,O=e.isEvalSupported!==!1,N=typeof e.isOffscreenCanvasSupported=="boolean"?e.isOffscreenCanvasSupported:!_is_node.isNodeJS,D=Number.isInteger(e.canvasMaxAreaInBytes)?e.canvasMaxAreaInBytes:-1,X=typeof e.disableFontFace=="boolean"?e.disableFontFace:_is_node.isNodeJS,U=e.fontExtraProperties===!0,Z=e.enableXfa===!0,j=e.ownerDocument||globalThis.document,Q=e.disableRange===!0,ve=e.disableStream===!0,Se=e.disableAutoFetch===!0,we=e.pdfBug===!0,oe=_?_.length:(r=e.length)!==null&&r!==void 0?r:NaN,ne=typeof e.useSystemFonts=="boolean"?e.useSystemFonts:!_is_node.isNodeJS&&!X,q=typeof e.useWorkerFetch=="boolean"?e.useWorkerFetch:E===_display_utils.DOMCMapReaderFactory&&M===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(k,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(T,document.baseURI),H=e.canvasFactory||new DefaultCanvasFactory({ownerDocument:j}),Y=e.filterFactory||new DefaultFilterFactory({docId:s,ownerDocument:j});(0,_util.setVerbosityLevel)(w);var le={canvasFactory:H,filterFactory:Y};if(q||(le.cMapReaderFactory=new E({baseUrl:k,isCompressed:S}),le.standardFontDataFactory=new M({baseUrl:T})),!y){var Ce={verbosity:w,port:_worker_options.GlobalWorkerOptions.workerPort};y=Ce.port?PDFWorker.fromPort(Ce):new PDFWorker(Ce),o._worker=y}var Te={docId:s,apiVersion:"3.5.141",data:d,password:m,disableAutoFetch:Se,rangeChunkSize:g,length:oe,docBaseUrl:x,enableXfa:Z,evaluatorOptions:{maxImageSize:F,disableFontFace:X,ignoreErrors:I,isEvalSupported:O,isOffscreenCanvasSupported:N,canvasMaxAreaInBytes:D,fontExtraProperties:U,useSystemFonts:ne,cMapUrl:q?k:null,standardFontDataUrl:q?T:null}},ke={ignoreErrors:I,isEvalSupported:O,disableFontFace:X,fontExtraProperties:U,enableXfa:Z,ownerDocument:j,disableAutoFetch:Se,pdfBug:we,styleElement:null};return y.promise.then(function(){if(o.destroyed)throw new Error("Loading aborted");var Ee=_fetchDocument(y,Te),Pe=new Promise(function(Be){var $e;_?$e=new _transport_stream.PDFDataTransportStream({length:oe,initialData:_.initialData,progressiveDone:_.progressiveDone,contentDispositionFilename:_.contentDispositionFilename,disableRange:Q,disableStream:ve},_):d||($e=createPDFNetworkStream({url:u,length:oe,httpHeaders:f,withCredentials:v,rangeChunkSize:g,disableRange:Q,disableStream:ve})),Be($e)});return Promise.all([Ee,Pe]).then(function(Be){var $e=_slicedToArray(Be,2),Oe=$e[0],Ne=$e[1];if(o.destroyed)throw new Error("Loading aborted");var J=new _message_handler.MessageHandler(s,Oe,y.port),fe=new WorkerTransport(J,o,Ne,ke,le);o._transport=fe,J.send("Ready",null)})}).catch(o._capability.reject),o}function _fetchDocument(e,n){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(_regeneratorRuntime().mark(function e(n,r){var o;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!n.destroyed){s.next=2;break}throw new Error("Worker was destroyed");case 2:return s.next=4,n.messageHandler.sendWithPromise("GetDocRequest",r,r.data?[r.data.buffer]:null);case 4:if(o=s.sent,!n.destroyed){s.next=7;break}throw new Error("Worker was destroyed");case 7:return s.abrupt("return",o);case 8:case"end":return s.stop()}},e)}))).apply(this,arguments)}function getUrlProp(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch{if(_is_node.isNodeJS&&typeof e=="string")return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(e){if(_is_node.isNodeJS&&typeof Buffer<"u"&&e instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(e);if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if(typeof e=="string")return(0,_util.stringToBytes)(e);if(_typeof$1(e)==="object"&&!isNaN(e==null?void 0:e.length)||(0,_util.isArrayBuffer)(e))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}var PDFDocumentLoadingTask=function(){function e(){var r,o;_classCallCheck(this,e),this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d".concat((_classStaticPrivateFieldSpecSet(e,e,_docId2,(r=_classStaticPrivateFieldSpecGet(e,e,_docId2),o=r++,r)),o)),this.destroyed=!1,this.onPassword=null,this.onProgress=null}var n;return _createClass(e,[{key:"promise",get:function(){return this._capability.promise}},{key:"destroy",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function r(){var o;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return this.destroyed=!0,s.next=3,(o=this._transport)===null||o===void 0?void 0:o.destroy();case 3:this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null);case 5:case"end":return s.stop()}},r,this)})),function(){return n.apply(this,arguments)})}]),e}(),_docId2={writable:!0,value:0};exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var PDFDataRangeTransport=function(){function e(n,r){_classCallCheck(this,e);var o=arguments.length>2&&arguments[2]!==void 0&&arguments[2],s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this.length=n,this.initialData=r,this.progressiveDone=o,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}return _createClass(e,[{key:"addRangeListener",value:function(n){this._rangeListeners.push(n)}},{key:"addProgressListener",value:function(n){this._progressListeners.push(n)}},{key:"addProgressiveReadListener",value:function(n){this._progressiveReadListeners.push(n)}},{key:"addProgressiveDoneListener",value:function(n){this._progressiveDoneListeners.push(n)}},{key:"onDataRange",value:function(n,r){var o,s=_createForOfIteratorHelper(this._rangeListeners);try{for(s.s();!(o=s.n()).done;)(0,o.value)(n,r)}catch(u){s.e(u)}finally{s.f()}}},{key:"onDataProgress",value:function(n,r){var o=this;this._readyCapability.promise.then(function(){var s,u=_createForOfIteratorHelper(o._progressListeners);try{for(u.s();!(s=u.n()).done;)(0,s.value)(n,r)}catch(d){u.e(d)}finally{u.f()}})}},{key:"onDataProgressiveRead",value:function(n){var r=this;this._readyCapability.promise.then(function(){var o,s=_createForOfIteratorHelper(r._progressiveReadListeners);try{for(s.s();!(o=s.n()).done;)(0,o.value)(n)}catch(u){s.e(u)}finally{s.f()}})}},{key:"onDataProgressiveDone",value:function(){var n=this;this._readyCapability.promise.then(function(){var r,o=_createForOfIteratorHelper(n._progressiveDoneListeners);try{for(o.s();!(r=o.n()).done;)(0,r.value)()}catch(s){o.e(s)}finally{o.f()}})}},{key:"transportReady",value:function(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function(n,r){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function(){}}]),e}();exports.PDFDataRangeTransport=PDFDataRangeTransport;var PDFDocumentProxy=function(){function e(n,r){_classCallCheck(this,e),this._pdfInfo=n,this._transport=r}return _createClass(e,[{key:"annotationStorage",get:function(){return this._transport.annotationStorage}},{key:"filterFactory",get:function(){return this._transport.filterFactory}},{key:"numPages",get:function(){return this._pdfInfo.numPages}},{key:"fingerprints",get:function(){return this._pdfInfo.fingerprints}},{key:"isPureXfa",get:function(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}},{key:"allXfaHtml",get:function(){return this._transport._htmlForXfa}},{key:"getPage",value:function(n){return this._transport.getPage(n)}},{key:"getPageIndex",value:function(n){return this._transport.getPageIndex(n)}},{key:"getDestinations",value:function(){return this._transport.getDestinations()}},{key:"getDestination",value:function(n){return this._transport.getDestination(n)}},{key:"getPageLabels",value:function(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function(){return this._transport.getJavaScript()}},{key:"getJSActions",value:function(){return this._transport.getDocJSActions()}},{key:"getOutline",value:function(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function(){return this._transport.getOptionalContentConfig()}},{key:"getPermissions",value:function(){return this._transport.getPermissions()}},{key:"getMetadata",value:function(){return this._transport.getMetadata()}},{key:"getMarkInfo",value:function(){return this._transport.getMarkInfo()}},{key:"getData",value:function(){return this._transport.getData()}},{key:"saveDocument",value:function(){return this._transport.saveDocument()}},{key:"getDownloadInfo",value:function(){return this._transport.downloadInfoCapability.promise}},{key:"cleanup",value:function(){var n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return this._transport.startCleanup(n||this.isPureXfa)}},{key:"destroy",value:function(){return this.loadingTask.destroy()}},{key:"loadingParams",get:function(){return this._transport.loadingParams}},{key:"loadingTask",get:function(){return this._transport.loadingTask}},{key:"getFieldObjects",value:function(){return this._transport.getFieldObjects()}},{key:"hasJSActions",value:function(){return this._transport.hasJSActions()}},{key:"getCalculationOrderIds",value:function(){return this._transport.getCalculationOrderIds()}}]),e}();exports.PDFDocumentProxy=PDFDocumentProxy;var _delayedCleanupTimeout=new WeakMap,_pendingCleanup=new WeakMap,_tryCleanup=new WeakSet,_abortDelayedCleanup=new WeakSet,PDFPageProxy=function(){function e(r,o,s){_classCallCheck(this,e);var u=arguments.length>3&&arguments[3]!==void 0&&arguments[3];_classPrivateMethodInitSpec(this,_abortDelayedCleanup),_classPrivateMethodInitSpec(this,_tryCleanup),_classPrivateFieldInitSpec$1(this,_delayedCleanupTimeout,{writable:!0,value:null}),_classPrivateFieldInitSpec$1(this,_pendingCleanup,{writable:!0,value:!1}),this._pageIndex=r,this._pageInfo=o,this._transport=s,this._stats=u?new _display_utils.StatTimer:null,this._pdfBug=u,this.commonObjs=s.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}var n;return _createClass(e,[{key:"pageNumber",get:function(){return this._pageIndex+1}},{key:"rotate",get:function(){return this._pageInfo.rotate}},{key:"ref",get:function(){return this._pageInfo.ref}},{key:"userUnit",get:function(){return this._pageInfo.userUnit}},{key:"view",get:function(){return this._pageInfo.view}},{key:"getViewport",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=r.scale,s=r.rotation,u=s===void 0?this.rotate:s,d=r.offsetX,f=d===void 0?0:d,v=r.offsetY,m=v===void 0?0:v,_=r.dontFlip,g=_!==void 0&&_;return new _display_utils.PageViewport({viewBox:this.view,scale:o,rotation:u,offsetX:f,offsetY:m,dontFlip:g})}},{key:"getAnnotations",value:function(){var r=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).intent,o=r===void 0?"display":r,s=this._transport.getRenderingIntent(o);return this._transport.getAnnotations(this._pageIndex,s.renderingIntent)}},{key:"getJSActions",value:function(){return this._transport.getPageJSActions(this._pageIndex)}},{key:"isPureXfa",get:function(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}},{key:"getXfa",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function r(){var o;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",((o=this._transport._htmlForXfa)===null||o===void 0?void 0:o.children[this._pageIndex])||null);case 1:case"end":return s.stop()}},r,this)})),function(){return n.apply(this,arguments)})},{key:"render",value:function(r){var o,s,u,d=this,f=r.canvasContext,v=r.viewport,m=r.intent,_=m===void 0?"display":m,g=r.annotationMode,y=g===void 0?_util.AnnotationMode.ENABLE:g,w=r.transform,x=w===void 0?null:w,k=r.background,S=k===void 0?null:k,E=r.optionalContentConfigPromise,T=E===void 0?null:E,M=r.annotationCanvasMap,I=M===void 0?null:M,F=r.pageColors,O=F===void 0?null:F,N=r.printAnnotationStorage,D=N===void 0?null:N;if((s=arguments[0])!==null&&s!==void 0&&s.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(u=this._stats)===null||u===void 0||u.time("Overall");var X=this._transport.getRenderingIntent(_,y,D);_classPrivateFieldSet$1(this,_pendingCleanup,!1),_classPrivateMethodGet(this,_abortDelayedCleanup,_abortDelayedCleanup2).call(this),T||(T=this._transport.getOptionalContentConfig());var U=this._intentStates.get(X.cacheKey);U||(U=Object.create(null),this._intentStates.set(X.cacheKey,U)),U.streamReaderCancelTimeout&&(clearTimeout(U.streamReaderCancelTimeout),U.streamReaderCancelTimeout=null);var Z,j=!!(X.renderingIntent&_util.RenderingIntentFlag.PRINT);U.displayReadyCapability||(U.displayReadyCapability=(0,_util.createPromiseCapability)(),U.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Z=this._stats)===null||Z===void 0||Z.time("Page Request"),this._pumpOperatorList(X));var Q=function(we){var oe,ne;U.renderTasks.delete(ve),(d._maybeCleanupAfterRender||j)&&_classPrivateFieldSet$1(d,_pendingCleanup,!0),_classPrivateMethodGet(d,_tryCleanup,_tryCleanup2).call(d,!j),we?(ve.capability.reject(we),d._abortOperatorList({intentState:U,reason:we instanceof Error?we:new Error(we)})):ve.capability.resolve(),(oe=d._stats)===null||oe===void 0||oe.timeEnd("Rendering"),(ne=d._stats)===null||ne===void 0||ne.timeEnd("Overall")},ve=new InternalRenderTask({callback:Q,params:{canvasContext:f,viewport:v,transform:x,background:S},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:I,operatorList:U.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!j,pdfBug:this._pdfBug,pageColors:O});((o=U).renderTasks||(o.renderTasks=new Set)).add(ve);var Se=ve.task;return Promise.all([U.displayReadyCapability.promise,T]).then(function(we){var oe,ne=_slicedToArray(we,2),q=ne[0],H=ne[1];_classPrivateFieldGet$1(d,_pendingCleanup)?Q():((oe=d._stats)===null||oe===void 0||oe.time("Rendering"),ve.initializeGraphics({transparency:q,optionalContentConfig:H}),ve.operatorListChanged())}).catch(Q),Se}},{key:"getOperatorList",value:function(){var r,o,s,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=u.intent,f=d===void 0?"display":d,v=u.annotationMode,m=v===void 0?_util.AnnotationMode.ENABLE:v,_=u.printAnnotationStorage,g=_===void 0?null:_,y=this._transport.getRenderingIntent(f,m,g,!0),w=this._intentStates.get(y.cacheKey);return w||(w=Object.create(null),this._intentStates.set(y.cacheKey,w)),w.opListReadCapability||((r=Object.create(null)).operatorListChanged=function(){w.operatorList.lastChunk&&(w.opListReadCapability.resolve(w.operatorList),w.renderTasks.delete(r))},w.opListReadCapability=(0,_util.createPromiseCapability)(),((o=w).renderTasks||(o.renderTasks=new Set)).add(r),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(s=this._stats)===null||s===void 0||s.time("Page Request"),this._pumpOperatorList(y)),w.opListReadCapability.promise}},{key:"streamTextContent",value:function(){var r=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).includeMarkedContent,o=r!==void 0&&r;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:o===!0},{highWaterMark:100,size:function(s){return s.items.length}})}},{key:"getTextContent",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(function(s){return _xfa_text.XfaText.textContent(s)});var o=this.streamTextContent(r);return new Promise(function(s,u){var d=o.getReader(),f={items:[],styles:Object.create(null)};(function v(){d.read().then(function(m){var _,g=m.value;m.done?s(f):(Object.assign(f.styles,g.styles),(_=f.items).push.apply(_,_toConsumableArray$1(g.items)),v())},u)})()})}},{key:"getStructTree",value:function(){return this._transport.getStructTree(this._pageIndex)}},{key:"_destroy",value:function(){this.destroyed=!0;var r,o=[],s=_createForOfIteratorHelper(this._intentStates.values());try{for(s.s();!(r=s.n()).done;){var u=r.value;if(this._abortOperatorList({intentState:u,reason:new Error("Page was destroyed."),force:!0}),!u.opListReadCapability){var d,f=_createForOfIteratorHelper(u.renderTasks);try{for(f.s();!(d=f.n()).done;){var v=d.value;o.push(v.completed),v.cancel()}}catch(m){f.e(m)}finally{f.f()}}}}catch(m){s.e(m)}finally{s.f()}return this.objs.clear(),_classPrivateFieldSet$1(this,_pendingCleanup,!1),_classPrivateMethodGet(this,_abortDelayedCleanup,_abortDelayedCleanup2).call(this),Promise.all(o)}},{key:"cleanup",value:function(){var r=arguments.length>0&&arguments[0]!==void 0&&arguments[0];_classPrivateFieldSet$1(this,_pendingCleanup,!0);var o=_classPrivateMethodGet(this,_tryCleanup,_tryCleanup2).call(this,!1);return r&&o&&this._stats&&(this._stats=new _display_utils.StatTimer),o}},{key:"_startRenderPage",value:function(r,o){var s,u,d=this._intentStates.get(o);d&&((s=this._stats)===null||s===void 0||s.timeEnd("Page Request"),(u=d.displayReadyCapability)===null||u===void 0||u.resolve(r))}},{key:"_renderPageChunk",value:function(r,o){for(var s=0,u=r.length;s<u;s++)o.operatorList.fnArray.push(r.fnArray[s]),o.operatorList.argsArray.push(r.argsArray[s]);o.operatorList.lastChunk=r.lastChunk,o.operatorList.separateAnnots=r.separateAnnots;var d,f=_createForOfIteratorHelper(o.renderTasks);try{for(f.s();!(d=f.n()).done;)d.value.operatorListChanged()}catch(v){f.e(v)}finally{f.f()}r.lastChunk&&_classPrivateMethodGet(this,_tryCleanup,_tryCleanup2).call(this,!0)}},{key:"_pumpOperatorList",value:function(r){var o=this,s=r.renderingIntent,u=r.cacheKey,d=r.annotationStorageMap,f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:s,cacheKey:u,annotationStorage:d}).getReader(),v=this._intentStates.get(u);v.streamReader=f,function m(){f.read().then(function(_){var g=_.value;_.done?v.streamReader=null:o._transport.destroyed||(o._renderPageChunk(g,v),m())},function(_){if(v.streamReader=null,!o._transport.destroyed){if(v.operatorList){v.operatorList.lastChunk=!0;var g,y=_createForOfIteratorHelper(v.renderTasks);try{for(y.s();!(g=y.n()).done;)g.value.operatorListChanged()}catch(w){y.e(w)}finally{y.f()}_classPrivateMethodGet(o,_tryCleanup,_tryCleanup2).call(o,!0)}if(v.displayReadyCapability)v.displayReadyCapability.reject(_);else{if(!v.opListReadCapability)throw _;v.opListReadCapability.reject(_)}}})}()}},{key:"_abortOperatorList",value:function(r){var o=this,s=r.intentState,u=r.reason,d=r.force,f=d!==void 0&&d;if(s.streamReader){if(s.streamReaderCancelTimeout&&(clearTimeout(s.streamReaderCancelTimeout),s.streamReaderCancelTimeout=null),!f){if(s.renderTasks.size>0)return;if(u instanceof _display_utils.RenderingCancelledException){var v=RENDERING_CANCELLED_TIMEOUT;return u.extraDelay>0&&u.extraDelay<1e3&&(v+=u.extraDelay),void(s.streamReaderCancelTimeout=setTimeout(function(){s.streamReaderCancelTimeout=null,o._abortOperatorList({intentState:s,reason:u,force:!0})},v))}}if(s.streamReader.cancel(new _util.AbortException(u.message)).catch(function(){}),s.streamReader=null,!this._transport.destroyed){var m,_=_createForOfIteratorHelper(this._intentStates);try{for(_.s();!(m=_.n()).done;){var g=_slicedToArray(m.value,2),y=g[0];if(g[1]===s){this._intentStates.delete(y);break}}}catch(w){_.e(w)}finally{_.f()}this.cleanup()}}}},{key:"stats",get:function(){return this._stats}}]),e}();function _tryCleanup2(){var e=this,n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(_classPrivateMethodGet(this,_abortDelayedCleanup,_abortDelayedCleanup2).call(this),!_classPrivateFieldGet$1(this,_pendingCleanup))return!1;if(n)return _classPrivateFieldSet$1(this,_delayedCleanupTimeout,setTimeout(function(){_classPrivateFieldSet$1(e,_delayedCleanupTimeout,null),_classPrivateMethodGet(e,_tryCleanup,_tryCleanup2).call(e,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;var r,o=_createForOfIteratorHelper(this._intentStates.values());try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.renderTasks,d=s.operatorList;if(u.size>0||!d.lastChunk)return!1}}catch(f){o.e(f)}finally{o.f()}return this._intentStates.clear(),this.objs.clear(),_classPrivateFieldSet$1(this,_pendingCleanup,!1),!0}function _abortDelayedCleanup2(){_classPrivateFieldGet$1(this,_delayedCleanupTimeout)&&(clearTimeout(_classPrivateFieldGet$1(this,_delayedCleanupTimeout)),_classPrivateFieldSet$1(this,_delayedCleanupTimeout,null))}exports.PDFPageProxy=PDFPageProxy;var _listeners=new WeakMap,_deferred=new WeakMap,LoopbackPort=function(){function e(){_classCallCheck(this,e),_classPrivateFieldInitSpec(this,_listeners,{writable:!0,value:new Set}),_classPrivateFieldInitSpec(this,_deferred,{writable:!0,value:Promise.resolve()})}return _createClass(e,[{key:"postMessage",value:function(n,r){var o=this,s={data:structuredClone(n,r?{transfer:r}:null)};_classPrivateFieldGet(this,_deferred).then(function(){var u,d=_createForOfIteratorHelper(_classPrivateFieldGet(o,_listeners));try{for(d.s();!(u=d.n()).done;)u.value.call(o,s)}catch(f){d.e(f)}finally{d.f()}})}},{key:"addEventListener",value:function(n,r){_classPrivateFieldGet(this,_listeners).add(r)}},{key:"removeEventListener",value:function(n,r){_classPrivateFieldGet(this,_listeners).delete(r)}},{key:"terminate",value:function(){_classPrivateFieldGet(this,_listeners).clear()}}]),e}();exports.LoopbackPort=LoopbackPort;var PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if((typeof document>"u"?"undefined":_typeof$1(document))==="object"){var _document,_document$currentScri,pdfjsFilePath=(_document=document)===null||_document===void 0||(_document$currentScri=_document.currentScript)===null||_document$currentScri===void 0?void 0:_document$currentScri.src;pdfjsFilePath&&(PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(e,n){var r;try{if(!(r=new URL(e)).origin||r.origin==="null")return!1}catch{return!1}var o=new URL(n,r);return r.origin===o.origin},PDFWorkerUtil.createCDNWrapper=function(e){var n='importScripts("'.concat(e,'");');return URL.createObjectURL(new Blob([n]))};var PDFWorker=function(){function PDFWorker(){_classCallCheck(this,PDFWorker);var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.name,r=n===void 0?null:n,o=e.port,s=o===void 0?null:o,u=e.verbosity,d=u===void 0?(0,_util.getVerbosityLevel)():u;if(s&&_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).has(s))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=r,this.destroyed=!1,this.verbosity=d,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,s)return _classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).set(s,this),void this._initializeFromPort(s);this._initialize()}return _createClass(PDFWorker,[{key:"promise",get:function(){return this._readyCapability.promise}},{key:"port",get:function(){return this._port}},{key:"messageHandler",get:function(){return this._messageHandler}},{key:"_initializeFromPort",value:function(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}},{key:"_initialize",value:function(){var e=this;if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){var n=PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,n)||(n=PDFWorkerUtil.createCDNWrapper(new URL(n,window.location).href));var r=new Worker(n),o=new _message_handler.MessageHandler("main","worker",r),s=function(){r.removeEventListener("error",u),o.destroy(),r.terminate(),e.destroyed?e._readyCapability.reject(new Error("Worker was destroyed")):e._setupFakeWorker()},u=function(){e._webWorker||s()};r.addEventListener("error",u),o.on("test",function(f){r.removeEventListener("error",u),e.destroyed?s():f?(e._messageHandler=o,e._port=r,e._webWorker=r,e._readyCapability.resolve(),o.send("configure",{verbosity:e.verbosity})):(e._setupFakeWorker(),o.destroy(),r.terminate())}),o.on("ready",function(f){if(r.removeEventListener("error",u),e.destroyed)s();else try{d()}catch{e._setupFakeWorker()}});var d=function(){var f=new Uint8Array;o.send("test",f,[f.buffer])};return void d()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function(){var e=this;PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(function(n){if(e.destroyed)e._readyCapability.reject(new Error("Worker was destroyed"));else{var r=new LoopbackPort;e._port=r;var o="fake".concat(PDFWorkerUtil.fakeWorkerId++),s=new _message_handler.MessageHandler(o+"_worker",o,r);n.setup(s,r);var u=new _message_handler.MessageHandler(o,o+"_worker",r);e._messageHandler=u,e._readyCapability.resolve(),u.send("configure",{verbosity:e.verbosity})}}).catch(function(n){e._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(n.message,'".')))})}},{key:"destroy",value:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}}],[{key:"fromPort",value:function(e){if(e==null||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).has(e.port)?_classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).get(e.port):new PDFWorker(e)}},{key:"workerSrc",get:function(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}},{key:"_mainThreadWorkerMessageHandler",get:function(){try{var e;return((e=globalThis.pdfjsWorker)===null||e===void 0?void 0:e.WorkerMessageHandler)||null}catch{return null}}},{key:"_setupFakeWorkerGlobal",get:function get(){var _this14=this,loader=function(){var _ref22=_asyncToGenerator(_regeneratorRuntime().mark(function _callee3(){var mainWorkerMessageHandler,worker;return _regeneratorRuntime().wrap(function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(mainWorkerMessageHandler=_this14._mainThreadWorkerMessageHandler,!mainWorkerMessageHandler){_context3.next=3;break}return _context3.abrupt("return",mainWorkerMessageHandler);case 3:if(!_is_node.isNodeJS||typeof commonjsRequire!="function"){_context3.next=6;break}return worker=eval("require")(_this14.workerSrc),_context3.abrupt("return",worker.WorkerMessageHandler);case 6:return _context3.next=8,(0,_display_utils.loadScript)(_this14.workerSrc);case 8:return _context3.abrupt("return",window.pdfjsWorker.WorkerMessageHandler);case 9:case"end":return _context3.stop()}},_callee3)}));return function(){return _ref22.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}]),PDFWorker}(),_workerPorts={writable:!0,value:new WeakMap};exports.PDFWorker=PDFWorker;var _methodPromises=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_cacheSimpleMethod=new WeakSet,WorkerTransport=function(){function e(r,o,s,u,d){_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_cacheSimpleMethod),_classPrivateFieldInitSpec$1(this,_methodPromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec$1(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec$1(this,_pagePromises,{writable:!0,value:new Map}),this.messageHandler=r,this.loadingTask=o,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:u.ownerDocument,styleElement:u.styleElement}),this._params=u,this.canvasFactory=d.canvasFactory,this.filterFactory=d.filterFactory,this.cMapReaderFactory=d.cMapReaderFactory,this.standardFontDataFactory=d.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}var n;return _createClass(e,[{key:"annotationStorage",get:function(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}},{key:"getRenderingIntent",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_util.AnnotationMode.ENABLE,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,u=arguments.length>3&&arguments[3]!==void 0&&arguments[3],d=_util.RenderingIntentFlag.DISPLAY,f=null;switch(r){case"any":d=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":d=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)("getRenderingIntent - invalid intent: ".concat(r))}switch(o){case _util.AnnotationMode.DISABLE:d+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:d+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:f=((d+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE)&_util.RenderingIntentFlag.PRINT&&s instanceof _annotation_storage.PrintAnnotationStorage?s:this.annotationStorage).serializable;break;default:(0,_util.warn)("getRenderingIntent - invalid annotationMode: ".concat(o))}return u&&(d+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:d,cacheKey:"".concat(d,"_").concat(_annotation_storage.AnnotationStorage.getHash(f)),annotationStorageMap:f}}},{key:"destroy",value:function(){var r=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var o,s=[],u=_createForOfIteratorHelper(_classPrivateFieldGet$1(this,_pageCache).values());try{for(u.s();!(o=u.n()).done;){var d=o.value;s.push(d._destroy())}}catch(v){u.e(v)}finally{u.f()}_classPrivateFieldGet$1(this,_pageCache).clear(),_classPrivateFieldGet$1(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();var f=this.messageHandler.sendWithPromise("Terminate",null);return s.push(f),Promise.all(s).then(function(){r.commonObjs.clear(),r.fontLoader.clear(),_classPrivateFieldGet$1(r,_methodPromises).clear(),r.filterFactory.destroy(),r._networkStream&&r._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),r.messageHandler&&(r.messageHandler.destroy(),r.messageHandler=null),r.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function(){var r=this,o=this.messageHandler,s=this.loadingTask;o.on("GetReader",function(u,d){(0,_util.assert)(r._networkStream,"GetReader - no `IPDFStream` instance available."),r._fullReader=r._networkStream.getFullReader(),r._fullReader.onProgress=function(f){r._lastProgress={loaded:f.loaded,total:f.total}},d.onPull=function(){r._fullReader.read().then(function(f){var v=f.value;f.done?d.close():((0,_util.assert)(v instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),d.enqueue(new Uint8Array(v),1,[v]))}).catch(function(f){d.error(f)})},d.onCancel=function(f){r._fullReader.cancel(f),d.ready.catch(function(v){if(!r.destroyed)throw v})}}),o.on("ReaderHeadersReady",function(u){var d=(0,_util.createPromiseCapability)(),f=r._fullReader;return f.headersReady.then(function(){var v;f.isStreamingSupported&&f.isRangeSupported||(r._lastProgress&&((v=s.onProgress)===null||v===void 0||v.call(s,r._lastProgress)),f.onProgress=function(m){var _;(_=s.onProgress)===null||_===void 0||_.call(s,{loaded:m.loaded,total:m.total})}),d.resolve({isStreamingSupported:f.isStreamingSupported,isRangeSupported:f.isRangeSupported,contentLength:f.contentLength})},d.reject),d.promise}),o.on("GetRangeReader",function(u,d){(0,_util.assert)(r._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var f=r._networkStream.getRangeReader(u.begin,u.end);f?(d.onPull=function(){f.read().then(function(v){var m=v.value;v.done?d.close():((0,_util.assert)(m instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),d.enqueue(new Uint8Array(m),1,[m]))}).catch(function(v){d.error(v)})},d.onCancel=function(v){f.cancel(v),d.ready.catch(function(m){if(!r.destroyed)throw m})}):d.close()}),o.on("GetDoc",function(u){var d=u.pdfInfo;r._numPages=d.numPages,r._htmlForXfa=d.htmlForXfa,delete d.htmlForXfa,s._capability.resolve(new PDFDocumentProxy(d,r))}),o.on("DocException",function(u){var d;switch(u.name){case"PasswordException":d=new _util.PasswordException(u.message,u.code);break;case"InvalidPDFException":d=new _util.InvalidPDFException(u.message);break;case"MissingPDFException":d=new _util.MissingPDFException(u.message);break;case"UnexpectedResponseException":d=new _util.UnexpectedResponseException(u.message,u.status);break;case"UnknownErrorException":d=new _util.UnknownErrorException(u.message,u.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}s._capability.reject(d)}),o.on("PasswordRequest",function(u){if(r._passwordCapability=(0,_util.createPromiseCapability)(),s.onPassword)try{s.onPassword(function(d){d instanceof Error?r._passwordCapability.reject(d):r._passwordCapability.resolve({password:d})},u.code)}catch(d){r._passwordCapability.reject(d)}else r._passwordCapability.reject(new _util.PasswordException(u.message,u.code));return r._passwordCapability.promise}),o.on("DataLoaded",function(u){var d;(d=s.onProgress)===null||d===void 0||d.call(s,{loaded:u.length,total:u.length}),r.downloadInfoCapability.resolve(u)}),o.on("StartRenderPage",function(u){r.destroyed||_classPrivateFieldGet$1(r,_pageCache).get(u.pageIndex)._startRenderPage(u.transparency,u.cacheKey)}),o.on("commonobj",function(u){var d,f=_slicedToArray(u,3),v=f[0],m=f[1],_=f[2];if(!r.destroyed&&!r.commonObjs.has(v))switch(m){case"Font":var g=r._params;if("error"in _){var y=_.error;(0,_util.warn)("Error during font loading: ".concat(y)),r.commonObjs.resolve(v,y);break}var w=g.pdfBug&&(d=globalThis.FontInspector)!==null&&d!==void 0&&d.enabled?function(k,S){return globalThis.FontInspector.fontAdded(k,S)}:null,x=new _font_loader.FontFaceObject(_,{isEvalSupported:g.isEvalSupported,disableFontFace:g.disableFontFace,ignoreErrors:g.ignoreErrors,inspectFont:w});r.fontLoader.bind(x).catch(function(k){return o.sendWithPromise("FontFallback",{id:v})}).finally(function(){!g.fontExtraProperties&&x.data&&(x.data=null),r.commonObjs.resolve(v,x)});break;case"FontPath":case"Image":case"Pattern":r.commonObjs.resolve(v,_);break;default:throw new Error("Got unknown common object type ".concat(m))}}),o.on("obj",function(u){var d=_slicedToArray(u,4),f=d[0],v=d[1],m=d[2],_=d[3];if(!r.destroyed){var g=_classPrivateFieldGet$1(r,_pageCache).get(v);if(!g.objs.has(f))switch(m){case"Image":var y;g.objs.resolve(f,_),_&&(_.bitmap?_.width*_.height*4:((y=_.data)===null||y===void 0?void 0:y.length)||0)>_util.MAX_IMAGE_SIZE_TO_CACHE&&(g._maybeCleanupAfterRender=!0);break;case"Pattern":g.objs.resolve(f,_);break;default:throw new Error("Got unknown object type ".concat(m))}}}),o.on("DocProgress",function(u){var d;r.destroyed||(d=s.onProgress)===null||d===void 0||d.call(s,{loaded:u.loaded,total:u.total})}),o.on("FetchBuiltInCMap",function(u){return r.destroyed?Promise.reject(new Error("Worker was destroyed.")):r.cMapReaderFactory?r.cMapReaderFactory.fetch(u):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))}),o.on("FetchStandardFontData",function(u){return r.destroyed?Promise.reject(new Error("Worker was destroyed.")):r.standardFontDataFactory?r.standardFontDataFactory.fetch(u):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))})}},{key:"getData",value:function(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"saveDocument",value:function(){var r,o,s=this;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(r=(o=this._fullReader)===null||o===void 0?void 0:o.filename)!==null&&r!==void 0?r:null}).finally(function(){s.annotationStorage.resetModified()})}},{key:"getPage",value:function(r){var o=this;if(!Number.isInteger(r)||r<=0||r>this._numPages)return Promise.reject(new Error("Invalid page request."));var s=r-1,u=_classPrivateFieldGet$1(this,_pagePromises).get(s);if(u)return u;var d=this.messageHandler.sendWithPromise("GetPage",{pageIndex:s}).then(function(f){if(o.destroyed)throw new Error("Transport destroyed");var v=new PDFPageProxy(s,f,o,o._params.pdfBug);return _classPrivateFieldGet$1(o,_pageCache).set(s,v),v});return _classPrivateFieldGet$1(this,_pagePromises).set(s,d),d}},{key:"getPageIndex",value:function(r){return _typeof$1(r)!=="object"||r===null||!Number.isInteger(r.num)||r.num<0||!Number.isInteger(r.gen)||r.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:r.num,gen:r.gen})}},{key:"getAnnotations",value:function(r,o){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:r,intent:o})}},{key:"getFieldObjects",value:function(){return _classPrivateMethodGet(this,_cacheSimpleMethod,_cacheSimpleMethod2).call(this,"GetFieldObjects")}},{key:"hasJSActions",value:function(){return _classPrivateMethodGet(this,_cacheSimpleMethod,_cacheSimpleMethod2).call(this,"HasJSActions")}},{key:"getCalculationOrderIds",value:function(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}},{key:"getDestinations",value:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function(r){return typeof r!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:r})}},{key:"getPageLabels",value:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getDocJSActions",value:function(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}},{key:"getPageJSActions",value:function(r){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:r})}},{key:"getStructTree",value:function(r){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:r})}},{key:"getOutline",value:function(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(function(r){return new _optional_content_config.OptionalContentConfig(r)})}},{key:"getPermissions",value:function(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function(){var r=this,o="GetMetadata",s=_classPrivateFieldGet$1(this,_methodPromises).get(o);if(s)return s;var u=this.messageHandler.sendWithPromise(o,null).then(function(d){var f,v,m,_;return{info:d[0],metadata:d[1]?new _metadata.Metadata(d[1]):null,contentDispositionFilename:(f=(m=r._fullReader)===null||m===void 0?void 0:m.filename)!==null&&f!==void 0?f:null,contentLength:(v=(_=r._fullReader)===null||_===void 0?void 0:_.contentLength)!==null&&v!==void 0?v:null}});return _classPrivateFieldGet$1(this,_methodPromises).set(o,u),u}},{key:"getMarkInfo",value:function(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}},{key:"startCleanup",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function r(){var o,s,u,d,f=arguments;return _regeneratorRuntime().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(o=f.length>0&&f[0]!==void 0&&f[0],!this.destroyed){v.next=3;break}return v.abrupt("return");case 3:return v.next=5,this.messageHandler.sendWithPromise("Cleanup",null);case 5:s=_createForOfIteratorHelper(_classPrivateFieldGet$1(this,_pageCache).values()),v.prev=6,s.s();case 8:if((u=s.n()).done){v.next=15;break}if((d=u.value).cleanup()){v.next=13;break}throw new Error("startCleanup: Page ".concat(d.pageNumber," is currently rendering."));case 13:v.next=8;break;case 15:v.next=20;break;case 17:v.prev=17,v.t0=v.catch(6),s.e(v.t0);case 20:return v.prev=20,s.f(),v.finish(20);case 23:this.commonObjs.clear(),o||this.fontLoader.clear(),_classPrivateFieldGet$1(this,_methodPromises).clear(),this.filterFactory.destroy(!0);case 27:case"end":return v.stop()}},r,this,[[6,17,20,23]])})),function(){return n.apply(this,arguments)})},{key:"loadingParams",get:function(){var r=this._params,o=r.disableAutoFetch,s=r.enableXfa;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:o,enableXfa:s})}}]),e}();function _cacheSimpleMethod2(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=_classPrivateFieldGet$1(this,_methodPromises).get(e);if(r)return r;var o=this.messageHandler.sendWithPromise(e,n);return _classPrivateFieldGet$1(this,_methodPromises).set(e,o),o}var _objs=new WeakMap,_ensureObj=new WeakSet,PDFObjects=function(){function e(){_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec$1(this,_objs,{writable:!0,value:Object.create(null)})}return _createClass(e,[{key:"get",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(r){var o=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,n);return o.capability.promise.then(function(){return r(o.data)}),null}var s=_classPrivateFieldGet$1(this,_objs)[n];if(s==null||!s.capability.settled)throw new Error("Requesting object that isn't resolved yet ".concat(n,"."));return s.data}},{key:"has",value:function(n){var r=_classPrivateFieldGet$1(this,_objs)[n];return(r==null?void 0:r.capability.settled)||!1}},{key:"resolve",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,o=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,n);o.data=r,o.capability.resolve()}},{key:"clear",value:function(){for(var n in _classPrivateFieldGet$1(this,_objs)){var r,o=_classPrivateFieldGet$1(this,_objs)[n].data;o==null||(r=o.bitmap)===null||r===void 0||r.close()}_classPrivateFieldSet$1(this,_objs,Object.create(null))}}]),e}();function _ensureObj2(e){var n=_classPrivateFieldGet$1(this,_objs)[e];return n||(_classPrivateFieldGet$1(this,_objs)[e]={capability:(0,_util.createPromiseCapability)(),data:null})}var _internalRenderTask=new WeakMap,RenderTask=function(){function e(n){_classCallCheck(this,e),_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:!0,value:null}),_classPrivateFieldSet(this,_internalRenderTask,n),this.onContinue=null}return _createClass(e,[{key:"promise",get:function(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise}},{key:"cancel",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;_classPrivateFieldGet(this,_internalRenderTask).cancel(null,n)}},{key:"separateAnnots",get:function(){var n=_classPrivateFieldGet(this,_internalRenderTask).operatorList.separateAnnots;if(!n)return!1;var r=_classPrivateFieldGet(this,_internalRenderTask).annotationCanvasMap;return n.form||n.canvas&&(r==null?void 0:r.size)>0}}]),e}();exports.RenderTask=RenderTask;var InternalRenderTask=function(){function e(r){_classCallCheck(this,e);var o=r.callback,s=r.params,u=r.objs,d=r.commonObjs,f=r.annotationCanvasMap,v=r.operatorList,m=r.pageIndex,_=r.canvasFactory,g=r.filterFactory,y=r.useRequestAnimationFrame,w=y!==void 0&&y,x=r.pdfBug,k=x!==void 0&&x,S=r.pageColors,E=S===void 0?null:S;this.callback=o,this.params=s,this.objs=u,this.commonObjs=d,this.annotationCanvasMap=f,this.operatorListIdx=null,this.operatorList=v,this._pageIndex=m,this.canvasFactory=_,this.filterFactory=g,this._pdfBug=k,this.pageColors=E,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=w===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=s.canvasContext.canvas}var n;return _createClass(e,[{key:"completed",get:function(){return this.capability.promise.catch(function(){})}},{key:"initializeGraphics",value:function(r){var o,s,u=r.transparency,d=u!==void 0&&u,f=r.optionalContentConfig;if(!this.cancelled){if(this._canvas){if(_classStaticPrivateFieldSpecGet(e,e,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(e,e,_canvasInUse).add(this._canvas)}this._pdfBug&&(o=globalThis.StepperManager)!==null&&o!==void 0&&o.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var v=this.params,m=v.canvasContext,_=v.viewport,g=v.transform,y=v.background;this.gfx=new _canvas.CanvasGraphics(m,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:f},this.annotationCanvasMap),this.gfx.beginDrawing({transform:g,viewport:_,transparency:d,background:y}),this.operatorListIdx=0,this.graphicsReady=!0,(s=this.graphicsReadyCallback)===null||s===void 0||s.call(this)}}},{key:"cancel",value:function(){var r,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.running=!1,this.cancelled=!0,(r=this.gfx)===null||r===void 0||r.endDrawing(this.pageColors),this._canvas&&_classStaticPrivateFieldSpecGet(e,e,_canvasInUse).delete(this._canvas),this.callback(o||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas",s))}},{key:"operatorListChanged",value:function(){var r;this.graphicsReady?((r=this.stepper)===null||r===void 0||r.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function(){var r=this;this._useRequestAnimationFrame?window.requestAnimationFrame(function(){r._nextBound().catch(r._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}},{key:"_next",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this.cancelled){o.next=2;break}return o.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&_classStaticPrivateFieldSpecGet(e,e,_canvasInUse).delete(this._canvas),this.callback()));case 4:case"end":return o.stop()}},r,this)})),function(){return n.apply(this,arguments)})}]),e}(),_canvasInUse={writable:!0,value:new WeakSet},version="3.5.141";exports.version=version;var build="be0f6ee08";exports.build=build},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.PrintAnnotationStorage=n.AnnotationStorage=void 0;var o=r(1),s=r(140),u=r(144);function d(T,M,I){f(T,M),M.set(T,I)}function f(T,M){if(M.has(T))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(T,M,I){return function(F,O,N){if(O.set)O.set.call(F,N);else{if(!O.writable)throw new TypeError("attempted to set read only private field");O.value=N}}(T,_(T,M,"set"),I),I}function m(T,M){return function(I,F){return F.get?F.get.call(I):F.value}(T,_(T,M,"get"))}function _(T,M,I){if(!M.has(T))throw new TypeError("attempted to "+I+" private field on non-instance");return M.get(T)}var g=new WeakMap,y=new WeakMap,w=new WeakSet,x=function(){function T(){var M,I;_classCallCheck(this,T),f(M=this,I=w),I.add(M),d(this,g,{writable:!0,value:!1}),d(this,y,{writable:!0,value:new Map}),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}return _createClass(T,[{key:"getValue",value:function(M,I){var F=m(this,y).get(M);return F===void 0?I:Object.assign(I,F)}},{key:"getRawValue",value:function(M){return m(this,y).get(M)}},{key:"remove",value:function(M){if(m(this,y).delete(M),m(this,y).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){var I,F=_createForOfIteratorHelper(m(this,y).values());try{for(F.s();!(I=F.n()).done;)if(I.value instanceof s.AnnotationEditor)return}catch(O){F.e(O)}finally{F.f()}this.onAnnotationEditor(null)}}},{key:"setValue",value:function(M,I){var F=m(this,y).get(M),O=!1;if(F!==void 0)for(var N=0,D=Object.entries(I);N<D.length;N++){var X=_slicedToArray(D[N],2),U=X[0],Z=X[1];F[U]!==Z&&(O=!0,F[U]=Z)}else O=!0,m(this,y).set(M,I);O&&function(j,Q,ve){if(!Q.has(j))throw new TypeError("attempted to get private field on non-instance");return ve}(this,w,k).call(this),I instanceof s.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(I.constructor._type)}},{key:"has",value:function(M){return m(this,y).has(M)}},{key:"getAll",value:function(){return m(this,y).size>0?(0,o.objectFromMap)(m(this,y)):null}},{key:"setAll",value:function(M){for(var I=0,F=Object.entries(M);I<F.length;I++){var O=_slicedToArray(F[I],2),N=O[0],D=O[1];this.setValue(N,D)}}},{key:"size",get:function(){return m(this,y).size}},{key:"resetModified",value:function(){m(this,g)&&(v(this,g,!1),typeof this.onResetModified=="function"&&this.onResetModified())}},{key:"print",get:function(){return new E(this)}},{key:"serializable",get:function(){if(m(this,y).size===0)return null;var M,I=new Map,F=_createForOfIteratorHelper(m(this,y));try{for(F.s();!(M=F.n()).done;){var O=_slicedToArray(M.value,2),N=O[0],D=O[1],X=D instanceof s.AnnotationEditor?D.serialize():D;X&&I.set(N,X)}}catch(U){F.e(U)}finally{F.f()}return I}}],[{key:"getHash",value:function(M){if(!M)return"";var I,F=new u.MurmurHash3_64,O=_createForOfIteratorHelper(M);try{for(O.s();!(I=O.n()).done;){var N=_slicedToArray(I.value,2),D=N[0],X=N[1];F.update("".concat(D,":").concat(JSON.stringify(X)))}}catch(U){O.e(U)}finally{O.f()}return F.hexdigest()}}]),T}();function k(){m(this,g)||(v(this,g,!0),typeof this.onSetModified=="function"&&this.onSetModified())}n.AnnotationStorage=x;var S=new WeakMap,E=function(T){_inherits(I,T);var M=_createSuper(I);function I(F){var O;return _classCallCheck(this,I),_classPrivateFieldInitSpec(_assertThisInitialized(O=M.call(this)),S,{writable:!0,value:null}),_classPrivateFieldSet(_assertThisInitialized(O),S,structuredClone(F.serializable)),O}return _createClass(I,[{key:"print",get:function(){(0,o.unreachable)("Should not call PrintAnnotationStorage.print")}},{key:"serializable",get:function(){return _classPrivateFieldGet(this,S)}}]),I}(x);n.PrintAnnotationStorage=E},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationEditor=void 0;var o=r(141),s=r(1),u=new WeakMap,d=new WeakMap,f=new WeakMap,v=new WeakMap,m=new WeakMap,_=new WeakMap,g=function(){function y(w){_classCallCheck(this,y),_classPrivateFieldInitSpec(this,u,{writable:!0,value:this.focusin.bind(this)}),_classPrivateFieldInitSpec(this,d,{writable:!0,value:this.focusout.bind(this)}),_classPrivateFieldInitSpec(this,f,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,v,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,m,{writable:!0,value:!1}),_defineProperty$1(this,"_uiManager",null),_classPrivateFieldInitSpec(this,_,{writable:!0,value:y._zIndex++}),this.constructor===y&&(0,s.unreachable)("Cannot initialize AnnotationEditor."),this.parent=w.parent,this.id=w.id,this.width=this.height=null,this.pageIndex=w.parent.pageIndex,this.name=w.name,this.div=null,this._uiManager=w.uiManager;var x=this.parent.viewport,k=x.rotation,S=x.rawDims,E=S.pageWidth,T=S.pageHeight,M=S.pageX,I=S.pageY;this.rotation=k,this.pageDimensions=[E,T],this.pageTranslation=[M,I];var F=_slicedToArray(this.parentDimensions,2),O=F[0],N=F[1];this.x=w.x/O,this.y=w.y/N,this.isAttachedToDOM=!1}return _createClass(y,[{key:"addCommands",value:function(w){this._uiManager.addCommands(w)}},{key:"currentLayer",get:function(){return this._uiManager.currentLayer}},{key:"setInBackground",value:function(){this.div.style.zIndex=0}},{key:"setInForeground",value:function(){this.div.style.zIndex=_classPrivateFieldGet(this,_)}},{key:"setParent",value:function(w){w!==null&&(this.pageIndex=w.pageIndex,this.pageDimensions=w.pageDimensions),this.parent=w}},{key:"focusin",value:function(w){_classPrivateFieldGet(this,f)?_classPrivateFieldSet(this,f,!1):this.parent.setSelected(this)}},{key:"focusout",value:function(w){var x;if(this.isAttachedToDOM){var k=w.relatedTarget;k!=null&&k.closest("#".concat(this.id))||(w.preventDefault(),(x=this.parent)!==null&&x!==void 0&&x.isMultipleSelection||this.commitOrRemove())}}},{key:"commitOrRemove",value:function(){this.isEmpty()?this.remove():this.commit()}},{key:"commit",value:function(){this.addToAnnotationStorage()}},{key:"addToAnnotationStorage",value:function(){this._uiManager.addToAnnotationStorage(this)}},{key:"dragstart",value:function(w){var x=this.parent.div.getBoundingClientRect();this.startX=w.clientX-x.x,this.startY=w.clientY-x.y,w.dataTransfer.setData("text/plain",this.id),w.dataTransfer.effectAllowed="move"}},{key:"setAt",value:function(w,x,k,S){var E=_slicedToArray(this.parentDimensions,2),T=E[0],M=E[1],I=_slicedToArray(this.screenToPageTranslation(k,S),2);k=I[0],S=I[1],this.x=(w+k)/T,this.y=(x+S)/M,this.div.style.left="".concat(100*this.x,"%"),this.div.style.top="".concat(100*this.y,"%")}},{key:"translate",value:function(w,x){var k=_slicedToArray(this.parentDimensions,2),S=k[0],E=k[1],T=_slicedToArray(this.screenToPageTranslation(w,x),2);w=T[0],x=T[1],this.x+=w/S,this.y+=x/E,this.div.style.left="".concat(100*this.x,"%"),this.div.style.top="".concat(100*this.y,"%")}},{key:"screenToPageTranslation",value:function(w,x){switch(this.parentRotation){case 90:return[x,-w];case 180:return[-w,-x];case 270:return[-x,w];default:return[w,x]}}},{key:"parentScale",get:function(){return this._uiManager.viewParameters.realScale}},{key:"parentRotation",get:function(){return this._uiManager.viewParameters.rotation}},{key:"parentDimensions",get:function(){var w=this._uiManager.viewParameters.realScale,x=_slicedToArray(this.pageDimensions,2);return[x[0]*w,x[1]*w]}},{key:"setDims",value:function(w,x){var k=_slicedToArray(this.parentDimensions,2),S=k[0],E=k[1];this.div.style.width="".concat(100*w/S,"%"),this.div.style.height="".concat(100*x/E,"%")}},{key:"fixDims",value:function(){var w=this.div.style,x=w.height,k=w.width,S=k.endsWith("%"),E=x.endsWith("%");if(!S||!E){var T=_slicedToArray(this.parentDimensions,2),M=T[0],I=T[1];S||(w.width="".concat(100*parseFloat(k)/M,"%")),E||(w.height="".concat(100*parseFloat(x)/I,"%"))}}},{key:"getInitialTranslation",value:function(){return[0,0]}},{key:"render",value:function(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",_classPrivateFieldGet(this,u)),this.div.addEventListener("focusout",_classPrivateFieldGet(this,d));var w=_slicedToArray(this.getInitialTranslation(),2),x=w[0],k=w[1];return this.translate(x,k),(0,o.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}},{key:"pointerdown",value:function(w){var x=s.FeatureTest.platform.isMac;w.button!==0||w.ctrlKey&&x?w.preventDefault():(w.ctrlKey&&!x||w.shiftKey||w.metaKey&&x?this.parent.toggleSelected(this):this.parent.setSelected(this),_classPrivateFieldSet(this,f,!0))}},{key:"getRect",value:function(w,x){var k=this.parentScale,S=_slicedToArray(this.pageDimensions,2),E=S[0],T=S[1],M=_slicedToArray(this.pageTranslation,2),I=M[0],F=M[1],O=w/k,N=x/k,D=this.x*E,X=this.y*T,U=this.width*E,Z=this.height*T;switch(this.rotation){case 0:return[D+O+I,T-X-N-Z+F,D+O+U+I,T-X-N+F];case 90:return[D+N+I,T-X+O+F,D+N+Z+I,T-X+O+U+F];case 180:return[D-O-U+I,T-X+N+F,D-O+I,T-X+N+Z+F];case 270:return[D-N-Z+I,T-X-O-U+F,D-N+I,T-X-O+F];default:throw new Error("Invalid rotation")}}},{key:"getRectInCurrentCoords",value:function(w,x){var k=_slicedToArray(w,4),S=k[0],E=k[1],T=k[2],M=k[3],I=T-S,F=M-E;switch(this.rotation){case 0:return[S,x-M,I,F];case 90:return[S,x-E,F,I];case 180:return[T,x-E,I,F];case 270:return[T,x-M,F,I];default:throw new Error("Invalid rotation")}}},{key:"onceAdded",value:function(){}},{key:"isEmpty",value:function(){return!1}},{key:"enableEditMode",value:function(){_classPrivateFieldSet(this,m,!0)}},{key:"disableEditMode",value:function(){_classPrivateFieldSet(this,m,!1)}},{key:"isInEditMode",value:function(){return _classPrivateFieldGet(this,m)}},{key:"shouldGetKeyboardEvents",value:function(){return!1}},{key:"needsToBeRebuilt",value:function(){return this.div&&!this.isAttachedToDOM}},{key:"rebuild",value:function(){var w;(w=this.div)===null||w===void 0||w.addEventListener("focusin",_classPrivateFieldGet(this,u))}},{key:"serialize",value:function(){(0,s.unreachable)("An editor must be serializable")}},{key:"remove",value:function(){this.div.removeEventListener("focusin",_classPrivateFieldGet(this,u)),this.div.removeEventListener("focusout",_classPrivateFieldGet(this,d)),this.isEmpty()||this.commit(),this.parent.remove(this)}},{key:"select",value:function(){var w;(w=this.div)===null||w===void 0||w.classList.add("selectedEditor")}},{key:"unselect",value:function(){var w;(w=this.div)===null||w===void 0||w.classList.remove("selectedEditor")}},{key:"updateParams",value:function(w,x){}},{key:"disableEditing",value:function(){}},{key:"enableEditing",value:function(){}},{key:"propertiesToUpdate",get:function(){return{}}},{key:"contentDiv",get:function(){return this.div}},{key:"isEditing",get:function(){return _classPrivateFieldGet(this,v)},set:function(w){_classPrivateFieldSet(this,v,w),w?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}],[{key:"_defaultLineColor",get:function(){return(0,s.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}},{key:"deserialize",value:function(w,x,k){var S=new this.prototype.constructor({parent:x,id:x.getNextId(),uiManager:k});S.rotation=w.rotation;var E=_slicedToArray(S.pageDimensions,2),T=E[0],M=E[1],I=_slicedToArray(S.getRectInCurrentCoords(w.rect,M),4),F=I[0],O=I[1],N=I[2],D=I[3];return S.x=F/T,S.y=O/M,S.width=N/T,S.height=D/M,S}}]),y}();_defineProperty$1(g,"_colorManager",new o.ColorManager),_defineProperty$1(g,"_zIndex",1),n.AnnotationEditor=g},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.KeyboardManager=n.CommandManager=n.ColorManager=n.AnnotationEditorUIManager=void 0,n.bindEvents=function(Ue,qe,Ye){var st,ot=_createForOfIteratorHelper(Ye);try{for(ot.s();!(st=ot.n()).done;){var Qe=st.value;qe.addEventListener(Qe,Ue[Qe].bind(Ue))}}catch(tt){ot.e(tt)}finally{ot.f()}},n.opacityToHex=function(Ue){return Math.round(Math.min(255,Math.max(1,255*Ue))).toString(16).padStart(2,"0")};var o=r(1),s=r(142);function u(Ue,qe,Ye){_(Ue,qe),qe.set(Ue,Ye)}function d(Ue,qe){return function(Ye,st){return st.get?st.get.call(Ye):st.value}(Ue,v(Ue,qe,"get"))}function f(Ue,qe,Ye){return function(st,ot,Qe){if(ot.set)ot.set.call(st,Qe);else{if(!ot.writable)throw new TypeError("attempted to set read only private field");ot.value=Qe}}(Ue,v(Ue,qe,"set"),Ye),Ye}function v(Ue,qe,Ye){if(!qe.has(Ue))throw new TypeError("attempted to "+Ye+" private field on non-instance");return qe.get(Ue)}function m(Ue,qe){_(Ue,qe),qe.add(Ue)}function _(Ue,qe){if(qe.has(Ue))throw new TypeError("Cannot initialize the same private elements twice on an object")}function g(Ue,qe,Ye){if(!qe.has(Ue))throw new TypeError("attempted to get private field on non-instance");return Ye}var y=new WeakMap,w=function(){function Ue(){_classCallCheck(this,Ue),_classPrivateFieldInitSpec(this,y,{writable:!0,value:0})}return _createClass(Ue,[{key:"getId",value:function(){var qe,Ye;return"".concat(o.AnnotationEditorPrefix).concat((_classPrivateFieldSet(this,y,(qe=_classPrivateFieldGet(this,y),Ye=qe++,qe)),Ye))}}]),Ue}(),x=new WeakMap,k=new WeakMap,S=new WeakMap,E=new WeakMap,T=function(){function Ue(){_classCallCheck(this,Ue),_classPrivateFieldInitSpec(this,x,{writable:!0,value:[]}),_classPrivateFieldInitSpec(this,k,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,S,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,E,{writable:!0,value:-1}),_classPrivateFieldSet(this,S,arguments.length>0&&arguments[0]!==void 0?arguments[0]:128)}return _createClass(Ue,[{key:"add",value:function(qe){var Ye=qe.cmd,st=qe.undo,ot=qe.mustExec,Qe=qe.type,tt=Qe===void 0?NaN:Qe,nt=qe.overwriteIfSameType,it=nt!==void 0&&nt,lt=qe.keepUndo,Et=lt!==void 0&&lt;if(ot&&Ye(),!_classPrivateFieldGet(this,k)){var St={cmd:Ye,undo:st,type:tt};if(_classPrivateFieldGet(this,E)===-1)return _classPrivateFieldGet(this,x).length>0&&(_classPrivateFieldGet(this,x).length=0),_classPrivateFieldSet(this,E,0),void _classPrivateFieldGet(this,x).push(St);if(it&&_classPrivateFieldGet(this,x)[_classPrivateFieldGet(this,E)].type===tt)return Et&&(St.undo=_classPrivateFieldGet(this,x)[_classPrivateFieldGet(this,E)].undo),void(_classPrivateFieldGet(this,x)[_classPrivateFieldGet(this,E)]=St);var Mt=_classPrivateFieldGet(this,E)+1;Mt===_classPrivateFieldGet(this,S)?_classPrivateFieldGet(this,x).splice(0,1):(_classPrivateFieldSet(this,E,Mt),Mt<_classPrivateFieldGet(this,x).length&&_classPrivateFieldGet(this,x).splice(Mt)),_classPrivateFieldGet(this,x).push(St)}}},{key:"undo",value:function(){_classPrivateFieldGet(this,E)!==-1&&(_classPrivateFieldSet(this,k,!0),_classPrivateFieldGet(this,x)[_classPrivateFieldGet(this,E)].undo(),_classPrivateFieldSet(this,k,!1),_classPrivateFieldSet(this,E,_classPrivateFieldGet(this,E)-1))}},{key:"redo",value:function(){_classPrivateFieldGet(this,E)<_classPrivateFieldGet(this,x).length-1&&(_classPrivateFieldSet(this,E,_classPrivateFieldGet(this,E)+1),_classPrivateFieldSet(this,k,!0),_classPrivateFieldGet(this,x)[_classPrivateFieldGet(this,E)].cmd(),_classPrivateFieldSet(this,k,!1))}},{key:"hasSomethingToUndo",value:function(){return _classPrivateFieldGet(this,E)!==-1}},{key:"hasSomethingToRedo",value:function(){return _classPrivateFieldGet(this,E)<_classPrivateFieldGet(this,x).length-1}},{key:"destroy",value:function(){_classPrivateFieldSet(this,x,null)}}]),Ue}();n.CommandManager=T;var M=new WeakSet,I=function(){function Ue(qe){_classCallCheck(this,Ue),m(this,M),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;var Ye,st=o.FeatureTest.platform.isMac,ot=_createForOfIteratorHelper(qe);try{for(ot.s();!(Ye=ot.n()).done;){var Qe,tt=_slicedToArray(Ye.value,2),nt=tt[0],it=tt[1],lt=_createForOfIteratorHelper(nt);try{for(lt.s();!(Qe=lt.n()).done;){var Et=Qe.value,St=Et.startsWith("mac+");st&&St?(this.callbacks.set(Et.slice(4),it),this.allKeys.add(Et.split("+").at(-1))):st||St||(this.callbacks.set(Et,it),this.allKeys.add(Et.split("+").at(-1)))}}catch(Mt){lt.e(Mt)}finally{lt.f()}}}catch(Mt){ot.e(Mt)}finally{ot.f()}}return _createClass(Ue,[{key:"exec",value:function(qe,Ye){if(this.allKeys.has(Ye.key)){var st=this.callbacks.get(g(this,M,F).call(this,Ye));st&&(st.bind(qe)(),Ye.stopPropagation(),Ye.preventDefault())}}}]),Ue}();function F(Ue){Ue.altKey&&this.buffer.push("alt"),Ue.ctrlKey&&this.buffer.push("ctrl"),Ue.metaKey&&this.buffer.push("meta"),Ue.shiftKey&&this.buffer.push("shift"),this.buffer.push(Ue.key);var qe=this.buffer.join("+");return this.buffer.length=0,qe}n.KeyboardManager=I;var O=function(){function Ue(){_classCallCheck(this,Ue)}return _createClass(Ue,[{key:"_colors",get:function(){var qe=new Map([["CanvasText",null],["Canvas",null]]);return(0,s.getColorValues)(qe),(0,o.shadow)(this,"_colors",qe)}},{key:"convert",value:function(qe){var Ye=(0,s.getRGB)(qe);if(!window.matchMedia("(forced-colors: active)").matches)return Ye;var st,ot=_createForOfIteratorHelper(this._colors);try{for(ot.s();!(st=ot.n()).done;){var Qe=_slicedToArray(st.value,2),tt=Qe[0];if(Qe[1].every(function(nt,it){return nt===Ye[it]}))return Ue._colorsMapping.get(tt)}}catch(nt){ot.e(nt)}finally{ot.f()}return Ye}},{key:"getHexCode",value:function(qe){var Ye,st=this._colors.get(qe);return st?(Ye=o.Util).makeHexColor.apply(Ye,_toConsumableArray$1(st)):qe}}]),Ue}();_defineProperty$1(O,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),n.ColorManager=O;var N,D,X,U=new WeakMap,Z=new WeakMap,j=new WeakMap,Q=new WeakMap,ve=new WeakMap,Se=new WeakMap,we=new WeakMap,oe=new WeakMap,ne=new WeakMap,q=new WeakMap,H=new WeakMap,Y=new WeakMap,le=new WeakMap,Ce=new WeakMap,Te=new WeakMap,ke=new WeakMap,Ee=new WeakMap,Pe=new WeakMap,Be=new WeakMap,$e=new WeakMap,Oe=new WeakMap,Ne=new WeakMap,J=new WeakMap,fe=new WeakSet,re=new WeakSet,_e=new WeakSet,be=new WeakSet,Ae=new WeakSet,Le=new WeakSet,Ve=new WeakSet,Fe=new WeakSet,De=new WeakSet,We=new WeakSet,Re=new WeakSet,He=function(){function Ue(qe,Ye,st){_classCallCheck(this,Ue),m(this,Re),m(this,We),m(this,De),m(this,Fe),m(this,Ve),m(this,Le),m(this,Ae),m(this,be),m(this,_e),m(this,re),m(this,fe),u(this,U,{writable:!0,value:null}),u(this,Z,{writable:!0,value:new Map}),u(this,j,{writable:!0,value:new Map}),u(this,Q,{writable:!0,value:null}),u(this,ve,{writable:!0,value:new T}),u(this,Se,{writable:!0,value:0}),u(this,we,{writable:!0,value:null}),u(this,oe,{writable:!0,value:new Set}),u(this,ne,{writable:!0,value:null}),u(this,q,{writable:!0,value:new w}),u(this,H,{writable:!0,value:!1}),u(this,Y,{writable:!0,value:o.AnnotationEditorType.NONE}),u(this,le,{writable:!0,value:new Set}),u(this,Ce,{writable:!0,value:this.copy.bind(this)}),u(this,Te,{writable:!0,value:this.cut.bind(this)}),u(this,ke,{writable:!0,value:this.paste.bind(this)}),u(this,Ee,{writable:!0,value:this.keydown.bind(this)}),u(this,Pe,{writable:!0,value:this.onEditingAction.bind(this)}),u(this,Be,{writable:!0,value:this.onPageChanging.bind(this)}),u(this,$e,{writable:!0,value:this.onScaleChanging.bind(this)}),u(this,Oe,{writable:!0,value:this.onRotationChanging.bind(this)}),u(this,Ne,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}}),u(this,J,{writable:!0,value:null}),f(this,J,qe),f(this,ne,Ye),d(this,ne)._on("editingaction",d(this,Pe)),d(this,ne)._on("pagechanging",d(this,Be)),d(this,ne)._on("scalechanging",d(this,$e)),d(this,ne)._on("rotationchanging",d(this,Oe)),f(this,Q,st),this.viewParameters={realScale:s.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}return _createClass(Ue,[{key:"destroy",value:function(){g(this,re,Xe).call(this),d(this,ne)._off("editingaction",d(this,Pe)),d(this,ne)._off("pagechanging",d(this,Be)),d(this,ne)._off("scalechanging",d(this,$e)),d(this,ne)._off("rotationchanging",d(this,Oe));var qe,Ye=_createForOfIteratorHelper(d(this,j).values());try{for(Ye.s();!(qe=Ye.n()).done;)qe.value.destroy()}catch(st){Ye.e(st)}finally{Ye.f()}d(this,j).clear(),d(this,Z).clear(),d(this,oe).clear(),f(this,U,null),d(this,le).clear(),d(this,ve).destroy()}},{key:"onPageChanging",value:function(qe){var Ye=qe.pageNumber;f(this,Se,Ye-1)}},{key:"focusMainContainer",value:function(){d(this,J).focus()}},{key:"addShouldRescale",value:function(qe){d(this,oe).add(qe)}},{key:"removeShouldRescale",value:function(qe){d(this,oe).delete(qe)}},{key:"onScaleChanging",value:function(qe){var Ye=qe.scale;this.commitOrRemove(),this.viewParameters.realScale=Ye*s.PixelsPerInch.PDF_TO_CSS_UNITS;var st,ot=_createForOfIteratorHelper(d(this,oe));try{for(ot.s();!(st=ot.n()).done;)st.value.onScaleChanging()}catch(Qe){ot.e(Qe)}finally{ot.f()}}},{key:"onRotationChanging",value:function(qe){var Ye=qe.pagesRotation;this.commitOrRemove(),this.viewParameters.rotation=Ye}},{key:"addToAnnotationStorage",value:function(qe){qe.isEmpty()||!d(this,Q)||d(this,Q).has(qe.id)||d(this,Q).setValue(qe.id,qe)}},{key:"copy",value:function(qe){if(qe.preventDefault(),d(this,U)&&d(this,U).commitOrRemove(),this.hasSelection){var Ye,st=[],ot=_createForOfIteratorHelper(d(this,le));try{for(ot.s();!(Ye=ot.n()).done;){var Qe=Ye.value;Qe.isEmpty()||st.push(Qe.serialize())}}catch(tt){ot.e(tt)}finally{ot.f()}st.length!==0&&qe.clipboardData.setData("application/pdfjs",JSON.stringify(st))}}},{key:"cut",value:function(qe){this.copy(qe),this.delete()}},{key:"paste",value:function(qe){var Ye=this;qe.preventDefault();var st=qe.clipboardData.getData("application/pdfjs");if(st){try{st=JSON.parse(st)}catch(Et){return void(0,o.warn)('paste: "'.concat(Et.message,'".'))}if(Array.isArray(st)){this.unselectAll();var ot=d(this,j).get(d(this,Se));try{var Qe,tt=[],nt=_createForOfIteratorHelper(st);try{for(nt.s();!(Qe=nt.n()).done;){var it=Qe.value,lt=ot.deserialize(it);if(!lt)return;tt.push(lt)}}catch(Et){nt.e(Et)}finally{nt.f()}this.addCommands({cmd:function(){for(var Et=0,St=tt;Et<St.length;Et++){var Mt=St[Et];g(Ye,De,Ct).call(Ye,Mt)}g(Ye,Re,Pt).call(Ye,tt)},undo:function(){for(var Et=0,St=tt;Et<St.length;Et++)St[Et].remove()},mustExec:!0})}catch(Et){(0,o.warn)('paste: "'.concat(Et.message,'".'))}}}}},{key:"keydown",value:function(qe){var Ye;(Ye=this.getActive())!==null&&Ye!==void 0&&Ye.shouldGetKeyboardEvents()||Ue._keyboardManager.exec(this,qe)}},{key:"onEditingAction",value:function(qe){["undo","redo","delete","selectAll"].includes(qe.name)&&this[qe.name]()}},{key:"setEditingState",value:function(qe){qe?(g(this,fe,Ze).call(this),g(this,_e,at).call(this),g(this,Ae,ct).call(this,{isEditing:d(this,Y)!==o.AnnotationEditorType.NONE,isEmpty:g(this,We,ht).call(this),hasSomethingToUndo:d(this,ve).hasSomethingToUndo(),hasSomethingToRedo:d(this,ve).hasSomethingToRedo(),hasSelectedEditor:!1})):(g(this,re,Xe).call(this),g(this,be,ut).call(this),g(this,Ae,ct).call(this,{isEditing:!1}))}},{key:"registerEditorTypes",value:function(qe){if(!d(this,we)){f(this,we,qe);var Ye,st=_createForOfIteratorHelper(d(this,we));try{for(st.s();!(Ye=st.n()).done;){var ot=Ye.value;g(this,Le,mt).call(this,ot.defaultPropertiesToUpdate)}}catch(Qe){st.e(Qe)}finally{st.f()}}}},{key:"getId",value:function(){return d(this,q).getId()}},{key:"currentLayer",get:function(){return d(this,j).get(d(this,Se))}},{key:"currentPageIndex",get:function(){return d(this,Se)}},{key:"addLayer",value:function(qe){d(this,j).set(qe.pageIndex,qe),d(this,H)?qe.enable():qe.disable()}},{key:"removeLayer",value:function(qe){d(this,j).delete(qe.pageIndex)}},{key:"updateMode",value:function(qe){if(f(this,Y,qe),qe===o.AnnotationEditorType.NONE)this.setEditingState(!1),g(this,Fe,kt).call(this);else{this.setEditingState(!0),g(this,Ve,pt).call(this);var Ye,st=_createForOfIteratorHelper(d(this,j).values());try{for(st.s();!(Ye=st.n()).done;)Ye.value.updateMode(qe)}catch(ot){st.e(ot)}finally{st.f()}}}},{key:"updateToolbar",value:function(qe){qe!==d(this,Y)&&d(this,ne).dispatch("switchannotationeditormode",{source:this,mode:qe})}},{key:"updateParams",value:function(qe,Ye){if(d(this,we)){var st,ot=_createForOfIteratorHelper(d(this,le));try{for(ot.s();!(st=ot.n()).done;)st.value.updateParams(qe,Ye)}catch(nt){ot.e(nt)}finally{ot.f()}var Qe,tt=_createForOfIteratorHelper(d(this,we));try{for(tt.s();!(Qe=tt.n()).done;)Qe.value.updateDefaultParams(qe,Ye)}catch(nt){tt.e(nt)}finally{tt.f()}}}},{key:"getEditors",value:function(qe){var Ye,st=[],ot=_createForOfIteratorHelper(d(this,Z).values());try{for(ot.s();!(Ye=ot.n()).done;){var Qe=Ye.value;Qe.pageIndex===qe&&st.push(Qe)}}catch(tt){ot.e(tt)}finally{ot.f()}return st}},{key:"getEditor",value:function(qe){return d(this,Z).get(qe)}},{key:"addEditor",value:function(qe){d(this,Z).set(qe.id,qe)}},{key:"removeEditor",value:function(qe){var Ye;d(this,Z).delete(qe.id),this.unselect(qe),(Ye=d(this,Q))===null||Ye===void 0||Ye.remove(qe.id)}},{key:"setActiveEditor",value:function(qe){d(this,U)!==qe&&(f(this,U,qe),qe&&g(this,Le,mt).call(this,qe.propertiesToUpdate))}},{key:"toggleSelected",value:function(qe){if(d(this,le).has(qe))return d(this,le).delete(qe),qe.unselect(),void g(this,Ae,ct).call(this,{hasSelectedEditor:this.hasSelection});d(this,le).add(qe),qe.select(),g(this,Le,mt).call(this,qe.propertiesToUpdate),g(this,Ae,ct).call(this,{hasSelectedEditor:!0})}},{key:"setSelected",value:function(qe){var Ye,st=_createForOfIteratorHelper(d(this,le));try{for(st.s();!(Ye=st.n()).done;){var ot=Ye.value;ot!==qe&&ot.unselect()}}catch(Qe){st.e(Qe)}finally{st.f()}d(this,le).clear(),d(this,le).add(qe),qe.select(),g(this,Le,mt).call(this,qe.propertiesToUpdate),g(this,Ae,ct).call(this,{hasSelectedEditor:!0})}},{key:"isSelected",value:function(qe){return d(this,le).has(qe)}},{key:"unselect",value:function(qe){qe.unselect(),d(this,le).delete(qe),g(this,Ae,ct).call(this,{hasSelectedEditor:this.hasSelection})}},{key:"hasSelection",get:function(){return d(this,le).size!==0}},{key:"undo",value:function(){d(this,ve).undo(),g(this,Ae,ct).call(this,{hasSomethingToUndo:d(this,ve).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:g(this,We,ht).call(this)})}},{key:"redo",value:function(){d(this,ve).redo(),g(this,Ae,ct).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:d(this,ve).hasSomethingToRedo(),isEmpty:g(this,We,ht).call(this)})}},{key:"addCommands",value:function(qe){d(this,ve).add(qe),g(this,Ae,ct).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:g(this,We,ht).call(this)})}},{key:"delete",value:function(){var qe=this;if(this.commitOrRemove(),this.hasSelection){var Ye=_toConsumableArray$1(d(this,le));this.addCommands({cmd:function(){var st,ot=_createForOfIteratorHelper(Ye);try{for(ot.s();!(st=ot.n()).done;)st.value.remove()}catch(Qe){ot.e(Qe)}finally{ot.f()}},undo:function(){var st,ot=_createForOfIteratorHelper(Ye);try{for(ot.s();!(st=ot.n()).done;){var Qe=st.value;g(qe,De,Ct).call(qe,Qe)}}catch(tt){ot.e(tt)}finally{ot.f()}},mustExec:!0})}}},{key:"commitOrRemove",value:function(){var qe;(qe=d(this,U))===null||qe===void 0||qe.commitOrRemove()}},{key:"selectAll",value:function(){var qe,Ye=_createForOfIteratorHelper(d(this,le));try{for(Ye.s();!(qe=Ye.n()).done;)qe.value.commit()}catch(st){Ye.e(st)}finally{Ye.f()}g(this,Re,Pt).call(this,d(this,Z).values())}},{key:"unselectAll",value:function(){if(d(this,U))d(this,U).commitOrRemove();else if(d(this,le).size!==0){var qe,Ye=_createForOfIteratorHelper(d(this,le));try{for(Ye.s();!(qe=Ye.n()).done;)qe.value.unselect()}catch(st){Ye.e(st)}finally{Ye.f()}d(this,le).clear(),g(this,Ae,ct).call(this,{hasSelectedEditor:!1})}}},{key:"isActive",value:function(qe){return d(this,U)===qe}},{key:"getActive",value:function(){return d(this,U)}},{key:"getMode",value:function(){return d(this,Y)}}]),Ue}();function Ze(){d(this,J).addEventListener("keydown",d(this,Ee))}function Xe(){d(this,J).removeEventListener("keydown",d(this,Ee))}function at(){document.addEventListener("copy",d(this,Ce)),document.addEventListener("cut",d(this,Te)),document.addEventListener("paste",d(this,ke))}function ut(){document.removeEventListener("copy",d(this,Ce)),document.removeEventListener("cut",d(this,Te)),document.removeEventListener("paste",d(this,ke))}function ct(Ue){var qe=this;Object.entries(Ue).some(function(Ye){var st=_slicedToArray(Ye,2),ot=st[0],Qe=st[1];return d(qe,Ne)[ot]!==Qe})&&d(this,ne).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(d(this,Ne),Ue)})}function mt(Ue){d(this,ne).dispatch("annotationeditorparamschanged",{source:this,details:Ue})}function pt(){if(!d(this,H)){f(this,H,!0);var Ue,qe=_createForOfIteratorHelper(d(this,j).values());try{for(qe.s();!(Ue=qe.n()).done;)Ue.value.enable()}catch(Ye){qe.e(Ye)}finally{qe.f()}}}function kt(){if(this.unselectAll(),d(this,H)){f(this,H,!1);var Ue,qe=_createForOfIteratorHelper(d(this,j).values());try{for(qe.s();!(Ue=qe.n()).done;)Ue.value.disable()}catch(Ye){qe.e(Ye)}finally{qe.f()}}}function Ct(Ue){var qe=d(this,j).get(Ue.pageIndex);qe?qe.addOrRebuild(Ue):this.addEditor(Ue)}function ht(){if(d(this,Z).size===0)return!0;if(d(this,Z).size===1){var Ue,qe=_createForOfIteratorHelper(d(this,Z).values());try{for(qe.s();!(Ue=qe.n()).done;)return Ue.value.isEmpty()}catch(Ye){qe.e(Ye)}finally{qe.f()}}return!1}function Pt(Ue){d(this,le).clear();var qe,Ye=_createForOfIteratorHelper(Ue);try{for(Ye.s();!(qe=Ye.n()).done;){var st=qe.value;st.isEmpty()||(d(this,le).add(st),st.select())}}catch(ot){Ye.e(ot)}finally{Ye.f()}g(this,Ae,ct).call(this,{hasSelectedEditor:!0})}n.AnnotationEditorUIManager=He,N=He,D="_keyboardManager",X=new I([[["ctrl+a","mac+meta+a"],He.prototype.selectAll],[["ctrl+z","mac+meta+z"],He.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],He.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],He.prototype.delete],[["Escape","mac+Escape"],He.prototype.unselectAll]]),(D=function(Ue){var qe=function(Ye,st){if(_typeof$1(Ye)!=="object"||Ye===null)return Ye;var ot=Ye[Symbol.toPrimitive];if(ot!==void 0){var Qe=ot.call(Ye,st||"default");if(_typeof$1(Qe)!=="object")return Qe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Ye)}(Ue,"string");return _typeof$1(qe)==="symbol"?qe:String(qe)}(D))in N?Object.defineProperty(N,D,{value:X,enumerable:!0,configurable:!0,writable:!0}):N[D]=X},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.StatTimer=n.RenderingCancelledException=n.PixelsPerInch=n.PageViewport=n.PDFDateString=n.DOMStandardFontDataFactory=n.DOMSVGFactory=n.DOMFilterFactory=n.DOMCanvasFactory=n.DOMCMapReaderFactory=n.AnnotationPrefix=void 0,n.deprecated=function(Ee){console.log("Deprecated API usage: "+Ee)},n.getColorValues=function(Ee){var Pe=document.createElement("span");Pe.style.visibility="hidden",document.body.append(Pe);var Be,$e=_createForOfIteratorHelper(Ee.keys());try{for($e.s();!(Be=$e.n()).done;){var Oe=Be.value;Pe.style.color=Oe;var Ne=window.getComputedStyle(Pe).color;Ee.set(Oe,ke(Ne))}}catch(J){$e.e(J)}finally{$e.f()}Pe.remove()},n.getCurrentTransform=function(Ee){var Pe=Ee.getTransform(),Be=Pe.a,$e=Pe.b,Oe=Pe.c,Ne=Pe.d,J=Pe.e,fe=Pe.f;return[Be,$e,Oe,Ne,J,fe]},n.getCurrentTransformInverse=function(Ee){var Pe=Ee.getTransform().invertSelf(),Be=Pe.a,$e=Pe.b,Oe=Pe.c,Ne=Pe.d,J=Pe.e,fe=Pe.f;return[Be,$e,Oe,Ne,J,fe]},n.getFilenameFromUrl=function(Ee){var Pe=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!Pe){var Be=Ee.split(/[#?]/,1);Ee=_slicedToArray(Be,1)[0]}return Ee.substring(Ee.lastIndexOf("/")+1)},n.getPdfFilenameFromUrl=function(Ee){var Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof Ee!="string")return Pe;if(H(Ee))return(0,s.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Pe;var Be=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,$e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(Ee),Oe=Be.exec($e[1])||Be.exec($e[2])||Be.exec($e[3]);if(Oe&&(Oe=Oe[0]).includes("%"))try{Oe=Be.exec(decodeURIComponent(Oe))[0]}catch{}return Oe||Pe},n.getRGB=ke,n.getXfaPageViewport=function(Ee,Pe){var Be=Pe.scale,$e=Be===void 0?1:Be,Oe=Pe.rotation,Ne=Oe===void 0?0:Oe,J=Ee.attributes.style,fe=J.width,re=J.height,_e=[0,0,parseInt(fe),parseInt(re)];return new ne({viewBox:_e,scale:$e,rotation:Ne})},n.isDataScheme=H,n.isPdfFile=function(Ee){return typeof Ee=="string"&&/\.pdf$/i.test(Ee)},n.isValidFetchUrl=Ce,n.loadScript=function(Ee){var Pe=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Promise(function(Be,$e){var Oe=document.createElement("script");Oe.src=Ee,Oe.onload=function(Ne){Pe&&Oe.remove(),Be(Ne)},Oe.onerror=function(){$e(new Error("Cannot load script at: ".concat(Oe.src)))},(document.head||document.documentElement).append(Oe)})},n.setLayerDimensions=function(Ee,Pe){var Be=arguments.length>2&&arguments[2]!==void 0&&arguments[2],$e=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(Pe instanceof ne){var Oe=Pe.rawDims,Ne=Oe.pageWidth,J=Oe.pageHeight,fe=Ee.style,re="calc(var(--scale-factor) * ".concat(Ne,"px)"),_e="calc(var(--scale-factor) * ".concat(J,"px)");Be&&Pe.rotation%180!=0?(fe.width=_e,fe.height=re):(fe.width=re,fe.height=_e)}$e&&Ee.setAttribute("data-main-rotation",Pe.rotation)};var o=r(143),s=r(1);function u(Ee,Pe,Be){d(Ee,Pe),Pe.set(Ee,Be)}function d(Ee,Pe){if(Pe.has(Ee))throw new TypeError("Cannot initialize the same private elements twice on an object")}function f(Ee,Pe,Be){if(!Pe.has(Ee))throw new TypeError("attempted to get private field on non-instance");return Be}function v(Ee,Pe){return function(Be,$e){return $e.get?$e.get.call(Be):$e.value}(Ee,_(Ee,Pe,"get"))}function m(Ee,Pe,Be){return function($e,Oe,Ne){if(Oe.set)Oe.set.call($e,Ne);else{if(!Oe.writable)throw new TypeError("attempted to set read only private field");Oe.value=Ne}}(Ee,_(Ee,Pe,"set"),Be),Be}function _(Ee,Pe,Be){if(!Pe.has(Ee))throw new TypeError("attempted to "+Be+" private field on non-instance");return Pe.get(Ee)}var g="http://www.w3.org/2000/svg";n.AnnotationPrefix="pdfjs_internal_id_";var y=_createClass(function Ee(){_classCallCheck(this,Ee)});_defineProperty$1(y,"CSS",96),_defineProperty$1(y,"PDF",72),_defineProperty$1(y,"PDF_TO_CSS_UNITS",y.CSS/y.PDF),n.PixelsPerInch=y;var w=new WeakMap,x=new WeakMap,k=new WeakMap,S=new WeakMap,E=new WeakMap,T=new WeakMap,M=new WeakMap,I=new WeakMap,F=new WeakMap,O=new WeakMap,N=new WeakSet,D=function(Ee){_inherits(Be,Ee);var Pe=_createSuper(Be);function Be(){var $e;_classCallCheck(this,Be);var Oe,Ne,J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=J.docId,re=J.ownerDocument,_e=re===void 0?globalThis.document:re;return $e=Pe.call(this),d(Oe=_assertThisInitialized($e),Ne=N),Ne.add(Oe),u(_assertThisInitialized($e),O,{get:U,set:void 0}),u(_assertThisInitialized($e),F,{get:X,set:void 0}),u(_assertThisInitialized($e),w,{writable:!0,value:void 0}),u(_assertThisInitialized($e),x,{writable:!0,value:void 0}),u(_assertThisInitialized($e),k,{writable:!0,value:void 0}),u(_assertThisInitialized($e),S,{writable:!0,value:void 0}),u(_assertThisInitialized($e),E,{writable:!0,value:void 0}),u(_assertThisInitialized($e),T,{writable:!0,value:void 0}),u(_assertThisInitialized($e),M,{writable:!0,value:void 0}),u(_assertThisInitialized($e),I,{writable:!0,value:0}),m(_assertThisInitialized($e),k,fe),m(_assertThisInitialized($e),S,_e),$e}return _createClass(Be,[{key:"addFilter",value:function($e){var Oe,Ne;if(!$e)return"none";var J,fe,re,_e,be=v(this,F).get($e);if(be)return be;if($e.length===1){for(var Ae=$e[0],Le=new Array(256),Ve=0;Ve<256;Ve++)Le[Ve]=Ae[Ve]/255;_e=J=fe=re=Le.join(",")}else{for(var Fe=_slicedToArray($e,3),De=Fe[0],We=Fe[1],Re=Fe[2],He=new Array(256),Ze=new Array(256),Xe=new Array(256),at=0;at<256;at++)He[at]=De[at]/255,Ze[at]=We[at]/255,Xe[at]=Re[at]/255;J=He.join(","),fe=Ze.join(","),re=Xe.join(","),_e="".concat(J).concat(fe).concat(re)}if(be=v(this,F).get(_e))return v(this,F).set($e,be),be;var ut="g_".concat(v(this,k),"_transfer_map_").concat((m(this,I,(Oe=v(this,I),Ne=Oe++,Oe)),Ne)),ct="url(#".concat(ut,")");v(this,F).set($e,ct),v(this,F).set(_e,ct);var mt=v(this,S).createElementNS(g,"filter",g);mt.setAttribute("id",ut),mt.setAttribute("color-interpolation-filters","sRGB");var pt=v(this,S).createElementNS(g,"feComponentTransfer");return mt.append(pt),f(this,N,Z).call(this,pt,"feFuncR",J),f(this,N,Z).call(this,pt,"feFuncG",fe),f(this,N,Z).call(this,pt,"feFuncB",re),v(this,O).append(mt),ct}},{key:"addHCMFilter",value:function($e,Oe){var Ne,J,fe,re="".concat($e,"-").concat(Oe);if(v(this,T)===re)return v(this,M);if(m(this,T,re),m(this,M,"none"),(fe=v(this,E))===null||fe===void 0||fe.remove(),!$e||!Oe)return v(this,M);v(this,O).style.color=$e;var _e=ke($e=getComputedStyle(v(this,O)).getPropertyValue("color"));$e=(Ne=s.Util).makeHexColor.apply(Ne,_toConsumableArray$1(_e)),v(this,O).style.color=Oe;var be=ke(Oe=getComputedStyle(v(this,O)).getPropertyValue("color"));if(Oe=(J=s.Util).makeHexColor.apply(J,_toConsumableArray$1(be)),v(this,O).style.color="",$e==="#000000"&&Oe==="#ffffff"||$e===Oe)return v(this,M);for(var Ae=new Array(256),Le=0;Le<=255;Le++){var Ve=Le/255;Ae[Le]=Ve<=.03928?Ve/12.92:Math.pow((Ve+.055)/1.055,2.4)}var Fe=Ae.join(","),De="g_".concat(v(this,k),"_hcm_filter"),We=m(this,E,v(this,S).createElementNS(g,"filter",g));We.setAttribute("id",De),We.setAttribute("color-interpolation-filters","sRGB");var Re=v(this,S).createElementNS(g,"feComponentTransfer");We.append(Re),f(this,N,Z).call(this,Re,"feFuncR",Fe),f(this,N,Z).call(this,Re,"feFuncG",Fe),f(this,N,Z).call(this,Re,"feFuncB",Fe);var He=v(this,S).createElementNS(g,"feColorMatrix");He.setAttribute("type","matrix"),He.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),We.append(He),Re=v(this,S).createElementNS(g,"feComponentTransfer"),We.append(Re);var Ze=function(Xe,at){for(var ut=_e[Xe]/255,ct=be[Xe]/255,mt=new Array(at+1),pt=0;pt<=at;pt++)mt[pt]=ut+pt/at*(ct-ut);return mt.join(",")};return f(this,N,Z).call(this,Re,"feFuncR",Ze(0,5)),f(this,N,Z).call(this,Re,"feFuncG",Ze(1,5)),f(this,N,Z).call(this,Re,"feFuncB",Ze(2,5)),v(this,O).append(We),m(this,M,"url(#".concat(De,")")),v(this,M)}},{key:"destroy",value:function(){arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&v(this,M)||(v(this,x)&&(v(this,x).parentNode.parentNode.remove(),m(this,x,null)),v(this,w)&&(v(this,w).clear(),m(this,w,null)),m(this,I,0))}}]),Be}(o.BaseFilterFactory);function X(){return v(this,w)||m(this,w,new Map)}function U(){if(!v(this,x)){var Ee=v(this,S).createElement("div"),Pe=Ee.style;Pe.visibility="hidden",Pe.contain="strict",Pe.width=Pe.height=0,Pe.position="absolute",Pe.top=Pe.left=0,Pe.zIndex=-1;var Be=v(this,S).createElementNS(g,"svg");Be.setAttribute("width",0),Be.setAttribute("height",0),m(this,x,v(this,S).createElementNS(g,"defs")),Ee.append(Be),Be.append(v(this,x)),v(this,S).body.append(Ee)}return v(this,x)}function Z(Ee,Pe,Be){var $e=v(this,S).createElementNS(g,Pe);$e.setAttribute("type","discrete"),$e.setAttribute("tableValues",Be),Ee.append($e)}n.DOMFilterFactory=D;var j=function(Ee){_inherits(Be,Ee);var Pe=_createSuper(Be);function Be(){var $e;_classCallCheck(this,Be);var Oe=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).ownerDocument,Ne=Oe===void 0?globalThis.document:Oe;return($e=Pe.call(this))._document=Ne,$e}return _createClass(Be,[{key:"_createCanvas",value:function($e,Oe){var Ne=this._document.createElement("canvas");return Ne.width=$e,Ne.height=Oe,Ne}}]),Be}(o.BaseCanvasFactory);function Q(Ee){return ve.apply(this,arguments)}function ve(){return ve=_asyncToGenerator(_regeneratorRuntime().mark(function Ee(Pe){var Be,$e,Oe=arguments;return _regeneratorRuntime().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(Be=Oe.length>1&&Oe[1]!==void 0&&Oe[1],!Ce(Pe,document.baseURI)){Ne.next=21;break}return Ne.next=4,fetch(Pe);case 4:if(($e=Ne.sent).ok){Ne.next=7;break}throw new Error($e.statusText);case 7:if(!Be){Ne.next=15;break}return Ne.t1=Uint8Array,Ne.next=11,$e.arrayBuffer();case 11:Ne.t2=Ne.sent,Ne.t0=new Ne.t1(Ne.t2),Ne.next=20;break;case 15:return Ne.t3=s.stringToBytes,Ne.next=18,$e.text();case 18:Ne.t4=Ne.sent,Ne.t0=(0,Ne.t3)(Ne.t4);case 20:return Ne.abrupt("return",Ne.t0);case 21:return Ne.abrupt("return",new Promise(function(J,fe){var re=new XMLHttpRequest;re.open("GET",Pe,!0),Be&&(re.responseType="arraybuffer"),re.onreadystatechange=function(){if(re.readyState===XMLHttpRequest.DONE){var _e;if((re.status===200||re.status===0)&&(Be&&re.response?_e=new Uint8Array(re.response):!Be&&re.responseText&&(_e=(0,s.stringToBytes)(re.responseText)),_e))return void J(_e);fe(new Error(re.statusText))}},re.send(null)}));case 22:case"end":return Ne.stop()}},Ee)})),ve.apply(this,arguments)}n.DOMCanvasFactory=j;var Se=function(Ee){_inherits(Be,Ee);var Pe=_createSuper(Be);function Be(){return _classCallCheck(this,Be),Pe.apply(this,arguments)}return _createClass(Be,[{key:"_fetchData",value:function($e,Oe){return Q($e,this.isCompressed).then(function(Ne){return{cMapData:Ne,compressionType:Oe}})}}]),Be}(o.BaseCMapReaderFactory);n.DOMCMapReaderFactory=Se;var we=function(Ee){_inherits(Be,Ee);var Pe=_createSuper(Be);function Be(){return _classCallCheck(this,Be),Pe.apply(this,arguments)}return _createClass(Be,[{key:"_fetchData",value:function($e){return Q($e,!0)}}]),Be}(o.BaseStandardFontDataFactory);n.DOMStandardFontDataFactory=we;var oe=function(Ee){_inherits(Be,Ee);var Pe=_createSuper(Be);function Be(){return _classCallCheck(this,Be),Pe.apply(this,arguments)}return _createClass(Be,[{key:"_createSVG",value:function($e){return document.createElementNS(g,$e)}}]),Be}(o.BaseSVGFactory);n.DOMSVGFactory=oe;var ne=function(){function Ee(Pe){_classCallCheck(this,Ee);var Be=Pe.viewBox,$e=Pe.scale,Oe=Pe.rotation,Ne=Pe.offsetX,J=Ne===void 0?0:Ne,fe=Pe.offsetY,re=fe===void 0?0:fe,_e=Pe.dontFlip,be=_e!==void 0&&_e;this.viewBox=Be,this.scale=$e,this.rotation=Oe,this.offsetX=J,this.offsetY=re;var Ae,Le,Ve,Fe,De,We,Re,He,Ze=(Be[2]+Be[0])/2,Xe=(Be[3]+Be[1])/2;switch((Oe%=360)<0&&(Oe+=360),Oe){case 180:Ae=-1,Le=0,Ve=0,Fe=1;break;case 90:Ae=0,Le=1,Ve=1,Fe=0;break;case 270:Ae=0,Le=-1,Ve=-1,Fe=0;break;case 0:Ae=1,Le=0,Ve=0,Fe=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}be&&(Ve=-Ve,Fe=-Fe),Ae===0?(De=Math.abs(Xe-Be[1])*$e+J,We=Math.abs(Ze-Be[0])*$e+re,Re=(Be[3]-Be[1])*$e,He=(Be[2]-Be[0])*$e):(De=Math.abs(Ze-Be[0])*$e+J,We=Math.abs(Xe-Be[1])*$e+re,Re=(Be[2]-Be[0])*$e,He=(Be[3]-Be[1])*$e),this.transform=[Ae*$e,Le*$e,Ve*$e,Fe*$e,De-Ae*$e*Ze-Ve*$e*Xe,We-Le*$e*Ze-Fe*$e*Xe],this.width=Re,this.height=He}return _createClass(Ee,[{key:"rawDims",get:function(){var Pe=this.viewBox;return(0,s.shadow)(this,"rawDims",{pageWidth:Pe[2]-Pe[0],pageHeight:Pe[3]-Pe[1],pageX:Pe[0],pageY:Pe[1]})}},{key:"clone",value:function(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Be=Pe.scale,$e=Be===void 0?this.scale:Be,Oe=Pe.rotation,Ne=Oe===void 0?this.rotation:Oe,J=Pe.offsetX,fe=J===void 0?this.offsetX:J,re=Pe.offsetY,_e=re===void 0?this.offsetY:re,be=Pe.dontFlip,Ae=be!==void 0&&be;return new Ee({viewBox:this.viewBox.slice(),scale:$e,rotation:Ne,offsetX:fe,offsetY:_e,dontFlip:Ae})}},{key:"convertToViewportPoint",value:function(Pe,Be){return s.Util.applyTransform([Pe,Be],this.transform)}},{key:"convertToViewportRectangle",value:function(Pe){var Be=s.Util.applyTransform([Pe[0],Pe[1]],this.transform),$e=s.Util.applyTransform([Pe[2],Pe[3]],this.transform);return[Be[0],Be[1],$e[0],$e[1]]}},{key:"convertToPdfPoint",value:function(Pe,Be){return s.Util.applyInverseTransform([Pe,Be],this.transform)}}]),Ee}();n.PageViewport=ne;var q=function(Ee){_inherits(Be,Ee);var Pe=_createSuper(Be);function Be($e,Oe){var Ne;_classCallCheck(this,Be);var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return(Ne=Pe.call(this,$e,"RenderingCancelledException")).type=Oe,Ne.extraDelay=J,Ne}return _createClass(Be)}(s.BaseException);function H(Ee){for(var Pe=Ee.length,Be=0;Be<Pe&&Ee[Be].trim()==="";)Be++;return Ee.substring(Be,Be+5).toLowerCase()==="data:"}n.RenderingCancelledException=q;var Y,le=function(){function Ee(){_classCallCheck(this,Ee),_defineProperty$1(this,"started",Object.create(null)),_defineProperty$1(this,"times",[])}return _createClass(Ee,[{key:"time",value:function(Pe){Pe in this.started&&(0,s.warn)("Timer is already running for ".concat(Pe)),this.started[Pe]=Date.now()}},{key:"timeEnd",value:function(Pe){Pe in this.started||(0,s.warn)("Timer has not been started for ".concat(Pe)),this.times.push({name:Pe,start:this.started[Pe],end:Date.now()}),delete this.started[Pe]}},{key:"toString",value:function(){var Pe,Be=[],$e=0,Oe=_createForOfIteratorHelper(this.times);try{for(Oe.s();!(Pe=Oe.n()).done;){var Ne=Pe.value.name;$e=Math.max(Ne.length,$e)}}catch(Le){Oe.e(Le)}finally{Oe.f()}var J,fe=_createForOfIteratorHelper(this.times);try{for(fe.s();!(J=fe.n()).done;){var re=J.value,_e=re.name,be=re.start,Ae=re.end;Be.push("".concat(_e.padEnd($e)," ").concat(Ae-be,`ms
`))}}catch(Le){fe.e(Le)}finally{fe.f()}return Be.join("")}}]),Ee}();function Ce(Ee,Pe){try{var Be=(Pe?new URL(Ee,Pe):new URL(Ee)).protocol;return Be==="http:"||Be==="https:"}catch{return!1}}n.StatTimer=le;var Te=function(){function Ee(){_classCallCheck(this,Ee)}return _createClass(Ee,null,[{key:"toDateObject",value:function(Pe){if(!Pe||typeof Pe!="string")return null;Y||(Y=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var Be=Y.exec(Pe);if(!Be)return null;var $e=parseInt(Be[1],10),Oe=parseInt(Be[2],10);Oe=Oe>=1&&Oe<=12?Oe-1:0;var Ne=parseInt(Be[3],10);Ne=Ne>=1&&Ne<=31?Ne:1;var J=parseInt(Be[4],10);J=J>=0&&J<=23?J:0;var fe=parseInt(Be[5],10);fe=fe>=0&&fe<=59?fe:0;var re=parseInt(Be[6],10);re=re>=0&&re<=59?re:0;var _e=Be[7]||"Z",be=parseInt(Be[8],10);be=be>=0&&be<=23?be:0;var Ae=parseInt(Be[9],10)||0;return Ae=Ae>=0&&Ae<=59?Ae:0,_e==="-"?(J+=be,fe+=Ae):_e==="+"&&(J-=be,fe-=Ae),new Date(Date.UTC($e,Oe,Ne,J,fe,re))}}]),Ee}();function ke(Ee){if(Ee.startsWith("#")){var Pe=parseInt(Ee.slice(1),16);return[(16711680&Pe)>>16,(65280&Pe)>>8,255&Pe]}return Ee.startsWith("rgb(")?Ee.slice(4,-1).split(",").map(function(Be){return parseInt(Be)}):Ee.startsWith("rgba(")?Ee.slice(5,-1).split(",").map(function(Be){return parseInt(Be)}).slice(0,3):((0,s.warn)('Not a valid color format: "'.concat(Ee,'"')),[0,0,0])}n.PDFDateString=Te},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.BaseStandardFontDataFactory=n.BaseSVGFactory=n.BaseFilterFactory=n.BaseCanvasFactory=n.BaseCMapReaderFactory=void 0;var o=r(1),s=function(){function m(){_classCallCheck(this,m),this.constructor===m&&(0,o.unreachable)("Cannot initialize BaseFilterFactory.")}return _createClass(m,[{key:"addFilter",value:function(_){return"none"}},{key:"addHCMFilter",value:function(_,g){return"none"}},{key:"destroy",value:function(){}}]),m}();n.BaseFilterFactory=s;var u=function(){function m(){_classCallCheck(this,m),this.constructor===m&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")}return _createClass(m,[{key:"create",value:function(_,g){if(_<=0||g<=0)throw new Error("Invalid canvas size");var y=this._createCanvas(_,g);return{canvas:y,context:y.getContext("2d")}}},{key:"reset",value:function(_,g,y){if(!_.canvas)throw new Error("Canvas is not specified");if(g<=0||y<=0)throw new Error("Invalid canvas size");_.canvas.width=g,_.canvas.height=y}},{key:"destroy",value:function(_){if(!_.canvas)throw new Error("Canvas is not specified");_.canvas.width=0,_.canvas.height=0,_.canvas=null,_.context=null}},{key:"_createCanvas",value:function(_,g){(0,o.unreachable)("Abstract method `_createCanvas` called.")}}]),m}();n.BaseCanvasFactory=u;var d=function(){function m(g){_classCallCheck(this,m);var y=g.baseUrl,w=y===void 0?null:y,x=g.isCompressed,k=x===void 0||x;this.constructor===m&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=w,this.isCompressed=k}var _;return _createClass(m,[{key:"fetch",value:(_=_asyncToGenerator(_regeneratorRuntime().mark(function g(y){var w,x,k,S=this;return _regeneratorRuntime().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(w=y.name,this.baseUrl){E.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(w){E.next=5;break}throw new Error("CMap name must be specified.");case 5:return x=this.baseUrl+w+(this.isCompressed?".bcmap":""),k=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE,E.abrupt("return",this._fetchData(x,k).catch(function(T){throw new Error("Unable to load ".concat(S.isCompressed?"binary ":"","CMap at: ").concat(x))}));case 8:case"end":return E.stop()}},g,this)})),function(g){return _.apply(this,arguments)})},{key:"_fetchData",value:function(g,y){(0,o.unreachable)("Abstract method `_fetchData` called.")}}]),m}();n.BaseCMapReaderFactory=d;var f=function(){function m(g){_classCallCheck(this,m);var y=g.baseUrl,w=y===void 0?null:y;this.constructor===m&&(0,o.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=w}var _;return _createClass(m,[{key:"fetch",value:(_=_asyncToGenerator(_regeneratorRuntime().mark(function g(y){var w,x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(w=y.filename,this.baseUrl){k.next=3;break}throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');case 3:if(w){k.next=5;break}throw new Error("Font filename must be specified.");case 5:return x="".concat(this.baseUrl).concat(w),k.abrupt("return",this._fetchData(x).catch(function(S){throw new Error("Unable to load font data at: ".concat(x))}));case 7:case"end":return k.stop()}},g,this)})),function(g){return _.apply(this,arguments)})},{key:"_fetchData",value:function(g){(0,o.unreachable)("Abstract method `_fetchData` called.")}}]),m}();n.BaseStandardFontDataFactory=f;var v=function(){function m(){_classCallCheck(this,m),this.constructor===m&&(0,o.unreachable)("Cannot initialize BaseSVGFactory.")}return _createClass(m,[{key:"create",value:function(_,g){var y=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(_<=0||g<=0)throw new Error("Invalid SVG dimensions");var w=this._createSVG("svg:svg");return w.setAttribute("version","1.1"),y||(w.setAttribute("width","".concat(_,"px")),w.setAttribute("height","".concat(g,"px"))),w.setAttribute("preserveAspectRatio","none"),w.setAttribute("viewBox","0 0 ".concat(_," ").concat(g)),w}},{key:"createElement",value:function(_){if(typeof _!="string")throw new Error("Invalid SVG element type");return this._createSVG(_)}},{key:"_createSVG",value:function(_){(0,o.unreachable)("Abstract method `_createSVG` called.")}}]),m}();n.BaseSVGFactory=v},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.MurmurHash3_64=void 0;var o=r(1),s=3285377520,u=4294901760,d=65535,f=function(){function v(m){_classCallCheck(this,v),this.h1=m?4294967295&m:s,this.h2=m?4294967295&m:s}return _createClass(v,[{key:"update",value:function(m){var _,g;if(typeof m=="string"){_=new Uint8Array(2*m.length),g=0;for(var y=0,w=m.length;y<w;y++){var x=m.charCodeAt(y);x<=255?_[g++]=x:(_[g++]=x>>>8,_[g++]=255&x)}}else{if(!(0,o.isArrayBuffer)(m))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");g=(_=m.slice()).byteLength}for(var k=g>>2,S=g-4*k,E=new Uint32Array(_.buffer,0,k),T=0,M=0,I=this.h1,F=this.h2,O=3432918353,N=461845907,D=11601,X=13715,U=0;U<k;U++)1&U?I=5*(I=(I^=T=(T=(T=(T=E[U])*O&u|T*D&d)<<15|T>>>17)*N&u|T*X&d)<<13|I>>>19)+3864292196:F=5*(F=(F^=M=(M=(M=(M=E[U])*O&u|M*D&d)<<15|M>>>17)*N&u|M*X&d)<<13|F>>>19)+3864292196;switch(T=0,S){case 3:T^=_[4*k+2]<<16;case 2:T^=_[4*k+1]<<8;case 1:T=(T=(T=(T^=_[4*k])*O&u|T*D&d)<<15|T>>>17)*N&u|T*X&d,1&k?I^=T:F^=T}this.h1=I,this.h2=F}},{key:"hexdigest",value:function(){var m=this.h1,_=this.h2;return m=3981806797*(m^=_>>>1)&u|36045*m&d,m=444984403*(m^=(_=4283543511*_&u|(2950163797*(_<<16|m>>>16)&u)>>>16)>>>1)&u|60499*m&d,((m^=(_=3301882366*_&u|(3120437893*(_<<16|m>>>16)&u)>>>16)>>>1)>>>0).toString(16).padStart(8,"0")+(_>>>0).toString(16).padStart(8,"0")}}]),v}();n.MurmurHash3_64=f},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.FontLoader=n.FontFaceObject=void 0;var o=r(1),s=r(3),u=function(){function f(m){_classCallCheck(this,f);var _=m.ownerDocument,g=_===void 0?globalThis.document:_;m.styleElement,this._document=g,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}var v;return _createClass(f,[{key:"addNativeFontFace",value:function(m){this.nativeFontFaces.push(m),this._document.fonts.add(m)}},{key:"insertRule",value:function(m){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));var _=this.styleElement.sheet;_.insertRule(m,_.cssRules.length)}},{key:"clear",value:function(){var m,_=_createForOfIteratorHelper(this.nativeFontFaces);try{for(_.s();!(m=_.n()).done;){var g=m.value;this._document.fonts.delete(g)}}catch(y){_.e(y)}finally{_.f()}this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"bind",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function m(_){var g,y,w=this;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!_.attached&&!_.missingFile){x.next=2;break}return x.abrupt("return");case 2:if(_.attached=!0,!this.isFontLoadingAPISupported){x.next=18;break}if(!(g=_.createNativeFontFace())){x.next=17;break}return this.addNativeFontFace(g),x.prev=7,x.next=10,g.loaded;case 10:x.next=17;break;case 12:throw x.prev=12,x.t0=x.catch(7),(0,o.warn)("Failed to load font '".concat(g.family,"': '").concat(x.t0,"'.")),_.disableFontFace=!0,x.t0;case 17:return x.abrupt("return");case 18:if(!(y=_.createFontFaceRule())){x.next=25;break}if(this.insertRule(y),!this.isSyncFontLoadingSupported){x.next=23;break}return x.abrupt("return");case 23:return x.next=25,new Promise(function(k){var S=w._queueLoadingCallback(k);w._prepareFontLoadEvent(_,S)});case 25:case"end":return x.stop()}},m,this,[[7,12]])})),function(m){return v.apply(this,arguments)})},{key:"isFontLoadingAPISupported",get:function(){var m,_=!((m=this._document)===null||m===void 0||!m.fonts);return(0,o.shadow)(this,"isFontLoadingAPISupported",_)}},{key:"isSyncFontLoadingSupported",get:function(){var m=!1;return(s.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(m=!0),(0,o.shadow)(this,"isSyncFontLoadingSupported",m)}},{key:"_queueLoadingCallback",value:function(m){var _=this.loadingRequests,g={done:!1,complete:function(){for((0,o.assert)(!g.done,"completeRequest() cannot be called twice."),g.done=!0;_.length>0&&_[0].done;){var y=_.shift();setTimeout(y.callback,0)}},callback:m};return _.push(g),g}},{key:"_loadTestFont",get:function(){var m=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,o.shadow)(this,"_loadTestFont",m)}},{key:"_prepareFontLoadEvent",value:function(m,_){function g(Q,ve){return Q.charCodeAt(ve)<<24|Q.charCodeAt(ve+1)<<16|Q.charCodeAt(ve+2)<<8|255&Q.charCodeAt(ve+3)}function y(Q,ve,Se,we){return Q.substring(0,ve)+we+Q.substring(ve+Se)}var w,x,k=this._document.createElement("canvas");k.width=1,k.height=1;var S=k.getContext("2d"),E=0,T="lt".concat(Date.now()).concat(this.loadTestFontId++),M=this._loadTestFont,I=1482184792,F=g(M=y(M,976,T.length,T),16);for(w=0,x=T.length-3;w<x;w+=4)F=F-I+g(T,w)|0;w<T.length&&(F=F-I+g(T+"XXX",w)|0),M=y(M,16,4,(0,o.string32)(F));var O="url(data:font/opentype;base64,".concat(btoa(M),");"),N='@font-face {font-family:"'.concat(T,'";src:').concat(O,"}");this.insertRule(N);var D=this._document.createElement("div");D.style.visibility="hidden",D.style.width=D.style.height="10px",D.style.position="absolute",D.style.top=D.style.left="0px";for(var X=0,U=[m.loadedName,T];X<U.length;X++){var Z=U[X],j=this._document.createElement("span");j.textContent="Hi",j.style.fontFamily=Z,D.append(j)}this._document.body.append(D),function Q(ve,Se){if(++E>30)return(0,o.warn)("Load test font never loaded."),void Se();S.font="30px "+ve,S.fillText(".",0,20),S.getImageData(0,0,1,1).data[3]>0?Se():setTimeout(Q.bind(null,ve,Se))}(T,function(){D.remove(),_.complete()})}}]),f}();n.FontLoader=u;var d=function(){function f(v,m){_classCallCheck(this,f);var _=m.isEvalSupported,g=_===void 0||_,y=m.disableFontFace,w=y!==void 0&&y,x=m.ignoreErrors,k=x!==void 0&&x,S=m.inspectFont,E=S===void 0?null:S;for(var T in this.compiledGlyphs=Object.create(null),v)this[T]=v[T];this.isEvalSupported=g!==!1,this.disableFontFace=w===!0,this.ignoreErrors=k===!0,this._inspectFont=E}return _createClass(f,[{key:"createNativeFontFace",value:function(){var v,m;if(!this.data||this.disableFontFace)return null;if(this.cssFontInfo){var _={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(_.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),m=new FontFace(this.cssFontInfo.fontFamily,this.data,_)}else m=new FontFace(this.loadedName,this.data,{});return(v=this._inspectFont)===null||v===void 0||v.call(this,this),m}},{key:"createFontFaceRule",value:function(){var v;if(!this.data||this.disableFontFace)return null;var m,_=(0,o.bytesToString)(this.data),g="url(data:".concat(this.mimetype,";base64,").concat(btoa(_),");");if(this.cssFontInfo){var y="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(y+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),m='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(y,"src:").concat(g,"}")}else m='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(g,"}");return(v=this._inspectFont)===null||v===void 0||v.call(this,this,g),m}},{key:"getPathGenerator",value:function(v,m){if(this.compiledGlyphs[m]!==void 0)return this.compiledGlyphs[m];var _;try{_=v.get(this.loadedName+"_path_"+m)}catch(S){if(!this.ignoreErrors)throw S;return(0,o.warn)('getPathGenerator - ignoring character: "'.concat(S,'".')),this.compiledGlyphs[m]=function(E,T){}}if(this.isEvalSupported&&o.FeatureTest.isEvalSupported){var g,y=[],w=_createForOfIteratorHelper(_);try{for(w.s();!(g=w.n()).done;){var x=g.value,k=x.args!==void 0?x.args.join(","):"";y.push("c.",x.cmd,"(",k,`);
`)}}catch(S){w.e(S)}finally{w.f()}return this.compiledGlyphs[m]=new Function("c","size",y.join(""))}return this.compiledGlyphs[m]=function(S,E){var T,M=_createForOfIteratorHelper(_);try{for(M.s();!(T=M.n()).done;){var I=T.value;I.cmd==="scale"&&(I.args=[E,-E]),S[I.cmd].apply(S,I.args)}}catch(F){M.e(F)}finally{M.f()}}}}]),f}();n.FontFaceObject=d},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.CanvasGraphics=void 0;var o=r(1),s=r(142),u=r(147),d=r(148),f=r(3);function v(we,oe){(function(ne,q){if(q.has(ne))throw new TypeError("Cannot initialize the same private elements twice on an object")})(we,oe),oe.add(we)}function m(we,oe,ne){if(!oe.has(we))throw new TypeError("attempted to get private field on non-instance");return ne}var _=4096,g=16,y=function(){function we(oe){_classCallCheck(this,we),this.canvasFactory=oe,this.cache=Object.create(null)}return _createClass(we,[{key:"getCanvas",value:function(oe,ne,q){var H;return this.cache[oe]!==void 0?(H=this.cache[oe],this.canvasFactory.reset(H,ne,q)):(H=this.canvasFactory.create(ne,q),this.cache[oe]=H),H}},{key:"delete",value:function(oe){delete this.cache[oe]}},{key:"clear",value:function(){for(var oe in this.cache){var ne=this.cache[oe];this.canvasFactory.destroy(ne),delete this.cache[oe]}}}]),we}();function w(we,oe,ne,q,H,Y,le,Ce,Te,ke){var Ee=_slicedToArray((0,s.getCurrentTransform)(we),6),Pe=Ee[0],Be=Ee[1],$e=Ee[2],Oe=Ee[3],Ne=Ee[4],J=Ee[5];if(Be===0&&$e===0){var fe=le*Pe+Ne,re=Math.round(fe),_e=Ce*Oe+J,be=Math.round(_e),Ae=(le+Te)*Pe+Ne,Le=Math.abs(Math.round(Ae)-re)||1,Ve=(Ce+ke)*Oe+J,Fe=Math.abs(Math.round(Ve)-be)||1;return we.setTransform(Math.sign(Pe),0,0,Math.sign(Oe),re,be),we.drawImage(oe,ne,q,H,Y,0,0,Le,Fe),we.setTransform(Pe,Be,$e,Oe,Ne,J),[Le,Fe]}if(Pe===0&&Oe===0){var De=Ce*$e+Ne,We=Math.round(De),Re=le*Be+J,He=Math.round(Re),Ze=(Ce+ke)*$e+Ne,Xe=Math.abs(Math.round(Ze)-We)||1,at=(le+Te)*Be+J,ut=Math.abs(Math.round(at)-He)||1;return we.setTransform(0,Math.sign(Be),Math.sign($e),0,We,He),we.drawImage(oe,ne,q,H,Y,0,0,ut,Xe),we.setTransform(Pe,Be,$e,Oe,Ne,J),[ut,Xe]}return we.drawImage(oe,ne,q,H,Y,le,Ce,Te,ke),[Math.hypot(Pe,Be)*Te,Math.hypot($e,Oe)*ke]}var x=function(){function we(oe,ne){_classCallCheck(this,we),this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,oe,ne])}return _createClass(we,[{key:"clone",value:function(){var oe=Object.create(this);return oe.clipBox=this.clipBox.slice(),oe}},{key:"setCurrentPoint",value:function(oe,ne){this.x=oe,this.y=ne}},{key:"updatePathMinMax",value:function(oe,ne,q){var H=_slicedToArray(o.Util.applyTransform([ne,q],oe),2);ne=H[0],q=H[1],this.minX=Math.min(this.minX,ne),this.minY=Math.min(this.minY,q),this.maxX=Math.max(this.maxX,ne),this.maxY=Math.max(this.maxY,q)}},{key:"updateRectMinMax",value:function(oe,ne){var q=o.Util.applyTransform(ne,oe),H=o.Util.applyTransform(ne.slice(2),oe);this.minX=Math.min(this.minX,q[0],H[0]),this.minY=Math.min(this.minY,q[1],H[1]),this.maxX=Math.max(this.maxX,q[0],H[0]),this.maxY=Math.max(this.maxY,q[1],H[1])}},{key:"updateScalingPathMinMax",value:function(oe,ne){o.Util.scaleMinMax(oe,ne),this.minX=Math.min(this.minX,ne[0]),this.maxX=Math.max(this.maxX,ne[1]),this.minY=Math.min(this.minY,ne[2]),this.maxY=Math.max(this.maxY,ne[3])}},{key:"updateCurvePathMinMax",value:function(oe,ne,q,H,Y,le,Ce,Te,ke,Ee){var Pe=o.Util.bezierBoundingBox(ne,q,H,Y,le,Ce,Te,ke);if(Ee)return Ee[0]=Math.min(Ee[0],Pe[0],Pe[2]),Ee[1]=Math.max(Ee[1],Pe[0],Pe[2]),Ee[2]=Math.min(Ee[2],Pe[1],Pe[3]),void(Ee[3]=Math.max(Ee[3],Pe[1],Pe[3]));this.updateRectMinMax(oe,Pe)}},{key:"getPathBoundingBox",value:function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:u.PathType.FILL,ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,q=[this.minX,this.minY,this.maxX,this.maxY];if(oe===u.PathType.STROKE){ne||(0,o.unreachable)("Stroke bounding box must include transform.");var H=o.Util.singularValueDecompose2dScale(ne),Y=H[0]*this.lineWidth/2,le=H[1]*this.lineWidth/2;q[0]-=Y,q[1]-=le,q[2]+=Y,q[3]+=le}return q}},{key:"updateClipFromPath",value:function(){var oe=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(oe||[0,0,0,0])}},{key:"isEmptyClip",value:function(){return this.minX===1/0}},{key:"startNewPathAndClipBox",value:function(oe){this.clipBox=oe,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}},{key:"getClippedPathBoundingBox",value:function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:u.PathType.FILL,ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return o.Util.intersect(this.clipBox,this.getPathBoundingBox(oe,ne))}}]),we}();function k(we,oe){if(typeof ImageData<"u"&&oe instanceof ImageData)we.putImageData(oe,0,0);else{var ne,q,H,Y,le,Ce=oe.height,Te=oe.width,ke=Ce%g,Ee=(Ce-ke)/g,Pe=ke===0?Ee:Ee+1,Be=we.createImageData(Te,g),$e=0,Oe=oe.data,Ne=Be.data;if(oe.kind===o.ImageKind.GRAYSCALE_1BPP){var J=Oe.byteLength,fe=new Uint32Array(Ne.buffer,0,Ne.byteLength>>2),re=fe.length,_e=Te+7>>3,be=4294967295,Ae=o.FeatureTest.isLittleEndian?4278190080:255;for(q=0;q<Pe;q++){for(Y=q<Ee?g:ke,ne=0,H=0;H<Y;H++){for(var Le=J-$e,Ve=0,Fe=Le>_e?Te:8*Le-7,De=-8&Fe,We=0,Re=0;Ve<De;Ve+=8)Re=Oe[$e++],fe[ne++]=128&Re?be:Ae,fe[ne++]=64&Re?be:Ae,fe[ne++]=32&Re?be:Ae,fe[ne++]=16&Re?be:Ae,fe[ne++]=8&Re?be:Ae,fe[ne++]=4&Re?be:Ae,fe[ne++]=2&Re?be:Ae,fe[ne++]=1&Re?be:Ae;for(;Ve<Fe;Ve++)We===0&&(Re=Oe[$e++],We=128),fe[ne++]=Re&We?be:Ae,We>>=1}for(;ne<re;)fe[ne++]=0;we.putImageData(Be,0,q*g)}}else if(oe.kind===o.ImageKind.RGBA_32BPP){for(H=0,le=Te*g*4,q=0;q<Ee;q++)Ne.set(Oe.subarray($e,$e+le)),$e+=le,we.putImageData(Be,0,H),H+=g;q<Pe&&(le=Te*ke*4,Ne.set(Oe.subarray($e,$e+le)),we.putImageData(Be,0,H))}else{if(oe.kind!==o.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(oe.kind));for(le=Te*(Y=g),q=0;q<Pe;q++){for(q>=Ee&&(le=Te*(Y=ke)),ne=0,H=le;H--;)Ne[ne++]=Oe[$e++],Ne[ne++]=Oe[$e++],Ne[ne++]=Oe[$e++],Ne[ne++]=255;we.putImageData(Be,0,q*g)}}}}function S(we,oe){if(oe.bitmap)we.drawImage(oe.bitmap,0,0);else for(var ne=oe.height,q=oe.width,H=ne%g,Y=(ne-H)/g,le=H===0?Y:Y+1,Ce=we.createImageData(q,g),Te=0,ke=oe.data,Ee=Ce.data,Pe=0;Pe<le;Pe++){var Be=Pe<Y?g:H;Te=(0,d.convertBlackAndWhiteToRGBA)({src:ke,srcPos:Te,dest:Ee,width:q,height:Be,nonBlackColor:0}).srcPos,we.putImageData(Ce,0,Pe*g)}}function E(we,oe){for(var ne=0,q=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];ne<q.length;ne++){var H=q[ne];we[H]!==void 0&&(oe[H]=we[H])}we.setLineDash!==void 0&&(oe.setLineDash(we.getLineDash()),oe.lineDashOffset=we.lineDashOffset)}function T(we){we.strokeStyle=we.fillStyle="#000000",we.fillRule="nonzero",we.globalAlpha=1,we.lineWidth=1,we.lineCap="butt",we.lineJoin="miter",we.miterLimit=10,we.globalCompositeOperation="source-over",we.font="10px sans-serif",we.setLineDash!==void 0&&(we.setLineDash([]),we.lineDashOffset=0),f.isNodeJS||(we.filter="none")}function M(we,oe,ne,q){for(var H=we.length,Y=3;Y<H;Y+=4){var le=we[Y];if(le===0)we[Y-3]=oe,we[Y-2]=ne,we[Y-1]=q;else if(le<255){var Ce=255-le;we[Y-3]=we[Y-3]*le+oe*Ce>>8,we[Y-2]=we[Y-2]*le+ne*Ce>>8,we[Y-1]=we[Y-1]*le+q*Ce>>8}}}function I(we,oe,ne){for(var q=we.length,H=3;H<q;H+=4){var Y=ne?ne[we[H]]:we[H];oe[H]=oe[H]*Y*.00392156862745098|0}}function F(we,oe,ne){for(var q=we.length,H=3;H<q;H+=4){var Y=77*we[H-3]+152*we[H-2]+28*we[H-1];oe[H]=ne?oe[H]*ne[Y>>8]>>8:oe[H]*Y>>16}}function O(we,oe,ne,q){var H=q[0],Y=q[1],le=q[2]-H,Ce=q[3]-Y;le!==0&&Ce!==0&&(function(Te,ke,Ee,Pe,Be,$e,Oe,Ne,J,fe,re){var _e,be=!!$e,Ae=be?$e[0]:0,Le=be?$e[1]:0,Ve=be?$e[2]:0;_e=Be==="Luminosity"?F:I;for(var Fe=Math.min(Pe,Math.ceil(1048576/Ee)),De=0;De<Pe;De+=Fe){var We=Math.min(Fe,Pe-De),Re=Te.getImageData(Ne-fe,De+(J-re),Ee,We),He=ke.getImageData(Ne,De+J,Ee,We);be&&M(Re.data,Ae,Le,Ve),_e(Re.data,He.data,Oe),ke.putImageData(He,Ne,De+J)}}(oe.context,ne,le,Ce,oe.subtype,oe.backdrop,oe.transferMap,H,Y,oe.offsetX,oe.offsetY),we.save(),we.globalAlpha=1,we.globalCompositeOperation="source-over",we.setTransform(1,0,0,1,0,0),we.drawImage(ne.canvas,0,0),we.restore())}function N(we,oe){var ne=o.Util.singularValueDecompose2dScale(we);ne[0]=Math.fround(ne[0]),ne[1]=Math.fround(ne[1]);var q=Math.fround((globalThis.devicePixelRatio||1)*s.PixelsPerInch.PDF_TO_CSS_UNITS);return oe!==void 0?oe:ne[0]<=q||ne[1]<=q}var D=["butt","round","square"],X=["miter","round","bevel"],U={},Z={},j=new WeakSet,Q=function(){function we(oe,ne,q,H,Y,le,Ce){_classCallCheck(this,we);var Te=le.optionalContentConfig,ke=le.markedContentStack,Ee=ke===void 0?null:ke;v(this,j),this.ctx=oe,this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=ne,this.objs=q,this.canvasFactory=H,this.filterFactory=Y,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Ee||[],this.optionalContentConfig=Te,this.cachedCanvases=new y(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Ce,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}return _createClass(we,[{key:"getObject",value:function(oe){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof oe=="string"?oe.startsWith("g_")?this.commonObjs.get(oe):this.objs.get(oe):ne}},{key:"beginDrawing",value:function(oe){var ne,q,H=oe.transform,Y=oe.viewport,le=oe.transparency,Ce=le!==void 0&&le,Te=oe.background,ke=Te===void 0?null:Te,Ee=this.ctx.canvas.width,Pe=this.ctx.canvas.height,Be=this.ctx.fillStyle;if(this.ctx.fillStyle=ke||"#ffffff",this.ctx.fillRect(0,0,Ee,Pe),this.ctx.fillStyle=Be,Ce){var $e,Oe=this.cachedCanvases.getCanvas("transparent",Ee,Pe);this.compositeCtx=this.ctx,this.transparentCanvas=Oe.canvas,this.ctx=Oe.context,this.ctx.save(),($e=this.ctx).transform.apply($e,_toConsumableArray$1((0,s.getCurrentTransform)(this.compositeCtx)))}this.ctx.save(),T(this.ctx),H&&((q=this.ctx).transform.apply(q,_toConsumableArray$1(H)),this.outputScaleX=H[0],this.outputScaleY=H[0]),(ne=this.ctx).transform.apply(ne,_toConsumableArray$1(Y.transform)),this.viewportScale=Y.scale,this.baseTransform=(0,s.getCurrentTransform)(this.ctx)}},{key:"executeOperatorList",value:function(oe,ne,q,H){var Y=oe.argsArray,le=oe.fnArray,Ce=ne||0,Te=Y.length;if(Te===Ce)return Ce;for(var ke,Ee=Te-Ce>10&&typeof q=="function",Pe=Ee?Date.now()+15:0,Be=0,$e=this.commonObjs,Oe=this.objs;;){if(H!==void 0&&Ce===H.nextBreakPoint)return H.breakIt(Ce,q),Ce;if((ke=le[Ce])!==o.OPS.dependency)this[ke].apply(this,Y[Ce]);else{var Ne,J=_createForOfIteratorHelper(Y[Ce]);try{for(J.s();!(Ne=J.n()).done;){var fe=Ne.value,re=fe.startsWith("g_")?$e:Oe;if(!re.has(fe))return re.get(fe,q),Ce}}catch(_e){J.e(_e)}finally{J.f()}}if(++Ce===Te)return Ce;if(Ee&&++Be>10){if(Date.now()>Pe)return q(),Ce;Be=0}}}},{key:"endDrawing",value:function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;m(this,j,ve).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();var ne,q=_createForOfIteratorHelper(this._cachedBitmapsMap.values());try{for(q.s();!(ne=q.n()).done;){var H,Y=ne.value,le=_createForOfIteratorHelper(Y.values());try{for(le.s();!(H=le.n()).done;){var Ce=H.value;typeof HTMLCanvasElement<"u"&&Ce instanceof HTMLCanvasElement&&(Ce.width=Ce.height=0)}}catch(Ee){le.e(Ee)}finally{le.f()}Y.clear()}}catch(Ee){q.e(Ee)}finally{q.f()}if(this._cachedBitmapsMap.clear(),oe){var Te=this.filterFactory.addHCMFilter(oe.foreground,oe.background);if(Te!=="none"){var ke=this.ctx.filter;this.ctx.filter=Te,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=ke}}}},{key:"_scaleImage",value:function(oe,ne){for(var q,H,Y=oe.width,le=oe.height,Ce=Math.max(Math.hypot(ne[0],ne[1]),1),Te=Math.max(Math.hypot(ne[2],ne[3]),1),ke=Y,Ee=le,Pe="prescale1";Ce>2&&ke>1||Te>2&&Ee>1;){var Be=ke,$e=Ee;Ce>2&&ke>1&&(Ce/=ke/(Be=ke>=16384?Math.floor(ke/2)-1||1:Math.ceil(ke/2))),Te>2&&Ee>1&&(Te/=Ee/($e=Ee>=16384?Math.floor(Ee/2)-1||1:Math.ceil(Ee)/2)),(H=(q=this.cachedCanvases.getCanvas(Pe,Be,$e)).context).clearRect(0,0,Be,$e),H.drawImage(oe,0,0,ke,Ee,0,0,Be,$e),oe=q.canvas,ke=Be,Ee=$e,Pe=Pe==="prescale1"?"prescale2":"prescale1"}return{img:oe,paintWidth:ke,paintHeight:Ee}}},{key:"_createMaskCanvas",value:function(oe){var ne,q,H,Y,le=this.ctx,Ce=oe.width,Te=oe.height,ke=this.current.fillColor,Ee=this.current.patternFill,Pe=(0,s.getCurrentTransform)(le);if((oe.bitmap||oe.data)&&oe.count>1){var Be=oe.bitmap||oe.data.buffer;q=JSON.stringify(Ee?Pe:[Pe.slice(0,4),ke]),(ne=this._cachedBitmapsMap.get(Be))||(ne=new Map,this._cachedBitmapsMap.set(Be,ne));var $e=ne.get(q);if($e&&!Ee)return{canvas:$e,offsetX:Math.round(Math.min(Pe[0],Pe[2])+Pe[4]),offsetY:Math.round(Math.min(Pe[1],Pe[3])+Pe[5])};H=$e}H||S((Y=this.cachedCanvases.getCanvas("maskCanvas",Ce,Te)).context,oe);var Oe=o.Util.transform(Pe,[1/Ce,0,0,-1/Te,0,0]);Oe=o.Util.transform(Oe,[1,0,0,1,0,-Te]);var Ne=o.Util.applyTransform([0,0],Oe),J=o.Util.applyTransform([Ce,Te],Oe),fe=o.Util.normalizeRect([Ne[0],Ne[1],J[0],J[1]]),re=Math.round(fe[2]-fe[0])||1,_e=Math.round(fe[3]-fe[1])||1,be=this.cachedCanvases.getCanvas("fillCanvas",re,_e),Ae=be.context,Le=Math.min(Ne[0],J[0]),Ve=Math.min(Ne[1],J[1]);Ae.translate(-Le,-Ve),Ae.transform.apply(Ae,_toConsumableArray$1(Oe)),H||(H=(H=this._scaleImage(Y.canvas,(0,s.getCurrentTransformInverse)(Ae))).img,ne&&Ee&&ne.set(q,H)),Ae.imageSmoothingEnabled=N((0,s.getCurrentTransform)(Ae),oe.interpolate),w(Ae,H,0,0,H.width,H.height,0,0,Ce,Te),Ae.globalCompositeOperation="source-in";var Fe=o.Util.transform((0,s.getCurrentTransformInverse)(Ae),[1,0,0,1,-Le,-Ve]);return Ae.fillStyle=Ee?ke.getPattern(le,this,Fe,u.PathType.FILL):ke,Ae.fillRect(0,0,Ce,Te),ne&&!Ee&&(this.cachedCanvases.delete("fillCanvas"),ne.set(q,be.canvas)),{canvas:be.canvas,offsetX:Math.round(Le),offsetY:Math.round(Ve)}}},{key:"setLineWidth",value:function(oe){oe!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=oe,this.ctx.lineWidth=oe}},{key:"setLineCap",value:function(oe){this.ctx.lineCap=D[oe]}},{key:"setLineJoin",value:function(oe){this.ctx.lineJoin=X[oe]}},{key:"setMiterLimit",value:function(oe){this.ctx.miterLimit=oe}},{key:"setDash",value:function(oe,ne){var q=this.ctx;q.setLineDash!==void 0&&(q.setLineDash(oe),q.lineDashOffset=ne)}},{key:"setRenderingIntent",value:function(oe){}},{key:"setFlatness",value:function(oe){}},{key:"setGState",value:function(oe){var ne,q=_createForOfIteratorHelper(oe);try{for(q.s();!(ne=q.n()).done;){var H=_slicedToArray(ne.value,2),Y=H[0],le=H[1];switch(Y){case"LW":this.setLineWidth(le);break;case"LC":this.setLineCap(le);break;case"LJ":this.setLineJoin(le);break;case"ML":this.setMiterLimit(le);break;case"D":this.setDash(le[0],le[1]);break;case"RI":this.setRenderingIntent(le);break;case"FL":this.setFlatness(le);break;case"Font":this.setFont(le[0],le[1]);break;case"CA":this.current.strokeAlpha=le;break;case"ca":this.current.fillAlpha=le,this.ctx.globalAlpha=le;break;case"BM":this.ctx.globalCompositeOperation=le;break;case"SMask":this.current.activeSMask=le?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(le)}}}catch(Ce){q.e(Ce)}finally{q.f()}}},{key:"inSMaskMode",get:function(){return!!this.suspendedCtx}},{key:"checkSMaskState",value:function(){var oe=this.inSMaskMode;this.current.activeSMask&&!oe?this.beginSMaskMode():!this.current.activeSMask&&oe&&this.endSMaskMode()}},{key:"beginSMaskMode",value:function(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");var oe=this.ctx.canvas.width,ne=this.ctx.canvas.height,q="smaskGroupAt"+this.groupLevel,H=this.cachedCanvases.getCanvas(q,oe,ne);this.suspendedCtx=this.ctx,this.ctx=H.context;var Y=this.ctx;Y.setTransform.apply(Y,_toConsumableArray$1((0,s.getCurrentTransform)(this.suspendedCtx))),E(this.suspendedCtx,Y),function(le,Ce){if(le._removeMirroring)throw new Error("Context is already forwarding operations.");le.__originalSave=le.save,le.__originalRestore=le.restore,le.__originalRotate=le.rotate,le.__originalScale=le.scale,le.__originalTranslate=le.translate,le.__originalTransform=le.transform,le.__originalSetTransform=le.setTransform,le.__originalResetTransform=le.resetTransform,le.__originalClip=le.clip,le.__originalMoveTo=le.moveTo,le.__originalLineTo=le.lineTo,le.__originalBezierCurveTo=le.bezierCurveTo,le.__originalRect=le.rect,le.__originalClosePath=le.closePath,le.__originalBeginPath=le.beginPath,le._removeMirroring=function(){le.save=le.__originalSave,le.restore=le.__originalRestore,le.rotate=le.__originalRotate,le.scale=le.__originalScale,le.translate=le.__originalTranslate,le.transform=le.__originalTransform,le.setTransform=le.__originalSetTransform,le.resetTransform=le.__originalResetTransform,le.clip=le.__originalClip,le.moveTo=le.__originalMoveTo,le.lineTo=le.__originalLineTo,le.bezierCurveTo=le.__originalBezierCurveTo,le.rect=le.__originalRect,le.closePath=le.__originalClosePath,le.beginPath=le.__originalBeginPath,delete le._removeMirroring},le.save=function(){Ce.save(),this.__originalSave()},le.restore=function(){Ce.restore(),this.__originalRestore()},le.translate=function(Te,ke){Ce.translate(Te,ke),this.__originalTranslate(Te,ke)},le.scale=function(Te,ke){Ce.scale(Te,ke),this.__originalScale(Te,ke)},le.transform=function(Te,ke,Ee,Pe,Be,$e){Ce.transform(Te,ke,Ee,Pe,Be,$e),this.__originalTransform(Te,ke,Ee,Pe,Be,$e)},le.setTransform=function(Te,ke,Ee,Pe,Be,$e){Ce.setTransform(Te,ke,Ee,Pe,Be,$e),this.__originalSetTransform(Te,ke,Ee,Pe,Be,$e)},le.resetTransform=function(){Ce.resetTransform(),this.__originalResetTransform()},le.rotate=function(Te){Ce.rotate(Te),this.__originalRotate(Te)},le.clip=function(Te){Ce.clip(Te),this.__originalClip(Te)},le.moveTo=function(Te,ke){Ce.moveTo(Te,ke),this.__originalMoveTo(Te,ke)},le.lineTo=function(Te,ke){Ce.lineTo(Te,ke),this.__originalLineTo(Te,ke)},le.bezierCurveTo=function(Te,ke,Ee,Pe,Be,$e){Ce.bezierCurveTo(Te,ke,Ee,Pe,Be,$e),this.__originalBezierCurveTo(Te,ke,Ee,Pe,Be,$e)},le.rect=function(Te,ke,Ee,Pe){Ce.rect(Te,ke,Ee,Pe),this.__originalRect(Te,ke,Ee,Pe)},le.closePath=function(){Ce.closePath(),this.__originalClosePath()},le.beginPath=function(){Ce.beginPath(),this.__originalBeginPath()}}(Y,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}},{key:"endSMaskMode",value:function(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),E(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}},{key:"compose",value:function(oe){if(this.current.activeSMask){oe?(oe[0]=Math.floor(oe[0]),oe[1]=Math.floor(oe[1]),oe[2]=Math.ceil(oe[2]),oe[3]=Math.ceil(oe[3])):oe=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];var ne=this.current.activeSMask;O(this.suspendedCtx,ne,this.ctx,oe),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}}},{key:"save",value:function(){this.inSMaskMode?(E(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();var oe=this.current;this.stateStack.push(oe),this.current=oe.clone()}},{key:"restore",value:function(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),E(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}},{key:"transform",value:function(oe,ne,q,H,Y,le){this.ctx.transform(oe,ne,q,H,Y,le),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}},{key:"constructPath",value:function(oe,ne,q){for(var H,Y,le=this.ctx,Ce=this.current,Te=Ce.x,ke=Ce.y,Ee=(0,s.getCurrentTransform)(le),Pe=Ee[0]===0&&Ee[3]===0||Ee[1]===0&&Ee[2]===0,Be=Pe?q.slice(0):null,$e=0,Oe=0,Ne=oe.length;$e<Ne;$e++)switch(0|oe[$e]){case o.OPS.rectangle:Te=ne[Oe++],ke=ne[Oe++];var J=ne[Oe++],fe=ne[Oe++],re=Te+J,_e=ke+fe;le.moveTo(Te,ke),J===0||fe===0?le.lineTo(re,_e):(le.lineTo(re,ke),le.lineTo(re,_e),le.lineTo(Te,_e)),Pe||Ce.updateRectMinMax(Ee,[Te,ke,re,_e]),le.closePath();break;case o.OPS.moveTo:Te=ne[Oe++],ke=ne[Oe++],le.moveTo(Te,ke),Pe||Ce.updatePathMinMax(Ee,Te,ke);break;case o.OPS.lineTo:Te=ne[Oe++],ke=ne[Oe++],le.lineTo(Te,ke),Pe||Ce.updatePathMinMax(Ee,Te,ke);break;case o.OPS.curveTo:H=Te,Y=ke,Te=ne[Oe+4],ke=ne[Oe+5],le.bezierCurveTo(ne[Oe],ne[Oe+1],ne[Oe+2],ne[Oe+3],Te,ke),Ce.updateCurvePathMinMax(Ee,H,Y,ne[Oe],ne[Oe+1],ne[Oe+2],ne[Oe+3],Te,ke,Be),Oe+=6;break;case o.OPS.curveTo2:H=Te,Y=ke,le.bezierCurveTo(Te,ke,ne[Oe],ne[Oe+1],ne[Oe+2],ne[Oe+3]),Ce.updateCurvePathMinMax(Ee,H,Y,Te,ke,ne[Oe],ne[Oe+1],ne[Oe+2],ne[Oe+3],Be),Te=ne[Oe+2],ke=ne[Oe+3],Oe+=4;break;case o.OPS.curveTo3:H=Te,Y=ke,Te=ne[Oe+2],ke=ne[Oe+3],le.bezierCurveTo(ne[Oe],ne[Oe+1],Te,ke,Te,ke),Ce.updateCurvePathMinMax(Ee,H,Y,ne[Oe],ne[Oe+1],Te,ke,Te,ke,Be),Oe+=4;break;case o.OPS.closePath:le.closePath()}Pe&&Ce.updateScalingPathMinMax(Ee,Be),Ce.setCurrentPoint(Te,ke)}},{key:"closePath",value:function(){this.ctx.closePath()}},{key:"stroke",value:function(){var oe=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],ne=this.ctx,q=this.current.strokeColor;ne.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(_typeof$1(q)==="object"&&q!=null&&q.getPattern?(ne.save(),ne.strokeStyle=q.getPattern(ne,this,(0,s.getCurrentTransformInverse)(ne),u.PathType.STROKE),this.rescaleAndStroke(!1),ne.restore()):this.rescaleAndStroke(!0)),oe&&this.consumePath(this.current.getClippedPathBoundingBox()),ne.globalAlpha=this.current.fillAlpha}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"fill",value:function(){var oe=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],ne=this.ctx,q=this.current.fillColor,H=!1;this.current.patternFill&&(ne.save(),ne.fillStyle=q.getPattern(ne,this,(0,s.getCurrentTransformInverse)(ne),u.PathType.FILL),H=!0);var Y=this.current.getClippedPathBoundingBox();this.contentVisible&&Y!==null&&(this.pendingEOFill?(ne.fill("evenodd"),this.pendingEOFill=!1):ne.fill()),H&&ne.restore(),oe&&this.consumePath(Y)}},{key:"eoFill",value:function(){this.pendingEOFill=!0,this.fill()}},{key:"fillStroke",value:function(){this.fill(!1),this.stroke(!1),this.consumePath()}},{key:"eoFillStroke",value:function(){this.pendingEOFill=!0,this.fillStroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}},{key:"endPath",value:function(){this.consumePath()}},{key:"clip",value:function(){this.pendingClip=U}},{key:"eoClip",value:function(){this.pendingClip=Z}},{key:"beginText",value:function(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"endText",value:function(){var oe=this.pendingTextPaths,ne=this.ctx;if(oe!==void 0){ne.save(),ne.beginPath();var q,H=_createForOfIteratorHelper(oe);try{for(H.s();!(q=H.n()).done;){var Y=q.value;ne.setTransform.apply(ne,_toConsumableArray$1(Y.transform)),ne.translate(Y.x,Y.y),Y.addToPath(ne,Y.fontSize)}}catch(le){H.e(le)}finally{H.f()}ne.restore(),ne.clip(),ne.beginPath(),delete this.pendingTextPaths}else ne.beginPath()}},{key:"setCharSpacing",value:function(oe){this.current.charSpacing=oe}},{key:"setWordSpacing",value:function(oe){this.current.wordSpacing=oe}},{key:"setHScale",value:function(oe){this.current.textHScale=oe/100}},{key:"setLeading",value:function(oe){this.current.leading=-oe}},{key:"setFont",value:function(oe,ne){var q=this.commonObjs.get(oe),H=this.current;if(!q)throw new Error("Can't find font for ".concat(oe));if(H.fontMatrix=q.fontMatrix||o.FONT_IDENTITY_MATRIX,H.fontMatrix[0]!==0&&H.fontMatrix[3]!==0||(0,o.warn)("Invalid font matrix for font "+oe),ne<0?(ne=-ne,H.fontDirection=-1):H.fontDirection=1,this.current.font=q,this.current.fontSize=ne,!q.isType3Font){var Y=q.loadedName||"sans-serif",le="normal";q.black?le="900":q.bold&&(le="bold");var Ce=q.italic?"italic":"normal",Te='"'.concat(Y,'", ').concat(q.fallbackName),ke=ne;ne<16?ke=16:ne>100&&(ke=100),this.current.fontSizeScale=ne/ke,this.ctx.font="".concat(Ce," ").concat(le," ").concat(ke,"px ").concat(Te)}}},{key:"setTextRenderingMode",value:function(oe){this.current.textRenderingMode=oe}},{key:"setTextRise",value:function(oe){this.current.textRise=oe}},{key:"moveText",value:function(oe,ne){this.current.x=this.current.lineX+=oe,this.current.y=this.current.lineY+=ne}},{key:"setLeadingMoveText",value:function(oe,ne){this.setLeading(-ne),this.moveText(oe,ne)}},{key:"setTextMatrix",value:function(oe,ne,q,H,Y,le){this.current.textMatrix=[oe,ne,q,H,Y,le],this.current.textMatrixScale=Math.hypot(oe,ne),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"paintChar",value:function(oe,ne,q,H){var Y,le=this.ctx,Ce=this.current,Te=Ce.font,ke=Ce.textRenderingMode,Ee=Ce.fontSize/Ce.fontSizeScale,Pe=ke&o.TextRenderingMode.FILL_STROKE_MASK,Be=!!(ke&o.TextRenderingMode.ADD_TO_PATH_FLAG),$e=Ce.patternFill&&!Te.missingFile;(Te.disableFontFace||Be||$e)&&(Y=Te.getPathGenerator(this.commonObjs,oe)),Te.disableFontFace||$e?(le.save(),le.translate(ne,q),le.beginPath(),Y(le,Ee),H&&le.setTransform.apply(le,_toConsumableArray$1(H)),Pe!==o.TextRenderingMode.FILL&&Pe!==o.TextRenderingMode.FILL_STROKE||le.fill(),Pe!==o.TextRenderingMode.STROKE&&Pe!==o.TextRenderingMode.FILL_STROKE||le.stroke(),le.restore()):(Pe!==o.TextRenderingMode.FILL&&Pe!==o.TextRenderingMode.FILL_STROKE||le.fillText(oe,ne,q),Pe!==o.TextRenderingMode.STROKE&&Pe!==o.TextRenderingMode.FILL_STROKE||le.strokeText(oe,ne,q)),Be&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,s.getCurrentTransform)(le),x:ne,y:q,fontSize:Ee,addToPath:Y})}},{key:"isFontSubpixelAAEnabled",get:function(){var oe=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10).context;oe.scale(1.5,1),oe.fillText("I",0,10);for(var ne=oe.getImageData(0,0,10,10).data,q=!1,H=3;H<ne.length;H+=4)if(ne[H]>0&&ne[H]<255){q=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",q)}},{key:"showText",value:function(oe){var ne=this.current,q=ne.font;if(q.isType3Font)return this.showType3Text(oe);var H=ne.fontSize;if(H!==0){var Y,le=this.ctx,Ce=ne.fontSizeScale,Te=ne.charSpacing,ke=ne.wordSpacing,Ee=ne.fontDirection,Pe=ne.textHScale*Ee,Be=oe.length,$e=q.vertical,Oe=$e?1:-1,Ne=q.defaultVMetrics,J=H*ne.fontMatrix[0],fe=ne.textRenderingMode===o.TextRenderingMode.FILL&&!q.disableFontFace&&!ne.patternFill;if(le.save(),le.transform.apply(le,_toConsumableArray$1(ne.textMatrix)),le.translate(ne.x,ne.y+ne.textRise),Ee>0?le.scale(Pe,-1):le.scale(Pe,1),ne.patternFill){le.save();var re=ne.fillColor.getPattern(le,this,(0,s.getCurrentTransformInverse)(le),u.PathType.FILL);Y=(0,s.getCurrentTransform)(le),le.restore(),le.fillStyle=re}var _e=ne.lineWidth,be=ne.textMatrixScale;if(be===0||_e===0){var Ae=ne.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;Ae!==o.TextRenderingMode.STROKE&&Ae!==o.TextRenderingMode.FILL_STROKE||(_e=this.getSinglePixelWidth())}else _e/=be;if(Ce!==1&&(le.scale(Ce,Ce),_e/=Ce),le.lineWidth=_e,q.isInvalidPDFjsFont){var Le,Ve=[],Fe=0,De=_createForOfIteratorHelper(oe);try{for(De.s();!(Le=De.n()).done;){var We=Le.value;Ve.push(We.unicode),Fe+=We.width}}catch(ot){De.e(ot)}finally{De.f()}return le.fillText(Ve.join(""),0,0),ne.x+=Fe*J*Pe,le.restore(),void this.compose()}var Re,He=0;for(Re=0;Re<Be;++Re){var Ze=oe[Re];if(typeof Ze!="number"){var Xe=!1,at=(Ze.isSpace?ke:0)+Te,ut=Ze.fontChar,ct=Ze.accent,mt=void 0,pt=void 0,kt=Ze.width;if($e){var Ct=Ze.vmetric||Ne,ht=-(Ze.vmetric?Ct[1]:.5*kt)*J,Pt=Ct[2]*J;kt=Ct?-Ct[0]:kt,mt=ht/Ce,pt=(He+Pt)/Ce}else mt=He/Ce,pt=0;if(q.remeasure&&kt>0){var Ue=1e3*le.measureText(ut).width/H*Ce;if(kt<Ue&&this.isFontSubpixelAAEnabled){var qe=kt/Ue;Xe=!0,le.save(),le.scale(qe,1),mt/=qe}else kt!==Ue&&(mt+=(kt-Ue)/2e3*H/Ce)}if(this.contentVisible&&(Ze.isInFont||q.missingFile)){if(fe&&!ct)le.fillText(ut,mt,pt);else if(this.paintChar(ut,mt,pt,Y),ct){var Ye=mt+H*ct.offset.x/Ce,st=pt-H*ct.offset.y/Ce;this.paintChar(ct.fontChar,Ye,st,Y)}}He+=$e?kt*J-at*Ee:kt*J+at*Ee,Xe&&le.restore()}else He+=Oe*Ze*H/1e3}$e?ne.y-=He:ne.x+=He*Pe,le.restore(),this.compose()}}},{key:"showType3Text",value:function(oe){var ne,q,H,Y,le=this.ctx,Ce=this.current,Te=Ce.font,ke=Ce.fontSize,Ee=Ce.fontDirection,Pe=Te.vertical?1:-1,Be=Ce.charSpacing,$e=Ce.wordSpacing,Oe=Ce.textHScale*Ee,Ne=Ce.fontMatrix||o.FONT_IDENTITY_MATRIX,J=oe.length;if(Ce.textRenderingMode!==o.TextRenderingMode.INVISIBLE&&ke!==0){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,le.save(),le.transform.apply(le,_toConsumableArray$1(Ce.textMatrix)),le.translate(Ce.x,Ce.y),le.scale(Oe,Ee),ne=0;ne<J;++ne)if(typeof(q=oe[ne])!="number"){var fe=(q.isSpace?$e:0)+Be,re=Te.charProcOperatorList[q.operatorListId];re?(this.contentVisible&&(this.processingType3=q,this.save(),le.scale(ke,ke),le.transform.apply(le,_toConsumableArray$1(Ne)),this.executeOperatorList(re),this.restore()),H=o.Util.applyTransform([q.width,0],Ne)[0]*ke+fe,le.translate(H,0),Ce.x+=H*Oe):(0,o.warn)('Type3 character "'.concat(q.operatorListId,'" is not available.'))}else Y=Pe*q*ke/1e3,this.ctx.translate(Y,0),Ce.x+=Y*Oe;le.restore(),this.processingType3=null}}},{key:"setCharWidth",value:function(oe,ne){}},{key:"setCharWidthAndBounds",value:function(oe,ne,q,H,Y,le){this.ctx.rect(q,H,Y-q,le-H),this.ctx.clip(),this.endPath()}},{key:"getColorN_Pattern",value:function(oe){var ne,q=this;if(oe[0]==="TilingPattern"){var H=oe[1],Y=this.baseTransform||(0,s.getCurrentTransform)(this.ctx),le={createCanvasGraphics:function(Ce){return new we(Ce,q.commonObjs,q.objs,q.canvasFactory,q.filterFactory,{optionalContentConfig:q.optionalContentConfig,markedContentStack:q.markedContentStack})}};ne=new u.TilingPattern(oe,H,this.ctx,le,Y)}else ne=this._getPattern(oe[1],oe[2]);return ne}},{key:"setStrokeColorN",value:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)}},{key:"setFillColorN",value:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}},{key:"setStrokeRGBColor",value:function(oe,ne,q){var H=o.Util.makeHexColor(oe,ne,q);this.ctx.strokeStyle=H,this.current.strokeColor=H}},{key:"setFillRGBColor",value:function(oe,ne,q){var H=o.Util.makeHexColor(oe,ne,q);this.ctx.fillStyle=H,this.current.fillColor=H,this.current.patternFill=!1}},{key:"_getPattern",value:function(oe){var ne,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return this.cachedPatterns.has(oe)?ne=this.cachedPatterns.get(oe):(ne=(0,u.getShadingPattern)(this.getObject(oe)),this.cachedPatterns.set(oe,ne)),q&&(ne.matrix=q),ne}},{key:"shadingFill",value:function(oe){if(this.contentVisible){var ne=this.ctx;this.save();var q=this._getPattern(oe);ne.fillStyle=q.getPattern(ne,this,(0,s.getCurrentTransformInverse)(ne),u.PathType.SHADING);var H=(0,s.getCurrentTransformInverse)(ne);if(H){var Y=ne.canvas,le=Y.width,Ce=Y.height,Te=o.Util.applyTransform([0,0],H),ke=o.Util.applyTransform([0,Ce],H),Ee=o.Util.applyTransform([le,0],H),Pe=o.Util.applyTransform([le,Ce],H),Be=Math.min(Te[0],ke[0],Ee[0],Pe[0]),$e=Math.min(Te[1],ke[1],Ee[1],Pe[1]),Oe=Math.max(Te[0],ke[0],Ee[0],Pe[0]),Ne=Math.max(Te[1],ke[1],Ee[1],Pe[1]);this.ctx.fillRect(Be,$e,Oe-Be,Ne-$e)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}}},{key:"beginInlineImage",value:function(){(0,o.unreachable)("Should not call beginInlineImage")}},{key:"beginImageData",value:function(){(0,o.unreachable)("Should not call beginImageData")}},{key:"paintFormXObjectBegin",value:function(oe,ne){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(oe)&&oe.length===6&&this.transform.apply(this,_toConsumableArray$1(oe)),this.baseTransform=(0,s.getCurrentTransform)(this.ctx),ne)){var q=ne[2]-ne[0],H=ne[3]-ne[1];this.ctx.rect(ne[0],ne[1],q,H),this.current.updateRectMinMax((0,s.getCurrentTransform)(this.ctx),ne),this.clip(),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}},{key:"beginGroup",value:function(oe){if(this.contentVisible){this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);var ne=this.ctx;oe.isolated||(0,o.info)("TODO: Support non-isolated groups."),oe.knockout&&(0,o.warn)("Knockout groups not supported.");var q=(0,s.getCurrentTransform)(ne);if(oe.matrix&&ne.transform.apply(ne,_toConsumableArray$1(oe.matrix)),!oe.bbox)throw new Error("Bounding box is required.");var H=o.Util.getAxialAlignedBoundingBox(oe.bbox,(0,s.getCurrentTransform)(ne)),Y=[0,0,ne.canvas.width,ne.canvas.height];H=o.Util.intersect(H,Y)||[0,0,0,0];var le=Math.floor(H[0]),Ce=Math.floor(H[1]),Te=Math.max(Math.ceil(H[2])-le,1),ke=Math.max(Math.ceil(H[3])-Ce,1),Ee=1,Pe=1;Te>_&&(Ee=Te/_,Te=_),ke>_&&(Pe=ke/_,ke=_),this.current.startNewPathAndClipBox([0,0,Te,ke]);var Be="groupAt"+this.groupLevel;oe.smask&&(Be+="_smask_"+this.smaskCounter++%2);var $e=this.cachedCanvases.getCanvas(Be,Te,ke),Oe=$e.context;Oe.scale(1/Ee,1/Pe),Oe.translate(-le,-Ce),Oe.transform.apply(Oe,_toConsumableArray$1(q)),oe.smask?this.smaskStack.push({canvas:$e.canvas,context:Oe,offsetX:le,offsetY:Ce,scaleX:Ee,scaleY:Pe,subtype:oe.smask.subtype,backdrop:oe.smask.backdrop,transferMap:oe.smask.transferMap||null,startTransformInverse:null}):(ne.setTransform(1,0,0,1,0,0),ne.translate(le,Ce),ne.scale(Ee,Pe),ne.save()),E(ne,Oe),this.ctx=Oe,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(ne),this.groupLevel++}}},{key:"endGroup",value:function(oe){if(this.contentVisible){this.groupLevel--;var ne=this.ctx,q=this.groupStack.pop();if(this.ctx=q,this.ctx.imageSmoothingEnabled=!1,oe.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{var H;this.ctx.restore();var Y=(0,s.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),(H=this.ctx).setTransform.apply(H,_toConsumableArray$1(Y));var le=o.Util.getAxialAlignedBoundingBox([0,0,ne.canvas.width,ne.canvas.height],Y);this.ctx.drawImage(ne.canvas,0,0),this.ctx.restore(),this.compose(le)}}}},{key:"beginAnnotation",value:function(oe,ne,q,H,Y){var le;if(m(this,j,ve).call(this),T(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&(le=this.ctx).setTransform.apply(le,_toConsumableArray$1(this.baseTransform)),Array.isArray(ne)&&ne.length===4){var Ce=ne[2]-ne[0],Te=ne[3]-ne[1];if(Y&&this.annotationCanvasMap){(q=q.slice())[4]-=ne[0],q[5]-=ne[1],(ne=ne.slice())[0]=ne[1]=0,ne[2]=Ce,ne[3]=Te;var ke=_slicedToArray(o.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(this.ctx)),2),Ee=ke[0],Pe=ke[1],Be=this.viewportScale,$e=Math.ceil(Ce*this.outputScaleX*Be),Oe=Math.ceil(Te*this.outputScaleY*Be);this.annotationCanvas=this.canvasFactory.create($e,Oe);var Ne=this.annotationCanvas,J=Ne.canvas,fe=Ne.context;this.annotationCanvasMap.set(oe,J),this.annotationCanvas.savedCtx=this.ctx,this.ctx=fe,this.ctx.setTransform(Ee,0,0,-Pe,0,Te*Pe),T(this.ctx)}else T(this.ctx),this.ctx.rect(ne[0],ne[1],Ce,Te),this.ctx.clip(),this.endPath()}this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,_toConsumableArray$1(q)),this.transform.apply(this,_toConsumableArray$1(H))}},{key:"endAnnotation",value:function(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}},{key:"paintImageMaskXObject",value:function(oe){if(this.contentVisible){var ne=oe.count;(oe=this.getObject(oe.data,oe)).count=ne;var q=this.ctx,H=this.processingType3;if(H&&(H.compiled===void 0&&(H.compiled=function(Ce){var Te=Ce.width,ke=Ce.height;if(Te>1e3||ke>1e3)return null;var Ee,Pe,Be,$e,Oe=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),Ne=Te+1,J=new Uint8Array(Ne*(ke+1)),fe=Te+7&-8,re=new Uint8Array(fe*ke),_e=0,be=_createForOfIteratorHelper(Ce.data);try{for(be.s();!($e=be.n()).done;)for(var Ae=$e.value,Le=128;Le>0;)re[_e++]=Ae&Le?0:255,Le>>=1}catch(ct){be.e(ct)}finally{be.f()}var Ve=0;for(re[_e=0]!==0&&(J[0]=1,++Ve),Pe=1;Pe<Te;Pe++)re[_e]!==re[_e+1]&&(J[Pe]=re[_e]?2:1,++Ve),_e++;for(re[_e]!==0&&(J[Pe]=2,++Ve),Ee=1;Ee<ke;Ee++){Be=Ee*Ne,re[(_e=Ee*fe)-fe]!==re[_e]&&(J[Be]=re[_e]?1:8,++Ve);var Fe=(re[_e]?4:0)+(re[_e-fe]?8:0);for(Pe=1;Pe<Te;Pe++)Oe[Fe=(Fe>>2)+(re[_e+1]?4:0)+(re[_e-fe+1]?8:0)]&&(J[Be+Pe]=Oe[Fe],++Ve),_e++;if(re[_e-fe]!==re[_e]&&(J[Be+Pe]=re[_e]?2:4,++Ve),Ve>1e3)return null}for(Be=Ee*Ne,re[_e=fe*(ke-1)]!==0&&(J[Be]=8,++Ve),Pe=1;Pe<Te;Pe++)re[_e]!==re[_e+1]&&(J[Be+Pe]=re[_e]?4:8,++Ve),_e++;if(re[_e]!==0&&(J[Be+Pe]=4,++Ve),Ve>1e3)return null;var De=new Int32Array([0,Ne,-1,0,-Ne,0,0,0,1]),We=new Path2D;for(Ee=0;Ve&&Ee<=ke;Ee++){for(var Re=Ee*Ne,He=Re+Te;Re<He&&!J[Re];)Re++;if(Re!==He){We.moveTo(Re%Ne,Ee);var Ze=Re,Xe=J[Re];do{var at=De[Xe];do Re+=at;while(!J[Re]);var ut=J[Re];ut!==5&&ut!==10?(Xe=ut,J[Re]=0):(Xe=ut&51*Xe>>4,J[Re]&=Xe>>2|Xe<<2),We.lineTo(Re%Ne,Re/Ne|0),J[Re]||--Ve}while(Ze!==Re);--Ee}}return re=null,J=null,function(ct){ct.save(),ct.scale(1/Te,-1/ke),ct.translate(0,-ke),ct.fill(We),ct.beginPath(),ct.restore()}}(oe)),H.compiled))H.compiled(q);else{var Y=this._createMaskCanvas(oe),le=Y.canvas;q.save(),q.setTransform(1,0,0,1,0,0),q.drawImage(le,Y.offsetX,Y.offsetY),q.restore(),this.compose()}}}},{key:"paintImageMaskXObjectRepeat",value:function(oe,ne){var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,Y=arguments.length>4?arguments[4]:void 0,le=arguments.length>5?arguments[5]:void 0;if(this.contentVisible){oe=this.getObject(oe.data,oe);var Ce=this.ctx;Ce.save();var Te=(0,s.getCurrentTransform)(Ce);Ce.transform(ne,q,H,Y,0,0);var ke=this._createMaskCanvas(oe);Ce.setTransform(1,0,0,1,ke.offsetX-Te[4],ke.offsetY-Te[5]);for(var Ee=0,Pe=le.length;Ee<Pe;Ee+=2){var Be=o.Util.transform(Te,[ne,q,H,Y,le[Ee],le[Ee+1]]),$e=_slicedToArray(o.Util.applyTransform([0,0],Be),2),Oe=$e[0],Ne=$e[1];Ce.drawImage(ke.canvas,Oe,Ne)}Ce.restore(),this.compose()}}},{key:"paintImageMaskXObjectGroup",value:function(oe){if(this.contentVisible){var ne,q=this.ctx,H=this.current.fillColor,Y=this.current.patternFill,le=_createForOfIteratorHelper(oe);try{for(le.s();!(ne=le.n()).done;){var Ce=ne.value,Te=Ce.data,ke=Ce.width,Ee=Ce.height,Pe=Ce.transform,Be=this.cachedCanvases.getCanvas("maskCanvas",ke,Ee),$e=Be.context;$e.save(),S($e,this.getObject(Te,Ce)),$e.globalCompositeOperation="source-in",$e.fillStyle=Y?H.getPattern($e,this,(0,s.getCurrentTransformInverse)(q),u.PathType.FILL):H,$e.fillRect(0,0,ke,Ee),$e.restore(),q.save(),q.transform.apply(q,_toConsumableArray$1(Pe)),q.scale(1,-1),w(q,Be.canvas,0,0,ke,Ee,0,-1,1,1),q.restore()}}catch(Oe){le.e(Oe)}finally{le.f()}this.compose()}}},{key:"paintImageXObject",value:function(oe){if(this.contentVisible){var ne=this.getObject(oe);ne?this.paintInlineImageXObject(ne):(0,o.warn)("Dependent image isn't ready yet")}}},{key:"paintImageXObjectRepeat",value:function(oe,ne,q,H){if(this.contentVisible){var Y=this.getObject(oe);if(Y){for(var le=Y.width,Ce=Y.height,Te=[],ke=0,Ee=H.length;ke<Ee;ke+=2)Te.push({transform:[ne,0,0,q,H[ke],H[ke+1]],x:0,y:0,w:le,h:Ce});this.paintInlineImageXObjectGroup(Y,Te)}else(0,o.warn)("Dependent image isn't ready yet")}}},{key:"applyTransferMapsToCanvas",value:function(oe){return this.current.transferMaps!=="none"&&(oe.filter=this.current.transferMaps,oe.drawImage(oe.canvas,0,0),oe.filter="none"),oe.canvas}},{key:"applyTransferMapsToBitmap",value:function(oe){if(this.current.transferMaps==="none")return oe.bitmap;var ne=oe.bitmap,q=oe.width,H=oe.height,Y=this.cachedCanvases.getCanvas("inlineImage",q,H),le=Y.context;return le.filter=this.current.transferMaps,le.drawImage(ne,0,0),le.filter="none",Y.canvas}},{key:"paintInlineImageXObject",value:function(oe){if(this.contentVisible){var ne,q=oe.width,H=oe.height,Y=this.ctx;if(this.save(),f.isNodeJS||(Y.filter="none"),Y.scale(1/q,-1/H),oe.bitmap)ne=this.applyTransferMapsToBitmap(oe);else if(typeof HTMLElement=="function"&&oe instanceof HTMLElement||!oe.data)ne=oe;else{var le=this.cachedCanvases.getCanvas("inlineImage",q,H).context;k(le,oe),ne=this.applyTransferMapsToCanvas(le)}var Ce=this._scaleImage(ne,(0,s.getCurrentTransformInverse)(Y));Y.imageSmoothingEnabled=N((0,s.getCurrentTransform)(Y),oe.interpolate),w(Y,Ce.img,0,0,Ce.paintWidth,Ce.paintHeight,0,-H,q,H),this.compose(),this.restore()}}},{key:"paintInlineImageXObjectGroup",value:function(oe,ne){if(this.contentVisible){var q,H=this.ctx;if(oe.bitmap)q=oe.bitmap;else{var Y=oe.width,le=oe.height,Ce=this.cachedCanvases.getCanvas("inlineImage",Y,le).context;k(Ce,oe),q=this.applyTransferMapsToCanvas(Ce)}var Te,ke=_createForOfIteratorHelper(ne);try{for(ke.s();!(Te=ke.n()).done;){var Ee=Te.value;H.save(),H.transform.apply(H,_toConsumableArray$1(Ee.transform)),H.scale(1,-1),w(H,q,Ee.x,Ee.y,Ee.w,Ee.h,0,-1,1,1),H.restore()}}catch(Pe){ke.e(Pe)}finally{ke.f()}this.compose()}}},{key:"paintSolidColorImageMask",value:function(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}},{key:"markPoint",value:function(oe){}},{key:"markPointProps",value:function(oe,ne){}},{key:"beginMarkedContent",value:function(oe){this.markedContentStack.push({visible:!0})}},{key:"beginMarkedContentProps",value:function(oe,ne){oe==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(ne)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}},{key:"endMarkedContent",value:function(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}},{key:"beginCompat",value:function(){}},{key:"endCompat",value:function(){}},{key:"consumePath",value:function(oe){var ne=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(oe);var q=this.ctx;this.pendingClip&&(ne||(this.pendingClip===Z?q.clip("evenodd"):q.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),q.beginPath()}},{key:"getSinglePixelWidth",value:function(){if(!this._cachedGetSinglePixelWidth){var oe=(0,s.getCurrentTransform)(this.ctx);if(oe[1]===0&&oe[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(oe[0]),Math.abs(oe[3]));else{var ne=Math.abs(oe[0]*oe[3]-oe[2]*oe[1]),q=Math.hypot(oe[0],oe[2]),H=Math.hypot(oe[1],oe[3]);this._cachedGetSinglePixelWidth=Math.max(q,H)/ne}}return this._cachedGetSinglePixelWidth}},{key:"getScaleForStroking",value:function(){if(!this._cachedScaleForStroking){var oe,ne,q=this.current.lineWidth,H=(0,s.getCurrentTransform)(this.ctx);if(H[1]===0&&H[2]===0){var Y=Math.abs(H[0]),le=Math.abs(H[3]);if(q===0)oe=1/Y,ne=1/le;else{var Ce=Y*q,Te=le*q;oe=Ce<1?1/Ce:1,ne=Te<1?1/Te:1}}else{var ke=Math.abs(H[0]*H[3]-H[2]*H[1]),Ee=Math.hypot(H[0],H[1]),Pe=Math.hypot(H[2],H[3]);if(q===0)oe=Pe/ke,ne=Ee/ke;else{var Be=q*ke;oe=Pe>Be?Pe/Be:1,ne=Ee>Be?Ee/Be:1}}this._cachedScaleForStroking=[oe,ne]}return this._cachedScaleForStroking}},{key:"rescaleAndStroke",value:function(oe){var ne=this.ctx,q=this.current.lineWidth,H=_slicedToArray(this.getScaleForStroking(),2),Y=H[0],le=H[1];if(ne.lineWidth=q||1,Y!==1||le!==1){var Ce,Te,ke;oe&&(Ce=(0,s.getCurrentTransform)(ne),Te=ne.getLineDash().slice(),ke=ne.lineDashOffset),ne.scale(Y,le);var Ee=Math.max(Y,le);ne.setLineDash(ne.getLineDash().map(function(Pe){return Pe/Ee})),ne.lineDashOffset/=Ee,ne.stroke(),oe&&(ne.setTransform.apply(ne,_toConsumableArray$1(Ce)),ne.setLineDash(Te),ne.lineDashOffset=ke)}else ne.stroke()}},{key:"isContentVisible",value:function(){for(var oe=this.markedContentStack.length-1;oe>=0;oe--)if(!this.markedContentStack[oe].visible)return!1;return!0}}]),we}();function ve(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}for(var Se in n.CanvasGraphics=Q,o.OPS)Q.prototype[Se]!==void 0&&(Q.prototype[o.OPS[Se]]=Q.prototype[Se])},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.TilingPattern=n.PathType=void 0,n.getShadingPattern=function(S){switch(S[0]){case"RadialAxial":return new v(S);case"Mesh":return new g(S);case"Dummy":return new y}throw new Error("Unknown IR type: ".concat(S[0]))};var o=r(1),s=r(142),u={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function d(S,E){if(E){var T=E[2]-E[0],M=E[3]-E[1],I=new Path2D;I.rect(E[0],E[1],T,M),S.clip(I)}}n.PathType=u;var f=function(){function S(){_classCallCheck(this,S),this.constructor===S&&(0,o.unreachable)("Cannot initialize BaseShadingPattern.")}return _createClass(S,[{key:"getPattern",value:function(){(0,o.unreachable)("Abstract method `getPattern` called.")}}]),S}(),v=function(S){_inherits(T,S);var E=_createSuper(T);function T(M){var I;return _classCallCheck(this,T),(I=E.call(this))._type=M[1],I._bbox=M[2],I._colorStops=M[3],I._p0=M[4],I._p1=M[5],I._r0=M[6],I._r1=M[7],I.matrix=null,I}return _createClass(T,[{key:"_createGradient",value:function(M){var I;this._type==="axial"?I=M.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(I=M.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));var F,O=_createForOfIteratorHelper(this._colorStops);try{for(O.s();!(F=O.n()).done;){var N=F.value;I.addColorStop(N[0],N[1])}}catch(D){O.e(D)}finally{O.f()}return I}},{key:"getPattern",value:function(M,I,F,O){var N;if(O===u.STROKE||O===u.FILL){var D=I.current.getClippedPathBoundingBox(O,(0,s.getCurrentTransform)(M))||[0,0,0,0],X=Math.ceil(D[2]-D[0])||1,U=Math.ceil(D[3]-D[1])||1,Z=I.cachedCanvases.getCanvas("pattern",X,U,!0),j=Z.context;j.clearRect(0,0,j.canvas.width,j.canvas.height),j.beginPath(),j.rect(0,0,j.canvas.width,j.canvas.height),j.translate(-D[0],-D[1]),F=o.Util.transform(F,[1,0,0,1,D[0],D[1]]),j.transform.apply(j,_toConsumableArray$1(I.baseTransform)),this.matrix&&j.transform.apply(j,_toConsumableArray$1(this.matrix)),d(j,this._bbox),j.fillStyle=this._createGradient(j),j.fill(),N=M.createPattern(Z.canvas,"no-repeat");var Q=new DOMMatrix(F);N.setTransform(Q)}else d(M,this._bbox),N=this._createGradient(M);return N}}]),T}(f);function m(S,E,T,M,I,F,O,N){var D,X=E.coords,U=E.colors,Z=S.data,j=4*S.width;X[T+1]>X[M+1]&&(D=T,T=M,M=D,D=F,F=O,O=D),X[M+1]>X[I+1]&&(D=M,M=I,I=D,D=O,O=N,N=D),X[T+1]>X[M+1]&&(D=T,T=M,M=D,D=F,F=O,O=D);var Q=(X[T]+E.offsetX)*E.scaleX,ve=(X[T+1]+E.offsetY)*E.scaleY,Se=(X[M]+E.offsetX)*E.scaleX,we=(X[M+1]+E.offsetY)*E.scaleY,oe=(X[I]+E.offsetX)*E.scaleX,ne=(X[I+1]+E.offsetY)*E.scaleY;if(!(ve>=ne))for(var q,H,Y,le,Ce,Te,ke,Ee,Pe=U[F],Be=U[F+1],$e=U[F+2],Oe=U[O],Ne=U[O+1],J=U[O+2],fe=U[N],re=U[N+1],_e=U[N+2],be=Math.round(ve),Ae=Math.round(ne),Le=be;Le<=Ae;Le++){if(Le<we){var Ve=void 0;q=Q-(Q-Se)*(Ve=Le<ve?0:(ve-Le)/(ve-we)),H=Pe-(Pe-Oe)*Ve,Y=Be-(Be-Ne)*Ve,le=$e-($e-J)*Ve}else{var Fe=void 0;q=Se-(Se-oe)*(Fe=Le>ne?1:we===ne?0:(we-Le)/(we-ne)),H=Oe-(Oe-fe)*Fe,Y=Ne-(Ne-re)*Fe,le=J-(J-_e)*Fe}var De=void 0;Ce=Q-(Q-oe)*(De=Le<ve?0:Le>ne?1:(ve-Le)/(ve-ne)),Te=Pe-(Pe-fe)*De,ke=Be-(Be-re)*De,Ee=$e-($e-_e)*De;for(var We=Math.round(Math.min(q,Ce)),Re=Math.round(Math.max(q,Ce)),He=j*Le+4*We,Ze=We;Ze<=Re;Ze++)(De=(q-Ze)/(q-Ce))<0?De=0:De>1&&(De=1),Z[He++]=H-(H-Te)*De|0,Z[He++]=Y-(Y-ke)*De|0,Z[He++]=le-(le-Ee)*De|0,Z[He++]=255}}function _(S,E,T){var M,I,F=E.coords,O=E.colors;switch(E.type){case"lattice":var N=E.verticesPerRow,D=Math.floor(F.length/N)-1,X=N-1;for(M=0;M<D;M++)for(var U=M*N,Z=0;Z<X;Z++,U++)m(S,T,F[U],F[U+1],F[U+N],O[U],O[U+1],O[U+N]),m(S,T,F[U+N+1],F[U+1],F[U+N],O[U+N+1],O[U+1],O[U+N]);break;case"triangles":for(M=0,I=F.length;M<I;M+=3)m(S,T,F[M],F[M+1],F[M+2],O[M],O[M+1],O[M+2]);break;default:throw new Error("illegal figure")}}var g=function(S){_inherits(T,S);var E=_createSuper(T);function T(M){var I;return _classCallCheck(this,T),(I=E.call(this))._coords=M[2],I._colors=M[3],I._figures=M[4],I._bounds=M[5],I._bbox=M[7],I._background=M[8],I.matrix=null,I}return _createClass(T,[{key:"_createMeshCanvas",value:function(M,I,F){var O=Math.floor(this._bounds[0]),N=Math.floor(this._bounds[1]),D=Math.ceil(this._bounds[2])-O,X=Math.ceil(this._bounds[3])-N,U=Math.min(Math.ceil(Math.abs(D*M[0]*1.1)),3e3),Z=Math.min(Math.ceil(Math.abs(X*M[1]*1.1)),3e3),j=D/U,Q=X/Z,ve={coords:this._coords,colors:this._colors,offsetX:-O,offsetY:-N,scaleX:1/j,scaleY:1/Q},Se=U+4,we=Z+4,oe=F.getCanvas("mesh",Se,we,!1),ne=oe.context,q=ne.createImageData(U,Z);if(I)for(var H=q.data,Y=0,le=H.length;Y<le;Y+=4)H[Y]=I[0],H[Y+1]=I[1],H[Y+2]=I[2],H[Y+3]=255;var Ce,Te=_createForOfIteratorHelper(this._figures);try{for(Te.s();!(Ce=Te.n()).done;)_(q,Ce.value,ve)}catch(ke){Te.e(ke)}finally{Te.f()}return ne.putImageData(q,2,2),{canvas:oe.canvas,offsetX:O-2*j,offsetY:N-2*Q,scaleX:j,scaleY:Q}}},{key:"getPattern",value:function(M,I,F,O){var N;if(d(M,this._bbox),O===u.SHADING)N=o.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(M));else if(N=o.Util.singularValueDecompose2dScale(I.baseTransform),this.matrix){var D=o.Util.singularValueDecompose2dScale(this.matrix);N=[N[0]*D[0],N[1]*D[1]]}var X=this._createMeshCanvas(N,O===u.SHADING?null:this._background,I.cachedCanvases);return O!==u.SHADING&&(M.setTransform.apply(M,_toConsumableArray$1(I.baseTransform)),this.matrix&&M.transform.apply(M,_toConsumableArray$1(this.matrix))),M.translate(X.offsetX,X.offsetY),M.scale(X.scaleX,X.scaleY),M.createPattern(X.canvas,"no-repeat")}}]),T}(f),y=function(S){_inherits(T,S);var E=_createSuper(T);function T(){return _classCallCheck(this,T),E.apply(this,arguments)}return _createClass(T,[{key:"getPattern",value:function(){return"hotpink"}}]),T}(f),w=1,x=2,k=function(){function S(E,T,M,I,F){_classCallCheck(this,S),this.operatorList=E[2],this.matrix=E[3]||[1,0,0,1,0,0],this.bbox=E[4],this.xstep=E[5],this.ystep=E[6],this.paintType=E[7],this.tilingType=E[8],this.color=T,this.ctx=M,this.canvasGraphicsFactory=I,this.baseTransform=F}return _createClass(S,[{key:"createPatternCanvas",value:function(E){var T=this.operatorList,M=this.bbox,I=this.xstep,F=this.ystep,O=this.paintType,N=this.tilingType,D=this.color,X=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+N);var U=M[0],Z=M[1],j=M[2],Q=M[3],ve=o.Util.singularValueDecompose2dScale(this.matrix),Se=o.Util.singularValueDecompose2dScale(this.baseTransform),we=[ve[0]*Se[0],ve[1]*Se[1]],oe=this.getSizeAndScale(I,this.ctx.canvas.width,we[0]),ne=this.getSizeAndScale(F,this.ctx.canvas.height,we[1]),q=E.cachedCanvases.getCanvas("pattern",oe.size,ne.size,!0),H=q.context,Y=X.createCanvasGraphics(H);Y.groupLevel=E.groupLevel,this.setFillAndStrokeStyleToContext(Y,O,D);var le=U,Ce=Z,Te=j,ke=Q;return U<0&&(le=0,Te+=Math.abs(U)),Z<0&&(Ce=0,ke+=Math.abs(Z)),H.translate(-oe.scale*le,-ne.scale*Ce),Y.transform(oe.scale,0,0,ne.scale,0,0),H.save(),this.clipBbox(Y,le,Ce,Te,ke),Y.baseTransform=(0,s.getCurrentTransform)(Y.ctx),Y.executeOperatorList(T),Y.endDrawing(),{canvas:q.canvas,scaleX:oe.scale,scaleY:ne.scale,offsetX:le,offsetY:Ce}}},{key:"getSizeAndScale",value:function(E,T,M){E=Math.abs(E);var I=Math.max(S.MAX_PATTERN_SIZE,T),F=Math.ceil(E*M);return F>=I?F=I:M=F/E,{scale:M,size:F}}},{key:"clipBbox",value:function(E,T,M,I,F){var O=I-T,N=F-M;E.ctx.rect(T,M,O,N),E.current.updateRectMinMax((0,s.getCurrentTransform)(E.ctx),[T,M,I,F]),E.clip(),E.endPath()}},{key:"setFillAndStrokeStyleToContext",value:function(E,T,M){var I=E.ctx,F=E.current;switch(T){case w:var O=this.ctx;I.fillStyle=O.fillStyle,I.strokeStyle=O.strokeStyle,F.fillColor=O.fillStyle,F.strokeColor=O.strokeStyle;break;case x:var N=o.Util.makeHexColor(M[0],M[1],M[2]);I.fillStyle=N,I.strokeStyle=N,F.fillColor=N,F.strokeColor=N;break;default:throw new o.FormatError("Unsupported paint type: ".concat(T))}}},{key:"getPattern",value:function(E,T,M,I){var F=M;I!==u.SHADING&&(F=o.Util.transform(F,T.baseTransform),this.matrix&&(F=o.Util.transform(F,this.matrix)));var O=this.createPatternCanvas(T),N=new DOMMatrix(F);N=(N=N.translate(O.offsetX,O.offsetY)).scale(1/O.scaleX,1/O.scaleY);var D=E.createPattern(O.canvas,"repeat");return D.setTransform(N),D}}],[{key:"MAX_PATTERN_SIZE",get:function(){return(0,o.shadow)(this,"MAX_PATTERN_SIZE",3e3)}}]),S}();n.TilingPattern=k},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.convertBlackAndWhiteToRGBA=s,n.convertToRGBA=function(u){switch(u.kind){case o.ImageKind.GRAYSCALE_1BPP:return s(u);case o.ImageKind.RGB_24BPP:return function(d){var f=d.src,v=d.srcPos,m=v===void 0?0:v,_=d.dest,g=d.destPos,y=g===void 0?0:g;d.width,d.height;var w=0,x=f.length>>2,k=new Uint32Array(f.buffer,m,x);if(o.FeatureTest.isLittleEndian){for(;w<x-2;w+=3,y+=4){var S=k[w],E=k[w+1],T=k[w+2];_[y]=4278190080|S,_[y+1]=S>>>24|E<<8|4278190080,_[y+2]=E>>>16|T<<16|4278190080,_[y+3]=T>>>8|4278190080}for(var M=4*w,I=f.length;M<I;M+=3)_[y++]=f[M]|f[M+1]<<8|f[M+2]<<16|4278190080}else{for(;w<x-2;w+=3,y+=4){var F=k[w],O=k[w+1],N=k[w+2];_[y]=255|F,_[y+1]=F<<24|O>>>8|255,_[y+2]=O<<16|N>>>16|255,_[y+3]=N<<8|255}for(var D=4*w,X=f.length;D<X;D+=3)_[y++]=f[D]<<24|f[D+1]<<16|f[D+2]<<8|255}return{srcPos:m,destPos:y}}(u)}return null},n.grayToRGBA=function(u,d){if(o.FeatureTest.isLittleEndian)for(var f=0,v=u.length;f<v;f++)d[f]=65793*u[f]|4278190080;else for(var m=0,_=u.length;m<_;m++)d[m]=16843008*u[m]|255};var o=r(1);function s(u){var d=u.src,f=u.srcPos,v=f===void 0?0:f,m=u.dest,_=u.width,g=u.height,y=u.nonBlackColor,w=y===void 0?4294967295:y,x=u.inverseDecode,k=x!==void 0&&x,S=o.FeatureTest.isLittleEndian?4278190080:255,E=_slicedToArray(k?[w,S]:[S,w],2),T=E[0],M=E[1],I=_>>3,F=7&_,O=d.length;m=new Uint32Array(m.buffer);for(var N=0,D=0;D<g;D++){for(var X=v+I;v<X;v++){var U=v<O?d[v]:255;m[N++]=128&U?M:T,m[N++]=64&U?M:T,m[N++]=32&U?M:T,m[N++]=16&U?M:T,m[N++]=8&U?M:T,m[N++]=4&U?M:T,m[N++]=2&U?M:T,m[N++]=1&U?M:T}if(F!==0)for(var Z=v<O?d[v++]:255,j=0;j<F;j++)m[N++]=Z&1<<7-j?M:T}return{srcPos:v,destPos:N}}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.GlobalWorkerOptions=void 0;var r=Object.create(null);n.GlobalWorkerOptions=r,r.workerPort=null,r.workerSrc=""},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.MessageHandler=void 0;var o=r(1),s=1,u=2,d=1,f=2,v=3,m=4,_=5,g=6,y=7,w=8;function x(S){switch(S instanceof Error||_typeof$1(S)==="object"&&S!==null||(0,o.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),S.name){case"AbortException":return new o.AbortException(S.message);case"MissingPDFException":return new o.MissingPDFException(S.message);case"PasswordException":return new o.PasswordException(S.message,S.code);case"UnexpectedResponseException":return new o.UnexpectedResponseException(S.message,S.status);case"UnknownErrorException":return new o.UnknownErrorException(S.message,S.details);default:return new o.UnknownErrorException(S.message,S.toString())}}var k=function(){function S(T,M,I){var F=this;_classCallCheck(this,S),this.sourceName=T,this.targetName=M,this.comObj=I,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(O){var N=O.data;if(N.targetName===F.sourceName)if(N.stream)F._processStreamMessage(N);else if(N.callback){var D=N.callbackId,X=F.callbackCapabilities[D];if(!X)throw new Error("Cannot resolve callback ".concat(D));if(delete F.callbackCapabilities[D],N.callback===s)X.resolve(N.data);else{if(N.callback!==u)throw new Error("Unexpected callback case");X.reject(x(N.reason))}}else{var U=F.actionHandler[N.action];if(!U)throw new Error("Unknown action from worker: ".concat(N.action));if(N.callbackId){var Z=F.sourceName,j=N.sourceName;new Promise(function(Q){Q(U(N.data))}).then(function(Q){I.postMessage({sourceName:Z,targetName:j,callback:s,callbackId:N.callbackId,data:Q})},function(Q){I.postMessage({sourceName:Z,targetName:j,callback:u,callbackId:N.callbackId,reason:x(Q)})})}else N.streamId?F._createStreamSink(N):U(N.data)}},I.addEventListener("message",this._onComObjOnMessage)}var E;return _createClass(S,[{key:"on",value:function(T,M){var I=this.actionHandler;if(I[T])throw new Error('There is already an actionName called "'.concat(T,'"'));I[T]=M}},{key:"send",value:function(T,M,I){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,data:M},I)}},{key:"sendWithPromise",value:function(T,M,I){var F=this.callbackId++,O=(0,o.createPromiseCapability)();this.callbackCapabilities[F]=O;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,callbackId:F,data:M},I)}catch(N){O.reject(N)}return O.promise}},{key:"sendWithStream",value:function(T,M,I,F){var O=this,N=this.streamId++,D=this.sourceName,X=this.targetName,U=this.comObj;return new ReadableStream({start:function(Z){var j=(0,o.createPromiseCapability)();return O.streamControllers[N]={controller:Z,startCall:j,pullCall:null,cancelCall:null,isClosed:!1},U.postMessage({sourceName:D,targetName:X,action:T,streamId:N,data:M,desiredSize:Z.desiredSize},F),j.promise},pull:function(Z){var j=(0,o.createPromiseCapability)();return O.streamControllers[N].pullCall=j,U.postMessage({sourceName:D,targetName:X,stream:g,streamId:N,desiredSize:Z.desiredSize}),j.promise},cancel:function(Z){(0,o.assert)(Z instanceof Error,"cancel must have a valid reason");var j=(0,o.createPromiseCapability)();return O.streamControllers[N].cancelCall=j,O.streamControllers[N].isClosed=!0,U.postMessage({sourceName:D,targetName:X,stream:d,streamId:N,reason:x(Z)}),j.promise}},I)}},{key:"_createStreamSink",value:function(T){var M=T.streamId,I=this.sourceName,F=T.sourceName,O=this.comObj,N=this,D=this.actionHandler[T.action],X={enqueue:function(U){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,j=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var Q=this.desiredSize;this.desiredSize-=Z,Q>0&&this.desiredSize<=0&&(this.sinkCapability=(0,o.createPromiseCapability)(),this.ready=this.sinkCapability.promise),O.postMessage({sourceName:I,targetName:F,stream:m,streamId:M,chunk:U},j)}},close:function(){this.isCancelled||(this.isCancelled=!0,O.postMessage({sourceName:I,targetName:F,stream:v,streamId:M}),delete N.streamSinks[M])},error:function(U){(0,o.assert)(U instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,O.postMessage({sourceName:I,targetName:F,stream:_,streamId:M,reason:x(U)}))},sinkCapability:(0,o.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:T.desiredSize,ready:null};X.sinkCapability.resolve(),X.ready=X.sinkCapability.promise,this.streamSinks[M]=X,new Promise(function(U){U(D(T.data,X))}).then(function(){O.postMessage({sourceName:I,targetName:F,stream:w,streamId:M,success:!0})},function(U){O.postMessage({sourceName:I,targetName:F,stream:w,streamId:M,reason:x(U)})})}},{key:"_processStreamMessage",value:function(T){var M=T.streamId,I=this.sourceName,F=T.sourceName,O=this.comObj,N=this.streamControllers[M],D=this.streamSinks[M];switch(T.stream){case w:T.success?N.startCall.resolve():N.startCall.reject(x(T.reason));break;case y:T.success?N.pullCall.resolve():N.pullCall.reject(x(T.reason));break;case g:if(!D){O.postMessage({sourceName:I,targetName:F,stream:y,streamId:M,success:!0});break}D.desiredSize<=0&&T.desiredSize>0&&D.sinkCapability.resolve(),D.desiredSize=T.desiredSize,new Promise(function(X){X(D.onPull&&D.onPull())}).then(function(){O.postMessage({sourceName:I,targetName:F,stream:y,streamId:M,success:!0})},function(X){O.postMessage({sourceName:I,targetName:F,stream:y,streamId:M,reason:x(X)})});break;case m:if((0,o.assert)(N,"enqueue should have stream controller"),N.isClosed)break;N.controller.enqueue(T.chunk);break;case v:if((0,o.assert)(N,"close should have stream controller"),N.isClosed)break;N.isClosed=!0,N.controller.close(),this._deleteStreamController(N,M);break;case _:(0,o.assert)(N,"error should have stream controller"),N.controller.error(x(T.reason)),this._deleteStreamController(N,M);break;case f:T.success?N.cancelCall.resolve():N.cancelCall.reject(x(T.reason)),this._deleteStreamController(N,M);break;case d:if(!D)break;new Promise(function(X){X(D.onCancel&&D.onCancel(x(T.reason)))}).then(function(){O.postMessage({sourceName:I,targetName:F,stream:f,streamId:M,success:!0})},function(X){O.postMessage({sourceName:I,targetName:F,stream:f,streamId:M,reason:x(X)})}),D.sinkCapability.reject(x(T.reason)),D.isCancelled=!0,delete this.streamSinks[M];break;default:throw new Error("Unexpected stream case")}}},{key:"_deleteStreamController",value:(E=_asyncToGenerator(_regeneratorRuntime().mark(function T(M,I){return _regeneratorRuntime().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,Promise.allSettled([M.startCall&&M.startCall.promise,M.pullCall&&M.pullCall.promise,M.cancelCall&&M.cancelCall.promise]);case 2:delete this.streamControllers[I];case 3:case"end":return F.stop()}},T,this)})),function(T,M){return E.apply(this,arguments)})},{key:"destroy",value:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}]),S}();n.MessageHandler=k},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.Metadata=void 0;var o=r(1),s=new WeakMap,u=new WeakMap,d=function(){function f(v){_classCallCheck(this,f),_classPrivateFieldInitSpec(this,s,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,u,{writable:!0,value:void 0});var m=v.parsedData,_=v.rawData;_classPrivateFieldSet(this,s,m),_classPrivateFieldSet(this,u,_)}return _createClass(f,[{key:"getRaw",value:function(){return _classPrivateFieldGet(this,u)}},{key:"get",value:function(v){var m;return(m=_classPrivateFieldGet(this,s).get(v))!==null&&m!==void 0?m:null}},{key:"getAll",value:function(){return(0,o.objectFromMap)(_classPrivateFieldGet(this,s))}},{key:"has",value:function(v){return _classPrivateFieldGet(this,s).has(v)}}]),f}();n.Metadata=d},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.OptionalContentConfig=void 0;var o=r(1),s=r(144);function u(F,O,N){d(F,O),O.set(F,N)}function d(F,O){if(O.has(F))throw new TypeError("Cannot initialize the same private elements twice on an object")}function f(F,O,N){if(!O.has(F))throw new TypeError("attempted to get private field on non-instance");return N}function v(F,O){return function(N,D){return D.get?D.get.call(N):D.value}(F,_(F,O,"get"))}function m(F,O,N){return function(D,X,U){if(X.set)X.set.call(D,U);else{if(!X.writable)throw new TypeError("attempted to set read only private field");X.value=U}}(F,_(F,O,"set"),N),N}function _(F,O,N){if(!O.has(F))throw new TypeError("attempted to "+N+" private field on non-instance");return O.get(F)}var g=Symbol("INTERNAL"),y=new WeakMap,w=function(){function F(O,N){_classCallCheck(this,F),_classPrivateFieldInitSpec(this,y,{writable:!0,value:!0}),this.name=O,this.intent=N}return _createClass(F,[{key:"visible",get:function(){return _classPrivateFieldGet(this,y)}},{key:"_setVisible",value:function(O,N){O!==g&&(0,o.unreachable)("Internal method `_setVisible` called."),_classPrivateFieldSet(this,y,N)}}]),F}(),x=new WeakMap,k=new WeakMap,S=new WeakMap,E=new WeakMap,T=new WeakSet,M=function(){function F(O){var N,D;if(_classCallCheck(this,F),d(N=this,D=T),D.add(N),u(this,x,{writable:!0,value:null}),u(this,k,{writable:!0,value:new Map}),u(this,S,{writable:!0,value:null}),u(this,E,{writable:!0,value:null}),this.name=null,this.creator=null,O!==null){this.name=O.name,this.creator=O.creator,m(this,E,O.order);var X,U=_createForOfIteratorHelper(O.groups);try{for(U.s();!(X=U.n()).done;){var Z=X.value;v(this,k).set(Z.id,new w(Z.name,Z.intent))}}catch(H){U.e(H)}finally{U.f()}if(O.baseState==="OFF"){var j,Q=_createForOfIteratorHelper(v(this,k).values());try{for(Q.s();!(j=Q.n()).done;)j.value._setVisible(g,!1)}catch(H){Q.e(H)}finally{Q.f()}}var ve,Se=_createForOfIteratorHelper(O.on);try{for(Se.s();!(ve=Se.n()).done;){var we=ve.value;v(this,k).get(we)._setVisible(g,!0)}}catch(H){Se.e(H)}finally{Se.f()}var oe,ne=_createForOfIteratorHelper(O.off);try{for(ne.s();!(oe=ne.n()).done;){var q=oe.value;v(this,k).get(q)._setVisible(g,!1)}}catch(H){ne.e(H)}finally{ne.f()}m(this,S,this.getHash())}}return _createClass(F,[{key:"isVisible",value:function(O){if(v(this,k).size===0)return!0;if(!O)return(0,o.warn)("Optional content group not defined."),!0;if(O.type==="OCG")return v(this,k).has(O.id)?v(this,k).get(O.id).visible:((0,o.warn)("Optional content group not found: ".concat(O.id)),!0);if(O.type==="OCMD"){if(O.expression)return f(this,T,I).call(this,O.expression);if(!O.policy||O.policy==="AnyOn"){var N,D=_createForOfIteratorHelper(O.ids);try{for(D.s();!(N=D.n()).done;){var X=N.value;if(!v(this,k).has(X))return(0,o.warn)("Optional content group not found: ".concat(X)),!0;if(v(this,k).get(X).visible)return!0}}catch(q){D.e(q)}finally{D.f()}return!1}if(O.policy==="AllOn"){var U,Z=_createForOfIteratorHelper(O.ids);try{for(Z.s();!(U=Z.n()).done;){var j=U.value;if(!v(this,k).has(j))return(0,o.warn)("Optional content group not found: ".concat(j)),!0;if(!v(this,k).get(j).visible)return!1}}catch(q){Z.e(q)}finally{Z.f()}return!0}if(O.policy==="AnyOff"){var Q,ve=_createForOfIteratorHelper(O.ids);try{for(ve.s();!(Q=ve.n()).done;){var Se=Q.value;if(!v(this,k).has(Se))return(0,o.warn)("Optional content group not found: ".concat(Se)),!0;if(!v(this,k).get(Se).visible)return!0}}catch(q){ve.e(q)}finally{ve.f()}return!1}if(O.policy==="AllOff"){var we,oe=_createForOfIteratorHelper(O.ids);try{for(oe.s();!(we=oe.n()).done;){var ne=we.value;if(!v(this,k).has(ne))return(0,o.warn)("Optional content group not found: ".concat(ne)),!0;if(v(this,k).get(ne).visible)return!1}}catch(q){oe.e(q)}finally{oe.f()}return!0}return(0,o.warn)("Unknown optional content policy ".concat(O.policy,".")),!0}return(0,o.warn)("Unknown group type ".concat(O.type,".")),!0}},{key:"setVisibility",value:function(O){var N=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];v(this,k).has(O)?(v(this,k).get(O)._setVisible(g,!!N),m(this,x,null)):(0,o.warn)("Optional content group not found: ".concat(O))}},{key:"hasInitialVisibility",get:function(){return this.getHash()===v(this,S)}},{key:"getOrder",value:function(){return v(this,k).size?v(this,E)?v(this,E).slice():_toConsumableArray$1(v(this,k).keys()):null}},{key:"getGroups",value:function(){return v(this,k).size>0?(0,o.objectFromMap)(v(this,k)):null}},{key:"getGroup",value:function(O){return v(this,k).get(O)||null}},{key:"getHash",value:function(){if(v(this,x)!==null)return v(this,x);var O,N=new s.MurmurHash3_64,D=_createForOfIteratorHelper(v(this,k));try{for(D.s();!(O=D.n()).done;){var X=_slicedToArray(O.value,2),U=X[0],Z=X[1];N.update("".concat(U,":").concat(Z.visible))}}catch(j){D.e(j)}finally{D.f()}return m(this,x,N.hexdigest())}}]),F}();function I(F){var O=F.length;if(O<2)return!0;for(var N=F[0],D=1;D<O;D++){var X=F[D],U=void 0;if(Array.isArray(X))U=f(this,T,I).call(this,X);else{if(!v(this,k).has(X))return(0,o.warn)("Optional content group not found: ".concat(X)),!0;U=v(this,k).get(X).visible}switch(N){case"And":if(!U)return!1;break;case"Or":if(U)return!0;break;case"Not":return!U;default:return!0}}return N==="And"}n.OptionalContentConfig=M},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.PDFDataTransportStream=void 0;var o=r(1),s=r(142),u=function(){function v(m,_){var g=this;_classCallCheck(this,v);var y=m.length,w=m.initialData,x=m.progressiveDone,k=x!==void 0&&x,S=m.contentDispositionFilename,E=S===void 0?null:S,T=m.disableRange,M=T!==void 0&&T,I=m.disableStream,F=I!==void 0&&I;if((0,o.assert)(_,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=k,this._contentDispositionFilename=E,(w==null?void 0:w.length)>0){var O=w instanceof Uint8Array&&w.byteLength===w.buffer.byteLength?w.buffer:new Uint8Array(w).buffer;this._queuedChunks.push(O)}this._pdfDataRangeTransport=_,this._isStreamingSupported=!F,this._isRangeSupported=!M,this._contentLength=y,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(function(N,D){g._onReceiveData({begin:N,chunk:D})}),this._pdfDataRangeTransport.addProgressListener(function(N,D){g._onProgress({loaded:N,total:D})}),this._pdfDataRangeTransport.addProgressiveReadListener(function(N){g._onReceiveData({chunk:N})}),this._pdfDataRangeTransport.addProgressiveDoneListener(function(){g._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}return _createClass(v,[{key:"_onReceiveData",value:function(m){var _=m.begin,g=m.chunk,y=g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength?g.buffer:new Uint8Array(g).buffer;if(_===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(y):this._queuedChunks.push(y);else{var w=this._rangeReaders.some(function(x){return x._begin===_&&(x._enqueue(y),!0)});(0,o.assert)(w,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}},{key:"_progressiveDataLength",get:function(){var m,_;return(m=(_=this._fullRequestReader)===null||_===void 0?void 0:_._loaded)!==null&&m!==void 0?m:0}},{key:"_onProgress",value:function(m){var _,g,y,w;m.total===void 0?(_=this._rangeReaders[0])===null||_===void 0||(g=_.onProgress)===null||g===void 0||g.call(_,{loaded:m.loaded}):(y=this._fullRequestReader)===null||y===void 0||(w=y.onProgress)===null||w===void 0||w.call(y,{loaded:m.loaded,total:m.total})}},{key:"_onProgressiveDone",value:function(){var m;(m=this._fullRequestReader)===null||m===void 0||m.progressiveDone(),this._progressiveDone=!0}},{key:"_removeRangeReader",value:function(m){var _=this._rangeReaders.indexOf(m);_>=0&&this._rangeReaders.splice(_,1)}},{key:"getFullReader",value:function(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var m=this._queuedChunks;return this._queuedChunks=null,new d(this,m,this._progressiveDone,this._contentDispositionFilename)}},{key:"getRangeReader",value:function(m,_){if(_<=this._progressiveDataLength)return null;var g=new f(this,m,_);return this._pdfDataRangeTransport.requestDataRange(m,_),this._rangeReaders.push(g),g}},{key:"cancelAllRequests",value:function(m){var _;(_=this._fullRequestReader)===null||_===void 0||_.cancel(m);var g,y=_createForOfIteratorHelper(this._rangeReaders.slice(0));try{for(y.s();!(g=y.n()).done;)g.value.cancel(m)}catch(w){y.e(w)}finally{y.f()}this._pdfDataRangeTransport.abort()}}]),v}();n.PDFDataTransportStream=u;var d=function(){function v(_,g){_classCallCheck(this,v);var y=arguments.length>2&&arguments[2]!==void 0&&arguments[2],w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this._stream=_,this._done=y||!1,this._filename=(0,s.isPdfFile)(w)?w:null,this._queuedChunks=g||[],this._loaded=0;var x,k=_createForOfIteratorHelper(this._queuedChunks);try{for(k.s();!(x=k.n()).done;){var S=x.value;this._loaded+=S.byteLength}}catch(E){k.e(E)}finally{k.f()}this._requests=[],this._headersReady=Promise.resolve(),_._fullRequestReader=this,this.onProgress=null}var m;return _createClass(v,[{key:"_enqueue",value:function(_){this._done||(this._requests.length>0?this._requests.shift().resolve({value:_,done:!1}):this._queuedChunks.push(_),this._loaded+=_.byteLength)}},{key:"headersReady",get:function(){return this._headersReady}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function(){return this._stream._contentLength}},{key:"read",value:(m=_asyncToGenerator(_regeneratorRuntime().mark(function _(){var g,y;return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!(this._queuedChunks.length>0)){w.next=3;break}return g=this._queuedChunks.shift(),w.abrupt("return",{value:g,done:!1});case 3:if(!this._done){w.next=5;break}return w.abrupt("return",{value:void 0,done:!0});case 5:return y=(0,o.createPromiseCapability)(),this._requests.push(y),w.abrupt("return",y.promise);case 8:case"end":return w.stop()}},_,this)})),function(){return m.apply(this,arguments)})},{key:"cancel",value:function(_){this._done=!0;var g,y=_createForOfIteratorHelper(this._requests);try{for(y.s();!(g=y.n()).done;)g.value.resolve({value:void 0,done:!0})}catch(w){y.e(w)}finally{y.f()}this._requests.length=0}},{key:"progressiveDone",value:function(){this._done||(this._done=!0)}}]),v}(),f=function(){function v(_,g,y){_classCallCheck(this,v),this._stream=_,this._begin=g,this._end=y,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}var m;return _createClass(v,[{key:"_enqueue",value:function(_){if(!this._done){if(this._requests.length===0)this._queuedChunk=_;else{this._requests.shift().resolve({value:_,done:!1});var g,y=_createForOfIteratorHelper(this._requests);try{for(y.s();!(g=y.n()).done;)g.value.resolve({value:void 0,done:!0})}catch(w){y.e(w)}finally{y.f()}this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:(m=_asyncToGenerator(_regeneratorRuntime().mark(function _(){var g,y;return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!this._queuedChunk){w.next=4;break}return g=this._queuedChunk,this._queuedChunk=null,w.abrupt("return",{value:g,done:!1});case 4:if(!this._done){w.next=6;break}return w.abrupt("return",{value:void 0,done:!0});case 6:return y=(0,o.createPromiseCapability)(),this._requests.push(y),w.abrupt("return",y.promise);case 9:case"end":return w.stop()}},_,this)})),function(){return m.apply(this,arguments)})},{key:"cancel",value:function(_){this._done=!0;var g,y=_createForOfIteratorHelper(this._requests);try{for(y.s();!(g=y.n()).done;)g.value.resolve({value:void 0,done:!0})}catch(w){y.e(w)}finally{y.f()}this._requests.length=0,this._stream._removeRangeReader(this)}}]),v}()},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.XfaText=void 0;var r=function(){function o(){_classCallCheck(this,o)}return _createClass(o,null,[{key:"textContent",value:function(s){var u=[],d={items:u,styles:Object.create(null)};return function f(v){var m;if(v){var _=null,g=v.name;if(g==="#text")_=v.value;else{if(!o.shouldBuildText(g))return;v!=null&&(m=v.attributes)!==null&&m!==void 0&&m.textContent?_=v.attributes.textContent:v.value&&(_=v.value)}if(_!==null&&u.push({str:_}),v.children){var y,w=_createForOfIteratorHelper(v.children);try{for(w.s();!(y=w.n()).done;)f(y.value)}catch(x){w.e(x)}finally{w.f()}}}}(s),d}},{key:"shouldBuildText",value:function(s){return!(s==="textarea"||s==="input"||s==="option"||s==="select")}}]),o}();n.XfaText=r},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.NodeStandardFontDataFactory=n.NodeFilterFactory=n.NodeCanvasFactory=n.NodeCMapReaderFactory=void 0;var o=r(143),s=function(m){return new Promise(function(_,g){require$$0.readFile(m,function(y,w){!y&&w?_(new Uint8Array(w)):g(new Error(y))})})},u=function(m){_inherits(g,m);var _=_createSuper(g);function g(){return _classCallCheck(this,g),_.apply(this,arguments)}return _createClass(g)}(o.BaseFilterFactory);n.NodeFilterFactory=u;var d=function(m){_inherits(g,m);var _=_createSuper(g);function g(){return _classCallCheck(this,g),_.apply(this,arguments)}return _createClass(g,[{key:"_createCanvas",value:function(y,w){return require$$0.createCanvas(y,w)}}]),g}(o.BaseCanvasFactory);n.NodeCanvasFactory=d;var f=function(m){_inherits(g,m);var _=_createSuper(g);function g(){return _classCallCheck(this,g),_.apply(this,arguments)}return _createClass(g,[{key:"_fetchData",value:function(y,w){return s(y).then(function(x){return{cMapData:x,compressionType:w}})}}]),g}(o.BaseCMapReaderFactory);n.NodeCMapReaderFactory=f;var v=function(m){_inherits(g,m);var _=_createSuper(g);function g(){return _classCallCheck(this,g),_.apply(this,arguments)}return _createClass(g,[{key:"_fetchData",value:function(y){return s(y)}}]),g}(o.BaseStandardFontDataFactory);n.NodeStandardFontDataFactory=v},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNodeStream=void 0;var o=r(1),s=r(157),u=require$$0,d=require$$0,f=require$$0,v=require$$0,m=/^file:\/\/\/[a-zA-Z]:\//,_=function(){function T(M){var I,F;_classCallCheck(this,T),this.source=M,this.url=(I=M.url,(F=v.parse(I)).protocol==="file:"||F.host?F:/^[a-z]:[/\\]/i.test(I)?v.parse("file:///".concat(I)):(F.host||(F.protocol="file:"),F)),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&M.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return _createClass(T,[{key:"_progressiveDataLength",get:function(){var M,I;return(M=(I=this._fullRequestReader)===null||I===void 0?void 0:I._loaded)!==null&&M!==void 0?M:0}},{key:"getFullReader",value:function(){return(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new S(this):new x(this),this._fullRequestReader}},{key:"getRangeReader",value:function(M,I){if(I<=this._progressiveDataLength)return null;var F=this.isFsUrl?new E(this,M,I):new k(this,M,I);return this._rangeRequestReaders.push(F),F}},{key:"cancelAllRequests",value:function(M){var I;(I=this._fullRequestReader)===null||I===void 0||I.cancel(M);var F,O=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0));try{for(O.s();!(F=O.n()).done;)F.value.cancel(M)}catch(N){O.e(N)}finally{O.f()}}}]),T}();n.PDFNodeStream=_;var g=function(){function T(I){_classCallCheck(this,T),this._url=I.url,this._done=!1,this._storedError=null,this.onProgress=null;var F=I.source;this._contentLength=F.length,this._loaded=0,this._filename=null,this._disableRange=F.disableRange||!1,this._rangeChunkSize=F.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!F.disableStream,this._isRangeSupported=!F.disableRange,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)(),this._headersCapability=(0,o.createPromiseCapability)()}var M;return _createClass(T,[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(M=_asyncToGenerator(_regeneratorRuntime().mark(function I(){var F,O,N;return _regeneratorRuntime().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,this._readCapability.promise;case 2:if(!this._done){D.next=4;break}return D.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){D.next=6;break}throw this._storedError;case 6:if((O=this._readableStream.read())!==null){D.next=10;break}return this._readCapability=(0,o.createPromiseCapability)(),D.abrupt("return",this.read());case 10:return this._loaded+=O.length,(F=this.onProgress)===null||F===void 0||F.call(this,{loaded:this._loaded,total:this._contentLength}),N=new Uint8Array(O).buffer,D.abrupt("return",{value:N,done:!1});case 14:case"end":return D.stop()}},I,this)})),function(){return M.apply(this,arguments)})},{key:"cancel",value:function(I){this._readableStream?this._readableStream.destroy(I):this._error(I)}},{key:"_error",value:function(I){this._storedError=I,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(I){var F=this;this._readableStream=I,I.on("readable",function(){F._readCapability.resolve()}),I.on("end",function(){I.destroy(),F._done=!0,F._readCapability.resolve()}),I.on("error",function(O){F._error(O)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}]),T}(),y=function(){function T(I){_classCallCheck(this,T),this._url=I.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)();var F=I.source;this._isStreamingSupported=!F.disableStream}var M;return _createClass(T,[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(M=_asyncToGenerator(_regeneratorRuntime().mark(function I(){var F,O,N;return _regeneratorRuntime().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,this._readCapability.promise;case 2:if(!this._done){D.next=4;break}return D.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){D.next=6;break}throw this._storedError;case 6:if((O=this._readableStream.read())!==null){D.next=10;break}return this._readCapability=(0,o.createPromiseCapability)(),D.abrupt("return",this.read());case 10:return this._loaded+=O.length,(F=this.onProgress)===null||F===void 0||F.call(this,{loaded:this._loaded}),N=new Uint8Array(O).buffer,D.abrupt("return",{value:N,done:!1});case 14:case"end":return D.stop()}},I,this)})),function(){return M.apply(this,arguments)})},{key:"cancel",value:function(I){this._readableStream?this._readableStream.destroy(I):this._error(I)}},{key:"_error",value:function(I){this._storedError=I,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(I){var F=this;this._readableStream=I,I.on("readable",function(){F._readCapability.resolve()}),I.on("end",function(){I.destroy(),F._done=!0,F._readCapability.resolve()}),I.on("error",function(O){F._error(O)}),this._storedError&&this._readableStream.destroy(this._storedError)}}]),T}();function w(T,M){return{protocol:T.protocol,auth:T.auth,host:T.hostname,port:T.port,path:T.path,method:"GET",headers:M}}var x=function(T){_inherits(I,T);var M=_createSuper(I);function I(F){var O;_classCallCheck(this,I);var N=function(D){if(D.statusCode===404){var X=new o.MissingPDFException('Missing PDF "'.concat(O._url,'".'));return O._storedError=X,void O._headersCapability.reject(X)}O._headersCapability.resolve(),O._setReadableStream(D);var U=function(ve){return O._readableStream.headers[ve.toLowerCase()]},Z=(0,s.validateRangeRequestCapabilities)({getResponseHeader:U,isHttp:F.isHttp,rangeChunkSize:O._rangeChunkSize,disableRange:O._disableRange}),j=Z.allowRangeRequests,Q=Z.suggestedLength;O._isRangeSupported=j,O._contentLength=Q||O._contentLength,O._filename=(0,s.extractFilenameFromHeader)(U)};return(O=M.call(this,F))._request=null,O._url.protocol==="http:"?O._request=d.request(w(O._url,F.httpHeaders),N):O._request=f.request(w(O._url,F.httpHeaders),N),O._request.on("error",function(D){O._storedError=D,O._headersCapability.reject(D)}),O._request.end(),O}return _createClass(I)}(g),k=function(T){_inherits(I,T);var M=_createSuper(I);function I(F,O,N){var D;for(var X in _classCallCheck(this,I),(D=M.call(this,F))._httpHeaders={},F.httpHeaders){var U=F.httpHeaders[X];U!==void 0&&(D._httpHeaders[X]=U)}D._httpHeaders.Range="bytes=".concat(O,"-").concat(N-1);var Z=function(j){if(j.statusCode!==404)D._setReadableStream(j);else{var Q=new o.MissingPDFException('Missing PDF "'.concat(D._url,'".'));D._storedError=Q}};return D._request=null,D._url.protocol==="http:"?D._request=d.request(w(D._url,D._httpHeaders),Z):D._request=f.request(w(D._url,D._httpHeaders),Z),D._request.on("error",function(j){D._storedError=j}),D._request.end(),D}return _createClass(I)}(y),S=function(T){_inherits(I,T);var M=_createSuper(I);function I(F){var O;_classCallCheck(this,I),O=M.call(this,F);var N=decodeURIComponent(O._url.path);return m.test(O._url.href)&&(N=N.replace(/^\//,"")),u.lstat(N,function(D,X){if(D)return D.code==="ENOENT"&&(D=new o.MissingPDFException('Missing PDF "'.concat(N,'".'))),O._storedError=D,void O._headersCapability.reject(D);O._contentLength=X.size,O._setReadableStream(u.createReadStream(N)),O._headersCapability.resolve()}),O}return _createClass(I)}(g),E=function(T){_inherits(I,T);var M=_createSuper(I);function I(F,O,N){var D;_classCallCheck(this,I),D=M.call(this,F);var X=decodeURIComponent(D._url.path);return m.test(D._url.href)&&(X=X.replace(/^\//,"")),D._setReadableStream(u.createReadStream(X,{start:O,end:N-1})),D}return _createClass(I)}(y)},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.createResponseStatusError=function(d,f){return d===404||d===0&&f.startsWith("file:")?new o.MissingPDFException('Missing PDF "'+f+'".'):new o.UnexpectedResponseException("Unexpected server response (".concat(d,') while retrieving PDF "').concat(f,'".'),d)},n.extractFilenameFromHeader=function(d){var f=d("Content-Disposition");if(f){var v=(0,s.getFilenameFromContentDispositionHeader)(f);if(v.includes("%"))try{v=decodeURIComponent(v)}catch{}if((0,u.isPdfFile)(v))return v}return null},n.validateRangeRequestCapabilities=function(d){var f=d.getResponseHeader,v=d.isHttp,m=d.rangeChunkSize,_=d.disableRange,g={allowRangeRequests:!1,suggestedLength:void 0},y=parseInt(f("Content-Length"),10);return Number.isInteger(y)&&(g.suggestedLength=y,y<=2*m||_||!v||f("Accept-Ranges")!=="bytes"||(f("Content-Encoding")||"identity")!=="identity"||(g.allowRangeRequests=!0)),g},n.validateResponseStatus=function(d){return d===200||d===206};var o=r(1),s=r(158),u=r(142)},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.getFilenameFromContentDispositionHeader=function(s){var u=!0,d=m("filename\\*","i").exec(s);if(d){var f=y(d=d[1]);return g(f=x(f=w(f=unescape(f))))}if(d=function(k){for(var S,E=[],T=m("filename\\*((?!0\\d)\\d+)(\\*?)","ig");(S=T.exec(k))!==null;){var M=_slicedToArray(S,4),I=M[1],F=M[2],O=M[3];if((I=parseInt(I,10))in E){if(I===0)break}else E[I]=[F,O]}for(var N=[],D=0;D<E.length&&D in E;++D){var X=_slicedToArray(E[D],2),U=X[0],Z=X[1];Z=y(Z),U&&(Z=unescape(Z),D===0&&(Z=w(Z))),N.push(Z)}return N.join("")}(s))return g(x(d));if(d=m("filename","i").exec(s)){var v=y(d=d[1]);return g(v=x(v))}function m(k,S){return new RegExp("(?:^|;)\\s*"+k+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',S)}function _(k,S){if(k){if(!/^[\x00-\xFF]+$/.test(S))return S;try{var E=new TextDecoder(k,{fatal:!0}),T=(0,o.stringToBytes)(S);S=E.decode(T),u=!1}catch{}}return S}function g(k){return u&&/[\x80-\xff]/.test(k)&&(k=_("utf-8",k),u&&(k=_("iso-8859-1",k))),k}function y(k){if(k.startsWith('"')){for(var S=k.slice(1).split('\\"'),E=0;E<S.length;++E){var T=S[E].indexOf('"');T!==-1&&(S[E]=S[E].slice(0,T),S.length=E+1),S[E]=S[E].replaceAll(/\\(.)/g,"$1")}k=S.join('"')}return k}function w(k){var S=k.indexOf("'");return S===-1?k:_(k.slice(0,S),k.slice(S+1).replace(/^[^']*'/,""))}function x(k){return!k.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(k)?k:k.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(S,E,T,M){if(T==="q"||T==="Q")return _(E,M=(M=M.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(I,F){return String.fromCharCode(parseInt(F,16))}));try{M=atob(M)}catch{}return _(E,M)})}return""};var o=r(1)},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNetworkStream=void 0;var o=r(1),s=r(157),u=function(){function m(_){_classCallCheck(this,m);var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.url=_,this.isHttp=/^https?:/i.test(_),this.httpHeaders=this.isHttp&&g.httpHeaders||Object.create(null),this.withCredentials=g.withCredentials||!1,this.getXhr=g.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}return _createClass(m,[{key:"requestRange",value:function(_,g,y){var w={begin:_,end:g};for(var x in y)w[x]=y[x];return this.request(w)}},{key:"requestFull",value:function(_){return this.request(_)}},{key:"request",value:function(_){var g=this.getXhr(),y=this.currXhrId++,w=this.pendingRequests[y]={xhr:g};for(var x in g.open("GET",this.url),g.withCredentials=this.withCredentials,this.httpHeaders){var k=this.httpHeaders[x];k!==void 0&&g.setRequestHeader(x,k)}return this.isHttp&&"begin"in _&&"end"in _?(g.setRequestHeader("Range","bytes=".concat(_.begin,"-").concat(_.end-1)),w.expectedStatus=206):w.expectedStatus=200,g.responseType="arraybuffer",_.onError&&(g.onerror=function(S){_.onError(g.status)}),g.onreadystatechange=this.onStateChange.bind(this,y),g.onprogress=this.onProgress.bind(this,y),w.onHeadersReceived=_.onHeadersReceived,w.onDone=_.onDone,w.onError=_.onError,w.onProgress=_.onProgress,g.send(null),y}},{key:"onProgress",value:function(_,g){var y,w=this.pendingRequests[_];w&&((y=w.onProgress)===null||y===void 0||y.call(w,g))}},{key:"onStateChange",value:function(_,g){var y=this.pendingRequests[_];if(y){var w=y.xhr;if(w.readyState>=2&&y.onHeadersReceived&&(y.onHeadersReceived(),delete y.onHeadersReceived),w.readyState===4&&_ in this.pendingRequests)if(delete this.pendingRequests[_],w.status===0&&this.isHttp){var x;(x=y.onError)===null||x===void 0||x.call(y,w.status)}else{var k=w.status||200;if(k===200&&y.expectedStatus===206||k===y.expectedStatus){var S=function(F){var O=F.response;return typeof O!="string"?O:(0,o.stringToBytes)(O).buffer}(w);if(k===206){var E=w.getResponseHeader("Content-Range"),T=/bytes (\d+)-(\d+)\/(\d+)/.exec(E);y.onDone({begin:parseInt(T[1],10),chunk:S})}else if(S)y.onDone({begin:0,chunk:S});else{var M;(M=y.onError)===null||M===void 0||M.call(y,w.status)}}else{var I;(I=y.onError)===null||I===void 0||I.call(y,w.status)}}}}},{key:"getRequestXhr",value:function(_){return this.pendingRequests[_].xhr}},{key:"isPendingRequest",value:function(_){return _ in this.pendingRequests}},{key:"abortRequest",value:function(_){var g=this.pendingRequests[_].xhr;delete this.pendingRequests[_],g.abort()}}]),m}(),d=function(){function m(_){_classCallCheck(this,m),this._source=_,this._manager=new u(_.url,{httpHeaders:_.httpHeaders,withCredentials:_.withCredentials}),this._rangeChunkSize=_.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}return _createClass(m,[{key:"_onRangeRequestReaderClosed",value:function(_){var g=this._rangeRequestReaders.indexOf(_);g>=0&&this._rangeRequestReaders.splice(g,1)}},{key:"getFullReader",value:function(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new f(this._manager,this._source),this._fullRequestReader}},{key:"getRangeReader",value:function(_,g){var y=new v(this._manager,_,g);return y.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(y),y}},{key:"cancelAllRequests",value:function(_){var g;(g=this._fullRequestReader)===null||g===void 0||g.cancel(_);var y,w=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0));try{for(w.s();!(y=w.n()).done;)y.value.cancel(_)}catch(x){w.e(x)}finally{w.f()}}}]),m}();n.PDFNetworkStream=d;var f=function(){function m(g,y){_classCallCheck(this,m),this._manager=g;var w={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=y.url,this._fullRequestId=g.requestFull(w),this._headersReceivedCapability=(0,o.createPromiseCapability)(),this._disableRange=y.disableRange||!1,this._contentLength=y.length,this._rangeChunkSize=y.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}var _;return _createClass(m,[{key:"_onHeadersReceived",value:function(){var g=this._fullRequestId,y=this._manager.getRequestXhr(g),w=function(E){return y.getResponseHeader(E)},x=(0,s.validateRangeRequestCapabilities)({getResponseHeader:w,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),k=x.allowRangeRequests,S=x.suggestedLength;k&&(this._isRangeSupported=!0),this._contentLength=S||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(w),this._isRangeSupported&&this._manager.abortRequest(g),this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function(g){if(g&&(this._requests.length>0?this._requests.shift().resolve({value:g.chunk,done:!1}):this._cachedChunks.push(g.chunk)),this._done=!0,!(this._cachedChunks.length>0)){var y,w=_createForOfIteratorHelper(this._requests);try{for(w.s();!(y=w.n()).done;)y.value.resolve({value:void 0,done:!0})}catch(x){w.e(x)}finally{w.f()}this._requests.length=0}}},{key:"_onError",value:function(g){this._storedError=(0,s.createResponseStatusError)(g,this._url),this._headersReceivedCapability.reject(this._storedError);var y,w=_createForOfIteratorHelper(this._requests);try{for(w.s();!(y=w.n()).done;)y.value.reject(this._storedError)}catch(x){w.e(x)}finally{w.f()}this._requests.length=0,this._cachedChunks.length=0}},{key:"_onProgress",value:function(g){var y;(y=this.onProgress)===null||y===void 0||y.call(this,{loaded:g.loaded,total:g.lengthComputable?g.total:this._contentLength})}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"contentLength",get:function(){return this._contentLength}},{key:"headersReady",get:function(){return this._headersReceivedCapability.promise}},{key:"read",value:(_=_asyncToGenerator(_regeneratorRuntime().mark(function g(){var y,w;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!this._storedError){x.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){x.next=5;break}return y=this._cachedChunks.shift(),x.abrupt("return",{value:y,done:!1});case 5:if(!this._done){x.next=7;break}return x.abrupt("return",{value:void 0,done:!0});case 7:return w=(0,o.createPromiseCapability)(),this._requests.push(w),x.abrupt("return",w.promise);case 10:case"end":return x.stop()}},g,this)})),function(){return _.apply(this,arguments)})},{key:"cancel",value:function(g){this._done=!0,this._headersReceivedCapability.reject(g);var y,w=_createForOfIteratorHelper(this._requests);try{for(w.s();!(y=w.n()).done;)y.value.resolve({value:void 0,done:!0})}catch(x){w.e(x)}finally{w.f()}this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}]),m}(),v=function(){function m(g,y,w){_classCallCheck(this,m),this._manager=g;var x={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=g.url,this._requestId=g.requestRange(y,w,x),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}var _;return _createClass(m,[{key:"_close",value:function(){var g;(g=this.onClosed)===null||g===void 0||g.call(this,this)}},{key:"_onDone",value:function(g){var y=g.chunk;this._requests.length>0?this._requests.shift().resolve({value:y,done:!1}):this._queuedChunk=y,this._done=!0;var w,x=_createForOfIteratorHelper(this._requests);try{for(x.s();!(w=x.n()).done;)w.value.resolve({value:void 0,done:!0})}catch(k){x.e(k)}finally{x.f()}this._requests.length=0,this._close()}},{key:"_onError",value:function(g){this._storedError=(0,s.createResponseStatusError)(g,this._url);var y,w=_createForOfIteratorHelper(this._requests);try{for(w.s();!(y=w.n()).done;)y.value.reject(this._storedError)}catch(x){w.e(x)}finally{w.f()}this._requests.length=0,this._queuedChunk=null}},{key:"_onProgress",value:function(g){var y;this.isStreamingSupported||(y=this.onProgress)===null||y===void 0||y.call(this,{loaded:g.loaded})}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:(_=_asyncToGenerator(_regeneratorRuntime().mark(function g(){var y,w;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!this._storedError){x.next=2;break}throw this._storedError;case 2:if(this._queuedChunk===null){x.next=6;break}return y=this._queuedChunk,this._queuedChunk=null,x.abrupt("return",{value:y,done:!1});case 6:if(!this._done){x.next=8;break}return x.abrupt("return",{value:void 0,done:!0});case 8:return w=(0,o.createPromiseCapability)(),this._requests.push(w),x.abrupt("return",w.promise);case 11:case"end":return x.stop()}},g,this)})),function(){return _.apply(this,arguments)})},{key:"cancel",value:function(g){this._done=!0;var y,w=_createForOfIteratorHelper(this._requests);try{for(w.s();!(y=w.n()).done;)y.value.resolve({value:void 0,done:!0})}catch(x){w.e(x)}finally{w.f()}this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}]),m}()},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.PDFFetchStream=void 0;var o=r(1),s=r(157);function u(g,y,w){return{method:"GET",headers:g,signal:w.signal,mode:"cors",credentials:y?"include":"same-origin",redirect:"follow"}}function d(g){var y=new Headers;for(var w in g){var x=g[w];x!==void 0&&y.append(w,x)}return y}function f(g){return g instanceof Uint8Array?g.buffer:g instanceof ArrayBuffer?g:((0,o.warn)("getArrayBuffer - unexpected data format: ".concat(g)),new Uint8Array(g).buffer)}var v=function(){function g(y){_classCallCheck(this,g),this.source=y,this.isHttp=/^https?:/i.test(y.url),this.httpHeaders=this.isHttp&&y.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return _createClass(g,[{key:"_progressiveDataLength",get:function(){var y,w;return(y=(w=this._fullRequestReader)===null||w===void 0?void 0:w._loaded)!==null&&y!==void 0?y:0}},{key:"getFullReader",value:function(){return(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new m(this),this._fullRequestReader}},{key:"getRangeReader",value:function(y,w){if(w<=this._progressiveDataLength)return null;var x=new _(this,y,w);return this._rangeRequestReaders.push(x),x}},{key:"cancelAllRequests",value:function(y){var w;(w=this._fullRequestReader)===null||w===void 0||w.cancel(y);var x,k=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0));try{for(k.s();!(x=k.n()).done;)x.value.cancel(y)}catch(S){k.e(S)}finally{k.f()}}}]),g}();n.PDFFetchStream=v;var m=function(){function g(w){var x=this;_classCallCheck(this,g),this._stream=w,this._reader=null,this._loaded=0,this._filename=null;var k=w.source;this._withCredentials=k.withCredentials||!1,this._contentLength=k.length,this._headersCapability=(0,o.createPromiseCapability)(),this._disableRange=k.disableRange||!1,this._rangeChunkSize=k.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!k.disableStream,this._isRangeSupported=!k.disableRange,this._headers=d(this._stream.httpHeaders);var S=k.url;fetch(S,u(this._headers,this._withCredentials,this._abortController)).then(function(E){if(!(0,s.validateResponseStatus)(E.status))throw(0,s.createResponseStatusError)(E.status,S);x._reader=E.body.getReader(),x._headersCapability.resolve();var T=function(O){return E.headers.get(O)},M=(0,s.validateRangeRequestCapabilities)({getResponseHeader:T,isHttp:x._stream.isHttp,rangeChunkSize:x._rangeChunkSize,disableRange:x._disableRange}),I=M.allowRangeRequests,F=M.suggestedLength;x._isRangeSupported=I,x._contentLength=F||x._contentLength,x._filename=(0,s.extractFilenameFromHeader)(T),!x._isStreamingSupported&&x._isRangeSupported&&x.cancel(new o.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}var y;return _createClass(g,[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(y=_asyncToGenerator(_regeneratorRuntime().mark(function w(){var x,k,S,E;return _regeneratorRuntime().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,this._headersCapability.promise;case 2:return T.next=4,this._reader.read();case 4:if(k=T.sent,S=k.value,!(E=k.done)){T.next=9;break}return T.abrupt("return",{value:S,done:E});case 9:return this._loaded+=S.byteLength,(x=this.onProgress)===null||x===void 0||x.call(this,{loaded:this._loaded,total:this._contentLength}),T.abrupt("return",{value:f(S),done:!1});case 12:case"end":return T.stop()}},w,this)})),function(){return y.apply(this,arguments)})},{key:"cancel",value:function(w){var x;(x=this._reader)===null||x===void 0||x.cancel(w),this._abortController.abort()}}]),g}(),_=function(){function g(w,x,k){var S=this;_classCallCheck(this,g),this._stream=w,this._reader=null,this._loaded=0;var E=w.source;this._withCredentials=E.withCredentials||!1,this._readCapability=(0,o.createPromiseCapability)(),this._isStreamingSupported=!E.disableStream,this._abortController=new AbortController,this._headers=d(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(x,"-").concat(k-1));var T=E.url;fetch(T,u(this._headers,this._withCredentials,this._abortController)).then(function(M){if(!(0,s.validateResponseStatus)(M.status))throw(0,s.createResponseStatusError)(M.status,T);S._readCapability.resolve(),S._reader=M.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}var y;return _createClass(g,[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(y=_asyncToGenerator(_regeneratorRuntime().mark(function w(){var x,k,S,E;return _regeneratorRuntime().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,this._readCapability.promise;case 2:return T.next=4,this._reader.read();case 4:if(k=T.sent,S=k.value,!(E=k.done)){T.next=9;break}return T.abrupt("return",{value:S,done:E});case 9:return this._loaded+=S.byteLength,(x=this.onProgress)===null||x===void 0||x.call(this,{loaded:this._loaded}),T.abrupt("return",{value:f(S),done:!1});case 12:case"end":return T.stop()}},w,this)})),function(){return y.apply(this,arguments)})},{key:"cancel",value:function(w){var x;(x=this._reader)===null||x===void 0||x.cancel(w),this._abortController.abort()}}]),g}()},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.TextLayerRenderTask=void 0,n.renderTextLayer=function(y){y.textContentSource||!y.textContent&&!y.textContentStream||((0,s.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),y.textContentSource=y.textContent||y.textContentStream);var w=y.container,x=y.viewport,k=getComputedStyle(w),S=k.getPropertyValue("visibility"),E=parseFloat(k.getPropertyValue("--scale-factor"));S==="visible"&&(!E||Math.abs(E-x.scale)>1e-15)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");var T=new g(y);return T._render(),T},n.updateTextLayer=function(y){var w=y.container,x=y.viewport,k=y.textDivs,S=y.textDivProperties,E=y.isOffscreenCanvasSupported,T=y.mustRotate,M=T===void 0||T,I=y.mustRescale,F=I===void 0||I;if(M&&(0,s.setLayerDimensions)(w,{rotation:x.rotation}),F){var O,N=v(0,E),D={prevFontSize:null,prevFontFamily:null,div:null,scale:x.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:N},X=_createForOfIteratorHelper(k);try{for(X.s();!(O=X.n()).done;){var U=O.value;D.properties=S.get(U),D.div=U,_(D)}}catch(Z){X.e(Z)}finally{X.f()}}};var o=r(1),s=r(142),u=30,d=.8,f=new Map;function v(y,w){var x;if(w&&o.FeatureTest.isOffscreenCanvasSupported)x=new OffscreenCanvas(y,y).getContext("2d",{alpha:!1});else{var k=document.createElement("canvas");k.width=k.height=y,x=k.getContext("2d",{alpha:!1})}return x}function m(y,w,x){var k=document.createElement("span"),S={angle:0,canvasWidth:0,hasText:w.str!=="",hasEOL:w.hasEOL,fontSize:0};y._textDivs.push(k);var E=o.Util.transform(y._transform,w.transform),T=Math.atan2(E[1],E[0]),M=x[w.fontName];M.vertical&&(T+=Math.PI/2);var I,F,O=Math.hypot(E[2],E[3]),N=O*function(Q,ve){var Se=f.get(Q);if(Se)return Se;var we=v(u,ve);we.font="".concat(u,"px ").concat(Q);var oe=we.measureText(""),ne=oe.fontBoundingBoxAscent,q=Math.abs(oe.fontBoundingBoxDescent);if(ne){var H=ne/(ne+q);return f.set(Q,H),we.canvas.width=we.canvas.height=0,H}we.strokeStyle="red",we.clearRect(0,0,u,u),we.strokeText("g",0,0);var Y=we.getImageData(0,0,u,u).data;q=0;for(var le=Y.length-1-3;le>=0;le-=4)if(Y[le]>0){q=Math.ceil(le/4/u);break}we.clearRect(0,0,u,u),we.strokeText("A",0,u),ne=0;for(var Ce=0,Te=(Y=we.getImageData(0,0,u,u).data).length;Ce<Te;Ce+=4)if(Y[Ce]>0){ne=u-Math.floor(Ce/4/u);break}if(we.canvas.width=we.canvas.height=0,ne){var ke=ne/(ne+q);return f.set(Q,ke),ke}return f.set(Q,d),d}(M.fontFamily,y._isOffscreenCanvasSupported);T===0?(I=E[4],F=E[5]-N):(I=E[4]+N*Math.sin(T),F=E[5]-N*Math.cos(T));var D="calc(var(--scale-factor)*",X=k.style;y._container===y._rootContainer?(X.left="".concat((100*I/y._pageWidth).toFixed(2),"%"),X.top="".concat((100*F/y._pageHeight).toFixed(2),"%")):(X.left="".concat(D).concat(I.toFixed(2),"px)"),X.top="".concat(D).concat(F.toFixed(2),"px)")),X.fontSize="".concat(D).concat(O.toFixed(2),"px)"),X.fontFamily=M.fontFamily,S.fontSize=O,k.setAttribute("role","presentation"),k.textContent=w.str,k.dir=w.dir,y._fontInspectorEnabled&&(k.dataset.fontName=w.fontName),T!==0&&(S.angle=T*(180/Math.PI));var U=!1;if(w.str.length>1)U=!0;else if(w.str!==" "&&w.transform[0]!==w.transform[3]){var Z=Math.abs(w.transform[0]),j=Math.abs(w.transform[3]);Z!==j&&Math.max(Z,j)/Math.min(Z,j)>1.5&&(U=!0)}U&&(S.canvasWidth=M.vertical?w.height:w.width),y._textDivProperties.set(k,S),y._isReadableStream&&y._layoutText(k)}function _(y){var w=y.div,x=y.scale,k=y.properties,S=y.ctx,E=y.prevFontSize,T=y.prevFontFamily,M=w.style,I="";if(k.canvasWidth!==0&&k.hasText){var F=M.fontFamily,O=k.canvasWidth,N=k.fontSize;E===N&&T===F||(S.font="".concat(N*x,"px ").concat(F),y.prevFontSize=N,y.prevFontFamily=F);var D=S.measureText(w.textContent).width;D>0&&(I="scaleX(".concat(O*x/D,")"))}k.angle!==0&&(I="rotate(".concat(k.angle,"deg) ").concat(I)),I.length>0&&(M.transform=I)}var g=function(){function y(w){var x,k=this;_classCallCheck(this,y);var S=w.textContentSource,E=w.container,T=w.viewport,M=w.textDivs,I=w.textDivProperties,F=w.textContentItemsStr,O=w.isOffscreenCanvasSupported;this._textContentSource=S,this._isReadableStream=S instanceof ReadableStream,this._container=this._rootContainer=E,this._textDivs=M||[],this._textContentItemsStr=F||[],this._isOffscreenCanvasSupported=O,this._fontInspectorEnabled=!((x=globalThis.FontInspector)===null||x===void 0||!x.enabled),this._reader=null,this._textDivProperties=I||new WeakMap,this._canceled=!1,this._capability=(0,o.createPromiseCapability)(),this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:T.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:v(0,O)};var N=T.rawDims,D=N.pageWidth,X=N.pageHeight,U=N.pageX,Z=N.pageY;this._transform=[1,0,0,-1,-U,Z+X],this._pageWidth=D,this._pageHeight=X,(0,s.setLayerDimensions)(E,T),this._capability.promise.finally(function(){k._layoutTextParams=null}).catch(function(){})}return _createClass(y,[{key:"promise",get:function(){return this._capability.promise}},{key:"cancel",value:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")).catch(function(){}),this._reader=null),this._capability.reject(new o.AbortException("TextLayer task cancelled."))}},{key:"_processItems",value:function(w,x){var k,S=_createForOfIteratorHelper(w);try{for(S.s();!(k=S.n()).done;){var E=k.value;if(E.str!==void 0)this._textContentItemsStr.push(E.str),m(this,E,x);else if(E.type==="beginMarkedContentProps"||E.type==="beginMarkedContent"){var T=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),E.id!==null&&this._container.setAttribute("id","".concat(E.id)),T.append(this._container)}else E.type==="endMarkedContent"&&(this._container=this._container.parentNode)}}catch(M){S.e(M)}finally{S.f()}}},{key:"_layoutText",value:function(w){var x=this._layoutTextParams.properties=this._textDivProperties.get(w);if(this._layoutTextParams.div=w,_(this._layoutTextParams),x.hasText&&this._container.append(w),x.hasEOL){var k=document.createElement("br");k.setAttribute("role","presentation"),this._container.append(k)}}},{key:"_render",value:function(){var w=this,x=(0,o.createPromiseCapability)(),k=Object.create(null);if(this._isReadableStream)this._reader=this._textContentSource.getReader(),function M(){w._reader.read().then(function(I){var F=I.value;I.done?x.resolve():(Object.assign(k,F.styles),w._processItems(F.items,k),M())},x.reject)}();else{if(!this._textContentSource)throw new Error('No "textContentSource" parameter specified.');var S=this._textContentSource,E=S.items,T=S.styles;this._processItems(E,T),x.resolve()}x.promise.then(function(){k=null,function(M){if(!M._canceled){var I=M._textDivs,F=M._capability;if(I.length>1e5)F.resolve();else{if(!M._isReadableStream){var O,N=_createForOfIteratorHelper(I);try{for(N.s();!(O=N.n()).done;){var D=O.value;M._layoutText(D)}}catch(X){N.e(X)}finally{N.f()}}F.resolve()}}}(w)},this._capability.reject)}}]),y}();n.TextLayerRenderTask=g},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationEditorLayer=void 0;var o=r(1),s=r(141),u=r(163),d=r(164),f=r(142);function v(q,H){_(q,H),H.add(q)}function m(q,H,Y){_(q,H),H.set(q,Y)}function _(q,H){if(H.has(q))throw new TypeError("Cannot initialize the same private elements twice on an object")}function g(q,H,Y){if(!H.has(q))throw new TypeError("attempted to get private field on non-instance");return Y}function y(q,H){return function(Y,le){return le.get?le.get.call(Y):le.value}(q,x(q,H,"get"))}function w(q,H,Y){return function(le,Ce,Te){if(Ce.set)Ce.set.call(le,Te);else{if(!Ce.writable)throw new TypeError("attempted to set read only private field");Ce.value=Te}}(q,x(q,H,"set"),Y),Y}function x(q,H,Y){if(!H.has(q))throw new TypeError("attempted to "+Y+" private field on non-instance");return H.get(q)}var k,S,E,T=new WeakMap,M=new WeakMap,I=new WeakMap,F=new WeakMap,O=new WeakMap,N=new WeakMap,D=new WeakMap,X=new WeakMap,U=new WeakSet,Z=new WeakSet,j=new WeakSet,Q=new WeakSet,ve=function(){function q(H){_classCallCheck(this,q),v(this,Q),v(this,j),v(this,Z),v(this,U),m(this,T,{writable:!0,value:void 0}),m(this,M,{writable:!0,value:!1}),m(this,I,{writable:!0,value:this.pointerup.bind(this)}),m(this,F,{writable:!0,value:this.pointerdown.bind(this)}),m(this,O,{writable:!0,value:new Map}),m(this,N,{writable:!0,value:!1}),m(this,D,{writable:!0,value:!1}),m(this,X,{writable:!0,value:void 0}),q._initialized||(q._initialized=!0,u.FreeTextEditor.initialize(H.l10n),d.InkEditor.initialize(H.l10n)),H.uiManager.registerEditorTypes([u.FreeTextEditor,d.InkEditor]),w(this,X,H.uiManager),this.pageIndex=H.pageIndex,this.div=H.div,w(this,T,H.accessibilityManager),y(this,X).addLayer(this)}return _createClass(q,[{key:"isEmpty",get:function(){return y(this,O).size===0}},{key:"updateToolbar",value:function(H){y(this,X).updateToolbar(H)}},{key:"updateMode",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y(this,X).getMode();g(this,Q,ne).call(this),H===o.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),y(this,X).unselectAll(),H!==o.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",H===o.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",H===o.AnnotationEditorType.INK),this.div.hidden=!1)}},{key:"addInkEditorIfNeeded",value:function(H){if(H||y(this,X).getMode()===o.AnnotationEditorType.INK){if(!H){var Y,le=_createForOfIteratorHelper(y(this,O).values());try{for(le.s();!(Y=le.n()).done;){var Ce=Y.value;if(Ce.isEmpty())return void Ce.setInBackground()}}catch(Te){le.e(Te)}finally{le.f()}}g(this,j,oe).call(this,{offsetX:0,offsetY:0}).setInBackground()}}},{key:"setEditingState",value:function(H){y(this,X).setEditingState(H)}},{key:"addCommands",value:function(H){y(this,X).addCommands(H)}},{key:"enable",value:function(){this.div.style.pointerEvents="auto";var H,Y=_createForOfIteratorHelper(y(this,O).values());try{for(Y.s();!(H=Y.n()).done;)H.value.enableEditing()}catch(le){Y.e(le)}finally{Y.f()}}},{key:"disable",value:function(){this.div.style.pointerEvents="none";var H,Y=_createForOfIteratorHelper(y(this,O).values());try{for(Y.s();!(H=Y.n()).done;)H.value.disableEditing()}catch(le){Y.e(le)}finally{Y.f()}g(this,Q,ne).call(this),this.isEmpty&&(this.div.hidden=!0)}},{key:"setActiveEditor",value:function(H){y(this,X).getActive()!==H&&y(this,X).setActiveEditor(H)}},{key:"enableClick",value:function(){this.div.addEventListener("pointerdown",y(this,F)),this.div.addEventListener("pointerup",y(this,I))}},{key:"disableClick",value:function(){this.div.removeEventListener("pointerdown",y(this,F)),this.div.removeEventListener("pointerup",y(this,I))}},{key:"attach",value:function(H){y(this,O).set(H.id,H)}},{key:"detach",value:function(H){var Y;y(this,O).delete(H.id),(Y=y(this,T))===null||Y===void 0||Y.removePointerInTextLayer(H.contentDiv)}},{key:"remove",value:function(H){var Y=this;y(this,X).removeEditor(H),this.detach(H),H.div.style.display="none",setTimeout(function(){H.div.style.display="",H.div.remove(),H.isAttachedToDOM=!1,document.activeElement===document.body&&y(Y,X).focusMainContainer()},0),y(this,D)||this.addInkEditorIfNeeded(!1)}},{key:"add",value:function(H){if(g(this,U,Se).call(this,H),y(this,X).addEditor(H),this.attach(H),!H.isAttachedToDOM){var Y=H.render();this.div.append(Y),H.isAttachedToDOM=!0}this.moveEditorInDOM(H),H.onceAdded(),y(this,X).addToAnnotationStorage(H)}},{key:"moveEditorInDOM",value:function(H){var Y;(Y=y(this,T))===null||Y===void 0||Y.moveElementInDOM(this.div,H.div,H.contentDiv,!0)}},{key:"addOrRebuild",value:function(H){H.needsToBeRebuilt()?H.rebuild():this.add(H)}},{key:"addANewEditor",value:function(H){var Y=this;this.addCommands({cmd:function(){Y.addOrRebuild(H)},undo:function(){H.remove()},mustExec:!0})}},{key:"addUndoableEditor",value:function(H){var Y=this;this.addCommands({cmd:function(){Y.addOrRebuild(H)},undo:function(){H.remove()},mustExec:!1})}},{key:"getNextId",value:function(){return y(this,X).getId()}},{key:"deserialize",value:function(H){switch(H.annotationType){case o.AnnotationEditorType.FREETEXT:return u.FreeTextEditor.deserialize(H,this,y(this,X));case o.AnnotationEditorType.INK:return d.InkEditor.deserialize(H,this,y(this,X))}return null}},{key:"setSelected",value:function(H){y(this,X).setSelected(H)}},{key:"toggleSelected",value:function(H){y(this,X).toggleSelected(H)}},{key:"isSelected",value:function(H){return y(this,X).isSelected(H)}},{key:"unselect",value:function(H){y(this,X).unselect(H)}},{key:"pointerup",value:function(H){var Y=o.FeatureTest.platform.isMac;H.button!==0||H.ctrlKey&&Y||H.target===this.div&&y(this,N)&&(w(this,N,!1),y(this,M)?g(this,j,oe).call(this,H):w(this,M,!0))}},{key:"pointerdown",value:function(H){var Y=o.FeatureTest.platform.isMac;if(!(H.button!==0||H.ctrlKey&&Y)&&H.target===this.div){w(this,N,!0);var le=y(this,X).getActive();w(this,M,!le||le.isEmpty())}}},{key:"drop",value:function(H){var Y=H.dataTransfer.getData("text/plain"),le=y(this,X).getEditor(Y);if(le){H.preventDefault(),H.dataTransfer.dropEffect="move",g(this,U,Se).call(this,le);var Ce=this.div.getBoundingClientRect(),Te=H.clientX-Ce.x,ke=H.clientY-Ce.y;le.translate(Te-le.startX,ke-le.startY),this.moveEditorInDOM(le),le.div.focus()}}},{key:"dragover",value:function(H){H.preventDefault()}},{key:"destroy",value:function(){var H;((H=y(this,X).getActive())===null||H===void 0?void 0:H.parent)===this&&y(this,X).setActiveEditor(null);var Y,le=_createForOfIteratorHelper(y(this,O).values());try{for(le.s();!(Y=le.n()).done;){var Ce,Te=Y.value;(Ce=y(this,T))===null||Ce===void 0||Ce.removePointerInTextLayer(Te.contentDiv),Te.setParent(null),Te.isAttachedToDOM=!1,Te.div.remove()}}catch(ke){le.e(ke)}finally{le.f()}this.div=null,y(this,O).clear(),y(this,X).removeLayer(this)}},{key:"render",value:function(H){var Y=H.viewport;this.viewport=Y,(0,f.setLayerDimensions)(this.div,Y),(0,s.bindEvents)(this,this.div,["dragover","drop"]);var le,Ce=_createForOfIteratorHelper(y(this,X).getEditors(this.pageIndex));try{for(Ce.s();!(le=Ce.n()).done;){var Te=le.value;this.add(Te)}}catch(ke){Ce.e(ke)}finally{Ce.f()}this.updateMode()}},{key:"update",value:function(H){var Y=H.viewport;y(this,X).commitOrRemove(),this.viewport=Y,(0,f.setLayerDimensions)(this.div,{rotation:Y.rotation}),this.updateMode()}},{key:"pageDimensions",get:function(){var H=this.viewport.rawDims;return[H.pageWidth,H.pageHeight]}}]),q}();function Se(q){var H;q.parent!==this&&(this.attach(q),(H=q.parent)===null||H===void 0||H.detach(q),q.setParent(this),q.div&&q.isAttachedToDOM&&(q.div.remove(),this.div.append(q.div)))}function we(q){switch(y(this,X).getMode()){case o.AnnotationEditorType.FREETEXT:return new u.FreeTextEditor(q);case o.AnnotationEditorType.INK:return new d.InkEditor(q)}return null}function oe(q){var H=this.getNextId(),Y=g(this,Z,we).call(this,{parent:this,id:H,x:q.offsetX,y:q.offsetY,uiManager:y(this,X)});return Y&&this.add(Y),Y}function ne(){w(this,D,!0);var q,H=_createForOfIteratorHelper(y(this,O).values());try{for(H.s();!(q=H.n()).done;){var Y=q.value;Y.isEmpty()&&Y.remove()}}catch(le){H.e(le)}finally{H.f()}w(this,D,!1)}n.AnnotationEditorLayer=ve,k=ve,E=!1,(S=function(q){var H=function(Y,le){if(_typeof$1(Y)!=="object"||Y===null)return Y;var Ce=Y[Symbol.toPrimitive];if(Ce!==void 0){var Te=Ce.call(Y,le||"default");if(_typeof$1(Te)!=="object")return Te;throw new TypeError("@@toPrimitive must return a primitive value.")}return(le==="string"?String:Number)(Y)}(q,"string");return _typeof$1(H)==="symbol"?H:String(H)}(S="_initialized"))in k?Object.defineProperty(k,S,{value:E,enumerable:!0,configurable:!0,writable:!0}):k[S]=E},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.FreeTextEditor=void 0;var o=r(1),s=r(141),u=r(140);function d(we,oe){m(we,oe),oe.add(we)}function f(we,oe,ne){return(oe=function(q){var H=function(Y,le){if(_typeof$1(Y)!=="object"||Y===null)return Y;var Ce=Y[Symbol.toPrimitive];if(Ce!==void 0){var Te=Ce.call(Y,le||"default");if(_typeof$1(Te)!=="object")return Te;throw new TypeError("@@toPrimitive must return a primitive value.")}return(le==="string"?String:Number)(Y)}(q,"string");return _typeof$1(H)==="symbol"?H:String(H)}(oe))in we?Object.defineProperty(we,oe,{value:ne,enumerable:!0,configurable:!0,writable:!0}):we[oe]=ne,we}function v(we,oe,ne){m(we,oe),oe.set(we,ne)}function m(we,oe){if(oe.has(we))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _(we,oe){return function(ne,q){return q.get?q.get.call(ne):q.value}(we,w(we,oe,"get"))}function g(we,oe,ne){if(!oe.has(we))throw new TypeError("attempted to get private field on non-instance");return ne}function y(we,oe,ne){return function(q,H,Y){if(H.set)H.set.call(q,Y);else{if(!H.writable)throw new TypeError("attempted to set read only private field");H.value=Y}}(we,w(we,oe,"set"),ne),ne}function w(we,oe,ne){if(!oe.has(we))throw new TypeError("attempted to "+ne+" private field on non-instance");return oe.get(we)}var x=new WeakMap,k=new WeakMap,S=new WeakMap,E=new WeakMap,T=new WeakMap,M=new WeakMap,I=new WeakMap,F=new WeakMap,O=new WeakMap,N=new WeakSet,D=new WeakSet,X=new WeakSet,U=new WeakSet,Z=function(we){_inherits(ne,we);var oe=_createSuper(ne);function ne(q){var H;return _classCallCheck(this,ne),d(_assertThisInitialized(H=oe.call(this,_objectSpread2$1(_objectSpread2$1({},q),{},{name:"freeTextEditor"}))),U),d(_assertThisInitialized(H),X),d(_assertThisInitialized(H),D),d(_assertThisInitialized(H),N),v(_assertThisInitialized(H),x,{writable:!0,value:H.editorDivBlur.bind(_assertThisInitialized(H))}),v(_assertThisInitialized(H),k,{writable:!0,value:H.editorDivFocus.bind(_assertThisInitialized(H))}),v(_assertThisInitialized(H),S,{writable:!0,value:H.editorDivInput.bind(_assertThisInitialized(H))}),v(_assertThisInitialized(H),E,{writable:!0,value:H.editorDivKeydown.bind(_assertThisInitialized(H))}),v(_assertThisInitialized(H),T,{writable:!0,value:void 0}),v(_assertThisInitialized(H),M,{writable:!0,value:""}),v(_assertThisInitialized(H),I,{writable:!0,value:"".concat(H.id,"-editor")}),v(_assertThisInitialized(H),F,{writable:!0,value:!1}),v(_assertThisInitialized(H),O,{writable:!0,value:void 0}),y(_assertThisInitialized(H),T,q.color||ne._defaultColor||u.AnnotationEditor._defaultLineColor),y(_assertThisInitialized(H),O,q.fontSize||ne._defaultFontSize),H}return _createClass(ne,[{key:"updateParams",value:function(q,H){switch(q){case o.AnnotationEditorParamsType.FREETEXT_SIZE:g(this,N,j).call(this,H);break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:g(this,D,Q).call(this,H)}}},{key:"propertiesToUpdate",get:function(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,_(this,O)],[o.AnnotationEditorParamsType.FREETEXT_COLOR,_(this,T)]]}},{key:"getInitialTranslation",value:function(){var q=this.parentScale;return[-ne._internalPadding*q,-(ne._internalPadding+_(this,O))*q]}},{key:"rebuild",value:function(){_get(_getPrototypeOf(ne.prototype),"rebuild",this).call(this),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}},{key:"enableEditMode",value:function(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(o.AnnotationEditorType.FREETEXT),_get(_getPrototypeOf(ne.prototype),"enableEditMode",this).call(this),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",_(this,E)),this.editorDiv.addEventListener("focus",_(this,k)),this.editorDiv.addEventListener("blur",_(this,x)),this.editorDiv.addEventListener("input",_(this,S)))}},{key:"disableEditMode",value:function(){this.isInEditMode()&&(this.parent.setEditingState(!0),_get(_getPrototypeOf(ne.prototype),"disableEditMode",this).call(this),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",_(this,I)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",_(this,E)),this.editorDiv.removeEventListener("focus",_(this,k)),this.editorDiv.removeEventListener("blur",_(this,x)),this.editorDiv.removeEventListener("input",_(this,S)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}},{key:"focusin",value:function(q){_get(_getPrototypeOf(ne.prototype),"focusin",this).call(this,q),q.target!==this.editorDiv&&this.editorDiv.focus()}},{key:"onceAdded",value:function(){this.width||(this.enableEditMode(),this.editorDiv.focus())}},{key:"isEmpty",value:function(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}},{key:"remove",value:function(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),_get(_getPrototypeOf(ne.prototype),"remove",this).call(this)}},{key:"commit",value:function(){this.isInEditMode()&&(_get(_getPrototypeOf(ne.prototype),"commit",this).call(this),_(this,F)||(y(this,F,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),y(this,M,g(this,X,ve).call(this).trimEnd()),g(this,U,Se).call(this))}},{key:"shouldGetKeyboardEvents",value:function(){return this.isInEditMode()}},{key:"dblclick",value:function(q){this.enableEditMode(),this.editorDiv.focus()}},{key:"keydown",value:function(q){q.target===this.div&&q.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}},{key:"editorDivKeydown",value:function(q){ne._keyboardManager.exec(this,q)}},{key:"editorDivFocus",value:function(q){this.isEditing=!0}},{key:"editorDivBlur",value:function(q){this.isEditing=!1}},{key:"editorDivInput",value:function(q){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}},{key:"disableEditing",value:function(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}},{key:"enableEditing",value:function(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}},{key:"render",value:function(){var q,H,Y=this;if(this.div)return this.div;this.width&&(q=this.x,H=this.y),_get(_getPrototypeOf(ne.prototype),"render",this).call(this),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",_(this,I)),this.enableEditing(),ne._l10nPromise.get("editor_free_text2_aria_label").then(function(Oe){var Ne;return(Ne=Y.editorDiv)===null||Ne===void 0?void 0:Ne.setAttribute("aria-label",Oe)}),ne._l10nPromise.get("free_text2_default_content").then(function(Oe){var Ne;return(Ne=Y.editorDiv)===null||Ne===void 0?void 0:Ne.setAttribute("default-content",Oe)}),this.editorDiv.contentEditable=!0;var le=this.editorDiv.style;if(le.fontSize="calc(".concat(_(this,O),"px * var(--scale-factor))"),le.color=_(this,T),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,s.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){var Ce=_slicedToArray(this.parentDimensions,2),Te=Ce[0],ke=Ce[1];this.setAt(q*Te,H*ke,this.width*Te,this.height*ke);var Ee,Pe=_createForOfIteratorHelper(_(this,M).split(`
`));try{for(Pe.s();!(Ee=Pe.n()).done;){var Be=Ee.value,$e=document.createElement("div");$e.append(Be?document.createTextNode(Be):document.createElement("br")),this.editorDiv.append($e)}}catch(Oe){Pe.e(Oe)}finally{Pe.f()}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}},{key:"contentDiv",get:function(){return this.editorDiv}},{key:"serialize",value:function(){if(this.isEmpty())return null;var q=ne._internalPadding*this.parentScale,H=this.getRect(q,q),Y=u.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:_(this,T));return{annotationType:o.AnnotationEditorType.FREETEXT,color:Y,fontSize:_(this,O),value:_(this,M),pageIndex:this.pageIndex,rect:H,rotation:this.rotation}}}],[{key:"initialize",value:function(q){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(function(Y){return[Y,q.get(Y)]}));var H=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(H.getPropertyValue("--freetext-padding"))}},{key:"updateDefaultParams",value:function(q,H){switch(q){case o.AnnotationEditorParamsType.FREETEXT_SIZE:ne._defaultFontSize=H;break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:ne._defaultColor=H}}},{key:"defaultPropertiesToUpdate",get:function(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,ne._defaultFontSize],[o.AnnotationEditorParamsType.FREETEXT_COLOR,ne._defaultColor||u.AnnotationEditor._defaultLineColor]]}},{key:"deserialize",value:function(q,H,Y){var le,Ce=_get(_getPrototypeOf(ne),"deserialize",this).call(this,q,H,Y);return y(Ce,O,q.fontSize),y(Ce,T,(le=o.Util).makeHexColor.apply(le,_toConsumableArray$1(q.color))),y(Ce,M,q.value),Ce}}]),ne}(u.AnnotationEditor);function j(we){var oe=this,ne=function(H){oe.editorDiv.style.fontSize="calc(".concat(H,"px * var(--scale-factor))"),oe.translate(0,-(H-_(oe,O))*oe.parentScale),y(oe,O,H),g(oe,U,Se).call(oe)},q=_(this,O);this.addCommands({cmd:function(){ne(we)},undo:function(){ne(q)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function Q(we){var oe=this,ne=_(this,T);this.addCommands({cmd:function(){y(oe,T,oe.editorDiv.style.color=we)},undo:function(){y(oe,T,oe.editorDiv.style.color=ne)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function ve(){var we=this.editorDiv.getElementsByTagName("div");if(we.length===0)return this.editorDiv.innerText;var oe,ne=[],q=_createForOfIteratorHelper(we);try{for(q.s();!(oe=q.n()).done;){var H=oe.value;ne.push(H.innerText.replace(/\r\n?|\n/,""))}}catch(Y){q.e(Y)}finally{q.f()}return ne.join(`
`)}function Se(){var we,oe=_slicedToArray(this.parentDimensions,2),ne=oe[0],q=oe[1];if(this.isAttachedToDOM)we=this.div.getBoundingClientRect();else{var H=this.currentLayer,Y=this.div,le=Y.style.display;Y.style.display="hidden",H.div.append(this.div),we=Y.getBoundingClientRect(),Y.remove(),Y.style.display=le}this.width=we.width/ne,this.height=we.height/q}n.FreeTextEditor=Z,f(Z,"_freeTextDefaultContent",""),f(Z,"_l10nPromise",void 0),f(Z,"_internalPadding",0),f(Z,"_defaultColor",null),f(Z,"_defaultFontSize",10),f(Z,"_keyboardManager",new s.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Z.prototype.commitOrRemove]])),f(Z,"_type","freetext")},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.InkEditor=void 0,Object.defineProperty(n,"fitCurve",{enumerable:!0,get:function(){return u.fitCurve}});var o=r(1),s=r(140),u=r(165),d=r(141);function f(Qe,tt){_(Qe,tt),tt.add(Qe)}function v(Qe,tt,nt){return(tt=function(it){var lt=function(Et,St){if(_typeof$1(Et)!=="object"||Et===null)return Et;var Mt=Et[Symbol.toPrimitive];if(Mt!==void 0){var Lt=Mt.call(Et,St||"default");if(_typeof$1(Lt)!=="object")return Lt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(St==="string"?String:Number)(Et)}(it,"string");return _typeof$1(lt)==="symbol"?lt:String(lt)}(tt))in Qe?Object.defineProperty(Qe,tt,{value:nt,enumerable:!0,configurable:!0,writable:!0}):Qe[tt]=nt,Qe}function m(Qe,tt,nt){_(Qe,tt),tt.set(Qe,nt)}function _(Qe,tt){if(tt.has(Qe))throw new TypeError("Cannot initialize the same private elements twice on an object")}function g(Qe,tt,nt){return function(it,lt){if(it!==lt)throw new TypeError("Private static access of wrong provenance")}(Qe,tt),nt}function y(Qe,tt,nt){return function(it,lt,Et){if(lt.set)lt.set.call(it,Et);else{if(!lt.writable)throw new TypeError("attempted to set read only private field");lt.value=Et}}(Qe,x(Qe,tt,"set"),nt),nt}function w(Qe,tt){return function(nt,it){return it.get?it.get.call(nt):it.value}(Qe,x(Qe,tt,"get"))}function x(Qe,tt,nt){if(!tt.has(Qe))throw new TypeError("attempted to "+nt+" private field on non-instance");return tt.get(Qe)}function k(Qe,tt,nt){if(!tt.has(Qe))throw new TypeError("attempted to get private field on non-instance");return nt}var S=16,E=new WeakMap,T=new WeakMap,M=new WeakMap,I=new WeakMap,F=new WeakMap,O=new WeakMap,N=new WeakMap,D=new WeakMap,X=new WeakMap,U=new WeakMap,Z=new WeakMap,j=new WeakMap,Q=new WeakMap,ve=new WeakMap,Se=new WeakSet,we=new WeakSet,oe=new WeakSet,ne=new WeakSet,q=new WeakSet,H=new WeakSet,Y=new WeakSet,le=new WeakSet,Ce=new WeakSet,Te=new WeakSet,ke=new WeakSet,Ee=new WeakSet,Pe=new WeakSet,Be=new WeakSet,$e=new WeakSet,Oe=new WeakSet,Ne=new WeakSet,J=new WeakSet,fe=new WeakSet,re=new WeakSet,_e=new WeakSet,be=new WeakSet,Ae=function(Qe){_inherits(nt,Qe);var tt=_createSuper(nt);function nt(it){var lt;return _classCallCheck(this,nt),f(_assertThisInitialized(lt=tt.call(this,_objectSpread2$1(_objectSpread2$1({},it),{},{name:"inkEditor"}))),be),f(_assertThisInitialized(lt),_e),f(_assertThisInitialized(lt),re),f(_assertThisInitialized(lt),fe),f(_assertThisInitialized(lt),J),f(_assertThisInitialized(lt),Ne),f(_assertThisInitialized(lt),Oe),f(_assertThisInitialized(lt),$e),f(_assertThisInitialized(lt),Be),f(_assertThisInitialized(lt),Pe),f(_assertThisInitialized(lt),Ee),f(_assertThisInitialized(lt),ke),f(_assertThisInitialized(lt),Te),f(_assertThisInitialized(lt),Ce),f(_assertThisInitialized(lt),le),f(_assertThisInitialized(lt),Y),f(_assertThisInitialized(lt),H),f(_assertThisInitialized(lt),q),f(_assertThisInitialized(lt),ne),f(_assertThisInitialized(lt),oe),f(_assertThisInitialized(lt),we),f(_assertThisInitialized(lt),Se),m(_assertThisInitialized(lt),E,{writable:!0,value:0}),m(_assertThisInitialized(lt),T,{writable:!0,value:0}),m(_assertThisInitialized(lt),M,{writable:!0,value:0}),m(_assertThisInitialized(lt),I,{writable:!0,value:lt.canvasPointermove.bind(_assertThisInitialized(lt))}),m(_assertThisInitialized(lt),F,{writable:!0,value:lt.canvasPointerleave.bind(_assertThisInitialized(lt))}),m(_assertThisInitialized(lt),O,{writable:!0,value:lt.canvasPointerup.bind(_assertThisInitialized(lt))}),m(_assertThisInitialized(lt),N,{writable:!0,value:lt.canvasPointerdown.bind(_assertThisInitialized(lt))}),m(_assertThisInitialized(lt),D,{writable:!0,value:!1}),m(_assertThisInitialized(lt),X,{writable:!0,value:!1}),m(_assertThisInitialized(lt),U,{writable:!0,value:null}),m(_assertThisInitialized(lt),Z,{writable:!0,value:null}),m(_assertThisInitialized(lt),j,{writable:!0,value:0}),m(_assertThisInitialized(lt),Q,{writable:!0,value:0}),m(_assertThisInitialized(lt),ve,{writable:!0,value:null}),lt.color=it.color||null,lt.thickness=it.thickness||null,lt.opacity=it.opacity||null,lt.paths=[],lt.bezierPath2D=[],lt.currentPath=[],lt.scaleFactor=1,lt.translationX=lt.translationY=0,lt.x=0,lt.y=0,lt}return _createClass(nt,[{key:"updateParams",value:function(it,lt){switch(it){case o.AnnotationEditorParamsType.INK_THICKNESS:k(this,Se,Le).call(this,lt);break;case o.AnnotationEditorParamsType.INK_COLOR:k(this,we,Ve).call(this,lt);break;case o.AnnotationEditorParamsType.INK_OPACITY:k(this,oe,Fe).call(this,lt)}}},{key:"propertiesToUpdate",get:function(){var it;return[[o.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||nt._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,this.color||nt._defaultColor||s.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((it=this.opacity)!==null&&it!==void 0?it:nt._defaultOpacity))]]}},{key:"rebuild",value:function(){_get(_getPrototypeOf(nt.prototype),"rebuild",this).call(this),this.div!==null&&(this.canvas||(k(this,ke,ut).call(this),k(this,Ee,ct).call(this)),this.isAttachedToDOM||(this.parent.add(this),k(this,Pe,mt).call(this)),k(this,_e,st).call(this))}},{key:"remove",value:function(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,w(this,Z).disconnect(),y(this,Z,null),_get(_getPrototypeOf(nt.prototype),"remove",this).call(this))}},{key:"setParent",value:function(it){!this.parent&&it?this._uiManager.removeShouldRescale(this):this.parent&&it===null&&this._uiManager.addShouldRescale(this),_get(_getPrototypeOf(nt.prototype),"setParent",this).call(this,it)}},{key:"onScaleChanging",value:function(){var it=_slicedToArray(this.parentDimensions,2),lt=it[0],Et=it[1],St=this.width*lt,Mt=this.height*Et;this.setDimensions(St,Mt)}},{key:"enableEditMode",value:function(){w(this,D)||this.canvas===null||(_get(_getPrototypeOf(nt.prototype),"enableEditMode",this).call(this),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",w(this,N)),this.canvas.addEventListener("pointerup",w(this,O)))}},{key:"disableEditMode",value:function(){this.isInEditMode()&&this.canvas!==null&&(_get(_getPrototypeOf(nt.prototype),"disableEditMode",this).call(this),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",w(this,N)),this.canvas.removeEventListener("pointerup",w(this,O)))}},{key:"onceAdded",value:function(){this.div.draggable=!this.isEmpty()}},{key:"isEmpty",value:function(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}},{key:"commit",value:function(){w(this,D)||(_get(_getPrototypeOf(nt.prototype),"commit",this).call(this),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),y(this,D,!0),this.div.classList.add("disabled"),k(this,_e,st).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}},{key:"focusin",value:function(it){_get(_getPrototypeOf(nt.prototype),"focusin",this).call(this,it),this.enableEditMode()}},{key:"canvasPointerdown",value:function(it){it.button===0&&this.isInEditMode()&&!w(this,D)&&(this.setInForeground(),it.type!=="mouse"&&this.div.focus(),it.stopPropagation(),this.canvas.addEventListener("pointerleave",w(this,F)),this.canvas.addEventListener("pointermove",w(this,I)),k(this,H,Re).call(this,it.offsetX,it.offsetY))}},{key:"canvasPointermove",value:function(it){it.stopPropagation(),k(this,Y,He).call(this,it.offsetX,it.offsetY)}},{key:"canvasPointerup",value:function(it){it.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(it.stopPropagation(),k(this,Te,at).call(this,it),this.setInBackground())}},{key:"canvasPointerleave",value:function(it){k(this,Te,at).call(this,it),this.setInBackground()}},{key:"render",value:function(){var it,lt,Et=this;if(this.div)return this.div;this.width&&(it=this.x,lt=this.y),_get(_getPrototypeOf(nt.prototype),"render",this).call(this),nt._l10nPromise.get("editor_ink2_aria_label").then(function(dn){var xn;return(xn=Et.div)===null||xn===void 0?void 0:xn.setAttribute("aria-label",dn)});var St=_slicedToArray(k(this,ne,De).call(this),4),Mt=St[0],Lt=St[1],Gt=St[2],vn=St[3];if(this.setAt(Mt,Lt,0,0),this.setDims(Gt,vn),k(this,ke,ut).call(this),this.width){var nn=_slicedToArray(this.parentDimensions,2),Qt=nn[0],un=nn[1];this.setAt(it*Qt,lt*un,this.width*Qt,this.height*un),y(this,X,!0),k(this,Pe,mt).call(this),this.setDims(this.width*Qt,this.height*un),k(this,Ce,Xe).call(this),k(this,be,ot).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return k(this,Ee,ct).call(this),this.div}},{key:"setDimensions",value:function(it,lt){var Et=Math.round(it),St=Math.round(lt);if(w(this,j)!==Et||w(this,Q)!==St){y(this,j,Et),y(this,Q,St),this.canvas.style.visibility="hidden",w(this,E)&&Math.abs(w(this,E)-it/lt)>.01&&(lt=Math.ceil(it/w(this,E)),this.setDims(it,lt));var Mt=_slicedToArray(this.parentDimensions,2),Lt=Mt[0],Gt=Mt[1];this.width=it/Lt,this.height=lt/Gt,w(this,D)&&k(this,Be,pt).call(this,it,lt),k(this,Pe,mt).call(this),k(this,Ce,Xe).call(this),this.canvas.style.visibility="visible",this.fixDims()}}},{key:"serialize",value:function(){if(this.isEmpty())return null;var it=this.getRect(0,0),lt=this.rotation%180==0?it[3]-it[1]:it[2]-it[0],Et=s.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:o.AnnotationEditorType.INK,color:Et,thickness:this.thickness,opacity:this.opacity,paths:k(this,Oe,ht).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,lt),pageIndex:this.pageIndex,rect:it,rotation:this.rotation}}}],[{key:"initialize",value:function(it){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(function(lt){return[lt,it.get(lt)]}))}},{key:"updateDefaultParams",value:function(it,lt){switch(it){case o.AnnotationEditorParamsType.INK_THICKNESS:nt._defaultThickness=lt;break;case o.AnnotationEditorParamsType.INK_COLOR:nt._defaultColor=lt;break;case o.AnnotationEditorParamsType.INK_OPACITY:nt._defaultOpacity=lt/100}}},{key:"defaultPropertiesToUpdate",get:function(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,nt._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,nt._defaultColor||s.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*nt._defaultOpacity)]]}},{key:"deserialize",value:function(it,lt,Et){var St,Mt=_get(_getPrototypeOf(nt),"deserialize",this).call(this,it,lt,Et);Mt.thickness=it.thickness,Mt.color=(St=o.Util).makeHexColor.apply(St,_toConsumableArray$1(it.color)),Mt.opacity=it.opacity;var Lt=_slicedToArray(Mt.pageDimensions,2),Gt=Lt[0],vn=Lt[1],nn=Mt.width*Gt,Qt=Mt.height*vn,un=Mt.parentScale,dn=it.thickness/2;y(Mt,E,nn/Qt),y(Mt,D,!0),y(Mt,j,Math.round(nn)),y(Mt,Q,Math.round(Qt));var xn,Pn=_createForOfIteratorHelper(it.paths);try{for(Pn.s();!(xn=Pn.n()).done;){var Mn=xn.value.bezier,Fn=[];Mt.paths.push(Fn);for(var ur=un*(Mn[0]-dn),xr=un*(Qt-Mn[1]-dn),Dn=2,Jn=Mn.length;Dn<Jn;Dn+=6){var Rr=un*(Mn[Dn]-dn),Qn=un*(Qt-Mn[Dn+1]-dn),Wn=un*(Mn[Dn+2]-dn),Ir=un*(Qt-Mn[Dn+3]-dn),Hn=un*(Mn[Dn+4]-dn),yi=un*(Qt-Mn[Dn+5]-dn);Fn.push([[ur,xr],[Rr,Qn],[Wn,Ir],[Hn,yi]]),ur=Hn,xr=yi}var fo=g(this,nt,Ct).call(this,Fn);Mt.bezierPath2D.push(fo)}}catch(Wr){Pn.e(Wr)}finally{Pn.f()}var Lr=k(Mt,fe,qe).call(Mt);return y(Mt,M,Math.max(S,Lr[2]-Lr[0])),y(Mt,T,Math.max(S,Lr[3]-Lr[1])),k(Mt,Be,pt).call(Mt,nn,Qt),Mt}}]),nt}(s.AnnotationEditor);function Le(Qe){var tt=this,nt=this.thickness;this.addCommands({cmd:function(){tt.thickness=Qe,k(tt,_e,st).call(tt)},undo:function(){tt.thickness=nt,k(tt,_e,st).call(tt)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function Ve(Qe){var tt=this,nt=this.color;this.addCommands({cmd:function(){tt.color=Qe,k(tt,Ce,Xe).call(tt)},undo:function(){tt.color=nt,k(tt,Ce,Xe).call(tt)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function Fe(Qe){var tt=this;Qe/=100;var nt=this.opacity;this.addCommands({cmd:function(){tt.opacity=Qe,k(tt,Ce,Xe).call(tt)},undo:function(){tt.opacity=nt,k(tt,Ce,Xe).call(tt)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function De(){var Qe=this.parentRotation,tt=_slicedToArray(this.parentDimensions,2),nt=tt[0],it=tt[1];switch(Qe){case 90:return[0,it,it,nt];case 180:return[nt,it,nt,it];case 270:return[nt,0,it,nt];default:return[0,0,nt,it]}}function We(){var Qe=this.ctx,tt=this.color,nt=this.opacity,it=this.thickness,lt=this.parentScale,Et=this.scaleFactor;Qe.lineWidth=it*lt/Et,Qe.lineCap="round",Qe.lineJoin="round",Qe.miterLimit=10,Qe.strokeStyle="".concat(tt).concat((0,d.opacityToHex)(nt))}function Re(Qe,tt){var nt,it=this;this.isEditing=!0,w(this,X)||(y(this,X,!0),k(this,Pe,mt).call(this),this.thickness||(this.thickness=Ae._defaultThickness),this.color||(this.color=Ae._defaultColor||s.AnnotationEditor._defaultLineColor),(nt=this.opacity)!==null&&nt!==void 0||(this.opacity=Ae._defaultOpacity)),this.currentPath.push([Qe,tt]),y(this,U,null),k(this,q,We).call(this),this.ctx.beginPath(),this.ctx.moveTo(Qe,tt),y(this,ve,function(){var lt;w(it,ve)&&(w(it,U)&&(it.isEmpty()?(it.ctx.setTransform(1,0,0,1,0,0),it.ctx.clearRect(0,0,it.canvas.width,it.canvas.height)):k(it,Ce,Xe).call(it),(lt=it.ctx).lineTo.apply(lt,_toConsumableArray$1(w(it,U))),y(it,U,null),it.ctx.stroke()),window.requestAnimationFrame(w(it,ve)))}),window.requestAnimationFrame(w(this,ve))}function He(Qe,tt){var nt=_slicedToArray(this.currentPath.at(-1),2),it=nt[0],lt=nt[1];Qe===it&&tt===lt||(this.currentPath.push([Qe,tt]),y(this,U,[Qe,tt]))}function Ze(Qe,tt){var nt=this;this.ctx.closePath(),y(this,ve,null),Qe=Math.min(Math.max(Qe,0),this.canvas.width),tt=Math.min(Math.max(tt,0),this.canvas.height);var it,lt=_slicedToArray(this.currentPath.at(-1),2),Et=lt[0],St=lt[1];if(Qe===Et&&tt===St||this.currentPath.push([Qe,tt]),this.currentPath.length!==1)it=(0,u.fitCurve)(this.currentPath,30,null);else{var Mt=[Qe,tt];it=[[Mt,Mt.slice(),Mt.slice(),Mt]]}var Lt=g(Ae,Ae,Ct).call(Ae,it);this.currentPath.length=0,this.addCommands({cmd:function(){nt.paths.push(it),nt.bezierPath2D.push(Lt),nt.rebuild()},undo:function(){nt.paths.pop(),nt.bezierPath2D.pop(),nt.paths.length===0?nt.remove():(nt.canvas||(k(nt,ke,ut).call(nt),k(nt,Ee,ct).call(nt)),k(nt,_e,st).call(nt))},mustExec:!0})}function Xe(){if(this.isEmpty())k(this,$e,kt).call(this);else{k(this,q,We).call(this);var Qe=this.canvas,tt=this.ctx;tt.setTransform(1,0,0,1,0,0),tt.clearRect(0,0,Qe.width,Qe.height),k(this,$e,kt).call(this);var nt,it=_createForOfIteratorHelper(this.bezierPath2D);try{for(it.s();!(nt=it.n()).done;){var lt=nt.value;tt.stroke(lt)}}catch(Et){it.e(Et)}finally{it.f()}}}function at(Qe){k(this,le,Ze).call(this,Qe.offsetX,Qe.offsetY),this.canvas.removeEventListener("pointerleave",w(this,F)),this.canvas.removeEventListener("pointermove",w(this,I)),this.addToAnnotationStorage()}function ut(){var Qe=this;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Ae._l10nPromise.get("editor_ink_canvas_aria_label").then(function(tt){var nt;return(nt=Qe.canvas)===null||nt===void 0?void 0:nt.setAttribute("aria-label",tt)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function ct(){var Qe=this;y(this,Z,new ResizeObserver(function(tt){var nt=tt[0].contentRect;nt.width&&nt.height&&Qe.setDimensions(nt.width,nt.height)})),w(this,Z).observe(this.div)}function mt(){if(w(this,X)){var Qe=_slicedToArray(this.parentDimensions,2),tt=Qe[0],nt=Qe[1];this.canvas.width=Math.ceil(this.width*tt),this.canvas.height=Math.ceil(this.height*nt),k(this,$e,kt).call(this)}}function pt(Qe,tt){var nt=k(this,re,Ye).call(this),it=(Qe-nt)/w(this,M),lt=(tt-nt)/w(this,T);this.scaleFactor=Math.min(it,lt)}function kt(){var Qe=k(this,re,Ye).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Qe,this.translationY*this.scaleFactor+Qe)}function Ct(Qe){for(var tt=new Path2D,nt=0,it=Qe.length;nt<it;nt++){var lt=_slicedToArray(Qe[nt],4),Et=lt[0],St=lt[1],Mt=lt[2],Lt=lt[3];nt===0&&tt.moveTo.apply(tt,_toConsumableArray$1(Et)),tt.bezierCurveTo(St[0],St[1],Mt[0],Mt[1],Lt[0],Lt[1])}return tt}function ht(Qe,tt,nt,it){var lt,Et,St,Mt=[],Lt=this.thickness/2,Gt=_createForOfIteratorHelper(this.paths);try{for(Gt.s();!(St=Gt.n()).done;){var vn=St.value;lt=[],Et=[];for(var nn=0,Qt=vn.length;nn<Qt;nn++){var un=_slicedToArray(vn[nn],4),dn=un[0],xn=un[1],Pn=un[2],Mn=un[3],Fn=Qe*(dn[0]+tt)+Lt,ur=it-Qe*(dn[1]+nt)-Lt,xr=Qe*(xn[0]+tt)+Lt,Dn=it-Qe*(xn[1]+nt)-Lt,Jn=Qe*(Pn[0]+tt)+Lt,Rr=it-Qe*(Pn[1]+nt)-Lt,Qn=Qe*(Mn[0]+tt)+Lt,Wn=it-Qe*(Mn[1]+nt)-Lt;nn===0&&(lt.push(Fn,ur),Et.push(Fn,ur)),lt.push(xr,Dn,Jn,Rr,Qn,Wn),k(this,Ne,Pt).call(this,Fn,ur,xr,Dn,Jn,Rr,Qn,Wn,4,Et)}Mt.push({bezier:lt,points:Et})}}catch(Ir){Gt.e(Ir)}finally{Gt.f()}return Mt}function Pt(Qe,tt,nt,it,lt,Et,St,Mt,Lt,Gt){if(k(this,J,Ue).call(this,Qe,tt,nt,it,lt,Et,St,Mt))Gt.push(St,Mt);else{for(var vn=1;vn<Lt-1;vn++){var nn=vn/Lt,Qt=1-nn,un=nn*Qe+Qt*nt,dn=nn*tt+Qt*it,xn=nn*nt+Qt*lt,Pn=nn*it+Qt*Et;un=nn*(un=nn*un+Qt*xn)+Qt*(xn=nn*xn+Qt*(nn*lt+Qt*St)),dn=nn*(dn=nn*dn+Qt*Pn)+Qt*(Pn=nn*Pn+Qt*(nn*Et+Qt*Mt)),Gt.push(un,dn)}Gt.push(St,Mt)}}function Ue(Qe,tt,nt,it,lt,Et,St,Mt){var Lt=Math.pow(3*nt-2*Qe-St,2),Gt=Math.pow(3*it-2*tt-Mt,2),vn=Math.pow(3*lt-Qe-2*St,2),nn=Math.pow(3*Et-tt-2*Mt,2);return Math.max(Lt,vn)+Math.max(Gt,nn)<=10}function qe(){var Qe,tt=1/0,nt=-1/0,it=1/0,lt=-1/0,Et=_createForOfIteratorHelper(this.paths);try{for(Et.s();!(Qe=Et.n()).done;){var St,Mt=_createForOfIteratorHelper(Qe.value);try{for(Mt.s();!(St=Mt.n()).done;){var Lt,Gt=_slicedToArray(St.value,4),vn=Gt[0],nn=Gt[1],Qt=Gt[2],un=Gt[3],dn=(Lt=o.Util).bezierBoundingBox.apply(Lt,_toConsumableArray$1(vn).concat(_toConsumableArray$1(nn),_toConsumableArray$1(Qt),_toConsumableArray$1(un)));tt=Math.min(tt,dn[0]),it=Math.min(it,dn[1]),nt=Math.max(nt,dn[2]),lt=Math.max(lt,dn[3])}}catch(xn){Mt.e(xn)}finally{Mt.f()}}}catch(xn){Et.e(xn)}finally{Et.f()}return[tt,it,nt,lt]}function Ye(){return w(this,D)?Math.ceil(this.thickness*this.parentScale):0}function st(){var Qe=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!this.isEmpty())if(w(this,D)){var tt=k(this,fe,qe).call(this),nt=k(this,re,Ye).call(this);y(this,M,Math.max(S,tt[2]-tt[0])),y(this,T,Math.max(S,tt[3]-tt[1]));var it=Math.ceil(nt+w(this,M)*this.scaleFactor),lt=Math.ceil(nt+w(this,T)*this.scaleFactor),Et=_slicedToArray(this.parentDimensions,2),St=Et[0],Mt=Et[1];this.width=it/St,this.height=lt/Mt,y(this,E,it/lt),k(this,be,ot).call(this);var Lt=this.translationX,Gt=this.translationY;this.translationX=-tt[0],this.translationY=-tt[1],k(this,Pe,mt).call(this),k(this,Ce,Xe).call(this),y(this,j,it),y(this,Q,lt),this.setDims(it,lt);var vn=Qe?nt/this.scaleFactor/2:0;this.translate(Lt-this.translationX-vn,Gt-this.translationY-vn)}else k(this,Ce,Xe).call(this)}function ot(){var Qe=this.div.style;w(this,E)>=1?(Qe.minHeight="".concat(S,"px"),Qe.minWidth="".concat(Math.round(w(this,E)*S),"px")):(Qe.minWidth="".concat(S,"px"),Qe.minHeight="".concat(Math.round(S/w(this,E)),"px"))}n.InkEditor=Ae,v(Ae,"_defaultColor",null),v(Ae,"_defaultOpacity",1),v(Ae,"_defaultThickness",1),v(Ae,"_l10nPromise",void 0),v(Ae,"_type","ink")},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.fitCurve=void 0;var o=r(166);n.fitCurve=o},function(e){function n(_,g,y,w,x){var k,S,E,T,M,I,F,O,N,D,X,U,Z;if(_.length===2)return U=v.vectorLen(v.subtract(_[0],_[1]))/3,[k=[_[0],v.addArrays(_[0],v.mulItems(g,U)),v.addArrays(_[1],v.mulItems(y,U)),_[1]]];S=function(we){var oe,ne,q,H=[];return we.forEach(function(Y,le){oe=le?ne+v.vectorLen(v.subtract(Y,q)):0,H.push(oe),ne=oe,q=Y}),H=H.map(function(Y){return Y/ne})}(_);var j=_slicedToArray(r(_,S,S,g,y,x),3);if(k=j[0],T=j[1],I=j[2],T===0||T<w)return[k];if(T<w*w)for(E=S,M=T,F=I,Z=0;Z<20;Z++){var Q=_slicedToArray(r(_,S,E=o(k,_,E),g,y,x),3);if(k=Q[0],T=Q[1],I=Q[2],T<w)return[k];if(I===F){var ve=T/M;if(ve>.9999&&ve<1.0001)break}M=T,F=I}if(X=[],(O=v.subtract(_[I-1],_[I+1])).every(function(we){return we===0})){var Se=[-(O=v.subtract(_[I-1],_[I]))[1],O[0]];O[0]=Se[0],O[1]=Se[1]}return N=v.normalize(O),D=v.mulItems(N,-1),X=(X=X.concat(n(_.slice(0,I+1),g,N,w,x))).concat(n(_.slice(I),D,y,w,x))}function r(_,g,y,w,x,k){var S,E,T;S=function(F,O,N,D){var X,U,Z,j,Q,ve,Se,we,oe,ne,q,H,Y,le,Ce,Te,ke,Ee=F[0],Pe=F[F.length-1];for(X=[Ee,null,null,Pe],U=v.zeros_Xx2x2(O.length),Y=0,le=O.length;Y<le;Y++)ke=1-(Te=O[Y]),(Z=U[Y])[0]=v.mulItems(N,3*Te*(ke*ke)),Z[1]=v.mulItems(D,3*ke*(Te*Te));for(j=[[0,0],[0,0]],Q=[0,0],Y=0,le=F.length;Y<le;Y++)Te=O[Y],Z=U[Y],j[0][0]+=v.dot(Z[0],Z[0]),j[0][1]+=v.dot(Z[0],Z[1]),j[1][0]+=v.dot(Z[0],Z[1]),j[1][1]+=v.dot(Z[1],Z[1]),Ce=v.subtract(F[Y],m.q([Ee,Ee,Pe,Pe],Te)),Q[0]+=v.dot(Z[0],Ce),Q[1]+=v.dot(Z[1],Ce);return ve=j[0][0]*j[1][1]-j[1][0]*j[0][1],Se=j[0][0]*Q[1]-j[1][0]*Q[0],we=Q[0]*j[1][1]-Q[1]*j[0][1],oe=ve===0?0:we/ve,ne=ve===0?0:Se/ve,H=v.vectorLen(v.subtract(Ee,Pe)),oe<(q=1e-6*H)||ne<q?(X[1]=v.addArrays(Ee,v.mulItems(N,H/3)),X[2]=v.addArrays(Pe,v.mulItems(D,H/3))):(X[1]=v.addArrays(Ee,v.mulItems(N,oe)),X[2]=v.addArrays(Pe,v.mulItems(D,ne))),X}(_,y,w,x);var M=function(F,O,N){var D,X,U,Z,j,Q,ve,Se;X=0,U=Math.floor(F.length/2);var we=u(O,10);for(j=0,Q=F.length;j<Q;j++)ve=F[j],Se=d(0,N[j],we,10),(D=(Z=v.subtract(m.q(O,Se),ve))[0]*Z[0]+Z[1]*Z[1])>X&&(X=D,U=j);return[X,U]}(_,S,g),I=_slicedToArray(M,2);return E=I[0],T=I[1],k&&k({bez:S,points:_,params:g,maxErr:E,maxPoint:T}),[S,E,T]}function o(_,g,y){return y.map(function(w,x){return s(_,g[x],w)})}function s(_,g,y){var w=v.subtract(m.q(_,y),g),x=m.qprime(_,y),k=v.mulMatrix(w,x),S=v.sum(v.squareItems(x))+2*v.mulMatrix(w,m.qprimeprime(_,y));return S===0?y:y-k/S}var u=function(_,g){for(var y,w=[0],x=_[0],k=0,S=1;S<=g;S++)y=m.q(_,S/g),k+=v.vectorLen(v.subtract(y,x)),w.push(k),x=y;return w=w.map(function(E){return E/k})};function d(_,g,y,w){if(g<0)return 0;if(g>1)return 1;for(var x,k,S,E,T=1;T<=w;T++)if(g<=y[T]){S=(T-1)/w,k=T/w,E=(g-(x=y[T-1]))/(y[T]-x)*(k-S)+S;break}return E}function f(_,g){return v.normalize(v.subtract(_,g))}var v=function(){function _(){_classCallCheck(this,_)}return _createClass(_,null,[{key:"zeros_Xx2x2",value:function(g){for(var y=[];g--;)y.push([0,0]);return y}},{key:"mulItems",value:function(g,y){return g.map(function(w){return w*y})}},{key:"mulMatrix",value:function(g,y){return g.reduce(function(w,x,k){return w+x*y[k]},0)}},{key:"subtract",value:function(g,y){return g.map(function(w,x){return w-y[x]})}},{key:"addArrays",value:function(g,y){return g.map(function(w,x){return w+y[x]})}},{key:"addItems",value:function(g,y){return g.map(function(w){return w+y})}},{key:"sum",value:function(g){return g.reduce(function(y,w){return y+w})}},{key:"dot",value:function(g,y){return _.mulMatrix(g,y)}},{key:"vectorLen",value:function(g){return Math.hypot.apply(Math,_toConsumableArray$1(g))}},{key:"divItems",value:function(g,y){return g.map(function(w){return w/y})}},{key:"squareItems",value:function(g){return g.map(function(y){return y*y})}},{key:"normalize",value:function(g){return this.divItems(g,this.vectorLen(g))}}]),_}(),m=function(){function _(){_classCallCheck(this,_)}return _createClass(_,null,[{key:"q",value:function(g,y){var w=1-y,x=v.mulItems(g[0],w*w*w),k=v.mulItems(g[1],3*w*w*y),S=v.mulItems(g[2],3*w*y*y),E=v.mulItems(g[3],y*y*y);return v.addArrays(v.addArrays(x,k),v.addArrays(S,E))}},{key:"qprime",value:function(g,y){var w=1-y,x=v.mulItems(v.subtract(g[1],g[0]),3*w*w),k=v.mulItems(v.subtract(g[2],g[1]),6*w*y),S=v.mulItems(v.subtract(g[3],g[2]),3*y*y);return v.addArrays(v.addArrays(x,k),S)}},{key:"qprimeprime",value:function(g,y){return v.addArrays(v.mulItems(v.addArrays(v.subtract(g[2],v.mulItems(g[1],2)),g[0]),6*(1-y)),v.mulItems(v.addArrays(v.subtract(g[3],v.mulItems(g[2],2)),g[1]),6*y))}}]),_}();e.exports=function(_,g,y){if(!Array.isArray(_))throw new TypeError("First argument should be an array");if(_.forEach(function(S){if(!Array.isArray(S)||S.some(function(E){return typeof E!="number"})||S.length!==_[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),_=_.filter(function(S,E){return E===0||!S.every(function(T,M){return T===_[E-1][M]})}),_.length<2)return[];var w=_.length,x=f(_[1],_[0]),k=f(_[w-2],_[w-1]);return n(_,x,k,g,y)},e.exports.fitCubic=n,e.exports.createTangent=f},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationLayer=void 0;var o=r(1),s=r(142),u=r(139),d=r(168),f=r(169);function v(Ne,J,fe){return function(re,_e){if(re!==_e)throw new TypeError("Private static access of wrong provenance")}(Ne,J),fe}function m(Ne,J){(function(fe,re){if(re.has(fe))throw new TypeError("Cannot initialize the same private elements twice on an object")})(Ne,J),J.add(Ne)}function _(Ne,J,fe){if(!J.has(Ne))throw new TypeError("attempted to get private field on non-instance");return fe}var g=1e3,y=new WeakSet;function w(Ne){return{width:Ne[2]-Ne[0],height:Ne[3]-Ne[1]}}var x=function(){function Ne(){_classCallCheck(this,Ne)}return _createClass(Ne,null,[{key:"create",value:function(J){switch(J.data.annotationType){case o.AnnotationType.LINK:return new T(J);case o.AnnotationType.TEXT:return new F(J);case o.AnnotationType.WIDGET:switch(J.data.fieldType){case"Tx":return new N(J);case"Btn":return J.data.radioButton?new X(J):J.data.checkBox?new D(J):new U(J);case"Ch":return new Z(J)}return new O(J);case o.AnnotationType.POPUP:return new j(J);case o.AnnotationType.FREETEXT:return new ve(J);case o.AnnotationType.LINE:return new Se(J);case o.AnnotationType.SQUARE:return new we(J);case o.AnnotationType.CIRCLE:return new oe(J);case o.AnnotationType.POLYLINE:return new ne(J);case o.AnnotationType.CARET:return new H(J);case o.AnnotationType.INK:return new Y(J);case o.AnnotationType.POLYGON:return new q(J);case o.AnnotationType.HIGHLIGHT:return new le(J);case o.AnnotationType.UNDERLINE:return new Ce(J);case o.AnnotationType.SQUIGGLY:return new Te(J);case o.AnnotationType.STRIKEOUT:return new ke(J);case o.AnnotationType.STAMP:return new Ee(J);case o.AnnotationType.FILEATTACHMENT:return new Pe(J);default:return new k(J)}}}]),Ne}(),k=function(){function Ne(J){_classCallCheck(this,Ne);var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re=fe.isRenderable,_e=re!==void 0&&re,be=fe.ignoreBorder,Ae=be!==void 0&&be,Le=fe.createQuadrilaterals,Ve=Le!==void 0&&Le;this.isRenderable=_e,this.data=J.data,this.layer=J.layer,this.page=J.page,this.viewport=J.viewport,this.linkService=J.linkService,this.downloadManager=J.downloadManager,this.imageResourcesPath=J.imageResourcesPath,this.renderForms=J.renderForms,this.svgFactory=J.svgFactory,this.annotationStorage=J.annotationStorage,this.enableScripting=J.enableScripting,this.hasJSActions=J.hasJSActions,this._fieldObjects=J.fieldObjects,_e&&(this.container=this._createContainer(Ae)),Ve&&(this.quadrilaterals=this._createQuadrilaterals(Ae))}return _createClass(Ne,[{key:"_createContainer",value:function(){var J=arguments.length>0&&arguments[0]!==void 0&&arguments[0],fe=this.data,re=this.page,_e=this.viewport,be=document.createElement("section");be.setAttribute("data-annotation-id",fe.id),fe.noRotate&&be.classList.add("norotate");var Ae=_e.rawDims,Le=Ae.pageWidth,Ve=Ae.pageHeight,Fe=Ae.pageX,De=Ae.pageY,We=w(fe.rect),Re=We.width,He=We.height,Ze=o.Util.normalizeRect([fe.rect[0],re.view[3]-fe.rect[1]+re.view[1],fe.rect[2],re.view[3]-fe.rect[3]+re.view[1]]);if(!J&&fe.borderStyle.width>0){be.style.borderWidth="".concat(fe.borderStyle.width,"px");var Xe=fe.borderStyle.horizontalCornerRadius,at=fe.borderStyle.verticalCornerRadius;if(Xe>0||at>0){var ut="calc(".concat(Xe,"px * var(--scale-factor)) / calc(").concat(at,"px * var(--scale-factor))");be.style.borderRadius=ut}else if(this instanceof X){var ct="calc(".concat(Re,"px * var(--scale-factor)) / calc(").concat(He,"px * var(--scale-factor))");be.style.borderRadius=ct}switch(fe.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:be.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:be.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:be.style.borderBottomStyle="solid"}var mt=fe.borderColor||null;mt?be.style.borderColor=o.Util.makeHexColor(0|mt[0],0|mt[1],0|mt[2]):be.style.borderWidth=0}be.style.left="".concat(100*(Ze[0]-Fe)/Le,"%"),be.style.top="".concat(100*(Ze[1]-De)/Ve,"%");var pt=fe.rotation;return fe.hasOwnCanvas||pt===0?(be.style.width="".concat(100*Re/Le,"%"),be.style.height="".concat(100*He/Ve,"%")):this.setRotation(pt,be),be}},{key:"setRotation",value:function(J){var fe,re,_e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,be=this.viewport.rawDims,Ae=be.pageWidth,Le=be.pageHeight,Ve=w(this.data.rect),Fe=Ve.width,De=Ve.height;J%180==0?(fe=100*Fe/Ae,re=100*De/Le):(fe=100*De/Ae,re=100*Fe/Le),_e.style.width="".concat(fe,"%"),_e.style.height="".concat(re,"%"),_e.setAttribute("data-main-rotation",(360-J)%360)}},{key:"_commonActions",get:function(){var J=this,fe=function(re,_e,be){var Ae=be.detail[re];be.target.style[_e]=d.ColorConverters["".concat(Ae[0],"_HTML")](Ae.slice(1))};return(0,o.shadow)(this,"_commonActions",{display:function(re){var _e=re.detail.display%2==1;J.container.style.visibility=_e?"hidden":"visible",J.annotationStorage.setValue(J.data.id,{hidden:_e,print:re.detail.display===0||re.detail.display===3})},print:function(re){J.annotationStorage.setValue(J.data.id,{print:re.detail.print})},hidden:function(re){J.container.style.visibility=re.detail.hidden?"hidden":"visible",J.annotationStorage.setValue(J.data.id,{hidden:re.detail.hidden})},focus:function(re){setTimeout(function(){return re.target.focus({preventScroll:!1})},0)},userName:function(re){re.target.title=re.detail.userName},readonly:function(re){re.detail.readonly?re.target.setAttribute("readonly",""):re.target.removeAttribute("readonly")},required:function(re){J._setRequired(re.target,re.detail.required)},bgColor:function(re){fe("bgColor","backgroundColor",re)},fillColor:function(re){fe("fillColor","backgroundColor",re)},fgColor:function(re){fe("fgColor","color",re)},textColor:function(re){fe("textColor","color",re)},borderColor:function(re){fe("borderColor","borderColor",re)},strokeColor:function(re){fe("strokeColor","borderColor",re)},rotation:function(re){var _e=re.detail.rotation;J.setRotation(_e),J.annotationStorage.setValue(J.data.id,{rotation:_e})}})}},{key:"_dispatchEventFromSandbox",value:function(J,fe){for(var re=this._commonActions,_e=0,be=Object.keys(fe.detail);_e<be.length;_e++){var Ae=be[_e],Le=J[Ae]||re[Ae];Le==null||Le(fe)}}},{key:"_setDefaultPropertiesFromJS",value:function(J){if(this.enableScripting){var fe=this.annotationStorage.getRawValue(this.data.id);if(fe)for(var re=this._commonActions,_e=0,be=Object.entries(fe);_e<be.length;_e++){var Ae=_slicedToArray(be[_e],2),Le=Ae[0],Ve=Ae[1],Fe=re[Le];Fe&&(Fe({detail:_defineProperty$1({},Le,Ve),target:J}),delete fe[Le])}}}},{key:"_createQuadrilaterals",value:function(){var J=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!this.data.quadPoints)return null;var fe,re=[],_e=this.data.rect,be=_createForOfIteratorHelper(this.data.quadPoints);try{for(be.s();!(fe=be.n()).done;){var Ae=fe.value;this.data.rect=[Ae[2].x,Ae[2].y,Ae[1].x,Ae[1].y],re.push(this._createContainer(J))}}catch(Le){be.e(Le)}finally{be.f()}return this.data.rect=_e,re}},{key:"_createPopup",value:function(J,fe){var re=this.container;this.quadrilaterals&&(J=J||this.quadrilaterals,re=this.quadrilaterals[0]),J||((J=document.createElement("div")).classList.add("popupTriggerArea"),re.append(J));var _e=new Q({container:re,trigger:J,color:fe.color,titleObj:fe.titleObj,modificationDate:fe.modificationDate,contentsObj:fe.contentsObj,richText:fe.richText,hideWrapper:!0}).render();_e.style.left="100%",re.append(_e)}},{key:"_renderQuadrilaterals",value:function(J){var fe,re=_createForOfIteratorHelper(this.quadrilaterals);try{for(re.s();!(fe=re.n()).done;)fe.value.classList.add(J)}catch(_e){re.e(_e)}finally{re.f()}return this.quadrilaterals}},{key:"render",value:function(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}},{key:"_getElementsByName",value:function(J){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,re=[];if(this._fieldObjects){var _e=this._fieldObjects[J];if(_e){var be,Ae=_createForOfIteratorHelper(_e);try{for(Ae.s();!(be=Ae.n()).done;){var Le=be.value,Ve=Le.page,Fe=Le.id,De=Le.exportValues;if(Ve!==-1&&Fe!==fe){var We=typeof De=="string"?De:null,Re=document.querySelector('[data-element-id="'.concat(Fe,'"]'));!Re||y.has(Re)?re.push({id:Fe,exportValue:We,domElement:Re}):(0,o.warn)("_getElementsByName - element not allowed: ".concat(Fe))}}}catch(ct){Ae.e(ct)}finally{Ae.f()}}return re}var He,Ze=_createForOfIteratorHelper(document.getElementsByName(J));try{for(Ze.s();!(He=Ze.n()).done;){var Xe=He.value,at=Xe.exportValue,ut=Xe.getAttribute("data-element-id");ut!==fe&&y.has(Xe)&&re.push({id:ut,exportValue:at,domElement:Xe})}}catch(ct){Ze.e(ct)}finally{Ze.f()}return re}}]),Ne}(),S=new WeakSet,E=new WeakSet,T=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){var _e;_classCallCheck(this,fe);var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return m(_assertThisInitialized(_e=J.call(this,re,{isRenderable:!0,ignoreBorder:!(be==null||!be.ignoreBorder),createQuadrilaterals:!0})),E),m(_assertThisInitialized(_e),S),_e.isTooltipOnly=re.data.isTooltipOnly,_e}return _createClass(fe,[{key:"render",value:function(){var re=this.data,_e=this.linkService,be=document.createElement("a");be.setAttribute("data-element-id",re.id);var Ae=!1;return re.url?(_e.addLinkAttributes(be,re.url,re.newWindow),Ae=!0):re.action?(this._bindNamedAction(be,re.action),Ae=!0):re.attachment?(this._bindAttachment(be,re.attachment),Ae=!0):re.setOCGState?(_(this,E,I).call(this,be,re.setOCGState),Ae=!0):re.dest?(this._bindLink(be,re.dest),Ae=!0):(re.actions&&(re.actions.Action||re.actions["Mouse Up"]||re.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(be,re),Ae=!0),re.resetForm?(this._bindResetFormAction(be,re.resetForm),Ae=!0):this.isTooltipOnly&&!Ae&&(this._bindLink(be,""),Ae=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map(function(Le,Ve){var Fe=Ve===0?be:be.cloneNode();return Le.append(Fe),Le}):(this.container.classList.add("linkAnnotation"),Ae&&this.container.append(be),this.container)}},{key:"_bindLink",value:function(re,_e){var be=this;re.href=this.linkService.getDestinationHash(_e),re.onclick=function(){return _e&&be.linkService.goToDestination(_e),!1},(_e||_e==="")&&_(this,S,M).call(this)}},{key:"_bindNamedAction",value:function(re,_e){var be=this;re.href=this.linkService.getAnchorUrl(""),re.onclick=function(){return be.linkService.executeNamedAction(_e),!1},_(this,S,M).call(this)}},{key:"_bindAttachment",value:function(re,_e){var be=this;re.href=this.linkService.getAnchorUrl(""),re.onclick=function(){var Ae;return(Ae=be.downloadManager)===null||Ae===void 0||Ae.openOrDownloadData(be.container,_e.content,_e.filename),!1},_(this,S,M).call(this)}},{key:"_bindJSAction",value:function(re,_e){var be=this;re.href=this.linkService.getAnchorUrl("");for(var Ae=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]),Le=function(){var De=Fe[Ve],We=Ae.get(De);if(!We)return"continue";re[We]=function(){var Re;return(Re=be.linkService.eventBus)===null||Re===void 0||Re.dispatch("dispatcheventinsandbox",{source:be,detail:{id:_e.id,name:De}}),!1}},Ve=0,Fe=Object.keys(_e.actions);Ve<Fe.length;Ve++)Le();re.onclick||(re.onclick=function(){return!1}),_(this,S,M).call(this)}},{key:"_bindResetFormAction",value:function(re,_e){var be=this,Ae=re.onclick;if(Ae||(re.href=this.linkService.getAnchorUrl("")),_(this,S,M).call(this),!this._fieldObjects)return(0,o.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(Ae||(re.onclick=function(){return!1}));re.onclick=function(){Ae==null||Ae();var Le=_e.fields,Ve=_e.refs,Fe=_e.include,De=[];if(Le.length!==0||Ve.length!==0){var We,Re=new Set(Ve),He=_createForOfIteratorHelper(Le);try{for(He.s();!(We=He.n()).done;){var Ze,Xe=We.value,at=_createForOfIteratorHelper(be._fieldObjects[Xe]||[]);try{for(at.s();!(Ze=at.n()).done;){var ut=Ze.value.id;Re.add(ut)}}catch(Mt){at.e(Mt)}finally{at.f()}}}catch(Mt){He.e(Mt)}finally{He.f()}for(var ct=0,mt=Object.values(be._fieldObjects);ct<mt.length;ct++){var pt,kt=_createForOfIteratorHelper(mt[ct]);try{for(kt.s();!(pt=kt.n()).done;){var Ct=pt.value;Re.has(Ct.id)===Fe&&De.push(Ct)}}catch(Mt){kt.e(Mt)}finally{kt.f()}}}else for(var ht=0,Pt=Object.values(be._fieldObjects);ht<Pt.length;ht++){var Ue=Pt[ht];De.push.apply(De,_toConsumableArray$1(Ue))}for(var qe,Ye=be.annotationStorage,st=[],ot=0,Qe=De;ot<Qe.length;ot++){var tt=Qe[ot],nt=tt.id;switch(st.push(nt),tt.type){case"text":var it=tt.defaultValue||"";Ye.setValue(nt,{value:it});break;case"checkbox":case"radiobutton":var lt=tt.defaultValue===tt.exportValues;Ye.setValue(nt,{value:lt});break;case"combobox":case"listbox":var Et=tt.defaultValue||"";Ye.setValue(nt,{value:Et});break;default:continue}var St=document.querySelector('[data-element-id="'.concat(nt,'"]'));St&&(y.has(St)?St.dispatchEvent(new Event("resetform")):(0,o.warn)("_bindResetFormAction - element not allowed: ".concat(nt)))}return be.enableScripting&&((qe=be.linkService.eventBus)===null||qe===void 0||qe.dispatch("dispatcheventinsandbox",{source:be,detail:{id:"app",ids:st,name:"ResetForm"}})),!1}}}]),fe}(k);function M(){this.container.setAttribute("data-internal-link","")}function I(Ne,J){var fe=this;Ne.href=this.linkService.getAnchorUrl(""),Ne.onclick=function(){return fe.linkService.executeSetOCGState(J),!1},_(this,S,M).call(this)}var F=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){var _e,be,Ae;_classCallCheck(this,fe);var Le=!!(re.data.hasPopup||(_e=re.data.titleObj)!==null&&_e!==void 0&&_e.str||(be=re.data.contentsObj)!==null&&be!==void 0&&be.str||(Ae=re.data.richText)!==null&&Ae!==void 0&&Ae.str);return J.call(this,re,{isRenderable:Le})}return _createClass(fe,[{key:"render",value:function(){this.container.classList.add("textAnnotation");var re=document.createElement("img");return re.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",re.alt="[{{type}} Annotation]",re.dataset.l10nId="text_annotation_type",re.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(re,this.data),this.container.append(re),this.container}}]),fe}(k),O=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(){return _classCallCheck(this,fe),J.apply(this,arguments)}return _createClass(fe,[{key:"render",value:function(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}},{key:"_getKeyModifier",value:function(re){var _e=o.FeatureTest.platform,be=_e.isWin,Ae=_e.isMac;return be&&re.ctrlKey||Ae&&re.metaKey}},{key:"_setEventListener",value:function(re,_e,be,Ae){var Le=this;_e.includes("mouse")?re.addEventListener(_e,function(Ve){var Fe;(Fe=Le.linkService.eventBus)===null||Fe===void 0||Fe.dispatch("dispatcheventinsandbox",{source:Le,detail:{id:Le.data.id,name:be,value:Ae(Ve),shift:Ve.shiftKey,modifier:Le._getKeyModifier(Ve)}})}):re.addEventListener(_e,function(Ve){var Fe;(Fe=Le.linkService.eventBus)===null||Fe===void 0||Fe.dispatch("dispatcheventinsandbox",{source:Le,detail:{id:Le.data.id,name:be,value:Ae(Ve)}})})}},{key:"_setEventListeners",value:function(re,_e,be){var Ae,Le=_createForOfIteratorHelper(_e);try{for(Le.s();!(Ae=Le.n()).done;){var Ve,Fe=_slicedToArray(Ae.value,2),De=Fe[0],We=Fe[1];(We==="Action"||(Ve=this.data.actions)!==null&&Ve!==void 0&&Ve[We])&&this._setEventListener(re,De,We,be)}}catch(Re){Le.e(Re)}finally{Le.f()}}},{key:"_setBackgroundColor",value:function(re){var _e=this.data.backgroundColor||null;re.style.backgroundColor=_e===null?"transparent":o.Util.makeHexColor(_e[0],_e[1],_e[2])}},{key:"_setTextStyle",value:function(re){var _e,be=this.data.defaultAppearanceData.fontColor,Ae=this.data.defaultAppearanceData.fontSize||9,Le=re.style,Ve=function(Re){return Math.round(10*Re)/10};if(this.data.multiLine){var Fe=Math.abs(this.data.rect[3]-this.data.rect[1]-2),De=Fe/(Math.round(Fe/(o.LINE_FACTOR*Ae))||1);_e=Math.min(Ae,Ve(De/o.LINE_FACTOR))}else{var We=Math.abs(this.data.rect[3]-this.data.rect[1]-2);_e=Math.min(Ae,Ve(We/o.LINE_FACTOR))}Le.fontSize="calc(".concat(_e,"px * var(--scale-factor))"),Le.color=o.Util.makeHexColor(be[0],be[1],be[2]),this.data.textAlignment!==null&&(Le.textAlign=["left","center","right"][this.data.textAlignment])}},{key:"_setRequired",value:function(re,_e){_e?re.setAttribute("required",!0):re.removeAttribute("required"),re.setAttribute("aria-required",_e)}}]),fe}(k),N=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){_classCallCheck(this,fe);var _e=re.renderForms||!re.data.hasAppearance&&!!re.data.fieldValue;return J.call(this,re,{isRenderable:_e})}return _createClass(fe,[{key:"setPropertyOnSiblings",value:function(re,_e,be,Ae){var Le,Ve=this.annotationStorage,Fe=_createForOfIteratorHelper(this._getElementsByName(re.name,re.id));try{for(Fe.s();!(Le=Fe.n()).done;){var De=Le.value;De.domElement&&(De.domElement[_e]=be),Ve.setValue(De.id,_defineProperty$1({},Ae,be))}}catch(We){Fe.e(We)}finally{Fe.f()}}},{key:"render",value:function(){var re=this,_e=this.annotationStorage,be=this.data.id;this.container.classList.add("textWidgetAnnotation");var Ae=null;if(this.renderForms){var Le=_e.getValue(be,{value:this.data.fieldValue}),Ve=Le.formattedValue||Le.value||"",Fe=_e.getValue(be,{charLimit:this.data.maxLen}).charLimit;Fe&&Ve.length>Fe&&(Ve=Ve.slice(0,Fe));var De={userValue:Ve,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?((Ae=document.createElement("textarea")).textContent=Ve,this.data.doNotScroll&&(Ae.style.overflowY="hidden")):((Ae=document.createElement("input")).type="text",Ae.setAttribute("value",Ve),this.data.doNotScroll&&(Ae.style.overflowX="hidden")),y.add(Ae),Ae.setAttribute("data-element-id",be),Ae.disabled=this.data.readOnly,Ae.name=this.data.fieldName,Ae.tabIndex=g,this._setRequired(Ae,this.data.required),Fe&&(Ae.maxLength=Fe),Ae.addEventListener("input",function(Xe){_e.setValue(be,{value:Xe.target.value}),re.setPropertyOnSiblings(Ae,"value",Xe.target.value,"value")}),Ae.addEventListener("resetform",function(Xe){var at,ut=(at=re.data.defaultFieldValue)!==null&&at!==void 0?at:"";Ae.value=De.userValue=ut,De.formattedValue=null});var We=function(Xe){var at=De.formattedValue;at!=null&&(Xe.target.value=at),Xe.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var Re;Ae.addEventListener("focus",function(Xe){var at=Xe.target;De.userValue&&(at.value=De.userValue),De.lastCommittedValue=at.value,De.commitKey=1}),Ae.addEventListener("updatefromsandbox",function(Xe){var at={value:function(ut){var ct;De.userValue=(ct=ut.detail.value)!==null&&ct!==void 0?ct:"",_e.setValue(be,{value:De.userValue.toString()}),ut.target.value=De.userValue},formattedValue:function(ut){var ct=ut.detail.formattedValue;De.formattedValue=ct,ct!=null&&ut.target!==document.activeElement&&(ut.target.value=ct),_e.setValue(be,{formattedValue:ct})},selRange:function(ut){var ct;(ct=ut.target).setSelectionRange.apply(ct,_toConsumableArray$1(ut.detail.selRange))},charLimit:function(ut){var ct,mt=ut.detail.charLimit,pt=ut.target;if(mt!==0){pt.setAttribute("maxLength",mt);var kt=De.userValue;!kt||kt.length<=mt||(kt=kt.slice(0,mt),pt.value=De.userValue=kt,_e.setValue(be,{value:kt}),(ct=re.linkService.eventBus)===null||ct===void 0||ct.dispatch("dispatcheventinsandbox",{source:re,detail:{id:be,name:"Keystroke",value:kt,willCommit:!0,commitKey:1,selStart:pt.selectionStart,selEnd:pt.selectionEnd}}))}else pt.removeAttribute("maxLength")}};re._dispatchEventFromSandbox(at,Xe)}),Ae.addEventListener("keydown",function(Xe){var at;De.commitKey=1;var ut=-1;if(Xe.key==="Escape"?ut=0:Xe.key!=="Enter"||re.data.multiLine?Xe.key==="Tab"&&(De.commitKey=3):ut=2,ut!==-1){var ct=Xe.target.value;De.lastCommittedValue!==ct&&(De.lastCommittedValue=ct,De.userValue=ct,(at=re.linkService.eventBus)===null||at===void 0||at.dispatch("dispatcheventinsandbox",{source:re,detail:{id:be,name:"Keystroke",value:ct,willCommit:!0,commitKey:ut,selStart:Xe.target.selectionStart,selEnd:Xe.target.selectionEnd}}))}});var He=We;We=null,Ae.addEventListener("blur",function(Xe){if(Xe.relatedTarget){var at,ut=Xe.target.value;De.userValue=ut,De.lastCommittedValue!==ut&&((at=re.linkService.eventBus)===null||at===void 0||at.dispatch("dispatcheventinsandbox",{source:re,detail:{id:be,name:"Keystroke",value:ut,willCommit:!0,commitKey:De.commitKey,selStart:Xe.target.selectionStart,selEnd:Xe.target.selectionEnd}})),He(Xe)}}),(Re=this.data.actions)!==null&&Re!==void 0&&Re.Keystroke&&Ae.addEventListener("beforeinput",function(Xe){var at;De.lastCommittedValue=null;var ut=Xe.data,ct=Xe.target,mt=ct.value,pt=ct.selectionStart,kt=ct.selectionEnd,Ct=pt,ht=kt;switch(Xe.inputType){case"deleteWordBackward":var Pt=mt.substring(0,pt).match(/\w*[^\w]*$/);Pt&&(Ct-=Pt[0].length);break;case"deleteWordForward":var Ue=mt.substring(pt).match(/^[^\w]*\w*/);Ue&&(ht+=Ue[0].length);break;case"deleteContentBackward":pt===kt&&(Ct-=1);break;case"deleteContentForward":pt===kt&&(ht+=1)}Xe.preventDefault(),(at=re.linkService.eventBus)===null||at===void 0||at.dispatch("dispatcheventinsandbox",{source:re,detail:{id:be,name:"Keystroke",value:mt,change:ut||"",willCommit:!1,selStart:Ct,selEnd:ht}})}),this._setEventListeners(Ae,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(Xe){return Xe.target.value})}if(We&&Ae.addEventListener("blur",We),this.data.comb){var Ze=(this.data.rect[2]-this.data.rect[0])/Fe;Ae.classList.add("comb"),Ae.style.letterSpacing="calc(".concat(Ze,"px * var(--scale-factor) - 1ch)")}}else(Ae=document.createElement("div")).textContent=this.data.fieldValue,Ae.style.verticalAlign="middle",Ae.style.display="table-cell";return this._setTextStyle(Ae),this._setBackgroundColor(Ae),this._setDefaultPropertiesFromJS(Ae),this.container.append(Ae),this.container}}]),fe}(O),D=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){return _classCallCheck(this,fe),J.call(this,re,{isRenderable:re.renderForms})}return _createClass(fe,[{key:"render",value:function(){var re=this,_e=this.annotationStorage,be=this.data,Ae=be.id,Le=_e.getValue(Ae,{value:be.exportValue===be.fieldValue}).value;typeof Le=="string"&&(Le=Le!=="Off",_e.setValue(Ae,{value:Le})),this.container.classList.add("buttonWidgetAnnotation","checkBox");var Ve=document.createElement("input");return y.add(Ve),Ve.setAttribute("data-element-id",Ae),Ve.disabled=be.readOnly,this._setRequired(Ve,this.data.required),Ve.type="checkbox",Ve.name=be.fieldName,Le&&Ve.setAttribute("checked",!0),Ve.setAttribute("exportValue",be.exportValue),Ve.tabIndex=g,Ve.addEventListener("change",function(Fe){var De,We=Fe.target,Re=We.name,He=We.checked,Ze=_createForOfIteratorHelper(re._getElementsByName(Re,Ae));try{for(Ze.s();!(De=Ze.n()).done;){var Xe=De.value,at=He&&Xe.exportValue===be.exportValue;Xe.domElement&&(Xe.domElement.checked=at),_e.setValue(Xe.id,{value:at})}}catch(ut){Ze.e(ut)}finally{Ze.f()}_e.setValue(Ae,{value:He})}),Ve.addEventListener("resetform",function(Fe){var De=be.defaultFieldValue||"Off";Fe.target.checked=De===be.exportValue}),this.enableScripting&&this.hasJSActions&&(Ve.addEventListener("updatefromsandbox",function(Fe){var De={value:function(We){We.target.checked=We.detail.value!=="Off",_e.setValue(Ae,{value:We.target.checked})}};re._dispatchEventFromSandbox(De,Fe)}),this._setEventListeners(Ve,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(Fe){return Fe.target.checked})),this._setBackgroundColor(Ve),this._setDefaultPropertiesFromJS(Ve),this.container.append(Ve),this.container}}]),fe}(O),X=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){return _classCallCheck(this,fe),J.call(this,re,{isRenderable:re.renderForms})}return _createClass(fe,[{key:"render",value:function(){var re=this;this.container.classList.add("buttonWidgetAnnotation","radioButton");var _e=this.annotationStorage,be=this.data,Ae=be.id,Le=_e.getValue(Ae,{value:be.fieldValue===be.buttonValue}).value;typeof Le=="string"&&(Le=Le!==be.buttonValue,_e.setValue(Ae,{value:Le}));var Ve=document.createElement("input");if(y.add(Ve),Ve.setAttribute("data-element-id",Ae),Ve.disabled=be.readOnly,this._setRequired(Ve,this.data.required),Ve.type="radio",Ve.name=be.fieldName,Le&&Ve.setAttribute("checked",!0),Ve.tabIndex=g,Ve.addEventListener("change",function(De){var We,Re=De.target,He=Re.name,Ze=Re.checked,Xe=_createForOfIteratorHelper(re._getElementsByName(He,Ae));try{for(Xe.s();!(We=Xe.n()).done;){var at=We.value;_e.setValue(at.id,{value:!1})}}catch(ut){Xe.e(ut)}finally{Xe.f()}_e.setValue(Ae,{value:Ze})}),Ve.addEventListener("resetform",function(De){var We=be.defaultFieldValue;De.target.checked=We!=null&&We===be.buttonValue}),this.enableScripting&&this.hasJSActions){var Fe=be.buttonValue;Ve.addEventListener("updatefromsandbox",function(De){var We={value:function(Re){var He,Ze=Fe===Re.detail.value,Xe=_createForOfIteratorHelper(re._getElementsByName(Re.target.name));try{for(Xe.s();!(He=Xe.n()).done;){var at=He.value,ut=Ze&&at.id===Ae;at.domElement&&(at.domElement.checked=ut),_e.setValue(at.id,{value:ut})}}catch(ct){Xe.e(ct)}finally{Xe.f()}}};re._dispatchEventFromSandbox(We,De)}),this._setEventListeners(Ve,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(De){return De.target.checked})}return this._setBackgroundColor(Ve),this._setDefaultPropertiesFromJS(Ve),this.container.append(Ve),this.container}}]),fe}(O),U=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){return _classCallCheck(this,fe),J.call(this,re,{ignoreBorder:re.data.hasAppearance})}return _createClass(fe,[{key:"render",value:function(){var re=this,_e=_get(_getPrototypeOf(fe.prototype),"render",this).call(this);_e.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(_e.title=this.data.alternativeText);var be=_e.lastChild;return this.enableScripting&&this.hasJSActions&&be&&(this._setDefaultPropertiesFromJS(be),be.addEventListener("updatefromsandbox",function(Ae){re._dispatchEventFromSandbox({},Ae)})),_e}}]),fe}(T),Z=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){return _classCallCheck(this,fe),J.call(this,re,{isRenderable:re.renderForms})}return _createClass(fe,[{key:"render",value:function(){var re=this;this.container.classList.add("choiceWidgetAnnotation");var _e=this.annotationStorage,be=this.data.id,Ae=_e.getValue(be,{value:this.data.fieldValue}),Le=document.createElement("select");y.add(Le),Le.setAttribute("data-element-id",be),Le.disabled=this.data.readOnly,this._setRequired(Le,this.data.required),Le.name=this.data.fieldName,Le.tabIndex=g;var Ve=this.data.combo&&this.data.options.length>0;this.data.combo||(Le.size=this.data.options.length,this.data.multiSelect&&(Le.multiple=!0)),Le.addEventListener("resetform",function(ct){var mt,pt=re.data.defaultFieldValue,kt=_createForOfIteratorHelper(Le.options);try{for(kt.s();!(mt=kt.n()).done;){var Ct=mt.value;Ct.selected=Ct.value===pt}}catch(ht){kt.e(ht)}finally{kt.f()}});var Fe,De=_createForOfIteratorHelper(this.data.options);try{for(De.s();!(Fe=De.n()).done;){var We=Fe.value,Re=document.createElement("option");Re.textContent=We.displayValue,Re.value=We.exportValue,Ae.value.includes(We.exportValue)&&(Re.setAttribute("selected",!0),Ve=!1),Le.append(Re)}}catch(ct){De.e(ct)}finally{De.f()}var He=null;if(Ve){var Ze=document.createElement("option");Ze.value=" ",Ze.setAttribute("hidden",!0),Ze.setAttribute("selected",!0),Le.prepend(Ze),He=function(){Ze.remove(),Le.removeEventListener("input",He),He=null},Le.addEventListener("input",He)}var Xe=function(ct){var mt=ct?"value":"textContent",pt=Le.options;return Le.multiple?Array.prototype.filter.call(pt,function(kt){return kt.selected}).map(function(kt){return kt[mt]}):pt.selectedIndex===-1?null:pt[pt.selectedIndex][mt]},at=Xe(!1),ut=function(ct){var mt=ct.target.options;return Array.prototype.map.call(mt,function(pt){return{displayValue:pt.textContent,exportValue:pt.value}})};return this.enableScripting&&this.hasJSActions?(Le.addEventListener("updatefromsandbox",function(ct){var mt={value:function(pt){var kt;(kt=He)===null||kt===void 0||kt();var Ct,ht=pt.detail.value,Pt=new Set(Array.isArray(ht)?ht:[ht]),Ue=_createForOfIteratorHelper(Le.options);try{for(Ue.s();!(Ct=Ue.n()).done;){var qe=Ct.value;qe.selected=Pt.has(qe.value)}}catch(Ye){Ue.e(Ye)}finally{Ue.f()}_e.setValue(be,{value:Xe(!0)}),at=Xe(!1)},multipleSelection:function(pt){Le.multiple=!0},remove:function(pt){var kt=Le.options,Ct=pt.detail.remove;if(kt[Ct].selected=!1,Le.remove(Ct),kt.length>0){var ht=Array.prototype.findIndex.call(kt,function(Pt){return Pt.selected});ht===-1&&(kt[0].selected=!0)}_e.setValue(be,{value:Xe(!0),items:ut(pt)}),at=Xe(!1)},clear:function(pt){for(;Le.length!==0;)Le.remove(0);_e.setValue(be,{value:null,items:[]}),at=Xe(!1)},insert:function(pt){var kt=pt.detail.insert,Ct=kt.index,ht=kt.displayValue,Pt=kt.exportValue,Ue=Le.children[Ct],qe=document.createElement("option");qe.textContent=ht,qe.value=Pt,Ue?Ue.before(qe):Le.append(qe),_e.setValue(be,{value:Xe(!0),items:ut(pt)}),at=Xe(!1)},items:function(pt){for(var kt=pt.detail.items;Le.length!==0;)Le.remove(0);var Ct,ht=_createForOfIteratorHelper(kt);try{for(ht.s();!(Ct=ht.n()).done;){var Pt=Ct.value,Ue=Pt.displayValue,qe=Pt.exportValue,Ye=document.createElement("option");Ye.textContent=Ue,Ye.value=qe,Le.append(Ye)}}catch(st){ht.e(st)}finally{ht.f()}Le.options.length>0&&(Le.options[0].selected=!0),_e.setValue(be,{value:Xe(!0),items:ut(pt)}),at=Xe(!1)},indices:function(pt){var kt,Ct=new Set(pt.detail.indices),ht=_createForOfIteratorHelper(pt.target.options);try{for(ht.s();!(kt=ht.n()).done;){var Pt=kt.value;Pt.selected=Ct.has(Pt.index)}}catch(Ue){ht.e(Ue)}finally{ht.f()}_e.setValue(be,{value:Xe(!0)}),at=Xe(!1)},editable:function(pt){pt.target.disabled=!pt.detail.editable}};re._dispatchEventFromSandbox(mt,ct)}),Le.addEventListener("input",function(ct){var mt,pt=Xe(!0);_e.setValue(be,{value:pt}),ct.preventDefault(),(mt=re.linkService.eventBus)===null||mt===void 0||mt.dispatch("dispatcheventinsandbox",{source:re,detail:{id:be,name:"Keystroke",value:at,changeEx:pt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Le,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],function(ct){return ct.target.value})):Le.addEventListener("input",function(ct){_e.setValue(be,{value:Xe(!0)})}),this.data.combo&&this._setTextStyle(Le),this._setBackgroundColor(Le),this._setDefaultPropertiesFromJS(Le),this.container.append(Le),this.container}}]),fe}(O),j=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){var _e,be,Ae;_classCallCheck(this,fe);var Le=re.data,Ve=!fe.IGNORE_TYPES.has(Le.parentType)&&!!((_e=Le.titleObj)!==null&&_e!==void 0&&_e.str||(be=Le.contentsObj)!==null&&be!==void 0&&be.str||(Ae=Le.richText)!==null&&Ae!==void 0&&Ae.str);return J.call(this,re,{isRenderable:Ve})}return _createClass(fe,[{key:"render",value:function(){this.container.classList.add("popupAnnotation");var re=this.layer.querySelectorAll('[data-annotation-id="'.concat(this.data.parentId,'"]'));if(re.length===0)return this.container;var _e=new Q({container:this.container,trigger:Array.from(re),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),be=this.page,Ae=o.Util.normalizeRect([this.data.parentRect[0],be.view[3]-this.data.parentRect[1]+be.view[1],this.data.parentRect[2],be.view[3]-this.data.parentRect[3]+be.view[1]]),Le=Ae[0]+this.data.parentRect[2]-this.data.parentRect[0],Ve=Ae[1],Fe=this.viewport.rawDims,De=Fe.pageWidth,We=Fe.pageHeight,Re=Fe.pageX,He=Fe.pageY;return this.container.style.left="".concat(100*(Le-Re)/De,"%"),this.container.style.top="".concat(100*(Ve-He)/We,"%"),this.container.append(_e.render()),this.container}}]),fe}(k);_defineProperty$1(j,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));var Q=function(){function Ne(J){_classCallCheck(this,Ne),this.container=J.container,this.trigger=J.trigger,this.color=J.color,this.titleObj=J.titleObj,this.modificationDate=J.modificationDate,this.contentsObj=J.contentsObj,this.richText=J.richText,this.hideWrapper=J.hideWrapper||!1,this.pinned=!1}return _createClass(Ne,[{key:"render",value:function(){var J,fe,re=document.createElement("div");re.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?re:this.container,this.hideElement.hidden=!0;var _e=document.createElement("div");_e.classList.add("popup");var be=this.color;if(be){var Ae=.7*(255-be[0])+be[0],Le=.7*(255-be[1])+be[1],Ve=.7*(255-be[2])+be[2];_e.style.backgroundColor=o.Util.makeHexColor(0|Ae,0|Le,0|Ve)}var Fe=document.createElement("h1");Fe.dir=this.titleObj.dir,Fe.textContent=this.titleObj.str,_e.append(Fe);var De=s.PDFDateString.toDateObject(this.modificationDate);if(De){var We=document.createElement("span");We.classList.add("popupDate"),We.textContent="{{date}}, {{time}}",We.dataset.l10nId="annotation_date_string",We.dataset.l10nArgs=JSON.stringify({date:De.toLocaleDateString(),time:De.toLocaleTimeString()}),_e.append(We)}if((J=this.richText)===null||J===void 0||!J.str||(fe=this.contentsObj)!==null&&fe!==void 0&&fe.str&&this.contentsObj.str!==this.richText.str){var Re=this._formatContents(this.contentsObj);_e.append(Re)}else f.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:_e}),_e.lastChild.classList.add("richText","popupContent");Array.isArray(this.trigger)||(this.trigger=[this.trigger]);var He,Ze=_createForOfIteratorHelper(this.trigger);try{for(Ze.s();!(He=Ze.n()).done;){var Xe=He.value;Xe.addEventListener("click",this._toggle.bind(this)),Xe.addEventListener("mouseover",this._show.bind(this,!1)),Xe.addEventListener("mouseout",this._hide.bind(this,!1))}}catch(at){Ze.e(at)}finally{Ze.f()}return _e.addEventListener("click",this._hide.bind(this,!0)),re.append(_e),re}},{key:"_formatContents",value:function(J){var fe=J.str,re=J.dir,_e=document.createElement("p");_e.classList.add("popupContent"),_e.dir=re;for(var be=fe.split(/(?:\r\n?|\n)/),Ae=0,Le=be.length;Ae<Le;++Ae){var Ve=be[Ae];_e.append(document.createTextNode(Ve)),Ae<Le-1&&_e.append(document.createElement("br"))}return _e}},{key:"_toggle",value:function(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function(){arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}},{key:"_hide",value:function(){(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(this.pinned=!1),this.hideElement.hidden||this.pinned||(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}]),Ne}(),ve=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){var _e,be,Ae,Le;_classCallCheck(this,fe);var Ve=!!(re.data.hasPopup||(be=re.data.titleObj)!==null&&be!==void 0&&be.str||(Ae=re.data.contentsObj)!==null&&Ae!==void 0&&Ae.str||(Le=re.data.richText)!==null&&Le!==void 0&&Le.str);return(_e=J.call(this,re,{isRenderable:Ve,ignoreBorder:!0})).textContent=re.data.textContent,_e}return _createClass(fe,[{key:"render",value:function(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){var re=document.createElement("div");re.classList.add("annotationTextContent"),re.setAttribute("role","comment");var _e,be=_createForOfIteratorHelper(this.textContent);try{for(be.s();!(_e=be.n()).done;){var Ae=_e.value,Le=document.createElement("span");Le.textContent=Ae,re.append(Le)}}catch(Ve){be.e(Ve)}finally{be.f()}this.container.append(re)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),fe}(k),Se=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){var _e,be,Ae;_classCallCheck(this,fe);var Le=!!(re.data.hasPopup||(_e=re.data.titleObj)!==null&&_e!==void 0&&_e.str||(be=re.data.contentsObj)!==null&&be!==void 0&&be.str||(Ae=re.data.richText)!==null&&Ae!==void 0&&Ae.str);return J.call(this,re,{isRenderable:Le,ignoreBorder:!0})}return _createClass(fe,[{key:"render",value:function(){this.container.classList.add("lineAnnotation");var re=this.data,_e=w(re.rect),be=_e.width,Ae=_e.height,Le=this.svgFactory.create(be,Ae,!0),Ve=this.svgFactory.createElement("svg:line");return Ve.setAttribute("x1",re.rect[2]-re.lineCoordinates[0]),Ve.setAttribute("y1",re.rect[3]-re.lineCoordinates[1]),Ve.setAttribute("x2",re.rect[2]-re.lineCoordinates[2]),Ve.setAttribute("y2",re.rect[3]-re.lineCoordinates[3]),Ve.setAttribute("stroke-width",re.borderStyle.width||1),Ve.setAttribute("stroke","transparent"),Ve.setAttribute("fill","transparent"),Le.append(Ve),this.container.append(Le),this._createPopup(Ve,re),this.container}}]),fe}(k),we=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){var _e,be,Ae;_classCallCheck(this,fe);var Le=!!(re.data.hasPopup||(_e=re.data.titleObj)!==null&&_e!==void 0&&_e.str||(be=re.data.contentsObj)!==null&&be!==void 0&&be.str||(Ae=re.data.richText)!==null&&Ae!==void 0&&Ae.str);return J.call(this,re,{isRenderable:Le,ignoreBorder:!0})}return _createClass(fe,[{key:"render",value:function(){this.container.classList.add("squareAnnotation");var re=this.data,_e=w(re.rect),be=_e.width,Ae=_e.height,Le=this.svgFactory.create(be,Ae,!0),Ve=re.borderStyle.width,Fe=this.svgFactory.createElement("svg:rect");return Fe.setAttribute("x",Ve/2),Fe.setAttribute("y",Ve/2),Fe.setAttribute("width",be-Ve),Fe.setAttribute("height",Ae-Ve),Fe.setAttribute("stroke-width",Ve||1),Fe.setAttribute("stroke","transparent"),Fe.setAttribute("fill","transparent"),Le.append(Fe),this.container.append(Le),this._createPopup(Fe,re),this.container}}]),fe}(k),oe=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){var _e,be,Ae;_classCallCheck(this,fe);var Le=!!(re.data.hasPopup||(_e=re.data.titleObj)!==null&&_e!==void 0&&_e.str||(be=re.data.contentsObj)!==null&&be!==void 0&&be.str||(Ae=re.data.richText)!==null&&Ae!==void 0&&Ae.str);return J.call(this,re,{isRenderable:Le,ignoreBorder:!0})}return _createClass(fe,[{key:"render",value:function(){this.container.classList.add("circleAnnotation");var re=this.data,_e=w(re.rect),be=_e.width,Ae=_e.height,Le=this.svgFactory.create(be,Ae,!0),Ve=re.borderStyle.width,Fe=this.svgFactory.createElement("svg:ellipse");return Fe.setAttribute("cx",be/2),Fe.setAttribute("cy",Ae/2),Fe.setAttribute("rx",be/2-Ve/2),Fe.setAttribute("ry",Ae/2-Ve/2),Fe.setAttribute("stroke-width",Ve||1),Fe.setAttribute("stroke","transparent"),Fe.setAttribute("fill","transparent"),Le.append(Fe),this.container.append(Le),this._createPopup(Fe,re),this.container}}]),fe}(k),ne=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){var _e,be,Ae,Le;_classCallCheck(this,fe);var Ve=!!(re.data.hasPopup||(be=re.data.titleObj)!==null&&be!==void 0&&be.str||(Ae=re.data.contentsObj)!==null&&Ae!==void 0&&Ae.str||(Le=re.data.richText)!==null&&Le!==void 0&&Le.str);return(_e=J.call(this,re,{isRenderable:Ve,ignoreBorder:!0})).containerClassName="polylineAnnotation",_e.svgElementName="svg:polyline",_e}return _createClass(fe,[{key:"render",value:function(){this.container.classList.add(this.containerClassName);var re,_e=this.data,be=w(_e.rect),Ae=be.width,Le=be.height,Ve=this.svgFactory.create(Ae,Le,!0),Fe=[],De=_createForOfIteratorHelper(_e.vertices);try{for(De.s();!(re=De.n()).done;){var We=re.value,Re=We.x-_e.rect[0],He=_e.rect[3]-We.y;Fe.push(Re+","+He)}}catch(Xe){De.e(Xe)}finally{De.f()}Fe=Fe.join(" ");var Ze=this.svgFactory.createElement(this.svgElementName);return Ze.setAttribute("points",Fe),Ze.setAttribute("stroke-width",_e.borderStyle.width||1),Ze.setAttribute("stroke","transparent"),Ze.setAttribute("fill","transparent"),Ve.append(Ze),this.container.append(Ve),this._createPopup(Ze,_e),this.container}}]),fe}(k),q=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){var _e;return _classCallCheck(this,fe),(_e=J.call(this,re)).containerClassName="polygonAnnotation",_e.svgElementName="svg:polygon",_e}return _createClass(fe)}(ne),H=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){var _e,be,Ae;_classCallCheck(this,fe);var Le=!!(re.data.hasPopup||(_e=re.data.titleObj)!==null&&_e!==void 0&&_e.str||(be=re.data.contentsObj)!==null&&be!==void 0&&be.str||(Ae=re.data.richText)!==null&&Ae!==void 0&&Ae.str);return J.call(this,re,{isRenderable:Le,ignoreBorder:!0})}return _createClass(fe,[{key:"render",value:function(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),fe}(k),Y=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){var _e,be,Ae,Le;_classCallCheck(this,fe);var Ve=!!(re.data.hasPopup||(be=re.data.titleObj)!==null&&be!==void 0&&be.str||(Ae=re.data.contentsObj)!==null&&Ae!==void 0&&Ae.str||(Le=re.data.richText)!==null&&Le!==void 0&&Le.str);return(_e=J.call(this,re,{isRenderable:Ve,ignoreBorder:!0})).containerClassName="inkAnnotation",_e.svgElementName="svg:polyline",_e}return _createClass(fe,[{key:"render",value:function(){this.container.classList.add(this.containerClassName);var re,_e=this.data,be=w(_e.rect),Ae=be.width,Le=be.height,Ve=this.svgFactory.create(Ae,Le,!0),Fe=_createForOfIteratorHelper(_e.inkLists);try{for(Fe.s();!(re=Fe.n()).done;){var De,We=re.value,Re=[],He=_createForOfIteratorHelper(We);try{for(He.s();!(De=He.n()).done;){var Ze=De.value,Xe=Ze.x-_e.rect[0],at=_e.rect[3]-Ze.y;Re.push("".concat(Xe,",").concat(at))}}catch(ct){He.e(ct)}finally{He.f()}Re=Re.join(" ");var ut=this.svgFactory.createElement(this.svgElementName);ut.setAttribute("points",Re),ut.setAttribute("stroke-width",_e.borderStyle.width||1),ut.setAttribute("stroke","transparent"),ut.setAttribute("fill","transparent"),this._createPopup(ut,_e),Ve.append(ut)}}catch(ct){Fe.e(ct)}finally{Fe.f()}return this.container.append(Ve),this.container}}]),fe}(k),le=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){var _e,be,Ae;_classCallCheck(this,fe);var Le=!!(re.data.hasPopup||(_e=re.data.titleObj)!==null&&_e!==void 0&&_e.str||(be=re.data.contentsObj)!==null&&be!==void 0&&be.str||(Ae=re.data.richText)!==null&&Ae!==void 0&&Ae.str);return J.call(this,re,{isRenderable:Le,ignoreBorder:!0,createQuadrilaterals:!0})}return _createClass(fe,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}]),fe}(k),Ce=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){var _e,be,Ae;_classCallCheck(this,fe);var Le=!!(re.data.hasPopup||(_e=re.data.titleObj)!==null&&_e!==void 0&&_e.str||(be=re.data.contentsObj)!==null&&be!==void 0&&be.str||(Ae=re.data.richText)!==null&&Ae!==void 0&&Ae.str);return J.call(this,re,{isRenderable:Le,ignoreBorder:!0,createQuadrilaterals:!0})}return _createClass(fe,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}]),fe}(k),Te=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){var _e,be,Ae;_classCallCheck(this,fe);var Le=!!(re.data.hasPopup||(_e=re.data.titleObj)!==null&&_e!==void 0&&_e.str||(be=re.data.contentsObj)!==null&&be!==void 0&&be.str||(Ae=re.data.richText)!==null&&Ae!==void 0&&Ae.str);return J.call(this,re,{isRenderable:Le,ignoreBorder:!0,createQuadrilaterals:!0})}return _createClass(fe,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}]),fe}(k),ke=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){var _e,be,Ae;_classCallCheck(this,fe);var Le=!!(re.data.hasPopup||(_e=re.data.titleObj)!==null&&_e!==void 0&&_e.str||(be=re.data.contentsObj)!==null&&be!==void 0&&be.str||(Ae=re.data.richText)!==null&&Ae!==void 0&&Ae.str);return J.call(this,re,{isRenderable:Le,ignoreBorder:!0,createQuadrilaterals:!0})}return _createClass(fe,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}]),fe}(k),Ee=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){var _e,be,Ae;_classCallCheck(this,fe);var Le=!!(re.data.hasPopup||(_e=re.data.titleObj)!==null&&_e!==void 0&&_e.str||(be=re.data.contentsObj)!==null&&be!==void 0&&be.str||(Ae=re.data.richText)!==null&&Ae!==void 0&&Ae.str);return J.call(this,re,{isRenderable:Le,ignoreBorder:!0})}return _createClass(fe,[{key:"render",value:function(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),fe}(k),Pe=function(Ne){_inherits(fe,Ne);var J=_createSuper(fe);function fe(re){var _e,be;_classCallCheck(this,fe);var Ae=(_e=J.call(this,re,{isRenderable:!0})).data.file,Le=Ae.filename,Ve=Ae.content;return _e.filename=(0,s.getFilenameFromUrl)(Le,!0),_e.content=Ve,(be=_e.linkService.eventBus)===null||be===void 0||be.dispatch("fileattachmentannotation",{source:_assertThisInitialized(_e),filename:Le,content:Ve}),_e}return _createClass(fe,[{key:"render",value:function(){var re,_e,be;return this.container.classList.add("fileAttachmentAnnotation"),this.data.hasAppearance?be=document.createElement("div"):(be=document.createElement("img")).src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(this.data.name)?"paperclip":"pushpin",".svg"),be.classList.add("popupTriggerArea"),be.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((re=this.data.titleObj)!==null&&re!==void 0&&re.str||(_e=this.data.contentsObj)!==null&&_e!==void 0&&_e.str||this.data.richText)&&this._createPopup(be,this.data),this.container.append(be),this.container}},{key:"_download",value:function(){var re;(re=this.downloadManager)===null||re===void 0||re.openOrDownloadData(this.container,this.content,this.filename)}}]),fe}(k),Be=function(){function Ne(){_classCallCheck(this,Ne)}return _createClass(Ne,null,[{key:"render",value:function(J){var fe=J.annotations,re=J.div,_e=J.viewport,be=J.accessibilityManager;(0,s.setLayerDimensions)(re,_e);var Ae,Le={data:null,layer:re,page:J.page,viewport:_e,linkService:J.linkService,downloadManager:J.downloadManager,imageResourcesPath:J.imageResourcesPath||"",renderForms:J.renderForms!==!1,svgFactory:new s.DOMSVGFactory,annotationStorage:J.annotationStorage||new u.AnnotationStorage,enableScripting:J.enableScripting===!0,hasJSActions:J.hasJSActions,fieldObjects:J.fieldObjects},Ve=0,Fe=_createForOfIteratorHelper(fe);try{for(Fe.s();!(Ae=Fe.n()).done;){var De=Ae.value;if(!De.noHTML){if(De.annotationType!==o.AnnotationType.POPUP){var We=w(De.rect),Re=We.width,He=We.height;if(Re<=0||He<=0)continue}Le.data=De;var Ze=x.create(Le);if(Ze.isRenderable){var Xe=Ze.render();if(De.hidden&&(Xe.style.visibility="hidden"),Array.isArray(Xe)){var at,ut=_createForOfIteratorHelper(Xe);try{for(ut.s();!(at=ut.n()).done;){var ct=at.value;ct.style.zIndex=Ve++,v(Ne,Ne,$e).call(Ne,ct,De.id,re,be)}}catch(mt){ut.e(mt)}finally{ut.f()}}else Xe.style.zIndex=Ve++,Ze instanceof j?re.prepend(Xe):v(Ne,Ne,$e).call(Ne,Xe,De.id,re,be)}}}}catch(mt){Fe.e(mt)}finally{Fe.f()}v(this,Ne,Oe).call(this,re,J.annotationCanvasMap)}},{key:"update",value:function(J){var fe=J.annotationCanvasMap,re=J.div,_e=J.viewport;(0,s.setLayerDimensions)(re,{rotation:_e.rotation}),v(this,Ne,Oe).call(this,re,fe),re.hidden=!1}}]),Ne}();function $e(Ne,J,fe,re){var _e=Ne.firstChild||Ne;_e.id="".concat(s.AnnotationPrefix).concat(J),fe.append(Ne),re==null||re.moveElementInDOM(fe,Ne,_e,!1)}function Oe(Ne,J){if(J){var fe,re=_createForOfIteratorHelper(J);try{for(re.s();!(fe=re.n()).done;){var _e=_slicedToArray(fe.value,2),be=_e[0],Ae=_e[1],Le=Ne.querySelector('[data-annotation-id="'.concat(be,'"]'));if(Le){var Ve=Le.firstChild;Ve?Ve.nodeName==="CANVAS"?Ve.replaceWith(Ae):Ve.before(Ae):Le.append(Ae)}}}catch(Fe){re.e(Fe)}finally{re.f()}J.clear()}}n.AnnotationLayer=Be},function(e,n){function r(s){return Math.floor(255*Math.max(0,Math.min(1,s))).toString(16).padStart(2,"0")}Object.defineProperty(n,"__esModule",{value:!0}),n.ColorConverters=void 0;var o=function(){function s(){_classCallCheck(this,s)}return _createClass(s,null,[{key:"CMYK_G",value:function(u){var d=_slicedToArray(u,4),f=d[0],v=d[1],m=d[2],_=d[3];return["G",1-Math.min(1,.3*f+.59*m+.11*v+_)]}},{key:"G_CMYK",value:function(u){return["CMYK",0,0,0,1-_slicedToArray(u,1)[0]]}},{key:"G_RGB",value:function(u){var d=_slicedToArray(u,1)[0];return["RGB",d,d,d]}},{key:"G_HTML",value:function(u){var d=r(_slicedToArray(u,1)[0]);return"#".concat(d).concat(d).concat(d)}},{key:"RGB_G",value:function(u){var d=_slicedToArray(u,3);return["G",.3*d[0]+.59*d[1]+.11*d[2]]}},{key:"RGB_HTML",value:function(u){var d=_slicedToArray(u,3),f=d[0],v=d[1],m=d[2],_=r(f),g=r(v),y=r(m);return"#".concat(_).concat(g).concat(y)}},{key:"T_HTML",value:function(){return"#00000000"}},{key:"CMYK_RGB",value:function(u){var d=_slicedToArray(u,4),f=d[0],v=d[1],m=d[2],_=d[3];return["RGB",1-Math.min(1,f+_),1-Math.min(1,m+_),1-Math.min(1,v+_)]}},{key:"CMYK_HTML",value:function(u){var d=this.CMYK_RGB(u).slice(1);return this.RGB_HTML(d)}},{key:"RGB_CMYK",value:function(u){var d=_slicedToArray(u,3),f=1-d[0],v=1-d[1],m=1-d[2];return["CMYK",f,v,m,Math.min(f,v,m)]}}]),s}();n.ColorConverters=o},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.XfaLayer=void 0;var o=r(154),s=function(){function u(){_classCallCheck(this,u)}return _createClass(u,null,[{key:"setupStorage",value:function(d,f,v,m,_){var g=m.getValue(f,{value:null});switch(v.name){case"textarea":if(g.value!==null&&(d.textContent=g.value),_==="print")break;d.addEventListener("input",function(k){m.setValue(f,{value:k.target.value})});break;case"input":if(v.attributes.type==="radio"||v.attributes.type==="checkbox"){if(g.value===v.attributes.xfaOn?d.setAttribute("checked",!0):g.value===v.attributes.xfaOff&&d.removeAttribute("checked"),_==="print")break;d.addEventListener("change",function(k){m.setValue(f,{value:k.target.checked?k.target.getAttribute("xfaOn"):k.target.getAttribute("xfaOff")})})}else{if(g.value!==null&&d.setAttribute("value",g.value),_==="print")break;d.addEventListener("input",function(k){m.setValue(f,{value:k.target.value})})}break;case"select":if(g.value!==null){var y,w=_createForOfIteratorHelper(v.children);try{for(w.s();!(y=w.n()).done;){var x=y.value;x.attributes.value===g.value&&(x.attributes.selected=!0)}}catch(k){w.e(k)}finally{w.f()}}d.addEventListener("input",function(k){var S=k.target.options,E=S.selectedIndex===-1?"":S[S.selectedIndex].value;m.setValue(f,{value:E})})}}},{key:"setAttributes",value:function(d){var f=d.html,v=d.element,m=d.storage,_=m===void 0?null:m,g=d.intent,y=d.linkService,w=v.attributes,x=f instanceof HTMLAnchorElement;w.type==="radio"&&(w.name="".concat(w.name,"-").concat(g));for(var k=0,S=Object.entries(w);k<S.length;k++){var E=_slicedToArray(S[k],2),T=E[0],M=E[1];if(M!=null)switch(T){case"class":M.length&&f.setAttribute(T,M.join(" "));break;case"dataId":break;case"id":f.setAttribute("data-element-id",M);break;case"style":Object.assign(f.style,M);break;case"textContent":f.textContent=M;break;default:(!x||T!=="href"&&T!=="newWindow")&&f.setAttribute(T,M)}}x&&y.addLinkAttributes(f,w.href,w.newWindow),_&&w.dataId&&this.setupStorage(f,w.dataId,v,_)}},{key:"render",value:function(d){var f=d.annotationStorage,v=d.linkService,m=d.xfaHtml,_=d.intent||"display",g=document.createElement(m.name);m.attributes&&this.setAttributes({html:g,element:m,intent:_,linkService:v});var y=[[m,-1,g]],w=d.div;if(w.append(g),d.viewport){var x="matrix(".concat(d.viewport.transform.join(","),")");w.style.transform=x}_!=="richText"&&w.setAttribute("class","xfaLayer xfaFont");for(var k=[];y.length>0;){var S,E=_slicedToArray(y.at(-1),3),T=E[0],M=E[1],I=E[2];if(M+1!==T.children.length){var F=T.children[++y.at(-1)[1]];if(F!==null){var O=F.name;if(O!=="#text"){var N=void 0;if(N=F!=null&&(S=F.attributes)!==null&&S!==void 0&&S.xmlns?document.createElementNS(F.attributes.xmlns,O):document.createElement(O),I.append(N),F.attributes&&this.setAttributes({html:N,element:F,storage:f,intent:_,linkService:v}),F.children&&F.children.length>0)y.push([F,-1,N]);else if(F.value){var D=document.createTextNode(F.value);o.XfaText.shouldBuildText(O)&&k.push(D),N.append(D)}}else{var X=document.createTextNode(F.value);k.push(X),I.append(X)}}}else y.pop()}var U,Z=_createForOfIteratorHelper(w.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"));try{for(Z.s();!(U=Z.n()).done;)U.value.setAttribute("readOnly",!0)}catch(j){Z.e(j)}finally{Z.f()}return{textDivs:k}}},{key:"update",value:function(d){var f="matrix(".concat(d.viewport.transform.join(","),")");d.div.style.transform=f,d.div.hidden=!1}}]),u}();n.XfaLayer=s},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.SVGGraphics=void 0;var o=r(142),s=r(1),u=r(3),d=_createClass(function T(){_classCallCheck(this,T),(0,s.unreachable)("Not implemented: SVGGraphics")});n.SVGGraphics=d;var f=function(T){if(Number.isInteger(T))return T.toString();var M=T.toFixed(10),I=M.length-1;if(M[I]!=="0")return M;do I--;while(M[I]==="0");return M.substring(0,M[I]==="."?I:I+1)},v=function(T){if(T[4]===0&&T[5]===0){if(T[1]===0&&T[2]===0)return T[0]===1&&T[3]===1?"":"scale(".concat(f(T[0])," ").concat(f(T[3]),")");if(T[0]===T[3]&&T[1]===-T[2]){var M=180*Math.acos(T[0])/Math.PI;return"rotate(".concat(f(M),")")}}else if(T[0]===1&&T[1]===0&&T[2]===0&&T[3]===1)return"translate(".concat(f(T[4])," ").concat(f(T[5]),")");return"matrix(".concat(f(T[0])," ").concat(f(T[1])," ").concat(f(T[2])," ").concat(f(T[3])," ").concat(f(T[4])," ")+"".concat(f(T[5]),")")},m={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},_=["butt","round","square"],g=["miter","round","bevel"],y=function(T){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",I=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(URL.createObjectURL&&typeof Blob<"u"&&!I)return URL.createObjectURL(new Blob([T],{type:M}));for(var F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",O="data:".concat(M,";base64,"),N=0,D=T.length;N<D;N+=3){var X=255&T[N],U=255&T[N+1],Z=255&T[N+2];O+=F[X>>2]+F[(3&X)<<4|U>>4]+F[N+1<D?(15&U)<<2|Z>>6:64]+F[N+2<D?63&Z:64]}return O},w=function(){for(var T=new Uint8Array([137,80,78,71,13,10,26,10]),M=new Int32Array(256),I=0;I<256;I++){for(var F=I,O=0;O<8;O++)F=1&F?3988292384^F>>1&2147483647:F>>1&2147483647;M[I]=F}function N(U,Z,j,Q){var ve=Q,Se=Z.length;j[ve]=Se>>24&255,j[ve+1]=Se>>16&255,j[ve+2]=Se>>8&255,j[ve+3]=255&Se,j[ve+=4]=255&U.charCodeAt(0),j[ve+1]=255&U.charCodeAt(1),j[ve+2]=255&U.charCodeAt(2),j[ve+3]=255&U.charCodeAt(3),ve+=4,j.set(Z,ve);var we=function(oe,ne,q){for(var H=-1,Y=ne;Y<q;Y++){var le=255&(H^oe[Y]);H=H>>>8^M[le]}return-1^H}(j,Q+4,ve+=Z.length);j[ve]=we>>24&255,j[ve+1]=we>>16&255,j[ve+2]=we>>8&255,j[ve+3]=255&we}function D(U){var Z=U.length,j=65535,Q=Math.ceil(Z/j),ve=new Uint8Array(2+Z+5*Q+4),Se=0;ve[Se++]=120,ve[Se++]=156;for(var we=0;Z>j;)ve[Se++]=0,ve[Se++]=255,ve[Se++]=255,ve[Se++]=0,ve[Se++]=0,ve.set(U.subarray(we,we+j),Se),Se+=j,we+=j,Z-=j;ve[Se++]=1,ve[Se++]=255&Z,ve[Se++]=Z>>8&255,ve[Se++]=255&~Z,ve[Se++]=(65535&~Z)>>8&255,ve.set(U.subarray(we),Se),Se+=U.length-we;var oe=function(ne,q,H){for(var Y=1,le=0,Ce=q;Ce<H;++Ce)le=(le+(Y=(Y+(255&ne[Ce]))%65521))%65521;return le<<16|Y}(U,0,U.length);return ve[Se++]=oe>>24&255,ve[Se++]=oe>>16&255,ve[Se++]=oe>>8&255,ve[Se++]=255&oe,ve}function X(U,Z,j,Q){var ve,Se,we,oe=U.width,ne=U.height,q=U.data;switch(Z){case s.ImageKind.GRAYSCALE_1BPP:Se=0,ve=1,we=oe+7>>3;break;case s.ImageKind.RGB_24BPP:Se=2,ve=8,we=3*oe;break;case s.ImageKind.RGBA_32BPP:Se=6,ve=8,we=4*oe;break;default:throw new Error("invalid format")}for(var H=new Uint8Array((1+we)*ne),Y=0,le=0,Ce=0;Ce<ne;++Ce)H[Y++]=0,H.set(q.subarray(le,le+we),Y),le+=we,Y+=we;if(Z===s.ImageKind.GRAYSCALE_1BPP&&Q){Y=0;for(var Te=0;Te<ne;Te++){Y++;for(var ke=0;ke<we;ke++)H[Y++]^=255}}var Ee=new Uint8Array([oe>>24&255,oe>>16&255,oe>>8&255,255&oe,ne>>24&255,ne>>16&255,ne>>8&255,255&ne,ve,Se,0,0,0]),Pe=function(Ne){if(!u.isNodeJS)return D(Ne);try{var J;J=parseInt(process.versions.node)>=8?Ne:Buffer.from(Ne);var fe=require$$0.deflateSync(J,{level:9});return fe instanceof Uint8Array?fe:new Uint8Array(fe)}catch(re){(0,s.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+re)}return D(Ne)}(H),Be=T.length+36+Ee.length+Pe.length,$e=new Uint8Array(Be),Oe=0;return $e.set(T,Oe),N("IHDR",Ee,$e,Oe+=T.length),N("IDATA",Pe,$e,Oe+=12+Ee.length),Oe+=12+Pe.length,N("IEND",new Uint8Array(0),$e,Oe),y($e,"image/png",j)}return function(U,Z,j){return X(U,U.kind===void 0?s.ImageKind.GRAYSCALE_1BPP:U.kind,Z,j)}}(),x=function(){function T(){_classCallCheck(this,T),this.fontSizeScale=1,this.fontWeight=m.fontWeight,this.fontSize=0,this.textMatrix=s.IDENTITY_MATRIX,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=s.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=m.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}return _createClass(T,[{key:"clone",value:function(){return Object.create(this)}},{key:"setCurrentPoint",value:function(M,I){this.x=M,this.y=I}}]),T}(),k=0,S=0,E=0;n.SVGGraphics=d=function(){function T(M,I){_classCallCheck(this,T);var F=arguments.length>2&&arguments[2]!==void 0&&arguments[2];for(var O in(0,o.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new o.DOMSVGFactory,this.current=new x,this.transformMatrix=s.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=M,this.objs=I,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!F,this._operatorIdMapping=[],s.OPS)this._operatorIdMapping[s.OPS[O]]=O}return _createClass(T,[{key:"getObject",value:function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof M=="string"?M.startsWith("g_")?this.commonObjs.get(M):this.objs.get(M):I}},{key:"save",value:function(){this.transformStack.push(this.transformMatrix);var M=this.current;this.extraStack.push(M),this.current=M.clone()}},{key:"restore",value:function(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}},{key:"group",value:function(M){this.save(),this.executeOpTree(M),this.restore()}},{key:"loadDependencies",value:function(M){for(var I=this,F=M.fnArray,O=M.argsArray,N=0,D=F.length;N<D;N++)if(F[N]===s.OPS.dependency){var X,U=_createForOfIteratorHelper(O[N]);try{var Z=function(){var j=X.value,Q=j.startsWith("g_")?I.commonObjs:I.objs,ve=new Promise(function(Se){Q.get(j,Se)});I.current.dependencies.push(ve)};for(U.s();!(X=U.n()).done;)Z()}catch(j){U.e(j)}finally{U.f()}}return Promise.all(this.current.dependencies)}},{key:"transform",value:function(M,I,F,O,N,D){var X=[M,I,F,O,N,D];this.transformMatrix=s.Util.transform(this.transformMatrix,X),this.tgrp=null}},{key:"getSVG",value:function(M,I){var F=this;this.viewport=I;var O=this._initialize(I);return this.loadDependencies(M).then(function(){return F.transformMatrix=s.IDENTITY_MATRIX,F.executeOpTree(F.convertOpList(M)),O})}},{key:"convertOpList",value:function(M){for(var I=this._operatorIdMapping,F=M.argsArray,O=M.fnArray,N=[],D=0,X=O.length;D<X;D++){var U=O[D];N.push({fnId:U,fn:I[U],args:F[D]})}return function(Z){var j,Q=[],ve=[],Se=_createForOfIteratorHelper(Z);try{for(Se.s();!(j=Se.n()).done;){var we=j.value;we.fn!=="save"?we.fn==="restore"?Q=ve.pop():Q.push(we):(Q.push({fnId:92,fn:"group",items:[]}),ve.push(Q),Q=Q.at(-1).items)}}catch(oe){Se.e(oe)}finally{Se.f()}return Q}(N)}},{key:"executeOpTree",value:function(M){var I,F=_createForOfIteratorHelper(M);try{for(F.s();!(I=F.n()).done;){var O=I.value,N=O.fn,D=O.fnId,X=O.args;switch(0|D){case s.OPS.beginText:this.beginText();break;case s.OPS.dependency:break;case s.OPS.setLeading:this.setLeading(X);break;case s.OPS.setLeadingMoveText:this.setLeadingMoveText(X[0],X[1]);break;case s.OPS.setFont:this.setFont(X);break;case s.OPS.showText:case s.OPS.showSpacedText:this.showText(X[0]);break;case s.OPS.endText:this.endText();break;case s.OPS.moveText:this.moveText(X[0],X[1]);break;case s.OPS.setCharSpacing:this.setCharSpacing(X[0]);break;case s.OPS.setWordSpacing:this.setWordSpacing(X[0]);break;case s.OPS.setHScale:this.setHScale(X[0]);break;case s.OPS.setTextMatrix:this.setTextMatrix(X[0],X[1],X[2],X[3],X[4],X[5]);break;case s.OPS.setTextRise:this.setTextRise(X[0]);break;case s.OPS.setTextRenderingMode:this.setTextRenderingMode(X[0]);break;case s.OPS.setLineWidth:this.setLineWidth(X[0]);break;case s.OPS.setLineJoin:this.setLineJoin(X[0]);break;case s.OPS.setLineCap:this.setLineCap(X[0]);break;case s.OPS.setMiterLimit:this.setMiterLimit(X[0]);break;case s.OPS.setFillRGBColor:this.setFillRGBColor(X[0],X[1],X[2]);break;case s.OPS.setStrokeRGBColor:this.setStrokeRGBColor(X[0],X[1],X[2]);break;case s.OPS.setStrokeColorN:this.setStrokeColorN(X);break;case s.OPS.setFillColorN:this.setFillColorN(X);break;case s.OPS.shadingFill:this.shadingFill(X[0]);break;case s.OPS.setDash:this.setDash(X[0],X[1]);break;case s.OPS.setRenderingIntent:this.setRenderingIntent(X[0]);break;case s.OPS.setFlatness:this.setFlatness(X[0]);break;case s.OPS.setGState:this.setGState(X[0]);break;case s.OPS.fill:this.fill();break;case s.OPS.eoFill:this.eoFill();break;case s.OPS.stroke:this.stroke();break;case s.OPS.fillStroke:this.fillStroke();break;case s.OPS.eoFillStroke:this.eoFillStroke();break;case s.OPS.clip:this.clip("nonzero");break;case s.OPS.eoClip:this.clip("evenodd");break;case s.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case s.OPS.paintImageXObject:this.paintImageXObject(X[0]);break;case s.OPS.paintInlineImageXObject:this.paintInlineImageXObject(X[0]);break;case s.OPS.paintImageMaskXObject:this.paintImageMaskXObject(X[0]);break;case s.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(X[0],X[1]);break;case s.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case s.OPS.closePath:this.closePath();break;case s.OPS.closeStroke:this.closeStroke();break;case s.OPS.closeFillStroke:this.closeFillStroke();break;case s.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case s.OPS.nextLine:this.nextLine();break;case s.OPS.transform:this.transform(X[0],X[1],X[2],X[3],X[4],X[5]);break;case s.OPS.constructPath:this.constructPath(X[0],X[1]);break;case s.OPS.endPath:this.endPath();break;case 92:this.group(O.items);break;default:(0,s.warn)("Unimplemented operator ".concat(N))}}}catch(U){F.e(U)}finally{F.f()}}},{key:"setWordSpacing",value:function(M){this.current.wordSpacing=M}},{key:"setCharSpacing",value:function(M){this.current.charSpacing=M}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"setTextMatrix",value:function(M,I,F,O,N,D){var X=this.current;X.textMatrix=X.lineMatrix=[M,I,F,O,N,D],X.textMatrixScale=Math.hypot(M,I),X.x=X.lineX=0,X.y=X.lineY=0,X.xcoords=[],X.ycoords=[],X.tspan=this.svgFactory.createElement("svg:tspan"),X.tspan.setAttributeNS(null,"font-family",X.fontFamily),X.tspan.setAttributeNS(null,"font-size","".concat(f(X.fontSize),"px")),X.tspan.setAttributeNS(null,"y",f(-X.y)),X.txtElement=this.svgFactory.createElement("svg:text"),X.txtElement.append(X.tspan)}},{key:"beginText",value:function(){var M=this.current;M.x=M.lineX=0,M.y=M.lineY=0,M.textMatrix=s.IDENTITY_MATRIX,M.lineMatrix=s.IDENTITY_MATRIX,M.textMatrixScale=1,M.tspan=this.svgFactory.createElement("svg:tspan"),M.txtElement=this.svgFactory.createElement("svg:text"),M.txtgrp=this.svgFactory.createElement("svg:g"),M.xcoords=[],M.ycoords=[]}},{key:"moveText",value:function(M,I){var F=this.current;F.x=F.lineX+=M,F.y=F.lineY+=I,F.xcoords=[],F.ycoords=[],F.tspan=this.svgFactory.createElement("svg:tspan"),F.tspan.setAttributeNS(null,"font-family",F.fontFamily),F.tspan.setAttributeNS(null,"font-size","".concat(f(F.fontSize),"px")),F.tspan.setAttributeNS(null,"y",f(-F.y))}},{key:"showText",value:function(M){var I=this.current,F=I.font,O=I.fontSize;if(O!==0){var N,D=I.fontSizeScale,X=I.charSpacing,U=I.wordSpacing,Z=I.fontDirection,j=I.textHScale*Z,Q=F.vertical,ve=Q?1:-1,Se=F.defaultVMetrics,we=O*I.fontMatrix[0],oe=0,ne=_createForOfIteratorHelper(M);try{for(ne.s();!(N=ne.n()).done;){var q=N.value;if(q!==null)if(typeof q!="number"){var H=(q.isSpace?U:0)+X,Y=q.fontChar,le=void 0,Ce=void 0,Te=q.width;if(Q){var ke=void 0,Ee=q.vmetric||Se;ke=-(ke=q.vmetric?Ee[1]:.5*Te)*we;var Pe=Ee[2]*we;Te=Ee?-Ee[0]:Te,le=ke/D,Ce=(oe+Pe)/D}else le=oe/D,Ce=0;(q.isInFont||F.missingFile)&&(I.xcoords.push(I.x+le),Q&&I.ycoords.push(-I.y+Ce),I.tspan.textContent+=Y),oe+=Q?Te*we-H*Z:Te*we+H*Z}else oe+=ve*q*O/1e3;else oe+=Z*U}}catch(Ne){ne.e(Ne)}finally{ne.f()}I.tspan.setAttributeNS(null,"x",I.xcoords.map(f).join(" ")),Q?I.tspan.setAttributeNS(null,"y",I.ycoords.map(f).join(" ")):I.tspan.setAttributeNS(null,"y",f(-I.y)),Q?I.y-=oe:I.x+=oe*j,I.tspan.setAttributeNS(null,"font-family",I.fontFamily),I.tspan.setAttributeNS(null,"font-size","".concat(f(I.fontSize),"px")),I.fontStyle!==m.fontStyle&&I.tspan.setAttributeNS(null,"font-style",I.fontStyle),I.fontWeight!==m.fontWeight&&I.tspan.setAttributeNS(null,"font-weight",I.fontWeight);var Be=I.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;if(Be===s.TextRenderingMode.FILL||Be===s.TextRenderingMode.FILL_STROKE?(I.fillColor!==m.fillColor&&I.tspan.setAttributeNS(null,"fill",I.fillColor),I.fillAlpha<1&&I.tspan.setAttributeNS(null,"fill-opacity",I.fillAlpha)):I.textRenderingMode===s.TextRenderingMode.ADD_TO_PATH?I.tspan.setAttributeNS(null,"fill","transparent"):I.tspan.setAttributeNS(null,"fill","none"),Be===s.TextRenderingMode.STROKE||Be===s.TextRenderingMode.FILL_STROKE){var $e=1/(I.textMatrixScale||1);this._setStrokeAttributes(I.tspan,$e)}var Oe=I.textMatrix;I.textRise!==0&&((Oe=Oe.slice())[5]+=I.textRise),I.txtElement.setAttributeNS(null,"transform","".concat(v(Oe)," scale(").concat(f(j),", -1)")),I.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),I.txtElement.append(I.tspan),I.txtgrp.append(I.txtElement),this._ensureTransformGroup().append(I.txtElement)}}},{key:"setLeadingMoveText",value:function(M,I){this.setLeading(-I),this.moveText(M,I)}},{key:"addFontStyle",value:function(M){if(!M.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));var I=y(M.data,M.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(M.loadedName,'";')+" src: url(".concat(I,`); }
`)}},{key:"setFont",value:function(M){var I=this.current,F=this.commonObjs.get(M[0]),O=M[1];I.font=F,!this.embedFonts||F.missingFile||this.embeddedFonts[F.loadedName]||(this.addFontStyle(F),this.embeddedFonts[F.loadedName]=F),I.fontMatrix=F.fontMatrix||s.FONT_IDENTITY_MATRIX;var N="normal";F.black?N="900":F.bold&&(N="bold");var D=F.italic?"italic":"normal";O<0?(O=-O,I.fontDirection=-1):I.fontDirection=1,I.fontSize=O,I.fontFamily=F.loadedName,I.fontWeight=N,I.fontStyle=D,I.tspan=this.svgFactory.createElement("svg:tspan"),I.tspan.setAttributeNS(null,"y",f(-I.y)),I.xcoords=[],I.ycoords=[]}},{key:"endText",value:function(){var M,I=this.current;I.textRenderingMode&s.TextRenderingMode.ADD_TO_PATH_FLAG&&(M=I.txtElement)!==null&&M!==void 0&&M.hasChildNodes()&&(I.element=I.txtElement,this.clip("nonzero"),this.endPath())}},{key:"setLineWidth",value:function(M){M>0&&(this.current.lineWidth=M)}},{key:"setLineCap",value:function(M){this.current.lineCap=_[M]}},{key:"setLineJoin",value:function(M){this.current.lineJoin=g[M]}},{key:"setMiterLimit",value:function(M){this.current.miterLimit=M}},{key:"setStrokeAlpha",value:function(M){this.current.strokeAlpha=M}},{key:"setStrokeRGBColor",value:function(M,I,F){this.current.strokeColor=s.Util.makeHexColor(M,I,F)}},{key:"setFillAlpha",value:function(M){this.current.fillAlpha=M}},{key:"setFillRGBColor",value:function(M,I,F){this.current.fillColor=s.Util.makeHexColor(M,I,F),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}},{key:"setStrokeColorN",value:function(M){this.current.strokeColor=this._makeColorN_Pattern(M)}},{key:"setFillColorN",value:function(M){this.current.fillColor=this._makeColorN_Pattern(M)}},{key:"shadingFill",value:function(M){var I=this.viewport.width,F=this.viewport.height,O=s.Util.inverseTransform(this.transformMatrix),N=s.Util.applyTransform([0,0],O),D=s.Util.applyTransform([0,F],O),X=s.Util.applyTransform([I,0],O),U=s.Util.applyTransform([I,F],O),Z=Math.min(N[0],D[0],X[0],U[0]),j=Math.min(N[1],D[1],X[1],U[1]),Q=Math.max(N[0],D[0],X[0],U[0]),ve=Math.max(N[1],D[1],X[1],U[1]),Se=this.svgFactory.createElement("svg:rect");Se.setAttributeNS(null,"x",Z),Se.setAttributeNS(null,"y",j),Se.setAttributeNS(null,"width",Q-Z),Se.setAttributeNS(null,"height",ve-j),Se.setAttributeNS(null,"fill",this._makeShadingPattern(M)),this.current.fillAlpha<1&&Se.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Se)}},{key:"_makeColorN_Pattern",value:function(M){return M[0]==="TilingPattern"?this._makeTilingPattern(M):this._makeShadingPattern(M)}},{key:"_makeTilingPattern",value:function(M){var I=M[1],F=M[2],O=M[3]||s.IDENTITY_MATRIX,N=_slicedToArray(M[4],4),D=N[0],X=N[1],U=N[2],Z=N[3],j=M[5],Q=M[6],ve=M[7],Se="shading".concat(E++),we=_slicedToArray(s.Util.normalizeRect([].concat(_toConsumableArray$1(s.Util.applyTransform([D,X],O)),_toConsumableArray$1(s.Util.applyTransform([U,Z],O)))),4),oe=we[0],ne=we[1],q=we[2],H=we[3],Y=_slicedToArray(s.Util.singularValueDecompose2dScale(O),2),le=j*Y[0],Ce=Q*Y[1],Te=this.svgFactory.createElement("svg:pattern");Te.setAttributeNS(null,"id",Se),Te.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Te.setAttributeNS(null,"width",le),Te.setAttributeNS(null,"height",Ce),Te.setAttributeNS(null,"x","".concat(oe)),Te.setAttributeNS(null,"y","".concat(ne));var ke=this.svg,Ee=this.transformMatrix,Pe=this.current.fillColor,Be=this.current.strokeColor,$e=this.svgFactory.create(q-oe,H-ne);if(this.svg=$e,this.transformMatrix=O,ve===2){var Oe,Ne=(Oe=s.Util).makeHexColor.apply(Oe,_toConsumableArray$1(I));this.current.fillColor=Ne,this.current.strokeColor=Ne}return this.executeOpTree(this.convertOpList(F)),this.svg=ke,this.transformMatrix=Ee,this.current.fillColor=Pe,this.current.strokeColor=Be,Te.append($e.childNodes[0]),this.defs.append(Te),"url(#".concat(Se,")")}},{key:"_makeShadingPattern",value:function(M){switch(typeof M=="string"&&(M=this.objs.get(M)),M[0]){case"RadialAxial":var I,F="shading".concat(E++),O=M[3];switch(M[1]){case"axial":var N=M[4],D=M[5];(I=this.svgFactory.createElement("svg:linearGradient")).setAttributeNS(null,"id",F),I.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),I.setAttributeNS(null,"x1",N[0]),I.setAttributeNS(null,"y1",N[1]),I.setAttributeNS(null,"x2",D[0]),I.setAttributeNS(null,"y2",D[1]);break;case"radial":var X=M[4],U=M[5],Z=M[6],j=M[7];(I=this.svgFactory.createElement("svg:radialGradient")).setAttributeNS(null,"id",F),I.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),I.setAttributeNS(null,"cx",U[0]),I.setAttributeNS(null,"cy",U[1]),I.setAttributeNS(null,"r",j),I.setAttributeNS(null,"fx",X[0]),I.setAttributeNS(null,"fy",X[1]),I.setAttributeNS(null,"fr",Z);break;default:throw new Error("Unknown RadialAxial type: ".concat(M[1]))}var Q,ve=_createForOfIteratorHelper(O);try{for(ve.s();!(Q=ve.n()).done;){var Se=Q.value,we=this.svgFactory.createElement("svg:stop");we.setAttributeNS(null,"offset",Se[0]),we.setAttributeNS(null,"stop-color",Se[1]),I.append(we)}}catch(oe){ve.e(oe)}finally{ve.f()}return this.defs.append(I),"url(#".concat(F,")");case"Mesh":return(0,s.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(M[0]))}}},{key:"setDash",value:function(M,I){this.current.dashArray=M,this.current.dashPhase=I}},{key:"constructPath",value:function(M,I){var F,O=this.current,N=O.x,D=O.y,X=[],U=0,Z=_createForOfIteratorHelper(M);try{for(Z.s();!(F=Z.n()).done;)switch(0|F.value){case s.OPS.rectangle:N=I[U++],D=I[U++];var j=I[U++],Q=I[U++],ve=N+j,Se=D+Q;X.push("M",f(N),f(D),"L",f(ve),f(D),"L",f(ve),f(Se),"L",f(N),f(Se),"Z");break;case s.OPS.moveTo:N=I[U++],D=I[U++],X.push("M",f(N),f(D));break;case s.OPS.lineTo:N=I[U++],D=I[U++],X.push("L",f(N),f(D));break;case s.OPS.curveTo:N=I[U+4],D=I[U+5],X.push("C",f(I[U]),f(I[U+1]),f(I[U+2]),f(I[U+3]),f(N),f(D)),U+=6;break;case s.OPS.curveTo2:X.push("C",f(N),f(D),f(I[U]),f(I[U+1]),f(I[U+2]),f(I[U+3])),N=I[U+2],D=I[U+3],U+=4;break;case s.OPS.curveTo3:N=I[U+2],D=I[U+3],X.push("C",f(I[U]),f(I[U+1]),f(N),f(D),f(N),f(D)),U+=4;break;case s.OPS.closePath:X.push("Z")}}catch(we){Z.e(we)}finally{Z.f()}X=X.join(" "),O.path&&M.length>0&&M[0]!==s.OPS.rectangle&&M[0]!==s.OPS.moveTo?X=O.path.getAttributeNS(null,"d")+X:(O.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(O.path)),O.path.setAttributeNS(null,"d",X),O.path.setAttributeNS(null,"fill","none"),O.element=O.path,O.setCurrentPoint(N,D)}},{key:"endPath",value:function(){var M=this.current;if(M.path=null,this.pendingClip)if(M.element){var I="clippath".concat(k++),F=this.svgFactory.createElement("svg:clipPath");F.setAttributeNS(null,"id",I),F.setAttributeNS(null,"transform",v(this.transformMatrix));var O=M.element.cloneNode(!0);if(this.pendingClip==="evenodd"?O.setAttributeNS(null,"clip-rule","evenodd"):O.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,F.append(O),this.defs.append(F),M.activeClipUrl){M.clipGroup=null;var N,D=_createForOfIteratorHelper(this.extraStack);try{for(D.s();!(N=D.n()).done;)N.value.clipGroup=null}catch(X){D.e(X)}finally{D.f()}F.setAttributeNS(null,"clip-path",M.activeClipUrl)}M.activeClipUrl="url(#".concat(I,")"),this.tgrp=null}else this.pendingClip=null}},{key:"clip",value:function(M){this.pendingClip=M}},{key:"closePath",value:function(){var M=this.current;if(M.path){var I="".concat(M.path.getAttributeNS(null,"d"),"Z");M.path.setAttributeNS(null,"d",I)}}},{key:"setLeading",value:function(M){this.current.leading=-M}},{key:"setTextRise",value:function(M){this.current.textRise=M}},{key:"setTextRenderingMode",value:function(M){this.current.textRenderingMode=M}},{key:"setHScale",value:function(M){this.current.textHScale=M/100}},{key:"setRenderingIntent",value:function(M){}},{key:"setFlatness",value:function(M){}},{key:"setGState",value:function(M){var I,F=_createForOfIteratorHelper(M);try{for(F.s();!(I=F.n()).done;){var O=_slicedToArray(I.value,2),N=O[0],D=O[1];switch(N){case"LW":this.setLineWidth(D);break;case"LC":this.setLineCap(D);break;case"LJ":this.setLineJoin(D);break;case"ML":this.setMiterLimit(D);break;case"D":this.setDash(D[0],D[1]);break;case"RI":this.setRenderingIntent(D);break;case"FL":this.setFlatness(D);break;case"Font":this.setFont(D);break;case"CA":this.setStrokeAlpha(D);break;case"ca":this.setFillAlpha(D);break;default:(0,s.warn)("Unimplemented graphic state operator ".concat(N))}}}catch(X){F.e(X)}finally{F.f()}}},{key:"fill",value:function(){var M=this.current;M.element&&(M.element.setAttributeNS(null,"fill",M.fillColor),M.element.setAttributeNS(null,"fill-opacity",M.fillAlpha),this.endPath())}},{key:"stroke",value:function(){var M=this.current;M.element&&(this._setStrokeAttributes(M.element),M.element.setAttributeNS(null,"fill","none"),this.endPath())}},{key:"_setStrokeAttributes",value:function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,F=this.current,O=F.dashArray;I!==1&&O.length>0&&(O=O.map(function(N){return I*N})),M.setAttributeNS(null,"stroke",F.strokeColor),M.setAttributeNS(null,"stroke-opacity",F.strokeAlpha),M.setAttributeNS(null,"stroke-miterlimit",f(F.miterLimit)),M.setAttributeNS(null,"stroke-linecap",F.lineCap),M.setAttributeNS(null,"stroke-linejoin",F.lineJoin),M.setAttributeNS(null,"stroke-width",f(I*F.lineWidth)+"px"),M.setAttributeNS(null,"stroke-dasharray",O.map(f).join(" ")),M.setAttributeNS(null,"stroke-dashoffset",f(I*F.dashPhase)+"px")}},{key:"eoFill",value:function(){var M;(M=this.current.element)===null||M===void 0||M.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}},{key:"fillStroke",value:function(){this.stroke(),this.fill()}},{key:"eoFillStroke",value:function(){var M;(M=this.current.element)===null||M===void 0||M.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.closePath(),this.eoFillStroke()}},{key:"paintSolidColorImageMask",value:function(){var M=this.svgFactory.createElement("svg:rect");M.setAttributeNS(null,"x","0"),M.setAttributeNS(null,"y","0"),M.setAttributeNS(null,"width","1px"),M.setAttributeNS(null,"height","1px"),M.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(M)}},{key:"paintImageXObject",value:function(M){var I=this.getObject(M);I?this.paintInlineImageXObject(I):(0,s.warn)("Dependent image with object ID ".concat(M," is not ready yet"))}},{key:"paintInlineImageXObject",value:function(M,I){var F=M.width,O=M.height,N=w(M,this.forceDataSchema,!!I),D=this.svgFactory.createElement("svg:rect");D.setAttributeNS(null,"x","0"),D.setAttributeNS(null,"y","0"),D.setAttributeNS(null,"width",f(F)),D.setAttributeNS(null,"height",f(O)),this.current.element=D,this.clip("nonzero");var X=this.svgFactory.createElement("svg:image");X.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",N),X.setAttributeNS(null,"x","0"),X.setAttributeNS(null,"y",f(-O)),X.setAttributeNS(null,"width",f(F)+"px"),X.setAttributeNS(null,"height",f(O)+"px"),X.setAttributeNS(null,"transform","scale(".concat(f(1/F)," ").concat(f(-1/O),")")),I?I.append(X):this._ensureTransformGroup().append(X)}},{key:"paintImageMaskXObject",value:function(M){var I=this.getObject(M.data,M);if(I.bitmap)(0,s.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");else{var F=this.current,O=I.width,N=I.height,D=F.fillColor;F.maskId="mask".concat(S++);var X=this.svgFactory.createElement("svg:mask");X.setAttributeNS(null,"id",F.maskId);var U=this.svgFactory.createElement("svg:rect");U.setAttributeNS(null,"x","0"),U.setAttributeNS(null,"y","0"),U.setAttributeNS(null,"width",f(O)),U.setAttributeNS(null,"height",f(N)),U.setAttributeNS(null,"fill",D),U.setAttributeNS(null,"mask","url(#".concat(F.maskId,")")),this.defs.append(X),this._ensureTransformGroup().append(U),this.paintInlineImageXObject(I,X)}}},{key:"paintFormXObjectBegin",value:function(M,I){if(Array.isArray(M)&&M.length===6&&this.transform(M[0],M[1],M[2],M[3],M[4],M[5]),I){var F=I[2]-I[0],O=I[3]-I[1],N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x",I[0]),N.setAttributeNS(null,"y",I[1]),N.setAttributeNS(null,"width",f(F)),N.setAttributeNS(null,"height",f(O)),this.current.element=N,this.clip("nonzero"),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){}},{key:"_initialize",value:function(M){var I=this.svgFactory.create(M.width,M.height),F=this.svgFactory.createElement("svg:defs");I.append(F),this.defs=F;var O=this.svgFactory.createElement("svg:g");return O.setAttributeNS(null,"transform",v(M.transform)),I.append(O),this.svg=O,I}},{key:"_ensureClipGroup",value:function(){if(!this.current.clipGroup){var M=this.svgFactory.createElement("svg:g");M.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(M),this.current.clipGroup=M}return this.current.clipGroup}},{key:"_ensureTransformGroup",value:function(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",v(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}]),T}()}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var n=__webpack_module_cache__[e];if(n!==void 0)return n.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__w_pdfjs_require__),r.exports}var __webpack_exports__={};return function(){var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return n.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return u.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return n.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return n.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return d.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return f.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return n.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return n.CMapCompressionType}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return n.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return v.GlobalWorkerOptions}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return n.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return n.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return n.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return r.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return o.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return r.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return n.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return n.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return o.PixelsPerInch}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return o.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return m.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return n.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return n.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return n.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return _.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return r.build}}),Object.defineProperty(e,"createPromiseCapability",{enumerable:!0,get:function(){return n.createPromiseCapability}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return n.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return r.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return o.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return o.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return o.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return o.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return o.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return o.loadScript}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return s.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return o.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return n.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return s.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return r.version}});var n=__w_pdfjs_require__(1),r=__w_pdfjs_require__(138),o=__w_pdfjs_require__(142),s=__w_pdfjs_require__(161),u=__w_pdfjs_require__(162),d=__w_pdfjs_require__(141),f=__w_pdfjs_require__(167),v=__w_pdfjs_require__(149),m=__w_pdfjs_require__(170),_=__w_pdfjs_require__(169)}(),__webpack_exports__}()},module.exports=factory()})(pdf);var cryptoJsExports={},cryptoJs={get exports(){return cryptoJsExports},set exports(e){cryptoJsExports=e}},coreExports={},core$1={get exports(){return coreExports},set exports(e){coreExports=e}},hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,core$1.exports=function(){var e=e||function(n,r){var o;if(typeof window<"u"&&window.crypto&&(o=window.crypto),typeof self<"u"&&self.crypto&&(o=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(o=globalThis.crypto),!o&&typeof window<"u"&&window.msCrypto&&(o=window.msCrypto),!o&&commonjsGlobal!==void 0&&commonjsGlobal.crypto&&(o=commonjsGlobal.crypto),!o&&typeof commonjsRequire=="function")try{o=require$$0}catch{}var s=function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},u=Object.create||function(){function S(){}return function(E){var T;return S.prototype=E,T=new S,S.prototype=null,T}}(),d={},f=d.lib={},v=f.Base={extend:function(S){var E=u(this);return S&&E.mixIn(S),E.hasOwnProperty("init")&&this.init!==E.init||(E.init=function(){E.$super.init.apply(this,arguments)}),E.init.prototype=E,E.$super=this,E},create:function(){var S=this.extend();return S.init.apply(S,arguments),S},init:function(){},mixIn:function(S){for(var E in S)S.hasOwnProperty(E)&&(this[E]=S[E]);S.hasOwnProperty("toString")&&(this.toString=S.toString)},clone:function(){return this.init.prototype.extend(this)}},m=f.WordArray=v.extend({init:function(S,E){S=this.words=S||[],this.sigBytes=E!=r?E:4*S.length},toString:function(S){return(S||g).stringify(this)},concat:function(S){var E=this.words,T=S.words,M=this.sigBytes,I=S.sigBytes;if(this.clamp(),M%4)for(var F=0;F<I;F++){var O=T[F>>>2]>>>24-F%4*8&255;E[M+F>>>2]|=O<<24-(M+F)%4*8}else for(var N=0;N<I;N+=4)E[M+N>>>2]=T[N>>>2];return this.sigBytes+=I,this},clamp:function(){var S=this.words,E=this.sigBytes;S[E>>>2]&=4294967295<<32-E%4*8,S.length=n.ceil(E/4)},clone:function(){var S=v.clone.call(this);return S.words=this.words.slice(0),S},random:function(S){for(var E=[],T=0;T<S;T+=4)E.push(s());return new m.init(E,S)}}),_=d.enc={},g=_.Hex={stringify:function(S){for(var E=S.words,T=S.sigBytes,M=[],I=0;I<T;I++){var F=E[I>>>2]>>>24-I%4*8&255;M.push((F>>>4).toString(16)),M.push((15&F).toString(16))}return M.join("")},parse:function(S){for(var E=S.length,T=[],M=0;M<E;M+=2)T[M>>>3]|=parseInt(S.substr(M,2),16)<<24-M%8*4;return new m.init(T,E/2)}},y=_.Latin1={stringify:function(S){for(var E=S.words,T=S.sigBytes,M=[],I=0;I<T;I++){var F=E[I>>>2]>>>24-I%4*8&255;M.push(String.fromCharCode(F))}return M.join("")},parse:function(S){for(var E=S.length,T=[],M=0;M<E;M++)T[M>>>2]|=(255&S.charCodeAt(M))<<24-M%4*8;return new m.init(T,E)}},w=_.Utf8={stringify:function(S){try{return decodeURIComponent(escape(y.stringify(S)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(S){return y.parse(unescape(encodeURIComponent(S)))}},x=f.BufferedBlockAlgorithm=v.extend({reset:function(){this._data=new m.init,this._nDataBytes=0},_append:function(S){typeof S=="string"&&(S=w.parse(S)),this._data.concat(S),this._nDataBytes+=S.sigBytes},_process:function(S){var E,T=this._data,M=T.words,I=T.sigBytes,F=this.blockSize,O=I/(4*F),N=(O=S?n.ceil(O):n.max((0|O)-this._minBufferSize,0))*F,D=n.min(4*N,I);if(N){for(var X=0;X<N;X+=F)this._doProcessBlock(M,X);E=M.splice(0,N),T.sigBytes-=D}return new m.init(E,D)},clone:function(){var S=v.clone.call(this);return S._data=this._data.clone(),S},_minBufferSize:0});f.Hasher=x.extend({cfg:v.extend(),init:function(S){this.cfg=this.cfg.extend(S),this.reset()},reset:function(){x.reset.call(this),this._doReset()},update:function(S){return this._append(S),this._process(),this},finalize:function(S){return S&&this._append(S),this._doFinalize()},blockSize:16,_createHelper:function(S){return function(E,T){return new S.init(T).finalize(E)}},_createHmacHelper:function(S){return function(E,T){return new k.HMAC.init(S,T).finalize(E)}}});var k=d.algo={};return d}(Math);return e}()),coreExports}var x64CoreExports={},x64Core={get exports(){return x64CoreExports},set exports(e){x64CoreExports=e}},hasRequiredX64Core;function requireX64Core(){return hasRequiredX64Core||(hasRequiredX64Core=1,x64Core.exports=function(e){return function(n){var r=e,o=r.lib,s=o.Base,u=o.WordArray,d=r.x64={};d.Word=s.extend({init:function(f,v){this.high=f,this.low=v}}),d.WordArray=s.extend({init:function(f,v){f=this.words=f||[],this.sigBytes=v!=n?v:8*f.length},toX32:function(){for(var f=this.words,v=f.length,m=[],_=0;_<v;_++){var g=f[_];m.push(g.high),m.push(g.low)}return u.create(m,this.sigBytes)},clone:function(){for(var f=s.clone.call(this),v=f.words=this.words.slice(0),m=v.length,_=0;_<m;_++)v[_]=v[_].clone();return f}})}(),e}(requireCore())),x64CoreExports}var libTypedarraysExports={},libTypedarrays={get exports(){return libTypedarraysExports},set exports(e){libTypedarraysExports=e}},hasRequiredLibTypedarrays;function requireLibTypedarrays(){return hasRequiredLibTypedarrays||(hasRequiredLibTypedarrays=1,libTypedarrays.exports=function(e){return function(){if(typeof ArrayBuffer=="function"){var n=e.lib.WordArray,r=n.init,o=n.init=function(s){if(s instanceof ArrayBuffer&&(s=new Uint8Array(s)),(s instanceof Int8Array||typeof Uint8ClampedArray<"u"&&s instanceof Uint8ClampedArray||s instanceof Int16Array||s instanceof Uint16Array||s instanceof Int32Array||s instanceof Uint32Array||s instanceof Float32Array||s instanceof Float64Array)&&(s=new Uint8Array(s.buffer,s.byteOffset,s.byteLength)),s instanceof Uint8Array){for(var u=s.byteLength,d=[],f=0;f<u;f++)d[f>>>2]|=s[f]<<24-f%4*8;r.call(this,d,u)}else r.apply(this,arguments)};o.prototype=n}}(),e.lib.WordArray}(requireCore())),libTypedarraysExports}var encUtf16Exports={},encUtf16={get exports(){return encUtf16Exports},set exports(e){encUtf16Exports=e}},hasRequiredEncUtf16;function requireEncUtf16(){return hasRequiredEncUtf16||(hasRequiredEncUtf16=1,encUtf16.exports=function(e){return function(){var n=e,r=n.lib.WordArray,o=n.enc;function s(u){return u<<8&4278255360|u>>>8&16711935}o.Utf16=o.Utf16BE={stringify:function(u){for(var d=u.words,f=u.sigBytes,v=[],m=0;m<f;m+=2){var _=d[m>>>2]>>>16-m%4*8&65535;v.push(String.fromCharCode(_))}return v.join("")},parse:function(u){for(var d=u.length,f=[],v=0;v<d;v++)f[v>>>1]|=u.charCodeAt(v)<<16-v%2*16;return r.create(f,2*d)}},o.Utf16LE={stringify:function(u){for(var d=u.words,f=u.sigBytes,v=[],m=0;m<f;m+=2){var _=s(d[m>>>2]>>>16-m%4*8&65535);v.push(String.fromCharCode(_))}return v.join("")},parse:function(u){for(var d=u.length,f=[],v=0;v<d;v++)f[v>>>1]|=s(u.charCodeAt(v)<<16-v%2*16);return r.create(f,2*d)}}}(),e.enc.Utf16}(requireCore())),encUtf16Exports}var encBase64Exports={},encBase64={get exports(){return encBase64Exports},set exports(e){encBase64Exports=e}},hasRequiredEncBase64;function requireEncBase64(){return hasRequiredEncBase64||(hasRequiredEncBase64=1,encBase64.exports=function(e){return function(){var n=e,r=n.lib.WordArray;function o(s,u,d){for(var f=[],v=0,m=0;m<u;m++)if(m%4){var _=d[s.charCodeAt(m-1)]<<m%4*2|d[s.charCodeAt(m)]>>>6-m%4*2;f[v>>>2]|=_<<24-v%4*8,v++}return r.create(f,v)}n.enc.Base64={stringify:function(s){var u=s.words,d=s.sigBytes,f=this._map;s.clamp();for(var v=[],m=0;m<d;m+=3)for(var _=(u[m>>>2]>>>24-m%4*8&255)<<16|(u[m+1>>>2]>>>24-(m+1)%4*8&255)<<8|u[m+2>>>2]>>>24-(m+2)%4*8&255,g=0;g<4&&m+.75*g<d;g++)v.push(f.charAt(_>>>6*(3-g)&63));var y=f.charAt(64);if(y)for(;v.length%4;)v.push(y);return v.join("")},parse:function(s){var u=s.length,d=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var v=0;v<d.length;v++)f[d.charCodeAt(v)]=v}var m=d.charAt(64);if(m){var _=s.indexOf(m);_!==-1&&(u=_)}return o(s,u,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64}(requireCore())),encBase64Exports}var encBase64urlExports={},encBase64url={get exports(){return encBase64urlExports},set exports(e){encBase64urlExports=e}},hasRequiredEncBase64url;function requireEncBase64url(){return hasRequiredEncBase64url||(hasRequiredEncBase64url=1,encBase64url.exports=function(e){return function(){var n=e,r=n.lib.WordArray;function o(s,u,d){for(var f=[],v=0,m=0;m<u;m++)if(m%4){var _=d[s.charCodeAt(m-1)]<<m%4*2|d[s.charCodeAt(m)]>>>6-m%4*2;f[v>>>2]|=_<<24-v%4*8,v++}return r.create(f,v)}n.enc.Base64url={stringify:function(s){var u=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],d=s.words,f=s.sigBytes,v=u?this._safe_map:this._map;s.clamp();for(var m=[],_=0;_<f;_+=3)for(var g=(d[_>>>2]>>>24-_%4*8&255)<<16|(d[_+1>>>2]>>>24-(_+1)%4*8&255)<<8|d[_+2>>>2]>>>24-(_+2)%4*8&255,y=0;y<4&&_+.75*y<f;y++)m.push(v.charAt(g>>>6*(3-y)&63));var w=v.charAt(64);if(w)for(;m.length%4;)m.push(w);return m.join("")},parse:function(s){var u=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],d=s.length,f=u?this._safe_map:this._map,v=this._reverseMap;if(!v){v=this._reverseMap=[];for(var m=0;m<f.length;m++)v[f.charCodeAt(m)]=m}var _=f.charAt(64);if(_){var g=s.indexOf(_);g!==-1&&(d=g)}return o(s,d,v)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),e.enc.Base64url}(requireCore())),encBase64urlExports}var md5Exports={},md5={get exports(){return md5Exports},set exports(e){md5Exports=e}},hasRequiredMd5;function requireMd5(){return hasRequiredMd5||(hasRequiredMd5=1,md5.exports=function(e){return function(n){var r=e,o=r.lib,s=o.WordArray,u=o.Hasher,d=r.algo,f=[];(function(){for(var w=0;w<64;w++)f[w]=4294967296*n.abs(n.sin(w+1))|0})();var v=d.MD5=u.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(w,x){for(var k=0;k<16;k++){var S=x+k,E=w[S];w[S]=16711935&(E<<8|E>>>24)|4278255360&(E<<24|E>>>8)}var T=this._hash.words,M=w[x+0],I=w[x+1],F=w[x+2],O=w[x+3],N=w[x+4],D=w[x+5],X=w[x+6],U=w[x+7],Z=w[x+8],j=w[x+9],Q=w[x+10],ve=w[x+11],Se=w[x+12],we=w[x+13],oe=w[x+14],ne=w[x+15],q=T[0],H=T[1],Y=T[2],le=T[3];q=m(q,H,Y,le,M,7,f[0]),le=m(le,q,H,Y,I,12,f[1]),Y=m(Y,le,q,H,F,17,f[2]),H=m(H,Y,le,q,O,22,f[3]),q=m(q,H,Y,le,N,7,f[4]),le=m(le,q,H,Y,D,12,f[5]),Y=m(Y,le,q,H,X,17,f[6]),H=m(H,Y,le,q,U,22,f[7]),q=m(q,H,Y,le,Z,7,f[8]),le=m(le,q,H,Y,j,12,f[9]),Y=m(Y,le,q,H,Q,17,f[10]),H=m(H,Y,le,q,ve,22,f[11]),q=m(q,H,Y,le,Se,7,f[12]),le=m(le,q,H,Y,we,12,f[13]),Y=m(Y,le,q,H,oe,17,f[14]),q=_(q,H=m(H,Y,le,q,ne,22,f[15]),Y,le,I,5,f[16]),le=_(le,q,H,Y,X,9,f[17]),Y=_(Y,le,q,H,ve,14,f[18]),H=_(H,Y,le,q,M,20,f[19]),q=_(q,H,Y,le,D,5,f[20]),le=_(le,q,H,Y,Q,9,f[21]),Y=_(Y,le,q,H,ne,14,f[22]),H=_(H,Y,le,q,N,20,f[23]),q=_(q,H,Y,le,j,5,f[24]),le=_(le,q,H,Y,oe,9,f[25]),Y=_(Y,le,q,H,O,14,f[26]),H=_(H,Y,le,q,Z,20,f[27]),q=_(q,H,Y,le,we,5,f[28]),le=_(le,q,H,Y,F,9,f[29]),Y=_(Y,le,q,H,U,14,f[30]),q=g(q,H=_(H,Y,le,q,Se,20,f[31]),Y,le,D,4,f[32]),le=g(le,q,H,Y,Z,11,f[33]),Y=g(Y,le,q,H,ve,16,f[34]),H=g(H,Y,le,q,oe,23,f[35]),q=g(q,H,Y,le,I,4,f[36]),le=g(le,q,H,Y,N,11,f[37]),Y=g(Y,le,q,H,U,16,f[38]),H=g(H,Y,le,q,Q,23,f[39]),q=g(q,H,Y,le,we,4,f[40]),le=g(le,q,H,Y,M,11,f[41]),Y=g(Y,le,q,H,O,16,f[42]),H=g(H,Y,le,q,X,23,f[43]),q=g(q,H,Y,le,j,4,f[44]),le=g(le,q,H,Y,Se,11,f[45]),Y=g(Y,le,q,H,ne,16,f[46]),q=y(q,H=g(H,Y,le,q,F,23,f[47]),Y,le,M,6,f[48]),le=y(le,q,H,Y,U,10,f[49]),Y=y(Y,le,q,H,oe,15,f[50]),H=y(H,Y,le,q,D,21,f[51]),q=y(q,H,Y,le,Se,6,f[52]),le=y(le,q,H,Y,O,10,f[53]),Y=y(Y,le,q,H,Q,15,f[54]),H=y(H,Y,le,q,I,21,f[55]),q=y(q,H,Y,le,Z,6,f[56]),le=y(le,q,H,Y,ne,10,f[57]),Y=y(Y,le,q,H,X,15,f[58]),H=y(H,Y,le,q,we,21,f[59]),q=y(q,H,Y,le,N,6,f[60]),le=y(le,q,H,Y,ve,10,f[61]),Y=y(Y,le,q,H,F,15,f[62]),H=y(H,Y,le,q,j,21,f[63]),T[0]=T[0]+q|0,T[1]=T[1]+H|0,T[2]=T[2]+Y|0,T[3]=T[3]+le|0},_doFinalize:function(){var w=this._data,x=w.words,k=8*this._nDataBytes,S=8*w.sigBytes;x[S>>>5]|=128<<24-S%32;var E=n.floor(k/4294967296),T=k;x[15+(S+64>>>9<<4)]=16711935&(E<<8|E>>>24)|4278255360&(E<<24|E>>>8),x[14+(S+64>>>9<<4)]=16711935&(T<<8|T>>>24)|4278255360&(T<<24|T>>>8),w.sigBytes=4*(x.length+1),this._process();for(var M=this._hash,I=M.words,F=0;F<4;F++){var O=I[F];I[F]=16711935&(O<<8|O>>>24)|4278255360&(O<<24|O>>>8)}return M},clone:function(){var w=u.clone.call(this);return w._hash=this._hash.clone(),w}});function m(w,x,k,S,E,T,M){var I=w+(x&k|~x&S)+E+M;return(I<<T|I>>>32-T)+x}function _(w,x,k,S,E,T,M){var I=w+(x&S|k&~S)+E+M;return(I<<T|I>>>32-T)+x}function g(w,x,k,S,E,T,M){var I=w+(x^k^S)+E+M;return(I<<T|I>>>32-T)+x}function y(w,x,k,S,E,T,M){var I=w+(k^(x|~S))+E+M;return(I<<T|I>>>32-T)+x}r.MD5=u._createHelper(v),r.HmacMD5=u._createHmacHelper(v)}(Math),e.MD5}(requireCore())),md5Exports}var sha1Exports={},sha1={get exports(){return sha1Exports},set exports(e){sha1Exports=e}},hasRequiredSha1;function requireSha1(){return hasRequiredSha1||(hasRequiredSha1=1,sha1.exports=function(e){return function(){var n=e,r=n.lib,o=r.WordArray,s=r.Hasher,u=n.algo,d=[],f=u.SHA1=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(v,m){for(var _=this._hash.words,g=_[0],y=_[1],w=_[2],x=_[3],k=_[4],S=0;S<80;S++){if(S<16)d[S]=0|v[m+S];else{var E=d[S-3]^d[S-8]^d[S-14]^d[S-16];d[S]=E<<1|E>>>31}var T=(g<<5|g>>>27)+k+d[S];T+=S<20?1518500249+(y&w|~y&x):S<40?1859775393+(y^w^x):S<60?(y&w|y&x|w&x)-1894007588:(y^w^x)-899497514,k=x,x=w,w=y<<30|y>>>2,y=g,g=T}_[0]=_[0]+g|0,_[1]=_[1]+y|0,_[2]=_[2]+w|0,_[3]=_[3]+x|0,_[4]=_[4]+k|0},_doFinalize:function(){var v=this._data,m=v.words,_=8*this._nDataBytes,g=8*v.sigBytes;return m[g>>>5]|=128<<24-g%32,m[14+(g+64>>>9<<4)]=Math.floor(_/4294967296),m[15+(g+64>>>9<<4)]=_,v.sigBytes=4*m.length,this._process(),this._hash},clone:function(){var v=s.clone.call(this);return v._hash=this._hash.clone(),v}});n.SHA1=s._createHelper(f),n.HmacSHA1=s._createHmacHelper(f)}(),e.SHA1}(requireCore())),sha1Exports}var sha256Exports={},sha256={get exports(){return sha256Exports},set exports(e){sha256Exports=e}},hasRequiredSha256;function requireSha256(){return hasRequiredSha256||(hasRequiredSha256=1,sha256.exports=function(e){return function(n){var r=e,o=r.lib,s=o.WordArray,u=o.Hasher,d=r.algo,f=[],v=[];(function(){function g(k){for(var S=n.sqrt(k),E=2;E<=S;E++)if(!(k%E))return!1;return!0}function y(k){return 4294967296*(k-(0|k))|0}for(var w=2,x=0;x<64;)g(w)&&(x<8&&(f[x]=y(n.pow(w,.5))),v[x]=y(n.pow(w,1/3)),x++),w++})();var m=[],_=d.SHA256=u.extend({_doReset:function(){this._hash=new s.init(f.slice(0))},_doProcessBlock:function(g,y){for(var w=this._hash.words,x=w[0],k=w[1],S=w[2],E=w[3],T=w[4],M=w[5],I=w[6],F=w[7],O=0;O<64;O++){if(O<16)m[O]=0|g[y+O];else{var N=m[O-15],D=(N<<25|N>>>7)^(N<<14|N>>>18)^N>>>3,X=m[O-2],U=(X<<15|X>>>17)^(X<<13|X>>>19)^X>>>10;m[O]=D+m[O-7]+U+m[O-16]}var Z=x&k^x&S^k&S,j=(x<<30|x>>>2)^(x<<19|x>>>13)^(x<<10|x>>>22),Q=F+((T<<26|T>>>6)^(T<<21|T>>>11)^(T<<7|T>>>25))+(T&M^~T&I)+v[O]+m[O];F=I,I=M,M=T,T=E+Q|0,E=S,S=k,k=x,x=Q+(j+Z)|0}w[0]=w[0]+x|0,w[1]=w[1]+k|0,w[2]=w[2]+S|0,w[3]=w[3]+E|0,w[4]=w[4]+T|0,w[5]=w[5]+M|0,w[6]=w[6]+I|0,w[7]=w[7]+F|0},_doFinalize:function(){var g=this._data,y=g.words,w=8*this._nDataBytes,x=8*g.sigBytes;return y[x>>>5]|=128<<24-x%32,y[14+(x+64>>>9<<4)]=n.floor(w/4294967296),y[15+(x+64>>>9<<4)]=w,g.sigBytes=4*y.length,this._process(),this._hash},clone:function(){var g=u.clone.call(this);return g._hash=this._hash.clone(),g}});r.SHA256=u._createHelper(_),r.HmacSHA256=u._createHmacHelper(_)}(Math),e.SHA256}(requireCore())),sha256Exports}var sha224Exports={},sha224={get exports(){return sha224Exports},set exports(e){sha224Exports=e}},hasRequiredSha224;function requireSha224(){return hasRequiredSha224||(hasRequiredSha224=1,sha224.exports=function(e){return function(){var n=e,r=n.lib.WordArray,o=n.algo,s=o.SHA256,u=o.SHA224=s.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var d=s._doFinalize.call(this);return d.sigBytes-=4,d}});n.SHA224=s._createHelper(u),n.HmacSHA224=s._createHmacHelper(u)}(),e.SHA224}(requireCore(),requireSha256())),sha224Exports}var sha512Exports={},sha512={get exports(){return sha512Exports},set exports(e){sha512Exports=e}},hasRequiredSha512;function requireSha512(){return hasRequiredSha512||(hasRequiredSha512=1,sha512.exports=function(e){return function(){var n=e,r=n.lib.Hasher,o=n.x64,s=o.Word,u=o.WordArray,d=n.algo;function f(){return s.create.apply(s,arguments)}var v=[f(1116352408,3609767458),f(1899447441,602891725),f(3049323471,3964484399),f(3921009573,2173295548),f(961987163,4081628472),f(1508970993,3053834265),f(2453635748,2937671579),f(2870763221,3664609560),f(3624381080,2734883394),f(310598401,1164996542),f(607225278,1323610764),f(1426881987,3590304994),f(1925078388,4068182383),f(2162078206,991336113),f(2614888103,633803317),f(3248222580,3479774868),f(3835390401,2666613458),f(4022224774,944711139),f(264347078,2341262773),f(604807628,2007800933),f(770255983,1495990901),f(1249150122,1856431235),f(1555081692,3175218132),f(1996064986,2198950837),f(2554220882,3999719339),f(2821834349,766784016),f(2952996808,2566594879),f(3210313671,3203337956),f(3336571891,1034457026),f(3584528711,2466948901),f(113926993,3758326383),f(338241895,168717936),f(666307205,1188179964),f(773529912,1546045734),f(1294757372,1522805485),f(1396182291,2643833823),f(1695183700,2343527390),f(1986661051,1014477480),f(2177026350,1206759142),f(2456956037,344077627),f(2730485921,1290863460),f(2820302411,3158454273),f(3259730800,3505952657),f(3345764771,106217008),f(3516065817,3606008344),f(3600352804,1432725776),f(4094571909,1467031594),f(275423344,851169720),f(430227734,3100823752),f(506948616,1363258195),f(659060556,3750685593),f(883997877,3785050280),f(958139571,3318307427),f(1322822218,3812723403),f(1537002063,2003034995),f(1747873779,3602036899),f(1955562222,1575990012),f(2024104815,1125592928),f(2227730452,2716904306),f(2361852424,442776044),f(2428436474,593698344),f(2756734187,3733110249),f(3204031479,2999351573),f(3329325298,3815920427),f(3391569614,3928383900),f(3515267271,566280711),f(3940187606,3454069534),f(4118630271,4000239992),f(116418474,1914138554),f(174292421,2731055270),f(289380356,3203993006),f(460393269,320620315),f(685471733,587496836),f(852142971,1086792851),f(1017036298,365543100),f(1126000580,2618297676),f(1288033470,3409855158),f(1501505948,4234509866),f(1607167915,987167468),f(1816402316,1246189591)],m=[];(function(){for(var g=0;g<80;g++)m[g]=f()})();var _=d.SHA512=r.extend({_doReset:function(){this._hash=new u.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(g,y){for(var w=this._hash.words,x=w[0],k=w[1],S=w[2],E=w[3],T=w[4],M=w[5],I=w[6],F=w[7],O=x.high,N=x.low,D=k.high,X=k.low,U=S.high,Z=S.low,j=E.high,Q=E.low,ve=T.high,Se=T.low,we=M.high,oe=M.low,ne=I.high,q=I.low,H=F.high,Y=F.low,le=O,Ce=N,Te=D,ke=X,Ee=U,Pe=Z,Be=j,$e=Q,Oe=ve,Ne=Se,J=we,fe=oe,re=ne,_e=q,be=H,Ae=Y,Le=0;Le<80;Le++){var Ve,Fe,De=m[Le];if(Le<16)Fe=De.high=0|g[y+2*Le],Ve=De.low=0|g[y+2*Le+1];else{var We=m[Le-15],Re=We.high,He=We.low,Ze=(Re>>>1|He<<31)^(Re>>>8|He<<24)^Re>>>7,Xe=(He>>>1|Re<<31)^(He>>>8|Re<<24)^(He>>>7|Re<<25),at=m[Le-2],ut=at.high,ct=at.low,mt=(ut>>>19|ct<<13)^(ut<<3|ct>>>29)^ut>>>6,pt=(ct>>>19|ut<<13)^(ct<<3|ut>>>29)^(ct>>>6|ut<<26),kt=m[Le-7],Ct=kt.high,ht=kt.low,Pt=m[Le-16],Ue=Pt.high,qe=Pt.low;Fe=(Fe=(Fe=Ze+Ct+((Ve=Xe+ht)>>>0<Xe>>>0?1:0))+mt+((Ve+=pt)>>>0<pt>>>0?1:0))+Ue+((Ve+=qe)>>>0<qe>>>0?1:0),De.high=Fe,De.low=Ve}var Ye,st=Oe&J^~Oe&re,ot=Ne&fe^~Ne&_e,Qe=le&Te^le&Ee^Te&Ee,tt=Ce&ke^Ce&Pe^ke&Pe,nt=(le>>>28|Ce<<4)^(le<<30|Ce>>>2)^(le<<25|Ce>>>7),it=(Ce>>>28|le<<4)^(Ce<<30|le>>>2)^(Ce<<25|le>>>7),lt=(Oe>>>14|Ne<<18)^(Oe>>>18|Ne<<14)^(Oe<<23|Ne>>>9),Et=(Ne>>>14|Oe<<18)^(Ne>>>18|Oe<<14)^(Ne<<23|Oe>>>9),St=v[Le],Mt=St.high,Lt=St.low,Gt=be+lt+((Ye=Ae+Et)>>>0<Ae>>>0?1:0),vn=it+tt;be=re,Ae=_e,re=J,_e=fe,J=Oe,fe=Ne,Oe=Be+(Gt=(Gt=(Gt=Gt+st+((Ye+=ot)>>>0<ot>>>0?1:0))+Mt+((Ye+=Lt)>>>0<Lt>>>0?1:0))+Fe+((Ye+=Ve)>>>0<Ve>>>0?1:0))+((Ne=$e+Ye|0)>>>0<$e>>>0?1:0)|0,Be=Ee,$e=Pe,Ee=Te,Pe=ke,Te=le,ke=Ce,le=Gt+(nt+Qe+(vn>>>0<it>>>0?1:0))+((Ce=Ye+vn|0)>>>0<Ye>>>0?1:0)|0}N=x.low=N+Ce,x.high=O+le+(N>>>0<Ce>>>0?1:0),X=k.low=X+ke,k.high=D+Te+(X>>>0<ke>>>0?1:0),Z=S.low=Z+Pe,S.high=U+Ee+(Z>>>0<Pe>>>0?1:0),Q=E.low=Q+$e,E.high=j+Be+(Q>>>0<$e>>>0?1:0),Se=T.low=Se+Ne,T.high=ve+Oe+(Se>>>0<Ne>>>0?1:0),oe=M.low=oe+fe,M.high=we+J+(oe>>>0<fe>>>0?1:0),q=I.low=q+_e,I.high=ne+re+(q>>>0<_e>>>0?1:0),Y=F.low=Y+Ae,F.high=H+be+(Y>>>0<Ae>>>0?1:0)},_doFinalize:function(){var g=this._data,y=g.words,w=8*this._nDataBytes,x=8*g.sigBytes;return y[x>>>5]|=128<<24-x%32,y[30+(x+128>>>10<<5)]=Math.floor(w/4294967296),y[31+(x+128>>>10<<5)]=w,g.sigBytes=4*y.length,this._process(),this._hash.toX32()},clone:function(){var g=r.clone.call(this);return g._hash=this._hash.clone(),g},blockSize:32});n.SHA512=r._createHelper(_),n.HmacSHA512=r._createHmacHelper(_)}(),e.SHA512}(requireCore(),requireX64Core())),sha512Exports}var sha384Exports={},sha384={get exports(){return sha384Exports},set exports(e){sha384Exports=e}},hasRequiredSha384;function requireSha384(){return hasRequiredSha384||(hasRequiredSha384=1,sha384.exports=function(e){return function(){var n=e,r=n.x64,o=r.Word,s=r.WordArray,u=n.algo,d=u.SHA512,f=u.SHA384=d.extend({_doReset:function(){this._hash=new s.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var v=d._doFinalize.call(this);return v.sigBytes-=16,v}});n.SHA384=d._createHelper(f),n.HmacSHA384=d._createHmacHelper(f)}(),e.SHA384}(requireCore(),requireX64Core(),requireSha512())),sha384Exports}var sha3Exports={},sha3={get exports(){return sha3Exports},set exports(e){sha3Exports=e}},hasRequiredSha3;function requireSha3(){return hasRequiredSha3||(hasRequiredSha3=1,sha3.exports=function(e){return function(n){var r=e,o=r.lib,s=o.WordArray,u=o.Hasher,d=r.x64.Word,f=r.algo,v=[],m=[],_=[];(function(){for(var w=1,x=0,k=0;k<24;k++){v[w+5*x]=(k+1)*(k+2)/2%64;var S=(2*w+3*x)%5;w=x%5,x=S}for(w=0;w<5;w++)for(x=0;x<5;x++)m[w+5*x]=x+(2*w+3*x)%5*5;for(var E=1,T=0;T<24;T++){for(var M=0,I=0,F=0;F<7;F++){if(1&E){var O=(1<<F)-1;O<32?I^=1<<O:M^=1<<O-32}128&E?E=E<<1^113:E<<=1}_[T]=d.create(M,I)}})();var g=[];(function(){for(var w=0;w<25;w++)g[w]=d.create()})();var y=f.SHA3=u.extend({cfg:u.cfg.extend({outputLength:512}),_doReset:function(){for(var w=this._state=[],x=0;x<25;x++)w[x]=new d.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(w,x){for(var k=this._state,S=this.blockSize/2,E=0;E<S;E++){var T=w[x+2*E],M=w[x+2*E+1];T=16711935&(T<<8|T>>>24)|4278255360&(T<<24|T>>>8),M=16711935&(M<<8|M>>>24)|4278255360&(M<<24|M>>>8),(Y=k[E]).high^=M,Y.low^=T}for(var I=0;I<24;I++){for(var F=0;F<5;F++){for(var O=0,N=0,D=0;D<5;D++)O^=(Y=k[F+5*D]).high,N^=Y.low;var X=g[F];X.high=O,X.low=N}for(F=0;F<5;F++){var U=g[(F+4)%5],Z=g[(F+1)%5],j=Z.high,Q=Z.low;for(O=U.high^(j<<1|Q>>>31),N=U.low^(Q<<1|j>>>31),D=0;D<5;D++)(Y=k[F+5*D]).high^=O,Y.low^=N}for(var ve=1;ve<25;ve++){var Se=(Y=k[ve]).high,we=Y.low,oe=v[ve];oe<32?(O=Se<<oe|we>>>32-oe,N=we<<oe|Se>>>32-oe):(O=we<<oe-32|Se>>>64-oe,N=Se<<oe-32|we>>>64-oe);var ne=g[m[ve]];ne.high=O,ne.low=N}var q=g[0],H=k[0];for(q.high=H.high,q.low=H.low,F=0;F<5;F++)for(D=0;D<5;D++){var Y=k[ve=F+5*D],le=g[ve],Ce=g[(F+1)%5+5*D],Te=g[(F+2)%5+5*D];Y.high=le.high^~Ce.high&Te.high,Y.low=le.low^~Ce.low&Te.low}Y=k[0];var ke=_[I];Y.high^=ke.high,Y.low^=ke.low}},_doFinalize:function(){var w=this._data,x=w.words;this._nDataBytes;var k=8*w.sigBytes,S=32*this.blockSize;x[k>>>5]|=1<<24-k%32,x[(n.ceil((k+1)/S)*S>>>5)-1]|=128,w.sigBytes=4*x.length,this._process();for(var E=this._state,T=this.cfg.outputLength/8,M=T/8,I=[],F=0;F<M;F++){var O=E[F],N=O.high,D=O.low;N=16711935&(N<<8|N>>>24)|4278255360&(N<<24|N>>>8),D=16711935&(D<<8|D>>>24)|4278255360&(D<<24|D>>>8),I.push(D),I.push(N)}return new s.init(I,T)},clone:function(){for(var w=u.clone.call(this),x=w._state=this._state.slice(0),k=0;k<25;k++)x[k]=x[k].clone();return w}});r.SHA3=u._createHelper(y),r.HmacSHA3=u._createHmacHelper(y)}(Math),e.SHA3}(requireCore(),requireX64Core())),sha3Exports}var ripemd160Exports={},ripemd160={get exports(){return ripemd160Exports},set exports(e){ripemd160Exports=e}},hasRequiredRipemd160;function requireRipemd160(){return hasRequiredRipemd160||(hasRequiredRipemd160=1,ripemd160.exports=function(e){/** @preserve
      (c) 2012 by Cdric Mesnil. All rights reserved.
      	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
      	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
          - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
      	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
      */return function(n){var r=e,o=r.lib,s=o.WordArray,u=o.Hasher,d=r.algo,f=s.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),v=s.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),m=s.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),_=s.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),g=s.create([0,1518500249,1859775393,2400959708,2840853838]),y=s.create([1352829926,1548603684,1836072691,2053994217,0]),w=d.RIPEMD160=u.extend({_doReset:function(){this._hash=s.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(I,F){for(var O=0;O<16;O++){var N=F+O,D=I[N];I[N]=16711935&(D<<8|D>>>24)|4278255360&(D<<24|D>>>8)}var X,U,Z,j,Q,ve,Se,we,oe,ne,q,H=this._hash.words,Y=g.words,le=y.words,Ce=f.words,Te=v.words,ke=m.words,Ee=_.words;for(ve=X=H[0],Se=U=H[1],we=Z=H[2],oe=j=H[3],ne=Q=H[4],O=0;O<80;O+=1)q=X+I[F+Ce[O]]|0,q+=O<16?x(U,Z,j)+Y[0]:O<32?k(U,Z,j)+Y[1]:O<48?S(U,Z,j)+Y[2]:O<64?E(U,Z,j)+Y[3]:T(U,Z,j)+Y[4],q=(q=M(q|=0,ke[O]))+Q|0,X=Q,Q=j,j=M(Z,10),Z=U,U=q,q=ve+I[F+Te[O]]|0,q+=O<16?T(Se,we,oe)+le[0]:O<32?E(Se,we,oe)+le[1]:O<48?S(Se,we,oe)+le[2]:O<64?k(Se,we,oe)+le[3]:x(Se,we,oe)+le[4],q=(q=M(q|=0,Ee[O]))+ne|0,ve=ne,ne=oe,oe=M(we,10),we=Se,Se=q;q=H[1]+Z+oe|0,H[1]=H[2]+j+ne|0,H[2]=H[3]+Q+ve|0,H[3]=H[4]+X+Se|0,H[4]=H[0]+U+we|0,H[0]=q},_doFinalize:function(){var I=this._data,F=I.words,O=8*this._nDataBytes,N=8*I.sigBytes;F[N>>>5]|=128<<24-N%32,F[14+(N+64>>>9<<4)]=16711935&(O<<8|O>>>24)|4278255360&(O<<24|O>>>8),I.sigBytes=4*(F.length+1),this._process();for(var D=this._hash,X=D.words,U=0;U<5;U++){var Z=X[U];X[U]=16711935&(Z<<8|Z>>>24)|4278255360&(Z<<24|Z>>>8)}return D},clone:function(){var I=u.clone.call(this);return I._hash=this._hash.clone(),I}});function x(I,F,O){return I^F^O}function k(I,F,O){return I&F|~I&O}function S(I,F,O){return(I|~F)^O}function E(I,F,O){return I&O|F&~O}function T(I,F,O){return I^(F|~O)}function M(I,F){return I<<F|I>>>32-F}r.RIPEMD160=u._createHelper(w),r.HmacRIPEMD160=u._createHmacHelper(w)}(),e.RIPEMD160}(requireCore())),ripemd160Exports}var hmacExports={},hmac={get exports(){return hmacExports},set exports(e){hmacExports=e}},hasRequiredHmac;function requireHmac(){return hasRequiredHmac||(hasRequiredHmac=1,hmac.exports=function(e){(function(){var n=e,r=n.lib.Base,o=n.enc.Utf8;n.algo.HMAC=r.extend({init:function(s,u){s=this._hasher=new s.init,typeof u=="string"&&(u=o.parse(u));var d=s.blockSize,f=4*d;u.sigBytes>f&&(u=s.finalize(u)),u.clamp();for(var v=this._oKey=u.clone(),m=this._iKey=u.clone(),_=v.words,g=m.words,y=0;y<d;y++)_[y]^=1549556828,g[y]^=909522486;v.sigBytes=m.sigBytes=f,this.reset()},reset:function(){var s=this._hasher;s.reset(),s.update(this._iKey)},update:function(s){return this._hasher.update(s),this},finalize:function(s){var u=this._hasher,d=u.finalize(s);return u.reset(),u.finalize(this._oKey.clone().concat(d))}})})()}(requireCore())),hmacExports}var pbkdf2Exports={},pbkdf2={get exports(){return pbkdf2Exports},set exports(e){pbkdf2Exports=e}},hasRequiredPbkdf2;function requirePbkdf2(){return hasRequiredPbkdf2||(hasRequiredPbkdf2=1,pbkdf2.exports=function(e){return function(){var n=e,r=n.lib,o=r.Base,s=r.WordArray,u=n.algo,d=u.SHA1,f=u.HMAC,v=u.PBKDF2=o.extend({cfg:o.extend({keySize:4,hasher:d,iterations:1}),init:function(m){this.cfg=this.cfg.extend(m)},compute:function(m,_){for(var g=this.cfg,y=f.create(g.hasher,m),w=s.create(),x=s.create([1]),k=w.words,S=x.words,E=g.keySize,T=g.iterations;k.length<E;){var M=y.update(_).finalize(x);y.reset();for(var I=M.words,F=I.length,O=M,N=1;N<T;N++){O=y.finalize(O),y.reset();for(var D=O.words,X=0;X<F;X++)I[X]^=D[X]}w.concat(M),S[0]++}return w.sigBytes=4*E,w}});n.PBKDF2=function(m,_,g){return v.create(g).compute(m,_)}}(),e.PBKDF2}(requireCore(),requireSha1(),requireHmac())),pbkdf2Exports}var evpkdfExports={},evpkdf={get exports(){return evpkdfExports},set exports(e){evpkdfExports=e}},hasRequiredEvpkdf;function requireEvpkdf(){return hasRequiredEvpkdf||(hasRequiredEvpkdf=1,evpkdf.exports=function(e){return function(){var n=e,r=n.lib,o=r.Base,s=r.WordArray,u=n.algo,d=u.MD5,f=u.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:d,iterations:1}),init:function(v){this.cfg=this.cfg.extend(v)},compute:function(v,m){for(var _,g=this.cfg,y=g.hasher.create(),w=s.create(),x=w.words,k=g.keySize,S=g.iterations;x.length<k;){_&&y.update(_),_=y.update(v).finalize(m),y.reset();for(var E=1;E<S;E++)_=y.finalize(_),y.reset();w.concat(_)}return w.sigBytes=4*k,w}});n.EvpKDF=function(v,m,_){return f.create(_).compute(v,m)}}(),e.EvpKDF}(requireCore(),requireSha1(),requireHmac())),evpkdfExports}var cipherCoreExports={},cipherCore={get exports(){return cipherCoreExports},set exports(e){cipherCoreExports=e}},hasRequiredCipherCore;function requireCipherCore(){return hasRequiredCipherCore||(hasRequiredCipherCore=1,cipherCore.exports=function(e){e.lib.Cipher||function(n){var r=e,o=r.lib,s=o.Base,u=o.WordArray,d=o.BufferedBlockAlgorithm,f=r.enc;f.Utf8;var v=f.Base64,m=r.algo.EvpKDF,_=o.Cipher=d.extend({cfg:s.extend(),createEncryptor:function(I,F){return this.create(this._ENC_XFORM_MODE,I,F)},createDecryptor:function(I,F){return this.create(this._DEC_XFORM_MODE,I,F)},init:function(I,F,O){this.cfg=this.cfg.extend(O),this._xformMode=I,this._key=F,this.reset()},reset:function(){d.reset.call(this),this._doReset()},process:function(I){return this._append(I),this._process()},finalize:function(I){return I&&this._append(I),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function I(F){return typeof F=="string"?M:E}return function(F){return{encrypt:function(O,N,D){return I(N).encrypt(F,O,N,D)},decrypt:function(O,N,D){return I(N).decrypt(F,O,N,D)}}}}()});o.StreamCipher=_.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var g=r.mode={},y=o.BlockCipherMode=s.extend({createEncryptor:function(I,F){return this.Encryptor.create(I,F)},createDecryptor:function(I,F){return this.Decryptor.create(I,F)},init:function(I,F){this._cipher=I,this._iv=F}}),w=g.CBC=function(){var I=y.extend();function F(O,N,D){var X,U=this._iv;U?(X=U,this._iv=n):X=this._prevBlock;for(var Z=0;Z<D;Z++)O[N+Z]^=X[Z]}return I.Encryptor=I.extend({processBlock:function(O,N){var D=this._cipher,X=D.blockSize;F.call(this,O,N,X),D.encryptBlock(O,N),this._prevBlock=O.slice(N,N+X)}}),I.Decryptor=I.extend({processBlock:function(O,N){var D=this._cipher,X=D.blockSize,U=O.slice(N,N+X);D.decryptBlock(O,N),F.call(this,O,N,X),this._prevBlock=U}}),I}(),x=(r.pad={}).Pkcs7={pad:function(I,F){for(var O=4*F,N=O-I.sigBytes%O,D=N<<24|N<<16|N<<8|N,X=[],U=0;U<N;U+=4)X.push(D);var Z=u.create(X,N);I.concat(Z)},unpad:function(I){var F=255&I.words[I.sigBytes-1>>>2];I.sigBytes-=F}};o.BlockCipher=_.extend({cfg:_.cfg.extend({mode:w,padding:x}),reset:function(){var I;_.reset.call(this);var F=this.cfg,O=F.iv,N=F.mode;this._xformMode==this._ENC_XFORM_MODE?I=N.createEncryptor:(I=N.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==I?this._mode.init(this,O&&O.words):(this._mode=I.call(N,this,O&&O.words),this._mode.__creator=I)},_doProcessBlock:function(I,F){this._mode.processBlock(I,F)},_doFinalize:function(){var I,F=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(F.pad(this._data,this.blockSize),I=this._process(!0)):(I=this._process(!0),F.unpad(I)),I},blockSize:4});var k=o.CipherParams=s.extend({init:function(I){this.mixIn(I)},toString:function(I){return(I||this.formatter).stringify(this)}}),S=(r.format={}).OpenSSL={stringify:function(I){var F=I.ciphertext,O=I.salt;return(O?u.create([1398893684,1701076831]).concat(O).concat(F):F).toString(v)},parse:function(I){var F,O=v.parse(I),N=O.words;return N[0]==1398893684&&N[1]==1701076831&&(F=u.create(N.slice(2,4)),N.splice(0,4),O.sigBytes-=16),k.create({ciphertext:O,salt:F})}},E=o.SerializableCipher=s.extend({cfg:s.extend({format:S}),encrypt:function(I,F,O,N){N=this.cfg.extend(N);var D=I.createEncryptor(O,N),X=D.finalize(F),U=D.cfg;return k.create({ciphertext:X,key:O,iv:U.iv,algorithm:I,mode:U.mode,padding:U.padding,blockSize:I.blockSize,formatter:N.format})},decrypt:function(I,F,O,N){return N=this.cfg.extend(N),F=this._parse(F,N.format),I.createDecryptor(O,N).finalize(F.ciphertext)},_parse:function(I,F){return typeof I=="string"?F.parse(I,this):I}}),T=(r.kdf={}).OpenSSL={execute:function(I,F,O,N){N||(N=u.random(8));var D=m.create({keySize:F+O}).compute(I,N),X=u.create(D.words.slice(F),4*O);return D.sigBytes=4*F,k.create({key:D,iv:X,salt:N})}},M=o.PasswordBasedCipher=E.extend({cfg:E.cfg.extend({kdf:T}),encrypt:function(I,F,O,N){var D=(N=this.cfg.extend(N)).kdf.execute(O,I.keySize,I.ivSize);N.iv=D.iv;var X=E.encrypt.call(this,I,F,D.key,N);return X.mixIn(D),X},decrypt:function(I,F,O,N){N=this.cfg.extend(N),F=this._parse(F,N.format);var D=N.kdf.execute(O,I.keySize,I.ivSize,F.salt);return N.iv=D.iv,E.decrypt.call(this,I,F,D.key,N)}})}()}(requireCore(),requireEvpkdf())),cipherCoreExports}var modeCfbExports={},modeCfb={get exports(){return modeCfbExports},set exports(e){modeCfbExports=e}},hasRequiredModeCfb;function requireModeCfb(){return hasRequiredModeCfb||(hasRequiredModeCfb=1,modeCfb.exports=function(e){return e.mode.CFB=function(){var n=e.lib.BlockCipherMode.extend();function r(o,s,u,d){var f,v=this._iv;v?(f=v.slice(0),this._iv=void 0):f=this._prevBlock,d.encryptBlock(f,0);for(var m=0;m<u;m++)o[s+m]^=f[m]}return n.Encryptor=n.extend({processBlock:function(o,s){var u=this._cipher,d=u.blockSize;r.call(this,o,s,d,u),this._prevBlock=o.slice(s,s+d)}}),n.Decryptor=n.extend({processBlock:function(o,s){var u=this._cipher,d=u.blockSize,f=o.slice(s,s+d);r.call(this,o,s,d,u),this._prevBlock=f}}),n}(),e.mode.CFB}(requireCore(),requireCipherCore())),modeCfbExports}var modeCtrExports={},modeCtr={get exports(){return modeCtrExports},set exports(e){modeCtrExports=e}},hasRequiredModeCtr;function requireModeCtr(){return hasRequiredModeCtr||(hasRequiredModeCtr=1,modeCtr.exports=function(e){return e.mode.CTR=(n=e.lib.BlockCipherMode.extend(),r=n.Encryptor=n.extend({processBlock:function(o,s){var u=this._cipher,d=u.blockSize,f=this._iv,v=this._counter;f&&(v=this._counter=f.slice(0),this._iv=void 0);var m=v.slice(0);u.encryptBlock(m,0),v[d-1]=v[d-1]+1|0;for(var _=0;_<d;_++)o[s+_]^=m[_]}}),n.Decryptor=r,n),e.mode.CTR;var n,r}(requireCore(),requireCipherCore())),modeCtrExports}var modeCtrGladmanExports={},modeCtrGladman={get exports(){return modeCtrGladmanExports},set exports(e){modeCtrGladmanExports=e}},hasRequiredModeCtrGladman;function requireModeCtrGladman(){return hasRequiredModeCtrGladman||(hasRequiredModeCtrGladman=1,modeCtrGladman.exports=function(e){/** @preserve
       * Counter block mode compatible with  Dr Brian Gladman fileenc.c
       * derived from CryptoJS.mode.CTR
       * Jan Hruby jhruby.web@gmail.com
       */return e.mode.CTRGladman=function(){var n=e.lib.BlockCipherMode.extend();function r(u){if((u>>24&255)==255){var d=u>>16&255,f=u>>8&255,v=255&u;d===255?(d=0,f===255?(f=0,v===255?v=0:++v):++f):++d,u=0,u+=d<<16,u+=f<<8,u+=v}else u+=1<<24;return u}function o(u){return(u[0]=r(u[0]))===0&&(u[1]=r(u[1])),u}var s=n.Encryptor=n.extend({processBlock:function(u,d){var f=this._cipher,v=f.blockSize,m=this._iv,_=this._counter;m&&(_=this._counter=m.slice(0),this._iv=void 0),o(_);var g=_.slice(0);f.encryptBlock(g,0);for(var y=0;y<v;y++)u[d+y]^=g[y]}});return n.Decryptor=s,n}(),e.mode.CTRGladman}(requireCore(),requireCipherCore())),modeCtrGladmanExports}var modeOfbExports={},modeOfb={get exports(){return modeOfbExports},set exports(e){modeOfbExports=e}},hasRequiredModeOfb;function requireModeOfb(){return hasRequiredModeOfb||(hasRequiredModeOfb=1,modeOfb.exports=function(e){return e.mode.OFB=(n=e.lib.BlockCipherMode.extend(),r=n.Encryptor=n.extend({processBlock:function(o,s){var u=this._cipher,d=u.blockSize,f=this._iv,v=this._keystream;f&&(v=this._keystream=f.slice(0),this._iv=void 0),u.encryptBlock(v,0);for(var m=0;m<d;m++)o[s+m]^=v[m]}}),n.Decryptor=r,n),e.mode.OFB;var n,r}(requireCore(),requireCipherCore())),modeOfbExports}var modeEcbExports={},modeEcb={get exports(){return modeEcbExports},set exports(e){modeEcbExports=e}},hasRequiredModeEcb;function requireModeEcb(){return hasRequiredModeEcb||(hasRequiredModeEcb=1,modeEcb.exports=function(e){return e.mode.ECB=((n=e.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(r,o){this._cipher.encryptBlock(r,o)}}),n.Decryptor=n.extend({processBlock:function(r,o){this._cipher.decryptBlock(r,o)}}),n),e.mode.ECB;var n}(requireCore(),requireCipherCore())),modeEcbExports}var padAnsix923Exports={},padAnsix923={get exports(){return padAnsix923Exports},set exports(e){padAnsix923Exports=e}},hasRequiredPadAnsix923;function requirePadAnsix923(){return hasRequiredPadAnsix923||(hasRequiredPadAnsix923=1,padAnsix923.exports=function(e){return e.pad.AnsiX923={pad:function(n,r){var o=n.sigBytes,s=4*r,u=s-o%s,d=o+u-1;n.clamp(),n.words[d>>>2]|=u<<24-d%4*8,n.sigBytes+=u},unpad:function(n){var r=255&n.words[n.sigBytes-1>>>2];n.sigBytes-=r}},e.pad.Ansix923}(requireCore(),requireCipherCore())),padAnsix923Exports}var padIso10126Exports={},padIso10126={get exports(){return padIso10126Exports},set exports(e){padIso10126Exports=e}},hasRequiredPadIso10126;function requirePadIso10126(){return hasRequiredPadIso10126||(hasRequiredPadIso10126=1,padIso10126.exports=function(e){return e.pad.Iso10126={pad:function(n,r){var o=4*r,s=o-n.sigBytes%o;n.concat(e.lib.WordArray.random(s-1)).concat(e.lib.WordArray.create([s<<24],1))},unpad:function(n){var r=255&n.words[n.sigBytes-1>>>2];n.sigBytes-=r}},e.pad.Iso10126}(requireCore(),requireCipherCore())),padIso10126Exports}var padIso97971Exports={},padIso97971={get exports(){return padIso97971Exports},set exports(e){padIso97971Exports=e}},hasRequiredPadIso97971;function requirePadIso97971(){return hasRequiredPadIso97971||(hasRequiredPadIso97971=1,padIso97971.exports=function(e){return e.pad.Iso97971={pad:function(n,r){n.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(n,r)},unpad:function(n){e.pad.ZeroPadding.unpad(n),n.sigBytes--}},e.pad.Iso97971}(requireCore(),requireCipherCore())),padIso97971Exports}var padZeropaddingExports={},padZeropadding={get exports(){return padZeropaddingExports},set exports(e){padZeropaddingExports=e}},hasRequiredPadZeropadding;function requirePadZeropadding(){return hasRequiredPadZeropadding||(hasRequiredPadZeropadding=1,padZeropadding.exports=function(e){return e.pad.ZeroPadding={pad:function(n,r){var o=4*r;n.clamp(),n.sigBytes+=o-(n.sigBytes%o||o)},unpad:function(n){var r=n.words,o=n.sigBytes-1;for(o=n.sigBytes-1;o>=0;o--)if(r[o>>>2]>>>24-o%4*8&255){n.sigBytes=o+1;break}}},e.pad.ZeroPadding}(requireCore(),requireCipherCore())),padZeropaddingExports}var padNopaddingExports={},padNopadding={get exports(){return padNopaddingExports},set exports(e){padNopaddingExports=e}},hasRequiredPadNopadding;function requirePadNopadding(){return hasRequiredPadNopadding||(hasRequiredPadNopadding=1,padNopadding.exports=function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding}(requireCore(),requireCipherCore())),padNopaddingExports}var formatHexExports={},formatHex={get exports(){return formatHexExports},set exports(e){formatHexExports=e}},hasRequiredFormatHex;function requireFormatHex(){return hasRequiredFormatHex||(hasRequiredFormatHex=1,formatHex.exports=function(e){return function(n){var r=e,o=r.lib.CipherParams,s=r.enc.Hex;r.format.Hex={stringify:function(u){return u.ciphertext.toString(s)},parse:function(u){var d=s.parse(u);return o.create({ciphertext:d})}}}(),e.format.Hex}(requireCore(),requireCipherCore())),formatHexExports}var aesExports={},aes={get exports(){return aesExports},set exports(e){aesExports=e}},hasRequiredAes;function requireAes(){return hasRequiredAes||(hasRequiredAes=1,aes.exports=function(e){return function(){var n=e,r=n.lib.BlockCipher,o=n.algo,s=[],u=[],d=[],f=[],v=[],m=[],_=[],g=[],y=[],w=[];(function(){for(var S=[],E=0;E<256;E++)S[E]=E<128?E<<1:E<<1^283;var T=0,M=0;for(E=0;E<256;E++){var I=M^M<<1^M<<2^M<<3^M<<4;I=I>>>8^255&I^99,s[T]=I,u[I]=T;var F=S[T],O=S[F],N=S[O],D=257*S[I]^16843008*I;d[T]=D<<24|D>>>8,f[T]=D<<16|D>>>16,v[T]=D<<8|D>>>24,m[T]=D,D=16843009*N^65537*O^257*F^16843008*T,_[I]=D<<24|D>>>8,g[I]=D<<16|D>>>16,y[I]=D<<8|D>>>24,w[I]=D,T?(T=F^S[S[S[N^F]]],M^=S[S[M]]):T=M=1}})();var x=[0,1,2,4,8,16,32,64,128,27,54],k=o.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var S=this._keyPriorReset=this._key,E=S.words,T=S.sigBytes/4,M=4*((this._nRounds=T+6)+1),I=this._keySchedule=[],F=0;F<M;F++)F<T?I[F]=E[F]:(D=I[F-1],F%T?T>6&&F%T==4&&(D=s[D>>>24]<<24|s[D>>>16&255]<<16|s[D>>>8&255]<<8|s[255&D]):(D=s[(D=D<<8|D>>>24)>>>24]<<24|s[D>>>16&255]<<16|s[D>>>8&255]<<8|s[255&D],D^=x[F/T|0]<<24),I[F]=I[F-T]^D);for(var O=this._invKeySchedule=[],N=0;N<M;N++){if(F=M-N,N%4)var D=I[F];else D=I[F-4];O[N]=N<4||F<=4?D:_[s[D>>>24]]^g[s[D>>>16&255]]^y[s[D>>>8&255]]^w[s[255&D]]}}},encryptBlock:function(S,E){this._doCryptBlock(S,E,this._keySchedule,d,f,v,m,s)},decryptBlock:function(S,E){var T=S[E+1];S[E+1]=S[E+3],S[E+3]=T,this._doCryptBlock(S,E,this._invKeySchedule,_,g,y,w,u),T=S[E+1],S[E+1]=S[E+3],S[E+3]=T},_doCryptBlock:function(S,E,T,M,I,F,O,N){for(var D=this._nRounds,X=S[E]^T[0],U=S[E+1]^T[1],Z=S[E+2]^T[2],j=S[E+3]^T[3],Q=4,ve=1;ve<D;ve++){var Se=M[X>>>24]^I[U>>>16&255]^F[Z>>>8&255]^O[255&j]^T[Q++],we=M[U>>>24]^I[Z>>>16&255]^F[j>>>8&255]^O[255&X]^T[Q++],oe=M[Z>>>24]^I[j>>>16&255]^F[X>>>8&255]^O[255&U]^T[Q++],ne=M[j>>>24]^I[X>>>16&255]^F[U>>>8&255]^O[255&Z]^T[Q++];X=Se,U=we,Z=oe,j=ne}Se=(N[X>>>24]<<24|N[U>>>16&255]<<16|N[Z>>>8&255]<<8|N[255&j])^T[Q++],we=(N[U>>>24]<<24|N[Z>>>16&255]<<16|N[j>>>8&255]<<8|N[255&X])^T[Q++],oe=(N[Z>>>24]<<24|N[j>>>16&255]<<16|N[X>>>8&255]<<8|N[255&U])^T[Q++],ne=(N[j>>>24]<<24|N[X>>>16&255]<<16|N[U>>>8&255]<<8|N[255&Z])^T[Q++],S[E]=Se,S[E+1]=we,S[E+2]=oe,S[E+3]=ne},keySize:8});n.AES=r._createHelper(k)}(),e.AES}(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())),aesExports}var tripledesExports={},tripledes={get exports(){return tripledesExports},set exports(e){tripledesExports=e}},hasRequiredTripledes;function requireTripledes(){return hasRequiredTripledes||(hasRequiredTripledes=1,tripledes.exports=function(e){return function(){var n=e,r=n.lib,o=r.WordArray,s=r.BlockCipher,u=n.algo,d=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],f=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],v=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],m=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],_=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],g=u.DES=s.extend({_doReset:function(){for(var k=this._key.words,S=[],E=0;E<56;E++){var T=d[E]-1;S[E]=k[T>>>5]>>>31-T%32&1}for(var M=this._subKeys=[],I=0;I<16;I++){var F=M[I]=[],O=v[I];for(E=0;E<24;E++)F[E/6|0]|=S[(f[E]-1+O)%28]<<31-E%6,F[4+(E/6|0)]|=S[28+(f[E+24]-1+O)%28]<<31-E%6;for(F[0]=F[0]<<1|F[0]>>>31,E=1;E<7;E++)F[E]=F[E]>>>4*(E-1)+3;F[7]=F[7]<<5|F[7]>>>27}var N=this._invSubKeys=[];for(E=0;E<16;E++)N[E]=M[15-E]},encryptBlock:function(k,S){this._doCryptBlock(k,S,this._subKeys)},decryptBlock:function(k,S){this._doCryptBlock(k,S,this._invSubKeys)},_doCryptBlock:function(k,S,E){this._lBlock=k[S],this._rBlock=k[S+1],y.call(this,4,252645135),y.call(this,16,65535),w.call(this,2,858993459),w.call(this,8,16711935),y.call(this,1,1431655765);for(var T=0;T<16;T++){for(var M=E[T],I=this._lBlock,F=this._rBlock,O=0,N=0;N<8;N++)O|=m[N][((F^M[N])&_[N])>>>0];this._lBlock=F,this._rBlock=I^O}var D=this._lBlock;this._lBlock=this._rBlock,this._rBlock=D,y.call(this,1,1431655765),w.call(this,8,16711935),w.call(this,2,858993459),y.call(this,16,65535),y.call(this,4,252645135),k[S]=this._lBlock,k[S+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function y(k,S){var E=(this._lBlock>>>k^this._rBlock)&S;this._rBlock^=E,this._lBlock^=E<<k}function w(k,S){var E=(this._rBlock>>>k^this._lBlock)&S;this._lBlock^=E,this._rBlock^=E<<k}n.DES=s._createHelper(g);var x=u.TripleDES=s.extend({_doReset:function(){var k=this._key.words;if(k.length!==2&&k.length!==4&&k.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var S=k.slice(0,2),E=k.length<4?k.slice(0,2):k.slice(2,4),T=k.length<6?k.slice(0,2):k.slice(4,6);this._des1=g.createEncryptor(o.create(S)),this._des2=g.createEncryptor(o.create(E)),this._des3=g.createEncryptor(o.create(T))},encryptBlock:function(k,S){this._des1.encryptBlock(k,S),this._des2.decryptBlock(k,S),this._des3.encryptBlock(k,S)},decryptBlock:function(k,S){this._des3.decryptBlock(k,S),this._des2.encryptBlock(k,S),this._des1.decryptBlock(k,S)},keySize:6,ivSize:2,blockSize:2});n.TripleDES=s._createHelper(x)}(),e.TripleDES}(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())),tripledesExports}var rc4Exports={},rc4={get exports(){return rc4Exports},set exports(e){rc4Exports=e}},hasRequiredRc4;function requireRc4(){return hasRequiredRc4||(hasRequiredRc4=1,rc4.exports=function(e){return function(){var n=e,r=n.lib.StreamCipher,o=n.algo,s=o.RC4=r.extend({_doReset:function(){for(var f=this._key,v=f.words,m=f.sigBytes,_=this._S=[],g=0;g<256;g++)_[g]=g;g=0;for(var y=0;g<256;g++){var w=g%m,x=v[w>>>2]>>>24-w%4*8&255;y=(y+_[g]+x)%256;var k=_[g];_[g]=_[y],_[y]=k}this._i=this._j=0},_doProcessBlock:function(f,v){f[v]^=u.call(this)},keySize:8,ivSize:0});function u(){for(var f=this._S,v=this._i,m=this._j,_=0,g=0;g<4;g++){m=(m+f[v=(v+1)%256])%256;var y=f[v];f[v]=f[m],f[m]=y,_|=f[(f[v]+f[m])%256]<<24-8*g}return this._i=v,this._j=m,_}n.RC4=r._createHelper(s);var d=o.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var f=this.cfg.drop;f>0;f--)u.call(this)}});n.RC4Drop=r._createHelper(d)}(),e.RC4}(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())),rc4Exports}var rabbitExports={},rabbit={get exports(){return rabbitExports},set exports(e){rabbitExports=e}},hasRequiredRabbit;function requireRabbit(){return hasRequiredRabbit||(hasRequiredRabbit=1,rabbit.exports=function(e){return function(){var n=e,r=n.lib.StreamCipher,o=n.algo,s=[],u=[],d=[],f=o.Rabbit=r.extend({_doReset:function(){for(var m=this._key.words,_=this.cfg.iv,g=0;g<4;g++)m[g]=16711935&(m[g]<<8|m[g]>>>24)|4278255360&(m[g]<<24|m[g]>>>8);var y=this._X=[m[0],m[3]<<16|m[2]>>>16,m[1],m[0]<<16|m[3]>>>16,m[2],m[1]<<16|m[0]>>>16,m[3],m[2]<<16|m[1]>>>16],w=this._C=[m[2]<<16|m[2]>>>16,4294901760&m[0]|65535&m[1],m[3]<<16|m[3]>>>16,4294901760&m[1]|65535&m[2],m[0]<<16|m[0]>>>16,4294901760&m[2]|65535&m[3],m[1]<<16|m[1]>>>16,4294901760&m[3]|65535&m[0]];for(this._b=0,g=0;g<4;g++)v.call(this);for(g=0;g<8;g++)w[g]^=y[g+4&7];if(_){var x=_.words,k=x[0],S=x[1],E=16711935&(k<<8|k>>>24)|4278255360&(k<<24|k>>>8),T=16711935&(S<<8|S>>>24)|4278255360&(S<<24|S>>>8),M=E>>>16|4294901760&T,I=T<<16|65535&E;for(w[0]^=E,w[1]^=M,w[2]^=T,w[3]^=I,w[4]^=E,w[5]^=M,w[6]^=T,w[7]^=I,g=0;g<4;g++)v.call(this)}},_doProcessBlock:function(m,_){var g=this._X;v.call(this),s[0]=g[0]^g[5]>>>16^g[3]<<16,s[1]=g[2]^g[7]>>>16^g[5]<<16,s[2]=g[4]^g[1]>>>16^g[7]<<16,s[3]=g[6]^g[3]>>>16^g[1]<<16;for(var y=0;y<4;y++)s[y]=16711935&(s[y]<<8|s[y]>>>24)|4278255360&(s[y]<<24|s[y]>>>8),m[_+y]^=s[y]},blockSize:4,ivSize:2});function v(){for(var m=this._X,_=this._C,g=0;g<8;g++)u[g]=_[g];for(_[0]=_[0]+1295307597+this._b|0,_[1]=_[1]+3545052371+(_[0]>>>0<u[0]>>>0?1:0)|0,_[2]=_[2]+886263092+(_[1]>>>0<u[1]>>>0?1:0)|0,_[3]=_[3]+1295307597+(_[2]>>>0<u[2]>>>0?1:0)|0,_[4]=_[4]+3545052371+(_[3]>>>0<u[3]>>>0?1:0)|0,_[5]=_[5]+886263092+(_[4]>>>0<u[4]>>>0?1:0)|0,_[6]=_[6]+1295307597+(_[5]>>>0<u[5]>>>0?1:0)|0,_[7]=_[7]+3545052371+(_[6]>>>0<u[6]>>>0?1:0)|0,this._b=_[7]>>>0<u[7]>>>0?1:0,g=0;g<8;g++){var y=m[g]+_[g],w=65535&y,x=y>>>16,k=((w*w>>>17)+w*x>>>15)+x*x,S=((4294901760&y)*y|0)+((65535&y)*y|0);d[g]=k^S}m[0]=d[0]+(d[7]<<16|d[7]>>>16)+(d[6]<<16|d[6]>>>16)|0,m[1]=d[1]+(d[0]<<8|d[0]>>>24)+d[7]|0,m[2]=d[2]+(d[1]<<16|d[1]>>>16)+(d[0]<<16|d[0]>>>16)|0,m[3]=d[3]+(d[2]<<8|d[2]>>>24)+d[1]|0,m[4]=d[4]+(d[3]<<16|d[3]>>>16)+(d[2]<<16|d[2]>>>16)|0,m[5]=d[5]+(d[4]<<8|d[4]>>>24)+d[3]|0,m[6]=d[6]+(d[5]<<16|d[5]>>>16)+(d[4]<<16|d[4]>>>16)|0,m[7]=d[7]+(d[6]<<8|d[6]>>>24)+d[5]|0}n.Rabbit=r._createHelper(f)}(),e.Rabbit}(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())),rabbitExports}var rabbitLegacyExports={},rabbitLegacy={get exports(){return rabbitLegacyExports},set exports(e){rabbitLegacyExports=e}},hasRequiredRabbitLegacy;function requireRabbitLegacy(){return hasRequiredRabbitLegacy||(hasRequiredRabbitLegacy=1,rabbitLegacy.exports=function(e){return function(){var n=e,r=n.lib.StreamCipher,o=n.algo,s=[],u=[],d=[],f=o.RabbitLegacy=r.extend({_doReset:function(){var m=this._key.words,_=this.cfg.iv,g=this._X=[m[0],m[3]<<16|m[2]>>>16,m[1],m[0]<<16|m[3]>>>16,m[2],m[1]<<16|m[0]>>>16,m[3],m[2]<<16|m[1]>>>16],y=this._C=[m[2]<<16|m[2]>>>16,4294901760&m[0]|65535&m[1],m[3]<<16|m[3]>>>16,4294901760&m[1]|65535&m[2],m[0]<<16|m[0]>>>16,4294901760&m[2]|65535&m[3],m[1]<<16|m[1]>>>16,4294901760&m[3]|65535&m[0]];this._b=0;for(var w=0;w<4;w++)v.call(this);for(w=0;w<8;w++)y[w]^=g[w+4&7];if(_){var x=_.words,k=x[0],S=x[1],E=16711935&(k<<8|k>>>24)|4278255360&(k<<24|k>>>8),T=16711935&(S<<8|S>>>24)|4278255360&(S<<24|S>>>8),M=E>>>16|4294901760&T,I=T<<16|65535&E;for(y[0]^=E,y[1]^=M,y[2]^=T,y[3]^=I,y[4]^=E,y[5]^=M,y[6]^=T,y[7]^=I,w=0;w<4;w++)v.call(this)}},_doProcessBlock:function(m,_){var g=this._X;v.call(this),s[0]=g[0]^g[5]>>>16^g[3]<<16,s[1]=g[2]^g[7]>>>16^g[5]<<16,s[2]=g[4]^g[1]>>>16^g[7]<<16,s[3]=g[6]^g[3]>>>16^g[1]<<16;for(var y=0;y<4;y++)s[y]=16711935&(s[y]<<8|s[y]>>>24)|4278255360&(s[y]<<24|s[y]>>>8),m[_+y]^=s[y]},blockSize:4,ivSize:2});function v(){for(var m=this._X,_=this._C,g=0;g<8;g++)u[g]=_[g];for(_[0]=_[0]+1295307597+this._b|0,_[1]=_[1]+3545052371+(_[0]>>>0<u[0]>>>0?1:0)|0,_[2]=_[2]+886263092+(_[1]>>>0<u[1]>>>0?1:0)|0,_[3]=_[3]+1295307597+(_[2]>>>0<u[2]>>>0?1:0)|0,_[4]=_[4]+3545052371+(_[3]>>>0<u[3]>>>0?1:0)|0,_[5]=_[5]+886263092+(_[4]>>>0<u[4]>>>0?1:0)|0,_[6]=_[6]+1295307597+(_[5]>>>0<u[5]>>>0?1:0)|0,_[7]=_[7]+3545052371+(_[6]>>>0<u[6]>>>0?1:0)|0,this._b=_[7]>>>0<u[7]>>>0?1:0,g=0;g<8;g++){var y=m[g]+_[g],w=65535&y,x=y>>>16,k=((w*w>>>17)+w*x>>>15)+x*x,S=((4294901760&y)*y|0)+((65535&y)*y|0);d[g]=k^S}m[0]=d[0]+(d[7]<<16|d[7]>>>16)+(d[6]<<16|d[6]>>>16)|0,m[1]=d[1]+(d[0]<<8|d[0]>>>24)+d[7]|0,m[2]=d[2]+(d[1]<<16|d[1]>>>16)+(d[0]<<16|d[0]>>>16)|0,m[3]=d[3]+(d[2]<<8|d[2]>>>24)+d[1]|0,m[4]=d[4]+(d[3]<<16|d[3]>>>16)+(d[2]<<16|d[2]>>>16)|0,m[5]=d[5]+(d[4]<<8|d[4]>>>24)+d[3]|0,m[6]=d[6]+(d[5]<<16|d[5]>>>16)+(d[4]<<16|d[4]>>>16)|0,m[7]=d[7]+(d[6]<<8|d[6]>>>24)+d[5]|0}n.RabbitLegacy=r._createHelper(f)}(),e.RabbitLegacy}(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())),rabbitLegacyExports}cryptoJs.exports=function(e){return e}(requireCore(),requireX64Core(),requireLibTypedarrays(),requireEncUtf16(),requireEncBase64(),requireEncBase64url(),requireMd5(),requireSha1(),requireSha256(),requireSha224(),requireSha512(),requireSha384(),requireSha3(),requireRipemd160(),requireHmac(),requirePbkdf2(),requireEvpkdf(),requireCipherCore(),requireModeCfb(),requireModeCtr(),requireModeCtrGladman(),requireModeOfb(),requireModeEcb(),requirePadAnsix923(),requirePadIso10126(),requirePadIso97971(),requirePadZeropadding(),requirePadNopadding(),requireFormatHex(),requireAes(),requireTripledes(),requireRc4(),requireRabbit(),requireRabbitLegacy());var CryptoJS=cryptoJsExports,BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";function int2char(e){return BI_RM.charAt(e)}function op_and(e,n){return e&n}function op_or(e,n){return e|n}function op_xor(e,n){return e^n}function op_andnot(e,n){return e&~n}function lbit(e){if(e==0)return-1;var n=0;return(65535&e)==0&&(e>>=16,n+=16),(255&e)==0&&(e>>=8,n+=8),(15&e)==0&&(e>>=4,n+=4),(3&e)==0&&(e>>=2,n+=2),(1&e)==0&&++n,n}function cbit(e){for(var n=0;e!=0;)e&=e-1,++n;return n}var b64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64pad="=",decoder$1;function hex2b64(e){var n,r,o="";for(n=0;n+3<=e.length;n+=3)r=parseInt(e.substring(n,n+3),16),o+=b64map.charAt(r>>6)+b64map.charAt(63&r);for(n+1==e.length?(r=parseInt(e.substring(n,n+1),16),o+=b64map.charAt(r<<2)):n+2==e.length&&(r=parseInt(e.substring(n,n+2),16),o+=b64map.charAt(r>>2)+b64map.charAt((3&r)<<4));(3&o.length)>0;)o+=b64pad;return o}function b64tohex(e){var n,r="",o=0,s=0;for(n=0;n<e.length&&e.charAt(n)!=b64pad;++n){var u=b64map.indexOf(e.charAt(n));u<0||(o==0?(r+=int2char(u>>2),s=3&u,o=1):o==1?(r+=int2char(s<<2|u>>4),s=15&u,o=2):o==2?(r+=int2char(s),r+=int2char(u>>2),s=3&u,o=3):(r+=int2char(s<<2|u>>4),r+=int2char(15&u),o=0))}return o==1&&(r+=int2char(s<<2)),r}var Hex={decode:function(e){var n;if(decoder$1===void 0){var r="0123456789ABCDEF",o=` \f
\r	\xA0\u2028\u2029`;for(decoder$1={},n=0;n<16;++n)decoder$1[r.charAt(n)]=n;for(r=r.toLowerCase(),n=10;n<16;++n)decoder$1[r.charAt(n)]=n;for(n=0;n<8;++n)decoder$1[o.charAt(n)]=-1}var s=[],u=0,d=0;for(n=0;n<e.length;++n){var f=e.charAt(n);if(f=="=")break;if((f=decoder$1[f])!=-1){if(f===void 0)throw new Error("Illegal character at offset "+n);u|=f,++d>=2?(s[s.length]=u,u=0,d=0):u<<=4}}if(d)throw new Error("Hex encoding incomplete: 4 bits missing");return s}},decoder,Base64$1={decode:function(e){var n;if(decoder===void 0){var r=`= \f
\r	\xA0\u2028\u2029`;for(decoder=Object.create(null),n=0;n<64;++n)decoder["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n)]=n;for(decoder["-"]=62,decoder._=63,n=0;n<9;++n)decoder[r.charAt(n)]=-1}var o=[],s=0,u=0;for(n=0;n<e.length;++n){var d=e.charAt(n);if(d=="=")break;if((d=decoder[d])!=-1){if(d===void 0)throw new Error("Illegal character at offset "+n);s|=d,++u>=4?(o[o.length]=s>>16,o[o.length]=s>>8&255,o[o.length]=255&s,s=0,u=0):s<<=6}}switch(u){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:o[o.length]=s>>10;break;case 3:o[o.length]=s>>16,o[o.length]=s>>8&255}return o},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(e){var n=Base64$1.re.exec(e);if(n)if(n[1])e=n[1];else{if(!n[2])throw new Error("RegExp out of sync");e=n[2]}return Base64$1.decode(e)}},max=1e13,Int10=function(){function e(n){this.buf=[+n||0]}return e.prototype.mulAdd=function(n,r){var o,s,u=this.buf,d=u.length;for(o=0;o<d;++o)(s=u[o]*n+r)<max?r=0:s-=(r=0|s/max)*max,u[o]=s;r>0&&(u[o]=r)},e.prototype.sub=function(n){var r,o,s=this.buf,u=s.length;for(r=0;r<u;++r)(o=s[r]-n)<0?(o+=max,n=1):n=0,s[r]=o;for(;s[s.length-1]===0;)s.pop()},e.prototype.toString=function(n){if((n||10)!=10)throw new Error("only base 10 is supported");for(var r=this.buf,o=r[r.length-1].toString(),s=r.length-2;s>=0;--s)o+=(max+r[s]).toString().substring(1);return o},e.prototype.valueOf=function(){for(var n=this.buf,r=0,o=n.length-1;o>=0;--o)r=r*max+n[o];return r},e.prototype.simplify=function(){var n=this.buf;return n.length==1?n[0]:this},e}(),ellipsis="\u2026",reTimeS=/^(\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,reTimeL=/^(\d\d\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;function stringCut(e,n){return e.length>n&&(e=e.substring(0,n)+ellipsis),e}var Stream=function(){function e(n,r){this.hexDigits="0123456789ABCDEF",n instanceof e?(this.enc=n.enc,this.pos=n.pos):(this.enc=n,this.pos=r)}return e.prototype.get=function(n){if(n===void 0&&(n=this.pos++),n>=this.enc.length)throw new Error("Requesting byte offset ".concat(n," on a stream of length ").concat(this.enc.length));return typeof this.enc=="string"?this.enc.charCodeAt(n):this.enc[n]},e.prototype.hexByte=function(n){return this.hexDigits.charAt(n>>4&15)+this.hexDigits.charAt(15&n)},e.prototype.hexDump=function(n,r,o){for(var s="",u=n;u<r;++u)if(s+=this.hexByte(this.get(u)),o!==!0)switch(15&u){case 7:s+="  ";break;case 15:s+=`
`;break;default:s+=" "}return s},e.prototype.isASCII=function(n,r){for(var o=n;o<r;++o){var s=this.get(o);if(s<32||s>176)return!1}return!0},e.prototype.parseStringISO=function(n,r){for(var o="",s=n;s<r;++s)o+=String.fromCharCode(this.get(s));return o},e.prototype.parseStringUTF=function(n,r){for(var o="",s=n;s<r;){var u=this.get(s++);o+=u<128?String.fromCharCode(u):u>191&&u<224?String.fromCharCode((31&u)<<6|63&this.get(s++)):String.fromCharCode((15&u)<<12|(63&this.get(s++))<<6|63&this.get(s++))}return o},e.prototype.parseStringBMP=function(n,r){for(var o,s,u="",d=n;d<r;)o=this.get(d++),s=this.get(d++),u+=String.fromCharCode(o<<8|s);return u},e.prototype.parseTime=function(n,r,o){var s=this.parseStringISO(n,r),u=(o?reTimeS:reTimeL).exec(s);return u?(o&&(u[1]=+u[1],u[1]+=+u[1]<70?2e3:1900),s=u[1]+"-"+u[2]+"-"+u[3]+" "+u[4],u[5]&&(s+=":"+u[5],u[6]&&(s+=":"+u[6],u[7]&&(s+="."+u[7]))),u[8]&&(s+=" UTC",u[8]!="Z"&&(s+=u[8],u[9]&&(s+=":"+u[9]))),s):"Unrecognized time: "+s},e.prototype.parseInteger=function(n,r){for(var o,s=this.get(n),u=s>127,d=u?255:0,f="";s==d&&++n<r;)s=this.get(n);if((o=r-n)===0)return u?-1:0;if(o>4){for(f=s,o<<=3;(128&(+f^d))==0;)f=+f<<1,--o;f="("+o+` bit)
`}u&&(s-=256);for(var v=new Int10(s),m=n+1;m<r;++m)v.mulAdd(256,this.get(m));return f+v.toString()},e.prototype.parseBitString=function(n,r,o){for(var s=this.get(n),u="("+((r-n-1<<3)-s)+` bit)
`,d="",f=n+1;f<r;++f){for(var v=this.get(f),m=f==r-1?s:0,_=7;_>=m;--_)d+=v>>_&1?"1":"0";if(d.length>o)return u+stringCut(d,o)}return u+d},e.prototype.parseOctetString=function(n,r,o){if(this.isASCII(n,r))return stringCut(this.parseStringISO(n,r),o);var s=r-n,u="("+s+` byte)
`;s>(o/=2)&&(r=n+o);for(var d=n;d<r;++d)u+=this.hexByte(this.get(d));return s>o&&(u+=ellipsis),u},e.prototype.parseOID=function(n,r,o){for(var s="",u=new Int10,d=0,f=n;f<r;++f){var v=this.get(f);if(u.mulAdd(128,127&v),d+=7,!(128&v)){if(s==="")if((u=u.simplify())instanceof Int10)u.sub(80),s="2."+u.toString();else{var m=u<80?u<40?0:1:2;s=m+"."+(u-40*m)}else s+="."+u.toString();if(s.length>o)return stringCut(s,o);u=new Int10,d=0}}return d>0&&(s+=".incomplete"),s},e}(),ASN1=function(){function e(n,r,o,s,u){if(!(s instanceof ASN1Tag))throw new Error("Invalid tag value.");this.stream=n,this.header=r,this.length=o,this.tag=s,this.sub=u}return e.prototype.typeName=function(){switch(this.tag.tagClass){case 0:switch(this.tag.tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString"}return"Universal_"+this.tag.tagNumber.toString();case 1:return"Application_"+this.tag.tagNumber.toString();case 2:return"["+this.tag.tagNumber.toString()+"]";case 3:return"Private_"+this.tag.tagNumber.toString()}},e.prototype.content=function(n){if(this.tag===void 0)return null;n===void 0&&(n=1/0);var r=this.posContent(),o=Math.abs(this.length);if(!this.tag.isUniversal())return this.sub!==null?"("+this.sub.length+" elem)":this.stream.parseOctetString(r,r+o,n);switch(this.tag.tagNumber){case 1:return this.stream.get(r)===0?"false":"true";case 2:return this.stream.parseInteger(r,r+o);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(r,r+o,n);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(r,r+o,n);case 6:return this.stream.parseOID(r,r+o,n);case 16:case 17:return this.sub!==null?"("+this.sub.length+" elem)":"(no elem)";case 12:return stringCut(this.stream.parseStringUTF(r,r+o),n);case 18:case 19:case 20:case 21:case 22:case 26:return stringCut(this.stream.parseStringISO(r,r+o),n);case 30:return stringCut(this.stream.parseStringBMP(r,r+o),n);case 23:case 24:return this.stream.parseTime(r,r+o,this.tag.tagNumber==23)}return null},e.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(this.sub===null?"null":this.sub.length)+"]"},e.prototype.toPrettyString=function(n){n===void 0&&(n="");var r=n+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(r+="+"),r+=this.length,this.tag.tagConstructed?r+=" (constructed)":!this.tag.isUniversal()||this.tag.tagNumber!=3&&this.tag.tagNumber!=4||this.sub===null||(r+=" (encapsulates)"),r+=`
`,this.sub!==null){n+="  ";for(var o=0,s=this.sub.length;o<s;++o)r+=this.sub[o].toPrettyString(n)}return r},e.prototype.posStart=function(){return this.stream.pos},e.prototype.posContent=function(){return this.stream.pos+this.header},e.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},e.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},e.decodeLength=function(n){var r=n.get(),o=127&r;if(o==r)return o;if(o>6)throw new Error("Length over 48 bits not supported at position "+(n.pos-1));if(o===0)return null;r=0;for(var s=0;s<o;++s)r=256*r+n.get();return r},e.prototype.getHexStringValue=function(){var n=this.toHexString(),r=2*this.header,o=2*this.length;return n.substr(r,o)},e.decode=function(n){var r;r=n instanceof Stream?n:new Stream(n,0);var o=new Stream(r),s=new ASN1Tag(r),u=e.decodeLength(r),d=r.pos,f=d-o.pos,v=null,m=function(){var g=[];if(u!==null){for(var y=d+u;r.pos<y;)g[g.length]=e.decode(r);if(r.pos!=y)throw new Error("Content size is not correct for container starting at offset "+d)}else try{for(;;){var w=e.decode(r);if(w.tag.isEOC())break;g[g.length]=w}u=d-r.pos}catch(x){throw new Error("Exception while decoding undefined length content: "+x)}return g};if(s.tagConstructed)v=m();else if(s.isUniversal()&&(s.tagNumber==3||s.tagNumber==4))try{if(s.tagNumber==3&&r.get()!=0)throw new Error("BIT STRINGs with unused bits cannot encapsulate.");v=m();for(var _=0;_<v.length;++_)if(v[_].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch{v=null}if(v===null){if(u===null)throw new Error("We can't skip over an invalid tag with undefined length at offset "+d);r.pos=d+Math.abs(u)}return new e(o,f,u,s,v)},e}(),ASN1Tag=function(){function e(n){var r=n.get();if(this.tagClass=r>>6,this.tagConstructed=(32&r)!=0,this.tagNumber=31&r,this.tagNumber==31){var o=new Int10;do r=n.get(),o.mulAdd(128,127&r);while(128&r);this.tagNumber=o.simplify()}}return e.prototype.isUniversal=function(){return this.tagClass===0},e.prototype.isEOC=function(){return this.tagClass===0&&this.tagNumber===0},e}(),dbits,canary=0xdeadbeefcafe,j_lm=(16777215&canary)==15715070,lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],lplim=(1<<26)/lowprimes[lowprimes.length-1],BigInteger=function(){function e(n,r,o){n!=null&&(typeof n=="number"?this.fromNumber(n,r,o):r==null&&typeof n!="string"?this.fromString(n,256):this.fromString(n,r))}return e.prototype.toString=function(n){if(this.s<0)return"-"+this.negate().toString(n);var r;if(n==16)r=4;else if(n==8)r=3;else if(n==2)r=1;else if(n==32)r=5;else{if(n!=4)return this.toRadix(n);r=2}var o,s=(1<<r)-1,u=!1,d="",f=this.t,v=this.DB-f*this.DB%r;if(f-- >0)for(v<this.DB&&(o=this[f]>>v)>0&&(u=!0,d=int2char(o));f>=0;)v<r?(o=(this[f]&(1<<v)-1)<<r-v,o|=this[--f]>>(v+=this.DB-r)):(o=this[f]>>(v-=r)&s,v<=0&&(v+=this.DB,--f)),o>0&&(u=!0),u&&(d+=int2char(o));return u?d:"0"},e.prototype.negate=function(){var n=nbi();return e.ZERO.subTo(this,n),n},e.prototype.abs=function(){return this.s<0?this.negate():this},e.prototype.compareTo=function(n){var r=this.s-n.s;if(r!=0)return r;var o=this.t;if((r=o-n.t)!=0)return this.s<0?-r:r;for(;--o>=0;)if((r=this[o]-n[o])!=0)return r;return 0},e.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)},e.prototype.mod=function(n){var r=nbi();return this.abs().divRemTo(n,null,r),this.s<0&&r.compareTo(e.ZERO)>0&&n.subTo(r,r),r},e.prototype.modPowInt=function(n,r){var o;return o=n<256||r.isEven()?new Classic(r):new Montgomery(r),this.exp(n,o)},e.prototype.clone=function(){var n=nbi();return this.copyTo(n),n},e.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},e.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},e.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},e.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},e.prototype.toByteArray=function(){var n=this.t,r=[];r[0]=this.s;var o,s=this.DB-n*this.DB%8,u=0;if(n-- >0)for(s<this.DB&&(o=this[n]>>s)!=(this.s&this.DM)>>s&&(r[u++]=o|this.s<<this.DB-s);n>=0;)s<8?(o=(this[n]&(1<<s)-1)<<8-s,o|=this[--n]>>(s+=this.DB-8)):(o=this[n]>>(s-=8)&255,s<=0&&(s+=this.DB,--n)),(128&o)!=0&&(o|=-256),u==0&&(128&this.s)!=(128&o)&&++u,(u>0||o!=this.s)&&(r[u++]=o);return r},e.prototype.equals=function(n){return this.compareTo(n)==0},e.prototype.min=function(n){return this.compareTo(n)<0?this:n},e.prototype.max=function(n){return this.compareTo(n)>0?this:n},e.prototype.and=function(n){var r=nbi();return this.bitwiseTo(n,op_and,r),r},e.prototype.or=function(n){var r=nbi();return this.bitwiseTo(n,op_or,r),r},e.prototype.xor=function(n){var r=nbi();return this.bitwiseTo(n,op_xor,r),r},e.prototype.andNot=function(n){var r=nbi();return this.bitwiseTo(n,op_andnot,r),r},e.prototype.not=function(){for(var n=nbi(),r=0;r<this.t;++r)n[r]=this.DM&~this[r];return n.t=this.t,n.s=~this.s,n},e.prototype.shiftLeft=function(n){var r=nbi();return n<0?this.rShiftTo(-n,r):this.lShiftTo(n,r),r},e.prototype.shiftRight=function(n){var r=nbi();return n<0?this.lShiftTo(-n,r):this.rShiftTo(n,r),r},e.prototype.getLowestSetBit=function(){for(var n=0;n<this.t;++n)if(this[n]!=0)return n*this.DB+lbit(this[n]);return this.s<0?this.t*this.DB:-1},e.prototype.bitCount=function(){for(var n=0,r=this.s&this.DM,o=0;o<this.t;++o)n+=cbit(this[o]^r);return n},e.prototype.testBit=function(n){var r=Math.floor(n/this.DB);return r>=this.t?this.s!=0:(this[r]&1<<n%this.DB)!=0},e.prototype.setBit=function(n){return this.changeBit(n,op_or)},e.prototype.clearBit=function(n){return this.changeBit(n,op_andnot)},e.prototype.flipBit=function(n){return this.changeBit(n,op_xor)},e.prototype.add=function(n){var r=nbi();return this.addTo(n,r),r},e.prototype.subtract=function(n){var r=nbi();return this.subTo(n,r),r},e.prototype.multiply=function(n){var r=nbi();return this.multiplyTo(n,r),r},e.prototype.divide=function(n){var r=nbi();return this.divRemTo(n,r,null),r},e.prototype.remainder=function(n){var r=nbi();return this.divRemTo(n,null,r),r},e.prototype.divideAndRemainder=function(n){var r=nbi(),o=nbi();return this.divRemTo(n,r,o),[r,o]},e.prototype.modPow=function(n,r){var o,s,u=n.bitLength(),d=nbv(1);if(u<=0)return d;o=u<18?1:u<48?3:u<144?4:u<768?5:6,s=u<8?new Classic(r):r.isEven()?new Barrett(r):new Montgomery(r);var f=[],v=3,m=o-1,_=(1<<o)-1;if(f[1]=s.convert(this),o>1){var g=nbi();for(s.sqrTo(f[1],g);v<=_;)f[v]=nbi(),s.mulTo(g,f[v-2],f[v]),v+=2}var y,w,x=n.t-1,k=!0,S=nbi();for(u=nbits(n[x])-1;x>=0;){for(u>=m?y=n[x]>>u-m&_:(y=(n[x]&(1<<u+1)-1)<<m-u,x>0&&(y|=n[x-1]>>this.DB+u-m)),v=o;(1&y)==0;)y>>=1,--v;if((u-=v)<0&&(u+=this.DB,--x),k)f[y].copyTo(d),k=!1;else{for(;v>1;)s.sqrTo(d,S),s.sqrTo(S,d),v-=2;v>0?s.sqrTo(d,S):(w=d,d=S,S=w),s.mulTo(S,f[y],d)}for(;x>=0&&(n[x]&1<<u)==0;)s.sqrTo(d,S),w=d,d=S,S=w,--u<0&&(u=this.DB-1,--x)}return s.revert(d)},e.prototype.modInverse=function(n){var r=n.isEven();if(this.isEven()&&r||n.signum()==0)return e.ZERO;for(var o=n.clone(),s=this.clone(),u=nbv(1),d=nbv(0),f=nbv(0),v=nbv(1);o.signum()!=0;){for(;o.isEven();)o.rShiftTo(1,o),r?(u.isEven()&&d.isEven()||(u.addTo(this,u),d.subTo(n,d)),u.rShiftTo(1,u)):d.isEven()||d.subTo(n,d),d.rShiftTo(1,d);for(;s.isEven();)s.rShiftTo(1,s),r?(f.isEven()&&v.isEven()||(f.addTo(this,f),v.subTo(n,v)),f.rShiftTo(1,f)):v.isEven()||v.subTo(n,v),v.rShiftTo(1,v);o.compareTo(s)>=0?(o.subTo(s,o),r&&u.subTo(f,u),d.subTo(v,d)):(s.subTo(o,s),r&&f.subTo(u,f),v.subTo(d,v))}return s.compareTo(e.ONE)!=0?e.ZERO:v.compareTo(n)>=0?v.subtract(n):v.signum()<0?(v.addTo(n,v),v.signum()<0?v.add(n):v):v},e.prototype.pow=function(n){return this.exp(n,new NullExp)},e.prototype.gcd=function(n){var r=this.s<0?this.negate():this.clone(),o=n.s<0?n.negate():n.clone();if(r.compareTo(o)<0){var s=r;r=o,o=s}var u=r.getLowestSetBit(),d=o.getLowestSetBit();if(d<0)return r;for(u<d&&(d=u),d>0&&(r.rShiftTo(d,r),o.rShiftTo(d,o));r.signum()>0;)(u=r.getLowestSetBit())>0&&r.rShiftTo(u,r),(u=o.getLowestSetBit())>0&&o.rShiftTo(u,o),r.compareTo(o)>=0?(r.subTo(o,r),r.rShiftTo(1,r)):(o.subTo(r,o),o.rShiftTo(1,o));return d>0&&o.lShiftTo(d,o),o},e.prototype.isProbablePrime=function(n){var r,o=this.abs();if(o.t==1&&o[0]<=lowprimes[lowprimes.length-1]){for(r=0;r<lowprimes.length;++r)if(o[0]==lowprimes[r])return!0;return!1}if(o.isEven())return!1;for(r=1;r<lowprimes.length;){for(var s=lowprimes[r],u=r+1;u<lowprimes.length&&s<lplim;)s*=lowprimes[u++];for(s=o.modInt(s);r<u;)if(s%lowprimes[r++]==0)return!1}return o.millerRabin(n)},e.prototype.copyTo=function(n){for(var r=this.t-1;r>=0;--r)n[r]=this[r];n.t=this.t,n.s=this.s},e.prototype.fromInt=function(n){this.t=1,this.s=n<0?-1:0,n>0?this[0]=n:n<-1?this[0]=n+this.DV:this.t=0},e.prototype.fromString=function(n,r){var o;if(r==16)o=4;else if(r==8)o=3;else if(r==256)o=8;else if(r==2)o=1;else if(r==32)o=5;else{if(r!=4)return void this.fromRadix(n,r);o=2}this.t=0,this.s=0;for(var s=n.length,u=!1,d=0;--s>=0;){var f=o==8?255&+n[s]:intAt(n,s);f<0?n.charAt(s)=="-"&&(u=!0):(u=!1,d==0?this[this.t++]=f:d+o>this.DB?(this[this.t-1]|=(f&(1<<this.DB-d)-1)<<d,this[this.t++]=f>>this.DB-d):this[this.t-1]|=f<<d,(d+=o)>=this.DB&&(d-=this.DB))}o==8&&(128&+n[0])!=0&&(this.s=-1,d>0&&(this[this.t-1]|=(1<<this.DB-d)-1<<d)),this.clamp(),u&&e.ZERO.subTo(this,this)},e.prototype.clamp=function(){for(var n=this.s&this.DM;this.t>0&&this[this.t-1]==n;)--this.t},e.prototype.dlShiftTo=function(n,r){var o;for(o=this.t-1;o>=0;--o)r[o+n]=this[o];for(o=n-1;o>=0;--o)r[o]=0;r.t=this.t+n,r.s=this.s},e.prototype.drShiftTo=function(n,r){for(var o=n;o<this.t;++o)r[o-n]=this[o];r.t=Math.max(this.t-n,0),r.s=this.s},e.prototype.lShiftTo=function(n,r){for(var o=n%this.DB,s=this.DB-o,u=(1<<s)-1,d=Math.floor(n/this.DB),f=this.s<<o&this.DM,v=this.t-1;v>=0;--v)r[v+d+1]=this[v]>>s|f,f=(this[v]&u)<<o;for(v=d-1;v>=0;--v)r[v]=0;r[d]=f,r.t=this.t+d+1,r.s=this.s,r.clamp()},e.prototype.rShiftTo=function(n,r){r.s=this.s;var o=Math.floor(n/this.DB);if(o>=this.t)r.t=0;else{var s=n%this.DB,u=this.DB-s,d=(1<<s)-1;r[0]=this[o]>>s;for(var f=o+1;f<this.t;++f)r[f-o-1]|=(this[f]&d)<<u,r[f-o]=this[f]>>s;s>0&&(r[this.t-o-1]|=(this.s&d)<<u),r.t=this.t-o,r.clamp()}},e.prototype.subTo=function(n,r){for(var o=0,s=0,u=Math.min(n.t,this.t);o<u;)s+=this[o]-n[o],r[o++]=s&this.DM,s>>=this.DB;if(n.t<this.t){for(s-=n.s;o<this.t;)s+=this[o],r[o++]=s&this.DM,s>>=this.DB;s+=this.s}else{for(s+=this.s;o<n.t;)s-=n[o],r[o++]=s&this.DM,s>>=this.DB;s-=n.s}r.s=s<0?-1:0,s<-1?r[o++]=this.DV+s:s>0&&(r[o++]=s),r.t=o,r.clamp()},e.prototype.multiplyTo=function(n,r){var o=this.abs(),s=n.abs(),u=o.t;for(r.t=u+s.t;--u>=0;)r[u]=0;for(u=0;u<s.t;++u)r[u+o.t]=o.am(0,s[u],r,u,0,o.t);r.s=0,r.clamp(),this.s!=n.s&&e.ZERO.subTo(r,r)},e.prototype.squareTo=function(n){for(var r=this.abs(),o=n.t=2*r.t;--o>=0;)n[o]=0;for(o=0;o<r.t-1;++o){var s=r.am(o,r[o],n,2*o,0,1);(n[o+r.t]+=r.am(o+1,2*r[o],n,2*o+1,s,r.t-o-1))>=r.DV&&(n[o+r.t]-=r.DV,n[o+r.t+1]=1)}n.t>0&&(n[n.t-1]+=r.am(o,r[o],n,2*o,0,1)),n.s=0,n.clamp()},e.prototype.divRemTo=function(n,r,o){var s=n.abs();if(!(s.t<=0)){var u=this.abs();if(u.t<s.t)return r!=null&&r.fromInt(0),void(o!=null&&this.copyTo(o));o==null&&(o=nbi());var d=nbi(),f=this.s,v=n.s,m=this.DB-nbits(s[s.t-1]);m>0?(s.lShiftTo(m,d),u.lShiftTo(m,o)):(s.copyTo(d),u.copyTo(o));var _=d.t,g=d[_-1];if(g!=0){var y=g*(1<<this.F1)+(_>1?d[_-2]>>this.F2:0),w=this.FV/y,x=(1<<this.F1)/y,k=1<<this.F2,S=o.t,E=S-_,T=r==null?nbi():r;for(d.dlShiftTo(E,T),o.compareTo(T)>=0&&(o[o.t++]=1,o.subTo(T,o)),e.ONE.dlShiftTo(_,T),T.subTo(d,d);d.t<_;)d[d.t++]=0;for(;--E>=0;){var M=o[--S]==g?this.DM:Math.floor(o[S]*w+(o[S-1]+k)*x);if((o[S]+=d.am(0,M,o,E,0,_))<M)for(d.dlShiftTo(E,T),o.subTo(T,o);o[S]<--M;)o.subTo(T,o)}r!=null&&(o.drShiftTo(_,r),f!=v&&e.ZERO.subTo(r,r)),o.t=_,o.clamp(),m>0&&o.rShiftTo(m,o),f<0&&e.ZERO.subTo(o,o)}}},e.prototype.invDigit=function(){if(this.t<1)return 0;var n=this[0];if((1&n)==0)return 0;var r=3&n;return(r=(r=(r=(r=r*(2-(15&n)*r)&15)*(2-(255&n)*r)&255)*(2-((65535&n)*r&65535))&65535)*(2-n*r%this.DV)%this.DV)>0?this.DV-r:-r},e.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},e.prototype.exp=function(n,r){if(n>4294967295||n<1)return e.ONE;var o=nbi(),s=nbi(),u=r.convert(this),d=nbits(n)-1;for(u.copyTo(o);--d>=0;)if(r.sqrTo(o,s),(n&1<<d)>0)r.mulTo(s,u,o);else{var f=o;o=s,s=f}return r.revert(o)},e.prototype.chunkSize=function(n){return Math.floor(Math.LN2*this.DB/Math.log(n))},e.prototype.toRadix=function(n){if(n==null&&(n=10),this.signum()==0||n<2||n>36)return"0";var r=this.chunkSize(n),o=Math.pow(n,r),s=nbv(o),u=nbi(),d=nbi(),f="";for(this.divRemTo(s,u,d);u.signum()>0;)f=(o+d.intValue()).toString(n).substr(1)+f,u.divRemTo(s,u,d);return d.intValue().toString(n)+f},e.prototype.fromRadix=function(n,r){this.fromInt(0),r==null&&(r=10);for(var o=this.chunkSize(r),s=Math.pow(r,o),u=!1,d=0,f=0,v=0;v<n.length;++v){var m=intAt(n,v);m<0?n.charAt(v)=="-"&&this.signum()==0&&(u=!0):(f=r*f+m,++d>=o&&(this.dMultiply(s),this.dAddOffset(f,0),d=0,f=0))}d>0&&(this.dMultiply(Math.pow(r,d)),this.dAddOffset(f,0)),u&&e.ZERO.subTo(this,this)},e.prototype.fromNumber=function(n,r,o){if(typeof r=="number")if(n<2)this.fromInt(1);else for(this.fromNumber(n,o),this.testBit(n-1)||this.bitwiseTo(e.ONE.shiftLeft(n-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(r);)this.dAddOffset(2,0),this.bitLength()>n&&this.subTo(e.ONE.shiftLeft(n-1),this);else{var s=[],u=7&n;s.length=1+(n>>3),r.nextBytes(s),u>0?s[0]&=(1<<u)-1:s[0]=0,this.fromString(s,256)}},e.prototype.bitwiseTo=function(n,r,o){var s,u,d=Math.min(n.t,this.t);for(s=0;s<d;++s)o[s]=r(this[s],n[s]);if(n.t<this.t){for(u=n.s&this.DM,s=d;s<this.t;++s)o[s]=r(this[s],u);o.t=this.t}else{for(u=this.s&this.DM,s=d;s<n.t;++s)o[s]=r(u,n[s]);o.t=n.t}o.s=r(this.s,n.s),o.clamp()},e.prototype.changeBit=function(n,r){var o=e.ONE.shiftLeft(n);return this.bitwiseTo(o,r,o),o},e.prototype.addTo=function(n,r){for(var o=0,s=0,u=Math.min(n.t,this.t);o<u;)s+=this[o]+n[o],r[o++]=s&this.DM,s>>=this.DB;if(n.t<this.t){for(s+=n.s;o<this.t;)s+=this[o],r[o++]=s&this.DM,s>>=this.DB;s+=this.s}else{for(s+=this.s;o<n.t;)s+=n[o],r[o++]=s&this.DM,s>>=this.DB;s+=n.s}r.s=s<0?-1:0,s>0?r[o++]=s:s<-1&&(r[o++]=this.DV+s),r.t=o,r.clamp()},e.prototype.dMultiply=function(n){this[this.t]=this.am(0,n-1,this,0,0,this.t),++this.t,this.clamp()},e.prototype.dAddOffset=function(n,r){if(n!=0){for(;this.t<=r;)this[this.t++]=0;for(this[r]+=n;this[r]>=this.DV;)this[r]-=this.DV,++r>=this.t&&(this[this.t++]=0),++this[r]}},e.prototype.multiplyLowerTo=function(n,r,o){var s=Math.min(this.t+n.t,r);for(o.s=0,o.t=s;s>0;)o[--s]=0;for(var u=o.t-this.t;s<u;++s)o[s+this.t]=this.am(0,n[s],o,s,0,this.t);for(u=Math.min(n.t,r);s<u;++s)this.am(0,n[s],o,s,0,r-s);o.clamp()},e.prototype.multiplyUpperTo=function(n,r,o){--r;var s=o.t=this.t+n.t-r;for(o.s=0;--s>=0;)o[s]=0;for(s=Math.max(r-this.t,0);s<n.t;++s)o[this.t+s-r]=this.am(r-s,n[s],o,0,0,this.t+s-r);o.clamp(),o.drShiftTo(1,o)},e.prototype.modInt=function(n){if(n<=0)return 0;var r=this.DV%n,o=this.s<0?n-1:0;if(this.t>0)if(r==0)o=this[0]%n;else for(var s=this.t-1;s>=0;--s)o=(r*o+this[s])%n;return o},e.prototype.millerRabin=function(n){var r=this.subtract(e.ONE),o=r.getLowestSetBit();if(o<=0)return!1;var s=r.shiftRight(o);(n=n+1>>1)>lowprimes.length&&(n=lowprimes.length);for(var u=nbi(),d=0;d<n;++d){u.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var f=u.modPow(s,this);if(f.compareTo(e.ONE)!=0&&f.compareTo(r)!=0){for(var v=1;v++<o&&f.compareTo(r)!=0;)if((f=f.modPowInt(2,this)).compareTo(e.ONE)==0)return!1;if(f.compareTo(r)!=0)return!1}}return!0},e.prototype.square=function(){var n=nbi();return this.squareTo(n),n},e.prototype.gcda=function(n,r){var o=this.s<0?this.negate():this.clone(),s=n.s<0?n.negate():n.clone();if(o.compareTo(s)<0){var u=o;o=s,s=u}var d=o.getLowestSetBit(),f=s.getLowestSetBit();f<0?r(o):(d<f&&(f=d),f>0&&(o.rShiftTo(f,o),s.rShiftTo(f,s)),setTimeout(function v(){(d=o.getLowestSetBit())>0&&o.rShiftTo(d,o),(d=s.getLowestSetBit())>0&&s.rShiftTo(d,s),o.compareTo(s)>=0?(o.subTo(s,o),o.rShiftTo(1,o)):(s.subTo(o,s),s.rShiftTo(1,s)),o.signum()>0?setTimeout(v,0):(f>0&&s.lShiftTo(f,s),setTimeout(function(){r(s)},0))},10))},e.prototype.fromNumberAsync=function(n,r,o,s){if(typeof r=="number")if(n<2)this.fromInt(1);else{this.fromNumber(n,o),this.testBit(n-1)||this.bitwiseTo(e.ONE.shiftLeft(n-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);var u=this;setTimeout(function v(){u.dAddOffset(2,0),u.bitLength()>n&&u.subTo(e.ONE.shiftLeft(n-1),u),u.isProbablePrime(r)?setTimeout(function(){s()},0):setTimeout(v,0)},0)}else{var d=[],f=7&n;d.length=1+(n>>3),r.nextBytes(d),f>0?d[0]&=(1<<f)-1:d[0]=0,this.fromString(d,256)}},e}(),NullExp=function(){function e(){}return e.prototype.convert=function(n){return n},e.prototype.revert=function(n){return n},e.prototype.mulTo=function(n,r,o){n.multiplyTo(r,o)},e.prototype.sqrTo=function(n,r){n.squareTo(r)},e}(),Classic=function(){function e(n){this.m=n}return e.prototype.convert=function(n){return n.s<0||n.compareTo(this.m)>=0?n.mod(this.m):n},e.prototype.revert=function(n){return n},e.prototype.reduce=function(n){n.divRemTo(this.m,null,n)},e.prototype.mulTo=function(n,r,o){n.multiplyTo(r,o),this.reduce(o)},e.prototype.sqrTo=function(n,r){n.squareTo(r),this.reduce(r)},e}(),Montgomery=function(){function e(n){this.m=n,this.mp=n.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<n.DB-15)-1,this.mt2=2*n.t}return e.prototype.convert=function(n){var r=nbi();return n.abs().dlShiftTo(this.m.t,r),r.divRemTo(this.m,null,r),n.s<0&&r.compareTo(BigInteger.ZERO)>0&&this.m.subTo(r,r),r},e.prototype.revert=function(n){var r=nbi();return n.copyTo(r),this.reduce(r),r},e.prototype.reduce=function(n){for(;n.t<=this.mt2;)n[n.t++]=0;for(var r=0;r<this.m.t;++r){var o=32767&n[r],s=o*this.mpl+((o*this.mph+(n[r]>>15)*this.mpl&this.um)<<15)&n.DM;for(n[o=r+this.m.t]+=this.m.am(0,s,n,r,0,this.m.t);n[o]>=n.DV;)n[o]-=n.DV,n[++o]++}n.clamp(),n.drShiftTo(this.m.t,n),n.compareTo(this.m)>=0&&n.subTo(this.m,n)},e.prototype.mulTo=function(n,r,o){n.multiplyTo(r,o),this.reduce(o)},e.prototype.sqrTo=function(n,r){n.squareTo(r),this.reduce(r)},e}(),Barrett=function(){function e(n){this.m=n,this.r2=nbi(),this.q3=nbi(),BigInteger.ONE.dlShiftTo(2*n.t,this.r2),this.mu=this.r2.divide(n)}return e.prototype.convert=function(n){if(n.s<0||n.t>2*this.m.t)return n.mod(this.m);if(n.compareTo(this.m)<0)return n;var r=nbi();return n.copyTo(r),this.reduce(r),r},e.prototype.revert=function(n){return n},e.prototype.reduce=function(n){for(n.drShiftTo(this.m.t-1,this.r2),n.t>this.m.t+1&&(n.t=this.m.t+1,n.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);n.compareTo(this.r2)<0;)n.dAddOffset(1,this.m.t+1);for(n.subTo(this.r2,n);n.compareTo(this.m)>=0;)n.subTo(this.m,n)},e.prototype.mulTo=function(n,r,o){n.multiplyTo(r,o),this.reduce(o)},e.prototype.sqrTo=function(n,r){n.squareTo(r),this.reduce(r)},e}();function nbi(){return new BigInteger(null)}function parseBigInt(e,n){return new BigInteger(e,n)}var inBrowser=typeof navigator<"u";inBrowser&&j_lm&&navigator.appName=="Microsoft Internet Explorer"?(BigInteger.prototype.am=function(e,n,r,o,s,u){for(var d=32767&n,f=n>>15;--u>=0;){var v=32767&this[e],m=this[e++]>>15,_=f*v+m*d;s=((v=d*v+((32767&_)<<15)+r[o]+(1073741823&s))>>>30)+(_>>>15)+f*m+(s>>>30),r[o++]=1073741823&v}return s},dbits=30):inBrowser&&j_lm&&navigator.appName!="Netscape"?(BigInteger.prototype.am=function(e,n,r,o,s,u){for(;--u>=0;){var d=n*this[e++]+r[o]+s;s=Math.floor(d/67108864),r[o++]=67108863&d}return s},dbits=26):(BigInteger.prototype.am=function(e,n,r,o,s,u){for(var d=16383&n,f=n>>14;--u>=0;){var v=16383&this[e],m=this[e++]>>14,_=f*v+m*d;s=((v=d*v+((16383&_)<<14)+r[o]+s)>>28)+(_>>14)+f*m,r[o++]=268435455&v}return s},dbits=28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RC=[],rr,vv;for(rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;function intAt(e,n){var r=BI_RC[e.charCodeAt(n)];return r==null?-1:r}function nbv(e){var n=nbi();return n.fromInt(e),n}function nbits(e){var n,r=1;return(n=e>>>16)!=0&&(e=n,r+=16),(n=e>>8)!=0&&(e=n,r+=8),(n=e>>4)!=0&&(e=n,r+=4),(n=e>>2)!=0&&(e=n,r+=2),(n=e>>1)!=0&&(e=n,r+=1),r}BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1);var Arcfour=function(){function e(){this.i=0,this.j=0,this.S=[]}return e.prototype.init=function(n){var r,o,s;for(r=0;r<256;++r)this.S[r]=r;for(o=0,r=0;r<256;++r)o=o+this.S[r]+n[r%n.length]&255,s=this.S[r],this.S[r]=this.S[o],this.S[o]=s;this.i=0,this.j=0},e.prototype.next=function(){var n;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,n=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=n,this.S[n+this.S[this.i]&255]},e}();function prng_newstate(){return new Arcfour}var rng_psize=256,rng_state,rng_pool=null,rng_pptr;if(rng_pool==null){rng_pool=[],rng_pptr=0;var t=void 0;if(typeof window<"u"&&window.crypto&&window.crypto.getRandomValues){var z=new Uint32Array(256);for(window.crypto.getRandomValues(z),t=0;t<z.length;++t)rng_pool[rng_pptr++]=255&z[t]}var count=0,onMouseMoveListener_1=function e(n){if((count=count||0)>=256||rng_pptr>=rng_psize)window.removeEventListener?window.removeEventListener("mousemove",e,!1):window.detachEvent&&window.detachEvent("onmousemove",e);else try{var r=n.x+n.y;rng_pool[rng_pptr++]=255&r,count+=1}catch{}};typeof window<"u"&&(window.addEventListener?window.addEventListener("mousemove",onMouseMoveListener_1,!1):window.attachEvent&&window.attachEvent("onmousemove",onMouseMoveListener_1))}function rng_get_byte(){if(rng_state==null){for(rng_state=prng_newstate();rng_pptr<rng_psize;){var e=Math.floor(65536*Math.random());rng_pool[rng_pptr++]=255&e}for(rng_state.init(rng_pool),rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}var SecureRandom=function(){function e(){}return e.prototype.nextBytes=function(n){for(var r=0;r<n.length;++r)n[r]=rng_get_byte()},e}();function pkcs1pad1(e,n){if(n<e.length+22)return console.error("Message too long for RSA"),null;for(var r=n-e.length-6,o="",s=0;s<r;s+=2)o+="ff";return parseBigInt("0001"+o+"00"+e,16)}function pkcs1pad2(e,n){if(n<e.length+11)return console.error("Message too long for RSA"),null;for(var r=[],o=e.length-1;o>=0&&n>0;){var s=e.charCodeAt(o--);s<128?r[--n]=s:s>127&&s<2048?(r[--n]=63&s|128,r[--n]=s>>6|192):(r[--n]=63&s|128,r[--n]=s>>6&63|128,r[--n]=s>>12|224)}r[--n]=0;for(var u=new SecureRandom,d=[];n>2;){for(d[0]=0;d[0]==0;)u.nextBytes(d);r[--n]=d[0]}return r[--n]=2,r[--n]=0,new BigInteger(r)}var RSAKey=function(){function e(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return e.prototype.doPublic=function(n){return n.modPowInt(this.e,this.n)},e.prototype.doPrivate=function(n){if(this.p==null||this.q==null)return n.modPow(this.d,this.n);for(var r=n.mod(this.p).modPow(this.dmp1,this.p),o=n.mod(this.q).modPow(this.dmq1,this.q);r.compareTo(o)<0;)r=r.add(this.p);return r.subtract(o).multiply(this.coeff).mod(this.p).multiply(this.q).add(o)},e.prototype.setPublic=function(n,r){n!=null&&r!=null&&n.length>0&&r.length>0?(this.n=parseBigInt(n,16),this.e=parseInt(r,16)):console.error("Invalid RSA public key")},e.prototype.encrypt=function(n){var r=this.n.bitLength()+7>>3,o=pkcs1pad2(n,r);if(o==null)return null;var s=this.doPublic(o);if(s==null)return null;for(var u=s.toString(16),d=u.length,f=0;f<2*r-d;f++)u="0"+u;return u},e.prototype.setPrivate=function(n,r,o){n!=null&&r!=null&&n.length>0&&r.length>0?(this.n=parseBigInt(n,16),this.e=parseInt(r,16),this.d=parseBigInt(o,16)):console.error("Invalid RSA private key")},e.prototype.setPrivateEx=function(n,r,o,s,u,d,f,v){n!=null&&r!=null&&n.length>0&&r.length>0?(this.n=parseBigInt(n,16),this.e=parseInt(r,16),this.d=parseBigInt(o,16),this.p=parseBigInt(s,16),this.q=parseBigInt(u,16),this.dmp1=parseBigInt(d,16),this.dmq1=parseBigInt(f,16),this.coeff=parseBigInt(v,16)):console.error("Invalid RSA private key")},e.prototype.generate=function(n,r){var o=new SecureRandom,s=n>>1;this.e=parseInt(r,16);for(var u=new BigInteger(r,16);;){for(;this.p=new BigInteger(n-s,1,o),this.p.subtract(BigInteger.ONE).gcd(u).compareTo(BigInteger.ONE)!=0||!this.p.isProbablePrime(10););for(;this.q=new BigInteger(s,1,o),this.q.subtract(BigInteger.ONE).gcd(u).compareTo(BigInteger.ONE)!=0||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var d=this.p;this.p=this.q,this.q=d}var f=this.p.subtract(BigInteger.ONE),v=this.q.subtract(BigInteger.ONE),m=f.multiply(v);if(m.gcd(u).compareTo(BigInteger.ONE)==0){this.n=this.p.multiply(this.q),this.d=u.modInverse(m),this.dmp1=this.d.mod(f),this.dmq1=this.d.mod(v),this.coeff=this.q.modInverse(this.p);break}}},e.prototype.decrypt=function(n){var r=parseBigInt(n,16),o=this.doPrivate(r);return o==null?null:pkcs1unpad2(o,this.n.bitLength()+7>>3)},e.prototype.generateAsync=function(n,r,o){var s=new SecureRandom,u=n>>1;this.e=parseInt(r,16);var d=new BigInteger(r,16),f=this;setTimeout(function v(){var m=function(){if(f.p.compareTo(f.q)<=0){var g=f.p;f.p=f.q,f.q=g}var y=f.p.subtract(BigInteger.ONE),w=f.q.subtract(BigInteger.ONE),x=y.multiply(w);x.gcd(d).compareTo(BigInteger.ONE)==0?(f.n=f.p.multiply(f.q),f.d=d.modInverse(x),f.dmp1=f.d.mod(y),f.dmq1=f.d.mod(w),f.coeff=f.q.modInverse(f.p),setTimeout(function(){o()},0)):setTimeout(v,0)},_=function g(){f.q=nbi(),f.q.fromNumberAsync(u,1,s,function(){f.q.subtract(BigInteger.ONE).gcda(d,function(y){y.compareTo(BigInteger.ONE)==0&&f.q.isProbablePrime(10)?setTimeout(m,0):setTimeout(g,0)})})};setTimeout(function g(){f.p=nbi(),f.p.fromNumberAsync(n-u,1,s,function(){f.p.subtract(BigInteger.ONE).gcda(d,function(y){y.compareTo(BigInteger.ONE)==0&&f.p.isProbablePrime(10)?setTimeout(_,0):setTimeout(g,0)})})},0)},0)},e.prototype.sign=function(n,r,o){var s=pkcs1pad1(getDigestHeader(o)+r(n).toString(),this.n.bitLength()/4);if(s==null)return null;var u=this.doPrivate(s);if(u==null)return null;var d=u.toString(16);return(1&d.length)==0?d:"0"+d},e.prototype.verify=function(n,r,o){var s=parseBigInt(r,16),u=this.doPublic(s);return u==null?null:removeDigestHeader(u.toString(16).replace(/^1f+00/,""))==o(n).toString()},e}();function pkcs1unpad2(e,n){for(var r=e.toByteArray(),o=0;o<r.length&&r[o]==0;)++o;if(r.length-o!=n-1||r[o]!=2)return null;for(++o;r[o]!=0;)if(++o>=r.length)return null;for(var s="";++o<r.length;){var u=255&r[o];u<128?s+=String.fromCharCode(u):u>191&&u<224?(s+=String.fromCharCode((31&u)<<6|63&r[o+1]),++o):(s+=String.fromCharCode((15&u)<<12|(63&r[o+1])<<6|63&r[o+2]),o+=2)}return s}var DIGEST_HEADERS={md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",ripemd160:"3021300906052b2403020105000414"};function getDigestHeader(e){return DIGEST_HEADERS[e]||""}function removeDigestHeader(e){for(var n in DIGEST_HEADERS)if(DIGEST_HEADERS.hasOwnProperty(n)){var r=DIGEST_HEADERS[n],o=r.length;if(e.substr(0,o)==r)return e.substr(o)}return e}/*!
Copyright (c) 2011, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 2.9.0
*/var YAHOO={};YAHOO.lang={extend:function(e,n,r){if(!n||!e)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var o=function(){};if(o.prototype=n.prototype,e.prototype=new o,e.prototype.constructor=e,e.superclass=n.prototype,n.prototype.constructor==Object.prototype.constructor&&(n.prototype.constructor=n),r){var s;for(s in r)e.prototype[s]=r[s];var u=function(){},d=["toString","valueOf"];try{/MSIE/.test(navigator.userAgent)&&(u=function(f,v){for(s=0;s<d.length;s+=1){var m=d[s],_=v[m];typeof _=="function"&&_!=Object.prototype[m]&&(f[m]=_)}})}catch{}u(e.prototype,r)}}};/**
 * @fileOverview
 * @name asn1-1.0.js
 * @author Kenji Urushima kenji.urushima@gmail.com
 * @version asn1 1.0.13 (2017-Jun-02)
 * @since jsrsasign 2.1
 * @license <a href="https://kjur.github.io/jsrsasign/license/">MIT License</a>
 */var KJUR={};KJUR.asn1!==void 0&&KJUR.asn1||(KJUR.asn1={}),KJUR.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var n=e.toString(16);return n.length%2==1&&(n="0"+n),n},this.bigIntToMinTwosComplementsHex=function(e){var n=e.toString(16);if(n.substr(0,1)!="-")n.length%2==1?n="0"+n:n.match(/^[0-7]/)||(n="00"+n);else{var r=n.substr(1).length;r%2==1?r+=1:n.match(/^[0-7]/)||(r+=2);for(var o="",s=0;s<r;s++)o+="f";n=new BigInteger(o,16).xor(e).add(BigInteger.ONE).toString(16).replace(/^-/,"")}return n},this.getPEMStringFromHex=function(e,n){return hextopem(e,n)},this.newObject=function(e){var n=KJUR.asn1,r=n.DERBoolean,o=n.DERInteger,s=n.DERBitString,u=n.DEROctetString,d=n.DERNull,f=n.DERObjectIdentifier,v=n.DEREnumerated,m=n.DERUTF8String,_=n.DERNumericString,g=n.DERPrintableString,y=n.DERTeletexString,w=n.DERIA5String,x=n.DERUTCTime,k=n.DERGeneralizedTime,S=n.DERSequence,E=n.DERSet,T=n.DERTaggedObject,M=n.ASN1Util.newObject,I=Object.keys(e);if(I.length!=1)throw"key of param shall be only one.";var F=I[0];if(":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+F+":")==-1)throw"undefined key: "+F;if(F=="bool")return new r(e[F]);if(F=="int")return new o(e[F]);if(F=="bitstr")return new s(e[F]);if(F=="octstr")return new u(e[F]);if(F=="null")return new d(e[F]);if(F=="oid")return new f(e[F]);if(F=="enum")return new v(e[F]);if(F=="utf8str")return new m(e[F]);if(F=="numstr")return new _(e[F]);if(F=="prnstr")return new g(e[F]);if(F=="telstr")return new y(e[F]);if(F=="ia5str")return new w(e[F]);if(F=="utctime")return new x(e[F]);if(F=="gentime")return new k(e[F]);if(F=="seq"){for(var O=e[F],N=[],D=0;D<O.length;D++){var X=M(O[D]);N.push(X)}return new S({array:N})}if(F=="set"){for(O=e[F],N=[],D=0;D<O.length;D++)X=M(O[D]),N.push(X);return new E({array:N})}if(F=="tag"){var U=e[F];if(Object.prototype.toString.call(U)==="[object Array]"&&U.length==3){var Z=M(U[2]);return new T({tag:U[0],explicit:U[1],obj:Z})}var j={};if(U.explicit!==void 0&&(j.explicit=U.explicit),U.tag!==void 0&&(j.tag=U.tag),U.obj===void 0)throw"obj shall be specified for 'tag'.";return j.obj=M(U.obj),new T(j)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},KJUR.asn1.ASN1Util.oidHexToInt=function(e){for(var n="",r=parseInt(e.substr(0,2),16),o=(n=Math.floor(r/40)+"."+r%40,""),s=2;s<e.length;s+=2){var u=("00000000"+parseInt(e.substr(s,2),16).toString(2)).slice(-8);o+=u.substr(1,7),u.substr(0,1)=="0"&&(n=n+"."+new BigInteger(o,2).toString(10),o="")}return n},KJUR.asn1.ASN1Util.oidIntToHex=function(e){var n=function(f){var v=f.toString(16);return v.length==1&&(v="0"+v),v},r=function(f){var v="",m=new BigInteger(f,10).toString(2),_=7-m.length%7;_==7&&(_=0);for(var g="",y=0;y<_;y++)g+="0";for(m=g+m,y=0;y<m.length-1;y+=7){var w=m.substr(y,7);y!=m.length-7&&(w="1"+w),v+=n(parseInt(w,2))}return v};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var o="",s=e.split("."),u=40*parseInt(s[0])+parseInt(s[1]);o+=n(u),s.splice(0,2);for(var d=0;d<s.length;d++)o+=r(s[d]);return o},KJUR.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n=0,v="+this.hV;var e=this.hV.length/2,n=e.toString(16);if(n.length%2==1&&(n="0"+n),e<128)return n;var r=n.length/2;if(r>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+r).toString(16)+n},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},KJUR.asn1.DERAbstractString=function(e){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(n){this.hTLV=null,this.isModified=!0,this.s=n,this.hV=stohex(this.s)},this.setStringHex=function(n){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=n},this.getFreshValueHex=function(){return this.hV},e!==void 0&&(typeof e=="string"?this.setString(e):e.str!==void 0?this.setString(e.str):e.hex!==void 0&&this.setStringHex(e.hex))},YAHOO.lang.extend(KJUR.asn1.DERAbstractString,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractTime=function(e){KJUR.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(n){return utc=n.getTime()+6e4*n.getTimezoneOffset(),new Date(utc)},this.formatDate=function(n,r,o){var s=this.zeroPadding,u=this.localDateToUTC(n),d=String(u.getFullYear());r=="utc"&&(d=d.substr(2,2));var f=d+s(String(u.getMonth()+1),2)+s(String(u.getDate()),2)+s(String(u.getHours()),2)+s(String(u.getMinutes()),2)+s(String(u.getSeconds()),2);if(o===!0){var v=u.getMilliseconds();if(v!=0){var m=s(String(v),3);f=f+"."+(m=m.replace(/[0]+$/,""))}}return f+"Z"},this.zeroPadding=function(n,r){return n.length>=r?n:new Array(r-n.length+1).join("0")+n},this.getString=function(){return this.s},this.setString=function(n){this.hTLV=null,this.isModified=!0,this.s=n,this.hV=stohex(n)},this.setByDateValue=function(n,r,o,s,u,d){var f=new Date(Date.UTC(n,r-1,o,s,u,d,0));this.setByDate(f)},this.getFreshValueHex=function(){return this.hV}},YAHOO.lang.extend(KJUR.asn1.DERAbstractTime,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractStructured=function(e){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(n){this.hTLV=null,this.isModified=!0,this.asn1Array=n},this.appendASN1Object=function(n){this.hTLV=null,this.isModified=!0,this.asn1Array.push(n)},this.asn1Array=new Array,e!==void 0&&e.array!==void 0&&(this.asn1Array=e.array)},YAHOO.lang.extend(KJUR.asn1.DERAbstractStructured,KJUR.asn1.ASN1Object),KJUR.asn1.DERBoolean=function(){KJUR.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},YAHOO.lang.extend(KJUR.asn1.DERBoolean,KJUR.asn1.ASN1Object),KJUR.asn1.DERInteger=function(e){KJUR.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(n){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(n)},this.setByInteger=function(n){var r=new BigInteger(String(n),10);this.setByBigInteger(r)},this.setValueHex=function(n){this.hV=n},this.getFreshValueHex=function(){return this.hV},e!==void 0&&(e.bigint!==void 0?this.setByBigInteger(e.bigint):e.int!==void 0?this.setByInteger(e.int):typeof e=="number"?this.setByInteger(e):e.hex!==void 0&&this.setValueHex(e.hex))},YAHOO.lang.extend(KJUR.asn1.DERInteger,KJUR.asn1.ASN1Object),KJUR.asn1.DERBitString=function(e){if(e!==void 0&&e.obj!==void 0){var n=KJUR.asn1.ASN1Util.newObject(e.obj);e.hex="00"+n.getEncodedHex()}KJUR.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(r){this.hTLV=null,this.isModified=!0,this.hV=r},this.setUnusedBitsAndHexValue=function(r,o){if(r<0||7<r)throw"unused bits shall be from 0 to 7: u = "+r;var s="0"+r;this.hTLV=null,this.isModified=!0,this.hV=s+o},this.setByBinaryString=function(r){var o=8-(r=r.replace(/0+$/,"")).length%8;o==8&&(o=0);for(var s=0;s<=o;s++)r+="0";var u="";for(s=0;s<r.length-1;s+=8){var d=r.substr(s,8),f=parseInt(d,2).toString(16);f.length==1&&(f="0"+f),u+=f}this.hTLV=null,this.isModified=!0,this.hV="0"+o+u},this.setByBooleanArray=function(r){for(var o="",s=0;s<r.length;s++)r[s]==1?o+="1":o+="0";this.setByBinaryString(o)},this.newFalseArray=function(r){for(var o=new Array(r),s=0;s<r;s++)o[s]=!1;return o},this.getFreshValueHex=function(){return this.hV},e!==void 0&&(typeof e=="string"&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):e.hex!==void 0?this.setHexValueIncludingUnusedBits(e.hex):e.bin!==void 0?this.setByBinaryString(e.bin):e.array!==void 0&&this.setByBooleanArray(e.array))},YAHOO.lang.extend(KJUR.asn1.DERBitString,KJUR.asn1.ASN1Object),KJUR.asn1.DEROctetString=function(e){if(e!==void 0&&e.obj!==void 0){var n=KJUR.asn1.ASN1Util.newObject(e.obj);e.hex=n.getEncodedHex()}KJUR.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},YAHOO.lang.extend(KJUR.asn1.DEROctetString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNull=function(){KJUR.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},YAHOO.lang.extend(KJUR.asn1.DERNull,KJUR.asn1.ASN1Object),KJUR.asn1.DERObjectIdentifier=function(e){var n=function(o){var s=o.toString(16);return s.length==1&&(s="0"+s),s},r=function(o){var s="",u=new BigInteger(o,10).toString(2),d=7-u.length%7;d==7&&(d=0);for(var f="",v=0;v<d;v++)f+="0";for(u=f+u,v=0;v<u.length-1;v+=7){var m=u.substr(v,7);v!=u.length-7&&(m="1"+m),s+=n(parseInt(m,2))}return s};KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(o){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=o},this.setValueOidString=function(o){if(!o.match(/^[0-9.]+$/))throw"malformed oid string: "+o;var s="",u=o.split("."),d=40*parseInt(u[0])+parseInt(u[1]);s+=n(d),u.splice(0,2);for(var f=0;f<u.length;f++)s+=r(u[f]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=s},this.setValueName=function(o){var s=KJUR.asn1.x509.OID.name2oid(o);if(s==="")throw"DERObjectIdentifier oidName undefined: "+o;this.setValueOidString(s)},this.getFreshValueHex=function(){return this.hV},e!==void 0&&(typeof e=="string"?e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e):e.oid!==void 0?this.setValueOidString(e.oid):e.hex!==void 0?this.setValueHex(e.hex):e.name!==void 0&&this.setValueName(e.name))},YAHOO.lang.extend(KJUR.asn1.DERObjectIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.DEREnumerated=function(e){KJUR.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(n){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(n)},this.setByInteger=function(n){var r=new BigInteger(String(n),10);this.setByBigInteger(r)},this.setValueHex=function(n){this.hV=n},this.getFreshValueHex=function(){return this.hV},e!==void 0&&(e.int!==void 0?this.setByInteger(e.int):typeof e=="number"?this.setByInteger(e):e.hex!==void 0&&this.setValueHex(e.hex))},YAHOO.lang.extend(KJUR.asn1.DEREnumerated,KJUR.asn1.ASN1Object),KJUR.asn1.DERUTF8String=function(e){KJUR.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},YAHOO.lang.extend(KJUR.asn1.DERUTF8String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNumericString=function(e){KJUR.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},YAHOO.lang.extend(KJUR.asn1.DERNumericString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERPrintableString=function(e){KJUR.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},YAHOO.lang.extend(KJUR.asn1.DERPrintableString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERTeletexString=function(e){KJUR.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},YAHOO.lang.extend(KJUR.asn1.DERTeletexString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERIA5String=function(e){KJUR.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},YAHOO.lang.extend(KJUR.asn1.DERIA5String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERUTCTime=function(e){KJUR.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(n){this.hTLV=null,this.isModified=!0,this.date=n,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},e!==void 0&&(e.str!==void 0?this.setString(e.str):typeof e=="string"&&e.match(/^[0-9]{12}Z$/)?this.setString(e):e.hex!==void 0?this.setStringHex(e.hex):e.date!==void 0&&this.setByDate(e.date))},YAHOO.lang.extend(KJUR.asn1.DERUTCTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERGeneralizedTime=function(e){KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(n){this.hTLV=null,this.isModified=!0,this.date=n,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},e!==void 0&&(e.str!==void 0?this.setString(e.str):typeof e=="string"&&e.match(/^[0-9]{14}Z$/)?this.setString(e):e.hex!==void 0?this.setStringHex(e.hex):e.date!==void 0&&this.setByDate(e.date),e.millis===!0&&(this.withMillis=!0))},YAHOO.lang.extend(KJUR.asn1.DERGeneralizedTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERSequence=function(e){KJUR.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var n="",r=0;r<this.asn1Array.length;r++)n+=this.asn1Array[r].getEncodedHex();return this.hV=n,this.hV}},YAHOO.lang.extend(KJUR.asn1.DERSequence,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERSet=function(e){KJUR.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var n=new Array,r=0;r<this.asn1Array.length;r++){var o=this.asn1Array[r];n.push(o.getEncodedHex())}return this.sortFlag==1&&n.sort(),this.hV=n.join(""),this.hV},e!==void 0&&e.sortflag!==void 0&&e.sortflag==0&&(this.sortFlag=!1)},YAHOO.lang.extend(KJUR.asn1.DERSet,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERTaggedObject=function(e){KJUR.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(n,r,o){this.hT=r,this.isExplicit=n,this.asn1Object=o,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=o.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,r),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},e!==void 0&&(e.tag!==void 0&&(this.hT=e.tag),e.explicit!==void 0&&(this.isExplicit=e.explicit),e.obj!==void 0&&(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},YAHOO.lang.extend(KJUR.asn1.DERTaggedObject,KJUR.asn1.ASN1Object);var __extends=(_extendStatics=function(e,n){return _extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},_extendStatics(e,n)},function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}_extendStatics(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}),_extendStatics,JSEncryptRSAKey=function(e){function n(r){var o=e.call(this)||this;return r&&(typeof r=="string"?o.parseKey(r):(n.hasPrivateKeyProperty(r)||n.hasPublicKeyProperty(r))&&o.parsePropertiesFrom(r)),o}return __extends(n,e),n.prototype.parseKey=function(r){try{var o=0,s=0,u=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(r)?Hex.decode(r):Base64$1.unarmor(r),d=ASN1.decode(u);if(d.sub.length===3&&(d=d.sub[2].sub[0]),d.sub.length===9){o=d.sub[1].getHexStringValue(),this.n=parseBigInt(o,16),s=d.sub[2].getHexStringValue(),this.e=parseInt(s,16);var f=d.sub[3].getHexStringValue();this.d=parseBigInt(f,16);var v=d.sub[4].getHexStringValue();this.p=parseBigInt(v,16);var m=d.sub[5].getHexStringValue();this.q=parseBigInt(m,16);var _=d.sub[6].getHexStringValue();this.dmp1=parseBigInt(_,16);var g=d.sub[7].getHexStringValue();this.dmq1=parseBigInt(g,16);var y=d.sub[8].getHexStringValue();this.coeff=parseBigInt(y,16)}else{if(d.sub.length!==2)return!1;if(d.sub[0].sub){var w=d.sub[1].sub[0];o=w.sub[0].getHexStringValue(),this.n=parseBigInt(o,16),s=w.sub[1].getHexStringValue(),this.e=parseInt(s,16)}else o=d.sub[0].getHexStringValue(),this.n=parseBigInt(o,16),s=d.sub[1].getHexStringValue(),this.e=parseInt(s,16)}return!0}catch{return!1}},n.prototype.getPrivateBaseKey=function(){var r={array:[new KJUR.asn1.DERInteger({int:0}),new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({int:this.e}),new KJUR.asn1.DERInteger({bigint:this.d}),new KJUR.asn1.DERInteger({bigint:this.p}),new KJUR.asn1.DERInteger({bigint:this.q}),new KJUR.asn1.DERInteger({bigint:this.dmp1}),new KJUR.asn1.DERInteger({bigint:this.dmq1}),new KJUR.asn1.DERInteger({bigint:this.coeff})]};return new KJUR.asn1.DERSequence(r).getEncodedHex()},n.prototype.getPrivateBaseKeyB64=function(){return hex2b64(this.getPrivateBaseKey())},n.prototype.getPublicBaseKey=function(){var r=new KJUR.asn1.DERSequence({array:[new KJUR.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new KJUR.asn1.DERNull]}),o=new KJUR.asn1.DERSequence({array:[new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({int:this.e})]}),s=new KJUR.asn1.DERBitString({hex:"00"+o.getEncodedHex()});return new KJUR.asn1.DERSequence({array:[r,s]}).getEncodedHex()},n.prototype.getPublicBaseKeyB64=function(){return hex2b64(this.getPublicBaseKey())},n.wordwrap=function(r,o){if(!r)return r;var s="(.{1,"+(o=o||64)+`})( +|$
?)|(.{1,`+o+"})";return r.match(RegExp(s,"g")).join(`
`)},n.prototype.getPrivateKey=function(){var r=`-----BEGIN RSA PRIVATE KEY-----
`;return r+=n.wordwrap(this.getPrivateBaseKeyB64())+`
`,r+="-----END RSA PRIVATE KEY-----"},n.prototype.getPublicKey=function(){var r=`-----BEGIN PUBLIC KEY-----
`;return r+=n.wordwrap(this.getPublicBaseKeyB64())+`
`,r+="-----END PUBLIC KEY-----"},n.hasPublicKeyProperty=function(r){return(r=r||{}).hasOwnProperty("n")&&r.hasOwnProperty("e")},n.hasPrivateKeyProperty=function(r){return(r=r||{}).hasOwnProperty("n")&&r.hasOwnProperty("e")&&r.hasOwnProperty("d")&&r.hasOwnProperty("p")&&r.hasOwnProperty("q")&&r.hasOwnProperty("dmp1")&&r.hasOwnProperty("dmq1")&&r.hasOwnProperty("coeff")},n.prototype.parsePropertiesFrom=function(r){this.n=r.n,this.e=r.e,r.hasOwnProperty("d")&&(this.d=r.d,this.p=r.p,this.q=r.q,this.dmp1=r.dmp1,this.dmq1=r.dmq1,this.coeff=r.coeff)},n}(RSAKey),_a$1,version$1=typeof process<"u"?(_a$1=process.env)===null||_a$1===void 0?void 0:_a$1.npm_package_version:void 0,JSEncrypt=function(){function e(n){n===void 0&&(n={}),n=n||{},this.default_key_size=n.default_key_size?parseInt(n.default_key_size,10):1024,this.default_public_exponent=n.default_public_exponent||"010001",this.log=n.log||!1,this.key=null}return e.prototype.setKey=function(n){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new JSEncryptRSAKey(n)},e.prototype.setPrivateKey=function(n){this.setKey(n)},e.prototype.setPublicKey=function(n){this.setKey(n)},e.prototype.decrypt=function(n){try{return this.getKey().decrypt(b64tohex(n))}catch{return!1}},e.prototype.encrypt=function(n){try{return hex2b64(this.getKey().encrypt(n))}catch{return!1}},e.prototype.sign=function(n,r,o){try{return hex2b64(this.getKey().sign(n,r,o))}catch{return!1}},e.prototype.verify=function(n,r,o){try{return this.getKey().verify(n,b64tohex(r),o)}catch{return!1}},e.prototype.getKey=function(n){if(!this.key){if(this.key=new JSEncryptRSAKey,n&&{}.toString.call(n)==="[object Function]")return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,n);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},e.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},e.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},e.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},e.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},e.version=version$1,e}(),base64Exports={},base64={get exports(){return base64Exports},set exports(e){base64Exports=e}},module$1,exports$1;module$1=base64,exports$1=base64Exports,function(e){var n=exports$1,r=module$1&&module$1.exports==n&&module$1,o=_typeof$1(commonjsGlobal)=="object"&&commonjsGlobal;o.global!==o&&o.window!==o||(e=o);var s=function(_){this.message=_};(s.prototype=new Error).name="InvalidCharacterError";var u=function(_){throw new s(_)},d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=/[\t\n\f\r ]/g,v={encode:function(_){_=String(_),/[^\0-\xFF]/.test(_)&&u("The string to be encoded contains characters outside of the Latin1 range.");for(var g,y,w,x,k=_.length%3,S="",E=-1,T=_.length-k;++E<T;)g=_.charCodeAt(E)<<16,y=_.charCodeAt(++E)<<8,w=_.charCodeAt(++E),S+=d.charAt((x=g+y+w)>>18&63)+d.charAt(x>>12&63)+d.charAt(x>>6&63)+d.charAt(63&x);return k==2?(g=_.charCodeAt(E)<<8,y=_.charCodeAt(++E),S+=d.charAt((x=g+y)>>10)+d.charAt(x>>4&63)+d.charAt(x<<2&63)+"="):k==1&&(x=_.charCodeAt(E),S+=d.charAt(x>>2)+d.charAt(x<<4&63)+"=="),S},decode:function(_){var g=(_=String(_).replace(f,"")).length;g%4==0&&(g=(_=_.replace(/==?$/,"")).length),(g%4==1||/[^+a-zA-Z0-9/]/.test(_))&&u("Invalid character: the string to be decoded is not correctly encoded.");for(var y,w,x=0,k="",S=-1;++S<g;)w=d.indexOf(_.charAt(S)),y=x%4?64*y+w:w,x++%4&&(k+=String.fromCharCode(255&y>>(-2*x&6)));return k},version:"1.0.0"};if(n&&!n.nodeType)if(r)r.exports=v;else for(var m in v)v.hasOwnProperty(m)&&(n[m]=v[m]);else e.base64=v}(commonjsGlobal);var Base64=base64Exports,printExports={},print={get exports(){return printExports},set exports(e){printExports=e}},factory;factory=function(){return function(e){var n={};function r(o){if(n[o])return n[o].exports;var s=n[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=n,r.d=function(o,s,u){r.o(o,s)||Object.defineProperty(o,s,{enumerable:!0,get:u})},r.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},r.t=function(o,s){if(1&s&&(o=r(o)),8&s||4&s&&_typeof$1(o)==="object"&&o&&o.__esModule)return o;var u=Object.create(null);if(r.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:o}),2&s&&typeof o!="string")for(var d in o)r.d(u,d,function(f){return o[f]}.bind(null,d));return u},r.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return r.d(s,"a",s),s},r.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},r.p="",r(r.s=0)}({"./src/index.js":function(e,n,r){r.r(n),r("./src/sass/index.scss");var o=r("./src/js/init.js").default.init;typeof window<"u"&&(window.printJS=o),n.default=o},"./src/js/browser.js":function(e,n,r){r.r(n);var o={isFirefox:function(){return typeof InstallTrigger<"u"},isIE:function(){return navigator.userAgent.indexOf("MSIE")!==-1||!!document.documentMode},isEdge:function(){return!o.isIE()&&!!window.StyleMedia},isChrome:function(){return!!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:window).chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||navigator.userAgent.toLowerCase().indexOf("safari")!==-1},isIOSChrome:function(){return navigator.userAgent.toLowerCase().indexOf("crios")!==-1}};n.default=o},"./src/js/functions.js":function(e,n,r){r.r(n),r.d(n,"addWrapper",function(){return d}),r.d(n,"capitalizePrint",function(){return f}),r.d(n,"collectStyles",function(){return v}),r.d(n,"addHeader",function(){return _}),r.d(n,"cleanUp",function(){return g}),r.d(n,"isRawHTML",function(){return y});var o=r("./src/js/modal.js"),s=r("./src/js/browser.js");function u(w){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},u(w)}function d(w,x){return'<div style="font-family:'+x.font+" !important; font-size: "+x.font_size+' !important; width:100%;">'+w+"</div>"}function f(w){return w.charAt(0).toUpperCase()+w.slice(1)}function v(w,x){for(var k="",S=(document.defaultView||window).getComputedStyle(w,""),E=0;E<S.length;E++)(x.targetStyles.indexOf("*")!==-1||x.targetStyle.indexOf(S[E])!==-1||m(x.targetStyles,S[E]))&&S.getPropertyValue(S[E])&&(k+=S[E]+":"+S.getPropertyValue(S[E])+";");return k+="max-width: "+x.maxWidth+"px !important; font-size: "+x.font_size+" !important;"}function m(w,x){for(var k=0;k<w.length;k++)if(u(x)==="object"&&x.indexOf(w[k])!==-1)return!0;return!1}function _(w,x){var k=document.createElement("div");if(y(x.header))k.innerHTML=x.header;else{var S=document.createElement("h1"),E=document.createTextNode(x.header);S.appendChild(E),S.setAttribute("style",x.headerStyle),k.appendChild(S)}w.insertBefore(k,w.childNodes[0])}function g(w){w.showModal&&o.default.close(),w.onLoadingEnd&&w.onLoadingEnd(),(w.showModal||w.onLoadingStart)&&window.URL.revokeObjectURL(w.printable);var x="mouseover";(s.default.isChrome()||s.default.isFirefox())&&(x="focus"),window.addEventListener(x,function k(){window.removeEventListener(x,k),w.onPrintDialogClose();var S=document.getElementById(w.frameId);S&&S.remove()})}function y(w){return new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>").test(w)}},"./src/js/html.js":function(e,n,r){r.r(n);var o=r("./src/js/functions.js"),s=r("./src/js/print.js");function u(f){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},u(f)}function d(f,v){for(var m=f.cloneNode(),_=Array.prototype.slice.call(f.childNodes),g=0;g<_.length;g++)if(v.ignoreElements.indexOf(_[g].id)===-1){var y=d(_[g],v);m.appendChild(y)}switch(v.scanStyles&&f.nodeType===1&&m.setAttribute("style",Object(o.collectStyles)(f,v)),f.tagName){case"SELECT":m.value=f.value;break;case"CANVAS":m.getContext("2d").drawImage(f,0,0)}return m}n.default={print:function(f,v){var m,_=u(m=f.printable)==="object"&&m&&(m instanceof HTMLElement||m.nodeType===1)?f.printable:document.getElementById(f.printable);_?(f.printableElement=d(_,f),f.header&&Object(o.addHeader)(f.printableElement,f),s.default.send(f,v)):window.console.error("Invalid HTML element id: "+f.printable)}}},"./src/js/image.js":function(e,n,r){r.r(n);var o=r("./src/js/functions.js"),s=r("./src/js/print.js"),u=r("./src/js/browser.js");n.default={print:function(d,f){d.printable.constructor!==Array&&(d.printable=[d.printable]),d.printableElement=document.createElement("div"),d.printable.forEach(function(v){var m=document.createElement("img");if(m.setAttribute("style",d.imageStyle),m.src=v,u.default.isFirefox()){var _=m.src;m.src=_}var g=document.createElement("div");g.appendChild(m),d.printableElement.appendChild(g)}),d.header&&Object(o.addHeader)(d.printableElement,d),s.default.send(d,f)}}},"./src/js/init.js":function(e,n,r){r.r(n);var o=r("./src/js/browser.js"),s=r("./src/js/modal.js"),u=r("./src/js/pdf.js"),d=r("./src/js/html.js"),f=r("./src/js/raw-html.js"),v=r("./src/js/image.js"),m=r("./src/js/json.js");function _(y){return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},_(y)}var g=["pdf","html","image","json","raw-html"];n.default={init:function(){var y={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(E){throw E},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},w=arguments[0];if(w===void 0)throw new Error("printJS expects at least 1 attribute.");switch(_(w)){case"string":y.printable=encodeURI(w),y.fallbackPrintable=y.printable,y.type=arguments[1]||y.type;break;case"object":for(var x in y.printable=w.printable,y.fallbackPrintable=w.fallbackPrintable!==void 0?w.fallbackPrintable:y.printable,y.fallbackPrintable=y.base64?"data:application/pdf;base64,".concat(y.fallbackPrintable):y.fallbackPrintable,y)x!=="printable"&&x!=="fallbackPrintable"&&(y[x]=w[x]!==void 0?w[x]:y[x]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+_(w))}if(!y.printable)throw new Error("Missing printable information.");if(!y.type||typeof y.type!="string"||g.indexOf(y.type.toLowerCase())===-1)throw new Error("Invalid print type. Available types are: pdf, html, image and json.");y.showModal&&s.default.show(y),y.onLoadingStart&&y.onLoadingStart();var k=document.getElementById(y.frameId);k&&k.parentNode.removeChild(k);var S=document.createElement("iframe");switch(o.default.isFirefox()?S.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):S.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),S.setAttribute("id",y.frameId),y.type!=="pdf"&&(S.srcdoc="<html><head><title>"+y.documentTitle+"</title>",y.css&&(Array.isArray(y.css)||(y.css=[y.css]),y.css.forEach(function(E){S.srcdoc+='<link rel="stylesheet" href="'+E+'">'})),S.srcdoc+="</head><body></body></html>"),y.type){case"pdf":if(o.default.isIE())try{console.info("Print.js doesn't support PDF printing in Internet Explorer."),window.open(y.fallbackPrintable,"_blank").focus(),y.onIncompatibleBrowser()}catch(E){y.onError(E)}finally{y.showModal&&s.default.close(),y.onLoadingEnd&&y.onLoadingEnd()}else u.default.print(y,S);break;case"image":v.default.print(y,S);break;case"html":d.default.print(y,S);break;case"raw-html":f.default.print(y,S);break;case"json":m.default.print(y,S)}}}},"./src/js/json.js":function(e,n,r){r.r(n);var o=r("./src/js/functions.js"),s=r("./src/js/print.js");function u(d){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},u(d)}n.default={print:function(d,f){if(u(d.printable)!=="object")throw new Error("Invalid javascript data object (JSON).");if(typeof d.repeatTableHeader!="boolean")throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!d.properties||!Array.isArray(d.properties))throw new Error("Invalid properties array for your JSON data.");d.properties=d.properties.map(function(v){return{field:u(v)==="object"?v.field:v,displayName:u(v)==="object"?v.displayName:v,columnSize:u(v)==="object"&&v.columnSize?v.columnSize+";":100/d.properties.length+"%;"}}),d.printableElement=document.createElement("div"),d.header&&Object(o.addHeader)(d.printableElement,d),d.printableElement.innerHTML+=function(v){var m=v.printable,_=v.properties,g='<table style="border-collapse: collapse; width: 100%;">';v.repeatTableHeader&&(g+="<thead>"),g+="<tr>";for(var y=0;y<_.length;y++)g+='<th style="width:'+_[y].columnSize+";"+v.gridHeaderStyle+'">'+Object(o.capitalizePrint)(_[y].displayName)+"</th>";g+="</tr>",v.repeatTableHeader&&(g+="</thead>"),g+="<tbody>";for(var w=0;w<m.length;w++){g+="<tr>";for(var x=0;x<_.length;x++){var k=m[w],S=_[x].field.split(".");if(S.length>1)for(var E=0;E<S.length;E++)k=k[S[E]];else k=k[_[x].field];g+='<td style="width:'+_[x].columnSize+v.gridStyle+'">'+k+"</td>"}g+="</tr>"}return g+="</tbody></table>"}(d),s.default.send(d,f)}}},"./src/js/modal.js":function(e,n,r){r.r(n);var o={show:function(s){var u=document.createElement("div");u.setAttribute("style","font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;"),u.setAttribute("id","printJS-Modal");var d=document.createElement("div");d.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var f=document.createElement("div");f.setAttribute("class","printClose"),f.setAttribute("id","printClose"),d.appendChild(f);var v=document.createElement("span");v.setAttribute("class","printSpinner"),d.appendChild(v);var m=document.createTextNode(s.modalMessage);d.appendChild(m),u.appendChild(d),document.getElementsByTagName("body")[0].appendChild(u),document.getElementById("printClose").addEventListener("click",function(){o.close()})},close:function(){var s=document.getElementById("printJS-Modal");s&&s.parentNode.removeChild(s)}};n.default=o},"./src/js/pdf.js":function(e,n,r){r.r(n);var o=r("./src/js/print.js"),s=r("./src/js/functions.js");function u(d,f,v){var m=new window.Blob([v],{type:"application/pdf"});m=window.URL.createObjectURL(m),f.setAttribute("src",m),o.default.send(d,f)}n.default={print:function(d,f){if(d.base64){var v=Uint8Array.from(atob(d.printable),function(_){return _.charCodeAt(0)});u(d,f,v)}else{d.printable=/^(blob|http|\/\/)/i.test(d.printable)?d.printable:window.location.origin+(d.printable.charAt(0)!=="/"?"/"+d.printable:d.printable);var m=new window.XMLHttpRequest;m.responseType="arraybuffer",m.addEventListener("error",function(){Object(s.cleanUp)(d),d.onError(m.statusText,m)}),m.addEventListener("load",function(){if([200,201].indexOf(m.status)===-1)return Object(s.cleanUp)(d),void d.onError(m.statusText,m);u(d,f,m.response)}),m.open("GET",d.printable,!0),m.send()}}}},"./src/js/print.js":function(e,n,r){r.r(n);var o=r("./src/js/browser.js"),s=r("./src/js/functions.js"),u={send:function(f,v){document.getElementsByTagName("body")[0].appendChild(v);var m=document.getElementById(f.frameId);m.onload=function(){if(f.type!=="pdf"){var _=m.contentWindow||m.contentDocument;if(_.document&&(_=_.document),_.body.appendChild(f.printableElement),f.type!=="pdf"&&f.style){var g=document.createElement("style");g.innerHTML=f.style,_.head.appendChild(g)}var y=_.getElementsByTagName("img");y.length>0?function(w){var x=w.map(function(k){if(k.src&&k.src!==window.location.href)return function(S){return new Promise(function(E){(function T(){S&&S.naturalWidth!==void 0&&S.naturalWidth!==0&&S.complete?E():setTimeout(T,500)})()})}(k)});return Promise.all(x)}(Array.from(y)).then(function(){return d(m,f)}):d(m,f)}else o.default.isFirefox()?setTimeout(function(){return d(m,f)},1e3):d(m,f)}}};function d(f,v){try{if(f.focus(),o.default.isEdge()||o.default.isIE())try{f.contentWindow.document.execCommand("print",!1,null)}catch{f.contentWindow.print()}else f.contentWindow.print()}catch(m){v.onError(m)}finally{o.default.isFirefox()&&(f.style.visibility="hidden",f.style.left="-1px"),Object(s.cleanUp)(v)}}n.default=u},"./src/js/raw-html.js":function(e,n,r){r.r(n);var o=r("./src/js/print.js");n.default={print:function(s,u){s.printableElement=document.createElement("div"),s.printableElement.setAttribute("style","width:100%"),s.printableElement.innerHTML=s.printable,o.default.send(s,u)}}},"./src/sass/index.scss":function(e,n,r){},0:function(e,n,r){e.exports=r("./src/index.js")}}).default},print.exports=factory();var printJS=getDefaultExportFromCjs(printExports),FileSaver_minExports={},FileSaver_min$1={get exports(){return FileSaver_minExports},set exports(e){FileSaver_minExports=e}},getRandomValues;(function(e,n){(function(){function r(m,_){return _===void 0?_={autoBom:!1}:_typeof$1(_)!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),_={autoBom:!_}),_.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\uFEFF",m],{type:m.type}):m}function o(m,_,g){var y=new XMLHttpRequest;y.open("GET",m),y.responseType="blob",y.onload=function(){v(y.response,_,g)},y.onerror=function(){console.error("could not download file")},y.send()}function s(m){var _=new XMLHttpRequest;_.open("HEAD",m,!1);try{_.send()}catch{}return 200<=_.status&&299>=_.status}function u(m){try{m.dispatchEvent(new MouseEvent("click"))}catch{var _=document.createEvent("MouseEvents");_.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(_)}}var d=(typeof window>"u"?"undefined":_typeof$1(window))=="object"&&window.window===window?window:(typeof self>"u"?"undefined":_typeof$1(self))=="object"&&self.self===self?self:_typeof$1(commonjsGlobal)=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,f=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),v=d.saveAs||((typeof window>"u"?"undefined":_typeof$1(window))!="object"||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(m,_,g){var y=d.URL||d.webkitURL,w=document.createElement("a");_=_||m.name||"download",w.download=_,w.rel="noopener",typeof m=="string"?(w.href=m,w.origin===location.origin?u(w):s(w.href)?o(m,_,g):u(w,w.target="_blank")):(w.href=y.createObjectURL(m),setTimeout(function(){y.revokeObjectURL(w.href)},4e4),setTimeout(function(){u(w)},0))}:"msSaveOrOpenBlob"in navigator?function(m,_,g){if(_=_||m.name||"download",typeof m!="string")navigator.msSaveOrOpenBlob(r(m,g),_);else if(s(m))o(m,_,g);else{var y=document.createElement("a");y.href=m,y.target="_blank",setTimeout(function(){u(y)})}}:function(m,_,g,y){if((y=y||open("","_blank"))&&(y.document.title=y.document.body.innerText="downloading..."),typeof m=="string")return o(m,_,g);var w=m.type==="application/octet-stream",x=/constructor/i.test(d.HTMLElement)||d.safari,k=/CriOS\/[\d]+/.test(navigator.userAgent);if((k||w&&x||f)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var M=S.result;M=k?M:M.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=M:location=M,y=null},S.readAsDataURL(m)}else{var E=d.URL||d.webkitURL,T=E.createObjectURL(m);y?y.location=T:location.href=T,y=null,setTimeout(function(){E.revokeObjectURL(T)},4e4)}});d.saveAs=v.saveAs=v,e.exports=v})()})(FileSaver_min$1);var rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&!(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}for(var byteToHex=[],i=0;i<256;++i)byteToHex.push((i+256).toString(16).slice(1));function unsafeStringify(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(byteToHex[e[n+0]]+byteToHex[e[n+1]]+byteToHex[e[n+2]]+byteToHex[e[n+3]]+"-"+byteToHex[e[n+4]]+byteToHex[e[n+5]]+"-"+byteToHex[e[n+6]]+byteToHex[e[n+7]]+"-"+byteToHex[e[n+8]]+byteToHex[e[n+9]]+"-"+byteToHex[e[n+10]]+byteToHex[e[n+11]]+byteToHex[e[n+12]]+byteToHex[e[n+13]]+byteToHex[e[n+14]]+byteToHex[e[n+15]]).toLowerCase()}var randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(e,n,r){if(native.randomUUID&&!n&&!e)return native.randomUUID();var o=(e=e||{}).random||(e.rng||rng)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n){r=r||0;for(var s=0;s<16;++s)n[r+s]=o[s];return n}return unsafeStringify(o)}var DEFAULT_SCALE_VALUE="page-fit",DEFAULT_SCALE=1,DEFAULT_SCALE_DELTA=1.1,MIN_SCALE=.05,MAX_SCALE=10,UNKNOWN_SCALE=0,MAX_AUTO_SCALE=1.25,SCROLLBAR_PADDING=40,VERTICAL_PADDING=5,RenderingStates$1={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3},SidebarView={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4},RendererType={CANVAS:"canvas",SVG:"svg"},TextLayerMode={DISABLE:0,ENABLE:1},ScrollMode={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},SpreadMode={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2},userAgent$1=navigator.userAgent||"",platform=navigator.platform||"",maxTouchPoints=navigator.maxTouchPoints||1,maxCanvasPixels=16777216,isAndroid$1=/Android/.test(userAgent$1),isIOS$1=/\b(iPad|iPhone|iPod)(?=;)/.test(userAgent$1)||platform==="MacIntel"&&maxTouchPoints>1;(isIOS$1||isAndroid$1)&&(maxCanvasPixels=5242880);var isMobileDevice$1=isIOS$1||isAndroid$1||/webOS|BlackBerry|IEMobile|Opera Mini/i.test(userAgent$1),OutputScale=function(){function e(){_classCallCheck(this,e);var n=window.devicePixelRatio||1;this.sx=n,this.sy=n}return _createClass(e,[{key:"scaled",get:function(){return this.sx!==1||this.sy!==1}}]),e}();function round(e,n){var r=Math.pow(10,n);return Math.round(e*r)/r}function parseAdobePDFTimestamp(e){if(!e)return new Date;var n=e.match(/D:(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})([-+]\d{2}'\d{2}')?/);if(n){var r=_slicedToArray(n,8),o=r[1],s=r[2],u=r[3],d=r[4],f=r[5],v=r[6];return r[7],new Date(parseInt(o),parseInt(s)-1,parseInt(u),parseInt(d),parseInt(f),parseInt(v))}throw new Error("Invalid timestamp format")}var PromiseExt=_createClass(function e(){var n=this;_classCallCheck(this,e),this.promise=new Promise(function(r,o){n.resolve=function(s){r(s)},n.reject=function(s){o(s)}})});function BaseException(e,n){this.constructor===BaseException&&unreachable("Cannot initialize BaseException."),this.message=e,this.name=n}BaseException.prototype=new Error,BaseException.constructor=BaseException;var EventBus=function(){function e(){_classCallCheck(this,e),this._listeners=Object.create(null)}return _createClass(e,[{key:"on",value:function(n,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;this._on(n,r,{external:!0,once:o==null?void 0:o.once})}},{key:"off",value:function(n,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;this._off(n,r,{external:!0,once:o==null?void 0:o.once})}},{key:"dispatch",value:function(n,r){var o=this._listeners[n];if(o&&o.length!==0){var s,u,d=_createForOfIteratorHelper(o.slice(0));try{for(d.s();!(u=d.n()).done;){var f=u.value,v=f.listener,m=f.external;f.once&&this._off(n,v),m?(s||(s=[])).push(v):v(r)}}catch(y){d.e(y)}finally{d.f()}if(s){var _,g=_createForOfIteratorHelper(s);try{for(g.s();!(_=g.n()).done;)(0,_.value)(r)}catch(y){g.e(y)}finally{g.f()}s=null}}}},{key:"_on",value:function(n,r){var o,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;((o=this._listeners)[n]||(o[n]=[])).push({listener:r,external:(s==null?void 0:s.external)===!0,once:(s==null?void 0:s.once)===!0})}},{key:"_off",value:function(n,r){var o=this._listeners[n];if(o){for(var s=0,u=o.length;s<u;s++)if(o[s].listener===r)return void o.splice(s,1)}}}]),e}();function scrollIntoView(e,n){var r=arguments.length>2&&arguments[2]!==void 0&&arguments[2],o=e.offsetParent;if(o){for(var s=e.offsetTop+e.clientTop,u=e.offsetLeft+e.clientLeft;o.clientHeight===o.scrollHeight&&o.clientWidth===o.scrollWidth||r&&(o.classList.contains("markedContent")||getComputedStyle(o).overflow==="hidden");)if(s+=o.offsetTop,u+=o.offsetLeft,!(o=o.offsetParent))return;n&&(n.top!==void 0&&(s+=n.top),n.left!==void 0&&(u+=n.left,o.scrollLeft=u)),o.scrollTop=s}else console.error("offsetParent is not set -- cannot scroll")}function watchScroll(e,n){var r=function(u){s||(s=window.requestAnimationFrame(function(){s=null;var d=e.scrollLeft,f=o.lastX;d!==f&&(o.right=d>f),o.lastX=d;var v=e.scrollTop,m=o.lastY;v!==m&&(o.down=v>m),o.lastY=v,n(o)}))},o={right:!0,down:!0,lastX:e.scrollLeft,lastY:e.scrollTop,_eventHandler:r},s=null;return e.addEventListener("scroll",r,!0),o}function binarySearchFirstItem(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=e.length-1;if(o<0||!n(e[o]))return e.length;if(n(e[r]))return r;for(;r<o;){var s=r+o>>1;n(e[s])?o=s:r=s+1}return r}function backtrackBeforeAllVisibleElements(e,n,r){if(e<2)return e;var o=n[e].div,s=o.offsetTop+o.clientTop;s>=r&&(s=(o=n[e-1].div).offsetTop+o.clientTop);for(var u=e-2;u>=0&&!((o=n[u].div).offsetTop+o.clientTop+o.clientHeight<=s);--u)e=u;return e}function getVisibleElements(e){var n=e.scrollEl,r=e.views,o=e.sortByVisibility,s=o!==void 0&&o,u=e.horizontal,d=u!==void 0&&u,f=e.rtl,v=f!==void 0&&f,m=n.scrollTop,_=m+n.clientHeight,g=n.scrollLeft,y=g+n.clientWidth,w=[],x=new Set,k=r.length,S=binarySearchFirstItem(r,d?function(we){var oe=we.div,ne=oe.offsetLeft+oe.clientLeft,q=ne+oe.clientWidth;return v?ne<y:q>g}:function(we){var oe=we.div;return oe.offsetTop+oe.clientTop+oe.clientHeight>m});S>0&&S<k&&!d&&(S=backtrackBeforeAllVisibleElements(S,r,m));for(var E=d?y:-1,T=S;T<k;T++){var M=r[T],I=M.div,F=I.offsetLeft+I.clientLeft,O=I.offsetTop+I.clientTop,N=I.clientWidth,D=I.clientHeight,X=F+N,U=O+D;if(E===-1)U>=_&&(E=U);else if((d?F:O)>E)break;if(!(U<=m||O>=_||X<=g||F>=y)){var Z=Math.max(0,m-O)+Math.max(0,U-_),j=(N-(Math.max(0,g-F)+Math.max(0,X-y)))/N,Q=(D-Z)/D*j*100|0;w.push({id:M.id,x:F,y:O,view:M,percent:Q,widthPercent:100*j|0}),x.add(M.id)}}var ve=w[0],Se=w.at(-1);return s&&w.sort(function(we,oe){var ne=we.percent-oe.percent;return Math.abs(ne)>.001?-ne:we.id-oe.id}),getExpandKeepRange(w,x,r,2),{first:ve,last:Se,views:w,ids:x}}function getExpandKeepRange(e,n,r,o){if(e.length&&e){var s=e[0].view.pageIndex,u=e[e.length-1].view.pageIndex,d=Math.min(s,u),f=Math.max(s,u),v=r.length;if(d>1)for(var m=Math.max(1,d-o);m<d&&m<v;m++){var _=r[m];e.push({id:_.id,view:_,percent:0,widthPercent:0}),n.add(_.id)}if(f<v-1)for(var g=f+1;g<v&&g<=f+o;g++){var y=r[g];e.push({id:y.id,view:y,percent:0,widthPercent:0}),n.add(y.id)}}}function normalizeWheelEventDirection(e){var n=Math.hypot(e.deltaX,e.deltaY),r=Math.atan2(e.deltaY,e.deltaX);return-.25*Math.PI<r&&r<.75*Math.PI&&(n=-n),n}function normalizeWheelEventDelta(e){var n=normalizeWheelEventDirection(e);return e.deltaMode===0?n/=900:e.deltaMode===1&&(n/=30),n}function isValidRotation(e){return Number.isInteger(e)&&e%90==0}function isValidScrollMode(e){return Number.isInteger(e)&&Object.values(ScrollMode).includes(e)&&e!==ScrollMode.UNKNOWN}function isValidSpreadMode(e){return Number.isInteger(e)&&Object.values(SpreadMode).includes(e)&&e!==SpreadMode.UNKNOWN}function isPortraitOrientation(e){return e.width<=e.height}typeof document<"u"&&document.documentElement.style;var xmlParser=function(e){return new window.DOMParser().parseFromString(e,"text/xml")},getElementsByTagName=function(e,n){var r=Array.prototype.slice.call(e.childNodes),o=null;return r.forEach(function(s){s.tagName===n&&(o=s.childNodes)}),o};function bindEvents(e,n,r){var o,s=_createForOfIteratorHelper(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;n.addEventListener(u,e[u].bind(e))}}catch(d){s.e(d)}finally{s.f()}}function getFontAttribute(e){var n=null;return Array.prototype.slice.call(e.childNodes).forEach(function(r){if(r.tagName==="defaultappearance"){var o=(r.innerHTML||r.textContent||"").split(" ");n={"font-size":parseInt(o[5],10),"font-name":o[4].substr(1),"font-color":rgbToHex(parseFloat(o[0]),parseFloat(o[1]),parseFloat(o[2]))}}else if(r.tagName==="contents-richtext"){var s=r.innerHTML||r.textContent||"";s=s.replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&quot;",'"').replaceAll("&#39;","'").replaceAll("&amp;","&");var u=new window.DOMParser().parseFromString(s,"text/xml").getElementsByTagName("body")[0].getAttribute("style"),d={};u.split(";").forEach(function(f){var v=_slicedToArray(f.split(":").map(function(g){return g.trim()}),2),m=v[0],_=v[1];m&&_&&(d[m]=_)})}}),n&&{fontName:n["font-name"],fontSize:parseFloat(n["font-size"]),fontColor:n.color}}var ANNOTATION_TYPE={ink:"ink",freetext:"freetext",text:"text",square:"square",circle:"circle",line:"line",arrow:"line",image:"image",highlight:"highlight",underline:"underline",strikeout:"strikeout",squiggly:"squiggly",stamp:"stamp"},findIndex=function(e,n){return n.findIndex(function(r){return r.name===e})},parseAnnotationFromXml=function(e){if(!e)return[];for(var n=xmlParser(e),r=n.firstElementChild||n.firstChild,o=getElementsByTagName(r,"annots")||[],s=Array.prototype.slice.call(o),u=[],d=0;d<s.length;d++){var f=s[d],v=ANNOTATION_TYPE[f.tagName],m=f.attributes;if(v){var _={date:m.date?m.date.value:m.creationdate?m.creationdate.value:void 0,color:m.color?m.color.value:void 0,flags:m.flags?m.flags.value:void 0,rect:m.rect?m.rect.value:void 0,name:m.name?m.name.value:v4(),width:m.width?m.width.value:void 0,"interior-color":m["interior-color"]?m["interior-color"].value:void 0,page:m.page?m.page.value:void 0,opacity:m.opacity?m.opacity.value:1,type:v};if(_.flags&&_.flags.indexOf("hidden")>-1&&(_.isHidden=1),["highlight","underline","strikeout","squiggly"].includes(v)){var g=getContent(f);g&&(_.content=g),_.coords=m.coords?m.coords.value:void 0}if(v==="line"){if(!_.rect)continue;_.start=m.start?m.start.value:void 0,_.end=m.end?m.end.value:void 0}if(v==="line"&&m.tail&&m.tail.value==="OpenArrow"&&(_.tail="OpenArrow",_.head="None"),(v==="square"||v==="circle"||v==="text"||v==="line")&&!_.rect)continue;if(v==="ink"){var y=getPosition(f);if(!y)continue;_.inklist.gesture=y}if(v==="text"||v==="freetext"){if(!_.rect)continue;var w=getContent(f);w&&(_.content=w)}if(v==="freetext"){_.justification=m.justification?m.justification.value:void 0;var x=getFontAttribute(f);x&&(_.textStyle=x)}if(v==="stamp"){if(!m["stamp-type"]||m["stamp-type"].value==="image")continue;_["stamp-type"]=m["stamp-type"]?m["stamp-type"].value:void 0,_.icon=m.icon?m.icon.value:void 0}u.push(_)}}return u},getPosition=function(e){var n=[],r=e.childNodes[0].childNodes;return Array.prototype.slice.call(r).forEach(function(o){o.tagName==="gesture"&&n.push(o.innerHTML||o.textContent||"")}),n.length===0&&(n=""),n},getContent=function(e){var n="";return Array.prototype.slice.call(e.childNodes).forEach(function(r){if(r.tagName==="contents")n=r.innerHTML||r.textContent||"";else if(r.tagName==="contents-richtext"){var o=r.innerHTML||r.textContent||"";o=o.replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&quot;",'"').replaceAll("&#39;","'").replaceAll("&amp;","&");var s=new window.DOMParser().parseFromString(o,"text/xml");n=s.firstElementChild.innerText}}),n};function unreachable(e){throw new Error(e)}function assert(e,n){e||unreachable(n)}function shadow$1(e,n,r){var o=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return(typeof PDFJSDev>"u"||PDFJSDev.test("!PRODUCTION || TESTING"))&&assert(n in e,'shadow: Property "'.concat(n&&n.toString(),'" not found in object.')),Object.defineProperty(e,n,{value:r,enumerable:!o,configurable:!0,writable:!1}),r}var Util=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"makeHexColor",value:function(n,r,o){return"#".concat(hexNumbers[n]).concat(hexNumbers[r]).concat(hexNumbers[o])}},{key:"scaleMinMax",value:function(n,r){var o;n[0]?(n[0]<0&&(o=r[0],r[0]=r[1],r[1]=o),r[0]*=n[0],r[1]*=n[0],n[3]<0&&(o=r[2],r[2]=r[3],r[3]=o),r[2]*=n[3],r[3]*=n[3]):(o=r[0],r[0]=r[2],r[2]=o,o=r[1],r[1]=r[3],r[3]=o,n[1]<0&&(o=r[2],r[2]=r[3],r[3]=o),r[2]*=n[1],r[3]*=n[1],n[2]<0&&(o=r[0],r[0]=r[1],r[1]=o),r[0]*=n[2],r[1]*=n[2]),r[0]+=n[4],r[1]+=n[4],r[2]+=n[5],r[3]+=n[5]}},{key:"transform",value:function(n,r){return[n[0]*r[0]+n[2]*r[1],n[1]*r[0]+n[3]*r[1],n[0]*r[2]+n[2]*r[3],n[1]*r[2]+n[3]*r[3],n[0]*r[4]+n[2]*r[5]+n[4],n[1]*r[4]+n[3]*r[5]+n[5]]}},{key:"applyTransform",value:function(n,r){return[n[0]*r[0]+n[1]*r[2]+r[4],n[0]*r[1]+n[1]*r[3]+r[5]]}},{key:"applyInverseTransform",value:function(n,r){var o=r[0]*r[3]-r[1]*r[2];return[(n[0]*r[3]-n[1]*r[2]+r[2]*r[5]-r[4]*r[3])/o,(-n[0]*r[1]+n[1]*r[0]+r[4]*r[1]-r[5]*r[0])/o]}},{key:"getAxialAlignedBoundingBox",value:function(n,r){var o=e.applyTransform(n,r),s=e.applyTransform(n.slice(2,4),r),u=e.applyTransform([n[0],n[3]],r),d=e.applyTransform([n[2],n[1]],r);return[Math.min(o[0],s[0],u[0],d[0]),Math.min(o[1],s[1],u[1],d[1]),Math.max(o[0],s[0],u[0],d[0]),Math.max(o[1],s[1],u[1],d[1])]}},{key:"inverseTransform",value:function(n){var r=n[0]*n[3]-n[1]*n[2];return[n[3]/r,-n[1]/r,-n[2]/r,n[0]/r,(n[2]*n[5]-n[4]*n[3])/r,(n[4]*n[1]-n[5]*n[0])/r]}},{key:"singularValueDecompose2dScale",value:function(n){var r=[n[0],n[2],n[1],n[3]],o=n[0]*r[0]+n[1]*r[2],s=n[0]*r[1]+n[1]*r[3],u=n[2]*r[0]+n[3]*r[2],d=n[2]*r[1]+n[3]*r[3],f=(o+d)/2,v=Math.sqrt(Math.pow(o+d,2)-4*(o*d-u*s))/2,m=f+v||1,_=f-v||1;return[Math.sqrt(m),Math.sqrt(_)]}},{key:"normalizeRect",value:function(n){var r=n.slice(0);return n[0]>n[2]&&(r[0]=n[2],r[2]=n[0]),n[1]>n[3]&&(r[1]=n[3],r[3]=n[1]),r}},{key:"intersect",value:function(n,r){var o=Math.max(Math.min(n[0],n[2]),Math.min(r[0],r[2])),s=Math.min(Math.max(n[0],n[2]),Math.max(r[0],r[2]));if(o>s)return null;var u=Math.max(Math.min(n[1],n[3]),Math.min(r[1],r[3])),d=Math.min(Math.max(n[1],n[3]),Math.max(r[1],r[3]));return u>d?null:[o,u,s,d]}},{key:"bezierBoundingBox",value:function(n,r,o,s,u,d,f,v){for(var m,_,g,y,w,x,k,S,E=[],T=[[],[]],M=0;M<2;++M)if(M===0?(_=6*n-12*o+6*u,m=-3*n+9*o-9*u+3*f,g=3*o-3*n):(_=6*r-12*s+6*d,m=-3*r+9*s-9*d+3*v,g=3*s-3*r),Math.abs(m)<1e-12){if(Math.abs(_)<1e-12)continue;0<(y=-g/_)&&y<1&&E.push(y)}else k=_*_-4*g*m,S=Math.sqrt(k),k<0||(0<(w=(-_+S)/(2*m))&&w<1&&E.push(w),0<(x=(-_-S)/(2*m))&&x<1&&E.push(x));for(var I,F=E.length,O=F;F--;)I=1-(y=E[F]),T[0][F]=I*I*I*n+3*I*I*y*o+3*I*y*y*u+y*y*y*f,T[1][F]=I*I*I*r+3*I*I*y*s+3*I*y*y*d+y*y*y*v;return T[0][O]=n,T[1][O]=r,T[0][O+1]=f,T[1][O+1]=v,T[0].length=T[1].length=O+2,[Math.min.apply(Math,_toConsumableArray$1(T[0])),Math.min.apply(Math,_toConsumableArray$1(T[1])),Math.max.apply(Math,_toConsumableArray$1(T[0])),Math.max.apply(Math,_toConsumableArray$1(T[1]))]}},{key:"getBoundingBox",value:function(n,r,o,s){return[Math.abs(n-o),Math.abs(r-s)]}}]),e}();function rgbToHex(e,n,r){var o=(16777216|e<<16|n<<8|r).toString(16).slice(1).toUpperCase();return"#".concat(o)}var onClickOutside=function(e,n){document.addEventListener(isMobileDevice$1?"touchstart":"mousedown",function r(o){var s=!0;if(Array.isArray(e))e.forEach(function(u){u&&!u.contains(o.target)||(s=!1)});else if(!e||e.contains(o.target))return;s&&(n&&n(o),document.removeEventListener(isMobileDevice$1?"touchstart":"mousedown",r))})},onClickOutsideUp=function(e,n){document.addEventListener(isMobileDevice$1?"touchend":"mouseup",function r(o){var s=!0;if(Array.isArray(e))e.forEach(function(u){u&&!u.contains(o.target)||(s=!1)});else if(!e||e.contains(o.target))return;s&&(n&&n(o),document.removeEventListener(isMobileDevice$1?"touchend":"mouseup",r))})},setCss=function(e,n){if(e&&n)for(var r in n)e.style[r]=n[r]},_pagesRefCache=new WeakMap,PDFLinkService=function(){function e(){_classCallCheck(this,e),_classPrivateFieldInitSpec(this,_pagesRefCache,{writable:!0,value:new Map}),this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null}return _createClass(e,[{key:"setDocument",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.baseUrl=r,this.pdfDocument=n,_classPrivateFieldGet(this,_pagesRefCache).clear()}},{key:"setViewer",value:function(n){this.pdfViewer=n}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(n){this.pdfViewer.currentPageNumber=n}},{key:"rotation",get:function(){return this.pdfViewer.pagesRotation},set:function(n){this.pdfViewer.pagesRotation=n}},{key:"goToPage",value:function(n){if(this.pdfDocument){var r=typeof n=="string"&&this.pdfViewer.pageLabelToPageNumber(n)||0|n;Number.isInteger(r)&&r>0&&r<=this.pagesCount?this.pdfViewer.scrollPageIntoView({pageNumber:r}):console.error('PDFLinkService.goToPage: "'.concat(n,'" is not a valid page.'))}}},{key:"cachePageRef",value:function(n,r){if(r){var o=r.gen===0?"".concat(r.num,"R"):"".concat(r.num,"R").concat(r.gen);_classPrivateFieldGet(this,_pagesRefCache).set(o,n)}}},{key:"_cachedPageNumber",value:function(n){if(!n)return null;var r=n.gen===0?"".concat(n.num,"R"):"".concat(n.num,"R").concat(n.gen);return _classPrivateFieldGet(this,_pagesRefCache).get(r)||null}},{key:"isPageVisible",value:function(n){return this.pdfViewer.isPageVisible(n)}},{key:"isPageCached",value:function(n){return this.pdfViewer.isPageCached(n)}}]),e}(),_activeCapability=new WeakMap,_updateCallback=new WeakMap,_callback=new WeakMap,_reason=new WeakMap,_active=new WeakMap,_verify=new WeakSet,_cancel=new WeakSet,_invokeCallback=new WeakSet,PasswordPrompt=function(){function e(s){var u=this;_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_invokeCallback),_classPrivateMethodInitSpec(this,_cancel),_classPrivateMethodInitSpec(this,_verify),_classPrivateFieldInitSpec(this,_activeCapability,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_updateCallback,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_callback,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_reason,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_active,{writable:!0,value:!1}),this.dialog=s.dialog,this.label=s.label,this.input=s.input,this.submitButton=s.submitButton,this.cancelButton=s.cancelButton,this.$t=s.$t,this.submitButton.addEventListener("click",_classPrivateMethodGet(this,_verify,_verify2).bind(this)),this.cancelButton.addEventListener("click",this.close.bind(this)),this.input.addEventListener("keyup",function(d){d.keyCode===13&&_classPrivateMethodGet(u,_verify,_verify2).call(u),u.label.textContent="",u.input.value===""?u.submitButton.classList.add("disabled"):u.submitButton.classList.remove("disabled")})}var n,r,o;return _createClass(e,[{key:"open",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function s(){var u;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!_classPrivateFieldGet(this,_activeCapability)){d.next=3;break}return d.next=3,_classPrivateFieldGet(this,_activeCapability).promise;case 3:_classPrivateFieldSet(this,_activeCapability,pdfExports.createPromiseCapability()),d.prev=4,this.dialog.classList.add("show"),this.submitButton.classList.add("disabled"),_classPrivateFieldSet(this,_active,!0),d.next=14;break;case 10:throw d.prev=10,d.t0=d.catch(4),_classPrivateFieldSet(this,_activeCapability,null),d.t0;case 14:(u=_classPrivateFieldGet(this,_reason)===pdfExports.PasswordResponses.INCORRECT_PASSWORD)&&this.input.focus(),u?(this.label.textContent=this.$t("passwordDialog.wrongPwd"),this.label.style.color="red"):(this.label.style.color="",this.label.textContent="");case 17:case"end":return d.stop()}},s,this,[[4,10]])})),function(){return o.apply(this,arguments)})},{key:"close",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function s(){var u;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:_classPrivateFieldGet(this,_active)&&((u=new Event("click")).param=!1,document.getElementById("eyeVisible").dispatchEvent(u),this.dialog.classList.remove("show"),_classPrivateFieldSet(this,_active,!1),_classPrivateMethodGet(this,_cancel,_cancel2).call(this));case 1:case"end":return d.stop()}},s,this)})),function(){return r.apply(this,arguments)})},{key:"setUpdateCallback",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function s(u,d,f){return _regeneratorRuntime().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!_classPrivateFieldGet(this,_activeCapability)){v.next=3;break}return v.next=3,_classPrivateFieldGet(this,_activeCapability).promise;case 3:_classPrivateFieldSet(this,_updateCallback,u),_classPrivateFieldSet(this,_reason,d),_classPrivateFieldSet(this,_callback,f);case 6:case"end":return v.stop()}},s,this)})),function(s,u,d){return n.apply(this,arguments)})}]),e}(),_CheckStyleString;function _verify2(){var e=this.input.value;(e==null?void 0:e.length)>0&&_classPrivateMethodGet(this,_invokeCallback,_invokeCallback2).call(this,e)}function _cancel2(){_classPrivateMethodGet(this,_invokeCallback,_invokeCallback2).call(this,new Error("PasswordPrompt cancelled.")),_classPrivateFieldGet(this,_activeCapability).resolve()}function _invokeCallback2(e){_classPrivateFieldGet(this,_updateCallback)&&(this.input.value="",_classPrivateFieldGet(this,_updateCallback).call(this,e),_classPrivateFieldGet(this,_callback).call(this,e),_classPrivateFieldSet(this,_callback,null),_classPrivateFieldSet(this,_updateCallback,null),this.close())}var RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},ALIGNMAP={LEFT:0,CENTER:1,CENTERED:1,RIGHT:2},MARGIN_DISTANCE=10,AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15},AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13},AnnotationTypeString={1:"text",2:"link",3:"freetext",4:"line",5:"square",6:"circle",7:"polygon",8:"polyline",9:"highlight",10:"underline",11:"squiggly",12:"strikeout",13:"stamp",14:"caret",15:"ink",16:"popup",17:"fileattachment",18:"sound",19:"movie",20:"widget",21:"screen",22:"printermark",23:"trapnet",24:"watermark",25:"threed",26:"redact"};_CheckStyleString={1:"none",0:"check"},_defineProperty$1(_CheckStyleString,"1","circle"),_defineProperty$1(_CheckStyleString,2,"cross"),_defineProperty$1(_CheckStyleString,3,"diamond"),_defineProperty$1(_CheckStyleString,4,"square"),_defineProperty$1(_CheckStyleString,5,"star");var PixelsPerInch=_createClass(function e(){_classCallCheck(this,e)});_defineProperty$1(PixelsPerInch,"CSS",96),_defineProperty$1(PixelsPerInch,"PDF",72),_defineProperty$1(PixelsPerInch,"PDF_TO_CSS_UNITS",1);var KeyboardManager=function(){function e(n){_classCallCheck(this,e),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;var r,o=e.platform.isMac,s=_createForOfIteratorHelper(n);try{for(s.s();!(r=s.n()).done;){var u,d=_slicedToArray(r.value,2),f=d[0],v=d[1],m=_createForOfIteratorHelper(f);try{for(m.s();!(u=m.n()).done;){var _=u.value,g=_.startsWith("mac+");o&&g?(this.callbacks.set(_.slice(4),v),this.allKeys.add(_.split("+").at(-1))):o||g||(this.callbacks.set(_,v),this.allKeys.add(_.split("+").at(-1)))}}catch(y){m.e(y)}finally{m.f()}}}catch(y){s.e(y)}finally{s.f()}}return _createClass(e,[{key:"_serialize",value:function(n){n.altKey&&this.buffer.push("alt"),n.ctrlKey&&this.buffer.push("ctrl"),n.metaKey&&this.buffer.push("meta"),n.shiftKey&&this.buffer.push("shift"),this.buffer.push(n.key);var r=this.buffer.join("+");return this.buffer.length=0,r}},{key:"exec",value:function(n,r){if(this.allKeys.has(r.key)){var o=this.callbacks.get(this._serialize(r));o&&(o.bind(n)(),r.stopPropagation(),r.preventDefault())}}}],[{key:"platform",get:function(){var n=typeof navigator<"u"?navigator.platform:"";return shadow$1(this,"platform",{isWin:n.includes("Win"),isMac:n.includes("Mac")})}}]),e}();function opacityToHex(e){return Math.round(Math.min(255,Math.max(1,255*e))).toString(16).padStart(2,"0")}var dayjs_minExports={},dayjs_min$1={get exports(){return dayjs_minExports},set exports(e){dayjs_minExports=e}};dayjs_min$1.exports=function(){var e=1e3,n=6e4,r=36e5,o="millisecond",s="second",u="minute",d="hour",f="day",v="week",m="month",_="quarter",g="year",y="date",w="Invalid Date",x=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,k=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Z){var j=["th","st","nd","rd"],Q=Z%100;return"["+Z+(j[(Q-20)%10]||j[Q]||j[0])+"]"}},E=function(Z,j,Q){var ve=String(Z);return!ve||ve.length>=j?Z:""+Array(j+1-ve.length).join(Q)+Z},T={s:E,z:function(Z){var j=-Z.utcOffset(),Q=Math.abs(j),ve=Math.floor(Q/60),Se=Q%60;return(j<=0?"+":"-")+E(ve,2,"0")+":"+E(Se,2,"0")},m:function Z(j,Q){if(j.date()<Q.date())return-Z(Q,j);var ve=12*(Q.year()-j.year())+(Q.month()-j.month()),Se=j.clone().add(ve,m),we=Q-Se<0,oe=j.clone().add(ve+(we?-1:1),m);return+(-(ve+(Q-Se)/(we?Se-oe:oe-Se))||0)},a:function(Z){return Z<0?Math.ceil(Z)||0:Math.floor(Z)},p:function(Z){return{M:m,y:g,w:v,d:f,D:y,h:d,m:u,s,ms:o,Q:_}[Z]||String(Z||"").toLowerCase().replace(/s$/,"")},u:function(Z){return Z===void 0}},M="en",I={};I[M]=S;var F=function(Z){return Z instanceof X},O=function Z(j,Q,ve){var Se;if(!j)return M;if(typeof j=="string"){var we=j.toLowerCase();I[we]&&(Se=we),Q&&(I[we]=Q,Se=we);var oe=j.split("-");if(!Se&&oe.length>1)return Z(oe[0])}else{var ne=j.name;I[ne]=j,Se=ne}return!ve&&Se&&(M=Se),Se||!ve&&M},N=function(Z,j){if(F(Z))return Z.clone();var Q=_typeof$1(j)=="object"?j:{};return Q.date=Z,Q.args=arguments,new X(Q)},D=T;D.l=O,D.i=F,D.w=function(Z,j){return N(Z,{locale:j.$L,utc:j.$u,x:j.$x,$offset:j.$offset})};var X=function(){function Z(Q){this.$L=O(Q.locale,null,!0),this.parse(Q)}var j=Z.prototype;return j.parse=function(Q){this.$d=function(ve){var Se=ve.date,we=ve.utc;if(Se===null)return new Date(NaN);if(D.u(Se))return new Date;if(Se instanceof Date)return new Date(Se);if(typeof Se=="string"&&!/Z$/i.test(Se)){var oe=Se.match(x);if(oe){var ne=oe[2]-1||0,q=(oe[7]||"0").substring(0,3);return we?new Date(Date.UTC(oe[1],ne,oe[3]||1,oe[4]||0,oe[5]||0,oe[6]||0,q)):new Date(oe[1],ne,oe[3]||1,oe[4]||0,oe[5]||0,oe[6]||0,q)}}return new Date(Se)}(Q),this.$x=Q.x||{},this.init()},j.init=function(){var Q=this.$d;this.$y=Q.getFullYear(),this.$M=Q.getMonth(),this.$D=Q.getDate(),this.$W=Q.getDay(),this.$H=Q.getHours(),this.$m=Q.getMinutes(),this.$s=Q.getSeconds(),this.$ms=Q.getMilliseconds()},j.$utils=function(){return D},j.isValid=function(){return this.$d.toString()!==w},j.isSame=function(Q,ve){var Se=N(Q);return this.startOf(ve)<=Se&&Se<=this.endOf(ve)},j.isAfter=function(Q,ve){return N(Q)<this.startOf(ve)},j.isBefore=function(Q,ve){return this.endOf(ve)<N(Q)},j.$g=function(Q,ve,Se){return D.u(Q)?this[ve]:this.set(Se,Q)},j.unix=function(){return Math.floor(this.valueOf()/1e3)},j.valueOf=function(){return this.$d.getTime()},j.startOf=function(Q,ve){var Se=this,we=!!D.u(ve)||ve,oe=D.p(Q),ne=function(Ee,Pe){var Be=D.w(Se.$u?Date.UTC(Se.$y,Pe,Ee):new Date(Se.$y,Pe,Ee),Se);return we?Be:Be.endOf(f)},q=function(Ee,Pe){return D.w(Se.toDate()[Ee].apply(Se.toDate("s"),(we?[0,0,0,0]:[23,59,59,999]).slice(Pe)),Se)},H=this.$W,Y=this.$M,le=this.$D,Ce="set"+(this.$u?"UTC":"");switch(oe){case g:return we?ne(1,0):ne(31,11);case m:return we?ne(1,Y):ne(0,Y+1);case v:var Te=this.$locale().weekStart||0,ke=(H<Te?H+7:H)-Te;return ne(we?le-ke:le+(6-ke),Y);case f:case y:return q(Ce+"Hours",0);case d:return q(Ce+"Minutes",1);case u:return q(Ce+"Seconds",2);case s:return q(Ce+"Milliseconds",3);default:return this.clone()}},j.endOf=function(Q){return this.startOf(Q,!1)},j.$set=function(Q,ve){var Se,we=D.p(Q),oe="set"+(this.$u?"UTC":""),ne=(Se={},Se[f]=oe+"Date",Se[y]=oe+"Date",Se[m]=oe+"Month",Se[g]=oe+"FullYear",Se[d]=oe+"Hours",Se[u]=oe+"Minutes",Se[s]=oe+"Seconds",Se[o]=oe+"Milliseconds",Se)[we],q=we===f?this.$D+(ve-this.$W):ve;if(we===m||we===g){var H=this.clone().set(y,1);H.$d[ne](q),H.init(),this.$d=H.set(y,Math.min(this.$D,H.daysInMonth())).$d}else ne&&this.$d[ne](q);return this.init(),this},j.set=function(Q,ve){return this.clone().$set(Q,ve)},j.get=function(Q){return this[D.p(Q)]()},j.add=function(Q,ve){var Se,we=this;Q=Number(Q);var oe=D.p(ve),ne=function(Y){var le=N(we);return D.w(le.date(le.date()+Math.round(Y*Q)),we)};if(oe===m)return this.set(m,this.$M+Q);if(oe===g)return this.set(g,this.$y+Q);if(oe===f)return ne(1);if(oe===v)return ne(7);var q=(Se={},Se[u]=n,Se[d]=r,Se[s]=e,Se)[oe]||1,H=this.$d.getTime()+Q*q;return D.w(H,this)},j.subtract=function(Q,ve){return this.add(-1*Q,ve)},j.format=function(Q){var ve=this,Se=this.$locale();if(!this.isValid())return Se.invalidDate||w;var we=Q||"YYYY-MM-DDTHH:mm:ssZ",oe=D.z(this),ne=this.$H,q=this.$m,H=this.$M,Y=Se.weekdays,le=Se.months,Ce=function(Pe,Be,$e,Oe){return Pe&&(Pe[Be]||Pe(ve,we))||$e[Be].slice(0,Oe)},Te=function(Pe){return D.s(ne%12||12,Pe,"0")},ke=Se.meridiem||function(Pe,Be,$e){var Oe=Pe<12?"AM":"PM";return $e?Oe.toLowerCase():Oe},Ee={YY:String(this.$y).slice(-2),YYYY:this.$y,M:H+1,MM:D.s(H+1,2,"0"),MMM:Ce(Se.monthsShort,H,le,3),MMMM:Ce(le,H),D:this.$D,DD:D.s(this.$D,2,"0"),d:String(this.$W),dd:Ce(Se.weekdaysMin,this.$W,Y,2),ddd:Ce(Se.weekdaysShort,this.$W,Y,3),dddd:Y[this.$W],H:String(ne),HH:D.s(ne,2,"0"),h:Te(1),hh:Te(2),a:ke(ne,q,!0),A:ke(ne,q,!1),m:String(q),mm:D.s(q,2,"0"),s:String(this.$s),ss:D.s(this.$s,2,"0"),SSS:D.s(this.$ms,3,"0"),Z:oe};return we.replace(k,function(Pe,Be){return Be||Ee[Pe]||oe.replace(":","")})},j.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},j.diff=function(Q,ve,Se){var we,oe=D.p(ve),ne=N(Q),q=(ne.utcOffset()-this.utcOffset())*n,H=this-ne,Y=D.m(this,ne);return Y=(we={},we[g]=Y/12,we[m]=Y,we[_]=Y/3,we[v]=(H-q)/6048e5,we[f]=(H-q)/864e5,we[d]=H/r,we[u]=H/n,we[s]=H/e,we)[oe]||H,Se?Y:D.a(Y)},j.daysInMonth=function(){return this.endOf(m).$D},j.$locale=function(){return I[this.$L]},j.locale=function(Q,ve){if(!Q)return this.$L;var Se=this.clone(),we=O(Q,ve,!0);return we&&(Se.$L=we),Se},j.clone=function(){return D.w(this.$d,this)},j.toDate=function(){return new Date(this.valueOf())},j.toJSON=function(){return this.isValid()?this.toISOString():null},j.toISOString=function(){return this.$d.toISOString()},j.toString=function(){return this.$d.toUTCString()},Z}(),U=X.prototype;return N.prototype=U,[["$ms",o],["$s",s],["$m",u],["$H",d],["$W",f],["$M",m],["$y",g],["$D",y]].forEach(function(Z){U[Z[1]]=function(j){return this.$g(j,Z[0],Z[1])}}),N.extend=function(Z,j){return Z.$i||(Z(j,X,N),Z.$i=!0),N},N.locale=O,N.isDayjs=F,N.unix=function(Z){return N(1e3*Z)},N.en=I[M],N.Ls=I,N.p={},N}();var dayjs$1=dayjs_minExports,PDFAnnotation=function(){function e(n){_classCallCheck(this,e),this._boundFocusin=this.focusin.bind(this),this._boundFocusout=this.focusout.bind(this),this._hasBeenSelected=!1,this._isEditing=!1,this._isInEditMode=!1,this.annotation=n.annotation||null,this.parent=n.parent,this.id=n.id,this.width=this.height=null,this.pageIndex=n.parent.pageIndex,this.name=n.name,this.div=null,this.viewport=this.parent.viewport;var r=_slicedToArray(this.parent.viewportBaseDimensions,2),o=r[0],s=r[1];this.x=n.x/o,this.y=n.y/s,this.rotation=this.viewport.rotation,this.isAttachedToDOM=!1}return _createClass(e,[{key:"setInBackground",value:function(){this.div.style.zIndex=0}},{key:"focusin",value:function(){this._hasBeenSelected?this._hasBeenSelected=!1:this.parent.setSelected(this)}},{key:"focusout",value:function(n){if(this.isAttachedToDOM){var r=n.relatedTarget;r!=null&&r.closest("#".concat(this.id))||(n.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove(),this.parent.unselect(this))}}},{key:"commitOrRemove",value:function(){this.isEmpty()?this.remove():this.commit()}},{key:"fixDims",value:function(){var n=this.div.style,r=n.height,o=n.width,s=o.endsWith("%"),u=r.endsWith("%");if(!s||!u){var d=_slicedToArray(this.parent.viewportBaseDimensions,2),f=d[0],v=d[1];s||(n.width="".concat(100*parseFloat(o)/f,"%")),u||(n.height="".concat(100*parseFloat(r)/v,"%"))}}},{key:"commit",value:function(){this.parent.addToAnnotationStorage(this)}},{key:"dragstart",value:function(n){var r=this.parent.div.getBoundingClientRect();this.startX=n.clientX-r.x,this.startY=n.clientY-r.y,n.dataTransfer.setData("text/plain",this.id),n.dataTransfer.effectAllowed="move"}},{key:"setAt",value:function(n,r,o,s){var u=_slicedToArray(this.parent.viewportBaseDimensions,2),d=u[0],f=u[1],v=_slicedToArray(this.screenToPageTranslation(o,s),2);o=v[0],s=v[1],this.x=(n+o)/d,this.y=(r+s)/f,this.div.style.left="".concat(100*this.x,"%"),this.div.style.top="".concat(100*this.y,"%")}},{key:"translate",value:function(n,r){var o=_slicedToArray(this.parent.viewportBaseDimensions,2),s=o[0],u=o[1],d=_slicedToArray(this.screenToPageTranslation(n,r),2);n=d[0],r=d[1],this.x+=n/s,this.y+=r/u,this.div.style.left="".concat(100*this.x,"%"),this.div.style.top="".concat(100*this.y,"%")}},{key:"screenToPageTranslation",value:function(n,r){switch(this.parent.viewport.rotation){case 90:return[r,-n];case 180:return[-n,-r];case 270:return[-r,n];default:return[n,r]}}},{key:"setDims",value:function(n,r){var o=_slicedToArray(this.parent.viewportBaseDimensions,2),s=o[0],u=o[1];this.div.style.width="".concat(100*n/s,"%"),this.div.style.height="".concat(100*r/u,"%")}},{key:"getInitialTranslation",value:function(){return[0,0]}},{key:"render",value:function(){if(this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.div.addEventListener("focusin",this._boundFocusin),this.div.addEventListener("focusout",this._boundFocusout),this.annotation){var n=this.rectCalc(position,this.parent.viewport.height,scale);this.div.style.top=n.top+"px",this.div.style.left=n.left+"px"}else{var r=_slicedToArray(this.getInitialTranslation(),2),o=r[0],s=r[1];this.translate(o,s)}return bindEvents(this,this.div,["dragstart","pointerdown"]),this.div}},{key:"rectCalc",value:function(n,r,o){return{top:r-n.top*o,left:n.left*o,width:(n.right-n.left)*o,height:(n.top-n.bottom)*o}}},{key:"pointerdown",value:function(n){var r=KeyboardManager.platform.isMac;n.button!==0||n.ctrlKey&&r?n.preventDefault():(n.ctrlKey&&!r||n.shiftKey||n.metaKey&&r?this.parent.toggleSelected(this):this.parent.setSelected(this),this._hasBeenSelected=!0)}},{key:"getRect",value:function(n,r){var o=_slicedToArray(this.parent.viewportBaseDimensions,2),s=o[0],u=o[1],d=_slicedToArray(this.parent.pageDimensions,2),f=d[0],v=d[1],m=f*n/s,_=v*r/u,g=this.x*f,y=this.y*v,w=this.width*f,x=this.height*v;switch(this.rotation){case 0:return[g+m,v-y-_-x,g+m+w,v-y-_];case 90:return[g+_,v-y+m,g+_+x,v-y+m+w];case 180:return[g-m-w,v-y+_,g-m,v-y+_+x];case 270:return[g-_-x,v-y-m-w,g-_,v-y-m];default:throw new Error("Invalid rotation")}}},{key:"getRectInCurrentCoords",value:function(n,r){var o=_slicedToArray(n,4),s=o[0],u=o[1],d=o[2],f=o[3],v=d-s,m=f-u;switch(this.rotation){case 0:return[s,r-f,v,m];case 90:return[s,r-u,m,v];case 180:return[d,r-u,v,m];case 270:return[d,r-f,m,v];default:throw new Error("Invalid rotation")}}},{key:"enableEditMode",value:function(){this._isInEditMode=!0}},{key:"disableEditMode",value:function(){this._isInEditMode=!1}},{key:"isInEditMode",value:function(){return this._isInEditMode}},{key:"shouldGetKeyboardEvents",value:function(){return!1}},{key:"needsToBeRebuilt",value:function(){return this.div&&!this.isAttachedToDOM}},{key:"rebuild",value:function(){var n;(n=this.div)===null||n===void 0||n.addEventListener("focusin",this._boundFocusin)}},{key:"remove",value:function(){this.div.removeEventListener("focusin",this._boundFocusin),this.div.removeEventListener("focusout",this._boundFocusout),this.isEmpty()||this.commit(),this.parent.remove(this)}},{key:"select",value:function(){var n;(n=this.div)===null||n===void 0||n.classList.add("selectedAnnotation")}},{key:"unselect",value:function(){var n;(n=this.div)===null||n===void 0||n.classList.remove("selectedAnnotation")}},{key:"updateParams",value:function(n,r){}},{key:"disableEditing",value:function(){}},{key:"enableEditing",value:function(){}},{key:"propertiesToUpdate",get:function(){return{}}},{key:"contentDiv",get:function(){return this.div}},{key:"isEditing",get:function(){return this._isEditing},set:function(n){this._isEditing=n,n?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}],[{key:"deserialize",value:function(n,r){var o=new this.prototype.constructor({parent:r,id:r.getNextId()});o.rotation=n.rotation;var s=_slicedToArray(r.pageDimensions,2),u=s[0],d=s[1],f=_slicedToArray(o.getRectInCurrentCoords(n.rect,d),4),v=f[0],m=f[1],_=f[2],g=f[3];return o.x=v/u,o.y=m/d,o.width=_/u,o.height=g/d,o}},{key:"renderImportAnnotations",value:function(n,r){var o=new this.prototype.constructor({parent:r,id:r.getNextId()});o.rotation=n.rotation;var s=_slicedToArray(r.pageDimensions,2),u=s[0],d=s[1],f=this.prototype.rectCalc(n.position,r.viewport.height,r.scaleFactor);return o.x=f.top/u,o.y=f.left/d,o.width=f.width/u,o.height=f.height/d,o}}]),e}();_defineProperty$1(PDFAnnotation,"_zIndex",1),_defineProperty$1(PDFAnnotation,"_defaultLineColor","#ff0000");var PDFAnnotationSticky=function(e){_inherits(r,PDFAnnotation);var n=_createSuper(r);function r(o){var s;return _classCallCheck(this,r),(s=n.call(this,_objectSpread2$1(_objectSpread2$1({},o),{},{name:"stickyAnnotation"})))._boundEditorDivBlur=s.editorDivBlur.bind(_assertThisInitialized(s)),s._boundEditorDivFocus=s.editorDivFocus.bind(_assertThisInitialized(s)),s._boundEditorDivInput=s.editorDivInput.bind(_assertThisInitialized(s)),s._boundEditorDivKeydown=s.editorDivKeydown.bind(_assertThisInitialized(s)),s._content="",s._editorDivId="".concat(s.id,"-editor"),s._hasAlreadyBeenCommitted=!1,s.annotationObj=null,s._color=o.color||r._defaultColor,s._fontSize=o.fontSize||r._defaultFontSize,s._internalPadding=o.internalPadding||r._defaultInternalPadding,s._stickyWidth=20,s}return _createClass(r,[{key:"updateParams",value:function(o,s){switch(o){case AnnotationEditorParamsType.FREETEXT_SIZE:this._updateFontSize(s);break;case AnnotationEditorParamsType.FREETEXT_COLOR:this._updateColor(s)}}},{key:"propertiesToUpdate",get:function(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,this._fontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,this._color]]}},{key:"_updateFontSize",value:function(o){this.editorDiv.style.fontSize="".concat(o,"px"),this.translate(0,-(o-this._fontSize)*this.parent.scaleFactor),this._fontSize=o,this._setEditorDimensions()}},{key:"_updateColor",value:function(o){this._color=o,this.editorDiv.style.color=o}},{key:"getInitialTranslation",value:function(){return[-this._internalPadding*this.parent.scaleFactor,-(this._internalPadding+this._fontSize)*this.parent.scaleFactor]}},{key:"rebuild",value:function(){_get(_getPrototypeOf(r.prototype),"rebuild",this).call(this),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}},{key:"enableEditMode",value:function(){this.isInEditMode()||(this.parent.setEditingState(!1),_get(_getPrototypeOf(r.prototype),"enableEditMode",this).call(this),this.overlayDiv.classList.remove("enabled"),this.editorDiv.style.display="initial",this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("focus",this._boundEditorDivFocus),this.editorDiv.addEventListener("blur",this._boundEditorDivBlur),this.editorDiv.addEventListener("input",this._boundEditorDivInput))}},{key:"disableEditMode",value:function(){this.isInEditMode()&&(this.parent.setEditingState(!0),_get(_getPrototypeOf(r.prototype),"disableEditMode",this).call(this),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this._editorDivId),this.editorDiv.style.display="none",this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",this._boundEditorDivKeydown),this.editorDiv.removeEventListener("focus",this._boundEditorDivFocus),this.editorDiv.removeEventListener("blur",this._boundEditorDivBlur),this.editorDiv.removeEventListener("input",this._boundEditorDivInput),this.div.focus(),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}},{key:"focusin",value:function(o){_get(_getPrototypeOf(r.prototype),"focusin",this).call(this,o),o.target!==this.editorDiv&&this.editorDiv.focus()}},{key:"onceAdded",value:function(){this.width||(this.enableEditMode(),this.editorDiv.focus())}},{key:"isEmpty",value:function(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}},{key:"remove",value:function(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),_get(_getPrototypeOf(r.prototype),"remove",this).call(this)}},{key:"_extractText",value:function(){var o,s=this.editorDiv.getElementsByTagName("div");if(s.length===0)return this.editorDiv.innerText;var u=[];((o=this.editorDiv.firstChild)===null||o===void 0?void 0:o.nodeName)==="#text"&&u.push(this.editorDiv.firstChild.data);var d,f=_createForOfIteratorHelper(s);try{for(f.s();!(d=f.n()).done;){var v=d.value.firstChild;(v==null?void 0:v.nodeName)==="#text"?u.push(v.data):u.push("")}}catch(m){f.e(m)}finally{f.f()}return u.join(`
`)}},{key:"_setEditorDimensions",value:function(){var o=_slicedToArray(this.parent.viewportBaseDimensions,2),s=o[0],u=o[1],d=this.div.getBoundingClientRect();this.width=d.width/s,this.height=d.height/u}},{key:"commit",value:function(){this._content=this._extractText().trimEnd();var o=_slicedToArray(this.parent.viewportBaseDimensions,2),s=o[0],u=o[1],d={left:this.x*s,bottom:this.y*u+this._stickyWidth,right:this.x*s+this._stickyWidth,top:this.y*u};this.annotationObj={id:v4(),obj_type:"Text",obj_attr:{bdcolor:"#FF2600",content:this._content||void 0,date:dayjs$1().format("YYYY-MM-DD_HH:mm:ss"),ftransparency:1,page:this.pageIndex,position:this.parsePositionForBackend(d,this.viewport.height,this.parent.scale),transparency:1}},_get(_getPrototypeOf(r.prototype),"commit",this).call(this),this._hasAlreadyBeenCommitted||(this._hasAlreadyBeenCommitted=!0,this.parent.addUndoableEditor(this)),this.disableEditMode(),this._setEditorDimensions()}},{key:"parsePositionForBackend",value:function(o,s,u){return{left:Math.round(1e3*o.left/u)/1e3,bottom:Math.round(1e3*(s-o.bottom)/u)/1e3,right:Math.round(1e3*o.right/u)/1e3,top:Math.round(1e3*(s-o.top)/u)/1e3}}},{key:"shouldGetKeyboardEvents",value:function(){return this.isInEditMode()}},{key:"dblclick",value:function(){this.enableEditMode(),this.editorDiv.focus()}},{key:"keydown",value:function(o){o.target===this.div&&o.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}},{key:"editorDivKeydown",value:function(o){r._keyboardManager.exec(this,o)}},{key:"editorDivFocus",value:function(){this.isEditing=!0}},{key:"editorDivBlur",value:function(){this.isEditing=!1}},{key:"editorDivInput",value:function(o){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}},{key:"disableEditing",value:function(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}},{key:"enableEditing",value:function(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}},{key:"render",value:function(){if(this.div)return this.div;var o,s;this.width&&(o=this.x,s=this.y),_get(_getPrototypeOf(r.prototype),"render",this).call(this),this.iconDiv=document.createElement("div"),this.iconDiv.classList="icon-wrapper",this.iconDiv.innerHTML='<svg data-status="normal" width="32" height="32" viewBox="0 0 32 32"><g fill="none" fill-rule="evenodd"><path d="M0 0h32v32H0z"></path><path d="M28 5.333V24H14.667L8 28v-4H4V5.333h24zM18.667 18H9.333v1.333h9.334V18zm4-4H9.333v1.333h13.334V14zm0-4H9.333v1.333h13.334V10z" fill="#BE0C0E"></path></g></svg>',this.div.append(this.iconDiv),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal editor-container",this.editorDiv.setAttribute("id",this._editorDivId),this.enableEditing(),this.editorDiv.contentEditable=!0;var u=this.editorDiv.style;if(u.fontSize="".concat(this._fontSize,"px"),u.color=this._color,u.top="36px",u.left="50%",this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),bindEvents(this,this.div,["dblclick","keydown"]),this.width){this.setAt(o,s,this.width,this.height);var d,f=_createForOfIteratorHelper(this._content.split(`
`));try{for(f.s();!(d=f.n()).done;){var v=d.value,m=document.createElement("div");m.append(v?document.createTextNode(v):document.createElement("br")),this.editorDiv.append(m)}}catch(_){f.e(_)}finally{f.f()}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}},{key:"contentDiv",get:function(){return this.editorDiv}},{key:"serialize",value:function(){if(this.isEmpty())return null;var o=this._internalPadding*this.parent.scaleFactor,s=this.getRect(o,o);return{annotationType:AnnotationEditorType.FREETEXT,color:this._color,fontSize:this._fontSize,value:this._content,pageIndex:this.parent.pageIndex,rect:s,rotation:this.rotation}}}],[{key:"updateDefaultParams",value:function(o,s){switch(o){case AnnotationEditorParamsType.FREETEXT_SIZE:r._defaultFontSize=s;break;case AnnotationEditorParamsType.FREETEXT_COLOR:r._defaultColor=s}}},{key:"defaultPropertiesToUpdate",get:function(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,r._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,r._defaultColor||r._defaultLineColor]]}},{key:"deserialize",value:function(o,s){var u;return(u=o.type==="custom"?_get(_getPrototypeOf(r),"renderImportAnnotations",this).call(this,o,s):_get(_getPrototypeOf(r),"deserialize",this).call(this,o,s))._fontSize=o.fontSize,u._color=this._color,u._content=o.value,u}}]),r}();_defineProperty$1(PDFAnnotationSticky,"_defaultColor","#000"),_defineProperty$1(PDFAnnotationSticky,"_defaultFontSize",10),_defineProperty$1(PDFAnnotationSticky,"_defaultInternalPadding",2),_defineProperty$1(PDFAnnotationSticky,"_keyboardManager",new KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],PDFAnnotationSticky.prototype.commitOrRemove]]));var RESIZER_SIZE=16,TIME_TO_WAIT_BEFORE_FIXING_DIMS=100,_getInitialBBox=new WeakSet,_setStroke=new WeakSet,_startDrawing=new WeakSet,_draw=new WeakSet,_stopDrawing=new WeakSet,_redraw=new WeakSet,_endDrawing=new WeakSet,_createCanvas=new WeakSet,_createObserver=new WeakSet,_setCanvasDims=new WeakSet,_setScaleFactor=new WeakSet,_updateTransform=new WeakSet,_serializePaths=new WeakSet,_extractPointsOnBezier=new WeakSet,_isAlmostFlat=new WeakSet,_getBbox=new WeakSet,_getPadding=new WeakSet,_fitToContent=new WeakSet,_setMinDims=new WeakSet,InkEditor=function(e){_inherits(r,PDFAnnotation);var n=_createSuper(r);function r(o){var s;return _classCallCheck(this,r),_classPrivateMethodInitSpec(_assertThisInitialized(s=n.call(this,_objectSpread2$1(_objectSpread2$1({},o),{},{name:"inkEditor"}))),_setMinDims),_classPrivateMethodInitSpec(_assertThisInitialized(s),_fitToContent),_classPrivateMethodInitSpec(_assertThisInitialized(s),_getPadding),_classPrivateMethodInitSpec(_assertThisInitialized(s),_getBbox),_classPrivateMethodInitSpec(_assertThisInitialized(s),_isAlmostFlat),_classPrivateMethodInitSpec(_assertThisInitialized(s),_extractPointsOnBezier),_classPrivateMethodInitSpec(_assertThisInitialized(s),_serializePaths),_classPrivateMethodInitSpec(_assertThisInitialized(s),_updateTransform),_classPrivateMethodInitSpec(_assertThisInitialized(s),_setScaleFactor),_classPrivateMethodInitSpec(_assertThisInitialized(s),_setCanvasDims),_classPrivateMethodInitSpec(_assertThisInitialized(s),_createObserver),_classPrivateMethodInitSpec(_assertThisInitialized(s),_createCanvas),_classPrivateMethodInitSpec(_assertThisInitialized(s),_endDrawing),_classPrivateMethodInitSpec(_assertThisInitialized(s),_redraw),_classPrivateMethodInitSpec(_assertThisInitialized(s),_stopDrawing),_classPrivateMethodInitSpec(_assertThisInitialized(s),_draw),_classPrivateMethodInitSpec(_assertThisInitialized(s),_startDrawing),_classPrivateMethodInitSpec(_assertThisInitialized(s),_setStroke),_classPrivateMethodInitSpec(_assertThisInitialized(s),_getInitialBBox),s._aspectRatio=0,s._zIndexForeground=r._zIndex++,s._baseHeight=0,s._baseWidth=0,s._boundCanvasPointermove=s.canvasPointermove.bind(_assertThisInitialized(s)),s._boundCanvasPointerleave=s.canvasPointerleave.bind(_assertThisInitialized(s)),s._boundCanvasPointerup=s.canvasPointerup.bind(_assertThisInitialized(s)),s._boundCanvasPointerdown=s.canvasPointerdown.bind(_assertThisInitialized(s)),s._disableEditing=!1,s._isCanvasInitialized=!1,s._lastPoint=null,s._observer=null,s._realWidth=0,s._realHeight=0,s._requestFrameCallback=null,s.color=o.color||null,s.thickness=o.thickness||null,s.opacity=o.opacity||null,s.paths=[],s.bezierPath2D=[],s.currentPath=[],s.arrowPoints=[],s.scaleFactor=1,s.translationX=s.translationY=0,s.x=0,s.y=0,s}return _createClass(r,[{key:"updateParams",value:function(o,s){switch(o){case AnnotationEditorParamsType.INK_THICKNESS:this._updateThickness(s);break;case AnnotationEditorParamsType.INK_COLOR:this._updateColor(s);break;case AnnotationEditorParamsType.INK_OPACITY:this._updateOpacity(s)}}},{key:"propertiesToUpdate",get:function(){var o;return[[AnnotationEditorParamsType.INK_THICKNESS,this.thickness||r._defaultThickness],[AnnotationEditorParamsType.INK_COLOR,this.color||r._defaultColor||PDFAnnotation._defaultLineColor],[AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((o=this.opacity)!==null&&o!==void 0?o:r._defaultOpacity))]]}},{key:"_updateThickness",value:function(o){this.thickness=o,_classPrivateMethodGet(this,_fitToContent,_fitToContent2).call(this)}},{key:"_updateColor",value:function(o){var s=this,u=this.color;this.parent.addCommands({cmd:function(){s.color=o,_classPrivateMethodGet(s,_redraw,_redraw2).call(s)},undo:function(){s.color=u,_classPrivateMethodGet(s,_redraw,_redraw2).call(s)},mustExec:!0,type:AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}},{key:"_updateOpacity",value:function(o){var s=this;o/=100;var u=this.opacity;this.parent.addCommands({cmd:function(){s.opacity=o,_classPrivateMethodGet(s,_redraw,_redraw2).call(s)},undo:function(){s.opacity=u,_classPrivateMethodGet(s,_redraw,_redraw2).call(s)},mustExec:!0,type:AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}},{key:"rebuild",value:function(){_get(_getPrototypeOf(r.prototype),"rebuild",this).call(this),this.div!==null&&(this.canvas||_classPrivateMethodGet(this,_createCanvas,_createCanvas2).call(this),this.isAttachedToDOM||(this.parent.add(this),_classPrivateMethodGet(this,_setCanvasDims,_setCanvasDims2).call(this)),_classPrivateMethodGet(this,_fitToContent,_fitToContent2).call(this))}},{key:"remove",value:function(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this._observer.disconnect(),this._observer=null,_get(_getPrototypeOf(r.prototype),"remove",this).call(this))}},{key:"enableEditMode",value:function(){this._disableEditing||this.canvas===null||(_get(_getPrototypeOf(r.prototype),"enableEditMode",this).call(this),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",this._boundCanvasPointerdown),this.canvas.addEventListener("pointerup",this._boundCanvasPointerup))}},{key:"disableEditMode",value:function(){this.isInEditMode()&&this.canvas!==null&&(_get(_getPrototypeOf(r.prototype),"disableEditMode",this).call(this),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerup",this._boundCanvasPointerup))}},{key:"onceAdded",value:function(){this.div.draggable=!this.isEmpty()}},{key:"isEmpty",value:function(){return!this.paths||this.paths.length<2}},{key:"drawLine",value:function(o,s){var u,d,f,v=o[0]-s[0],m=o[1]-s[1],_=Math.atan(m/v),g=[(o[0]+s[0])/2,(o[1]+s[1])/2];this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),(u=this.ctx).moveTo.apply(u,_toConsumableArray$1(o)),(d=this.ctx).lineTo.apply(d,_toConsumableArray$1(s)),this.ctx.stroke(),this.drawStartLineArrow.apply(this,_toConsumableArray$1(o).concat(_toConsumableArray$1(s))),this.drawEndLineArrow.apply(this,_toConsumableArray$1(o).concat(_toConsumableArray$1(s))),this._move&&this.drawCircle(o,s,_),this.ctx.save(),(f=this.ctx).translate.apply(f,g),this.ctx.beginPath(),this.ctx.rotate(_);var y=Math.round(10*Math.sqrt(v*v+m*m))/10;this.ctx.fillStyle="blue",this.ctx.font="12px Arial";var w=this.ctx.measureText(y+" pt").width;this.ctx.fillText(y+" pt",-w*Math.cos(_)/2,0),this.ctx.restore(),this.ctx.save(),this.parent._uiManager._eventBus.dispatch("distanceChanged",{distance:y})}},{key:"drawCircle",value:function(o,s){var u=o[0]-s[0],d=o[1]-s[1],f=Math.atan(d/u),v=o[0]+10*Math.cos(f),m=o[1]+10*Math.sin(f),_=this.ctx,g="#0097ff";_.fillStyle=g,_.beginPath(),_.arc(v,m,6,0,2*Math.PI,!0),_.fill(),_.stroke();var y=s[0]-10*Math.cos(f),w=s[1]-10*Math.sin(f);_.fillStyle=g,_.beginPath(),_.arc(y,w,6,0,2*Math.PI,!0),_.fill(),_.stroke(),this._dragStartPoint=[v,m],this._dragEndPoint=[y,w]}},{key:"drawStartLineArrow",value:function(o,s,u,d){var f,v,m=180*Math.atan2(d-s,u-o)/Math.PI,_=(m+30)*Math.PI/180,g=(m-30)*Math.PI/180,y=10*Math.cos(_),w=10*Math.sin(_),x=10*Math.cos(g),k=10*Math.sin(g);f=o+y,v=s+w,this.arrowPoints[0]=[f,v],this.ctx.moveTo(f,v),this.ctx.lineTo(o,s),f=o+x,v=s+k,this.arrowPoints[1]=[f,v],this.ctx.lineTo(f,v),this.ctx.stroke()}},{key:"drawEndLineArrow",value:function(o,s,u,d){var f,v,m=180*Math.atan2(s-d,o-u)/Math.PI,_=(m+30)*Math.PI/180,g=(m-30)*Math.PI/180,y=10*Math.cos(_),w=10*Math.sin(_),x=10*Math.cos(g),k=10*Math.sin(g);f=u+y,v=d+w,this.arrowPoints[2]=[f,v],this.ctx.moveTo(f,v),this.ctx.lineTo(u,d),f=u+x,v=d+k,this.arrowPoints[3]=[f,v],this.ctx.lineTo(f,v),this.ctx.stroke()}},{key:"commit",value:function(){this._disableEditing||(_get(_getPrototypeOf(r.prototype),"commit",this).call(this),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this._disableEditing=!0,this.div.classList.add("disabled"),_classPrivateMethodGet(this,_fitToContent,_fitToContent2).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}},{key:"focusin",value:function(o){_get(_getPrototypeOf(r.prototype),"focusin",this).call(this,o),this.enableEditMode()}},{key:"canvasPointerdown",value:function(o){o.button===0&&this.isInEditMode()&&!this._disableEditing&&(this.setInForeground(),o.type!=="mouse"&&this.div.focus(),o.stopPropagation(),this.canvas.addEventListener("pointerleave",this._boundCanvasPointerleave),this.canvas.addEventListener("pointermove",this._boundCanvasPointermove),_classPrivateMethodGet(this,_startDrawing,_startDrawing2).call(this,o.offsetX,o.offsetY))}},{key:"canvasPointermove",value:function(o){o.stopPropagation(),_classPrivateMethodGet(this,_draw,_draw2).call(this,o.offsetX,o.offsetY)}},{key:"canvasPointerup",value:function(o){if(o.button===0&&(this.isInEditMode()&&this.currentPath.length!==0&&(o.stopPropagation(),_classPrivateMethodGet(this,_endDrawing,_endDrawing2).call(this,o),this.setInBackground()),this.isAttachedToDOM&&!(this.currentPath.length<2))){var s=o.relatedTarget;s!=null&&s.closest("#".concat(this.id))||(o.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove(),this.parent.unselect(this))}}},{key:"canvasPointerleave",value:function(o){_classPrivateMethodGet(this,_endDrawing,_endDrawing2).call(this,o),this.setInBackground()}},{key:"setInForeground",value:function(){this.div.style.zIndex=this._zIndexForeground}},{key:"render",value:function(){if(this.div)return this.div;var o,s;this.width&&(o=this.x,s=this.y),_get(_getPrototypeOf(r.prototype),"render",this).call(this);var u=_slicedToArray(_classPrivateMethodGet(this,_getInitialBBox,_getInitialBBox2).call(this),4),d=u[0],f=u[1],v=u[2],m=u[3];if(this.setAt(d,f,0,0),this.setDims(v,m),_classPrivateMethodGet(this,_createCanvas,_createCanvas2).call(this),this.width){var _=_slicedToArray(this.parent.viewportBaseDimensions,2),g=_[0],y=_[1];this.setAt(o*g,s*y,this.width*g,this.height*y),this._isCanvasInitialized=!0,_classPrivateMethodGet(this,_setCanvasDims,_setCanvasDims2).call(this),this.setDims(this.width*g,this.height*y),_classPrivateMethodGet(this,_redraw,_redraw2).call(this),_classPrivateMethodGet(this,_setMinDims,_setMinDims2).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return _classPrivateMethodGet(this,_createObserver,_createObserver2).call(this),this.div}},{key:"setDimensions",value:function(o,s){var u=Math.round(o),d=Math.round(s);if(this._realWidth!==u||this._realHeight!==d){this._realWidth=u,this._realHeight=d,this.canvas.style.visibility="hidden",this._aspectRatio&&Math.abs(this._aspectRatio-o/s)>.01&&(s=Math.ceil(o/this._aspectRatio),this.setDims(o,s));var f=_slicedToArray(this.parent.viewportBaseDimensions,2),v=f[0],m=f[1];this.width=o/v,this.height=s/m,this._disableEditing&&_classPrivateMethodGet(this,_setScaleFactor,_setScaleFactor2).call(this,o,s),_classPrivateMethodGet(this,_setCanvasDims,_setCanvasDims2).call(this),_classPrivateMethodGet(this,_redraw,_redraw2).call(this),this.canvas.style.visibility="visible"}}},{key:"serialize",value:function(){if(this.isEmpty())return null;var o=this.getRect(0,0),s=this.rotation%180==0?o[3]-o[1]:o[2]-o[0],u=PDFAnnotation._defaultLineColor;return{annotationType:AnnotationEditorType.INK,color:u,thickness:this.thickness,opacity:this.opacity,paths:_classPrivateMethodGet(this,_serializePaths,_serializePaths2).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,s),pageIndex:this.parent.pageIndex,rect:o,rotation:this.rotation}}}],[{key:"updateDefaultParams",value:function(o,s){switch(o){case AnnotationEditorParamsType.INK_THICKNESS:r._defaultThickness=s;break;case AnnotationEditorParamsType.INK_COLOR:r._defaultColor=s;break;case AnnotationEditorParamsType.INK_OPACITY:r._defaultOpacity=s/100}}},{key:"defaultPropertiesToUpdate",get:function(){return[[AnnotationEditorParamsType.INK_THICKNESS,r._defaultThickness],[AnnotationEditorParamsType.INK_COLOR,r._defaultColor||PDFAnnotation._defaultLineColor],[AnnotationEditorParamsType.INK_OPACITY,Math.round(100*r._defaultOpacity)]]}},{key:"deserialize",value:function(o,s){var u=_get(_getPrototypeOf(r),"deserialize",this).call(this,o,s);u.thickness=o.thickness,u.color=Util.makeHexColor.apply(Util,_toConsumableArray$1(o.color)),u.opacity=o.opacity;var d=_slicedToArray(s.pageDimensions,2),f=d[0],v=d[1],m=u.width*f,_=u.height*v,g=s.scaleFactor,y=o.thickness/2;u._aspectRatio=m/_,u._disableEditing=!0,u._realWidth=Math.round(m),u._realHeight=Math.round(_);var w,x=_createForOfIteratorHelper(o.paths);try{for(x.s();!(w=x.n()).done;){var k=w.value.bezier,S=[];u.paths.push(S);for(var E=g*(k[0]-y),T=g*(_-k[1]-y),M=2,I=k.length;M<I;M+=6){var F=g*(k[M]-y),O=g*(_-k[M+1]-y),N=g*(k[M+2]-y),D=g*(_-k[M+3]-y),X=g*(k[M+4]-y),U=g*(_-k[M+5]-y);S.push([[E,T],[F,O],[N,D],[X,U]]),E=X,T=U}var Z=_classStaticPrivateMethodGet(this,r,_buildPath2D).call(this,S);u.bezierPath2D.push(Z)}}catch(Q){x.e(Q)}finally{x.f()}var j=_classPrivateMethodGet(u,_getBbox,_getBbox2).call(u);return u._baseWidth=Math.max(RESIZER_SIZE,j[2]-j[0]),u._baseHeight=Math.max(RESIZER_SIZE,j[3]-j[1]),_classPrivateMethodGet(u,_setScaleFactor,_setScaleFactor2).call(u,m,_),u}}]),r}();function _getInitialBBox2(){var e=this.parent.viewport,n=e.width,r=e.height;switch(e.rotation){case 90:return[0,n,n,r];case 180:return[n,r,n,r];case 270:return[r,0,n,r];default:return[0,0,n,r]}}function _setStroke2(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle="".concat(this.color).concat(opacityToHex(this.opacity))}function _startDrawing2(e,n){var r,o=this;this.isEditing=!0,this._isCanvasInitialized||(this._isCanvasInitialized=!0,_classPrivateMethodGet(this,_setCanvasDims,_setCanvasDims2).call(this),this.thickness||(this.thickness=InkEditor._defaultThickness),this.color||(this.color=InkEditor._defaultColor||PDFAnnotation._defaultLineColor),(r=this.opacity)!==null&&r!==void 0||(this.opacity=InkEditor._defaultOpacity)),this.currentPath[0]=[e,n],this._lastPoint=null,_classPrivateMethodGet(this,_setStroke,_setStroke2).call(this),this._requestFrameCallback=function(){o._requestFrameCallback&&(o._lastPoint&&(o.drawLine(o.currentPath[0],o._lastPoint),o._lastPoint=null),window.requestAnimationFrame(o._requestFrameCallback))},window.requestAnimationFrame(this._requestFrameCallback)}function _draw2(e,n){var r=_slicedToArray(this.currentPath.at(-1),2),o=r[0],s=r[1];e===o&&n===s||(this.currentPath[1]=[e,n],this._lastPoint=[e,n])}function _stopDrawing2(e,n){this.ctx.closePath(),this._requestFrameCallback=null,e=Math.min(Math.max(e,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height);var r=_slicedToArray(this.currentPath.at(-1),2),o=r[0],s=r[1];e===o&&n===s||(this.currentPath[1]=[e,n]),this.currentPath.length!==0&&(this.paths=_toConsumableArray$1(this.currentPath),this.rebuild())}function _redraw2(){this.isEmpty()?_classPrivateMethodGet(this,_updateTransform,_updateTransform2).call(this):(_classPrivateMethodGet(this,_setStroke,_setStroke2).call(this),this.canvas,this.ctx.setTransform(1,0,0,1,0,0),_classPrivateMethodGet(this,_updateTransform,_updateTransform2).call(this),this.drawLine(this.currentPath[0],this.currentPath[1]))}function _endDrawing2(e){_classPrivateMethodGet(this,_stopDrawing,_stopDrawing2).call(this,e.offsetX,e.offsetY),this.canvas.removeEventListener("pointerleave",this._boundCanvasPointerleave),this.canvas.removeEventListener("pointermove",this._boundCanvasPointermove),this.parent.addToAnnotationStorage(this)}function _createCanvas2(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d"),this.textCtx=this.canvas.getContext("2d")}function _createObserver2(){var e=this,n=null;this._observer=new ResizeObserver(function(r){var o=r[0].contentRect;o.width&&o.height&&(n!==null&&clearTimeout(n),n=setTimeout(function(){e.fixDims(),n=null},TIME_TO_WAIT_BEFORE_FIXING_DIMS),e.setDimensions(o.width,o.height))}),this._observer.observe(this.div)}function _setCanvasDims2(){if(this._isCanvasInitialized){var e=_slicedToArray(this.parent.viewportBaseDimensions,2),n=e[0],r=e[1];this.canvas.width=Math.ceil(this.width*n),this.canvas.height=Math.ceil(this.height*r),_classPrivateMethodGet(this,_updateTransform,_updateTransform2).call(this)}}function _setScaleFactor2(e,n){var r=_classPrivateMethodGet(this,_getPadding,_getPadding2).call(this),o=(e-r)/this._baseWidth,s=(n-r)/this._baseHeight;this.scaleFactor=Math.min(o,s)}function _updateTransform2(){var e=_classPrivateMethodGet(this,_getPadding,_getPadding2).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}function _buildPath2D(e){for(var n=new Path2D,r=0,o=e.length;r<o;r++){var s=_slicedToArray(e[r],4),u=s[0],d=s[1],f=s[2],v=s[3];r===0&&n.moveTo.apply(n,_toConsumableArray$1(u)),n.bezierCurveTo(d[0],d[1],f[0],f[1],v[0],v[1])}return n}function _serializePaths2(e,n,r,o){var s,u,d,f=[],v=this.thickness/2,m=_createForOfIteratorHelper(this.paths);try{for(m.s();!(d=m.n()).done;){var _=d.value;s=[],u=[];for(var g=0,y=_.length;g<y;g++){var w=_slicedToArray(_[g],4),x=w[0],k=w[1],S=w[2],E=w[3],T=e*(x[0]+n)+v,M=o-e*(x[1]+r)-v,I=e*(k[0]+n)+v,F=o-e*(k[1]+r)-v,O=e*(S[0]+n)+v,N=o-e*(S[1]+r)-v,D=e*(E[0]+n)+v,X=o-e*(E[1]+r)-v;g===0&&(s.push(T,M),u.push(T,M)),s.push(I,F,O,N,D,X),_classPrivateMethodGet(this,_extractPointsOnBezier,_extractPointsOnBezier2).call(this,T,M,I,F,O,N,D,X,4,u)}f.push({bezier:s,points:u})}}catch(U){m.e(U)}finally{m.f()}return f}function _extractPointsOnBezier2(e,n,r,o,s,u,d,f,v,m){if(_classPrivateMethodGet(this,_isAlmostFlat,_isAlmostFlat2).call(this,e,n,r,o,s,u,d,f))m.push(d,f);else{for(var _=1;_<v-1;_++){var g=_/v,y=1-g,w=g*e+y*r,x=g*n+y*o,k=g*r+y*s,S=g*o+y*u;w=g*(w=g*w+y*k)+y*(k=g*k+y*(g*s+y*d)),x=g*(x=g*x+y*S)+y*(S=g*S+y*(g*u+y*f)),m.push(w,x)}m.push(d,f)}}function _isAlmostFlat2(e,n,r,o,s,u,d,f){var v=Math.pow(3*r-2*e-d,2),m=Math.pow(3*o-2*n-f,2),_=Math.pow(3*s-e-2*d,2),g=Math.pow(3*u-n-2*f,2);return Math.max(v,_)+Math.max(m,g)<=10}function _getBbox2(){var e,n=1/0,r=-1/0,o=1/0,s=-1/0,u=_createForOfIteratorHelper([].concat(_toConsumableArray$1(this.currentPath),_toConsumableArray$1(this.arrowPoints)));try{for(u.s();!(e=u.n()).done;){var d=_slicedToArray(e.value,2),f=d[0],v=d[1];n=Math.min(f,n),o=Math.min(v,o),r=Math.max(f,r),s=Math.max(v,s)}}catch(m){u.e(m)}finally{u.f()}return[n,o,r,s]}function _getPadding2(){return this._disableEditing?Math.ceil(this.thickness*this.parent.scaleFactor):0}function _fitToContent2(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!this.isEmpty())if(this._disableEditing){var n=_classPrivateMethodGet(this,_getBbox,_getBbox2).call(this),r=_classPrivateMethodGet(this,_getPadding,_getPadding2).call(this);this._baseWidth=Math.max(RESIZER_SIZE,n[2]-n[0]),this._baseHeight=Math.max(RESIZER_SIZE,n[3]-n[1]);var o=Math.ceil(r+this._baseWidth*this.scaleFactor),s=Math.ceil(r+this._baseHeight*this.scaleFactor),u=_slicedToArray(this.parent.viewportBaseDimensions,2),d=u[0],f=u[1];this.width=o/d,this.height=s/f,this._aspectRatio=o/s,_classPrivateMethodGet(this,_setMinDims,_setMinDims2).call(this);var v=this.translationX,m=this.translationY;this.translationX=-n[0],this.translationY=-n[1],_classPrivateMethodGet(this,_setCanvasDims,_setCanvasDims2).call(this),_classPrivateMethodGet(this,_redraw,_redraw2).call(this),this._realWidth=o,this._realHeight=s,this.setDims(o,s);var _=e?r/this.scaleFactor/2:0;this.translate(v-this.translationX-_,m-this.translationY-_)}else _classPrivateMethodGet(this,_redraw,_redraw2).call(this)}function _setMinDims2(){var e=this.div.style;this._aspectRatio>=1?(e.minHeight="".concat(RESIZER_SIZE,"px"),e.minWidth="".concat(Math.round(this._aspectRatio*RESIZER_SIZE),"px")):(e.minWidth="".concat(RESIZER_SIZE,"px"),e.minHeight="".concat(Math.round(RESIZER_SIZE/this._aspectRatio),"px"))}_defineProperty$1(InkEditor,"_defaultColor",null),_defineProperty$1(InkEditor,"_defaultOpacity",1),_defineProperty$1(InkEditor,"_defaultThickness",1),_defineProperty$1(InkEditor,"_l10nPromise",void 0),_defineProperty$1(InkEditor,"_type","ink"),_defineProperty$1(InkEditor,"_zIndex",1);var PDFAnnotationLayer=function(){function e(n){_classCallCheck(this,e),this._cancelled=!1,this._allowClick=!1,this._boundPointerup=this.pointerup.bind(this),this._boundPointerdown=this.pointerdown.bind(this),this._editors=new Map,this._hadPointerDown=!1,this._isCleaningUp=!1,this._uiManager=n.uiManager,this.pageDiv=n.pageDiv,this.div=null,this.scale=n.scale,this._accessibilityManager=n.accessibilityManager,n.uiManager.registerEditorTypes([PDFAnnotationSticky,InkEditor]),this.annotationStorage=n.annotationStorage||null,this.pageIndex=n.pageIndex}return _createClass(e,[{key:"updateToolbar",value:function(n){this._uiManager.updateToolbar(n)}},{key:"updateMode",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._uiManager.getMode();this._cleanup(),n===AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),this._uiManager.unselectAll(),this.div.classList.toggle("freeTextEditing",n===AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",n===AnnotationEditorType.INK)}},{key:"moveEditorInDOM",value:function(n){var r;(r=this._accessibilityManager)===null||r===void 0||r.moveElementInDOM(this.div,n.div,n.contentDiv,!0)}},{key:"addInkEditorIfNeeded",value:function(n){if(n||this._uiManager.getMode()===AnnotationEditorType.INK){if(!n){var r,o=_createForOfIteratorHelper(this._editors.values());try{for(o.s();!(r=o.n()).done;){var s=r.value;if(s.isEmpty())return void s.setInBackground()}}catch(u){o.e(u)}finally{o.f()}}this._createAndAddNewEditor({offsetX:0,offsetY:0}).setInBackground()}}},{key:"setEditingState",value:function(n){this._uiManager.setEditingState(n)}},{key:"addCommands",value:function(n){this._uiManager.addCommands(n)}},{key:"enable",value:function(){this.div.style.pointerEvents="auto";var n,r=_createForOfIteratorHelper(this._editors.values());try{for(r.s();!(n=r.n()).done;)n.value.enableEditing()}catch(o){r.e(o)}finally{r.f()}}},{key:"disable",value:function(){this.div.style.pointerEvents="none";var n,r=_createForOfIteratorHelper(this._editors.values());try{for(r.s();!(n=r.n()).done;)n.value.disableEditing()}catch(o){r.e(o)}finally{r.f()}}},{key:"setActiveEditor",value:function(n){this._uiManager.getActive()!==n&&this._uiManager.setActiveEditor(n)}},{key:"enableClick",value:function(){this.div.addEventListener("pointerdown",this._boundPointerdown),this.div.addEventListener("pointerup",this._boundPointerup)}},{key:"disableClick",value:function(){this.div.removeEventListener("pointerdown",this._boundPointerdown),this.div.removeEventListener("pointerup",this._boundPointerup)}},{key:"attach",value:function(n){this._editors.set(n.id,n)}},{key:"detach",value:function(n){this._editors.delete(n.id)}},{key:"remove",value:function(n){var r=this;this._uiManager.removeEditor(n),this.detach(n),this.annotationStorage.remove(n.id),n.div.style.display="none",setTimeout(function(){n.div.style.display="",n.div.remove(),n.isAttachedToDOM=!1,document.activeElement===document.body&&r._uiManager.focusMainContainer()},0),this._isCleaningUp||this.addInkEditorIfNeeded(!1)}},{key:"_changeParent",value:function(n){var r;n.parent!==this&&(this.attach(n),n.pageIndex=this.pageIndex,(r=n.parent)===null||r===void 0||r.detach(n),n.parent=this,n.div&&n.isAttachedToDOM&&(n.div.remove(),this.div.append(n.div)))}},{key:"add",value:function(n){if(this._changeParent(n),this._uiManager.addEditor(n),this.attach(n),!n.isAttachedToDOM){var r=n.render();this.div.append(r),n.isAttachedToDOM=!0}n.onceAdded(),this.addToAnnotationStorage(n)}},{key:"addToAnnotationStorage",value:function(n){n.isEmpty()||this.annotationStorage.has(n.id)||this.annotationStorage.setValue(n.id,n)}},{key:"updateAnnotationStorage",value:function(n){}},{key:"addOrRebuild",value:function(n){n.needsToBeRebuilt()?n.rebuild():this.add(n)}},{key:"addUndoableEditor",value:function(n){this.addOrRebuild(n)}},{key:"getNextId",value:function(){return this._uiManager.getId()}},{key:"_createNewEditor",value:function(n){switch(this._uiManager.getMode()){case AnnotationEditorType.FREETEXT:return new PDFAnnotationSticky(n);case AnnotationEditorType.INK:return new InkEditor(n)}return null}},{key:"deserialize",value:function(n){switch(n.annotationType){case AnnotationEditorType.FREETEXT:return PDFAnnotationSticky.deserialize(n,this);case AnnotationEditorType.INK:return InkEditor.deserialize(n,this)}return null}},{key:"_createAndAddNewEditor",value:function(n){var r=this.getNextId(),o=this._createNewEditor({parent:this,id:r,x:n.offsetX,y:n.offsetY});return o&&this.add(o),o}},{key:"setSelected",value:function(n){this._uiManager.setSelected(n)}},{key:"toggleSelected",value:function(n){this._uiManager.toggleSelected(n)}},{key:"isSelected",value:function(n){return this._uiManager.isSelected(n)}},{key:"unselect",value:function(n){this._uiManager.unselect(n)}},{key:"pointerup",value:function(n){var r=KeyboardManager.platform.isMac;n.button!==0||n.ctrlKey&&r||n.target===this.div&&this._hadPointerDown&&(this._hadPointerDown=!1,this._allowClick?this._createAndAddNewEditor(n):this._allowClick=!0)}},{key:"pointerdown",value:function(n){var r=KeyboardManager.platform.isMac;if(!(n.button!==0||n.ctrlKey&&r)&&n.target===this.div){this._hadPointerDown=!0;var o=this._uiManager.getActive();this._allowClick=!o||o.isEmpty()}}},{key:"drop",value:function(n){var r=n.dataTransfer.getData("text/plain"),o=this._uiManager.getEditor(r);if(o){n.preventDefault(),n.dataTransfer.dropEffect="move",this._changeParent(o);var s=this.div.getBoundingClientRect(),u=n.clientX-s.x,d=n.clientY-s.y;o.translate(u-o.startX,d-o.startY),o.div.focus()}}},{key:"dragover",value:function(n){n.preventDefault()}},{key:"_cleanup",value:function(){this._isCleaningUp=!0;var n,r=_createForOfIteratorHelper(this._editors.values());try{for(r.s();!(n=r.n()).done;){var o=n.value;o.isEmpty()&&o.remove()}}catch(s){r.e(s)}finally{r.f()}this._isCleaningUp=!1}},{key:"_removeAll",value:function(){this._isCleaningUp=!0;var n,r=_createForOfIteratorHelper(this._editors.values());try{for(r.s();!(n=r.n()).done;)n.value.remove()}catch(o){r.e(o)}finally{r.f()}this._isCleaningUp=!1}},{key:"render",value:function(n){if(!this._cancelled){var r=n.clone({dontFlip:!0});if(this.div)return this.update({viewport:r}),void this.show();this.div=document.createElement("div"),this.div.className="annotationLayer",this.div.tabIndex=0,this.pageDiv.append(this.div)}}},{key:"cancel",value:function(){this._cancelled=!0,this.destroy()}},{key:"hide",value:function(){this.div&&(this.div.hidden=!0)}},{key:"show",value:function(){this.div&&(this.div.hidden=!1)}},{key:"destroy",value:function(){var n;if(this.div){this.pageDiv=null,((n=this._uiManager.getActive())===null||n===void 0?void 0:n.parent)===this&&this._uiManager.setActiveEditor(null);var r,o=_createForOfIteratorHelper(this._editors.values());try{for(o.s();!(r=o.n()).done;){var s=r.value;s.isAttachedToDOM=!1,s.div.remove(),s.parent=null}}catch(u){o.e(u)}finally{o.f()}this.div.remove(),this.div=null,this._editors.clear(),this._uiManager.removeLayer(this)}}},{key:"removeAllAnnotations",value:function(){var n;((n=this._uiManager.getActive())===null||n===void 0?void 0:n.parent)===this&&this._uiManager.setActiveEditor(null);var r,o=_createForOfIteratorHelper(this._editors.values());try{for(o.s();!(r=o.n()).done;){var s=r.value;this.remove(s)}}catch(u){o.e(u)}finally{o.f()}}},{key:"update",value:function(n){this._uiManager.commitOrRemove(),this.viewport=n.viewport,this.setDimensions(),this.updateMode()}},{key:"scaleFactor",get:function(){return this.viewport.scale}},{key:"pageDimensions",get:function(){var n=_slicedToArray(this.viewport.viewBox,4),r=n[0],o=n[1];return[n[2]-r,n[3]-o]}},{key:"viewportBaseDimensions",get:function(){var n=this.viewport,r=n.width,o=n.height;return n.rotation%180==0?[r,o]:[o,r]}},{key:"setDimensions",value:function(){var n=this.viewport,r=n.width,o=n.height,s=n.rotation%180!=0,u=Math.floor(r)+"px",d=Math.floor(o)+"px";this.div.style.width=s?d:u,this.div.style.height=s?u:d}}]),e}(),BaseAnnotation=_createClass(function e(n){var r=n.container,o=n.annotation,s=n.viewport,u=n.page,d=n.eventBus;_classCallCheck(this,e),o.name||(o.name=v4()),this.container=r,this.annotation=o,this.viewport=s,this.scale=s.scale,this.isEdit=!1,this.eventBus=d,this.deleteSvgStr=`<rect width="30" height="30" rx="2" fill="#DDE9FF"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M19 6.5V9.5H24V10.5H21.5V23.5H8.5V10.5H6V9.5H11V6.5H19ZM9.5 10.5V22.5H20.5V10.5H9.5ZM18 7.5V9.5H12V7.5H18ZM13.5 13V20H12.5V13H13.5ZM17.5 20V13H16.5V20H17.5Z" fill="#333333"/>
    `,this.page=u}),lodashExports={},lodash={get exports(){return lodashExports},set exports(e){lodashExports=e}};function getClickPoint(e){var n=0,r=0;if(e.touches&&e.touches.length){var o=e.touches[0];n=o.pageX,r=o.pageY}else if(e.changedTouches){var s=e.changedTouches[0];n=s.pageX,r=s.pageY}else n=e.pageX,r=e.pageY;return{pageX:n,pageY:r}}function getAbsoluteCoordinate(e,n){var r=getClickPoint(n),o=r.pageX,s=r.pageY,u=e.getBoundingClientRect(),d=window.pageXOffset||window.scrollX||0,f=window.pageYOffset||window.scrollY||0;return{x:o-u.left-d,y:s-u.top-f,width:u.width-d,height:u.height-f}}function createSvg(e,n,r){var o=document.createElementNS("http://www.w3.org/2000/svg",e);if(n)for(var s in n)o.setAttribute(s,n[s]);if(r)for(var u in r)o.style[u]=r[u];return o}function getActualPoint(e,n){var r=n.scale;return{x:e.x*r,y:e.y*r}}function getInitialPoint(e,n,r){return{x:e.x/r,y:e.y/r}}(function(e,n){(function(){var r,o="Expected a function",s="__lodash_hash_undefined__",u="__lodash_placeholder__",d=16,f=32,v=64,m=128,_=256,g=1/0,y=9007199254740991,w=NaN,x=4294967295,k=[["ary",m],["bind",1],["bindKey",2],["curry",8],["curryRight",d],["flip",512],["partial",f],["partialRight",v],["rearg",_]],S="[object Arguments]",E="[object Array]",T="[object Boolean]",M="[object Date]",I="[object Error]",F="[object Function]",O="[object GeneratorFunction]",N="[object Map]",D="[object Number]",X="[object Object]",U="[object Promise]",Z="[object RegExp]",j="[object Set]",Q="[object String]",ve="[object Symbol]",Se="[object WeakMap]",we="[object ArrayBuffer]",oe="[object DataView]",ne="[object Float32Array]",q="[object Float64Array]",H="[object Int8Array]",Y="[object Int16Array]",le="[object Int32Array]",Ce="[object Uint8Array]",Te="[object Uint8ClampedArray]",ke="[object Uint16Array]",Ee="[object Uint32Array]",Pe=/\b__p \+= '';/g,Be=/\b(__p \+=) '' \+/g,$e=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Oe=/&(?:amp|lt|gt|quot|#39);/g,Ne=/[&<>"']/g,J=RegExp(Oe.source),fe=RegExp(Ne.source),re=/<%-([\s\S]+?)%>/g,_e=/<%([\s\S]+?)%>/g,be=/<%=([\s\S]+?)%>/g,Ae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Le=/^\w*$/,Ve=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fe=/[\\^$.*+?()[\]{}|]/g,De=RegExp(Fe.source),We=/^\s+/,Re=/\s/,He=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ze=/\{\n\/\* \[wrapped with (.+)\] \*/,Xe=/,? & /,at=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ut=/[()=,{}\[\]\/\s]/,ct=/\\(\\)?/g,mt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pt=/\w*$/,kt=/^[-+]0x[0-9a-f]+$/i,Ct=/^0b[01]+$/i,ht=/^\[object .+?Constructor\]$/,Pt=/^0o[0-7]+$/i,Ue=/^(?:0|[1-9]\d*)$/,qe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ye=/($^)/,st=/['\n\r\u2028\u2029\\]/g,ot="\\ud800-\\udfff",Qe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",tt="\\u2700-\\u27bf",nt="a-z\\xdf-\\xf6\\xf8-\\xff",it="A-Z\\xc0-\\xd6\\xd8-\\xde",lt="\\ufe0e\\ufe0f",Et="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",St="['\u2019]",Mt="["+ot+"]",Lt="["+Et+"]",Gt="["+Qe+"]",vn="\\d+",nn="["+tt+"]",Qt="["+nt+"]",un="[^"+ot+Et+vn+tt+nt+it+"]",dn="\\ud83c[\\udffb-\\udfff]",xn="[^"+ot+"]",Pn="(?:\\ud83c[\\udde6-\\uddff]){2}",Mn="[\\ud800-\\udbff][\\udc00-\\udfff]",Fn="["+it+"]",ur="\\u200d",xr="(?:"+Qt+"|"+un+")",Dn="(?:"+Fn+"|"+un+")",Jn="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Rr="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Qn="(?:"+Gt+"|"+dn+")?",Wn="["+lt+"]?",Ir=Wn+Qn+("(?:"+ur+"(?:"+[xn,Pn,Mn].join("|")+")"+Wn+Qn+")*"),Hn="(?:"+[nn,Pn,Mn].join("|")+")"+Ir,yi="(?:"+[xn+Gt+"?",Gt,Pn,Mn,Mt].join("|")+")",fo=RegExp(St,"g"),Lr=RegExp(Gt,"g"),Wr=RegExp(dn+"(?="+dn+")|"+yi+Ir,"g"),Qo=RegExp([Fn+"?"+Qt+"+"+Jn+"(?="+[Lt,Fn,"$"].join("|")+")",Dn+"+"+Rr+"(?="+[Lt,Fn+xr,"$"].join("|")+")",Fn+"?"+xr+"+"+Jn,Fn+"+"+Rr,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",vn,Hn].join("|"),"g"),Ya=RegExp("["+ur+ot+Qe+lt+"]"),Xa=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,To=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Hi=-1,yn={};yn[ne]=yn[q]=yn[H]=yn[Y]=yn[le]=yn[Ce]=yn[Te]=yn[ke]=yn[Ee]=!0,yn[S]=yn[E]=yn[we]=yn[T]=yn[oe]=yn[M]=yn[I]=yn[F]=yn[N]=yn[D]=yn[X]=yn[Z]=yn[j]=yn[Q]=yn[Se]=!1;var gn={};gn[S]=gn[E]=gn[we]=gn[oe]=gn[T]=gn[M]=gn[ne]=gn[q]=gn[H]=gn[Y]=gn[le]=gn[N]=gn[D]=gn[X]=gn[Z]=gn[j]=gn[Q]=gn[ve]=gn[Ce]=gn[Te]=gn[ke]=gn[Ee]=!0,gn[I]=gn[F]=gn[Se]=!1;var Za={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ea=parseFloat,$o=parseInt,bi=_typeof$1(commonjsGlobal)=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,ii=(typeof self>"u"?"undefined":_typeof$1(self))=="object"&&self&&self.Object===Object&&self,In=bi||ii||Function("return this")(),wi=n&&!n.nodeType&&n,dr=wi&&e&&!e.nodeType&&e,zi=dr&&dr.exports===wi,xi=zi&&bi.process,er=function(){try{var vt=dr&&dr.require&&dr.require("util").types;return vt||xi&&xi.binding&&xi.binding("util")}catch{}}(),ta=er&&er.isArrayBuffer,na=er&&er.isDate,ra=er&&er.isMap,ia=er&&er.isRegExp,oa=er&&er.isSet,Bo=er&&er.isTypedArray;function Un(vt,_t,xt){switch(xt.length){case 0:return vt.call(_t);case 1:return vt.call(_t,xt[0]);case 2:return vt.call(_t,xt[0],xt[1]);case 3:return vt.call(_t,xt[0],xt[1],xt[2])}return vt.apply(_t,xt)}function Ja(vt,_t,xt,It){for(var jt=-1,tn=vt==null?0:vt.length;++jt<tn;){var kn=vt[jt];_t(It,kn,xt(kn),vt)}return It}function tr(vt,_t){for(var xt=-1,It=vt==null?0:vt.length;++xt<It&&_t(vt[xt],xt,vt)!==!1;);return vt}function ji(vt,_t){for(var xt=vt==null?0:vt.length;xt--&&_t(vt[xt],xt,vt)!==!1;);return vt}function Ro(vt,_t){for(var xt=-1,It=vt==null?0:vt.length;++xt<It;)if(!_t(vt[xt],xt,vt))return!1;return!0}function Ur(vt,_t){for(var xt=-1,It=vt==null?0:vt.length,jt=0,tn=[];++xt<It;){var kn=vt[xt];_t(kn,xt,vt)&&(tn[jt++]=kn)}return tn}function Wi(vt,_t){return!!(vt!=null&&vt.length)&&Ci(vt,_t,0)>-1}function qr(vt,_t,xt){for(var It=-1,jt=vt==null?0:vt.length;++It<jt;)if(xt(_t,vt[It]))return!0;return!1}function pn(vt,_t){for(var xt=-1,It=vt==null?0:vt.length,jt=Array(It);++xt<It;)jt[xt]=_t(vt[xt],xt,vt);return jt}function hr(vt,_t){for(var xt=-1,It=_t.length,jt=vt.length;++xt<It;)vt[jt+xt]=_t[xt];return vt}function po(vt,_t,xt,It){var jt=-1,tn=vt==null?0:vt.length;for(It&&tn&&(xt=vt[++jt]);++jt<tn;)xt=_t(xt,vt[jt],jt,vt);return xt}function Qa(vt,_t,xt,It){var jt=vt==null?0:vt.length;for(It&&jt&&(xt=vt[--jt]);jt--;)xt=_t(xt,vt[jt],jt,vt);return xt}function Ui(vt,_t){for(var xt=-1,It=vt==null?0:vt.length;++xt<It;)if(_t(vt[xt],xt,vt))return!0;return!1}var Io=Lo("length");function vo(vt,_t,xt){var It;return xt(vt,function(jt,tn,kn){if(_t(jt,tn,kn))return It=tn,!1}),It}function mo(vt,_t,xt,It){for(var jt=vt.length,tn=xt+(It?1:-1);It?tn--:++tn<jt;)if(_t(vt[tn],tn,vt))return tn;return-1}function Ci(vt,_t,xt){return _t==_t?function(It,jt,tn){for(var kn=tn-1,nr=It.length;++kn<nr;)if(It[kn]===jt)return kn;return-1}(vt,_t,xt):mo(vt,aa,xt)}function es(vt,_t,xt,It){for(var jt=xt-1,tn=vt.length;++jt<tn;)if(It(vt[jt],_t))return jt;return-1}function aa(vt){return vt!=vt}function fr(vt,_t){var xt=vt==null?0:vt.length;return xt?ki(vt,_t)/xt:w}function Lo(vt){return function(_t){return _t==null?r:_t[vt]}}function No(vt){return function(_t){return vt==null?r:vt[_t]}}function sa(vt,_t,xt,It,jt){return jt(vt,function(tn,kn,nr){xt=It?(It=!1,tn):_t(xt,tn,kn,nr)}),xt}function ki(vt,_t){for(var xt,It=-1,jt=vt.length;++It<jt;){var tn=_t(vt[It]);tn!==r&&(xt=xt===r?tn:xt+tn)}return xt}function qi(vt,_t){for(var xt=-1,It=Array(vt);++xt<vt;)It[xt]=_t(xt);return It}function Si(vt){return vt&&vt.slice(0,ha(vt)+1).replace(We,"")}function An(vt){return function(_t){return vt(_t)}}function Fo(vt,_t){return pn(_t,function(xt){return vt[xt]})}function Ei(vt,_t){return vt.has(_t)}function la(vt,_t){for(var xt=-1,It=vt.length;++xt<It&&Ci(_t,vt[xt],0)>-1;);return xt}function ca(vt,_t){for(var xt=vt.length;xt--&&Ci(_t,vt[xt],0)>-1;);return xt}var ua=No({\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"}),ts=No({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function da(vt){return"\\"+Za[vt]}function oi(vt){return Ya.test(vt)}function go(vt){var _t=-1,xt=Array(vt.size);return vt.forEach(function(It,jt){xt[++_t]=[jt,It]}),xt}function ai(vt,_t){return function(xt){return vt(_t(xt))}}function Cr(vt,_t){for(var xt=-1,It=vt.length,jt=0,tn=[];++xt<It;){var kn=vt[xt];kn!==_t&&kn!==u||(vt[xt]=u,tn[jt++]=xt)}return tn}function Gi(vt){var _t=-1,xt=Array(vt.size);return vt.forEach(function(It){xt[++_t]=It}),xt}function ns(vt){var _t=-1,xt=Array(vt.size);return vt.forEach(function(It){xt[++_t]=[It,It]}),xt}function Nr(vt){return oi(vt)?function(_t){for(var xt=Wr.lastIndex=0;Wr.test(_t);)++xt;return xt}(vt):Io(vt)}function pr(vt){return oi(vt)?function(_t){return _t.match(Wr)||[]}(vt):function(_t){return _t.split("")}(vt)}function ha(vt){for(var _t=vt.length;_t--&&Re.test(vt.charAt(_t)););return _t}var fa=No({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Pi=function vt(_t){var xt,It=(_t=_t==null?In:Pi.defaults(In.Object(),_t,Pi.pick(In,To))).Array,jt=_t.Date,tn=_t.Error,kn=_t.Function,nr=_t.Math,ln=_t.Object,si=_t.RegExp,_o=_t.String,qn=_t.TypeError,yo=It.prototype,Do=kn.prototype,Mi=ln.prototype,Ki=_t["__core-js_shared__"],li=Do.toString,cn=Mi.hasOwnProperty,pa=0,Oo=(xt=/[^.]+$/.exec(Ki&&Ki.keys&&Ki.keys.IE_PROTO||""))?"Symbol(src)_1."+xt:"",bo=Mi.toString,rs=li.call(ln),Vo=In._,va=si("^"+li.call(cn).replace(Fe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wo=zi?_t.Buffer:r,Gr=_t.Symbol,xo=_t.Uint8Array,Ho=wo?wo.allocUnsafe:r,Fr=ai(ln.getPrototypeOf,ln),Yi=ln.create,Ai=Mi.propertyIsEnumerable,Xi=yo.splice,Zi=Gr?Gr.isConcatSpreadable:r,Dr=Gr?Gr.iterator:r,kr=Gr?Gr.toStringTag:r,vr=function(){try{var P=lo(ln,"defineProperty");return P({},"",{}),P}catch{}}(),zo=_t.clearTimeout!==In.clearTimeout&&_t.clearTimeout,is=jt&&jt.now!==In.Date.now&&jt.now,Ti=_t.setTimeout!==In.setTimeout&&_t.setTimeout,Ji=nr.ceil,Co=nr.floor,$i=ln.getOwnPropertySymbols,os=wo?wo.isBuffer:r,ma=_t.isFinite,as=yo.join,ss=ai(ln.keys,ln),Tn=nr.max,On=nr.min,ls=jt.now,cs=_t.parseInt,ga=nr.random,us=yo.reverse,jo=lo(_t,"DataView"),Bi=lo(_t,"Map"),Wo=lo(_t,"Promise"),Ri=lo(_t,"Set"),ir=lo(_t,"WeakMap"),ci=lo(ln,"create"),Qi=ir&&new ir,Kr={},Yr=co(jo),Xr=co(Bi),mr=co(Wo),eo=co(Ri),ya=co(ir),Sr=Gr?Gr.prototype:r,Ii=Sr?Sr.valueOf:r,Uo=Sr?Sr.toString:r;function Ge(P){if(En(P)&&!qt(P)&&!(P instanceof Yt)){if(P instanceof Gn)return P;if(cn.call(P,"__wrapped__"))return Bl(P)}return new Gn(P)}var ui=function(){function P(){}return function(W){if(!Sn(W))return{};if(Yi)return Yi(W);P.prototype=W;var ye=new P;return P.prototype=r,ye}}();function to(){}function Gn(P,W){this.__wrapped__=P,this.__actions__=[],this.__chain__=!!W,this.__index__=0,this.__values__=r}function Yt(P){this.__wrapped__=P,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=x,this.__views__=[]}function Zr(P){var W=-1,ye=P==null?0:P.length;for(this.clear();++W<ye;){var Ie=P[W];this.set(Ie[0],Ie[1])}}function Er(P){var W=-1,ye=P==null?0:P.length;for(this.clear();++W<ye;){var Ie=P[W];this.set(Ie[0],Ie[1])}}function Or(P){var W=-1,ye=P==null?0:P.length;for(this.clear();++W<ye;){var Ie=P[W];this.set(Ie[0],Ie[1])}}function di(P){var W=-1,ye=P==null?0:P.length;for(this.__data__=new Or;++W<ye;)this.add(P[W])}function gr(P){var W=this.__data__=new Er(P);this.size=W.size}function ba(P,W){var ye=qt(P),Ie=!ye&&uo(P),ze=!ye&&!Ie&&Oi(P),Ke=!ye&&!Ie&&!ze&&Mo(P),et=ye||Ie||ze||Ke,rt=et?qi(P.length,_o):[],ft=rt.length;for(var bt in P)!W&&!cn.call(P,bt)||et&&(bt=="length"||ze&&(bt=="offset"||bt=="parent")||Ke&&(bt=="buffer"||bt=="byteLength"||bt=="byteOffset")||mi(bt,ft))||rt.push(bt);return rt}function no(P){var W=P.length;return W?P[fs(0,W-1)]:r}function ds(P,W){return Ra(ar(P),Qr(W,0,P.length))}function wa(P){return Ra(ar(P))}function Li(P,W,ye){(ye!==r&&!jr(P[W],ye)||ye===r&&!(W in P))&&Vr(P,W,ye)}function Jr(P,W,ye){var Ie=P[W];cn.call(P,W)&&jr(Ie,ye)&&(ye!==r||W in P)||Vr(P,W,ye)}function hi(P,W){for(var ye=P.length;ye--;)if(jr(P[ye][0],W))return ye;return-1}function ro(P,W,ye,Ie){return ei(P,function(ze,Ke,et){W(Ie,ze,ye(ze),et)}),Ie}function io(P,W){return P&&ti(W,Vn(W),P)}function Vr(P,W,ye){W=="__proto__"&&vr?vr(P,W,{configurable:!0,enumerable:!0,value:ye,writable:!0}):P[W]=ye}function qo(P,W){for(var ye=-1,Ie=W.length,ze=It(Ie),Ke=P==null;++ye<Ie;)ze[ye]=Ke?r:Ds(P,W[ye]);return ze}function Qr(P,W,ye){return P==P&&(ye!==r&&(P=P<=ye?P:ye),W!==r&&(P=P>=W?P:W)),P}function Kn(P,W,ye,Ie,ze,Ke){var et,rt=1&W,ft=2&W,bt=4&W;if(ye&&(et=ze?ye(P,Ie,ze,Ke):ye(P)),et!==r)return et;if(!Sn(P))return P;var yt=qt(P);if(yt){if(et=function(wt){var $t=wt.length,Ht=new wt.constructor($t);return $t&&typeof wt[0]=="string"&&cn.call(wt,"index")&&(Ht.index=wt.index,Ht.input=wt.input),Ht}(P),!rt)return ar(P,et)}else{var At=zn(P),Nt=At==F||At==O;if(Oi(P))return il(P,rt);if(At==X||At==S||Nt&&!ze){if(et=ft||Nt?{}:Cl(P),!rt)return ft?function(wt,$t){return ti(wt,wl(wt),$t)}(P,function(wt,$t){return wt&&ti($t,lr($t),wt)}(et,P)):function(wt,$t){return ti(wt,Ps(wt),$t)}(P,io(et,P))}else{if(!gn[At])return ze?P:{};et=function(wt,$t,Ht){var Rt=wt.constructor;switch($t){case we:return bs(wt);case T:case M:return new Rt(+wt);case oe:return function(Ut,fn){var Dt=fn?bs(Ut.buffer):Ut.buffer;return new Ut.constructor(Dt,Ut.byteOffset,Ut.byteLength)}(wt,Ht);case ne:case q:case H:case Y:case le:case Ce:case Te:case ke:case Ee:return ol(wt,Ht);case N:return new Rt;case D:case Q:return new Rt(wt);case Z:return function(Ut){var fn=new Ut.constructor(Ut.source,pt.exec(Ut));return fn.lastIndex=Ut.lastIndex,fn}(wt);case j:return new Rt;case ve:return Kt=wt,Ii?ln(Ii.call(Kt)):{}}var Kt}(P,At,rt)}}Ke||(Ke=new gr);var Ft=Ke.get(P);if(Ft)return Ft;Ke.set(P,et),Xl(P)?P.forEach(function(wt){et.add(Kn(wt,W,ye,wt,P,Ke))}):Kl(P)&&P.forEach(function(wt,$t){et.set($t,Kn(wt,W,ye,$t,P,Ke))});var Ot=yt?r:(bt?ft?ks:Cs:ft?lr:Vn)(P);return tr(Ot||P,function(wt,$t){Ot&&(wt=P[$t=wt]),Jr(et,$t,Kn(wt,W,ye,$t,P,Ke))}),et}function xa(P,W,ye){var Ie=ye.length;if(P==null)return!Ie;for(P=ln(P);Ie--;){var ze=ye[Ie],Ke=W[ze],et=P[ze];if(et===r&&!(ze in P)||!Ke(et))return!1}return!0}function Go(P,W,ye){if(typeof P!="function")throw new qn(o);return Zo(function(){P.apply(r,ye)},W)}function oo(P,W,ye,Ie){var ze=-1,Ke=Wi,et=!0,rt=P.length,ft=[],bt=W.length;if(!rt)return ft;ye&&(W=pn(W,An(ye))),Ie?(Ke=qr,et=!1):W.length>=200&&(Ke=Ei,et=!1,W=new di(W));e:for(;++ze<rt;){var yt=P[ze],At=ye==null?yt:ye(yt);if(yt=Ie||yt!==0?yt:0,et&&At==At){for(var Nt=bt;Nt--;)if(W[Nt]===At)continue e;ft.push(yt)}else Ke(W,At,Ie)||ft.push(yt)}return ft}Ge.templateSettings={escape:re,evaluate:_e,interpolate:be,variable:"",imports:{_:Ge}},Ge.prototype=to.prototype,Ge.prototype.constructor=Ge,Gn.prototype=ui(to.prototype),Gn.prototype.constructor=Gn,Yt.prototype=ui(to.prototype),Yt.prototype.constructor=Yt,Zr.prototype.clear=function(){this.__data__=ci?ci(null):{},this.size=0},Zr.prototype.delete=function(P){var W=this.has(P)&&delete this.__data__[P];return this.size-=W?1:0,W},Zr.prototype.get=function(P){var W=this.__data__;if(ci){var ye=W[P];return ye===s?r:ye}return cn.call(W,P)?W[P]:r},Zr.prototype.has=function(P){var W=this.__data__;return ci?W[P]!==r:cn.call(W,P)},Zr.prototype.set=function(P,W){var ye=this.__data__;return this.size+=this.has(P)?0:1,ye[P]=ci&&W===r?s:W,this},Er.prototype.clear=function(){this.__data__=[],this.size=0},Er.prototype.delete=function(P){var W=this.__data__,ye=hi(W,P);return!(ye<0)&&(ye==W.length-1?W.pop():Xi.call(W,ye,1),--this.size,!0)},Er.prototype.get=function(P){var W=this.__data__,ye=hi(W,P);return ye<0?r:W[ye][1]},Er.prototype.has=function(P){return hi(this.__data__,P)>-1},Er.prototype.set=function(P,W){var ye=this.__data__,Ie=hi(ye,P);return Ie<0?(++this.size,ye.push([P,W])):ye[Ie][1]=W,this},Or.prototype.clear=function(){this.size=0,this.__data__={hash:new Zr,map:new(Bi||Er),string:new Zr}},Or.prototype.delete=function(P){var W=Ba(this,P).delete(P);return this.size-=W?1:0,W},Or.prototype.get=function(P){return Ba(this,P).get(P)},Or.prototype.has=function(P){return Ba(this,P).has(P)},Or.prototype.set=function(P,W){var ye=Ba(this,P),Ie=ye.size;return ye.set(P,W),this.size+=ye.size==Ie?0:1,this},di.prototype.add=di.prototype.push=function(P){return this.__data__.set(P,s),this},di.prototype.has=function(P){return this.__data__.has(P)},gr.prototype.clear=function(){this.__data__=new Er,this.size=0},gr.prototype.delete=function(P){var W=this.__data__,ye=W.delete(P);return this.size=W.size,ye},gr.prototype.get=function(P){return this.__data__.get(P)},gr.prototype.has=function(P){return this.__data__.has(P)},gr.prototype.set=function(P,W){var ye=this.__data__;if(ye instanceof Er){var Ie=ye.__data__;if(!Bi||Ie.length<199)return Ie.push([P,W]),this.size=++ye.size,this;ye=this.__data__=new Or(Ie)}return ye.set(P,W),this.size=ye.size,this};var ei=cl(je),Ca=cl(Je,!0);function hs(P,W){var ye=!0;return ei(P,function(Ie,ze,Ke){return ye=!!W(Ie,ze,Ke)}),ye}function ko(P,W,ye){for(var Ie=-1,ze=P.length;++Ie<ze;){var Ke=P[Ie],et=W(Ke);if(et!=null&&(rt===r?et==et&&!wr(et):ye(et,rt)))var rt=et,ft=Ke}return ft}function ao(P,W){var ye=[];return ei(P,function(Ie,ze,Ke){W(Ie,ze,Ke)&&ye.push(Ie)}),ye}function Ln(P,W,ye,Ie,ze){var Ke=-1,et=P.length;for(ye||(ye=wc),ze||(ze=[]);++Ke<et;){var rt=P[Ke];W>0&&ye(rt)?W>1?Ln(rt,W-1,ye,Ie,ze):hr(ze,rt):Ie||(ze[ze.length]=rt)}return ze}var te=ul(),Me=ul(!0);function je(P,W){return P&&te(P,W,Vn)}function Je(P,W){return P&&Me(P,W,Vn)}function dt(P,W){return Ur(W,function(ye){return gi(P[ye])})}function gt(P,W){for(var ye=0,Ie=(W=Fi(W,P)).length;P!=null&&ye<Ie;)P=P[ni(W[ye++])];return ye&&ye==Ie?P:r}function Tt(P,W,ye){var Ie=W(P);return qt(P)?Ie:hr(Ie,ye(P))}function Bt(P){return P==null?P===r?"[object Undefined]":"[object Null]":kr&&kr in ln(P)?function(W){var ye=cn.call(W,kr),Ie=W[kr];try{W[kr]=r;var ze=!0}catch{}var Ke=bo.call(W);return ze&&(ye?W[kr]=Ie:delete W[kr]),Ke}(P):function(W){return bo.call(W)}(P)}function Xt(P,W){return P>W}function hn(P,W){return P!=null&&cn.call(P,W)}function an(P,W){return P!=null&&W in ln(P)}function rn(P,W,ye){for(var Ie=ye?qr:Wi,ze=P[0].length,Ke=P.length,et=Ke,rt=It(Ke),ft=1/0,bt=[];et--;){var yt=P[et];et&&W&&(yt=pn(yt,An(W))),ft=On(yt.length,ft),rt[et]=!ye&&(W||ze>=120&&yt.length>=120)?new di(et&&yt):r}yt=P[0];var At=-1,Nt=rt[0];e:for(;++At<ze&&bt.length<ft;){var Ft=yt[At],Ot=W?W(Ft):Ft;if(Ft=ye||Ft!==0?Ft:0,!(Nt?Ei(Nt,Ot):Ie(bt,Ot,ye))){for(et=Ke;--et;){var wt=rt[et];if(!(wt?Ei(wt,Ot):Ie(P[et],Ot,ye)))continue e}Nt&&Nt.push(Ot),bt.push(Ft)}}return bt}function wn(P,W,ye){var Ie=(P=Pl(P,W=Fi(W,P)))==null?P:P[ni($r(W))];return Ie==null?r:Un(Ie,P,ye)}function Pr(P){return En(P)&&Bt(P)==S}function Mr(P,W,ye,Ie,ze){return P===W||(P==null||W==null||!En(P)&&!En(W)?P!=P&&W!=W:function(Ke,et,rt,ft,bt,yt){var At=qt(Ke),Nt=qt(et),Ft=At?E:zn(Ke),Ot=Nt?E:zn(et),wt=(Ft=Ft==S?X:Ft)==X,$t=(Ot=Ot==S?X:Ot)==X,Ht=Ft==Ot;if(Ht&&Oi(Ke)){if(!Oi(et))return!1;At=!0,wt=!1}if(Ht&&!wt)return yt||(yt=new gr),At||Mo(Ke)?bl(Ke,et,rt,ft,bt,yt):function(Dt,zt,Nn,Rn,Zn,Cn,jn){switch(Nn){case oe:if(Dt.byteLength!=zt.byteLength||Dt.byteOffset!=zt.byteOffset)return!1;Dt=Dt.buffer,zt=zt.buffer;case we:return!(Dt.byteLength!=zt.byteLength||!Cn(new xo(Dt),new xo(zt)));case T:case M:case D:return jr(+Dt,+zt);case I:return Dt.name==zt.name&&Dt.message==zt.message;case Z:case Q:return Dt==zt+"";case N:var ri=go;case j:var Vi=1&Rn;if(ri||(ri=Gi),Dt.size!=zt.size&&!Vi)return!1;var za=jn.get(Dt);if(za)return za==zt;Rn|=2,jn.set(Dt,zt);var Ks=bl(ri(Dt),ri(zt),Rn,Zn,Cn,jn);return jn.delete(Dt),Ks;case ve:if(Ii)return Ii.call(Dt)==Ii.call(zt)}return!1}(Ke,et,Ft,rt,ft,bt,yt);if(!(1&rt)){var Rt=wt&&cn.call(Ke,"__wrapped__"),Kt=$t&&cn.call(et,"__wrapped__");if(Rt||Kt){var Ut=Rt?Ke.value():Ke,fn=Kt?et.value():et;return yt||(yt=new gr),bt(Ut,fn,rt,ft,yt)}}return Ht?(yt||(yt=new gr),function(Dt,zt,Nn,Rn,Zn,Cn){var jn=1&Nn,ri=Cs(Dt),Vi=ri.length,za=Cs(zt),Ks=za.length;if(Vi!=Ks&&!jn)return!1;for(var ja=Vi;ja--;){var ho=ri[ja];if(!(jn?ho in zt:cn.call(zt,ho)))return!1}var uc=Cn.get(Dt),dc=Cn.get(zt);if(uc&&dc)return uc==zt&&dc==Dt;var Wa=!0;Cn.set(Dt,zt),Cn.set(zt,Dt);for(var Ys=jn;++ja<Vi;){var Ua=Dt[ho=ri[ja]],qa=zt[ho];if(Rn)var hc=jn?Rn(qa,Ua,ho,zt,Dt,Cn):Rn(Ua,qa,ho,Dt,zt,Cn);if(!(hc===r?Ua===qa||Zn(Ua,qa,Nn,Rn,Cn):hc)){Wa=!1;break}Ys||(Ys=ho=="constructor")}if(Wa&&!Ys){var Ga=Dt.constructor,Ka=zt.constructor;Ga==Ka||!("constructor"in Dt)||!("constructor"in zt)||typeof Ga=="function"&&Ga instanceof Ga&&typeof Ka=="function"&&Ka instanceof Ka||(Wa=!1)}return Cn.delete(Dt),Cn.delete(zt),Wa}(Ke,et,rt,ft,bt,yt)):!1}(P,W,ye,Ie,Mr,ze))}function Ar(P,W,ye,Ie){var ze=ye.length,Ke=ze,et=!Ie;if(P==null)return!Ke;for(P=ln(P);ze--;){var rt=ye[ze];if(et&&rt[2]?rt[1]!==P[rt[0]]:!(rt[0]in P))return!1}for(;++ze<Ke;){var ft=(rt=ye[ze])[0],bt=P[ft],yt=rt[1];if(et&&rt[2]){if(bt===r&&!(ft in P))return!1}else{var At=new gr;if(Ie)var Nt=Ie(bt,yt,ft,P,W,At);if(!(Nt===r?Mr(yt,bt,3,Ie,At):Nt))return!1}}return!0}function _r(P){return!(!Sn(P)||(W=P,Oo&&Oo in W))&&(gi(P)?va:ht).test(co(P));var W}function $n(P){return typeof P=="function"?P:P==null?cr:_typeof$1(P)=="object"?qt(P)?sn(P[0],P[1]):Wt(P):cc(P)}function yr(P){if(!Xo(P))return ss(P);var W=[];for(var ye in ln(P))cn.call(P,ye)&&ye!="constructor"&&W.push(ye);return W}function Yn(P){if(!Sn(P))return function(ze){var Ke=[];if(ze!=null)for(var et in ln(ze))Ke.push(et);return Ke}(P);var W=Xo(P),ye=[];for(var Ie in P)(Ie!="constructor"||!W&&cn.call(P,Ie))&&ye.push(Ie);return ye}function Hr(P,W){return P<W}function bn(P,W){var ye=-1,Ie=sr(P)?It(P.length):[];return ei(P,function(ze,Ke,et){Ie[++ye]=W(ze,Ke,et)}),Ie}function Wt(P){var W=Es(P);return W.length==1&&W[0][2]?Sl(W[0][0],W[0][1]):function(ye){return ye===P||Ar(ye,P,W)}}function sn(P,W){return Ms(P)&&kl(W)?Sl(ni(P),W):function(ye){var Ie=Ds(ye,P);return Ie===r&&Ie===W?Os(ye,P):Mr(W,Ie,3)}}function _n(P,W,ye,Ie,ze){P!==W&&te(W,function(Ke,et){if(ze||(ze=new gr),Sn(Ke))(function(ft,bt,yt,At,Nt,Ft,Ot){var wt=Ts(ft,yt),$t=Ts(bt,yt),Ht=Ot.get($t);if(Ht)return void Li(ft,yt,Ht);var Rt=Ft?Ft(wt,$t,yt+"",ft,bt,Ot):r,Kt=Rt===r;if(Kt){var Ut=qt($t),fn=!Ut&&Oi($t),Dt=!Ut&&!fn&&Mo($t);Rt=$t,Ut||fn||Dt?qt(wt)?Rt=wt:Bn(wt)?Rt=ar(wt):fn?(Kt=!1,Rt=il($t,!0)):Dt?(Kt=!1,Rt=ol($t,!0)):Rt=[]:Jo($t)||uo($t)?(Rt=wt,uo(wt)?Rt=Ql(wt):Sn(wt)&&!gi(wt)||(Rt=Cl($t))):Kt=!1}Kt&&(Ot.set($t,Rt),Nt(Rt,$t,At,Ft,Ot),Ot.delete($t)),Li(ft,yt,Rt)})(P,W,et,ye,_n,Ie,ze);else{var rt=Ie?Ie(Ts(P,et),Ke,et+"",P,W,ze):r;rt===r&&(rt=Ke),Li(P,et,rt)}},lr)}function or(P,W){var ye=P.length;if(ye)return mi(W+=W<0?ye:0,ye)?P[W]:r}function zr(P,W,ye){W=W.length?pn(W,function(Ke){return qt(Ke)?function(et){return gt(et,Ke.length===1?Ke[0]:Ke)}:Ke}):[cr];var Ie=-1;W=pn(W,An(Vt()));var ze=bn(P,function(Ke,et,rt){var ft=pn(W,function(bt){return bt(Ke)});return{criteria:ft,index:++Ie,value:Ke}});return function(Ke,et){var rt=Ke.length;for(Ke.sort(et);rt--;)Ke[rt]=Ke[rt].value;return Ke}(ze,function(Ke,et){return function(rt,ft,bt){for(var yt=-1,At=rt.criteria,Nt=ft.criteria,Ft=At.length,Ot=bt.length;++yt<Ft;){var wt=al(At[yt],Nt[yt]);if(wt)return yt>=Ot?wt:wt*(bt[yt]=="desc"?-1:1)}return rt.index-ft.index}(Ke,et,ye)})}function fi(P,W,ye){for(var Ie=-1,ze=W.length,Ke={};++Ie<ze;){var et=W[Ie],rt=gt(P,et);ye(rt,et)&&Ko(Ke,Fi(et,P),rt)}return Ke}function so(P,W,ye,Ie){var ze=Ie?es:Ci,Ke=-1,et=W.length,rt=P;for(P===W&&(W=ar(W)),ye&&(rt=pn(P,An(ye)));++Ke<et;)for(var ft=0,bt=W[Ke],yt=ye?ye(bt):bt;(ft=ze(rt,yt,ft,Ie))>-1;)rt!==P&&Xi.call(rt,ft,1),Xi.call(P,ft,1);return P}function Xs(P,W){for(var ye=P?W.length:0,Ie=ye-1;ye--;){var ze=W[ye];if(ye==Ie||ze!==Ke){var Ke=ze;mi(ze)?Xi.call(P,ze,1):ms(P,ze)}}return P}function fs(P,W){return P+Co(ga()*(W-P+1))}function ps(P,W){var ye="";if(!P||W<1||W>y)return ye;do W%2&&(ye+=P),(W=Co(W/2))&&(P+=P);while(W);return ye}function Jt(P,W){return $s(El(P,W,cr),P+"")}function fc(P){return no(Ao(P))}function pc(P,W){var ye=Ao(P);return Ra(ye,Qr(W,0,ye.length))}function Ko(P,W,ye,Ie){if(!Sn(P))return P;for(var ze=-1,Ke=(W=Fi(W,P)).length,et=Ke-1,rt=P;rt!=null&&++ze<Ke;){var ft=ni(W[ze]),bt=ye;if(ft==="__proto__"||ft==="constructor"||ft==="prototype")return P;if(ze!=et){var yt=rt[ft];(bt=Ie?Ie(yt,ft,rt):r)===r&&(bt=Sn(yt)?yt:mi(W[ze+1])?[]:{})}Jr(rt,ft,bt),rt=rt[ft]}return P}var Zs=Qi?function(P,W){return Qi.set(P,W),P}:cr,vc=vr?function(P,W){return vr(P,"toString",{configurable:!0,enumerable:!1,value:Hs(W),writable:!0})}:cr;function mc(P){return Ra(Ao(P))}function Tr(P,W,ye){var Ie=-1,ze=P.length;W<0&&(W=-W>ze?0:ze+W),(ye=ye>ze?ze:ye)<0&&(ye+=ze),ze=W>ye?0:ye-W>>>0,W>>>=0;for(var Ke=It(ze);++Ie<ze;)Ke[Ie]=P[Ie+W];return Ke}function gc(P,W){var ye;return ei(P,function(Ie,ze,Ke){return!(ye=W(Ie,ze,Ke))}),!!ye}function ka(P,W,ye){var Ie=0,ze=P==null?Ie:P.length;if(typeof W=="number"&&W==W&&ze<=2147483647){for(;Ie<ze;){var Ke=Ie+ze>>>1,et=P[Ke];et!==null&&!wr(et)&&(ye?et<=W:et<W)?Ie=Ke+1:ze=Ke}return ze}return vs(P,W,cr,ye)}function vs(P,W,ye,Ie){var ze=0,Ke=P==null?0:P.length;if(Ke===0)return 0;for(var et=(W=ye(W))!=W,rt=W===null,ft=wr(W),bt=W===r;ze<Ke;){var yt=Co((ze+Ke)/2),At=ye(P[yt]),Nt=At!==r,Ft=At===null,Ot=At==At,wt=wr(At);if(et)var $t=Ie||Ot;else $t=bt?Ot&&(Ie||Nt):rt?Ot&&Nt&&(Ie||!Ft):ft?Ot&&Nt&&!Ft&&(Ie||!wt):!Ft&&!wt&&(Ie?At<=W:At<W);$t?ze=yt+1:Ke=yt}return On(Ke,4294967294)}function Js(P,W){for(var ye=-1,Ie=P.length,ze=0,Ke=[];++ye<Ie;){var et=P[ye],rt=W?W(et):et;if(!ye||!jr(rt,ft)){var ft=rt;Ke[ze++]=et===0?0:et}}return Ke}function Qs(P){return typeof P=="number"?P:wr(P)?w:+P}function br(P){if(typeof P=="string")return P;if(qt(P))return pn(P,br)+"";if(wr(P))return Uo?Uo.call(P):"";var W=P+"";return W=="0"&&1/P==-1/0?"-0":W}function Ni(P,W,ye){var Ie=-1,ze=Wi,Ke=P.length,et=!0,rt=[],ft=rt;if(ye)et=!1,ze=qr;else if(Ke>=200){var bt=W?null:yc(P);if(bt)return Gi(bt);et=!1,ze=Ei,ft=new di}else ft=W?[]:rt;e:for(;++Ie<Ke;){var yt=P[Ie],At=W?W(yt):yt;if(yt=ye||yt!==0?yt:0,et&&At==At){for(var Nt=ft.length;Nt--;)if(ft[Nt]===At)continue e;W&&ft.push(At),rt.push(yt)}else ze(ft,At,ye)||(ft!==rt&&ft.push(At),rt.push(yt))}return rt}function ms(P,W){return(P=Pl(P,W=Fi(W,P)))==null||delete P[ni($r(W))]}function el(P,W,ye,Ie){return Ko(P,W,ye(gt(P,W)),Ie)}function Sa(P,W,ye,Ie){for(var ze=P.length,Ke=Ie?ze:-1;(Ie?Ke--:++Ke<ze)&&W(P[Ke],Ke,P););return ye?Tr(P,Ie?0:Ke,Ie?Ke+1:ze):Tr(P,Ie?Ke+1:0,Ie?ze:Ke)}function tl(P,W){var ye=P;return ye instanceof Yt&&(ye=ye.value()),po(W,function(Ie,ze){return ze.func.apply(ze.thisArg,hr([Ie],ze.args))},ye)}function gs(P,W,ye){var Ie=P.length;if(Ie<2)return Ie?Ni(P[0]):[];for(var ze=-1,Ke=It(Ie);++ze<Ie;)for(var et=P[ze],rt=-1;++rt<Ie;)rt!=ze&&(Ke[ze]=oo(Ke[ze]||et,P[rt],W,ye));return Ni(Ln(Ke,1),W,ye)}function nl(P,W,ye){for(var Ie=-1,ze=P.length,Ke=W.length,et={};++Ie<ze;){var rt=Ie<Ke?W[Ie]:r;ye(et,P[Ie],rt)}return et}function _s(P){return Bn(P)?P:[]}function ys(P){return typeof P=="function"?P:cr}function Fi(P,W){return qt(P)?P:Ms(P,W)?[P]:$l(mn(P))}var _c=Jt;function Di(P,W,ye){var Ie=P.length;return ye=ye===r?Ie:ye,!W&&ye>=Ie?P:Tr(P,W,ye)}var rl=zo||function(P){return In.clearTimeout(P)};function il(P,W){if(W)return P.slice();var ye=P.length,Ie=Ho?Ho(ye):new P.constructor(ye);return P.copy(Ie),Ie}function bs(P){var W=new P.constructor(P.byteLength);return new xo(W).set(new xo(P)),W}function ol(P,W){var ye=W?bs(P.buffer):P.buffer;return new P.constructor(ye,P.byteOffset,P.length)}function al(P,W){if(P!==W){var ye=P!==r,Ie=P===null,ze=P==P,Ke=wr(P),et=W!==r,rt=W===null,ft=W==W,bt=wr(W);if(!rt&&!bt&&!Ke&&P>W||Ke&&et&&ft&&!rt&&!bt||Ie&&et&&ft||!ye&&ft||!ze)return 1;if(!Ie&&!Ke&&!bt&&P<W||bt&&ye&&ze&&!Ie&&!Ke||rt&&ye&&ze||!et&&ze||!ft)return-1}return 0}function sl(P,W,ye,Ie){for(var ze=-1,Ke=P.length,et=ye.length,rt=-1,ft=W.length,bt=Tn(Ke-et,0),yt=It(ft+bt),At=!Ie;++rt<ft;)yt[rt]=W[rt];for(;++ze<et;)(At||ze<Ke)&&(yt[ye[ze]]=P[ze]);for(;bt--;)yt[rt++]=P[ze++];return yt}function ll(P,W,ye,Ie){for(var ze=-1,Ke=P.length,et=-1,rt=ye.length,ft=-1,bt=W.length,yt=Tn(Ke-rt,0),At=It(yt+bt),Nt=!Ie;++ze<yt;)At[ze]=P[ze];for(var Ft=ze;++ft<bt;)At[Ft+ft]=W[ft];for(;++et<rt;)(Nt||ze<Ke)&&(At[Ft+ye[et]]=P[ze++]);return At}function ar(P,W){var ye=-1,Ie=P.length;for(W||(W=It(Ie));++ye<Ie;)W[ye]=P[ye];return W}function ti(P,W,ye,Ie){var ze=!ye;ye||(ye={});for(var Ke=-1,et=W.length;++Ke<et;){var rt=W[Ke],ft=Ie?Ie(ye[rt],P[rt],rt,ye,P):r;ft===r&&(ft=P[rt]),ze?Vr(ye,rt,ft):Jr(ye,rt,ft)}return ye}function Ea(P,W){return function(ye,Ie){var ze=qt(ye)?Ja:ro,Ke=W?W():{};return ze(ye,P,Vt(Ie,2),Ke)}}function So(P){return Jt(function(W,ye){var Ie=-1,ze=ye.length,Ke=ze>1?ye[ze-1]:r,et=ze>2?ye[2]:r;for(Ke=P.length>3&&typeof Ke=="function"?(ze--,Ke):r,et&&Xn(ye[0],ye[1],et)&&(Ke=ze<3?r:Ke,ze=1),W=ln(W);++Ie<ze;){var rt=ye[Ie];rt&&P(W,rt,Ie,Ke)}return W})}function cl(P,W){return function(ye,Ie){if(ye==null)return ye;if(!sr(ye))return P(ye,Ie);for(var ze=ye.length,Ke=W?ze:-1,et=ln(ye);(W?Ke--:++Ke<ze)&&Ie(et[Ke],Ke,et)!==!1;);return ye}}function ul(P){return function(W,ye,Ie){for(var ze=-1,Ke=ln(W),et=Ie(W),rt=et.length;rt--;){var ft=et[P?rt:++ze];if(ye(Ke[ft],ft,Ke)===!1)break}return W}}function dl(P){return function(W){var ye=oi(W=mn(W))?pr(W):r,Ie=ye?ye[0]:W.charAt(0),ze=ye?Di(ye,1).join(""):W.slice(1);return Ie[P]()+ze}}function Eo(P){return function(W){return po(sc(ac(W).replace(fo,"")),P,"")}}function Yo(P){return function(){var W=arguments;switch(W.length){case 0:return new P;case 1:return new P(W[0]);case 2:return new P(W[0],W[1]);case 3:return new P(W[0],W[1],W[2]);case 4:return new P(W[0],W[1],W[2],W[3]);case 5:return new P(W[0],W[1],W[2],W[3],W[4]);case 6:return new P(W[0],W[1],W[2],W[3],W[4],W[5]);case 7:return new P(W[0],W[1],W[2],W[3],W[4],W[5],W[6])}var ye=ui(P.prototype),Ie=P.apply(ye,W);return Sn(Ie)?Ie:ye}}function hl(P){return function(W,ye,Ie){var ze=ln(W);if(!sr(W)){var Ke=Vt(ye,3);W=Vn(W),ye=function(rt){return Ke(ze[rt],rt,ze)}}var et=P(W,ye,Ie);return et>-1?ze[Ke?W[et]:et]:r}}function fl(P){return vi(function(W){var ye=W.length,Ie=ye,ze=Gn.prototype.thru;for(P&&W.reverse();Ie--;){var Ke=W[Ie];if(typeof Ke!="function")throw new qn(o);if(ze&&!et&&$a(Ke)=="wrapper")var et=new Gn([],!0)}for(Ie=et?Ie:ye;++Ie<ye;){var rt=$a(Ke=W[Ie]),ft=rt=="wrapper"?Ss(Ke):r;et=ft&&As(ft[0])&&ft[1]==424&&!ft[4].length&&ft[9]==1?et[$a(ft[0])].apply(et,ft[3]):Ke.length==1&&As(Ke)?et[rt]():et.thru(Ke)}return function(){var bt=arguments,yt=bt[0];if(et&&bt.length==1&&qt(yt))return et.plant(yt).value();for(var At=0,Nt=ye?W[At].apply(this,bt):yt;++At<ye;)Nt=W[At].call(this,Nt);return Nt}})}function Pa(P,W,ye,Ie,ze,Ke,et,rt,ft,bt){var yt=W&m,At=1&W,Nt=2&W,Ft=24&W,Ot=512&W,wt=Nt?r:Yo(P);return function $t(){for(var Ht=arguments.length,Rt=It(Ht),Kt=Ht;Kt--;)Rt[Kt]=arguments[Kt];if(Ft)var Ut=Po($t),fn=function(Rn,Zn){for(var Cn=Rn.length,jn=0;Cn--;)Rn[Cn]===Zn&&++jn;return jn}(Rt,Ut);if(Ie&&(Rt=sl(Rt,Ie,ze,Ft)),Ke&&(Rt=ll(Rt,Ke,et,Ft)),Ht-=fn,Ft&&Ht<bt){var Dt=Cr(Rt,Ut);return ml(P,W,Pa,$t.placeholder,ye,Rt,Dt,rt,ft,bt-Ht)}var zt=At?ye:this,Nn=Nt?zt[P]:P;return Ht=Rt.length,rt?Rt=function(Rn,Zn){for(var Cn=Rn.length,jn=On(Zn.length,Cn),ri=ar(Rn);jn--;){var Vi=Zn[jn];Rn[jn]=mi(Vi,Cn)?ri[Vi]:r}return Rn}(Rt,rt):Ot&&Ht>1&&Rt.reverse(),yt&&ft<Ht&&(Rt.length=ft),this&&this!==In&&this instanceof $t&&(Nn=wt||Yo(Nn)),Nn.apply(zt,Rt)}}function pl(P,W){return function(ye,Ie){return function(ze,Ke,et,rt){return je(ze,function(ft,bt,yt){Ke(rt,et(ft),bt,yt)}),rt}(ye,P,W(Ie),{})}}function Ma(P,W){return function(ye,Ie){var ze;if(ye===r&&Ie===r)return W;if(ye!==r&&(ze=ye),Ie!==r){if(ze===r)return Ie;typeof ye=="string"||typeof Ie=="string"?(ye=br(ye),Ie=br(Ie)):(ye=Qs(ye),Ie=Qs(Ie)),ze=P(ye,Ie)}return ze}}function ws(P){return vi(function(W){return W=pn(W,An(Vt())),Jt(function(ye){var Ie=this;return P(W,function(ze){return Un(ze,Ie,ye)})})})}function Aa(P,W){var ye=(W=W===r?" ":br(W)).length;if(ye<2)return ye?ps(W,P):W;var Ie=ps(W,Ji(P/Nr(W)));return oi(W)?Di(pr(Ie),0,P).join(""):Ie.slice(0,P)}function vl(P){return function(W,ye,Ie){return Ie&&typeof Ie!="number"&&Xn(W,ye,Ie)&&(ye=Ie=r),W=_i(W),ye===r?(ye=W,W=0):ye=_i(ye),function(ze,Ke,et,rt){for(var ft=-1,bt=Tn(Ji((Ke-ze)/(et||1)),0),yt=It(bt);bt--;)yt[rt?bt:++ft]=ze,ze+=et;return yt}(W,ye,Ie=Ie===r?W<ye?1:-1:_i(Ie),P)}}function Ta(P){return function(W,ye){return typeof W=="string"&&typeof ye=="string"||(W=Br(W),ye=Br(ye)),P(W,ye)}}function ml(P,W,ye,Ie,ze,Ke,et,rt,ft,bt){var yt=8&W;W|=yt?f:v,4&(W&=~(yt?v:f))||(W&=-4);var At=[P,W,ze,yt?Ke:r,yt?et:r,yt?r:Ke,yt?r:et,rt,ft,bt],Nt=ye.apply(r,At);return As(P)&&Ml(Nt,At),Nt.placeholder=Ie,Al(Nt,P,W)}function xs(P){var W=nr[P];return function(ye,Ie){if(ye=Br(ye),(Ie=Ie==null?0:On(Zt(Ie),292))&&ma(ye)){var ze=(mn(ye)+"e").split("e");return+((ze=(mn(W(ze[0]+"e"+(+ze[1]+Ie)))+"e").split("e"))[0]+"e"+(+ze[1]-Ie))}return W(ye)}}var yc=Ri&&1/Gi(new Ri([,-0]))[1]==g?function(P){return new Ri(P)}:Ws;function gl(P){return function(W){var ye=zn(W);return ye==N?go(W):ye==j?ns(W):function(Ie,ze){return pn(ze,function(Ke){return[Ke,Ie[Ke]]})}(W,P(W))}}function pi(P,W,ye,Ie,ze,Ke,et,rt){var ft=2&W;if(!ft&&typeof P!="function")throw new qn(o);var bt=Ie?Ie.length:0;if(bt||(W&=-97,Ie=ze=r),et=et===r?et:Tn(Zt(et),0),rt=rt===r?rt:Zt(rt),bt-=ze?ze.length:0,W&v){var yt=Ie,At=ze;Ie=ze=r}var Nt=ft?r:Ss(P),Ft=[P,W,ye,Ie,ze,yt,At,Ke,et,rt];if(Nt&&function(wt,$t){var Ht=wt[1],Rt=$t[1],Kt=Ht|Rt,Ut=Kt<131,fn=Rt==m&&Ht==8||Rt==m&&Ht==_&&wt[7].length<=$t[8]||Rt==384&&$t[7].length<=$t[8]&&Ht==8;if(!Ut&&!fn)return wt;1&Rt&&(wt[2]=$t[2],Kt|=1&Ht?0:4);var Dt=$t[3];if(Dt){var zt=wt[3];wt[3]=zt?sl(zt,Dt,$t[4]):Dt,wt[4]=zt?Cr(wt[3],u):$t[4]}(Dt=$t[5])&&(zt=wt[5],wt[5]=zt?ll(zt,Dt,$t[6]):Dt,wt[6]=zt?Cr(wt[5],u):$t[6]),(Dt=$t[7])&&(wt[7]=Dt),Rt&m&&(wt[8]=wt[8]==null?$t[8]:On(wt[8],$t[8])),wt[9]==null&&(wt[9]=$t[9]),wt[0]=$t[0],wt[1]=Kt}(Ft,Nt),P=Ft[0],W=Ft[1],ye=Ft[2],Ie=Ft[3],ze=Ft[4],!(rt=Ft[9]=Ft[9]===r?ft?0:P.length:Tn(Ft[9]-bt,0))&&24&W&&(W&=-25),W&&W!=1)Ot=W==8||W==d?function(wt,$t,Ht){var Rt=Yo(wt);return function Kt(){for(var Ut=arguments.length,fn=It(Ut),Dt=Ut,zt=Po(Kt);Dt--;)fn[Dt]=arguments[Dt];var Nn=Ut<3&&fn[0]!==zt&&fn[Ut-1]!==zt?[]:Cr(fn,zt);return(Ut-=Nn.length)<Ht?ml(wt,$t,Pa,Kt.placeholder,r,fn,Nn,r,r,Ht-Ut):Un(this&&this!==In&&this instanceof Kt?Rt:wt,this,fn)}}(P,W,rt):W!=f&&W!=33||ze.length?Pa.apply(r,Ft):function(wt,$t,Ht,Rt){var Kt=1&$t,Ut=Yo(wt);return function fn(){for(var Dt=-1,zt=arguments.length,Nn=-1,Rn=Rt.length,Zn=It(Rn+zt),Cn=this&&this!==In&&this instanceof fn?Ut:wt;++Nn<Rn;)Zn[Nn]=Rt[Nn];for(;zt--;)Zn[Nn++]=arguments[++Dt];return Un(Cn,Kt?Ht:this,Zn)}}(P,W,ye,Ie);else var Ot=function(wt,$t,Ht){var Rt=1&$t,Kt=Yo(wt);return function Ut(){return(this&&this!==In&&this instanceof Ut?Kt:wt).apply(Rt?Ht:this,arguments)}}(P,W,ye);return Al((Nt?Zs:Ml)(Ot,Ft),P,W)}function _l(P,W,ye,Ie){return P===r||jr(P,Mi[ye])&&!cn.call(Ie,ye)?W:P}function yl(P,W,ye,Ie,ze,Ke){return Sn(P)&&Sn(W)&&(Ke.set(W,P),_n(P,W,r,yl,Ke),Ke.delete(W)),P}function bc(P){return Jo(P)?r:P}function bl(P,W,ye,Ie,ze,Ke){var et=1&ye,rt=P.length,ft=W.length;if(rt!=ft&&!(et&&ft>rt))return!1;var bt=Ke.get(P),yt=Ke.get(W);if(bt&&yt)return bt==W&&yt==P;var At=-1,Nt=!0,Ft=2&ye?new di:r;for(Ke.set(P,W),Ke.set(W,P);++At<rt;){var Ot=P[At],wt=W[At];if(Ie)var $t=et?Ie(wt,Ot,At,W,P,Ke):Ie(Ot,wt,At,P,W,Ke);if($t!==r){if($t)continue;Nt=!1;break}if(Ft){if(!Ui(W,function(Ht,Rt){if(!Ei(Ft,Rt)&&(Ot===Ht||ze(Ot,Ht,ye,Ie,Ke)))return Ft.push(Rt)})){Nt=!1;break}}else if(Ot!==wt&&!ze(Ot,wt,ye,Ie,Ke)){Nt=!1;break}}return Ke.delete(P),Ke.delete(W),Nt}function vi(P){return $s(El(P,r,Ll),P+"")}function Cs(P){return Tt(P,Vn,Ps)}function ks(P){return Tt(P,lr,wl)}var Ss=Qi?function(P){return Qi.get(P)}:Ws;function $a(P){for(var W=P.name+"",ye=Kr[W],Ie=cn.call(Kr,W)?ye.length:0;Ie--;){var ze=ye[Ie],Ke=ze.func;if(Ke==null||Ke==P)return ze.name}return W}function Po(P){return(cn.call(Ge,"placeholder")?Ge:P).placeholder}function Vt(){var P=Ge.iteratee||zs;return P=P===zs?$n:P,arguments.length?P(arguments[0],arguments[1]):P}function Ba(P,W){var ye,Ie,ze=P.__data__;return((Ie=_typeof$1(ye=W))=="string"||Ie=="number"||Ie=="symbol"||Ie=="boolean"?ye!=="__proto__":ye===null)?ze[typeof W=="string"?"string":"hash"]:ze.map}function Es(P){for(var W=Vn(P),ye=W.length;ye--;){var Ie=W[ye],ze=P[Ie];W[ye]=[Ie,ze,kl(ze)]}return W}function lo(P,W){var ye=function(Ie,ze){return Ie==null?r:Ie[ze]}(P,W);return _r(ye)?ye:r}var Ps=$i?function(P){return P==null?[]:(P=ln(P),Ur($i(P),function(W){return Ai.call(P,W)}))}:Us,wl=$i?function(P){for(var W=[];P;)hr(W,Ps(P)),P=Fr(P);return W}:Us,zn=Bt;function xl(P,W,ye){for(var Ie=-1,ze=(W=Fi(W,P)).length,Ke=!1;++Ie<ze;){var et=ni(W[Ie]);if(!(Ke=P!=null&&ye(P,et)))break;P=P[et]}return Ke||++Ie!=ze?Ke:!!(ze=P==null?0:P.length)&&Oa(ze)&&mi(et,ze)&&(qt(P)||uo(P))}function Cl(P){return typeof P.constructor!="function"||Xo(P)?{}:ui(Fr(P))}function wc(P){return qt(P)||uo(P)||!!(Zi&&P&&P[Zi])}function mi(P,W){var ye=_typeof$1(P);return!!(W=W==null?y:W)&&(ye=="number"||ye!="symbol"&&Ue.test(P))&&P>-1&&P%1==0&&P<W}function Xn(P,W,ye){if(!Sn(ye))return!1;var Ie=_typeof$1(W);return!!(Ie=="number"?sr(ye)&&mi(W,ye.length):Ie=="string"&&W in ye)&&jr(ye[W],P)}function Ms(P,W){if(qt(P))return!1;var ye=_typeof$1(P);return!(ye!="number"&&ye!="symbol"&&ye!="boolean"&&P!=null&&!wr(P))||Le.test(P)||!Ae.test(P)||W!=null&&P in ln(W)}function As(P){var W=$a(P),ye=Ge[W];if(typeof ye!="function"||!(W in Yt.prototype))return!1;if(P===ye)return!0;var Ie=Ss(ye);return!!Ie&&P===Ie[0]}(jo&&zn(new jo(new ArrayBuffer(1)))!=oe||Bi&&zn(new Bi)!=N||Wo&&zn(Wo.resolve())!=U||Ri&&zn(new Ri)!=j||ir&&zn(new ir)!=Se)&&(zn=function(P){var W=Bt(P),ye=W==X?P.constructor:r,Ie=ye?co(ye):"";if(Ie)switch(Ie){case Yr:return oe;case Xr:return N;case mr:return U;case eo:return j;case ya:return Se}return W});var xc=Ki?gi:qs;function Xo(P){var W=P&&P.constructor;return P===(typeof W=="function"&&W.prototype||Mi)}function kl(P){return P==P&&!Sn(P)}function Sl(P,W){return function(ye){return ye!=null&&ye[P]===W&&(W!==r||P in ln(ye))}}function El(P,W,ye){return W=Tn(W===r?P.length-1:W,0),function(){for(var Ie=arguments,ze=-1,Ke=Tn(Ie.length-W,0),et=It(Ke);++ze<Ke;)et[ze]=Ie[W+ze];ze=-1;for(var rt=It(W+1);++ze<W;)rt[ze]=Ie[ze];return rt[W]=ye(et),Un(P,this,rt)}}function Pl(P,W){return W.length<2?P:gt(P,Tr(W,0,-1))}function Ts(P,W){if((W!=="constructor"||typeof P[W]!="function")&&W!="__proto__")return P[W]}var Ml=Tl(Zs),Zo=Ti||function(P,W){return In.setTimeout(P,W)},$s=Tl(vc);function Al(P,W,ye){var Ie=W+"";return $s(P,function(ze,Ke){var et=Ke.length;if(!et)return ze;var rt=et-1;return Ke[rt]=(et>1?"& ":"")+Ke[rt],Ke=Ke.join(et>2?", ":" "),ze.replace(He,`{
/* [wrapped with `+Ke+`] */
`)}(Ie,function(ze,Ke){return tr(k,function(et){var rt="_."+et[0];Ke&et[1]&&!Wi(ze,rt)&&ze.push(rt)}),ze.sort()}(function(ze){var Ke=ze.match(Ze);return Ke?Ke[1].split(Xe):[]}(Ie),ye)))}function Tl(P){var W=0,ye=0;return function(){var Ie=ls(),ze=16-(Ie-ye);if(ye=Ie,ze>0){if(++W>=800)return arguments[0]}else W=0;return P.apply(r,arguments)}}function Ra(P,W){var ye=-1,Ie=P.length,ze=Ie-1;for(W=W===r?Ie:W;++ye<W;){var Ke=fs(ye,ze),et=P[Ke];P[Ke]=P[ye],P[ye]=et}return P.length=W,P}var $l=function(P){var W=Fa(P,function(Ie){return ye.size===500&&ye.clear(),Ie}),ye=W.cache;return W}(function(P){var W=[];return P.charCodeAt(0)===46&&W.push(""),P.replace(Ve,function(ye,Ie,ze,Ke){W.push(ze?Ke.replace(ct,"$1"):Ie||ye)}),W});function ni(P){if(typeof P=="string"||wr(P))return P;var W=P+"";return W=="0"&&1/P==-1/0?"-0":W}function co(P){if(P!=null){try{return li.call(P)}catch{}try{return P+""}catch{}}return""}function Bl(P){if(P instanceof Yt)return P.clone();var W=new Gn(P.__wrapped__,P.__chain__);return W.__actions__=ar(P.__actions__),W.__index__=P.__index__,W.__values__=P.__values__,W}var Cc=Jt(function(P,W){return Bn(P)?oo(P,Ln(W,1,Bn,!0)):[]}),kc=Jt(function(P,W){var ye=$r(W);return Bn(ye)&&(ye=r),Bn(P)?oo(P,Ln(W,1,Bn,!0),Vt(ye,2)):[]}),Sc=Jt(function(P,W){var ye=$r(W);return Bn(ye)&&(ye=r),Bn(P)?oo(P,Ln(W,1,Bn,!0),r,ye):[]});function Rl(P,W,ye){var Ie=P==null?0:P.length;if(!Ie)return-1;var ze=ye==null?0:Zt(ye);return ze<0&&(ze=Tn(Ie+ze,0)),mo(P,Vt(W,3),ze)}function Il(P,W,ye){var Ie=P==null?0:P.length;if(!Ie)return-1;var ze=Ie-1;return ye!==r&&(ze=Zt(ye),ze=ye<0?Tn(Ie+ze,0):On(ze,Ie-1)),mo(P,Vt(W,3),ze,!0)}function Ll(P){return P!=null&&P.length?Ln(P,1):[]}function Nl(P){return P&&P.length?P[0]:r}var Ec=Jt(function(P){var W=pn(P,_s);return W.length&&W[0]===P[0]?rn(W):[]}),Pc=Jt(function(P){var W=$r(P),ye=pn(P,_s);return W===$r(ye)?W=r:ye.pop(),ye.length&&ye[0]===P[0]?rn(ye,Vt(W,2)):[]}),Mc=Jt(function(P){var W=$r(P),ye=pn(P,_s);return(W=typeof W=="function"?W:r)&&ye.pop(),ye.length&&ye[0]===P[0]?rn(ye,r,W):[]});function $r(P){var W=P==null?0:P.length;return W?P[W-1]:r}var Ac=Jt(Fl);function Fl(P,W){return P&&P.length&&W&&W.length?so(P,W):P}var Tc=vi(function(P,W){var ye=P==null?0:P.length,Ie=qo(P,W);return Xs(P,pn(W,function(ze){return mi(ze,ye)?+ze:ze}).sort(al)),Ie});function Bs(P){return P==null?P:us.call(P)}var $c=Jt(function(P){return Ni(Ln(P,1,Bn,!0))}),Bc=Jt(function(P){var W=$r(P);return Bn(W)&&(W=r),Ni(Ln(P,1,Bn,!0),Vt(W,2))}),Rc=Jt(function(P){var W=$r(P);return W=typeof W=="function"?W:r,Ni(Ln(P,1,Bn,!0),r,W)});function Rs(P){if(!P||!P.length)return[];var W=0;return P=Ur(P,function(ye){if(Bn(ye))return W=Tn(ye.length,W),!0}),qi(W,function(ye){return pn(P,Lo(ye))})}function Dl(P,W){if(!P||!P.length)return[];var ye=Rs(P);return W==null?ye:pn(ye,function(Ie){return Un(W,r,Ie)})}var Ic=Jt(function(P,W){return Bn(P)?oo(P,W):[]}),Lc=Jt(function(P){return gs(Ur(P,Bn))}),Nc=Jt(function(P){var W=$r(P);return Bn(W)&&(W=r),gs(Ur(P,Bn),Vt(W,2))}),Fc=Jt(function(P){var W=$r(P);return W=typeof W=="function"?W:r,gs(Ur(P,Bn),r,W)}),Dc=Jt(Rs),Oc=Jt(function(P){var W=P.length,ye=W>1?P[W-1]:r;return ye=typeof ye=="function"?(P.pop(),ye):r,Dl(P,ye)});function Ol(P){var W=Ge(P);return W.__chain__=!0,W}function Ia(P,W){return W(P)}var Vc=vi(function(P){var W=P.length,ye=W?P[0]:0,Ie=this.__wrapped__,ze=function(Ke){return qo(Ke,P)};return!(W>1||this.__actions__.length)&&Ie instanceof Yt&&mi(ye)?((Ie=Ie.slice(ye,+ye+(W?1:0))).__actions__.push({func:Ia,args:[ze],thisArg:r}),new Gn(Ie,this.__chain__).thru(function(Ke){return W&&!Ke.length&&Ke.push(r),Ke})):this.thru(ze)}),Hc=Ea(function(P,W,ye){cn.call(P,ye)?++P[ye]:Vr(P,ye,1)}),zc=hl(Rl),jc=hl(Il);function Vl(P,W){return(qt(P)?tr:ei)(P,Vt(W,3))}function Hl(P,W){return(qt(P)?ji:Ca)(P,Vt(W,3))}var Wc=Ea(function(P,W,ye){cn.call(P,ye)?P[ye].push(W):Vr(P,ye,[W])}),Uc=Jt(function(P,W,ye){var Ie=-1,ze=typeof W=="function",Ke=sr(P)?It(P.length):[];return ei(P,function(et){Ke[++Ie]=ze?Un(W,et,ye):wn(et,W,ye)}),Ke}),qc=Ea(function(P,W,ye){Vr(P,ye,W)});function La(P,W){return(qt(P)?pn:bn)(P,Vt(W,3))}var Gc=Ea(function(P,W,ye){P[ye?0:1].push(W)},function(){return[[],[]]}),Kc=Jt(function(P,W){if(P==null)return[];var ye=W.length;return ye>1&&Xn(P,W[0],W[1])?W=[]:ye>2&&Xn(W[0],W[1],W[2])&&(W=[W[0]]),zr(P,Ln(W,1),[])}),Na=is||function(){return In.Date.now()};function zl(P,W,ye){return W=ye?r:W,W=P&&W==null?P.length:W,pi(P,m,r,r,r,r,W)}function jl(P,W){var ye;if(typeof W!="function")throw new qn(o);return P=Zt(P),function(){return--P>0&&(ye=W.apply(this,arguments)),P<=1&&(W=r),ye}}var Is=Jt(function(P,W,ye){var Ie=1;if(ye.length){var ze=Cr(ye,Po(Is));Ie|=f}return pi(P,Ie,W,ye,ze)}),Wl=Jt(function(P,W,ye){var Ie=3;if(ye.length){var ze=Cr(ye,Po(Wl));Ie|=f}return pi(W,Ie,P,ye,ze)});function Ul(P,W,ye){var Ie,ze,Ke,et,rt,ft,bt=0,yt=!1,At=!1,Nt=!0;if(typeof P!="function")throw new qn(o);function Ft(Rt){var Kt=Ie,Ut=ze;return Ie=ze=r,bt=Rt,et=P.apply(Ut,Kt)}function Ot(Rt){var Kt=Rt-ft;return ft===r||Kt>=W||Kt<0||At&&Rt-bt>=Ke}function wt(){var Rt=Na();if(Ot(Rt))return $t(Rt);rt=Zo(wt,function(Kt){var Ut=W-(Kt-ft);return At?On(Ut,Ke-(Kt-bt)):Ut}(Rt))}function $t(Rt){return rt=r,Nt&&Ie?Ft(Rt):(Ie=ze=r,et)}function Ht(){var Rt=Na(),Kt=Ot(Rt);if(Ie=arguments,ze=this,ft=Rt,Kt){if(rt===r)return function(Ut){return bt=Ut,rt=Zo(wt,W),yt?Ft(Ut):et}(ft);if(At)return rl(rt),rt=Zo(wt,W),Ft(ft)}return rt===r&&(rt=Zo(wt,W)),et}return W=Br(W)||0,Sn(ye)&&(yt=!!ye.leading,Ke=(At="maxWait"in ye)?Tn(Br(ye.maxWait)||0,W):Ke,Nt="trailing"in ye?!!ye.trailing:Nt),Ht.cancel=function(){rt!==r&&rl(rt),bt=0,Ie=ft=ze=rt=r},Ht.flush=function(){return rt===r?et:$t(Na())},Ht}var Yc=Jt(function(P,W){return Go(P,1,W)}),Xc=Jt(function(P,W,ye){return Go(P,Br(W)||0,ye)});function Fa(P,W){if(typeof P!="function"||W!=null&&typeof W!="function")throw new qn(o);var ye=function Ie(){var ze=arguments,Ke=W?W.apply(this,ze):ze[0],et=Ie.cache;if(et.has(Ke))return et.get(Ke);var rt=P.apply(this,ze);return Ie.cache=et.set(Ke,rt)||et,rt};return ye.cache=new(Fa.Cache||Or),ye}function Da(P){if(typeof P!="function")throw new qn(o);return function(){var W=arguments;switch(W.length){case 0:return!P.call(this);case 1:return!P.call(this,W[0]);case 2:return!P.call(this,W[0],W[1]);case 3:return!P.call(this,W[0],W[1],W[2])}return!P.apply(this,W)}}Fa.Cache=Or;var Zc=_c(function(P,W){var ye=(W=W.length==1&&qt(W[0])?pn(W[0],An(Vt())):pn(Ln(W,1),An(Vt()))).length;return Jt(function(Ie){for(var ze=-1,Ke=On(Ie.length,ye);++ze<Ke;)Ie[ze]=W[ze].call(this,Ie[ze]);return Un(P,this,Ie)})}),Ls=Jt(function(P,W){var ye=Cr(W,Po(Ls));return pi(P,f,r,W,ye)}),ql=Jt(function(P,W){var ye=Cr(W,Po(ql));return pi(P,v,r,W,ye)}),Jc=vi(function(P,W){return pi(P,_,r,r,r,W)});function jr(P,W){return P===W||P!=P&&W!=W}var Qc=Ta(Xt),eu=Ta(function(P,W){return P>=W}),uo=Pr(function(){return arguments}())?Pr:function(P){return En(P)&&cn.call(P,"callee")&&!Ai.call(P,"callee")},qt=It.isArray,tu=ta?An(ta):function(P){return En(P)&&Bt(P)==we};function sr(P){return P!=null&&Oa(P.length)&&!gi(P)}function Bn(P){return En(P)&&sr(P)}var Oi=os||qs,nu=na?An(na):function(P){return En(P)&&Bt(P)==M};function Ns(P){if(!En(P))return!1;var W=Bt(P);return W==I||W=="[object DOMException]"||typeof P.message=="string"&&typeof P.name=="string"&&!Jo(P)}function gi(P){if(!Sn(P))return!1;var W=Bt(P);return W==F||W==O||W=="[object AsyncFunction]"||W=="[object Proxy]"}function Gl(P){return typeof P=="number"&&P==Zt(P)}function Oa(P){return typeof P=="number"&&P>-1&&P%1==0&&P<=y}function Sn(P){var W=_typeof$1(P);return P!=null&&(W=="object"||W=="function")}function En(P){return P!=null&&_typeof$1(P)=="object"}var Kl=ra?An(ra):function(P){return En(P)&&zn(P)==N};function Yl(P){return typeof P=="number"||En(P)&&Bt(P)==D}function Jo(P){if(!En(P)||Bt(P)!=X)return!1;var W=Fr(P);if(W===null)return!0;var ye=cn.call(W,"constructor")&&W.constructor;return typeof ye=="function"&&ye instanceof ye&&li.call(ye)==rs}var Fs=ia?An(ia):function(P){return En(P)&&Bt(P)==Z},Xl=oa?An(oa):function(P){return En(P)&&zn(P)==j};function Va(P){return typeof P=="string"||!qt(P)&&En(P)&&Bt(P)==Q}function wr(P){return _typeof$1(P)=="symbol"||En(P)&&Bt(P)==ve}var Mo=Bo?An(Bo):function(P){return En(P)&&Oa(P.length)&&!!yn[Bt(P)]},ru=Ta(Hr),iu=Ta(function(P,W){return P<=W});function Zl(P){if(!P)return[];if(sr(P))return Va(P)?pr(P):ar(P);if(Dr&&P[Dr])return function(ye){for(var Ie,ze=[];!(Ie=ye.next()).done;)ze.push(Ie.value);return ze}(P[Dr]());var W=zn(P);return(W==N?go:W==j?Gi:Ao)(P)}function _i(P){return P?(P=Br(P))===g||P===-1/0?17976931348623157e292*(P<0?-1:1):P==P?P:0:P===0?P:0}function Zt(P){var W=_i(P),ye=W%1;return W==W?ye?W-ye:W:0}function Jl(P){return P?Qr(Zt(P),0,x):0}function Br(P){if(typeof P=="number")return P;if(wr(P))return w;if(Sn(P)){var W=typeof P.valueOf=="function"?P.valueOf():P;P=Sn(W)?W+"":W}if(typeof P!="string")return P===0?P:+P;P=Si(P);var ye=Ct.test(P);return ye||Pt.test(P)?$o(P.slice(2),ye?2:8):kt.test(P)?w:+P}function Ql(P){return ti(P,lr(P))}function mn(P){return P==null?"":br(P)}var ou=So(function(P,W){if(Xo(W)||sr(W))ti(W,Vn(W),P);else for(var ye in W)cn.call(W,ye)&&Jr(P,ye,W[ye])}),ec=So(function(P,W){ti(W,lr(W),P)}),Ha=So(function(P,W,ye,Ie){ti(W,lr(W),P,Ie)}),au=So(function(P,W,ye,Ie){ti(W,Vn(W),P,Ie)}),su=vi(qo),lu=Jt(function(P,W){P=ln(P);var ye=-1,Ie=W.length,ze=Ie>2?W[2]:r;for(ze&&Xn(W[0],W[1],ze)&&(Ie=1);++ye<Ie;)for(var Ke=W[ye],et=lr(Ke),rt=-1,ft=et.length;++rt<ft;){var bt=et[rt],yt=P[bt];(yt===r||jr(yt,Mi[bt])&&!cn.call(P,bt))&&(P[bt]=Ke[bt])}return P}),cu=Jt(function(P){return P.push(r,yl),Un(tc,r,P)});function Ds(P,W,ye){var Ie=P==null?r:gt(P,W);return Ie===r?ye:Ie}function Os(P,W){return P!=null&&xl(P,W,an)}var uu=pl(function(P,W,ye){W!=null&&typeof W.toString!="function"&&(W=bo.call(W)),P[W]=ye},Hs(cr)),du=pl(function(P,W,ye){W!=null&&typeof W.toString!="function"&&(W=bo.call(W)),cn.call(P,W)?P[W].push(ye):P[W]=[ye]},Vt),hu=Jt(wn);function Vn(P){return sr(P)?ba(P):yr(P)}function lr(P){return sr(P)?ba(P,!0):Yn(P)}var fu=So(function(P,W,ye){_n(P,W,ye)}),tc=So(function(P,W,ye,Ie){_n(P,W,ye,Ie)}),pu=vi(function(P,W){var ye={};if(P==null)return ye;var Ie=!1;W=pn(W,function(Ke){return Ke=Fi(Ke,P),Ie||(Ie=Ke.length>1),Ke}),ti(P,ks(P),ye),Ie&&(ye=Kn(ye,7,bc));for(var ze=W.length;ze--;)ms(ye,W[ze]);return ye}),vu=vi(function(P,W){return P==null?{}:function(ye,Ie){return fi(ye,Ie,function(ze,Ke){return Os(ye,Ke)})}(P,W)});function nc(P,W){if(P==null)return{};var ye=pn(ks(P),function(Ie){return[Ie]});return W=Vt(W),fi(P,ye,function(Ie,ze){return W(Ie,ze[0])})}var rc=gl(Vn),ic=gl(lr);function Ao(P){return P==null?[]:Fo(P,Vn(P))}var mu=Eo(function(P,W,ye){return W=W.toLowerCase(),P+(ye?oc(W):W)});function oc(P){return Vs(mn(P).toLowerCase())}function ac(P){return(P=mn(P))&&P.replace(qe,ua).replace(Lr,"")}var gu=Eo(function(P,W,ye){return P+(ye?"-":"")+W.toLowerCase()}),_u=Eo(function(P,W,ye){return P+(ye?" ":"")+W.toLowerCase()}),yu=dl("toLowerCase"),bu=Eo(function(P,W,ye){return P+(ye?"_":"")+W.toLowerCase()}),wu=Eo(function(P,W,ye){return P+(ye?" ":"")+Vs(W)}),xu=Eo(function(P,W,ye){return P+(ye?" ":"")+W.toUpperCase()}),Vs=dl("toUpperCase");function sc(P,W,ye){return P=mn(P),(W=ye?r:W)===r?function(Ie){return Xa.test(Ie)}(P)?function(Ie){return Ie.match(Qo)||[]}(P):function(Ie){return Ie.match(at)||[]}(P):P.match(W)||[]}var lc=Jt(function(P,W){try{return Un(P,r,W)}catch(ye){return Ns(ye)?ye:new tn(ye)}}),Cu=vi(function(P,W){return tr(W,function(ye){ye=ni(ye),Vr(P,ye,Is(P[ye],P))}),P});function Hs(P){return function(){return P}}var ku=fl(),Su=fl(!0);function cr(P){return P}function zs(P){return $n(typeof P=="function"?P:Kn(P,1))}var Eu=Jt(function(P,W){return function(ye){return wn(ye,P,W)}}),Pu=Jt(function(P,W){return function(ye){return wn(P,ye,W)}});function js(P,W,ye){var Ie=Vn(W),ze=dt(W,Ie);ye!=null||Sn(W)&&(ze.length||!Ie.length)||(ye=W,W=P,P=this,ze=dt(W,Vn(W)));var Ke=!(Sn(ye)&&"chain"in ye&&!ye.chain),et=gi(P);return tr(ze,function(rt){var ft=W[rt];P[rt]=ft,et&&(P.prototype[rt]=function(){var bt=this.__chain__;if(Ke||bt){var yt=P(this.__wrapped__);return(yt.__actions__=ar(this.__actions__)).push({func:ft,args:arguments,thisArg:P}),yt.__chain__=bt,yt}return ft.apply(P,hr([this.value()],arguments))})}),P}function Ws(){}var Mu=ws(pn),Au=ws(Ro),Tu=ws(Ui);function cc(P){return Ms(P)?Lo(ni(P)):function(W){return function(ye){return gt(ye,W)}}(P)}var $u=vl(),Bu=vl(!0);function Us(){return[]}function qs(){return!1}var Ru=Ma(function(P,W){return P+W},0),Iu=xs("ceil"),Lu=Ma(function(P,W){return P/W},1),Nu=xs("floor"),Gs,Fu=Ma(function(P,W){return P*W},1),Du=xs("round"),Ou=Ma(function(P,W){return P-W},0);return Ge.after=function(P,W){if(typeof W!="function")throw new qn(o);return P=Zt(P),function(){if(--P<1)return W.apply(this,arguments)}},Ge.ary=zl,Ge.assign=ou,Ge.assignIn=ec,Ge.assignInWith=Ha,Ge.assignWith=au,Ge.at=su,Ge.before=jl,Ge.bind=Is,Ge.bindAll=Cu,Ge.bindKey=Wl,Ge.castArray=function(){if(!arguments.length)return[];var P=arguments[0];return qt(P)?P:[P]},Ge.chain=Ol,Ge.chunk=function(P,W,ye){W=(ye?Xn(P,W,ye):W===r)?1:Tn(Zt(W),0);var Ie=P==null?0:P.length;if(!Ie||W<1)return[];for(var ze=0,Ke=0,et=It(Ji(Ie/W));ze<Ie;)et[Ke++]=Tr(P,ze,ze+=W);return et},Ge.compact=function(P){for(var W=-1,ye=P==null?0:P.length,Ie=0,ze=[];++W<ye;){var Ke=P[W];Ke&&(ze[Ie++]=Ke)}return ze},Ge.concat=function(){var P=arguments.length;if(!P)return[];for(var W=It(P-1),ye=arguments[0],Ie=P;Ie--;)W[Ie-1]=arguments[Ie];return hr(qt(ye)?ar(ye):[ye],Ln(W,1))},Ge.cond=function(P){var W=P==null?0:P.length,ye=Vt();return P=W?pn(P,function(Ie){if(typeof Ie[1]!="function")throw new qn(o);return[ye(Ie[0]),Ie[1]]}):[],Jt(function(Ie){for(var ze=-1;++ze<W;){var Ke=P[ze];if(Un(Ke[0],this,Ie))return Un(Ke[1],this,Ie)}})},Ge.conforms=function(P){return function(W){var ye=Vn(W);return function(Ie){return xa(Ie,W,ye)}}(Kn(P,1))},Ge.constant=Hs,Ge.countBy=Hc,Ge.create=function(P,W){var ye=ui(P);return W==null?ye:io(ye,W)},Ge.curry=function P(W,ye,Ie){var ze=pi(W,8,r,r,r,r,r,ye=Ie?r:ye);return ze.placeholder=P.placeholder,ze},Ge.curryRight=function P(W,ye,Ie){var ze=pi(W,d,r,r,r,r,r,ye=Ie?r:ye);return ze.placeholder=P.placeholder,ze},Ge.debounce=Ul,Ge.defaults=lu,Ge.defaultsDeep=cu,Ge.defer=Yc,Ge.delay=Xc,Ge.difference=Cc,Ge.differenceBy=kc,Ge.differenceWith=Sc,Ge.drop=function(P,W,ye){var Ie=P==null?0:P.length;return Ie?Tr(P,(W=ye||W===r?1:Zt(W))<0?0:W,Ie):[]},Ge.dropRight=function(P,W,ye){var Ie=P==null?0:P.length;return Ie?Tr(P,0,(W=Ie-(W=ye||W===r?1:Zt(W)))<0?0:W):[]},Ge.dropRightWhile=function(P,W){return P&&P.length?Sa(P,Vt(W,3),!0,!0):[]},Ge.dropWhile=function(P,W){return P&&P.length?Sa(P,Vt(W,3),!0):[]},Ge.fill=function(P,W,ye,Ie){var ze=P==null?0:P.length;return ze?(ye&&typeof ye!="number"&&Xn(P,W,ye)&&(ye=0,Ie=ze),function(Ke,et,rt,ft){var bt=Ke.length;for((rt=Zt(rt))<0&&(rt=-rt>bt?0:bt+rt),(ft=ft===r||ft>bt?bt:Zt(ft))<0&&(ft+=bt),ft=rt>ft?0:Jl(ft);rt<ft;)Ke[rt++]=et;return Ke}(P,W,ye,Ie)):[]},Ge.filter=function(P,W){return(qt(P)?Ur:ao)(P,Vt(W,3))},Ge.flatMap=function(P,W){return Ln(La(P,W),1)},Ge.flatMapDeep=function(P,W){return Ln(La(P,W),g)},Ge.flatMapDepth=function(P,W,ye){return ye=ye===r?1:Zt(ye),Ln(La(P,W),ye)},Ge.flatten=Ll,Ge.flattenDeep=function(P){return P!=null&&P.length?Ln(P,g):[]},Ge.flattenDepth=function(P,W){return P!=null&&P.length?Ln(P,W=W===r?1:Zt(W)):[]},Ge.flip=function(P){return pi(P,512)},Ge.flow=ku,Ge.flowRight=Su,Ge.fromPairs=function(P){for(var W=-1,ye=P==null?0:P.length,Ie={};++W<ye;){var ze=P[W];Ie[ze[0]]=ze[1]}return Ie},Ge.functions=function(P){return P==null?[]:dt(P,Vn(P))},Ge.functionsIn=function(P){return P==null?[]:dt(P,lr(P))},Ge.groupBy=Wc,Ge.initial=function(P){return P!=null&&P.length?Tr(P,0,-1):[]},Ge.intersection=Ec,Ge.intersectionBy=Pc,Ge.intersectionWith=Mc,Ge.invert=uu,Ge.invertBy=du,Ge.invokeMap=Uc,Ge.iteratee=zs,Ge.keyBy=qc,Ge.keys=Vn,Ge.keysIn=lr,Ge.map=La,Ge.mapKeys=function(P,W){var ye={};return W=Vt(W,3),je(P,function(Ie,ze,Ke){Vr(ye,W(Ie,ze,Ke),Ie)}),ye},Ge.mapValues=function(P,W){var ye={};return W=Vt(W,3),je(P,function(Ie,ze,Ke){Vr(ye,ze,W(Ie,ze,Ke))}),ye},Ge.matches=function(P){return Wt(Kn(P,1))},Ge.matchesProperty=function(P,W){return sn(P,Kn(W,1))},Ge.memoize=Fa,Ge.merge=fu,Ge.mergeWith=tc,Ge.method=Eu,Ge.methodOf=Pu,Ge.mixin=js,Ge.negate=Da,Ge.nthArg=function(P){return P=Zt(P),Jt(function(W){return or(W,P)})},Ge.omit=pu,Ge.omitBy=function(P,W){return nc(P,Da(Vt(W)))},Ge.once=function(P){return jl(2,P)},Ge.orderBy=function(P,W,ye,Ie){return P==null?[]:(qt(W)||(W=W==null?[]:[W]),qt(ye=Ie?r:ye)||(ye=ye==null?[]:[ye]),zr(P,W,ye))},Ge.over=Mu,Ge.overArgs=Zc,Ge.overEvery=Au,Ge.overSome=Tu,Ge.partial=Ls,Ge.partialRight=ql,Ge.partition=Gc,Ge.pick=vu,Ge.pickBy=nc,Ge.property=cc,Ge.propertyOf=function(P){return function(W){return P==null?r:gt(P,W)}},Ge.pull=Ac,Ge.pullAll=Fl,Ge.pullAllBy=function(P,W,ye){return P&&P.length&&W&&W.length?so(P,W,Vt(ye,2)):P},Ge.pullAllWith=function(P,W,ye){return P&&P.length&&W&&W.length?so(P,W,r,ye):P},Ge.pullAt=Tc,Ge.range=$u,Ge.rangeRight=Bu,Ge.rearg=Jc,Ge.reject=function(P,W){return(qt(P)?Ur:ao)(P,Da(Vt(W,3)))},Ge.remove=function(P,W){var ye=[];if(!P||!P.length)return ye;var Ie=-1,ze=[],Ke=P.length;for(W=Vt(W,3);++Ie<Ke;){var et=P[Ie];W(et,Ie,P)&&(ye.push(et),ze.push(Ie))}return Xs(P,ze),ye},Ge.rest=function(P,W){if(typeof P!="function")throw new qn(o);return Jt(P,W=W===r?W:Zt(W))},Ge.reverse=Bs,Ge.sampleSize=function(P,W,ye){return W=(ye?Xn(P,W,ye):W===r)?1:Zt(W),(qt(P)?ds:pc)(P,W)},Ge.set=function(P,W,ye){return P==null?P:Ko(P,W,ye)},Ge.setWith=function(P,W,ye,Ie){return Ie=typeof Ie=="function"?Ie:r,P==null?P:Ko(P,W,ye,Ie)},Ge.shuffle=function(P){return(qt(P)?wa:mc)(P)},Ge.slice=function(P,W,ye){var Ie=P==null?0:P.length;return Ie?(ye&&typeof ye!="number"&&Xn(P,W,ye)?(W=0,ye=Ie):(W=W==null?0:Zt(W),ye=ye===r?Ie:Zt(ye)),Tr(P,W,ye)):[]},Ge.sortBy=Kc,Ge.sortedUniq=function(P){return P&&P.length?Js(P):[]},Ge.sortedUniqBy=function(P,W){return P&&P.length?Js(P,Vt(W,2)):[]},Ge.split=function(P,W,ye){return ye&&typeof ye!="number"&&Xn(P,W,ye)&&(W=ye=r),(ye=ye===r?x:ye>>>0)?(P=mn(P))&&(typeof W=="string"||W!=null&&!Fs(W))&&!(W=br(W))&&oi(P)?Di(pr(P),0,ye):P.split(W,ye):[]},Ge.spread=function(P,W){if(typeof P!="function")throw new qn(o);return W=W==null?0:Tn(Zt(W),0),Jt(function(ye){var Ie=ye[W],ze=Di(ye,0,W);return Ie&&hr(ze,Ie),Un(P,this,ze)})},Ge.tail=function(P){var W=P==null?0:P.length;return W?Tr(P,1,W):[]},Ge.take=function(P,W,ye){return P&&P.length?Tr(P,0,(W=ye||W===r?1:Zt(W))<0?0:W):[]},Ge.takeRight=function(P,W,ye){var Ie=P==null?0:P.length;return Ie?Tr(P,(W=Ie-(W=ye||W===r?1:Zt(W)))<0?0:W,Ie):[]},Ge.takeRightWhile=function(P,W){return P&&P.length?Sa(P,Vt(W,3),!1,!0):[]},Ge.takeWhile=function(P,W){return P&&P.length?Sa(P,Vt(W,3)):[]},Ge.tap=function(P,W){return W(P),P},Ge.throttle=function(P,W,ye){var Ie=!0,ze=!0;if(typeof P!="function")throw new qn(o);return Sn(ye)&&(Ie="leading"in ye?!!ye.leading:Ie,ze="trailing"in ye?!!ye.trailing:ze),Ul(P,W,{leading:Ie,maxWait:W,trailing:ze})},Ge.thru=Ia,Ge.toArray=Zl,Ge.toPairs=rc,Ge.toPairsIn=ic,Ge.toPath=function(P){return qt(P)?pn(P,ni):wr(P)?[P]:ar($l(mn(P)))},Ge.toPlainObject=Ql,Ge.transform=function(P,W,ye){var Ie=qt(P),ze=Ie||Oi(P)||Mo(P);if(W=Vt(W,4),ye==null){var Ke=P&&P.constructor;ye=ze?Ie?new Ke:[]:Sn(P)&&gi(Ke)?ui(Fr(P)):{}}return(ze?tr:je)(P,function(et,rt,ft){return W(ye,et,rt,ft)}),ye},Ge.unary=function(P){return zl(P,1)},Ge.union=$c,Ge.unionBy=Bc,Ge.unionWith=Rc,Ge.uniq=function(P){return P&&P.length?Ni(P):[]},Ge.uniqBy=function(P,W){return P&&P.length?Ni(P,Vt(W,2)):[]},Ge.uniqWith=function(P,W){return W=typeof W=="function"?W:r,P&&P.length?Ni(P,r,W):[]},Ge.unset=function(P,W){return P==null||ms(P,W)},Ge.unzip=Rs,Ge.unzipWith=Dl,Ge.update=function(P,W,ye){return P==null?P:el(P,W,ys(ye))},Ge.updateWith=function(P,W,ye,Ie){return Ie=typeof Ie=="function"?Ie:r,P==null?P:el(P,W,ys(ye),Ie)},Ge.values=Ao,Ge.valuesIn=function(P){return P==null?[]:Fo(P,lr(P))},Ge.without=Ic,Ge.words=sc,Ge.wrap=function(P,W){return Ls(ys(W),P)},Ge.xor=Lc,Ge.xorBy=Nc,Ge.xorWith=Fc,Ge.zip=Dc,Ge.zipObject=function(P,W){return nl(P||[],W||[],Jr)},Ge.zipObjectDeep=function(P,W){return nl(P||[],W||[],Ko)},Ge.zipWith=Oc,Ge.entries=rc,Ge.entriesIn=ic,Ge.extend=ec,Ge.extendWith=Ha,js(Ge,Ge),Ge.add=Ru,Ge.attempt=lc,Ge.camelCase=mu,Ge.capitalize=oc,Ge.ceil=Iu,Ge.clamp=function(P,W,ye){return ye===r&&(ye=W,W=r),ye!==r&&(ye=(ye=Br(ye))==ye?ye:0),W!==r&&(W=(W=Br(W))==W?W:0),Qr(Br(P),W,ye)},Ge.clone=function(P){return Kn(P,4)},Ge.cloneDeep=function(P){return Kn(P,5)},Ge.cloneDeepWith=function(P,W){return Kn(P,5,W=typeof W=="function"?W:r)},Ge.cloneWith=function(P,W){return Kn(P,4,W=typeof W=="function"?W:r)},Ge.conformsTo=function(P,W){return W==null||xa(P,W,Vn(W))},Ge.deburr=ac,Ge.defaultTo=function(P,W){return P==null||P!=P?W:P},Ge.divide=Lu,Ge.endsWith=function(P,W,ye){P=mn(P),W=br(W);var Ie=P.length,ze=ye=ye===r?Ie:Qr(Zt(ye),0,Ie);return(ye-=W.length)>=0&&P.slice(ye,ze)==W},Ge.eq=jr,Ge.escape=function(P){return(P=mn(P))&&fe.test(P)?P.replace(Ne,ts):P},Ge.escapeRegExp=function(P){return(P=mn(P))&&De.test(P)?P.replace(Fe,"\\$&"):P},Ge.every=function(P,W,ye){var Ie=qt(P)?Ro:hs;return ye&&Xn(P,W,ye)&&(W=r),Ie(P,Vt(W,3))},Ge.find=zc,Ge.findIndex=Rl,Ge.findKey=function(P,W){return vo(P,Vt(W,3),je)},Ge.findLast=jc,Ge.findLastIndex=Il,Ge.findLastKey=function(P,W){return vo(P,Vt(W,3),Je)},Ge.floor=Nu,Ge.forEach=Vl,Ge.forEachRight=Hl,Ge.forIn=function(P,W){return P==null?P:te(P,Vt(W,3),lr)},Ge.forInRight=function(P,W){return P==null?P:Me(P,Vt(W,3),lr)},Ge.forOwn=function(P,W){return P&&je(P,Vt(W,3))},Ge.forOwnRight=function(P,W){return P&&Je(P,Vt(W,3))},Ge.get=Ds,Ge.gt=Qc,Ge.gte=eu,Ge.has=function(P,W){return P!=null&&xl(P,W,hn)},Ge.hasIn=Os,Ge.head=Nl,Ge.identity=cr,Ge.includes=function(P,W,ye,Ie){P=sr(P)?P:Ao(P),ye=ye&&!Ie?Zt(ye):0;var ze=P.length;return ye<0&&(ye=Tn(ze+ye,0)),Va(P)?ye<=ze&&P.indexOf(W,ye)>-1:!!ze&&Ci(P,W,ye)>-1},Ge.indexOf=function(P,W,ye){var Ie=P==null?0:P.length;if(!Ie)return-1;var ze=ye==null?0:Zt(ye);return ze<0&&(ze=Tn(Ie+ze,0)),Ci(P,W,ze)},Ge.inRange=function(P,W,ye){return W=_i(W),ye===r?(ye=W,W=0):ye=_i(ye),function(Ie,ze,Ke){return Ie>=On(ze,Ke)&&Ie<Tn(ze,Ke)}(P=Br(P),W,ye)},Ge.invoke=hu,Ge.isArguments=uo,Ge.isArray=qt,Ge.isArrayBuffer=tu,Ge.isArrayLike=sr,Ge.isArrayLikeObject=Bn,Ge.isBoolean=function(P){return P===!0||P===!1||En(P)&&Bt(P)==T},Ge.isBuffer=Oi,Ge.isDate=nu,Ge.isElement=function(P){return En(P)&&P.nodeType===1&&!Jo(P)},Ge.isEmpty=function(P){if(P==null)return!0;if(sr(P)&&(qt(P)||typeof P=="string"||typeof P.splice=="function"||Oi(P)||Mo(P)||uo(P)))return!P.length;var W=zn(P);if(W==N||W==j)return!P.size;if(Xo(P))return!yr(P).length;for(var ye in P)if(cn.call(P,ye))return!1;return!0},Ge.isEqual=function(P,W){return Mr(P,W)},Ge.isEqualWith=function(P,W,ye){var Ie=(ye=typeof ye=="function"?ye:r)?ye(P,W):r;return Ie===r?Mr(P,W,r,ye):!!Ie},Ge.isError=Ns,Ge.isFinite=function(P){return typeof P=="number"&&ma(P)},Ge.isFunction=gi,Ge.isInteger=Gl,Ge.isLength=Oa,Ge.isMap=Kl,Ge.isMatch=function(P,W){return P===W||Ar(P,W,Es(W))},Ge.isMatchWith=function(P,W,ye){return ye=typeof ye=="function"?ye:r,Ar(P,W,Es(W),ye)},Ge.isNaN=function(P){return Yl(P)&&P!=+P},Ge.isNative=function(P){if(xc(P))throw new tn("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return _r(P)},Ge.isNil=function(P){return P==null},Ge.isNull=function(P){return P===null},Ge.isNumber=Yl,Ge.isObject=Sn,Ge.isObjectLike=En,Ge.isPlainObject=Jo,Ge.isRegExp=Fs,Ge.isSafeInteger=function(P){return Gl(P)&&P>=-9007199254740991&&P<=y},Ge.isSet=Xl,Ge.isString=Va,Ge.isSymbol=wr,Ge.isTypedArray=Mo,Ge.isUndefined=function(P){return P===r},Ge.isWeakMap=function(P){return En(P)&&zn(P)==Se},Ge.isWeakSet=function(P){return En(P)&&Bt(P)=="[object WeakSet]"},Ge.join=function(P,W){return P==null?"":as.call(P,W)},Ge.kebabCase=gu,Ge.last=$r,Ge.lastIndexOf=function(P,W,ye){var Ie=P==null?0:P.length;if(!Ie)return-1;var ze=Ie;return ye!==r&&(ze=(ze=Zt(ye))<0?Tn(Ie+ze,0):On(ze,Ie-1)),W==W?function(Ke,et,rt){for(var ft=rt+1;ft--;)if(Ke[ft]===et)return ft;return ft}(P,W,ze):mo(P,aa,ze,!0)},Ge.lowerCase=_u,Ge.lowerFirst=yu,Ge.lt=ru,Ge.lte=iu,Ge.max=function(P){return P&&P.length?ko(P,cr,Xt):r},Ge.maxBy=function(P,W){return P&&P.length?ko(P,Vt(W,2),Xt):r},Ge.mean=function(P){return fr(P,cr)},Ge.meanBy=function(P,W){return fr(P,Vt(W,2))},Ge.min=function(P){return P&&P.length?ko(P,cr,Hr):r},Ge.minBy=function(P,W){return P&&P.length?ko(P,Vt(W,2),Hr):r},Ge.stubArray=Us,Ge.stubFalse=qs,Ge.stubObject=function(){return{}},Ge.stubString=function(){return""},Ge.stubTrue=function(){return!0},Ge.multiply=Fu,Ge.nth=function(P,W){return P&&P.length?or(P,Zt(W)):r},Ge.noConflict=function(){return In._===this&&(In._=Vo),this},Ge.noop=Ws,Ge.now=Na,Ge.pad=function(P,W,ye){P=mn(P);var Ie=(W=Zt(W))?Nr(P):0;if(!W||Ie>=W)return P;var ze=(W-Ie)/2;return Aa(Co(ze),ye)+P+Aa(Ji(ze),ye)},Ge.padEnd=function(P,W,ye){P=mn(P);var Ie=(W=Zt(W))?Nr(P):0;return W&&Ie<W?P+Aa(W-Ie,ye):P},Ge.padStart=function(P,W,ye){P=mn(P);var Ie=(W=Zt(W))?Nr(P):0;return W&&Ie<W?Aa(W-Ie,ye)+P:P},Ge.parseInt=function(P,W,ye){return ye||W==null?W=0:W&&(W=+W),cs(mn(P).replace(We,""),W||0)},Ge.random=function(P,W,ye){if(ye&&typeof ye!="boolean"&&Xn(P,W,ye)&&(W=ye=r),ye===r&&(typeof W=="boolean"?(ye=W,W=r):typeof P=="boolean"&&(ye=P,P=r)),P===r&&W===r?(P=0,W=1):(P=_i(P),W===r?(W=P,P=0):W=_i(W)),P>W){var Ie=P;P=W,W=Ie}if(ye||P%1||W%1){var ze=ga();return On(P+ze*(W-P+ea("1e-"+((ze+"").length-1))),W)}return fs(P,W)},Ge.reduce=function(P,W,ye){var Ie=qt(P)?po:sa,ze=arguments.length<3;return Ie(P,Vt(W,4),ye,ze,ei)},Ge.reduceRight=function(P,W,ye){var Ie=qt(P)?Qa:sa,ze=arguments.length<3;return Ie(P,Vt(W,4),ye,ze,Ca)},Ge.repeat=function(P,W,ye){return W=(ye?Xn(P,W,ye):W===r)?1:Zt(W),ps(mn(P),W)},Ge.replace=function(){var P=arguments,W=mn(P[0]);return P.length<3?W:W.replace(P[1],P[2])},Ge.result=function(P,W,ye){var Ie=-1,ze=(W=Fi(W,P)).length;for(ze||(ze=1,P=r);++Ie<ze;){var Ke=P==null?r:P[ni(W[Ie])];Ke===r&&(Ie=ze,Ke=ye),P=gi(Ke)?Ke.call(P):Ke}return P},Ge.round=Du,Ge.runInContext=vt,Ge.sample=function(P){return(qt(P)?no:fc)(P)},Ge.size=function(P){if(P==null)return 0;if(sr(P))return Va(P)?Nr(P):P.length;var W=zn(P);return W==N||W==j?P.size:yr(P).length},Ge.snakeCase=bu,Ge.some=function(P,W,ye){var Ie=qt(P)?Ui:gc;return ye&&Xn(P,W,ye)&&(W=r),Ie(P,Vt(W,3))},Ge.sortedIndex=function(P,W){return ka(P,W)},Ge.sortedIndexBy=function(P,W,ye){return vs(P,W,Vt(ye,2))},Ge.sortedIndexOf=function(P,W){var ye=P==null?0:P.length;if(ye){var Ie=ka(P,W);if(Ie<ye&&jr(P[Ie],W))return Ie}return-1},Ge.sortedLastIndex=function(P,W){return ka(P,W,!0)},Ge.sortedLastIndexBy=function(P,W,ye){return vs(P,W,Vt(ye,2),!0)},Ge.sortedLastIndexOf=function(P,W){if(P!=null&&P.length){var ye=ka(P,W,!0)-1;if(jr(P[ye],W))return ye}return-1},Ge.startCase=wu,Ge.startsWith=function(P,W,ye){return P=mn(P),ye=ye==null?0:Qr(Zt(ye),0,P.length),W=br(W),P.slice(ye,ye+W.length)==W},Ge.subtract=Ou,Ge.sum=function(P){return P&&P.length?ki(P,cr):0},Ge.sumBy=function(P,W){return P&&P.length?ki(P,Vt(W,2)):0},Ge.template=function(P,W,ye){var Ie=Ge.templateSettings;ye&&Xn(P,W,ye)&&(W=r),P=mn(P),W=Ha({},W,Ie,_l);var ze,Ke,et=Ha({},W.imports,Ie.imports,_l),rt=Vn(et),ft=Fo(et,rt),bt=0,yt=W.interpolate||Ye,At="__p += '",Nt=si((W.escape||Ye).source+"|"+yt.source+"|"+(yt===be?mt:Ye).source+"|"+(W.evaluate||Ye).source+"|$","g"),Ft="//# sourceURL="+(cn.call(W,"sourceURL")?(W.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Hi+"]")+`
`;P.replace(Nt,function($t,Ht,Rt,Kt,Ut,fn){return Rt||(Rt=Kt),At+=P.slice(bt,fn).replace(st,da),Ht&&(ze=!0,At+=`' +
__e(`+Ht+`) +
'`),Ut&&(Ke=!0,At+=`';
`+Ut+`;
__p += '`),Rt&&(At+=`' +
((__t = (`+Rt+`)) == null ? '' : __t) +
'`),bt=fn+$t.length,$t}),At+=`';
`;var Ot=cn.call(W,"variable")&&W.variable;if(Ot){if(ut.test(Ot))throw new tn("Invalid `variable` option passed into `_.template`")}else At=`with (obj) {
`+At+`
}
`;At=(Ke?At.replace(Pe,""):At).replace(Be,"$1").replace($e,"$1;"),At="function("+(Ot||"obj")+`) {
`+(Ot?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ze?", __e = _.escape":"")+(Ke?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+At+`return __p
}`;var wt=lc(function(){return kn(rt,Ft+"return "+At).apply(r,ft)});if(wt.source=At,Ns(wt))throw wt;return wt},Ge.times=function(P,W){if((P=Zt(P))<1||P>y)return[];var ye=x,Ie=On(P,x);W=Vt(W),P-=x;for(var ze=qi(Ie,W);++ye<P;)W(ye);return ze},Ge.toFinite=_i,Ge.toInteger=Zt,Ge.toLength=Jl,Ge.toLower=function(P){return mn(P).toLowerCase()},Ge.toNumber=Br,Ge.toSafeInteger=function(P){return P?Qr(Zt(P),-9007199254740991,y):P===0?P:0},Ge.toString=mn,Ge.toUpper=function(P){return mn(P).toUpperCase()},Ge.trim=function(P,W,ye){if((P=mn(P))&&(ye||W===r))return Si(P);if(!P||!(W=br(W)))return P;var Ie=pr(P),ze=pr(W);return Di(Ie,la(Ie,ze),ca(Ie,ze)+1).join("")},Ge.trimEnd=function(P,W,ye){if((P=mn(P))&&(ye||W===r))return P.slice(0,ha(P)+1);if(!P||!(W=br(W)))return P;var Ie=pr(P);return Di(Ie,0,ca(Ie,pr(W))+1).join("")},Ge.trimStart=function(P,W,ye){if((P=mn(P))&&(ye||W===r))return P.replace(We,"");if(!P||!(W=br(W)))return P;var Ie=pr(P);return Di(Ie,la(Ie,pr(W))).join("")},Ge.truncate=function(P,W){var ye=30,Ie="...";if(Sn(W)){var ze="separator"in W?W.separator:ze;ye="length"in W?Zt(W.length):ye,Ie="omission"in W?br(W.omission):Ie}var Ke=(P=mn(P)).length;if(oi(P)){var et=pr(P);Ke=et.length}if(ye>=Ke)return P;var rt=ye-Nr(Ie);if(rt<1)return Ie;var ft=et?Di(et,0,rt).join(""):P.slice(0,rt);if(ze===r)return ft+Ie;if(et&&(rt+=ft.length-rt),Fs(ze)){if(P.slice(rt).search(ze)){var bt,yt=ft;for(ze.global||(ze=si(ze.source,mn(pt.exec(ze))+"g")),ze.lastIndex=0;bt=ze.exec(yt);)var At=bt.index;ft=ft.slice(0,At===r?rt:At)}}else if(P.indexOf(br(ze),rt)!=rt){var Nt=ft.lastIndexOf(ze);Nt>-1&&(ft=ft.slice(0,Nt))}return ft+Ie},Ge.unescape=function(P){return(P=mn(P))&&J.test(P)?P.replace(Oe,fa):P},Ge.uniqueId=function(P){var W=++pa;return mn(P)+W},Ge.upperCase=xu,Ge.upperFirst=Vs,Ge.each=Vl,Ge.eachRight=Hl,Ge.first=Nl,js(Ge,(Gs={},je(Ge,function(P,W){cn.call(Ge.prototype,W)||(Gs[W]=P)}),Gs),{chain:!1}),Ge.VERSION="4.17.21",tr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(P){Ge[P].placeholder=Ge}),tr(["drop","take"],function(P,W){Yt.prototype[P]=function(ye){ye=ye===r?1:Tn(Zt(ye),0);var Ie=this.__filtered__&&!W?new Yt(this):this.clone();return Ie.__filtered__?Ie.__takeCount__=On(ye,Ie.__takeCount__):Ie.__views__.push({size:On(ye,x),type:P+(Ie.__dir__<0?"Right":"")}),Ie},Yt.prototype[P+"Right"]=function(ye){return this.reverse()[P](ye).reverse()}}),tr(["filter","map","takeWhile"],function(P,W){var ye=W+1,Ie=ye==1||ye==3;Yt.prototype[P]=function(ze){var Ke=this.clone();return Ke.__iteratees__.push({iteratee:Vt(ze,3),type:ye}),Ke.__filtered__=Ke.__filtered__||Ie,Ke}}),tr(["head","last"],function(P,W){var ye="take"+(W?"Right":"");Yt.prototype[P]=function(){return this[ye](1).value()[0]}}),tr(["initial","tail"],function(P,W){var ye="drop"+(W?"":"Right");Yt.prototype[P]=function(){return this.__filtered__?new Yt(this):this[ye](1)}}),Yt.prototype.compact=function(){return this.filter(cr)},Yt.prototype.find=function(P){return this.filter(P).head()},Yt.prototype.findLast=function(P){return this.reverse().find(P)},Yt.prototype.invokeMap=Jt(function(P,W){return typeof P=="function"?new Yt(this):this.map(function(ye){return wn(ye,P,W)})}),Yt.prototype.reject=function(P){return this.filter(Da(Vt(P)))},Yt.prototype.slice=function(P,W){P=Zt(P);var ye=this;return ye.__filtered__&&(P>0||W<0)?new Yt(ye):(P<0?ye=ye.takeRight(-P):P&&(ye=ye.drop(P)),W!==r&&(ye=(W=Zt(W))<0?ye.dropRight(-W):ye.take(W-P)),ye)},Yt.prototype.takeRightWhile=function(P){return this.reverse().takeWhile(P).reverse()},Yt.prototype.toArray=function(){return this.take(x)},je(Yt.prototype,function(P,W){var ye=/^(?:filter|find|map|reject)|While$/.test(W),Ie=/^(?:head|last)$/.test(W),ze=Ge[Ie?"take"+(W=="last"?"Right":""):W],Ke=Ie||/^find/.test(W);ze&&(Ge.prototype[W]=function(){var et=this.__wrapped__,rt=Ie?[1]:arguments,ft=et instanceof Yt,bt=rt[0],yt=ft||qt(et),At=function(Ht){var Rt=ze.apply(Ge,hr([Ht],rt));return Ie&&Nt?Rt[0]:Rt};yt&&ye&&typeof bt=="function"&&bt.length!=1&&(ft=yt=!1);var Nt=this.__chain__,Ft=!!this.__actions__.length,Ot=Ke&&!Nt,wt=ft&&!Ft;if(!Ke&&yt){et=wt?et:new Yt(this);var $t=P.apply(et,rt);return $t.__actions__.push({func:Ia,args:[At],thisArg:r}),new Gn($t,Nt)}return Ot&&wt?P.apply(this,rt):($t=this.thru(At),Ot?Ie?$t.value()[0]:$t.value():$t)})}),tr(["pop","push","shift","sort","splice","unshift"],function(P){var W=yo[P],ye=/^(?:push|sort|unshift)$/.test(P)?"tap":"thru",Ie=/^(?:pop|shift)$/.test(P);Ge.prototype[P]=function(){var ze=arguments;if(Ie&&!this.__chain__){var Ke=this.value();return W.apply(qt(Ke)?Ke:[],ze)}return this[ye](function(et){return W.apply(qt(et)?et:[],ze)})}}),je(Yt.prototype,function(P,W){var ye=Ge[W];if(ye){var Ie=ye.name+"";cn.call(Kr,Ie)||(Kr[Ie]=[]),Kr[Ie].push({name:W,func:ye})}}),Kr[Pa(r,2).name]=[{name:"wrapper",func:r}],Yt.prototype.clone=function(){var P=new Yt(this.__wrapped__);return P.__actions__=ar(this.__actions__),P.__dir__=this.__dir__,P.__filtered__=this.__filtered__,P.__iteratees__=ar(this.__iteratees__),P.__takeCount__=this.__takeCount__,P.__views__=ar(this.__views__),P},Yt.prototype.reverse=function(){if(this.__filtered__){var P=new Yt(this);P.__dir__=-1,P.__filtered__=!0}else(P=this.clone()).__dir__*=-1;return P},Yt.prototype.value=function(){var P=this.__wrapped__.value(),W=this.__dir__,ye=qt(P),Ie=W<0,ze=ye?P.length:0,Ke=function(fn,Dt,zt){for(var Nn=-1,Rn=zt.length;++Nn<Rn;){var Zn=zt[Nn],Cn=Zn.size;switch(Zn.type){case"drop":fn+=Cn;break;case"dropRight":Dt-=Cn;break;case"take":Dt=On(Dt,fn+Cn);break;case"takeRight":fn=Tn(fn,Dt-Cn)}}return{start:fn,end:Dt}}(0,ze,this.__views__),et=Ke.start,rt=Ke.end,ft=rt-et,bt=Ie?rt:et-1,yt=this.__iteratees__,At=yt.length,Nt=0,Ft=On(ft,this.__takeCount__);if(!ye||!Ie&&ze==ft&&Ft==ft)return tl(P,this.__actions__);var Ot=[];e:for(;ft--&&Nt<Ft;){for(var wt=-1,$t=P[bt+=W];++wt<At;){var Ht=yt[wt],Rt=Ht.iteratee,Kt=Ht.type,Ut=Rt($t);if(Kt==2)$t=Ut;else if(!Ut){if(Kt==1)continue e;break e}}Ot[Nt++]=$t}return Ot},Ge.prototype.at=Vc,Ge.prototype.chain=function(){return Ol(this)},Ge.prototype.commit=function(){return new Gn(this.value(),this.__chain__)},Ge.prototype.next=function(){this.__values__===r&&(this.__values__=Zl(this.value()));var P=this.__index__>=this.__values__.length;return{done:P,value:P?r:this.__values__[this.__index__++]}},Ge.prototype.plant=function(P){for(var W,ye=this;ye instanceof to;){var Ie=Bl(ye);Ie.__index__=0,Ie.__values__=r,W?ze.__wrapped__=Ie:W=Ie;var ze=Ie;ye=ye.__wrapped__}return ze.__wrapped__=P,W},Ge.prototype.reverse=function(){var P=this.__wrapped__;if(P instanceof Yt){var W=P;return this.__actions__.length&&(W=new Yt(this)),(W=W.reverse()).__actions__.push({func:Ia,args:[Bs],thisArg:r}),new Gn(W,this.__chain__)}return this.thru(Bs)},Ge.prototype.toJSON=Ge.prototype.valueOf=Ge.prototype.value=function(){return tl(this.__wrapped__,this.__actions__)},Ge.prototype.first=Ge.prototype.head,Dr&&(Ge.prototype[Dr]=function(){return this}),Ge}();dr?((dr.exports=Pi)._=Pi,wi._=Pi):In._=Pi}).call(commonjsGlobal)})(lodash,lodashExports);var TO_FIXED_PRECISION=/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g;function med(e,n){return[(e[0]+n[0])/2,(e[1]+n[1])/2]}function getSvgPathFromStroke(e){if(!e.length)return"";var n=e.length-1;return e.reduce(function(r,o,s,u){return s===n?r.push(o,med(o,u[0]),"L",u[0],"Z"):r.push(o,med(o,u[s+1])),r},["M",e[0],"Q"]).join(" ").replace(TO_FIXED_PRECISION,"$1")}var getHtmlToText=function(e){return formatText(replaceToBreak(getHtml(e)))},formatText=function(e){return e.replace(/\<br\/\>/gi,`
`).replace(/\<br\>/gi,`
`).replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/<\/?[^>]*>/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">")},getHtml=function(e){return e.innerHTML},replaceToBreak=function(e){return e=(e=(e=String(e).replace(/<\/div>/gi,"")).replace(/<div>(<br>)?(<br\/>)?/gi,`
`)).replace(/<br>|<br\/>/gi,`
`)},keepLastIndex=function(e){if(window.getSelection)(n=window.getSelection()).selectAllChildren(e),n.collapseToEnd();else if(document.selection){var n;(n=document.selection.createRange()).moveToElementText(e),n.collapse(!1),n.select()}},createElement=function(e,n,r){var o=document.createElement(e);if(r)for(var s in r)o.setAttribute(s,r[s]);if(n)for(var u in n)o.style[u]=n[u];return o},_getNormalize=new WeakSet,_getVector=new WeakSet,_getLineLength=new WeakSet,ArrowHelper=function(){function e(n,r){_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_getLineLength),_classPrivateMethodInitSpec(this,_getVector),_classPrivateMethodInitSpec(this,_getNormalize),this.start=n,this.end=r}return _createClass(e,[{key:"getStartArrow",value:function(n,r,o){var s=this.getStartArrowPoints(n,r);if(s){var u=void 0;u=o?document.createElementNS("http://www.w3.org/2000/svg","polygon"):document.createElementNS("http://www.w3.org/2000/svg","polyline");var d="";if(s.forEach(function(f){d.length>0&&(d+=" "),d+="".concat(f.x,",").concat(f.y)}),d.length>0)return u.setAttribute("points",d),u}}},{key:"getStartArrowPoints",value:function(n,r){var o=_classPrivateMethodGet(this,_getNormalize,_getNormalize2).call(this);if(o&&r>0){var s={x:(o={x:o.x*r,y:o.y*r}).x*Math.cos(n*Math.PI/180)-o.y*Math.sin(n*Math.PI/180),y:o.y*Math.cos(n*Math.PI/180)+o.x*Math.sin(n*Math.PI/180)},u={x:o.x*Math.cos(-n*Math.PI/180)-o.y*Math.sin(-n*Math.PI/180),y:o.y*Math.cos(-n*Math.PI/180)+o.x*Math.sin(-n*Math.PI/180)};return[{x:this.start.x+s.x,y:this.start.y+s.y},{x:this.start.x,y:this.start.y},{x:this.start.x+u.x,y:this.start.y+u.y}]}}},{key:"getEndArrow",value:function(n,r,o){var s=this.getEndArrowPoints(n,r);if(s){var u=void 0;u=o?document.createElementNS("http://www.w3.org/2000/svg","polygon"):document.createElementNS("http://www.w3.org/2000/svg","polyline");var d="";if(s.forEach(function(f){d.length>0&&(d+=" "),d+="".concat(f.x,",").concat(f.y)}),d.length>0)return u.setAttribute("points",d),u}}},{key:"getEndArrowPoints",value:function(n,r){var o=_classPrivateMethodGet(this,_getNormalize,_getNormalize2).call(this);if(o&&r>0){var s={x:(o={x:o.x*r,y:o.y*r}).x*Math.cos(n*Math.PI/180)-o.y*Math.sin(n*Math.PI/180),y:o.y*Math.cos(n*Math.PI/180)+o.x*Math.sin(n*Math.PI/180)},u={x:o.x*Math.cos(-n*Math.PI/180)-o.y*Math.sin(-n*Math.PI/180),y:o.y*Math.cos(-n*Math.PI/180)+o.x*Math.sin(-n*Math.PI/180)};return[{x:this.end.x-s.x,y:this.end.y-s.y},{x:this.end.x,y:this.end.y},{x:this.end.x-u.x,y:this.end.y-u.y}]}}}]),e}();function _getNormalize2(){var e=_classPrivateMethodGet(this,_getVector,_getVector2).call(this),n=_classPrivateMethodGet(this,_getLineLength,_getLineLength2).call(this);if(e&&n>0)return{x:e.x/n,y:e.y/n}}function _getVector2(){if(this.start&&this.end)return{x:this.end.x-this.start.x,y:this.end.y-this.start.y}}function _getLineLength2(){var e=_classPrivateMethodGet(this,_getVector,_getVector2).call(this);return e?Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2)):0}var Line=function(e){_inherits(r,BaseAnnotation);var n=_createSuper(r);function r(o){var s,u=o.container,d=o.annotation,f=o.page,v=o.viewport,m=o.eventBus,_=o.layer,g=o.show,y=g!==void 0&&g;return _classCallCheck(this,r),(s=n.call(this,{container:u,annotation:d,page:f,viewport:v,eventBus:m,show:y})).layer=_,s.hidden=!0,s.initial=!1,s.outline=null,s.start=null,s.end=null,s.newStart=null,s.newEnd=null,s.svgElement=null,s.startCircle=null,s.endCircle=null,s.show=y,s.onMousedown=s.handleMouseDown.bind(_assertThisInitialized(s)),s.onMouseup=s.handleMouseUp.bind(_assertThisInitialized(s)),s.onMousemove=s.handleMouseMove.bind(_assertThisInitialized(s)),s.onDelete=s.handleDelete.bind(_assertThisInitialized(s)),s.onKeydown=s.handleKeydown.bind(_assertThisInitialized(s)),s.render(),s}return _createClass(r,[{key:"render",value:function(){var o=this,s=this.annotation,u=this.getActualPoint(this.viewport,this.scale),d=u.start,f=u.end;this.start=d,this.end=f;var v=(this.annotation.borderWidth||2)*this.scale,m=this.calculate(d,f),_=Math.max(3*v,12*this.scale);s.borderColor||(s.borderColor="#FF0000");var g={left:m.left-_,top:m.top-_,width:m.width+2*_,height:m.height+2*_};this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgElement.setAttribute("viewBox","".concat(g.left," ").concat(g.top," ").concat(g.width," ").concat(g.height));var y=document.createElementNS("http://www.w3.org/2000/svg","line");if(y.setAttribute("x1",this.start.x),y.setAttribute("y1",this.start.y),y.setAttribute("x2",this.end.x),y.setAttribute("y2",this.end.y),y.setAttribute("stroke",s.borderColor),y.setAttribute("stroke-width",v),s.opacity&&y.setAttribute("stroke-opacity",s.opacity),this.svgElement.append(y),this.annotation.head||this.annotation.tail){var w=new ArrowHelper(this.start,this.end),x=[];if(this.annotation.head&&this.annotation.head==="OpenArrow"){var k=w.getStartArrow(30,_,!1);k&&(k.setAttribute("head",""),x.push(k))}if(this.annotation.tail&&this.annotation.tail==="OpenArrow"){var S=w.getEndArrow(30,_,!1);S&&(S.setAttribute("tail",""),x.push(S))}x.forEach(function(I){I&&(I.setAttribute("stroke",s.borderColor),I.setAttribute("stroke-width",v),I.setAttribute("fill","none"),s.opacity&&I.setAttribute("stroke-opacity",s.opacity),o.svgElement.append(I))})}this.annotationContainer=document.createElement("div"),this.annotationContainer.append(this.svgElement),this.annotationContainer.id=s.name,this.annotationContainer.className="annotation",this.annotationContainer.style.top=g.top+"px",this.annotationContainer.style.left=g.left+"px",this.annotationContainer.style.width=g.width+"px",this.annotationContainer.style.height=g.height+"px",this.svgElement.addEventListener("mousedown",this.handleClick.bind(this)),this.container.append(this.annotationContainer),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr;var E=g.left+g.width+MARGIN_DISTANCE-30+"px",T=g.top-MARGIN_DISTANCE-30+"px";this.deletetButton.style.left=E,this.deletetButton.style.top=T;var M=document.createElementNS("http://www.w3.org/2000/svg","svg");M.setAttribute("data-id","move"),M.setAttribute("height",g.height),M.setAttribute("viewBox","".concat(g.left," ").concat(g.top," ").concat(g.width+2*MARGIN_DISTANCE," ").concat(g.height+2*MARGIN_DISTANCE)),M.style.position="absolute",M.style.zIndex=1,M.style.left="".concat(g.left-MARGIN_DISTANCE,"px"),M.style.top="".concat(g.top-MARGIN_DISTANCE,"px"),M.style.width="".concat(g.width+2*MARGIN_DISTANCE,"px"),M.style.height="".concat(g.height+2*MARGIN_DISTANCE,"px"),this.outerLine=M,this.startCircle=createSvg("circle",{class:"start","data-id":"start",fill:"#1460F3",cx:d.x+MARGIN_DISTANCE,cy:d.y+MARGIN_DISTANCE,r:6}),this.endCircle=createSvg("circle",{class:"end","data-id":"end",fill:"#1460F3",cx:f.x+MARGIN_DISTANCE,cy:f.y+MARGIN_DISTANCE,r:6}),this.moveLine=createSvg("line",{class:"move","data-id":"move",x1:d.x+MARGIN_DISTANCE,y1:d.y+MARGIN_DISTANCE,x2:f.x+MARGIN_DISTANCE,y2:f.y+MARGIN_DISTANCE,fill:"transparent",stroke:"transparent","stroke-width":5}),this.outerLine.append(this.moveLine),this.outerLine.append(this.startCircle),this.outerLine.append(this.endCircle),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.initial=!0}},{key:"handleClick",value:function(){this.hidden&&!this.layer.annotationStore.creating&&(this.hidden=!1,this.updateTool(),onClickOutside([this.svgElement,this.outerLine,this.deletetButton],this.handleOutside.bind(this)))}},{key:"handleOutside",value:function(){this.hidden=!this.hidden,this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLine.removeEventListener("mousedown",this.onMousedown),this.outerLine.removeEventListener("touchstart",this.onMousedown),this.outerLineContainer.remove()}},{key:"getActualPoint",value:function(o,s){var u=this.annotation;!u.linePoints&&u.start&&u.end&&(u.linePoints=u.start+","+u.end);var d=_slicedToArray(u.linePoints,4),f=d[0],v=d[1],m=d[2],_=d[3];return o.width,o.height,o.rotation,{start:{x:f*s,y:v*s},end:{x:m*s,y:_*s}}}},{key:"getInitialPoint",value:function(){var o=this.scale;return{start:{x:this.start.x/o,y:this.start.y/o},end:{x:this.end.x/o,y:this.end.y/o}}}},{key:"calculate",value:function(o,s){var u=this.rectCalc({start:o,end:s}),d=(this.annotation.borderWidth||2)*this.scale;return this.annotation.arrow?{top:u.top-10,left:u.left-10,width:u.width+20,height:u.height+20}:{top:u.top-d/2,left:u.left-d/2,width:u.width+d,height:u.height+d}}},{key:"rectCalc",value:function(o){var s=o.start,u=o.end;return{top:s.y<u.y?s.y:u.y,left:s.x<u.x?s.x:u.x,width:Math.abs(u.x-s.x),height:Math.abs(u.y-s.y)}}},{key:"updateTool",value:function(){this.initial&&(this.hidden?(this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLineContainer.remove(),document.removeEventListener("keydown",this.onKeydown)):(this.layer.selectedElementName!==this.annotation.name&&(this.layer.selectedElementName=this.annotation.name),this.container.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),document.addEventListener("keydown",this.onKeydown)))}},{key:"handleMouseDown",value:function(o){if(o.button===0||o.type!=="mousedown"){this.layer.tool&&o.stopPropagation();var s=o.target.getAttribute("data-id"),u=getClickPoint(o),d=u.pageX,f=u.pageY;this.startState={operator:s,clickX:d,clickY:f},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(o){if(o.button===0||o.type!=="mousemove"){o.type==="touchmove"&&(document.body.style.overscrollBehavior="none"),this.moving=!0;var s=getClickPoint(o),u=s.pageX,d=s.pageY,f=this.start,v=this.end,m=this.startState,_=this.viewport,g=_.width,y=_.height;if(m.operator==="start"){var w=u-(m.clickX-this.start.x),x=d-(m.clickY-this.start.y);w=Math.min(g,w),w=Math.max(0,w),x=Math.min(y,x),x=Math.max(0,x),this.update({start:{x:w,y:x},end:v})}else if(m.operator==="end"){var k=u-(m.clickX-this.end.x),S=d-(m.clickY-this.end.y);k=Math.min(g,k),k=Math.max(0,k),S=Math.min(y,S),S=Math.max(0,S),this.update({start:f,end:{x:k,y:S}})}else if(m.operator==="move"){var E=u-(m.clickX-this.start.x),T=d-(m.clickY-this.start.y),M=u-(m.clickX-this.end.x),I=d-(m.clickY-this.end.y),F={width:Math.abs(f.x-v.x),height:Math.abs(f.y-v.y)};E<M?(E=Math.max(0,E),E=Math.min(g-F.width,E),M=Math.max(F.width,M),M=Math.min(g,M)):(M=Math.max(0,M),M=Math.min(g-F.width,M),E=Math.max(F.width,E),E=Math.min(g,E)),T<I?(T=Math.max(0,T),T=Math.min(y-F.height,T),I=Math.max(F.height,I),I=Math.min(y,I)):(I=Math.max(0,I),I=Math.min(y-F.height,I),T=Math.max(F.height,T),T=Math.min(y,T)),this.update({start:{x:E,y:T},end:{x:M,y:I}})}}}},{key:"handleDelete",value:function(o){this.layer.tool&&o&&o.stopPropagation(),this.handleOutside(),this.annotationContainer.remove(),this.annotation.isDelete=!0;var s={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.page}};this.annotation.annotPtr&&(s.annotation.annotPtr=this.annotation.annotPtr),o||(s.type="empty"),this.eventBus.dispatch("annotationChange",s)}},{key:"handleKeydown",value:function(o){}},{key:"handleMouseUp",value:function(o){if(o.button===0||o.type!=="mouseup"){this.layer.tool&&o.stopPropagation(),o.type==="touchend"&&(document.body.style.overscrollBehavior="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup);var s=getClickPoint(o),u=s.pageX,d=s.pageY;if(u!==this.startState.clickX||d!==this.startState.clickY){this.start=this.newStart,this.end=this.newEnd;var f=this.annotation,v=this.getInitialPoint(),m=v.start,_=v.end,g=[m.x,m.y,_.x,_.y];f.linePoints=g;var y={left:Math.min(m.x,_.x)-6,top:Math.min(m.y,_.y)-6,right:Math.max(m.x,_.x)+6,bottom:Math.max(m.y,_.y)+6};this.eventBus.dispatch("annotationChange",{type:"modify",annotation:{operate:"mod-annot",name:f.name,pageIndex:this.page,pagePtr:f.pagePtr,annotPtr:f.annotPtr,linePoints:g,rect:y}})}}}},{key:"update",value:function(o){var s=o.start,u=o.end,d=this.calculate(s,u),f=(this.annotation.borderWidth||2)*this.scale,v=Math.max(3*f,12*this.scale),m={left:d.left-v,top:d.top-v,width:d.width+2*v,height:d.height+2*v};this.newStart=s,this.newEnd=u,this.svgElement.setAttribute("width",m.width),this.svgElement.setAttribute("height",m.height),this.svgElement.setAttribute("viewBox","".concat(m.left," ").concat(m.top," ").concat(m.width," ").concat(m.height));var _=this.svgElement.querySelector("line");_.setAttribute("x1",s.x),_.setAttribute("y1",s.y),_.setAttribute("x2",u.x),_.setAttribute("y2",u.y),this.annotationContainer.style.top=m.top+"px",this.annotationContainer.style.left=m.left+"px",this.annotationContainer.style.width=m.width+"px",this.annotationContainer.style.height=m.height+"px",this.outerLine.setAttribute("height",m.height),this.outerLine.setAttribute("viewBox","".concat(m.left," ").concat(m.top," ").concat(m.width+2*MARGIN_DISTANCE," ").concat(m.height+2*MARGIN_DISTANCE)),this.outerLine.style.left="".concat(m.left-MARGIN_DISTANCE,"px"),this.outerLine.style.top="".concat(m.top-MARGIN_DISTANCE,"px"),this.outerLine.style.width="".concat(m.width+2*MARGIN_DISTANCE,"px"),this.outerLine.style.height="".concat(m.height+2*MARGIN_DISTANCE,"px");var g=m.left+m.width+MARGIN_DISTANCE-30+"px",y=m.top-MARGIN_DISTANCE-30+"px";if(this.deletetButton.style.left=g,this.deletetButton.style.top=y,this.startCircle.setAttribute("cx",s.x+MARGIN_DISTANCE),this.startCircle.setAttribute("cy",s.y+MARGIN_DISTANCE),this.endCircle.setAttribute("cx",u.x+MARGIN_DISTANCE),this.endCircle.setAttribute("cy",u.y+MARGIN_DISTANCE),this.moveLine.setAttribute("x1",s.x+MARGIN_DISTANCE),this.moveLine.setAttribute("y1",s.y+MARGIN_DISTANCE),this.moveLine.setAttribute("x2",u.x+MARGIN_DISTANCE),this.moveLine.setAttribute("y2",u.y+MARGIN_DISTANCE),this.annotation.head||this.annotation.tail){var w=new ArrowHelper(s,u);if(this.annotation.head&&this.annotation.head==="OpenArrow"){var x=this.svgElement.querySelector("[head]");if(x){var k=w.getStartArrowPoints(30,v),S="";k.forEach(function(I){S.length>0&&(S+=" "),S+="".concat(I.x,",").concat(I.y)}),S.length>0&&x.setAttribute("points",S)}}if(this.annotation.tail&&this.annotation.tail==="OpenArrow"){var E=this.svgElement.querySelector("[tail]");if(E){var T=w.getEndArrowPoints(30,v),M="";T.forEach(function(I){M.length>0&&(M+=" "),M+="".concat(I.x,",").concat(I.y)}),M.length>0&&E.setAttribute("points",M)}}}}}]),r}(),Shape$1=function(e){_inherits(r,BaseAnnotation);var n=_createSuper(r);function r(o){var s,u=o.container,d=o.annotation,f=o.page,v=o.viewport,m=o.scale,_=o.eventBus,g=o.layer,y=o.show,w=y!==void 0&&y;return _classCallCheck(this,r),(s=n.call(this,{container:u,annotation:d,page:f,viewport:v,scale:m,eventBus:_,show:w})).layer=g,s.hidden=!0,s.initial=!1,s.outline=null,s.start=null,s.end=null,s.newStart=null,s.newEnd=null,s.svgElement=null,s.startCircle=null,s.endCircle=null,s.show=w,s.onMousedown=s.handleMouseDown.bind(_assertThisInitialized(s)),s.onMouseup=s.handleMouseUp.bind(_assertThisInitialized(s)),s.onMousemove=s.handleMouseMove.bind(_assertThisInitialized(s)),s.onDelete=s.handleDelete.bind(_assertThisInitialized(s)),s.render(),s}return _createClass(r,[{key:"render",value:function(){var o=this.annotation,s=this.getActualRect(this.viewport,this.scale),u=s.start,d=s.end;this.start=u,this.end=d;var f=this.calculate(u,d),v=(o.borderWidth||2)*this.scale;o.borderColor||(o.borderColor="#000000");var m,_=document.createElement("div");_.id=o.name,_.className="annotation",_.style.top=f.top+"px",_.style.left=f.left+"px",_.style.width=f.width+"px",_.style.height=f.height+"px",this.annotationContainer=_,this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgElement.setAttribute("viewBox","0 0 ".concat(f.width," ").concat(f.height)),this.svgElement.addEventListener("mousedown",this.handleClick.bind(this)),m=o.type==="square"?createSvg("rect",{x:v/2,y:v/2,width:"".concat(Math.abs(f.width-v),"px"),height:"".concat(Math.abs(f.height-v),"px"),stroke:o.borderColor,"stroke-width":v,"stroke-opacity":o.opacity||1,fill:o.fillColor?o.fillColor:"none","fill-opacity":o.opacity||1}):createSvg("ellipse",{cx:f.width/2,cy:f.height/2,rx:(f.width-v)/2,ry:(f.height-v)/2,stroke:o.borderColor,"stroke-width":v,"stroke-opacity":o.opacity||1,fill:o.fillColor?o.fillColor:"none","fill-opacity":o.opacity||1}),this.shapeElement=m,this.svgElement.append(this.shapeElement),this.annotationContainer.append(this.svgElement),this.container.append(this.annotationContainer),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr;var g=f.left+f.width-30+"px",y=f.top+f.height+8+"px";this.deletetButton.style.left=g,this.deletetButton.style.top=y;var w=document.createElementNS("http://www.w3.org/2000/svg","svg");w.style.position="absolute",w.style.zIndex=1,w.style.left="".concat(f.left-7,"px"),w.style.top="".concat(f.top-7,"px"),w.style.width="".concat(f.width+14,"px"),w.style.height="".concat(f.height+14,"px"),this.outerLine=w,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#1460F3","stroke-width":1,"fill-opacity":0,width:f.width+8,height:f.height+8,x:3,y:3}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:0}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:f.height/2+4}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:f.height+8}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:f.width/2+4,y:f.height+8}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:f.width+8,y:f.height+8}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:f.width+8,y:f.height/2+4}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:f.width+8,y:0}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:f.width/2+4,y:0}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.initial=!0}},{key:"getActualRect",value:function(o,s){var u=this.annotation.rect,d=u.left,f=u.top,v=u.right,m=u.bottom;return{start:getActualPoint({x:d,y:f},o),end:getActualPoint({x:v,y:m},o)}}},{key:"rectCalc",value:function(o){var s=o.start,u=o.end;return{top:s.y<u.y?s.y:u.y,left:s.x<u.x?s.x:u.x,width:Math.abs(u.x-s.x),height:Math.abs(u.y-s.y)}}},{key:"calculate",value:function(o,s){var u=this.rectCalc({start:o,end:s}),d=(this.annotation.borderWidth||2)*this.scale;return{top:u.top-d,left:u.left-d,width:u.width+2*d,height:u.height+2*d}}},{key:"getInitialPoint",value:function(){var o=this.scale;return{start:{x:this.start.x/o,y:this.start.y/o},end:{x:this.end.x/o,y:this.end.y/o}}}},{key:"updateTool",value:function(){this.initial&&(this.hidden?(this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLineContainer.remove()):(this.layer.selectedElementName!==this.annotation.name&&(this.layer.selectedElementName=this.annotation.name),this.container.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown)))}},{key:"handleClick",value:function(){this.hidden&&!this.layer.annotationStore.creating&&(this.hidden=!1,this.updateTool(),onClickOutside([this.svgElement,this.outerLine,this.deletetButton],this.handleOutside.bind(this)))}},{key:"handleOutside",value:function(){this.hidden=!this.hidden,this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLine.removeEventListener("mousedown",this.onMousedown),this.outerLine.removeEventListener("touchstart",this.onMousedown),this.outerLineContainer.remove()}},{key:"handleMouseDown",value:function(o){if(o.button===0||o.type!=="mousedown"){this.layer.tool&&o.stopPropagation();var s=o.target.getAttribute("data-id"),u=getClickPoint(o),d=u.pageX,f=u.pageY;this.startState={operator:s,clickX:d,clickY:f},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(o){if(o.button===0||o.type!=="mousemove"){o.type==="touchmove"&&(document.body.style.overscrollBehavior="none"),this.moving=!0;var s=getClickPoint(o),u=s.pageX,d=s.pageY,f=this.start,v=this.end,m=this.startState,_=this.viewport,g=_.width,y=_.height;if(m.operator==="nw-resize"){var w=u-(m.clickX-this.start.x),x=d-(m.clickY-this.start.y);w=Math.min(v.x-5,w),w=Math.max(0,w),x=Math.min(v.y-5,x),x=Math.max(0,x),this.update({start:{x:w,y:x},end:v})}else if(m.operator==="w-resize"){var k=u-(m.clickX-this.start.x);k=Math.min(v.x-5,k),k=Math.max(0,k),this.update({start:{x:k,y:f.y},end:v})}else if(m.operator==="sw-resize"){var S=u-(m.clickX-this.start.x),E=d-(m.clickY-this.end.y);S=Math.min(v.x-5,S),S=Math.max(0,S),E=Math.min(y,E),E=Math.max(f.y+5,E),this.update({start:{x:S,y:f.y},end:{x:v.x,y:E}})}else if(m.operator==="s-resize"){var T=d-(m.clickY-this.end.y);T=Math.min(y,T),T=Math.max(f.y+5,T),this.update({start:f,end:{x:v.x,y:T}})}else if(m.operator==="se-resize"){var M=u-(m.clickX-this.end.x),I=d-(m.clickY-this.end.y);M=Math.min(g,M),M=Math.max(f.x+5,M),I=Math.min(y,I),I=Math.max(f.y+5,I),this.update({start:f,end:{x:M,y:I}})}else if(m.operator==="e-resize"){var F=u-(m.clickX-this.end.x);F=Math.min(g,F),F=Math.max(f.x+5,F),this.update({start:f,end:{x:F,y:v.y}})}else if(m.operator==="ne-resize"){var O=u-(m.clickX-this.end.x),N=d-(m.clickY-this.start.y);O=Math.min(g,O),O=Math.max(f.x+5,O),N=Math.min(v.y-5,N),N=Math.max(0,N),this.update({start:{x:f.x,y:N},end:{x:O,y:v.y}})}else if(m.operator==="n-resize"){var D=d-(m.clickY-this.start.y);D=Math.min(v.y-5,D),D=Math.max(0,D),this.update({start:{x:f.x,y:D},end:v})}else if(m.operator==="move"){var X=u-(m.clickX-this.start.x),U=d-(m.clickY-this.start.y),Z=u-(m.clickX-this.end.x),j=d-(m.clickY-this.end.y),Q={width:Math.abs(f.x-v.x),height:Math.abs(f.y-v.y)};X<Z?(X=Math.max(0,X),X=Math.min(g-Q.width,X),Z=Math.max(Q.width,Z),Z=Math.min(g,Z)):(Z=Math.max(0,Z),Z=Math.min(g-Q.width,Z),X=Math.max(Q.width,X),X=Math.min(g,X)),U<j?(U=Math.max(0,U),U=Math.min(y-Q.height,U),j=Math.max(Q.height,j),j=Math.min(y,j)):(j=Math.max(0,j),j=Math.min(y-Q.height,j),U=Math.max(Q.height,U),U=Math.min(y,U)),this.update({start:{x:X,y:U},end:{x:Z,y:j}})}}}},{key:"handleDelete",value:function(o){this.layer.tool&&o&&o.stopPropagation(),this.handleOutside(),this.annotationContainer.remove(),this.annotation.isDelete=!0;var s={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.page}};this.annotation.annotPtr&&(s.annotation.annotPtr=this.annotation.annotPtr),o||(s.type="empty"),this.eventBus.dispatch("annotationChange",s)}},{key:"handleMouseUp",value:function(o){if(o.button===0||o.type!=="mouseup"){this.layer.tool&&o.stopPropagation(),o.type==="touchend"&&(document.body.style.overscrollBehavior="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup);var s=getClickPoint(o),u=s.pageX,d=s.pageY;if(u!==this.startState.clickX||d!==this.startState.clickY){this.start=this.newStart,this.end=this.newEnd;var f=this.annotation,v=this.getInitialPoint(),m=v.start,_=v.end,g={left:m.x,top:m.y,right:_.x,bottom:_.y};if(g!==f.rect){f.rect=g;var y={operate:"mod-annot",name:f.name,pageIndex:this.page,pagePtr:f.pagePtr,annotPtr:f.annotPtr,rect:g};!f.annotPtr&&(y.linePoints=[g.left,g.bottom,g.right,g.top]),this.eventBus.dispatch("annotationChange",{type:"modify",annotation:y})}}}}},{key:"update",value:function(o){var s=o.start,u=o.end,d=this.calculate(s,u);this.newStart=s,this.newEnd=u;var f=(this.annotation.borderWidth||2)*this.scale;this.annotationContainer.style.top=d.top+"px",this.annotationContainer.style.left=d.left+"px",this.annotationContainer.style.width=d.width+"px",this.annotationContainer.style.height=d.height+"px",this.svgElement.setAttribute("viewBox","0 0 ".concat(d.width," ").concat(d.height)),this.annotation.type==="square"?(this.shapeElement.setAttribute("width",d.width-f),this.shapeElement.setAttribute("height",d.height-f)):(this.shapeElement.setAttribute("cx",d.width/2),this.shapeElement.setAttribute("cy",d.height/2),this.shapeElement.setAttribute("rx",(d.width-f)/2),this.shapeElement.setAttribute("ry",(d.height-f)/2)),this.outerLine.style.left="".concat(d.left-7,"px"),this.outerLine.style.top="".concat(d.top-7,"px"),this.outerLine.style.width="".concat(d.width+14,"px"),this.outerLine.style.height="".concat(d.height+14,"px");var v=d.left+d.width-30+"px",m=d.top+d.height+8+"px";this.deletetButton.style.left=v,this.deletetButton.style.top=m,this.moveRect.setAttribute("width",d.width+8),this.moveRect.setAttribute("height",d.height+8),this.LeftRect.setAttribute("y",d.height/2+4),this.bottomLeftRect.setAttribute("y",d.height+8),this.bottomRect.setAttribute("x",d.width/2+4),this.bottomRect.setAttribute("y",d.height+8),this.bottomRightRect.setAttribute("x",d.width+8),this.bottomRightRect.setAttribute("y",d.height+8),this.rightRect.setAttribute("x",d.width+8),this.rightRect.setAttribute("y",d.height/2+4),this.topRightRect.setAttribute("x",d.width+8),this.topRect.setAttribute("x",d.width/2+4)}}]),r}(),Ink=function(e){_inherits(r,BaseAnnotation);var n=_createSuper(r);function r(o){var s,u=o.container,d=o.annotation,f=o.page,v=o.viewport,m=o.scale,_=o.eventBus,g=o.layer,y=o.show,w=y!==void 0&&y;return _classCallCheck(this,r),(s=n.call(this,{container:u,annotation:d,page:f,viewport:v,scale:m,eventBus:_,show:w})).layer=g,s.hidden=!0,s.initial=!1,s.outline=null,s.start=null,s.end=null,s.rect=null,s.newStart=null,s.newEnd=null,s.svgElement=null,s.startCircle=null,s.endCircle=null,s.startState=null,s.show=w,s.onMousedown=s.handleMouseDown.bind(_assertThisInitialized(s)),s.onMouseup=s.handleMouseUp.bind(_assertThisInitialized(s)),s.onMousemove=s.handleMouseMove.bind(_assertThisInitialized(s)),s.onDelete=s.handleDelete.bind(_assertThisInitialized(s)),s.onKeydown=s.handleKeydown.bind(_assertThisInitialized(s)),s.inkPath=[],s.render(),s}return _createClass(r,[{key:"formatePoint",value:function(o,s){var u=getActualPoint({x:o,y:s},this.viewport,this.scale);return[u.x,u.y]}},{key:"rectCalc",value:function(o){var s=o.start,u=o.end;return{top:s.y<u.y?s.y:u.y,left:s.x<u.x?s.x:u.x,width:Math.abs(u.x-s.x),height:Math.abs(u.y-s.y)}}},{key:"calculate",value:function(o,s){var u=this.rectCalc({start:o,end:s}),d=this.annotation.borderWidth*this.scale;return{top:u.top-d,left:u.left-d,width:u.width+2*d,height:u.height+2*d}}},{key:"updateTool",value:function(){this.initial&&(this.hidden?(this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLineContainer.remove(),document.removeEventListener("keydown",this.onKeydown)):(this.layer.selectedElementName!==this.annotation.name&&(this.layer.selectedElementName=this.annotation.name),this.container.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),document.addEventListener("keydown",this.onKeydown)))}},{key:"handleClick",value:function(o){this.layer.tool&&o.stopPropagation(),this.hidden&&!this.layer.annotationStore.creating&&(this.hidden=!1,this.updateTool(),onClickOutside([this.svgElement,this.outerLine,this.deletetButton],this.handleOutside.bind(this)))}},{key:"handleOutside",value:function(){this.hidden=!this.hidden,this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLine.removeEventListener("mousedown",this.onMousedown),this.outerLine.removeEventListener("touchstart",this.onMousedown),this.outerLineContainer.remove()}},{key:"handleMouseDown",value:function(o){if(o.button===0||o.type!=="mousedown"){this.ratioRateX=this.rect.height/this.rect.width,this.ratioRateY=this.rect.width/this.rect.height,this.layer.tool&&o.stopPropagation();var s=o.target.getAttribute("data-id"),u=getClickPoint(o),d=u.pageX,f=u.pageY;this.startState={operator:s,clickX:d,clickY:f},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(o){if(o.button===0||o.type!=="mousemove"){o.type==="touchmove"&&(document.body.style.overscrollBehavior="none"),this.moving=!0;var s=getClickPoint(o),u=s.pageX,d=s.pageY,f=this.start,v=this.end,m=this.startState,_=this.viewport,g=_.width,y=_.height;if(m.operator==="nw-resize"){var w=u-(m.clickX-this.start.x),x=d-(m.clickY-this.start.y);if(w=Math.min(v.x-5,w),w=Math.max(0,w),x=Math.min(v.y-5,x),x=Math.max(0,x),(o.shiftKey||o.type==="touchmove")&&this.ratioRateX){var k=(w-this.start.x)*this.ratioRateX;if((x=this.start.y+k)<0||w<0)return}this.update({start:{x:w,y:x},end:v})}else if(m.operator==="w-resize"){var S=u-(m.clickX-this.start.x);S=Math.min(v.x-5,S),S=Math.max(0,S);var E=f.y;if((o.shiftKey||o.type==="touchmove")&&(E=Math.max(y,E),E=Math.min(v.y-5,E),this.ratioRateX)){var T=(S-this.start.x)*this.ratioRateX;if((E=this.start.y+T)>=y||S<0)return}this.update({start:{x:S,y:E},end:v})}else if(m.operator==="sw-resize"){var M=u-(m.clickX-this.start.x),I=d-(m.clickY-this.end.y);if(M=Math.min(v.x-5,M),M=Math.max(0,M),I=Math.min(y,I),I=Math.max(f.y+5,I),(o.shiftKey||o.type==="touchmove")&&this.ratioRateX){var F=(M-this.start.x)*this.ratioRateX;if((I=this.end.y-F)>=y||M<0)return}this.update({start:{x:M,y:f.y},end:{x:v.x,y:I}})}else if(m.operator==="s-resize"){var O=d-(m.clickY-this.end.y);if(O=Math.min(y,O),O=Math.max(f.y+5,O),o.shiftKey||o.type==="touchmove"){if(this.ratioRateX){var N=(O-this.end.y)*this.ratioRateY,D=this.end.x+N;if(D=Math.min(g,D),D=Math.max(f.x+5,D),O>=y||D>=g)return;this.update({start:f,end:{x:D,y:O}})}}else this.update({start:f,end:{x:v.x,y:O}})}else if(m.operator==="se-resize"){var X=u-(m.clickX-this.end.x),U=d-(m.clickY-this.end.y);if(X=Math.min(g,X),X=Math.max(f.x+5,X),U=Math.min(y,U),U=Math.max(f.y+5,U),(o.shiftKey||o.type==="touchmove")&&this.ratioRateX){var Z=(this.end.x-X)*this.ratioRateX;if((U=this.end.y-Z)>=y||X>=g)return}this.update({start:f,end:{x:X,y:U}})}else if(m.operator==="e-resize"){var j=u-(m.clickX-this.end.x);if(j=Math.min(g,j),j=Math.max(f.x+5,j),o.shiftKey||o.type==="touchmove"){if(this.ratioRateX){var Q=d-(m.clickY-this.end.y);Q=Math.min(y,Q),Q=Math.max(f.y+5,Q);var ve=(this.end.x-j)*this.ratioRateX;if((Q=this.end.y-ve)>=y||j>=g)return;this.update({start:f,end:{x:j,y:Q}})}}else this.update({start:f,end:{x:j,y:v.y}})}else if(m.operator==="ne-resize"){var Se=u-(m.clickX-this.end.x),we=d-(m.clickY-this.start.y);if(Se=Math.min(g,Se),Se=Math.max(f.x+5,Se),we=Math.min(v.y-5,we),we=Math.max(0,we),(o.shiftKey||o.type==="touchmove")&&this.ratioRateX){var oe=(this.end.x-Se)*this.ratioRateX;if((we=this.start.y+oe)<=0||Se>=g)return}this.update({start:{x:f.x,y:we},end:{x:Se,y:v.y}})}else if(m.operator==="n-resize"){var ne=d-(m.clickY-this.start.y);if(ne=Math.min(v.y-5,ne),ne=Math.max(0,ne),o.shiftKey||o.type==="touchmove"){if(this.ratioRateX){var q=(ne-this.start.y)*this.ratioRateY,H=this.end.x-q;if(H=Math.min(g,H),H=Math.max(f.x+5,H),ne>=y||H>=g)return;this.update({start:{x:f.x,y:ne},end:{x:H,y:v.y}})}}else this.update({start:{x:f.x,y:ne},end:v})}else if(m.operator==="move"){var Y=u-(m.clickX-this.start.x),le=d-(m.clickY-this.start.y),Ce=u-(m.clickX-this.end.x),Te=d-(m.clickY-this.end.y),ke={width:Math.abs(f.x-v.x),height:Math.abs(f.y-v.y)};Y<Ce?(Y=Math.max(0,Y),Y=Math.min(g-ke.width,Y),Ce=Math.max(ke.width,Ce),Ce=Math.min(g,Ce)):(Ce=Math.max(0,Ce),Ce=Math.min(g-ke.width,Ce),Y=Math.max(ke.width,Y),Y=Math.min(g,Y)),le<Te?(le=Math.max(0,le),le=Math.min(y-ke.height,le),Te=Math.max(ke.height,Te),Te=Math.min(y,Te)):(Te=Math.max(0,Te),Te=Math.min(y-ke.height,Te),le=Math.max(ke.height,le),le=Math.min(y,le)),this.update({start:{x:Y,y:le},end:{x:Ce,y:Te}})}}}},{key:"handleDelete",value:function(o){this.layer.tool&&o&&o.stopPropagation(),this.handleOutside(),this.annotationContainer.remove(),this.annotation.isDelete=!0;var s={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.page}};this.annotation.annotPtr&&(s.annotation.annotPtr=this.annotation.annotPtr),o||(s.type="empty"),this.eventBus.dispatch("annotationChange",s)}},{key:"handleKeydown",value:function(o){}},{key:"handleMouseUp",value:function(o){if(o.button===0||o.type!=="mouseup"){this.layer.tool&&o.stopPropagation(),o.type==="touchend"&&(document.body.style.overscrollBehavior="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.start=this.newStart,this.end=this.newEnd,this.startState=null;for(var s=getInitialPoint(this.start,this.viewport,this.scale),u=getInitialPoint(this.end,this.viewport,this.scale),d={left:s.x,top:s.y,right:u.x,bottom:u.y},f=[],v=0;v<this.inkPath.length;v++){for(var m=[],_=0;_<this.inkPath[v].length;_++)m.push({PointX:this.inkPath[v][_].x/this.scale+s.x,PointY:s.y+this.inkPath[v][_].y/this.scale});f.push(m)}this.eventBus.dispatch("annotationChange",{type:"modify",annotation:{operate:"mod-annot",name:this.annotation.name,pageIndex:this.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,inkPointes:f,rect:d}})}}},{key:"handlePoint",value:function(o){var s=this.rect,u=getInitialPoint({x:o[0]+s.left,y:o[1]+s.top},this.viewport,this.scale);return u.x+","+u.y}},{key:"update",value:function(o){var s=o.start,u=o.end,d=this.calculate(s,u);if(this.startState&&this.startState.operator!=="move")for(var f=d.width/this.rect.width,v=d.height/this.rect.height,m=0;m<this.inkPath.length;m++)for(var _=0;_<this.inkPath[m].length;_++)this.inkPath[m][_].x=f*this.inkPath[m][_].x,this.inkPath[m][_].y=v*this.inkPath[m][_].y;this.rect=d,this.newStart=s,this.newEnd=u;var g=this.annotation,y=this.annotation.borderWidth*this.scale;this.annotationContainer.style.top=d.top-y+"px",this.annotationContainer.style.left=d.left-y+"px",this.annotationContainer.style.width=d.width+2*y+"px",this.annotationContainer.style.height=d.height+2*y+"px",this.svgElement.setAttribute("viewBox","".concat(-y," ").concat(-y," ").concat(d.width+2*y," ").concat(d.height+2*y)),this.svgElement.innerHTML="";for(var w=0;w<this.inkPath.length;w++)if(this.inkPath[w].length>1){for(var x=document.createElementNS("http://www.w3.org/2000/svg","path"),k="M "+this.inkPath[w][0].x.toFixed(2)+" "+this.inkPath[w][0].y.toFixed(2),S=1;S<this.inkPath[w].length;S++)k=k+" L "+this.inkPath[w][S].x.toFixed(2)+" "+this.inkPath[w][S].y.toFixed(2);if(x.setAttribute("d",k),x.setAttribute("stroke",g.borderColor),x.setAttribute("stroke-width",y),x.setAttribute("stroke-opacity",g.opacity||1),x.setAttribute("fill","none"),x.setAttribute("fill-opacity",0),y<5){var E=document.createElementNS("http://www.w3.org/2000/svg","path");E.setAttribute("d",k),E.setAttribute("stroke",g.borderColor),E.setAttribute("stroke-width",y<5?5:y),E.setAttribute("stroke-opacity",0),E.setAttribute("fill","none"),E.setAttribute("fill-opacity",0),x.style.pointerEvents="none",this.svgElement.append(E)}this.svgElement.append(x)}else if(this.inkPath[w].length==1){var T=document.createElementNS("http://www.w3.org/2000/svg","circle");T.setAttribute("cx",this.inkPath[w][0].x.toFixed(2)),T.setAttribute("cy",this.inkPath[w][0].y.toFixed(2)),T.setAttribute("r",y/2),T.setAttribute("fill",g.borderColor),this.svgElement.append(T)}this.outerLine.style.left="".concat(d.left-7,"px"),this.outerLine.style.top="".concat(d.top-7,"px"),this.outerLine.style.width="".concat(d.width+14,"px"),this.outerLine.style.height="".concat(d.height+14,"px");var M=d.left+d.width-30+"px",I=d.top+d.height+8+"px";this.deletetButton.style.left=M,this.deletetButton.style.top=I,this.moveRect.setAttribute("width",d.width+8),this.moveRect.setAttribute("height",d.height+8),this.LeftRect.setAttribute("y",d.height/2+4),this.bottomLeftRect.setAttribute("y",d.height+8),this.bottomRect.setAttribute("x",d.width/2+4),this.bottomRect.setAttribute("y",d.height+8),this.bottomRightRect.setAttribute("x",d.width+8),this.bottomRightRect.setAttribute("y",d.height+8),this.rightRect.setAttribute("x",d.width+8),this.rightRect.setAttribute("y",d.height/2+4),this.topRightRect.setAttribute("x",d.width+8),this.topRect.setAttribute("x",d.width/2+4)}},{key:"render",value:function(){var o=this.annotation,s=o.rect,u=s.left,d=s.top,f=s.right,v=s.bottom;u=parseFloat(u*this.scale),v=parseFloat(v*this.scale),f=parseFloat(f*this.scale);var m={left:u,top:d=parseFloat(d*this.scale),bottom:v,right:f,width:f-u,height:v-d};this.rect=m,this.start={x:m.left,y:m.top},this.end={x:m.right,y:m.bottom},o.borderColor||(o.borderColor="#000000");for(var _=o.inkPointes,g=0;g<_.length;g++){for(var y=_[g],w=[],x=0;x<y.length;x++){var k=y[x],S=this.formatePoint(parseFloat(k.PointX),parseFloat(k.PointY));w.push({x:parseFloat(S[0].toFixed(2))-this.rect.left,y:parseFloat(S[1].toFixed(2))-this.rect.top})}w.length>0&&this.inkPath.push(w)}var E=this.annotation.borderWidth*this.scale,T=document.createElement("div");T.id=o.name,T.className="annotation",T.style.top=m.top-E+"px",T.style.left=m.left-E+"px",T.style.width=m.width+2*E+"px",T.style.height=m.height+2*E+"px",this.annotationContainer=T,this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgElement.setAttribute("viewBox","".concat(-E," ").concat(-E," ").concat(m.width+2*E," ").concat(m.height+2*E)),this.svgElement.addEventListener("mousedown",this.handleClick.bind(this));for(var M=0;M<this.inkPath.length;M++)if(this.inkPath[M].length>1){for(var I=document.createElementNS("http://www.w3.org/2000/svg","path"),F="M "+this.inkPath[M][0].x.toFixed(2)+" "+this.inkPath[M][0].y.toFixed(2),O=1;O<this.inkPath[M].length;O++)F=F+" L "+this.inkPath[M][O].x.toFixed(2)+" "+this.inkPath[M][O].y.toFixed(2);if(I.setAttribute("d",F),I.setAttribute("stroke",o.borderColor),I.setAttribute("stroke-width",E),I.setAttribute("stroke-opacity",o.opacity||1),I.setAttribute("fill","none"),I.setAttribute("fill-opacity",0),E<5){var N=document.createElementNS("http://www.w3.org/2000/svg","path");N.setAttribute("d",F),N.setAttribute("stroke",o.borderColor),N.setAttribute("stroke-width",E<5?5:E),N.setAttribute("stroke-opacity",0),N.setAttribute("fill","none"),N.setAttribute("fill-opacity",0),I.style.pointerEvents="none",this.svgElement.append(N)}this.svgElement.append(I)}else if(this.inkPath[M].length==1){var D=document.createElementNS("http://www.w3.org/2000/svg","circle");D.setAttribute("cx",this.inkPath[M][0].x.toFixed(2)),D.setAttribute("cy",this.inkPath[M][0].y.toFixed(2)),D.setAttribute("r",E/2),D.setAttribute("fill",o.borderColor),this.svgElement.append(D)}this.annotationContainer.append(this.svgElement),this.container.append(this.annotationContainer),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr;var X=m.left+m.width-30+"px",U=m.top+m.height+8+"px";this.deletetButton.style.left=X,this.deletetButton.style.top=U;var Z=document.createElementNS("http://www.w3.org/2000/svg","svg");Z.style.position="absolute",Z.style.zIndex=1,Z.style.left="".concat(m.left-7,"px"),Z.style.top="".concat(m.top-7,"px"),Z.style.width="".concat(m.width+14,"px"),Z.style.height="".concat(m.height+14,"px"),this.outerLine=Z,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#1460F3","stroke-width":1,"fill-opacity":0,width:m.width+8,height:m.height+8,x:3,y:3}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:0}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:m.height/2+4}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:m.height+8}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:m.width/2+4,y:m.height+8}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:m.width+8,y:m.height+8}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:m.width+8,y:m.height/2+4}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:m.width+8,y:0}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:m.width/2+4,y:0}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.initial=!0}}]),r}(),Shape=function(e){_inherits(r,BaseAnnotation);var n=_createSuper(r);function r(o){var s,u=o.container,d=o.annotation,f=d===void 0?null:d,v=o.page,m=o.viewport,_=o.scale,g=o.eventBus,y=o.layer,w=o.show,x=w!==void 0&&w;return _classCallCheck(this,r),(s=n.call(this,{container:u,annotation:f,page:v,viewport:m,scale:_,eventBus:g,show:x})).layer=y,s.hidden=!0,s.initial=!1,s.outline=null,s.leftTop=null,s.rightBottom=null,s.newLeftTop=null,s.newRightBottom=null,s.startCircle=null,s.endCircle=null,s.show=x,s.firstSelect=!1,s.onContainerClick=s.handleContainerClick.bind(_assertThisInitialized(s)),s.onMousedown=s.handleMouseDown.bind(_assertThisInitialized(s)),s.onMousemove=s.handleMouseMove.bind(_assertThisInitialized(s)),s.onMouseup=s.handleMouseUp.bind(_assertThisInitialized(s)),s.onDelete=s.handleDelete.bind(_assertThisInitialized(s)),s.onBlur=s.handleFreetextEditElementBlur.bind(_assertThisInitialized(s)),s.onDbclick=s.handleElementDbClick.bind(_assertThisInitialized(s)),s.render(),s}return _createClass(r,[{key:"setCss",value:function(o,s){if(o&&s)for(var u in s)o.style[u]=s[u]}},{key:"render",value:function(){var o=this.viewport,s=o.width,u=o.height,d=this.annotation,f=this.getActualRect(this.viewport,this.viewport.scale),v=f.leftTop,m=f.rightBottom;this.initialRect={width:Math.abs(v.x-m.x),height:Math.abs(v.y-m.y)},this.leftTop=v,this.rightBottom=m;var _=this.calculate(this.leftTop,this.rightBottom);d.color||(d.color="#000000"),d.bgColor||(d.bgColor="transparent"),d.fontSize||(d.fontSize=16);var g=document.createElement("div");g.className="annotation",this.setCss(g,{top:_.top-2+"px",left:_.left-4+"px"}),this.annotationContainer=g;var y=document.createElement("div");y.setAttribute("role","textbox"),y.setAttribute("contenteditable",!0),y.setAttribute("spellcheck",!1),y.className="freetext";var w=s-this.leftTop.x,x=u-this.leftTop.y,k=d.textAlignment||"left";this.setCss(y,{maxWidth:w+"px",maxHeight:x+"px",fontSize:d.fontSize+"px",color:d.color,textAlign:k,lineHeight:"1.2em",padding:"2px 4px",overflow:"auto",backgroundColor:d.bgColor}),this.freetextEditElement=y;var S=document.createElement("div");if(S.className="freetext",this.setCss(S,{width:_.width+"px",height:_.height+"px",fontSize:"16px",color:d.color,textAlign:k,lineHeight:"1.2em",padding:"2px 4px",overflow:"hidden",backgroundColor:d.bgColor}),d.contents)S.innerHTML=d.contents,y.innerHTML=d.contents;else if(d["contents-richtext"]){var E=new window.DOMParser().parseFromString(d["contents-richtext"],"text/xml");E.getElementsByTagName("parsererror").length>0?(S.innerHTML=d["contents-richtext"],y.innerHTML=d["contents-richtext"]):(S.innerHTML=E.firstElementChild.innerText,y.innerHTML=E.firstElementChild.innerText)}this.freetextElement=S,this.appendOrRemoveFreetextElement("append"),this.container.append(this.annotationContainer),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr;var T=_.left+_.width-30+"px",M=_.top+_.height+12+"px";this.deletetButton.style.left=T,this.deletetButton.style.top=M;var I=createSvg("svg",null,{position:"absolute",zIndex:1,left:"".concat(_.left-12,"px"),top:"".concat(_.top-9,"px"),width:"".concat(_.width+16,"px"),height:"".concat(_.height+15,"px")});this.outerLine=I,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#1460F3","stroke-width":1,"fill-opacity":0,width:_.width+10,height:_.height+9,x:3,y:3}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:0}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:_.height/2+6}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:_.height+9}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:_.width/2+9,y:_.height+9}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:_.width+10,y:_.height+9}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:_.width+10,y:_.height/2+6}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:_.width+10,y:0}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:_.width/2+9,y:0}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.initial=!0,this.firstSelect=!0,this.show&&this.handleElementSelect()}},{key:"handleElementDbClick",value:function(){this.freetextEditElement&&(this.outerLine.removeEventListener("mousedown",this.onMousedown),this.outerLine.removeEventListener("touchstart",this.onMousedown),this.outerLine.removeEventListener("dblclick",this.onDbclick),this.outerLineContainer.remove(),this.appendOrRemoveFreetextElement("remove"),this.appendOrRemoveFreetextEditElement("append"))}},{key:"getFreetextRectPoint",value:function(){var o=this.freetextEditElement.getBoundingClientRect(),s=o.width,u=o.height,d=this.leftTop;this.rightBottom={x:d.x+s,y:d.y+u}}},{key:"getFreetextRect",value:function(){var o=this.viewport,s=this.viewport.scale;this.getFreetextRectPoint();var u=getInitialPoint(this.leftTop,o,s),d=getInitialPoint(this.rightBottom,o,s);return{left:u.x,top:u.y,right:d.x,bottom:d.y}}},{key:"handleFreetextEditElementBlur",value:function(){var o=this.freetextEditElement;if(o&&o.innerText!==this.annotation.contents){var s=this.getFreetextRect(),u=this.annotation,d=getHtmlToText(o);this.eventBus.dispatch("annotationChange",{type:"modify",annotation:{operate:"mod-annot",name:u.name,pageIndex:this.page,pagePtr:u.pagePtr,annotPtr:u.annotPtr,contents:d,rect:s}}),this.update({leftTop:this.leftTop,rightBottom:this.rightBottom}),this.annotation.contents=d,this.freetextElement.innerText=d}this.appendOrRemoveFreetextEditElement("remove"),this.appendOrRemoveFreetextElement("append")}},{key:"appendOrRemoveFreetextElement",value:function(o){var s=this.freetextElement;o==="append"?(s.addEventListener("click",this.onContainerClick),this.annotationContainer.append(s)):(s.removeEventListener("click",this.onContainerClick),s.remove())}},{key:"appendOrRemoveFreetextEditElement",value:function(o){var s=this.freetextEditElement;o==="append"?(s.addEventListener("blur",this.onBlur),this.annotationContainer.append(s),s.focus(),keepLastIndex(s)):(s.removeEventListener("blur",this.onBlur),s.remove())}},{key:"handleElementSelect",value:function(){this.show=!1,this.hidden=!1,this.firstSelect||this.updateTool(),onClickOutside([this.freetextElement,this.outerLine,this.deletetButton],this.handleOutside.bind(this)),this.firstSelect=!1}},{key:"getActualRect",value:function(o,s){var u=this.annotation.rect,d=u.left,f=u.top,v=u.right,m=u.bottom,_=getActualPoint({x:d,y:f},o),g=getActualPoint({x:v,y:m},o);return{leftTop:{x:Math.min(_.x,g.x),y:Math.min(_.y,g.y)},rightBottom:{x:Math.max(_.x,g.x),y:Math.max(_.y,g.y)}}}},{key:"rectCalc",value:function(o){var s=o.leftTop,u=o.rightBottom;return{top:s.y<u.y?s.y:u.y,left:s.x<u.x?s.x:u.x,width:Math.abs(u.x-s.x),height:Math.abs(u.y-s.y)}}},{key:"calculate",value:function(o,s){var u=this.rectCalc({leftTop:o,rightBottom:s});return{top:u.top,left:u.left,width:u.width,height:u.height}}},{key:"getInitialPoint",value:function(){var o=this.leftTop.x,s=this.leftTop.y,u=this.rightBottom.x,d=this.rightBottom.y,f=this.viewport.scale;return{leftTop:{x:o/f,y:s/f},rightBottom:{x:u/f,y:d/f}}}},{key:"updateTool",value:function(){this.initial&&(this.hidden?(this.outerLineContainer.remove(),this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null)):(this.layer.selectedElementName!==this.annotation.name&&(this.layer.selectedElementName=this.annotation.name),this.container.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("dblclick",this.onDbclick),this.outerLine.addEventListener("touchstart",this.onMousedown)))}},{key:"handleContainerClick",value:function(o){this.hidden&&!this.layer.annotationStore.creating&&(this.hidden=!1,this.updateTool(),onClickOutside([this.outerLine,this.freetextElement,this.deletetButton],this.handleOutside.bind(this)))}},{key:"handleOutside",value:function(){this.hidden=!this.hidden,this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLine.removeEventListener("mousedown",this.onMousedown),this.outerLine.removeEventListener("touchstart",this.onMousedown),this.outerLine.removeEventListener("dblclick",this.onDbclick),this.outerLineContainer.remove(),this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null)}},{key:"handleMouseDown",value:function(o){if(o.button===0||o.type!=="mousedown"){this.layer.tool&&o.stopPropagation();var s=o.target.getAttribute("data-id"),u=getClickPoint(o),d=u.pageX,f=u.pageY;this.startState={operator:s,clickX:d,clickY:f},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(o){if(o.button===0||o.type!=="mousemove"){o.type==="touchmove"&&(document.body.style.overscrollBehavior="none"),this.moving=!0;var s=getClickPoint(o),u=s.pageX,d=s.pageY,f=this.leftTop,v=this.rightBottom,m=this.startState,_=this.viewport,g=_.width,y=_.height,w=10,x=10;if(m.operator==="nw-resize"){var k=u-(m.clickX-f.x),S=d-(m.clickY-f.y);k=Math.min(v.x-w,k),k=Math.max(0,k),S=Math.min(v.y-x,S),S=Math.max(0,S),this.update({leftTop:{x:k,y:S},rightBottom:v})}else if(m.operator==="w-resize"){var E=u-(m.clickX-f.x);E=Math.min(v.x-w,E),E=Math.max(0,E),this.update({leftTop:{x:E,y:f.y},rightBottom:v})}else if(m.operator==="sw-resize"){var T=u-(m.clickX-f.x),M=d-(m.clickY-v.y);T=Math.min(v.x-w,T),T=Math.max(0,T),M=Math.min(y,M),M=Math.max(f.y+x,M),this.update({leftTop:{x:T,y:f.y},rightBottom:{x:v.x,y:M}})}else if(m.operator==="s-resize"){var I=d-(m.clickY-v.y);I=Math.min(y,I),I=Math.max(f.y+x,I),this.update({leftTop:f,rightBottom:{x:v.x,y:I}})}else if(m.operator==="se-resize"){var F=u-(m.clickX-v.x),O=d-(m.clickY-v.y);F=Math.min(g,F),F=Math.max(f.x+w,F),O=Math.min(y,O),O=Math.max(f.y+x,O),this.update({leftTop:f,rightBottom:{x:F,y:O}})}else if(m.operator==="e-resize"){var N=u-(m.clickX-v.x);N=Math.min(g,N),N=Math.max(f.x+w,N),this.update({leftTop:f,rightBottom:{x:N,y:v.y}})}else if(m.operator==="ne-resize"){var D=u-(m.clickX-v.x),X=d-(m.clickY-f.y);D=Math.min(g,D),D=Math.max(f.x+w,D),X=Math.min(v.y-x,X),X=Math.max(0,X),this.update({leftTop:{x:f.x,y:X},rightBottom:{x:D,y:v.y}})}else if(m.operator==="n-resize"){var U=d-(m.clickY-f.y);U=Math.min(v.y-x,U),U=Math.max(0,U),this.update({leftTop:{x:f.x,y:U},rightBottom:v})}else if(m.operator==="move"){var Z=u-(m.clickX-f.x),j=d-(m.clickY-f.y),Q=u-(m.clickX-v.x),ve=d-(m.clickY-v.y),Se={width:Math.abs(Z-Q),height:Math.abs(ve-j)};Z<Q?(Z=Math.max(0,Z),Z=Math.min(g-Se.width,Z),Q=Math.max(Se.width,Q),Q=Math.min(g,Q)):(Q=Math.max(0,Q),Q=Math.min(g-Se.width,Q),Z=Math.max(Se.width,Z),Z=Math.min(g,Z)),ve<j?(ve=Math.max(0,ve),ve=Math.min(y-Se.height,ve),j=Math.max(Se.height,j),j=Math.min(y,j)):(j=Math.max(0,j),j=Math.min(y-Se.height,j),ve=Math.max(Se.height,ve),ve=Math.min(y,ve)),this.update({leftTop:{x:Z,y:j},rightBottom:{x:Q,y:ve}})}}}},{key:"handleMouseUp",value:function(o){if(o.button===0||o.type!=="mouseup"){this.layer.tool&&o.stopPropagation(),o.type==="touchend"&&(document.body.style.overscrollBehavior="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup);var s=getClickPoint(o),u=s.pageX,d=s.pageY;if(u!==this.startState.clickX||d!==this.startState.clickY){this.leftTop=this.newStart,this.rightBottom=this.newEnd;var f=this.annotation,v=this.getInitialPoint(),m=v.leftTop,_=v.rightBottom,g={left:m.x,top:m.y,right:_.x,bottom:_.y};f.rect=g,this.eventBus.dispatch("annotationChange",{type:"modify",annotation:{operate:"mod-annot",name:f.name,pageIndex:this.page,pagePtr:f.pagePtr,annotPtr:f.annotPtr,rect:g}})}}}},{key:"update",value:function(o){var s=o.leftTop,u=o.rightBottom,d=this.viewport,f=d.width,v=d.height,m=this.calculate(s,u);this.newStart=s,this.newEnd=u,this.setCss(this.annotationContainer,{top:m.top-2+"px",left:m.left-4+"px"});var _=f-s.x,g=v-s.y;this.setCss(this.freetextEditElement,{maxWidth:_+"px",maxHeight:g+"px"}),this.setCss(this.freetextElement,{width:m.width+"px",height:m.height+"px"}),this.setCss(this.outerLine,{left:"".concat(m.left-12,"px"),top:"".concat(m.top-9,"px"),width:"".concat(m.width+24,"px"),height:"".concat(m.height+15,"px")});var y=m.left+m.width-30+"px",w=m.top+m.height+8+"px";this.setCss(this.deletetButton,{left:y,top:w}),this.moveRect.setAttribute("width",m.width+10),this.moveRect.setAttribute("height",m.height+9),this.LeftRect.setAttribute("y",m.height/2+6),this.bottomLeftRect.setAttribute("y",m.height+9),this.bottomRect.setAttribute("x",m.width/2+9),this.bottomRect.setAttribute("y",m.height+9),this.bottomRightRect.setAttribute("x",m.width+10),this.bottomRightRect.setAttribute("y",m.height+9),this.rightRect.setAttribute("x",m.width+10),this.rightRect.setAttribute("y",m.height/2+6),this.topRightRect.setAttribute("x",m.width+10),this.topRect.setAttribute("x",m.width/2+9)}},{key:"handleDelete",value:function(o){this.layer.tool&&o&&o.stopPropagation(),this.handleOutside(),this.annotationContainer.remove(),this.annotation.isDelete=!0;var s={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.page}};this.annotation.annotPtr&&(s.annotation.annotPtr=this.annotation.annotPtr),o||(s.type="empty"),this.eventBus.dispatch("annotationChange",s)}}]),r}(),Text$1=function(e){_inherits(r,BaseAnnotation);var n=_createSuper(r);function r(o){var s,u=o.container,d=o.annotation,f=o.page,v=o.viewport,m=o.scale,_=o.eventBus,g=o.layer,y=o.show,w=y!==void 0&&y;return _classCallCheck(this,r),(s=n.call(this,{container:u,annotation:d,page:f,viewport:v,scale:m,eventBus:_,show:w})).textNoteStr=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M2.39961 3.60004H21.5996V18H11.9996L5.99961 21.6V18H2.39961V3.60004Z" fill="currentColor"/>
      <rect x="5.99902" y="7.20001" width="7.2" height="1.8" fill="white"/>
      <rect x="5.99902" y="11.4" width="12" height="1.8" fill="white"/>
    </svg>`,s.deleteSvgStr='<path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M14 1.5V4.5H19V5.5H16.5V18.5H3.5V5.5H1V4.5H6V1.5H14ZM4.5 5.5V17.5H15.5V5.5H4.5ZM13 2.5V4.5H7V2.5H13ZM8.5 8V15H7.5V8H8.5ZM12.5 15V8H11.5V15H12.5Z" fill="#333333"/>',s.layer=g,s.hidden=!0,s.initial=!1,s.outline=null,s.rect=null,s.start=null,s.end=null,s.newStart=null,s.newEnd=null,s.show=w,s.popShow=!1,s.onClick=s.handleClick.bind(_assertThisInitialized(s)),s.onBlur=s.handleBlur.bind(_assertThisInitialized(s)),s.onDelete=s.handleDelete.bind(_assertThisInitialized(s)),s.onMousedown=s.handleMouseDown.bind(_assertThisInitialized(s)),s.onMousemove=s.handleMouseMove.bind(_assertThisInitialized(s)),s.onMouseup=s.handleMouseUp.bind(_assertThisInitialized(s)),s.handleStopPropagation=s.handlestopPropagation.bind(_assertThisInitialized(s)),s.render(),s}return _createClass(r,[{key:"render",value:function(){this.renderTextElement(),this.renderTextEditor(),this.container.append(this.annotationContainer)}},{key:"handleDelete",value:function(o){this.layer.tool&&o&&o.stopPropagation(),this.textEditorContainer.removeEventListener("click",this.handleStopPropagation),this.annotationContainer.remove(),this.textEditorContainer.remove(),this.annotation.isDelete=!0;var s={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.page}};this.annotation.annotPtr&&(s.annotation.annotPtr=this.annotation.annotPtr),o||(s.type="empty"),this.eventBus.dispatch("annotationChange",s)}},{key:"handlestopPropagation",value:function(o){o.stopPropagation()}},{key:"handleBlur",value:function(){var o=this.annotation,s=getHtmlToText(this.textEditorElement);s!==o.contents&&(this.eventBus.dispatch("annotationChange",{type:"modify",annotation:{operate:"mod-annot",name:o.name,pageIndex:this.page,pagePtr:o.pagePtr,annotPtr:o.annotPtr,contents:s}}),o.contents=s),this.textEditorContainer.removeEventListener("click",this.handleStopPropagation),this.textEditorContainer.remove()}},{key:"handleMouseDown",value:function(o){if((o.button===0||o.type!=="mousedown")&&!this.layer.addMode){this.layer.tool&&o.stopPropagation(),this.moving=!1;var s=getClickPoint(o),u=s.pageX,d=s.pageY;this.startState={clickX:u,clickY:d},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(o){if(o.button===0||o.type!=="mousemove"){o.type==="touchmove"&&(document.body.style.overscrollBehavior="none");var s=getClickPoint(o),u=s.pageX,d=s.pageY;if(u!==this.startState.clickX||d!==this.startState.clickY){this.moving=!0;var f=this.start,v=this.end,m=this.startState,_=this.viewport,g=_.width,y=_.height,w=u-(m.clickX-this.start.x),x=d-(m.clickY-this.start.y),k=u-(m.clickX-this.end.x),S=d-(m.clickY-this.end.y),E={width:Math.abs(f.x-v.x),height:Math.abs(f.y-v.y)};w<k?(w=Math.max(0,w),w=Math.min(g-E.width,w),k=Math.max(E.width,k),k=Math.min(g,k)):(k=Math.max(0,k),k=Math.min(g-E.width,k),w=Math.max(E.width,w),w=Math.min(g,w)),x<S?(x=Math.max(0,x),x=Math.min(y-E.height,x),S=Math.max(E.height,S),S=Math.min(y,S)):(S=Math.max(0,S),S=Math.min(y-E.height,S),x=Math.max(E.height,x),x=Math.min(y,x)),this.update({start:{x:w,y:x},end:{x:k,y:S}})}}}},{key:"handleMouseUp",value:function(o){if(o.button===0||o.type!=="mouseup"){this.layer.tool&&o.stopPropagation(),o.type==="touchend"&&(document.body.style.overscrollBehavior="auto"),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup);var s=getClickPoint(o),u=s.pageX,d=s.pageY;if(u!==this.startState.clickX||d!==this.startState.clickY){this.start=this.newStart,this.end=this.newEnd;var f=this.annotation,v=getInitialPoint(this.start,this.viewport,this.viewport.scale),m=getInitialPoint(this.end,this.viewport,this.viewport.scale),_={left:v.x,top:v.y,right:m.x,bottom:m.y};this.eventBus.dispatch("annotationChange",{type:"modify",annotation:{operate:"mod-annot",name:f.name,pageIndex:this.page,pagePtr:f.pagePtr,annotPtr:f.annotPtr,rect:_}})}}}},{key:"update",value:function(o){var s=o.start,u=o.end,d=this.rectCalc({start:s,end:u});this.newStart=s,this.newEnd=u,this.annotationContainer.style.top=d.top+"px",this.annotationContainer.style.left=d.left+"px",this.textEditorContainer.style.top=d.top+28+"px",this.textEditorContainer.style.left=d.left+16+"px"}},{key:"rectCalc",value:function(o){var s=o.start,u=o.end;return{top:s.y<u.y?s.y:u.y,left:s.x<u.x?s.x:u.x,width:Math.abs(u.x-s.x),height:Math.abs(u.y-s.y)}}},{key:"getActualRect",value:function(o,s){var u=this.annotation.rect,d=u.left,f=u.top,v=u.right,m=u.bottom;return{start:getActualPoint({x:d,y:f},o),end:getActualPoint({x:v,y:m},o)}}},{key:"handleClickOutside",value:function(o){o!==this.annotationContainer&&this.popShow&&(this.popShow=!1,this.annotationContainer.style.zIndex=6,this.handleBlur())}},{key:"setCss",value:function(o,s){if(o&&s)for(var u in s)o.style[u]=s[u]}},{key:"handleClick",value:function(o){this.layer.addMode||this.layer.annotationStore.creating||(this.layer.tool&&o.stopPropagation(),this.moving||(this.eventBus.dispatch("closeTextEditor",o.target.closest(".annotation.text")),this.popShow||(this.popShow=!0,this.layer.pageDiv.append(this.textEditorContainer),this.textEditorContainer.addEventListener("click",this.handleStopPropagation),this.textEditorElement.focus(),keepLastIndex(this.textEditorElement),onClickOutside([this.annotationContainer,this.textEditorContainer],this.handleClickOutside.bind(this)))))}},{key:"updateTool",value:function(){this.popShow?(this.layer.selectedElementName!==this.annotation.name&&(this.layer.selectedElementName=this.annotation.name),this.container.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown)):(this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLineContainer.remove())}},{key:"renderTextElement",value:function(){var o=this.getActualRect(this.viewport,this.viewport.scale),s=o.start,u=o.end;this.start=s,this.end=u;var d=this.annotation;d.color||(d.color="#FF0000");var f=this.rectCalc({start:s,end:u});this.rect=f;var v=document.createElement("div");v.id=d.name,v.className="annotation text",this.setCss(v,{position:"absolute",left:f.left+"px",top:f.top+"px",width:"24px",height:"24px",zIndex:6,color:d.color,opacity:d.opacity||1}),v.innerHTML=this.textNoteStr,v.addEventListener("click",this.onClick),v.addEventListener("mousedown",this.onMousedown),this.annotationContainer=v}},{key:"renderTextEditor",value:function(){var o=document.createElement("div");this.textEditorContainer=o,this.setCss(o,{position:"absolute",left:this.rect.left+16+"px",top:this.rect.top+28+"px",zIndex:6,color:this.annotation.color,border:"2px solid",borderColor:this.annotation.color,outline:"none",padding:"0 8px 28px",borderRadius:"4px",background:"#FFFFFF"});var s=document.createElement("div");s.className="text-title",s.innerText=this.layer.annotationStore.$t("header.note"),o.append(s);var u=document.createElement("div");if(u.setAttribute("role","textbox"),u.setAttribute("contenteditable",!0),u.setAttribute("spellcheck",!1),this.setCss(u,{width:"290px",height:"110px",fontSize:"16px",color:"#000",lineHeight:"1.2em",outline:"none",overflow:"auto",whiteSpace:"pre-wrap",textAlign:"left"}),u.className="text-editor",this.annotation.contents)u.innerHTML=this.annotation.contents;else if(this.annotation["contents-richtext"]){var d=new window.DOMParser().parseFromString(this.annotation["contents-richtext"],"text/xml");d.getElementsByTagName("parsererror").length>0?u.innerHTML=this.annotation["contents-richtext"]:u.innerHTML=d.firstElementChild.innerText}this.textEditorElement=u,o.append(u);var f=createSvg("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",class:"delete-button"},{width:"20px",height:"20px",position:"absolute",right:"10px",bottom:"10px"});f.innerHTML=this.deleteSvgStr,this.deletetButton=f,o.append(f),this.deletetButton.addEventListener("click",this.onDelete),this.eventBus._on("closeTextEditor",this.handleClickOutside.bind(this))}}]),r}(),Stamp=function(e){_inherits(o,BaseAnnotation);var n,r=_createSuper(o);function o(s){var u,d=s.container,f=s.annotation,v=s.messageHandler,m=s.page,_=s.viewport,g=s.scale,y=s.eventBus,w=s.layer,x=s.show,k=x!==void 0&&x;return _classCallCheck(this,o),(u=r.call(this,{container:d,annotation:f,page:m,viewport:_,scale:g,eventBus:y,show:k})).layer=w,u.hidden=!0,u.initial=!1,u.outline=null,u.messageHandler=v,u.start=null,u.end=null,u.newStart=null,u.newEnd=null,u.startCircle=null,u.endCircle=null,u.show=k,u.onMousedown=u.handleMouseDown.bind(_assertThisInitialized(u)),u.onMouseup=u.handleMouseUp.bind(_assertThisInitialized(u)),u.onMousemove=u.handleMouseMove.bind(_assertThisInitialized(u)),u.onDelete=u.handleDelete.bind(_assertThisInitialized(u)),u.render(),u}return _createClass(o,[{key:"render",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function s(){var u,d,f,v,m,_,g,y,w,x,k,S,E,T,M,I,F,O,N,D,X,U;return _regeneratorRuntime().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(this.annotation.rect){Z.next=16;break}return Z.next=3,this.messageHandler.sendWithPromise("GetAnnotRect",{pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr});case 3:return u=Z.sent,d=this.viewport.viewBox[2],f=this.viewport.viewBox[3],v=u.right-u.left,m=u.bottom-u.top,_={left:(d-v)/2,top:(f-m)/2,right:(d+v)/2,bottom:(f+m)/2},Z.next=15,this.messageHandler.sendWithPromise("SetAnnotRect",{pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rect:_});case 15:this.annotation.rect=_;case 16:if(g=this.annotation,y=this.getActualRect(this.viewport,this.scale),w=y.start,x=y.end,this.start=w,this.end=x,k=this.calculate(w,x),this.ratioRate=k.height/k.width,(S=document.createElement("div")).id=g.name,S.className="annotation",S.style.top=k.top+"px",S.style.left=k.left+"px",S.style.width=k.width+"px",S.style.height=k.height+"px",S.style.fontSize="0",E=null,(E=document.createElement("img")).style.width="100%",E.style.height="100%",T="",!g.image){Z.next=39;break}T=g.image,Z.next=55;break;case 39:if(g.stampType!=="standard"&&g.stampType!=="image"&&g.stampType!=="text"){Z.next=55;break}return M={width:parseInt(k.width+1),height:parseInt(k.height+1)},Z.next=43,this.messageHandler.sendWithPromise("GetRenderAnnot",{annotPtr:this.annotation.annotPtr,annotation:this.annotation,scale:this.scale});case 43:I=Z.sent,(F=document.createElement("canvas")).style.width=M.width+"px",F.style.height=M.height+"px",F.width=M.width,F.height=M.height,(O=F.getContext("2d")).clearRect(0,0,F.width,F.height),(N=O.createImageData(M.width,M.height)).data.set(I),O.putImageData(N,0,0),T=F.toDataURL("image/png",1);case 55:E.src=T,this.imgEle=E,S.append(this.imgEle),this.imgEle.addEventListener("mousedown",this.handleClick.bind(this)),this.annotationContainer=S,this.container.append(this.annotationContainer),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,D=k.left+k.width-30+"px",X=k.top+k.height+8+"px",this.deletetButton.style.left=D,this.deletetButton.style.top=X,(U=document.createElementNS("http://www.w3.org/2000/svg","svg")).style.position="absolute",U.style.zIndex=1,U.style.left="".concat(k.left-7,"px"),U.style.top="".concat(k.top-7,"px"),U.style.width="".concat(k.width+14,"px"),U.style.height="".concat(k.height+14,"px"),this.outerLine=U,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#1460F3","stroke-width":1,"fill-opacity":0,width:k.width+8,height:k.height+8,x:3,y:3}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:0}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:k.height+8}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:k.width+8,y:k.height+8}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:k.width+8,y:0}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.topRightRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.initial=!0,this.eventBus.dispatch("imageChange"),this.layer.annotationStore.creating=!1;case 93:case"end":return Z.stop()}},s,this)})),function(){return n.apply(this,arguments)})},{key:"getActualRect",value:function(s,u){var d=this.annotation.rect,f=d.left,v=d.top,m=d.right,_=d.bottom;return{start:getActualPoint({x:f,y:v},s),end:getActualPoint({x:m,y:_},s)}}},{key:"rectCalc",value:function(s){var u=s.start,d=s.end;return{top:u.y<d.y?u.y:d.y,left:u.x<d.x?u.x:d.x,width:Math.abs(d.x-u.x),height:Math.abs(d.y-u.y)}}},{key:"calculate",value:function(s,u){var d=this.rectCalc({start:s,end:u});return{top:d.top,left:d.left,width:d.width,height:d.height}}},{key:"getInitialPoint",value:function(){var s=this.scale,u=this.start.x,d=this.start.y,f=this.end.x,v=this.end.y,m=this.viewport;return m.width,m.height,m.rotation,{start:{x:u/s,y:d/s},end:{x:f/s,y:v/s}}}},{key:"updateTool",value:function(){this.initial&&(this.hidden?(this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLineContainer.remove()):(this.layer.selectedElementName!==this.annotation.name&&(this.layer.selectedElementName=this.annotation.name),this.container.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown)))}},{key:"handleClick",value:function(s){this.layer.tool&&s.preventDefault(),this.hidden&&!this.layer.annotationStore.creating&&(this.hidden=!1,this.updateTool(),onClickOutside([this.annotationContainer,this.outerLine,this.deletetButton],this.handleOutside.bind(this)))}},{key:"handleOutside",value:function(){this.hidden=!this.hidden,this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLine.removeEventListener("mousedown",this.onMousedown),this.outerLine.removeEventListener("touchstart",this.onMousedown),this.outerLineContainer.remove()}},{key:"handleMouseDown",value:function(s){if(s.button===0||s.type!=="mousedown"){this.layer.tool&&s.stopPropagation(),s.type==="touchstart"&&(document.body.style.overscrollBehavior="none",document.body.style.userSelect="none",document.getElementById("app").style.touchAction="none",document.querySelector(".document-container").style.overflow="hidden");var u=s.target.getAttribute("data-id"),d=getClickPoint(s),f=d.pageX,v=d.pageY;this.startState={operator:u,clickX:f,clickY:v},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(s){if(s.button===0||s.type!=="mousemove"){this.layer.tool&&s.stopPropagation(),this.moving=!0;var u=getClickPoint(s),d=u.pageX,f=u.pageY,v=this.start,m=this.end,_=this.startState,g=this.viewport,y=g.width,w=g.height;if(_.operator==="nw-resize"){var x=d-(_.clickX-this.start.x),k=f-(_.clickY-this.start.y);if(x=Math.min(m.x-5,x),x=Math.max(0,x),k=Math.min(m.y-5,k),k=Math.max(0,k),this.ratioRate){var S=(x-this.start.x)*this.ratioRate;if((k=this.start.y+S)<0||x<0)return}this.update({start:{x,y:k},end:m})}else if(_.operator==="sw-resize"){var E=d-(_.clickX-this.start.x),T=f-(_.clickY-this.end.y);if(E=Math.min(m.x-5,E),E=Math.max(0,E),T=Math.min(w,T),T=Math.max(v.y+5,T),this.ratioRate){var M=(E-this.start.x)*this.ratioRate;if((T=this.end.y-M)>=w||E<0)return}this.update({start:{x:E,y:v.y},end:{x:m.x,y:T}})}else if(_.operator==="se-resize"){var I=d-(_.clickX-this.end.x),F=f-(_.clickY-this.end.y);if(I=Math.min(y,I),I=Math.max(v.x+5,I),F=Math.min(w,F),F=Math.max(v.y+5,F),this.ratioRate){var O=(this.end.x-I)*this.ratioRate;if((F=this.end.y-O)>=w||I>=y)return}this.update({start:v,end:{x:I,y:F}})}else if(_.operator==="ne-resize"){var N=d-(_.clickX-this.end.x),D=f-(_.clickY-this.start.y);if(N=Math.min(y,N),N=Math.max(v.x+5,N),D=Math.min(m.y-5,D),D=Math.max(0,D),this.ratioRate){var X=(this.end.x-N)*this.ratioRate;if((D=this.start.y+X)<=0||N>=y)return}this.update({start:{x:v.x,y:D},end:{x:N,y:m.y}})}else if(_.operator==="move"){var U=d-(_.clickX-this.start.x),Z=f-(_.clickY-this.start.y),j=d-(_.clickX-this.end.x),Q=f-(_.clickY-this.end.y),ve={width:Math.abs(v.x-m.x),height:Math.abs(v.y-m.y)};U<j?(U=Math.max(0,U),U=Math.min(y-ve.width,U),j=Math.max(ve.width,j),j=Math.min(y,j)):(j=Math.max(0,j),j=Math.min(y-ve.width,j),U=Math.max(ve.width,U),U=Math.min(y,U)),Z<Q?(Z=Math.max(0,Z),Z=Math.min(w-ve.height,Z),Q=Math.max(ve.height,Q),Q=Math.min(w,Q)):(Q=Math.max(0,Q),Q=Math.min(w-ve.height,Q),Z=Math.max(ve.height,Z),Z=Math.min(w,Z)),this.update({start:{x:U,y:Z},end:{x:j,y:Q}})}}}},{key:"handleDelete",value:function(s){this.layer.tool&&s&&s.stopPropagation(),this.handleOutside(),this.annotationContainer.remove(),this.annotation.isDelete=!0;var u={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.page}};this.annotation.annotPtr&&(u.annotation.annotPtr=this.annotation.annotPtr),s||(u.type="empty"),this.eventBus.dispatch("annotationChange",u)}},{key:"handleMouseUp",value:function(s){if(s.button===0||s.type!=="mouseup"){this.layer.tool&&s.stopPropagation(),s.type==="touchend"&&(document.body.style.overscrollBehavior="auto",document.body.style.userSelect="auto",document.getElementById("app").style.touchAction="auto",document.querySelector(".document-container").style.overflow="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup);var u=getClickPoint(s),d=u.pageX,f=u.pageY;if(d!==this.startState.clickX||f!==this.startState.clickY){this.start=this.newStart,this.end=this.newEnd;var v=this.annotation,m=this.getInitialPoint(),_=m.start,g=m.end,y={left:_.x,top:_.y,right:g.x,bottom:g.y};this.eventBus.dispatch("annotationChange",{type:"modify",annotation:{operate:"mod-annot",name:v.name,pageIndex:this.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rect:y}})}}}},{key:"update",value:function(s){var u=s.start,d=s.end,f=this.calculate(u,d);this.newStart=u,this.newEnd=d,this.annotationContainer.style.top=f.top+"px",this.annotationContainer.style.left=f.left+"px",this.annotationContainer.style.width=f.width+"px",this.annotationContainer.style.height=f.height+"px",this.imgEle.style.width=f.width+"px",this.imgEle.style.height=f.height+"px",this.outerLine.style.left="".concat(f.left-7,"px"),this.outerLine.style.top="".concat(f.top-7,"px"),this.outerLine.style.width="".concat(f.width+14,"px"),this.outerLine.style.height="".concat(f.height+14,"px");var v=f.left+f.width-30+"px",m=f.top+f.height+8+"px";this.deletetButton.style.left=v,this.deletetButton.style.top=m,this.moveRect.setAttribute("width",f.width+8),this.moveRect.setAttribute("height",f.height+8),this.bottomLeftRect.setAttribute("y",f.height+8),this.bottomRightRect.setAttribute("x",f.width+8),this.bottomRightRect.setAttribute("y",f.height+8),this.topRightRect.setAttribute("x",f.width+8)}}]),o}(),Freetext=function(){function e(n){var r=n.tool,o=n.color,s=n.svgElement,u=n.layer,d=n.container,f=n.viewport,v=n.page,m=n.eventBus;_classCallCheck(this,e),this.layer=u,this._tool=r,this.color=o,this.svgElement=s,this.container=d,this.viewport=f,this.page=v,this.eventBus=m,this.freetextElement=null,this.start=null,this.end=null,this.onClick=this.handleClick.bind(this),this.onBlur=this.handleBlur.bind(this),this.init()}return _createClass(e,[{key:"tool",get:function(){return this._tool},set:function(n){n!==this._tool&&(n||this.reset(),this._tool=n)}},{key:"reset",value:function(){var n=this.freetextElement;this.svgElement.style.cursor="default",this.container.removeEventListener("click",this.onClick),n&&this.handleFreetext(),this.start=null,this.end=null}},{key:"init",value:function(){this.container.removeEventListener("click",this.onClick),this.container.addEventListener("click",this.onClick),this.svgElement.style.cursor="crosshair"}},{key:"getFreetextRectPoint",value:function(){var n=this.start,r=this.end;return{start:{x:n.x,y:r.y},end:{x:r.x,y:n.y}}}},{key:"getFreetextRect",value:function(){var n=this.viewport,r=this.viewport.scale,o=this.getFreetextRectPoint(),s=getInitialPoint(o.start,n,r),u=getInitialPoint(o.end,n,r);return{left:s.x,top:s.y,right:u.x,bottom:u.y}}},{key:"handleFreetext",value:function(){var n=this.freetextElement;if(n.innerText){var r=n.getBoundingClientRect();this.end={x:this.start.x+r.width,y:this.start.y+r.height};var o=this.getFreetextRect(),s=getHtmlToText(n),u={operate:"add-annot",type:"freetext",pageIndex:this.page,date:new Date,color:"#000000",fontSize:16,fillTransparency:1,fontName:"Helvetica",opacity:1,textAlignment:"left",contents:s,rect:o};this.eventBus.dispatch("annotationChange",{type:"add",show:!0,annotation:u})}n.removeEventListener("blur",this.onBlur),n.remove(),this.freetextElement=null}},{key:"handleBlur",value:function(){this.handleFreetext()}},{key:"handleClick",value:function(n){if(!this.layer.selectedElementName){var r=this.freetextElement;r&&n.target===r||r||this.layer.selectedElementName||this.renderFreetext(n)}}},{key:"setCss",value:function(n,r){if(n&&r)for(var o in r)n.style[o]=r[o]}},{key:"renderFreetext",value:function(n){var r=getAbsoluteCoordinate(this.container,n);if(this.start=r,!this.freetextElement){var o=this.viewport,s=o.width,u=o.height,d=s-this.start.x,f=u-this.start.y,v=document.createElement("div");v.setAttribute("role","textbox"),v.setAttribute("contenteditable",!0),v.setAttribute("spellcheck",!1),this.setCss(v,{position:"absolute",left:r.x-4+"px",top:r.y-2+"px",maxWidth:d+"px",maxHeight:f+"px",minWidth:"20px",fontSize:"16px",textAlign:"left",whiteSpace:"pre-wrap",color:"#000",lineHeight:"1.2em",padding:"2px 4px",border:"1px solid #1460F3",overflow:"auto"}),v.className="freetext",v.addEventListener("blur",this.onBlur),this.freetextElement=v,this.container.append(v),v.focus()}}}]),e}();function $(e,n,r){return e*(arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(o){return o})(.5-n*(.5-r))}function se(e){return[-e[0],-e[1]]}function l(e,n){return[e[0]+n[0],e[1]+n[1]]}function a(e,n){return[e[0]-n[0],e[1]-n[1]]}function b(e,n){return[e[0]*n,e[1]*n]}function he(e,n){return[e[0]/n,e[1]/n]}function R(e){return[e[1],-e[0]]}function B(e,n){return e[0]*n[0]+e[1]*n[1]}function ue(e,n){return e[0]===n[0]&&e[1]===n[1]}function ge(e){return Math.hypot(e[0],e[1])}function de(e){return e[0]*e[0]+e[1]*e[1]}function A(e,n){return de(a(e,n))}function G(e){return he(e,ge(e))}function ie(e,n){return Math.hypot(e[1]-n[1],e[0]-n[0])}function L(e,n,r){var o=Math.sin(r),s=Math.cos(r),u=e[0]-n[0],d=e[1]-n[1],f=u*o+d*s;return[u*s-d*o+n[0],f+n[1]]}function K(e,n,r){return l(e,b(a(n,e),r))}function ee(e,n,r){return l(e,b(n,r))}var C=Math.min,xe=Math.PI,pe=.275,V=xe+1e-4;function ce(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.size,o=r===void 0?16:r,s=n.smoothing,u=s===void 0?.5:s,d=n.thinning,f=d===void 0?.5:d,v=n.simulatePressure,m=v===void 0||v,_=n.easing,g=_===void 0?function(Qe){return Qe}:_,y=n.start,w=y===void 0?{}:y,x=n.end,k=x===void 0?{}:x,S=n.last,E=S!==void 0&&S,T=w.cap,M=T===void 0||T,I=w.easing,F=I===void 0?function(Qe){return Qe*(2-Qe)}:I,O=k.cap,N=O===void 0||O,D=k.easing,X=D===void 0?function(Qe){return--Qe*Qe*Qe+1}:D;if(e.length===0||o<=0)return[];for(var U,Z=e[e.length-1].runningLength,j=w.taper===!1?0:w.taper===!0?Math.max(o,Z):w.taper,Q=k.taper===!1?0:k.taper===!0?Math.max(o,Z):k.taper,ve=Math.pow(o*u,2),Se=[],we=[],oe=e.slice(0,10).reduce(function(Qe,tt){var nt=tt.pressure;if(m){var it=C(1,tt.distance/o),lt=C(1,1-it);nt=C(1,Qe+it*pe*(lt-Qe))}return(Qe+nt)/2},e[0].pressure),ne=$(o,f,e[e.length-1].pressure,g),q=e[0].vector,H=e[0].point,Y=H,le=H,Ce=Y,Te=!1,ke=0;ke<e.length;ke++){var Ee=e[ke].pressure,Pe=e[ke],Be=Pe.point,$e=Pe.vector,Oe=Pe.distance,Ne=Pe.runningLength;if(!(ke<e.length-1&&Z-Ne<3)){if(f){if(m){var J=C(1,Oe/o),fe=C(1,1-J);Ee=C(1,oe+J*pe*(fe-oe))}ne=$(o,f,Ee,g)}else ne=o/2;U===void 0&&(U=ne);var re=Ne<j?F(Ne/j):1,_e=Z-Ne<Q?X((Z-Ne)/Q):1;ne=Math.max(.01,ne*Math.min(re,_e));var be=(ke<e.length-1?e[ke+1]:e[ke]).vector,Ae=ke<e.length-1?B($e,be):1,Le=Ae!==null&&Ae<0;if(B($e,q)<0&&!Te||Le){for(var Ve=b(R(q),ne),Fe=0;Fe<=1;Fe+=.07692307692307693)le=L(a(Be,Ve),Be,V*Fe),Se.push(le),Ce=L(l(Be,Ve),Be,V*-Fe),we.push(Ce);H=le,Y=Ce,Le&&(Te=!0)}else if(Te=!1,ke!==e.length-1){var De=b(R(K(be,$e,Ae)),ne);le=a(Be,De),(ke<=1||A(H,le)>ve)&&(Se.push(le),H=le),Ce=l(Be,De),(ke<=1||A(Y,Ce)>ve)&&(we.push(Ce),Y=Ce),oe=Ee,q=$e}else{var We=b(R($e),ne);Se.push(a(Be,We)),we.push(l(Be,We))}}}var Re=e[0].point.slice(0,2),He=e.length>1?e[e.length-1].point.slice(0,2):l(e[0].point,[1,1]),Ze=[],Xe=[];if(e.length===1){if(!j&&!Q||E){for(var at=ee(Re,G(R(a(Re,He))),-(U||ne)),ut=[],ct=1/13,mt=ct;mt<=1;mt+=ct)ut.push(L(at,Re,2*V*mt));return ut}}else{if(!(j||Q&&e.length===1))if(M)for(var pt=1/13,kt=pt;kt<=1;kt+=pt){var Ct=L(we[0],Re,V*kt);Ze.push(Ct)}else{var ht=a(Se[0],we[0]),Pt=b(ht,.5),Ue=b(ht,.51);Ze.push(a(Re,Pt),a(Re,Ue),l(Re,Ue),l(Re,Pt))}var qe=R(se(e[e.length-1].vector));if(Q||j&&e.length===1)Xe.push(He);else if(N)for(var Ye=ee(He,qe,ne),st=1/29,ot=st;ot<1;ot+=st)Xe.push(L(Ye,He,3*V*ot));else Xe.push(l(He,b(qe,ne)),l(He,b(qe,.99*ne)),a(He,b(qe,.99*ne)),a(He,b(qe,ne)))}return Se.concat(Xe,we.reverse(),Ze)}function me(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.streamline,s=o===void 0?.5:o,u=r.size,d=u===void 0?16:u,f=r.last,v=f!==void 0&&f;if(e.length===0)return[];var m=.15+.85*(1-s),_=Array.isArray(e[0])?e:e.map(function(F){var O=F.x,N=F.y,D=F.pressure;return[O,N,D===void 0?.5:D]});if(_.length===2){var g=_[1];_=_.slice(0,-1);for(var y=1;y<5;y++)_.push(K(_[0],g,y/4))}_.length===1&&(_=[].concat(_toConsumableArray$1(_),[[].concat(_toConsumableArray$1(l(_[0],[1,1])),_toConsumableArray$1(_[0].slice(2)))]));for(var w=[{point:[_[0][0],_[0][1]],pressure:_[0][2]>=0?_[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],x=!1,k=0,S=w[0],E=_.length-1,T=1;T<_.length;T++){var M=v&&T===E?_[T].slice(0,2):K(S.point,_[T],m);if(!ue(S.point,M)){var I=ie(M,S.point);if(k+=I,T<E&&!x){if(k<d)continue;x=!0}S={point:M,pressure:_[T][2]>=0?_[T][2]:.5,vector:G(a(S.point,M)),distance:I,runningLength:k},w.push(S)}}return w[0].vector=((n=w[1])==null?void 0:n.vector)||[0,0],w}function ae(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ce(me(e,n),n)}var PaintShape=function(){function e(n){var r=n.tool,o=n.color,s=n.svgElement,u=n.layer,d=n.container,f=n.viewport,v=n.page,m=n.eventBus;_classCallCheck(this,e),this.layer=u,this._tool=r,this.color=o,this.svgElement=s,this.container=d,this.viewport=f,this.page=v,this.eventBus=m,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.init()}return _createClass(e,[{key:"init",value:function(){this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown),this.container.addEventListener("mousedown",this.onMousedown),this.container.addEventListener("touchstart",this.onMousedown),this.svgElement.style.cursor="crosshair",this.container.style.touchAction="none",document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"tool",get:function(){return this._tool},set:function(n){n!==this._tool&&(n||this.reset(),this._tool=n)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.svgElement.innerHTML="",this.svgElement.style.cursor="default",this.container.style.touchAction="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown)}},{key:"checkSvgChild",value:function(n){switch(n){case"square":return"rect";case"circle":return"ellipse";case"ink":return"path";default:return"line"}}},{key:"handleMouseDown",value:function(n){if(!this.layer.selectedElementName){var r=getAbsoluteCoordinate(this.container,n),o=r.x,s=r.y;this.initStartPoint={x:o,y:s},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var n=this.initStartPoint,r=this.initEndPoint;if(r&&n.x!==r.x&&n.y!==r.y){var o=getInitialPoint(n,this.viewport,this.viewport.scale),s=getInitialPoint(r,this.viewport,this.viewport.scale),u=Math.min(o.x,s.x),d=Math.min(o.y,s.y),f=Math.max(o.x,s.x),v=Math.max(o.y,s.y),m={left:u,top:d,right:f,bottom:v},_=this.color,g={operate:"add-annot",arrow:this.tool==="arrow",type:this.tool==="arrow"?"line":this.tool,pageIndex:this.page,date:new Date,borderWidth:2,opacity:.8,borderColor:_,rect:m};if(g.type=="line"){var y=[o.x,o.y,s.x,s.y];g.linePoints=y,g.rect={left:u-6,top:d-6,right:f+6,bottom:v+6},this.tool==="arrow"&&(g.tail="OpenArrow",g.arrow=!0)}else if(this.tool==="ink"){var w=this.formatPath(),x=w.inkPointes,k=w.rect;g.rect=k,g.inkPointes=x}else{var S=[u,v,f,d];g.linePoints=S}this.eventBus.dispatch("annotationChange",{type:"add",annotation:g})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(n){var r=getAbsoluteCoordinate(this.container,n),o=r.x,s=r.y,u=this.viewport,d=u.width,f=u.height,v=this.viewport.scale;if(o=Math.min(d,o),o=Math.max(0,o),s=Math.min(f,s),s=Math.max(0,s),this.initEndPoint={x:o,y:s},this.initStartPoint.x===this.initEndPoint.x&&(this.initEndPoint.x=this.initEndPoint.x+1),this.initStartPoint.y===this.initEndPoint.y&&(this.initEndPoint.y=this.initEndPoint.y+1),this.shapeEle){if(n.shiftKey&&(this.tool==="circle"||this.tool==="square")){var m=this.initStartPoint,_=this.initEndPoint,g=Math.abs(_.x-m.x),y=Math.abs(_.y-m.y),w=Math.min(g,y);m.x<_.x?_.x=m.x+w:_.x=m.x-w,m.y<_.y?_.y=m.y+w:_.y=m.y-w}var x=this.calculate(this.initStartPoint,this.initEndPoint),k=this.shapeEle;if(this.tool==="circle")k.setAttribute("cx",x.left+x.width/2),k.setAttribute("cy",x.top+x.height/2),k.setAttribute("rx",(x.width-1)/2),k.setAttribute("ry",(x.height-1)/2);else if(this.tool==="square")k.setAttribute("x",x.left+.5),k.setAttribute("y",x.top-.5),k.setAttribute("width","".concat(Math.abs(x.width-1),"px")),k.setAttribute("height","".concat(Math.abs(x.height-1),"px"));else if(this.tool==="line"||this.tool==="arrow"){if(k.setAttribute("x1",this.initStartPoint.x),k.setAttribute("y1",this.initStartPoint.y),k.setAttribute("x2",this.initEndPoint.x),k.setAttribute("y2",this.initEndPoint.y),this.tool==="arrow"){var S=this.svgElement.querySelector("[tail]");if(S){var E=12*v,T=new ArrowHelper(this.initStartPoint,this.initEndPoint).getEndArrowPoints(30,E),M="";T.forEach(function(D){M.length>0&&(M+=" "),M+="".concat(D.x,",").concat(D.y)}),M.length>0&&S.setAttribute("points",M)}}}else if(this.tool==="ink"){this.path.push([o,s]);var I=this.getFreeDrawSvgPath();k.setAttribute("d",I)}}else{var F=createSvg(this.checkSvgChild(this.tool),{fill:"none",stroke:this.color,"stroke-width":2*v,"stroke-opacity":.8});if(this.tool==="arrow"){var O=12*v,N=new ArrowHelper(this.initStartPoint,this.initEndPoint).getEndArrow(30,O,!1);N&&(this.tail="OpenArrow",N.setAttribute("tail",""),N.setAttribute("stroke",this.color),N.setAttribute("stroke-width",2*v),N.setAttribute("fill","none"),N.setAttribute("stroke-opacity",.8),this.svgElement.append(N))}this.shapeEle=F,this.svgElement.append(this.shapeEle)}}},{key:"getFreeDrawSvgPath",value:function(){var n={simulatePressure:!1,size:1,thinning:0,smoothing:.3,streamline:.5,easing:function(r){return Math.sin(r*Math.PI/2)},last:!1};return getSvgPathFromStroke(ae(this.path,n))}},{key:"handlePoint",value:function(n){var r=getInitialPoint({x:n[0],y:n[1]},this.viewport,this.viewport.scale);return{x:r.x,y:r.y}}},{key:"getRect",value:function(){var n=[],r=[];this.path.forEach(function(f){n.push(f[0]),r.push(f[1])});var o=Math.min.apply(Math,r),s=Math.min.apply(Math,n),u=Math.max.apply(Math,r),d=Math.max.apply(Math,n);return this.path=this.path.map(function(f){return[f[0]-s,f[1]-o]}),{left:s,top:o,bottom:u,right:d,width:d-s,height:u-o}}},{key:"formatPath",value:function(){for(var n=[],r=this.path.length,o=[],s=[],u=[],d=0;d<r;d++){var f=this.handlePoint(this.path[d]);o.push(f.x),s.push(f.y),n.push({PointX:f.x.toFixed(2),PointY:f.y.toFixed(2)})}return u.push(n),{inkPointes:u,rect:{left:Math.min.apply(Math,o),bottom:Math.max.apply(Math,s),right:Math.max.apply(Math,o),top:Math.min.apply(Math,s)}}}},{key:"rectCalc",value:function(n){var r=n.start,o=n.end;return{top:r.y<o.y?r.y:o.y,left:r.x<o.x?r.x:o.x,width:Math.abs(o.x-r.x),height:Math.abs(o.y-r.y)}}},{key:"calculate",value:function(n,r){var o=this.rectCalc({start:n,end:r}),s=1*this.viewport.scale;return{top:o.top-s,left:o.left-s,width:o.width+2*s,height:o.height+2*s}}}]),e}(),Text=function(){function e(n){var r=n.tool,o=n.svgElement,s=n.layer,u=n.container,d=n.viewport,f=n.page,v=n.eventBus;_classCallCheck(this,e),this.textNoteStr=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M2.39961 3.60004H21.5996V18H11.9996L5.99961 21.6V18H2.39961V3.60004Z" fill="currentColor"/>
      <rect x="5.99902" y="7.20001" width="7.2" height="1.8" fill="white"/>
      <rect x="5.99902" y="11.4" width="12" height="1.8" fill="white"/>
    </svg>`,this.deleteSvgStr=`<path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M14 1.5V4.5H19V5.5H16.5V18.5H3.5V5.5H1V4.5H6V1.5H14ZM4.5 5.5V17.5H15.5V5.5H4.5ZM13 2.5V4.5H7V2.5H13ZM8.5 8V15H7.5V8H8.5ZM12.5 15V8H11.5V15H12.5Z" fill="#333333"/>
    `,this.layer=s,this._tool=r,this.color="#FF0000",this.svgElement=o,this.container=u,this.viewport=d,this.page=f,this.eventBus=v,this.freetextElement=null,this.start=null,this.end=null,this.onClick=this.handleClick.bind(this),this.onBlur=this.handleBlur.bind(this),this.init()}return _createClass(e,[{key:"tool",get:function(){return this._tool},set:function(n){n!==this._tool&&(n||this.reset(),this._tool=n)}},{key:"reset",value:function(){this.start=null,this.end=null,this.svgElement.style.cursor="default",this.container.removeEventListener("click",this.onClick);var n=this.textElement,r=this.textEditorElement;r&&(r.remove(),r.removeEventListener("blur",this.onBlur),this.textEditorElement=null),n&&(n.remove(),this.textElement=null)}},{key:"init",value:function(){this.container.removeEventListener("click",this.onClick),this.container.addEventListener("click",this.onClick),this.svgElement.style.cursor="crosshair"}},{key:"getTextRect",value:function(){var n=this.viewport,r=this.viewport.scale,o=getInitialPoint(this.start,n,r),s=getInitialPoint(this.end,n,r);return{left:o.x,top:o.y,right:s.x,bottom:s.y}}},{key:"handleText",value:function(){var n=this.textEditorElement;if(n.innerText){this.end={x:this.start.x+24,y:this.start.y-24};var r=this.getTextRect(),o=this.color,s=getHtmlToText(n),u={operate:"add-annot",type:"text",pageIndex:this.page,date:new Date,color:o,opacity:1,contents:s,rect:r};this.eventBus.dispatch("annotationChange",{type:"add",annotation:u})}this.layer.addMode=!1,n.remove(),n.removeEventListener("blur",this.onBlur),this.textElement.remove(),this.textElement=null,this.textEditorElement=null}},{key:"handleBlur",value:function(n){this.textEditorElement&&this.handleText(n)}},{key:"handleClick",value:function(n){this.textElement||this.layer.selectedElementName||(this.layer.addMode=!0,this.renderTextElement(n),this.container.append(this.textElement),this.textEditorElement.focus())}},{key:"setTextEditor",value:function(){var n=document.createElement("div");this.textElementContainer=n,this.setCss(n,{position:"absolute",left:"16px",top:"28px",border:"2px solid #FF0000",outline:"none",padding:"0 8px 28px",borderRadius:"4px",background:"#FFFFFF",whiteSpace:"pre-wrap",textAlign:"left"});var r=document.createElement("div");r.className="text-title",r.innerText=this.layer.annotationStore.$t("header.note"),n.append(r);var o=document.createElement("div");o.setAttribute("role","textbox"),o.setAttribute("contenteditable",!0),o.setAttribute("spellcheck",!1),this.setCss(o,{width:"290px",height:"110px",fontSize:"16px",color:"#000",lineHeight:"1.2em",outline:"none",overflow:"auto"}),o.className="text-editor",this.textEditorElement=o,n.append(o),onClickOutside([this.textElementContainer,this.textElement],this.onBlur.bind(this))}},{key:"setCss",value:function(n,r){if(n&&r)for(var o in r)n.style[o]=r[o]}},{key:"renderTextElement",value:function(n){var r=getAbsoluteCoordinate(this.container,n);this.start={x:r.x-12,y:r.y+12};var o=document.createElement("div");this.setCss(o,{position:"absolute",left:r.x-12+"px",top:r.y-12+"px",zIndex:6,color:"#FF0000"}),this.eventBus.dispatch("textAdd",{left:r.x-12,top:r.y-12}),o.innerHTML=this.textNoteStr,o.className="text",this.textElement=o,this.setTextEditor(r),this.textElement.append(this.textElementContainer)}}]),e}(),TextField=function(e){_inherits(r,BaseAnnotation);var n=_createSuper(r);function r(o){var s,u=o.container,d=o.annotation,f=o.page,v=o.viewport,m=o.scale,_=o.eventBus,g=o.layer,y=o.show,w=y!==void 0&&y;return _classCallCheck(this,r),(s=n.call(this,{container:u,annotation:d,page:f,viewport:v,scale:m,eventBus:_,show:w})).layer=g,s.hidden=!0,s.initial=!1,s.outline=null,s.start=null,s.end=null,s.newStart=null,s.newEnd=null,s.startCircle=null,s.endCircle=null,s.show=w,s.onMousedown=s.handleMouseDown.bind(_assertThisInitialized(s)),s.onMouseup=s.handleMouseUp.bind(_assertThisInitialized(s)),s.onMousemove=s.handleMouseMove.bind(_assertThisInitialized(s)),s.onDelete=s.handleDelete.bind(_assertThisInitialized(s)),s.onBlur=s.handleBlur.bind(_assertThisInitialized(s)),s.handlePropertyPanel=s.handlePropertyPanel.bind(_assertThisInitialized(s)),s.setProperty=s.setProperty.bind(_assertThisInitialized(s)),s.render(),s}return _createClass(r,[{key:"render",value:function(){this.eventBus._on("setProperty",this.setProperty);var o=this.annotation;o.contents||(o.contents=""),o.backgroundColor||(o.backgroundColor="transparent"),o.textAlignment||(o.textAlignment="left"),o.isBold&&o.isItalic?o.fontStyle="boldItalic":o.isBold?o.fontStyle="bold":o.isItalic?o.fontStyle="italic":o.fontStyle="normal";var s=this.getActualRect(this.viewport,this.scale),u=s.start,d=s.end;this.start=u,this.end=d;var f,v=this.calculate(u,d),m=document.createElement("div");m.id=o.name,m.className="annotation",m.style.top=v.top+"px",m.style.left=v.left+"px",m.style.width=v.width+"px",m.style.height=v.height+"px",this.annotationContainer=m,this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),f=createElement("div",{left:0,top:0,width:"".concat(Math.abs(v.width),"px"),height:"".concat(Math.abs(v.height),"px"),backgroundColor:o.backgroundColor,position:"relative"}),this.shapeElement=f,this.annotationContainer.append(this.shapeElement),this.container.append(this.annotationContainer),this.setMultiLine(o.isMultiLine),this.shapeElement.append(this.textContainer),this.textContainer.addEventListener("blur",this.onBlur),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr;var _=v.left+v.width-30+"px",g=v.top+v.height+8+"px";this.deletetButton.style.left=_,this.deletetButton.style.top=g;var y=document.createElementNS("http://www.w3.org/2000/svg","svg");y.style.position="absolute",y.style.zIndex=1,y.style.left="".concat(v.left-4,"px"),y.style.top="".concat(v.top-4,"px"),y.style.width="".concat(v.width+8,"px"),y.style.height="".concat(v.height+8,"px"),this.outerLine=y,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:v.width,height:v.height,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:v.height/2+1}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:v.height+1}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width/2+1,y:v.height+1}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width+1,y:v.height+1}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width+1,y:v.height/2+1}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width+1,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width/2+1,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.initial=!0,this.layer.toolMode!=="form"&&(o.isHidden==1?(this.annotationContainer.style.display="none",this.annotationContainer.style.pointerEvents="none"):o.isHidden==0&&(this.annotationContainer.style.display="block",this.annotationContainer.style.pointerEvents="auto")),o.backgroundColor==="transparent"&&(this.annotationContainer.style.backgroundColor="#DDE9FF")}},{key:"getActualRect",value:function(o,s){var u=this.annotation.rect,d=u.left,f=u.top,v=u.right,m=u.bottom;return{start:getActualPoint({x:d,y:f},o),end:getActualPoint({x:v,y:m},o)}}},{key:"rectCalc",value:function(o){var s=o.start,u=o.end;return{top:s.y<u.y?s.y:u.y,left:s.x<u.x?s.x:u.x,width:Math.abs(u.x-s.x),height:Math.abs(u.y-s.y)}}},{key:"calculate",value:function(o,s){var u=this.rectCalc({start:o,end:s}),d=(this.annotation.borderWidth||1)*this.scale;return{top:u.top-d,left:u.left-d,width:u.width+2*d,height:u.height+2*d}}},{key:"getInitialPoint",value:function(){var o,s,u,d,f=this.scale,v=this.start.x,m=this.start.y,_=this.end.x,g=this.end.y,y=this.viewport,w=y.width,x=y.height,k=y.rotation;return k===0?(o=v/f,s=m/f,u=_/f,d=g/f):k===90?(o=m/f,s=v/f,u=g/f,d=_/f):k===180?(o=(w-v)/f,s=m/f,u=(w-_)/f,d=g/f):(o=(x-m)/f,s=(w-v)/f,u=(x-g)/f,d=(w-_)/f),{start:{x:o,y:s},end:{x:u,y:d}}}},{key:"updateTool",value:function(){this.initial&&(this.hidden?(this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove()):(this.layer.annotationStore.selectedElementName!==this.annotation.name&&(this.layer.annotationStore.selectedElementName=this.annotation.name),this.container.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.eventBus.dispatch("propertyChange",this.annotation)))}},{key:"handleClick",value:function(){var o=this;if(this.hidden&&!document.fullscreenElement&&!this.layer.annotationStore.creating)if(this.layer.toolMode==="form"){this.hidden=!1,this.updateTool(),document.getElementsByClassName("right-panel")[0].className.indexOf("closed")!==-1&&document.getElementById("propertyPanelButton").click();var s=[this.annotationContainer,this.outerLine,this.deletetButton,document.getElementById("propertyPanelButton"),document.getElementsByClassName("right-panel")[0]];this.eventBus._on("textfieldPropertyPanelChanged",this.handlePropertyPanel),onClickOutsideUp(s,this.handleOutside.bind(this)),this.textContainer.style.pointerEvents="none",this.textContainer.style.cursor="pointer"}else setTimeout(function(){o.textContainer.focus()},0),this.textContainer.style.pointerEvents="auto",this.textContainer.style.cursor="text"}},{key:"handleOutside",value:function(){this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||(document.getElementById("propertyPanelButton").click(),this.eventBus.dispatch("propertyChange",null),this.layer.selectedElementName=null),this.hidden=!this.hidden,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLine.removeEventListener("mousedown",this.onMousedown),this.outerLine.removeEventListener("touchstart",this.onMousedown),this.outerLineContainer.remove(),this.eventBus._off("textfieldPropertyPanelChanged",this.handlePropertyPanel)}},{key:"handleBlur",value:function(){this.annotation.contents!==this.textContainer.value&&(this.annotation.contents=this.textContainer.value,this.eventBus.dispatch("annotationChange",{type:"modify",annotation:{type:"textfield",operate:"mod-form",name:this.annotation.name,pageIndex:this.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,contents:this.annotation.contents}})),this.textContainer.style.pointerEvents="none",this.textContainer.style.cursor="pointer"}},{key:"handleMouseDown",value:function(o){this.layer.tool&&o.stopPropagation();var s=o.target.getAttribute("data-id"),u=getClickPoint(o),d=u.pageX,f=u.pageY;this.startState={operator:s,clickX:d,clickY:f},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup),this.handleClick()}},{key:"handleMouseMove",value:function(o){o.type==="touchmove"&&(document.body.style.overscrollBehavior="none"),this.moving=!0;var s=getClickPoint(o),u=s.pageX,d=s.pageY,f=this.start,v=this.end,m=this.startState,_=this.viewport,g=_.width,y=_.height;if(m.operator==="nw-resize"){var w=u-(m.clickX-this.start.x),x=d-(m.clickY-this.start.y);w=Math.min(v.x-5,w),w=Math.max(0,w),x=Math.min(v.y-5,x),x=Math.max(0,x),this.update({start:{x:w,y:x},end:v})}else if(m.operator==="w-resize"){var k=u-(m.clickX-this.start.x);k=Math.min(v.x-5,k),k=Math.max(0,k),this.update({start:{x:k,y:f.y},end:v})}else if(m.operator==="sw-resize"){var S=u-(m.clickX-this.start.x),E=d-(m.clickY-this.end.y);S=Math.min(v.x-5,S),S=Math.max(0,S),E=Math.min(y,E),E=Math.max(f.y+5,E),this.update({start:{x:S,y:f.y},end:{x:v.x,y:E}})}else if(m.operator==="s-resize"){var T=d-(m.clickY-this.end.y);T=Math.min(y,T),T=Math.max(f.y+5,T),this.update({start:f,end:{x:v.x,y:T}})}else if(m.operator==="se-resize"){var M=u-(m.clickX-this.end.x),I=d-(m.clickY-this.end.y);M=Math.min(g,M),M=Math.max(f.x+5,M),I=Math.min(y,I),I=Math.max(f.y+5,I),this.update({start:f,end:{x:M,y:I}})}else if(m.operator==="e-resize"){var F=u-(m.clickX-this.end.x);F=Math.min(g,F),F=Math.max(f.x+5,F),this.update({start:f,end:{x:F,y:v.y}})}else if(m.operator==="ne-resize"){var O=u-(m.clickX-this.end.x),N=d-(m.clickY-this.start.y);O=Math.min(g,O),O=Math.max(f.x+5,O),N=Math.min(v.y-5,N),N=Math.max(0,N),this.update({start:{x:f.x,y:N},end:{x:O,y:v.y}})}else if(m.operator==="n-resize"){var D=d-(m.clickY-this.start.y);D=Math.min(v.y-5,D),D=Math.max(0,D),this.update({start:{x:f.x,y:D},end:v})}else if(m.operator==="move"){var X=u-(m.clickX-this.start.x),U=d-(m.clickY-this.start.y),Z=u-(m.clickX-this.end.x),j=d-(m.clickY-this.end.y),Q={width:Math.abs(f.x-v.x),height:Math.abs(f.y-v.y)};X<Z?(X=Math.max(0,X),X=Math.min(g-Q.width,X),Z=Math.max(Q.width,Z),Z=Math.min(g,Z)):(Z=Math.max(0,Z),Z=Math.min(g-Q.width,Z),X=Math.max(Q.width,X),X=Math.min(g,X)),U<j?(U=Math.max(0,U),U=Math.min(y-Q.height,U),j=Math.max(Q.height,j),j=Math.min(y,j)):(j=Math.max(0,j),j=Math.min(y-Q.height,j),U=Math.max(Q.height,U),U=Math.min(y,U)),this.update({start:{x:X,y:U},end:{x:Z,y:j}})}}},{key:"handleDelete",value:function(o){this.layer.tool&&o&&o.stopPropagation(),this.handleOutside(),this.annotationContainer.remove(),this.annotation.isDelete=!0;var s={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.page}};this.annotation.annotPtr&&(s.annotation.annotPtr=this.annotation.annotPtr),o||(s.type="empty"),this.eventBus.dispatch("annotationChange",s)}},{key:"handleMouseUp",value:function(o){this.layer.tool&&o.stopPropagation(),o.type==="touchend"&&(document.body.style.overscrollBehavior="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup);var s=getClickPoint(o),u=s.pageX,d=s.pageY;if(u!==this.startState.clickX||d!==this.startState.clickY){this.start=this.newStart,this.end=this.newEnd;var f=this.annotation,v=this.getInitialPoint(),m=v.start,_=v.end,g={left:m.x,top:m.y,right:_.x,bottom:_.y};this.eventBus.dispatch("annotationChange",{type:"modify",annotation:{operate:"mod-form",name:f.name,pageIndex:this.page,pagePtr:f.pagePtr,annotPtr:f.annotPtr,rect:g}})}}},{key:"update",value:function(o){var s=o.start,u=o.end,d=this.calculate(s,u);this.newStart=s,this.newEnd=u,this.annotationContainer.style.top=d.top+"px",this.annotationContainer.style.left=d.left+"px",this.annotationContainer.style.width=d.width+"px",this.annotationContainer.style.height=d.height+"px",this.annotationContainer.style.width="".concat(d.width,"px"),this.annotationContainer.style.height="".concat(d.height,"px"),this.shapeElement.style.width="".concat(d.width,"px"),this.shapeElement.style.height="".concat(d.height,"px"),this.outerLine.style.left="".concat(d.left-4,"px"),this.outerLine.style.top="".concat(d.top-4,"px"),this.outerLine.style.width="".concat(d.width+8,"px"),this.outerLine.style.height="".concat(d.height+8,"px");var f=d.left+d.width-30+"px",v=d.top+d.height+8+"px";this.deletetButton.style.left=f,this.deletetButton.style.top=v,this.moveRect.setAttribute("width",d.width),this.moveRect.setAttribute("height",d.height),this.LeftRect.setAttribute("y",d.height/2+1),this.bottomLeftRect.setAttribute("y",d.height+1),this.bottomRect.setAttribute("x",d.width/2+1),this.bottomRect.setAttribute("y",d.height+1),this.bottomRightRect.setAttribute("x",d.width+1),this.bottomRightRect.setAttribute("y",d.height+1),this.rightRect.setAttribute("x",d.width+1),this.rightRect.setAttribute("y",d.height/2+1),this.topRightRect.setAttribute("x",d.width+1),this.topRect.setAttribute("x",d.width/2+1)}},{key:"handlePropertyPanel",value:function(o){if(this.layer.annotationStore.selectedElementName===this.annotation.name){var s=this.annotation,u=0;for(var d in o)for(var f in this.annotation)if(f===d&&this.annotation[f]!==o[d]){if(o.contents!==""&&(this.annotation[f]=o[d],u++),d==="backgroundColor"&&(this.shapeElement.style[d]=o[d],this.textContainer.style[d]=o[d]),d==="textAlignment"&&(this.textContainer.style.textAlign=o[d]),d==="fontSize"&&(this.textContainer.style.fontSize=o[d]+"px"),d==="color"&&(this.textContainer.style.color=o[d]),d==="fontName"&&(this.textContainer.style.fontFamily=o[d]),d==="fontStyle"){var v=o[d];v==="boldItalic"?(this.textContainer.style.fontStyle="italic",this.textContainer.style.fontWeight="bold",s.isBold=!0,s.isItalic=!0):v==="bold"?(this.textContainer.style.fontStyle="normal",this.textContainer.style.fontWeight="bold",s.isBold=!0,s.isItalic=!1):v==="italic"?(this.textContainer.style.fontStyle="italic",this.textContainer.style.fontWeight="normal",s.isBold=!1,s.isItalic=!0):(s.isItalic=!1,s.isBold=!1,this.textContainer.style.fontStyle="normal",this.textContainer.style.fontWeight="normal")}d==="contents"&&(this.textContainer.nodeName==="INPUT"?this.textContainer.value=o[d]:this.textContainer.innerHTML=this.annotation.contents),d==="isMultiLine"&&this.changeElementMultiLine(o[d])}if(u>0){var m={operate:"mod-form",name:this.annotation.name,pageIndex:this.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr},_=["fontSize","fontName","color","fontStyle"].some(function(x){return o[x]});if(_){m.fontSize=s.fontSize,m.color=s.color;var g={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},y=s.fontName;s.isBold&&s.isItalic?m.fontName=g[y].boldItalic:s.isBold?m.fontName=g[y].bold:s.isItalic?m.fontName=g[y].italic:m.fontName=g[y].normal}var w=Object.assign({},m,o);this.eventBus.dispatch("annotationChange",{type:"modify",annotation:w})}}}},{key:"changeElementMultiLine",value:function(o){this.textContainer.remove(),this.textContainer=null,this.setMultiLine(o),this.shapeElement.append(this.textContainer),this.textContainer.removeEventListener("blur",this.onBlur),this.textContainer.addEventListener("blur",this.onBlur)}},{key:"setMultiLine",value:function(o){var s=null;o?(s=createElement("textarea",{position:"absolute",left:0,top:0,width:"100%",height:"100%",outline:"none",border:"none",color:this.annotation.color,backgroundColor:this.annotation.backgroundColor,pointerEvents:"none",cursor:"pointer",resize:"none",overflowWrap:"break-word",textAlign:this.annotation.textAlignment,fontSize:this.annotation.fontSize+"px",fontWeight:this.annotation.isBold?"bold":"normal",fontStyle:this.annotation.isItalic?"italic":"normal",fontFamily:this.annotation.fontName})).innerHTML=this.annotation.contents:s=createElement("input",{position:"absolute",left:0,top:0,width:"100%",height:"100%",outline:"none",border:"none",color:this.annotation.color,backgroundColor:this.annotation.backgroundColor,pointerEvents:"none",cursor:"pointer",textAlign:this.annotation.textAlignment,fontSize:this.annotation.fontSize+"px",fontWeight:this.annotation.isBold?"bold":"normal",fontStyle:this.annotation.isItalic?"italic":"normal",fontFamily:this.annotation.fontName},{value:this.annotation.contents}),this.textContainer=s;var u=this.annotation.fontStyle;u==="boldItalic"?(this.textContainer.style.fontStyle="italic",this.textContainer.style.fontWeight="bold"):u==="bold"?(this.textContainer.style.fontStyle="normal",this.textContainer.style.fontWeight="bold"):u==="italic"?(this.textContainer.style.fontStyle="italic",this.textContainer.style.fontWeight="normal"):(this.textContainer.style.fontStyle="normal",this.textContainer.style.fontWeight="normal")}},{key:"setProperty",value:function(o){if(o.name===this.annotation.name){for(var s in o)for(var u in this.annotation)if(u===s&&this.annotation[u]!==o[s]){if(o.contents!==""&&(this.annotation[u]=o[s],updatePropsNum++),s==="backgroundColor"&&(this.shapeElement.style[s]=o[s],this.textContainer.style[s]=o[s]),s==="textAlignment"&&(this.textContainer.style.textAlign=o[s]),s==="fontSize"&&(this.textContainer.style.fontSize=o[s]+"px"),s==="color"&&(this.textContainer.style.color=o[s]),s==="fontName"&&(this.textContainer.style.fontFamily=o[s]),s==="fontStyle"){var d=o[s];d==="boldItalic"?(this.textContainer.style.fontStyle="italic",this.textContainer.style.fontWeight="bold",annotation.isBold=!0,annotation.isItalic=!0):d==="bold"?(this.textContainer.style.fontStyle="normal",this.textContainer.style.fontWeight="bold",annotation.isBold=!0,annotation.isItalic=!1):d==="italic"?(this.textContainer.style.fontStyle="italic",this.textContainer.style.fontWeight="normal",annotation.isBold=!1,annotation.isItalic=!0):(annotation.isItalic=!1,annotation.isBold=!1,this.textContainer.style.fontStyle="normal",this.textContainer.style.fontWeight="normal")}s==="contents"&&(this.textContainer.nodeName==="INPUT"?this.textContainer.value=o[s]:this.textContainer.innerHTML=this.annotation.contents),s==="isMultiLine"&&this.changeElementMultiLine(o[s])}var f={operate:"mod-form",pageIndex:this.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr},v=["fontSize","fontName","color","fontStyle"].some(function(y){return o[y]});if(v){f.fontSize=annotation.fontSize,f.color=annotation.color;var m={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},_=annotation.fontName;annotation.isBold&&annotation.isItalic?f.fontName=m[_].boldItalic:annotation.isBold?f.fontName=m[_].bold:annotation.isItalic?f.fontName=m[_].italic:f.fontName=m[_].normal}var g=Object.assign({},f,o);this.eventBus.dispatch("annotationChange",{type:"modify",annotation:g})}}}]),r}(),AddTextField=function(){function e(n){var r=n.tool,o=n.color,s=n.svgElement,u=n.layer,d=n.container,f=n.viewport,v=n.page,m=n.eventBus;_classCallCheck(this,e),this.layer=u,this._tool=r,this.color=o,this.svgElement=s,this.container=d,this.viewport=f,this.page=v,this.eventBus=m,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.initTextfieldName=this.setInitProperty.bind(this),this.init()}return _createClass(e,[{key:"init",value:function(){this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown),this.container.addEventListener("mousedown",this.onMousedown),this.container.addEventListener("touchstart",this.onMousedown),this.svgElement.style.cursor="crosshair",this.container.style.touchAction="none",document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.eventBus._on("initTextfieldName",this.initTextfieldName)}},{key:"tool",get:function(){return this._tool},set:function(n){n!==this._tool&&(n||(this.reset(),this.svgElement.style.cursor="default",this.container.style.touchAction="",this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown)),this._tool=n)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown),this.eventBus._off("initTextfieldName",this.initTextfieldName)}},{key:"handleMouseDown",value:function(n){if(!this.layer.annotationStore.selectedElementName){var r=getAbsoluteCoordinate(this.container,n),o=r.x,s=r.y;this.initStartPoint={x:o,y:s},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var n=this.initStartPoint,r=this.initEndPoint;if(r&&n.x!==r.x&&n.y!==r.y){var o=getInitialPoint(n,this.viewport,this.viewport.scale),s=getInitialPoint(r,this.viewport,this.viewport.scale);this.setInitProperty();var u={x:Math.min(o.x,s.x),y:Math.min(o.y,s.y)},d={x:Math.max(o.x,s.x),y:Math.max(o.y,s.y)},f={left:u.x,top:u.y,right:d.x,bottom:d.y},v={operate:"add-form",type:"textfield",pageIndex:this.page,date:new Date,rect:f,backgroundColor:"#DDE9FF",borderColor:"#43474D",borderStyle:"solid",borderWidth:1,fieldName:this.fieldName,isHidden:0,color:"#000000",fontName:"Helvetica",fontSize:14,textAlignment:"left",textFieldSpe:0,isMultiLine:!1};this.eventBus.dispatch("annotationChange",{type:"add",annotation:v})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(n){var r=getAbsoluteCoordinate(this.container,n),o=r.x,s=r.y,u=this.viewport,d=u.width,f=u.height;if(this.viewport.scale,o=Math.min(d,o),o=Math.max(0,o),s=Math.min(f,s),s=Math.max(0,s),this.initEndPoint={x:o,y:s},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(n.shiftKey){var v=this.initStartPoint,m=this.initEndPoint,_=Math.abs(m.x-v.x),g=Math.abs(m.y-v.y),y=Math.min(_,g);v.x<m.x?m.x=v.x+y:m.x=v.x-y,v.y<m.y?m.y=v.y+y:m.y=v.y-y}var w=this.calculate(this.initStartPoint,this.initEndPoint),x=this.shapeEle;x.style.top="".concat(w.top,"px"),x.style.left="".concat(w.left,"px"),x.style.width="".concat(Math.abs(w.width-1),"px"),x.style.height="".concat(Math.abs(w.height-1),"px")}else{var k=createElement("div",{backgroundColor:"#DDE9FF",position:"absolute"});this.shapeEle=k,this.scene=this.container.querySelector(".annotationLayer"),this.scene.append(this.shapeEle)}}},{key:"rectCalc",value:function(n){var r=n.start,o=n.end;return{top:r.y<o.y?r.y:o.y,left:r.x<o.x?r.x:o.x,width:Math.abs(o.x-r.x),height:Math.abs(o.y-r.y)}}},{key:"calculate",value:function(n,r){var o=this.rectCalc({start:n,end:r}),s=1*this.viewport.scale;return{top:o.top-s,left:o.left-s,width:o.width+2*s,height:o.height+2*s}}},{key:"setInitProperty",value:function(){var n=1;if(this.layer.annotationStore.annotationsAll)for(var r=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(u,d){return u.concat(d)},[]).filter(function(u){return u.type==="textfield"}),o=function(){var u="Text Field"+(s+1);if(r.every(function(d){return d.fieldName!==u}))return n=s+1,"break"},s=0;s<=r.length&&o()!=="break";s++);this.fieldName="Text Field"+n}}]),e}(),CheckBox=function(e){_inherits(r,BaseAnnotation);var n=_createSuper(r);function r(o){var s,u=o.container,d=o.annotation,f=o.page,v=o.viewport,m=o.scale,_=o.eventBus,g=o.layer,y=o.show,w=y!==void 0&&y;return _classCallCheck(this,r),(s=n.call(this,{container:u,annotation:d,page:f,viewport:v,scale:m,eventBus:_,show:w})).layer=g,s.hidden=!0,s.initial=!1,s.outline=null,s.start=null,s.end=null,s.newStart=null,s.newEnd=null,s.startCircle=null,s.endCircle=null,s.show=w,s.onMousedown=s.handleMouseDown.bind(_assertThisInitialized(s)),s.onMouseup=s.handleMouseUp.bind(_assertThisInitialized(s)),s.onMousemove=s.handleMouseMove.bind(_assertThisInitialized(s)),s.onDelete=s.handleDelete.bind(_assertThisInitialized(s)),s.handlePropertyPanel=s.handlePropertyPanel.bind(_assertThisInitialized(s)),s.setProperty=s.setProperty.bind(_assertThisInitialized(s)),s.render(),s}return _createClass(r,[{key:"render",value:function(){this.eventBus._on("setProperty",this.setProperty);var o=this.annotation;o.fieldName||(o.fieldName="Check Box_"+o.date.toLocaleString());var s=this.getActualRect(this.viewport,this.scale),u=s.start,d=s.end;this.start=u,this.end=d;var f,v=this.calculate(u,d),m=document.createElement("div");m.id=o.name,m.className="annotation",m.style.top=v.top+"px",m.style.left=v.left+"px",m.style.width=v.width+"px",m.style.height=v.height+"px",this.annotationContainer=m,this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),f=createElement("div",{left:0,top:0,display:"flex",alignItems:"center",justifyContent:"center",width:"".concat(Math.abs(v.width),"px"),height:"".concat(Math.abs(v.height),"px"),borderColor:o.borderColor,borderWidth:"1px"|o.borderWidth,borderStyle:o.borderStyle,backgroundColor:o.backgroundColor,position:"relative"}),this.borderElement=f;var _=createSvg("svg",{width:"15",height:"12",viewBox:"0 0 15 12",fill:"none"},{width:"".concat(v.width/2,"px"),height:"".concat(v.height/2,"px")});this.svgElement=_;var g=createSvg("path",{d:"M14.0908 1.59619 L5.59625 10.0908 L1.00006 5.49457",stroke:"#43474D","stroke-width":"2"});this.checkPath=g;var y=createSvg("path",{d:"M0 7C0 3.13401 3.13401 0 7 0C10.866 0 14 3.13401 14 7C14 10.866 10.866 14 7 14C3.13401 14 0 10.866 0 7Z",fill:"#43474D"});this.circlePath=y;var w=createSvg("path",{d:"M6.00001 7.41421L10.1924 11.6066L11.6066 10.1924L7.41422 6L11.6066 1.80762L10.1924 0.393403L6.00001 4.58579L1.70711 0.292895L0.292897 1.70711L4.58579 6L0.292897 10.2929L1.70711 11.7071L6.00001 7.41421Z",fill:"#43474D","fill-rule":"evenodd","clip-rule":"evenodd"});this.crossPath=w;var x=createSvg("path",{d:"M0 7.07108L7.07107 8.99256e-06L14.1421 7.07108L7.07107 14.1421L0 7.07108Z",fill:"#43474D"});this.diamondPath=x;var k=createSvg("rect",{width:"12",height:"12",fill:"#43474D"});this.squarePath=k;var S=createSvg("path",{d:"M8 0L10.3794 4.7251L15.6085 5.52786L11.8499 9.2509L12.7023 14.4721L8 12.048L3.29772 14.4721L4.15012 9.2509L0.391548 5.52786L5.62065 4.7251L8 0Z",fill:"#43474D"});this.starPath=S,this.setSelectedShape(o.checkStyle),o.isChecked===0&&(this.svgElement.style.display="none"),this.borderElement.append(this.svgElement),this.annotationContainer.append(this.borderElement),this.container.append(this.annotationContainer),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr;var E=v.left+v.width-30+"px",T=v.top+v.height+8+"px";this.deletetButton.style.left=E,this.deletetButton.style.top=T;var M=document.createElementNS("http://www.w3.org/2000/svg","svg");M.style.position="absolute",M.style.zIndex=1,M.style.left="".concat(v.left-4,"px"),M.style.top="".concat(v.top-4,"px"),M.style.width="".concat(v.width+8,"px"),M.style.height="".concat(v.height+8,"px"),this.outerLine=M,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:v.width,height:v.height,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:v.height/2+1}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:v.height+1}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width/2+1,y:v.height+1}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width+1,y:v.height+1}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width+1,y:v.height/2+1}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width+1,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width/2+1,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.initial=!0,this.layer.toolMode!=="form"&&(o.isHidden==1?(this.annotationContainer.style.display="none",this.annotationContainer.style.pointerEvents="none"):o.isHidden==0&&(this.annotationContainer.style.display="block",this.annotationContainer.style.pointerEvents="auto"))}},{key:"getActualRect",value:function(o,s){var u=this.annotation.rect,d=u.left,f=u.top,v=u.right,m=u.bottom;return{start:getActualPoint({x:d,y:f},o),end:getActualPoint({x:v,y:m},o)}}},{key:"rectCalc",value:function(o){var s=o.start,u=o.end;return{top:s.y<u.y?s.y:u.y,left:s.x<u.x?s.x:u.x,width:Math.abs(u.x-s.x),height:Math.abs(u.y-s.y)}}},{key:"calculate",value:function(o,s){var u=this.rectCalc({start:o,end:s}),d=(this.annotation.borderWidth||2)*this.scale;return{top:u.top-d,left:u.left-d,width:u.width+2*d,height:u.height+2*d}}},{key:"getInitialPoint",value:function(){var o,s,u,d,f=this.scale,v=this.start.x,m=this.start.y,_=this.end.x,g=this.end.y,y=this.viewport,w=y.width,x=y.height,k=y.rotation;return k===0?(o=v/f,s=m/f,u=_/f,d=g/f):k===90?(o=m/f,s=v/f,u=g/f,d=_/f):k===180?(o=(w-v)/f,s=m/f,u=(w-_)/f,d=g/f):(o=(x-m)/f,s=(w-v)/f,u=(x-g)/f,d=(w-_)/f),{start:{x:o,y:s},end:{x:u,y:d}}}},{key:"updateTool",value:function(){this.initial&&(this.hidden?(this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLineContainer.remove()):(this.layer.annotationStore.selectedElementName!==this.annotation.name&&(this.layer.annotationStore.selectedElementName=this.annotation.name),this.container.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.eventBus.dispatch("propertyChange",this.annotation)))}},{key:"handleClick",value:function(){if(this.hidden&&!document.fullscreenElement&&!this.layer.annotationStore.creating)if(this.layer.toolMode==="form")this.hidden=!1,this.updateTool(),this.judgeCheckboxIsOne(),this.hidden||document.getElementsByClassName("right-panel")[0].className.indexOf("closed")===-1||document.getElementById("propertyPanelButton").click(),this.eventBus._on("checkboxPropertyPanelChanged",this.handlePropertyPanel),onClickOutsideUp([this.annotationContainer,this.outerLine,this.deletetButton,document.getElementById("propertyPanelButton"),document.getElementsByClassName("right-panel")[0]],this.handleOutside.bind(this));else{this.annotation.isChecked=this.annotation.isChecked==0?1:0,this.annotation.isChecked==1?this.svgElement.style.display="block":this.svgElement.style.display="none";var o={operate:"mod-form",name:this.annotation.name,pageIndex:this.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,type:this.annotation.type,isChecked:this.annotation.isChecked};this.eventBus.dispatch("annotationChange",{type:"modify",annotation:o})}}},{key:"handleOutside",value:function(){this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||document.getElementById("propertyPanelButton").click(),this.hidden=!this.hidden,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLine.removeEventListener("mousedown",this.onMousedown),this.outerLine.removeEventListener("touchstart",this.onMousedown),this.outerLineContainer.remove(),this.eventBus._on("checkboxPropertyPanelChanged",this.handlePropertyPanel)}},{key:"handleMouseDown",value:function(o){this.layer.tool&&o.stopPropagation();var s=o.target.getAttribute("data-id"),u=getClickPoint(o),d=u.pageX,f=u.pageY;this.startState={operator:s,clickX:d,clickY:f},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup),this.handleClick()}},{key:"handleMouseMove",value:function(o){o.type==="touchmove"&&(document.body.style.overscrollBehavior="none"),this.moving=!0;var s=getClickPoint(o),u=s.pageX,d=s.pageY,f=this.start,v=this.end,m=this.startState,_=this.viewport,g=_.width,y=_.height;if(m.operator==="nw-resize"){var w=u-(m.clickX-this.start.x),x=d-(m.clickY-this.start.y);w=Math.min(v.x-5,w),w=Math.max(0,w),x=Math.min(v.y-5,x),x=Math.max(0,x),this.update({start:{x:w,y:x},end:v})}else if(m.operator==="w-resize"){var k=u-(m.clickX-this.start.x);k=Math.min(v.x-5,k),k=Math.max(0,k),this.update({start:{x:k,y:f.y},end:v})}else if(m.operator==="sw-resize"){var S=u-(m.clickX-this.start.x),E=d-(m.clickY-this.end.y);S=Math.min(v.x-5,S),S=Math.max(0,S),E=Math.min(y,E),E=Math.max(f.y+5,E),this.update({start:{x:S,y:f.y},end:{x:v.x,y:E}})}else if(m.operator==="s-resize"){var T=d-(m.clickY-this.end.y);T=Math.min(y,T),T=Math.max(f.y+5,T),this.update({start:f,end:{x:v.x,y:T}})}else if(m.operator==="se-resize"){var M=u-(m.clickX-this.end.x),I=d-(m.clickY-this.end.y);M=Math.min(g,M),M=Math.max(f.x+5,M),I=Math.min(y,I),I=Math.max(f.y+5,I),this.update({start:f,end:{x:M,y:I}})}else if(m.operator==="e-resize"){var F=u-(m.clickX-this.end.x);F=Math.min(g,F),F=Math.max(f.x+5,F),this.update({start:f,end:{x:F,y:v.y}})}else if(m.operator==="ne-resize"){var O=u-(m.clickX-this.end.x),N=d-(m.clickY-this.start.y);O=Math.min(g,O),O=Math.max(f.x+5,O),N=Math.min(v.y-5,N),N=Math.max(0,N),this.update({start:{x:f.x,y:N},end:{x:O,y:v.y}})}else if(m.operator==="n-resize"){var D=d-(m.clickY-this.start.y);D=Math.min(v.y-5,D),D=Math.max(0,D),this.update({start:{x:f.x,y:D},end:v})}else if(m.operator==="move"){var X=u-(m.clickX-this.start.x),U=d-(m.clickY-this.start.y),Z=u-(m.clickX-this.end.x),j=d-(m.clickY-this.end.y),Q={width:Math.abs(f.x-v.x),height:Math.abs(f.y-v.y)};X<Z?(X=Math.max(0,X),X=Math.min(g-Q.width,X),Z=Math.max(Q.width,Z),Z=Math.min(g,Z)):(Z=Math.max(0,Z),Z=Math.min(g-Q.width,Z),X=Math.max(Q.width,X),X=Math.min(g,X)),U<j?(U=Math.max(0,U),U=Math.min(y-Q.height,U),j=Math.max(Q.height,j),j=Math.min(y,j)):(j=Math.max(0,j),j=Math.min(y-Q.height,j),U=Math.max(Q.height,U),U=Math.min(y,U)),this.update({start:{x:X,y:U},end:{x:Z,y:j}})}}},{key:"handleDelete",value:function(o){this.layer.tool&&o&&o.stopPropagation(),this.handleOutside(),this.annotationContainer.remove(),this.annotation.isDelete=!0;var s={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.page}};this.annotation.annotPtr&&(s.annotation.annotPtr=this.annotation.annotPtr),o||(s.type="empty"),this.eventBus.dispatch("annotationChange",s)}},{key:"handleMouseUp",value:function(o){this.layer.tool&&o.stopPropagation(),o.type==="touchend"&&(document.body.style.overscrollBehavior="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup);var s=getClickPoint(o),u=s.pageX,d=s.pageY;if(u!==this.startState.clickX||d!==this.startState.clickY){this.start=this.newStart,this.end=this.newEnd;var f=this.annotation,v=this.getInitialPoint(),m=v.start,_=v.end,g={left:m.x,top:m.y,right:_.x,bottom:_.y};this.eventBus.dispatch("annotationChange",{type:"modify",annotation:{operate:"mod-form",name:f.name,pageIndex:this.page,pagePtr:f.pagePtr,annotPtr:f.annotPtr,rect:g}})}}},{key:"update",value:function(o){var s=o.start,u=o.end,d=this.calculate(s,u);this.newStart=s,this.newEnd=u,this.annotationContainer.style.top=d.top+"px",this.annotationContainer.style.left=d.left+"px",this.annotationContainer.style.width=d.width+"px",this.annotationContainer.style.height=d.height+"px",this.annotationContainer.style.width="".concat(d.width,"px"),this.annotationContainer.style.height="".concat(d.height,"px"),this.borderElement.style.width="".concat(d.width,"px"),this.borderElement.style.height="".concat(d.height,"px"),this.outerLine.style.left="".concat(d.left-4,"px"),this.outerLine.style.top="".concat(d.top-4,"px"),this.outerLine.style.width="".concat(d.width+8,"px"),this.outerLine.style.height="".concat(d.height+8,"px");var f=d.left+d.width-30+"px",v=d.top+d.height+8+"px";this.deletetButton.style.left=f,this.deletetButton.style.top=v,this.moveRect.setAttribute("width",d.width),this.moveRect.setAttribute("height",d.height),this.LeftRect.setAttribute("y",d.height/2+1),this.bottomLeftRect.setAttribute("y",d.height+1),this.bottomRect.setAttribute("x",d.width/2+1),this.bottomRect.setAttribute("y",d.height+1),this.bottomRightRect.setAttribute("x",d.width+1),this.bottomRightRect.setAttribute("y",d.height+1),this.rightRect.setAttribute("x",d.width+1),this.rightRect.setAttribute("y",d.height/2+1),this.topRightRect.setAttribute("x",d.width+1),this.topRect.setAttribute("x",d.width/2+1),this.svgElement.style.width="".concat(d.width/2,"px"),this.svgElement.style.height="".concat(d.height/2,"px")}},{key:"handlePropertyPanel",value:function(o){if(this.layer.annotationStore.selectedElementName===this.annotation.name){var s=0;for(var u in o)for(var d in this.annotation)d===u&&this.annotation[d]!==o[u]&&u!=="fieldName"&&(this.annotation[d]=o[u],s++,u==="backgroundColor"&&(this.borderElement.style[u]=o[u]),u==="checkStyle"&&(this.svgElement.removeChild(this.svgElement.firstChild),this.setSelectedShape(o[u])),u==="isChecked"&&(o[u]?this.svgElement.style.display="block":this.svgElement.style.display="none")),d===u&&this.annotation[d]!==o[u]&&u==="fieldName"&&(this.judgeCheckboxIsOne(o[u]),this.isOne&&(this.annotation[d]=o[u],s++));if(s>0){var f={operate:"mod-form",name:this.annotation.name,pageIndex:this.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,type:this.annotation.type},v=Object.assign({},f,o);this.eventBus.dispatch("annotationChange",{type:"modify",annotation:v})}}}},{key:"setSelectedShape",value:function(o){o===1?(this.svgElement.setAttribute("width","14"),this.svgElement.setAttribute("height","14"),this.svgElement.setAttribute("viewBox","0 0 14 14"),this.svgElement.append(this.circlePath)):o===2?(this.svgElement.setAttribute("width","12"),this.svgElement.setAttribute("height","12"),this.svgElement.setAttribute("viewBox","0 0 12 12"),this.svgElement.append(this.crossPath)):o===3?(this.svgElement.setAttribute("width","15"),this.svgElement.setAttribute("height","15"),this.svgElement.setAttribute("viewBox","0 0 15 15"),this.svgElement.append(this.diamondPath)):o===4?(this.svgElement.setAttribute("width","12"),this.svgElement.setAttribute("height","12"),this.svgElement.setAttribute("viewBox","0 0 12 12"),this.svgElement.append(this.squarePath)):o===5?(this.svgElement.setAttribute("width","16"),this.svgElement.setAttribute("height","15"),this.svgElement.setAttribute("viewBox","0 0 16 15"),this.svgElement.append(this.starPath)):(this.svgElement.setAttribute("width","15"),this.svgElement.setAttribute("height","15"),this.svgElement.setAttribute("viewBox","0 0 15 12"),this.svgElement.append(this.checkPath))}},{key:"setProperty",value:function(o){if(o.name===this.annotation.name){var s=this.annotation;for(var u in o)for(var d in s)d===u&&s[d]!==o[u]&&(s[d]=o[u],u==="backgroundColor"&&(this.borderElement.style[u]=o[u]),u==="checkStyle"&&(this.svgElement.removeChild(this.svgElement.firstChild),this.setSelectedShape(o[u])),u==="isChecked"&&(o[u]?this.svgElement.style.display="block":this.svgElement.style.display="none"));var f={operate:"mod-form",pageIndex:this.page,pagePtr:s.pagePtr,annotPtr:s.annotPtr,type:this.annotation.type},v=Object.assign({},f,o);this.eventBus.dispatch("annotationChange",{type:"modify",annotation:v})}}},{key:"judgeCheckboxIsOne",value:function(o){var s=o!=null?o:this.annotation.fieldName,u=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(m,_){return m.concat(_)},[]);this.isOne=!0;var d,f=_createForOfIteratorHelper(u);try{for(f.s();!(d=f.n()).done;){var v=d.value;if(v.hasOwnProperty("fieldName")&&v.fieldName===s&&v.name!==this.annotation.name&&v.type==="checkbox"){this.isOne=!1;break}}}catch(m){f.e(m)}finally{f.f()}this.eventBus.dispatch("judgeCheckboxIsOne",this.isOne)}}]),r}(),AddCheckBox=function(){function e(n){var r=n.tool,o=n.color,s=n.svgElement,u=n.layer,d=n.container,f=n.viewport,v=n.page,m=n.eventBus;_classCallCheck(this,e),this.layer=u,this._tool=r,this.color=o,this.svgElement=s,this.container=d,this.viewport=f,this.page=v,this.eventBus=m,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.initCheckboxName=this.setInitProperty.bind(this),this.init()}return _createClass(e,[{key:"init",value:function(){this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown),this.container.addEventListener("mousedown",this.onMousedown),this.container.addEventListener("touchstart",this.onMousedown),this.svgElement.style.cursor="crosshair",this.container.style.touchAction="none",document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.eventBus._on("initCheckboxName",this.initCheckboxName)}},{key:"tool",get:function(){return this._tool},set:function(n){n!==this._tool&&(n||(this.reset(),this.svgElement.style.cursor="default",this.container.style.touchAction="",this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown)),this._tool=n)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown),this.eventBus._off("initCheckboxName",this.initCheckboxName)}},{key:"handleMouseDown",value:function(n){if(!this.layer.annotationStore.selectedElementName){var r=getAbsoluteCoordinate(this.container,n),o=r.x,s=r.y;this.initStartPoint={x:o,y:s},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var n=this.initStartPoint,r=this.initEndPoint;if(r&&n.x!==r.x&&n.y!==r.y){var o=getInitialPoint(n,this.viewport,this.viewport.scale),s=getInitialPoint(r,this.viewport,this.viewport.scale);this.setInitProperty();var u={x:Math.min(o.x,s.x),y:Math.min(o.y,s.y)},d={x:Math.max(o.x,s.x),y:Math.max(o.y,s.y)},f={left:u.x,top:u.y,right:d.x,bottom:d.y},v={operate:"add-form",type:"checkbox",pageIndex:this.page,date:new Date,rect:f,backgroundColor:"#DDE9FF",borderColor:"#43474D",borderStyle:"solid",borderWidth:1,fieldName:this.fieldName,isHidden:0,isChecked:0,checkStyle:0};this.eventBus.dispatch("annotationChange",{type:"add",annotation:v})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(n){var r=getAbsoluteCoordinate(this.container,n),o=r.x,s=r.y,u=this.viewport,d=u.width,f=u.height;if(this.viewport.scale,o=Math.min(d,o),o=Math.max(0,o),s=Math.min(f,s),s=Math.max(0,s),this.initEndPoint={x:o,y:s},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(n.shiftKey){var v=this.initStartPoint,m=this.initEndPoint,_=Math.abs(m.x-v.x),g=Math.abs(m.y-v.y),y=Math.min(_,g);v.x<m.x?m.x=v.x+y:m.x=v.x-y,v.y<m.y?m.y=v.y+y:m.y=v.y-y}var w=this.calculate(this.initStartPoint,this.initEndPoint),x=this.shapeEle;x.style.top="".concat(w.top,"px"),x.style.left="".concat(w.left,"px"),x.style.width="".concat(Math.abs(w.width-1),"px"),x.style.height="".concat(Math.abs(w.height-1),"px")}else{var k=createElement("div",{backgroundColor:"#DDE9FF",borderColor:"#43474D",borderWidth:"3",borderStyle:"solid",position:"absolute"});this.shapeEle=k,this.scene=this.container.querySelector(".annotationLayer"),this.scene.append(this.shapeEle)}}},{key:"rectCalc",value:function(n){var r=n.start,o=n.end;return{top:r.y<o.y?r.y:o.y,left:r.x<o.x?r.x:o.x,width:Math.abs(o.x-r.x),height:Math.abs(o.y-r.y)}}},{key:"calculate",value:function(n,r){var o=this.rectCalc({start:n,end:r}),s=1*this.viewport.scale;return{top:o.top-s,left:o.left-s,width:o.width+2*s,height:o.height+2*s}}},{key:"setInitProperty",value:function(){var n=1;if(this.layer.annotationStore.annotationsAll)for(var r=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(u,d){return u.concat(d)},[]).filter(function(u){return u.type==="checkbox"}),o=function(){var u="Check Box"+(s+1);if(r.every(function(d){return d.fieldName!==u}))return n=s+1,"break"},s=0;s<=r.length&&o()!=="break";s++);this.fieldName="Check Box"+n}}]),e}(),RadioButton=function(e){_inherits(r,BaseAnnotation);var n=_createSuper(r);function r(o){var s,u=o.container,d=o.annotation,f=o.page,v=o.viewport,m=o.scale,_=o.eventBus,g=o.layer,y=o.show,w=y!==void 0&&y;return _classCallCheck(this,r),(s=n.call(this,{container:u,annotation:d,page:f,viewport:v,scale:m,eventBus:_,show:w})).layer=g,s.hidden=!0,s.initial=!1,s.outline=null,s.start=null,s.end=null,s.newStart=null,s.newEnd=null,s.startCircle=null,s.endCircle=null,s.show=w,s.onMousedown=s.handleMouseDown.bind(_assertThisInitialized(s)),s.onMouseup=s.handleMouseUp.bind(_assertThisInitialized(s)),s.onMousemove=s.handleMouseMove.bind(_assertThisInitialized(s)),s.onDelete=s.handleDelete.bind(_assertThisInitialized(s)),s.handlePropertyPanel=s.handlePropertyPanel.bind(_assertThisInitialized(s)),s.setProperty=s.setProperty.bind(_assertThisInitialized(s)),s.render(),s}return _createClass(r,[{key:"render",value:function(){this.eventBus._on("setProperty",this.setProperty);var o=this.annotation;this.annotation.fieldName||(this.annotation.fieldName="Group_"+this.annotation.date.toLocaleString());var s=this.getActualRect(this.viewport,this.scale),u=s.start,d=s.end;this.start=u,this.end=d;var f,v=this.calculate(u,d),m=document.createElement("div");m.id=o.name,m.className="annotation",m.style.top=v.top+"px",m.style.left=v.left+"px",m.style.width=v.width+"px",m.style.height=v.height+"px",this.annotationContainer=m,this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),f=createElement("div",{left:0,top:0,display:"flex",alignItems:"center",justifyContent:"center",width:"".concat(Math.abs(v.width),"px"),height:"".concat(Math.abs(v.height),"px"),borderColor:o.borderColor,borderWidth:"1px"|o.borderWidth,borderStyle:o.borderStyle,borderRadius:"100%",backgroundColor:o.backgroundColor,position:"relative"}),this.borderElement=f;var _=createSvg("svg",{width:"15",height:"12",viewBox:"0 0 15 12",fill:"none"},{width:"".concat(v.width/2,"px"),height:"".concat(v.height/2,"px")});this.svgElement=_;var g=createSvg("path",{d:"M14.0908 1.59619 L5.59625 10.0908 L1.00006 5.49457",stroke:"#43474D","stroke-width":"2"});this.checkPath=g;var y=createSvg("path",{d:"M0 7C0 3.13401 3.13401 0 7 0C10.866 0 14 3.13401 14 7C14 10.866 10.866 14 7 14C3.13401 14 0 10.866 0 7Z",fill:"#43474D"});this.circlePath=y;var w=createSvg("path",{d:"M6.00001 7.41421L10.1924 11.6066L11.6066 10.1924L7.41422 6L11.6066 1.80762L10.1924 0.393403L6.00001 4.58579L1.70711 0.292895L0.292897 1.70711L4.58579 6L0.292897 10.2929L1.70711 11.7071L6.00001 7.41421Z",fill:"#43474D","fill-rule":"evenodd","clip-rule":"evenodd"});this.crossPath=w;var x=createSvg("path",{d:"M0 7.07108L7.07107 8.99256e-06L14.1421 7.07108L7.07107 14.1421L0 7.07108Z",fill:"#43474D"});this.diamondPath=x;var k=createSvg("rect",{width:"12",height:"12",fill:"#43474D"});this.squarePath=k;var S=createSvg("path",{d:"M8 0L10.3794 4.7251L15.6085 5.52786L11.8499 9.2509L12.7023 14.4721L8 12.048L3.29772 14.4721L4.15012 9.2509L0.391548 5.52786L5.62065 4.7251L8 0Z",fill:"#43474D"});this.starPath=S,this.setSelectedShape(o.checkStyle),o.isChecked==0&&(this.svgElement.style.display="none"),this.borderElement.append(this.svgElement),this.annotationContainer.append(this.borderElement),this.container.append(this.annotationContainer),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr;var E=v.left+v.width-30+"px",T=v.top+v.height+8+"px";this.deletetButton.style.left=E,this.deletetButton.style.top=T;var M=document.createElementNS("http://www.w3.org/2000/svg","svg");M.style.position="absolute",M.style.zIndex=1,M.style.left="".concat(v.left-4,"px"),M.style.top="".concat(v.top-4,"px"),M.style.width="".concat(v.width+8,"px"),M.style.height="".concat(v.height+8,"px"),this.outerLine=M,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:v.width,height:v.height,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:v.height/2+1}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:v.height+1}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width/2+1,y:v.height+1}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width+1,y:v.height+1}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width+1,y:v.height/2+1}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width+1,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width/2+1,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.initial=!0,this.layer.toolMode!=="form"&&(this.annotation.isHidden==1?(this.annotationContainer.style.display="none",this.annotationContainer.style.pointerEvents="none"):this.annotation.isHidden==0&&(this.annotationContainer.style.display="block",this.annotationContainer.style.pointerEvents="auto"))}},{key:"getActualRect",value:function(o,s){var u=this.annotation.rect,d=u.left,f=u.top,v=u.right,m=u.bottom;return{start:getActualPoint({x:d,y:f},o),end:getActualPoint({x:v,y:m},o)}}},{key:"rectCalc",value:function(o){var s=o.start,u=o.end;return{top:s.y<u.y?s.y:u.y,left:s.x<u.x?s.x:u.x,width:Math.abs(u.x-s.x),height:Math.abs(u.y-s.y)}}},{key:"calculate",value:function(o,s){var u=this.rectCalc({start:o,end:s}),d=(this.annotation.borderWidth||2)*this.scale;return{top:u.top-d,left:u.left-d,width:u.width+2*d,height:u.height+2*d}}},{key:"getInitialPoint",value:function(){var o,s,u,d,f=this.scale,v=this.start.x,m=this.start.y,_=this.end.x,g=this.end.y,y=this.viewport,w=y.width,x=y.height,k=y.rotation;return k===0?(o=v/f,s=m/f,u=_/f,d=g/f):k===90?(o=m/f,s=v/f,u=g/f,d=_/f):k===180?(o=(w-v)/f,s=m/f,u=(w-_)/f,d=g/f):(o=(x-m)/f,s=(w-v)/f,u=(x-g)/f,d=(w-_)/f),{start:{x:o,y:s},end:{x:u,y:d}}}},{key:"updateTool",value:function(){this.initial&&(this.hidden?(this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLineContainer.remove()):(this.layer.annotationStore.selectedElementName!==this.annotation.name&&(this.layer.annotationStore.selectedElementName=this.annotation.name),this.container.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.eventBus.dispatch("propertyChange",this.annotation)))}},{key:"handleClick",value:function(){if(this.hidden&&!document.fullscreenElement&&!this.layer.annotationStore.creating)if(this.layer.toolMode==="form")this.hidden=!1,this.updateTool(),this.judgeRadioBtnIsOne(),this.hidden||document.getElementsByClassName("right-panel")[0].className.indexOf("closed")===-1||document.getElementById("propertyPanelButton").click(),this.eventBus._on("radioButtonPropertyPanelChanged",this.handlePropertyPanel),onClickOutsideUp([this.annotationContainer,this.outerLine,this.deletetButton,document.getElementById("propertyPanelButton"),document.getElementsByClassName("right-panel")[0]],this.handleOutside.bind(this));else{this.annotation.isChecked=this.annotation.isChecked==0?1:0,this.annotation.isChecked==0?this.svgElement.style.display="none":(this.svgElement.style.display="block",this.cancelSameGroupButton());var o={operate:"mod-form",name:this.annotation.name,pageIndex:this.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,type:this.annotation.type,isChecked:this.annotation.isChecked};this.eventBus.dispatch("annotationChange",{type:"modify",annotation:o})}}},{key:"handleOutside",value:function(){this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||document.getElementById("propertyPanelButton").click(),this.hidden=!this.hidden,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLine.removeEventListener("mousedown",this.onMousedown),this.outerLine.removeEventListener("touchstart",this.onMousedown),this.outerLineContainer.remove(),this.eventBus._off("radioButtonPropertyPanelChanged",this.handlePropertyPanel)}},{key:"handleMouseDown",value:function(o){this.layer.tool&&o.stopPropagation();var s=o.target.getAttribute("data-id"),u=getClickPoint(o),d=u.pageX,f=u.pageY;this.startState={operator:s,clickX:d,clickY:f},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup),this.handleClick()}},{key:"handleMouseMove",value:function(o){o.type==="touchmove"&&(document.body.style.overscrollBehavior="none"),this.moving=!0;var s=getClickPoint(o),u=s.pageX,d=s.pageY,f=this.start,v=this.end,m=this.startState,_=this.viewport,g=_.width,y=_.height;if(m.operator==="nw-resize"){var w=u-(m.clickX-this.start.x),x=d-(m.clickY-this.start.y);w=Math.min(v.x-5,w),w=Math.max(0,w),x=Math.min(v.y-5,x),x=Math.max(0,x),this.update({start:{x:w,y:x},end:v})}else if(m.operator==="w-resize"){var k=u-(m.clickX-this.start.x);k=Math.min(v.x-5,k),k=Math.max(0,k),this.update({start:{x:k,y:f.y},end:v})}else if(m.operator==="sw-resize"){var S=u-(m.clickX-this.start.x),E=d-(m.clickY-this.end.y);S=Math.min(v.x-5,S),S=Math.max(0,S),E=Math.min(y,E),E=Math.max(f.y+5,E),this.update({start:{x:S,y:f.y},end:{x:v.x,y:E}})}else if(m.operator==="s-resize"){var T=d-(m.clickY-this.end.y);T=Math.min(y,T),T=Math.max(f.y+5,T),this.update({start:f,end:{x:v.x,y:T}})}else if(m.operator==="se-resize"){var M=u-(m.clickX-this.end.x),I=d-(m.clickY-this.end.y);M=Math.min(g,M),M=Math.max(f.x+5,M),I=Math.min(y,I),I=Math.max(f.y+5,I),this.update({start:f,end:{x:M,y:I}})}else if(m.operator==="e-resize"){var F=u-(m.clickX-this.end.x);F=Math.min(g,F),F=Math.max(f.x+5,F),this.update({start:f,end:{x:F,y:v.y}})}else if(m.operator==="ne-resize"){var O=u-(m.clickX-this.end.x),N=d-(m.clickY-this.start.y);O=Math.min(g,O),O=Math.max(f.x+5,O),N=Math.min(v.y-5,N),N=Math.max(0,N),this.update({start:{x:f.x,y:N},end:{x:O,y:v.y}})}else if(m.operator==="n-resize"){var D=d-(m.clickY-this.start.y);D=Math.min(v.y-5,D),D=Math.max(0,D),this.update({start:{x:f.x,y:D},end:v})}else if(m.operator==="move"){var X=u-(m.clickX-this.start.x),U=d-(m.clickY-this.start.y),Z=u-(m.clickX-this.end.x),j=d-(m.clickY-this.end.y),Q={width:Math.abs(f.x-v.x),height:Math.abs(f.y-v.y)};X<Z?(X=Math.max(0,X),X=Math.min(g-Q.width,X),Z=Math.max(Q.width,Z),Z=Math.min(g,Z)):(Z=Math.max(0,Z),Z=Math.min(g-Q.width,Z),X=Math.max(Q.width,X),X=Math.min(g,X)),U<j?(U=Math.max(0,U),U=Math.min(y-Q.height,U),j=Math.max(Q.height,j),j=Math.min(y,j)):(j=Math.max(0,j),j=Math.min(y-Q.height,j),U=Math.max(Q.height,U),U=Math.min(y,U)),this.update({start:{x:X,y:U},end:{x:Z,y:j}})}}},{key:"handleDelete",value:function(o){this.layer.tool&&o&&o.stopPropagation(),this.handleOutside(),this.annotationContainer.remove(),this.annotation.isDelete=!0;var s={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.page}};this.annotation.annotPtr&&(s.annotation.annotPtr=this.annotation.annotPtr),o||(s.type="empty"),this.eventBus.dispatch("annotationChange",s)}},{key:"handleMouseUp",value:function(o){this.layer.tool&&o.stopPropagation(),o.type==="touchend"&&(document.body.style.overscrollBehavior="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup);var s=getClickPoint(o),u=s.pageX,d=s.pageY;if(u!==this.startState.clickX||d!==this.startState.clickY){this.start=this.newStart,this.end=this.newEnd;var f=this.annotation,v=this.getInitialPoint(),m=v.start,_=v.end,g={left:m.x,top:m.y,right:_.x,bottom:_.y};this.eventBus.dispatch("annotationChange",{type:"modify",annotation:{operate:"mod-form",name:f.name,pageIndex:this.page,pagePtr:f.pagePtr,annotPtr:f.annotPtr,rect:g}})}}},{key:"update",value:function(o){var s=o.start,u=o.end,d=this.calculate(s,u);this.newStart=s,this.newEnd=u,this.annotationContainer.style.top=d.top+"px",this.annotationContainer.style.left=d.left+"px",this.annotationContainer.style.width=d.width+"px",this.annotationContainer.style.height=d.height+"px",this.annotationContainer.style.width="".concat(d.width,"px"),this.annotationContainer.style.height="".concat(d.height,"px"),this.borderElement.style.width="".concat(d.width,"px"),this.borderElement.style.height="".concat(d.height,"px"),this.outerLine.style.left="".concat(d.left-4,"px"),this.outerLine.style.top="".concat(d.top-4,"px"),this.outerLine.style.width="".concat(d.width+8,"px"),this.outerLine.style.height="".concat(d.height+8,"px");var f=d.left+d.width-30+"px",v=d.top+d.height+8+"px";this.deletetButton.style.left=f,this.deletetButton.style.top=v,this.moveRect.setAttribute("width",d.width),this.moveRect.setAttribute("height",d.height),this.LeftRect.setAttribute("y",d.height/2+1),this.bottomLeftRect.setAttribute("y",d.height+1),this.bottomRect.setAttribute("x",d.width/2+1),this.bottomRect.setAttribute("y",d.height+1),this.bottomRightRect.setAttribute("x",d.width+1),this.bottomRightRect.setAttribute("y",d.height+1),this.rightRect.setAttribute("x",d.width+1),this.rightRect.setAttribute("y",d.height/2+1),this.topRightRect.setAttribute("x",d.width+1),this.topRect.setAttribute("x",d.width/2+1),this.svgElement.style.width="".concat(d.width/2,"px"),this.svgElement.style.height="".concat(d.height/2,"px")}},{key:"handlePropertyPanel",value:function(o){if(this.layer.annotationStore.selectedElementName===this.annotation.name){var s=0;for(var u in o)for(var d in this.annotation)d===u&&this.annotation[d]!==o[u]&&(this.annotation[d]=o[u],s++,u==="backgroundColor"&&(this.borderElement.style[u]=o[u],o[u]===""&&(o.clearBackgroundColor=!0)),u==="checkStyle"&&(this.svgElement.removeChild(this.svgElement.firstChild),this.setSelectedShape(o[u])),u==="isChecked"&&(o[u]?(this.svgElement.style.display="block",this.cancelSameGroupButton()):this.svgElement.style.display="none"),u==="fieldName"&&this.judgeRadioBtnIsOne());if(s>0){var f={operate:"mod-form",name:this.annotation.name,pageIndex:this.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,type:this.annotation.type},v=Object.assign({},f,o);this.eventBus.dispatch("annotationChange",{type:"modify",annotation:v})}}}},{key:"setSelectedShape",value:function(o){o===1?(this.svgElement.setAttribute("width","14"),this.svgElement.setAttribute("height","14"),this.svgElement.setAttribute("viewBox","0 0 14 14"),this.svgElement.append(this.circlePath)):o===2?(this.svgElement.setAttribute("width","12"),this.svgElement.setAttribute("height","12"),this.svgElement.setAttribute("viewBox","0 0 12 12"),this.svgElement.append(this.crossPath)):o===3?(this.svgElement.setAttribute("width","15"),this.svgElement.setAttribute("height","15"),this.svgElement.setAttribute("viewBox","0 0 15 15"),this.svgElement.append(this.diamondPath)):o===4?(this.svgElement.setAttribute("width","12"),this.svgElement.setAttribute("height","12"),this.svgElement.setAttribute("viewBox","0 0 12 12"),this.svgElement.append(this.squarePath)):o===5?(this.svgElement.setAttribute("width","16"),this.svgElement.setAttribute("height","15"),this.svgElement.setAttribute("viewBox","0 0 16 15"),this.svgElement.append(this.starPath)):(this.svgElement.setAttribute("width","15"),this.svgElement.setAttribute("height","15"),this.svgElement.setAttribute("viewBox","0 0 15 12"),this.svgElement.append(this.checkPath))}},{key:"setProperty",value:function(o){if(o.name===this.annotation.name){for(var s in o)for(var u in this.annotation)u===s&&this.annotation[u]!==o[s]&&(this.annotation[u]=o[s],s==="backgroundColor"&&(this.borderElement.style[s]=o[s]),s==="checkStyle"&&(this.svgElement.removeChild(this.svgElement.firstChild),this.setSelectedShape(o[s])),s==="isChecked"&&(o[s]==0?this.svgElement.style.display="none":(this.svgElement.style.display="block",this.cancelSameGroupButton())),s==="fieldName"&&this.judgeRadioBtnIsOne());var d={operate:"mod-form",pageIndex:this.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,type:this.annotation.type},f=Object.assign({},d,o);this.eventBus.dispatch("annotationChange",{type:"modify",annotation:f})}}},{key:"cancelSameGroupButton",value:function(){var o,s=this,u=_createForOfIteratorHelper(Object.values(this.layer.annotationStore.annotationsAll).reduce(function(f,v){return f.concat(v)},[]).filter(function(f){return f.fieldName===s.annotation.fieldName&&f.name!==s.annotation.name&&f.isChecked!=0&&f.type==="radiobutton"}));try{for(u.s();!(o=u.n()).done;){var d=o.value;this.eventBus.dispatch("handleField",{id:d.name,key:"isChecked",value:0})}}catch(f){u.e(f)}finally{u.f()}}},{key:"judgeRadioBtnIsOne",value:function(){var o,s=!0,u=_createForOfIteratorHelper(Object.values(this.layer.annotationStore.annotationsAll).reduce(function(f,v){return f.concat(v)},[]));try{for(u.s();!(o=u.n()).done;){var d=o.value;if(d.hasOwnProperty("fieldName")&&d.fieldName===this.annotation.fieldName&&d.name!==this.annotation.name&&d.type==="radiobutton"){s=!1;break}}}catch(f){u.e(f)}finally{u.f()}this.eventBus.dispatch("judgeRadioBtnIsOne",s)}}]),r}(),AddRadioButton=function(){function e(n){var r=n.tool,o=n.color,s=n.svgElement,u=n.layer,d=n.container,f=n.viewport,v=n.page,m=n.eventBus;_classCallCheck(this,e),this.layer=u,this._tool=r,this.color=o,this.svgElement=s,this.container=d,this.viewport=f,this.page=v,this.eventBus=m,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.initRadioButtonName=this.setInitProperty.bind(this),this.init()}return _createClass(e,[{key:"init",value:function(){this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown),this.container.addEventListener("mousedown",this.onMousedown),this.container.addEventListener("touchstart",this.onMousedown),this.svgElement.style.cursor="crosshair",this.container.style.touchAction="none",document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.eventBus._on("initRadioButtonName",this.initRadioButtonName)}},{key:"tool",get:function(){return this._tool},set:function(n){n!==this._tool&&(n||(this.reset(),this.svgElement.style.cursor="default",this.container.style.touchAction="",this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown)),this._tool=n)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown),this.eventBus._off("initRadioButtonName",this.initRadioButtonName)}},{key:"handleMouseDown",value:function(n){if(!this.layer.annotationStore.selectedElementName){var r=getAbsoluteCoordinate(this.container,n),o=r.x,s=r.y;this.initStartPoint={x:o,y:s},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var n=this.initStartPoint,r=this.initEndPoint;if(r&&n.x!==r.x&&n.y!==r.y){var o=getInitialPoint(n,this.viewport,this.viewport.scale),s=getInitialPoint(r,this.viewport,this.viewport.scale);this.setInitProperty();var u={x:Math.min(o.x,s.x),y:Math.min(o.y,s.y)},d={x:Math.max(o.x,s.x),y:Math.max(o.y,s.y)},f={left:u.x,top:u.y,right:d.x,bottom:d.y},v={operate:"add-form",type:"radiobutton",pageIndex:this.page,date:new Date,rect:f,backgroundColor:"#DDE9FF",borderColor:"#43474D",borderStyle:"solid",borderWidth:1,fieldName:this.fieldName,isHidden:0,isChecked:0,checkStyle:1};this.eventBus.dispatch("annotationChange",{type:"add",annotation:v})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(n){var r=getAbsoluteCoordinate(this.container,n),o=r.x,s=r.y,u=this.viewport,d=u.width,f=u.height;if(this.viewport.scale,o=Math.min(d,o),o=Math.max(0,o),s=Math.min(f,s),s=Math.max(0,s),this.initEndPoint={x:o,y:s},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(n.shiftKey){var v=this.initStartPoint,m=this.initEndPoint,_=Math.abs(m.x-v.x),g=Math.abs(m.y-v.y),y=Math.min(_,g);v.x<m.x?m.x=v.x+y:m.x=v.x-y,v.y<m.y?m.y=v.y+y:m.y=v.y-y}var w=this.calculate(this.initStartPoint,this.initEndPoint),x=this.shapeEle;x.style.top="".concat(w.top,"px"),x.style.left="".concat(w.left,"px"),x.style.width="".concat(Math.abs(w.width-1),"px"),x.style.height="".concat(Math.abs(w.height-1),"px")}else{var k=createElement("div",{backgroundColor:"#DDE9FF",borderColor:"#43474D",borderWidth:"3",borderStyle:"solid",borderRadius:"100%",position:"absolute"});this.shapeEle=k,this.scene=this.container.querySelector(".annotationLayer"),this.scene.append(this.shapeEle)}}},{key:"rectCalc",value:function(n){var r=n.start,o=n.end;return{top:r.y<o.y?r.y:o.y,left:r.x<o.x?r.x:o.x,width:Math.abs(o.x-r.x),height:Math.abs(o.y-r.y)}}},{key:"calculate",value:function(n,r){var o=this.rectCalc({start:n,end:r}),s=1*this.viewport.scale;return{top:o.top-s,left:o.left-s,width:o.width+2*s,height:o.height+2*s}}},{key:"setInitProperty",value:function(){var n=1;if(this.layer.annotationStore.annotationsAll)for(var r=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(u,d){return u.concat(d)},[]).filter(function(u){return u.type==="radiobutton"}),o=function(){var u="Group"+(s+1);if(r.every(function(d){return d.fieldName!==u}))return n=s+1,"break"},s=0;s<=r.length&&o()!=="break";s++);this.fieldName="Group"+n}}]),e}(),PushButton=function(e){_inherits(r,BaseAnnotation);var n=_createSuper(r);function r(o){var s,u=o.container,d=o.annotation,f=o.page,v=o.viewport,m=o.scale,_=o.eventBus,g=o.layer,y=o.show,w=y!==void 0&&y;return _classCallCheck(this,r),(s=n.call(this,{container:u,annotation:d,page:f,viewport:v,scale:m,eventBus:_,show:w})).layer=g,s.hidden=!0,s.initial=!1,s.outline=null,s.start=null,s.end=null,s.newStart=null,s.newEnd=null,s.startCircle=null,s.endCircle=null,s.show=w,s.onMousedown=s.handleMouseDown.bind(_assertThisInitialized(s)),s.onMouseup=s.handleMouseUp.bind(_assertThisInitialized(s)),s.onMousemove=s.handleMouseMove.bind(_assertThisInitialized(s)),s.onDelete=s.handleDelete.bind(_assertThisInitialized(s)),s.handlePropertyPanel=s.handlePropertyPanel.bind(_assertThisInitialized(s)),s.setProperty=s.setProperty.bind(_assertThisInitialized(s)),s.render(),s}return _createClass(r,[{key:"render",value:function(){this.eventBus._on("setProperty",this.setProperty);var o=this.annotation;this.annotation.backgroundColor||(this.annotation.backgroundColor="#1460F3"),o.isBold&&o.isItalic?o.fontStyle="boldItalic":o.isBold?o.fontStyle="bold":o.isItalic?o.fontStyle="italic":o.fontStyle="normal";var s=this.getActualRect(this.viewport,this.scale),u=s.start,d=s.end;this.start=u,this.end=d;var f,v=this.calculate(u,d),m=document.createElement("div");m.id=o.name,m.className="annotation",m.style.top=v.top+"px",m.style.left=v.left+"px",m.style.width=v.width+"px",m.style.height=v.height+"px",this.annotationContainer=m,this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),f=createElement("div",{left:0,top:0,width:"".concat(Math.abs(v.width),"px"),height:"".concat(Math.abs(v.height),"px"),backgroundColor:o.backgroundColor,position:"relative"}),this.shapeElement=f,this.annotationContainer.append(this.shapeElement),this.container.append(this.annotationContainer),this.buttonContainer=createElement("a",{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",outline:"none",borderColor:o.borderColor,borderWidth:(o.borderWidth||1)+"px",borderStyle:o.borderStyle||"solid",color:o.color,backgroundColor:o.backgroundColor,fontFamily:o.fontName,fontSize:o.fontSize+"px",fontWeight:o.isBold?"bold":"normal",fontStyle:o.isItalic?"italic":"normal",overflow:"hidden",textDecoration:"none"}),this.buttonContainer.innerHTML=o.title,this.shapeElement.append(this.buttonContainer),this.buttonContainer.addEventListener("blur",this.onBlur),this.annotation.url&&(this.buttonContainer.setAttribute("href",this.annotation.url),this.buttonContainer.setAttribute("target","_blank")),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr;var _=v.left+v.width-30+"px",g=v.top+v.height+8+"px";this.deletetButton.style.left=_,this.deletetButton.style.top=g;var y=document.createElementNS("http://www.w3.org/2000/svg","svg");y.style.position="absolute",y.style.zIndex=1,y.style.left="".concat(v.left-8,"px"),y.style.top="".concat(v.top-8,"px"),y.style.width="".concat(v.width+16,"px"),y.style.height="".concat(v.height+16,"px"),this.outerLine=y,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:v.width+8,height:v.height+8,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:v.height/2+5}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:v.height+9}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width/2+5,y:v.height+9}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width+9,y:v.height+9}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width+9,y:v.height/2+5}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width+9,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width/2+5,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.initial=!0,this.layer.toolMode!=="form"&&(this.annotation.isHidden==1?(this.annotationContainer.style.display="none",this.annotationContainer.style.pointerEvents="none"):this.annotation.isHidden==0&&(this.annotationContainer.style.display="block",this.annotationContainer.style.pointerEvents="auto")),this.annotation.backgroundColor==="transparent"&&(this.annotationContainer.style.backgroundColor="#DDE9FF"),this.show&&this.handleClick()}},{key:"getActualRect",value:function(o,s){var u=this.annotation.rect,d=u.left,f=u.top,v=u.right,m=u.bottom;return{start:getActualPoint({x:d,y:f},o),end:getActualPoint({x:v,y:m},o)}}},{key:"rectCalc",value:function(o){var s=o.start,u=o.end;return{top:s.y<u.y?s.y:u.y,left:s.x<u.x?s.x:u.x,width:Math.abs(u.x-s.x),height:Math.abs(u.y-s.y)}}},{key:"calculate",value:function(o,s){var u=this.rectCalc({start:o,end:s}),d=(this.annotation.borderWidth||2)*this.scale;return{top:u.top-d,left:u.left-d,width:u.width+2*d,height:u.height+2*d}}},{key:"getInitialPoint",value:function(){var o,s,u,d,f=this.scale,v=this.start.x,m=this.start.y,_=this.end.x,g=this.end.y,y=this.viewport,w=y.width,x=y.height,k=y.rotation;return k===0?(o=v/f,s=m/f,u=_/f,d=g/f):k===90?(o=m/f,s=v/f,u=g/f,d=_/f):k===180?(o=(w-v)/f,s=m/f,u=(w-_)/f,d=g/f):(o=(x-m)/f,s=(w-v)/f,u=(x-g)/f,d=(w-_)/f),{start:{x:o,y:s},end:{x:u,y:d}}}},{key:"updateTool",value:function(){this.initial&&(this.hidden?(this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove()):(this.layer.annotationStore.selectedElementName!==this.annotation.name&&(this.layer.annotationStore.selectedElementName=this.annotation.name),this.container.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.eventBus.dispatch("propertyChange",this.annotation)))}},{key:"handleClick",value:function(){if(this.hidden&&!document.fullscreenElement&&!this.layer.annotationStore.creating)if(this.layer.toolMode==="form"){this.hidden=!1,this.updateTool(),document.getElementsByClassName("right-panel")[0].className.indexOf("closed")!==-1&&document.getElementById("propertyPanelButton").click();var o=[this.annotationContainer,this.outerLine,this.deletetButton,document.getElementById("propertyPanelButton"),document.getElementsByClassName("right-panel")[0]];this.eventBus._on("pushButtonPropertyPanelChanged",this.handlePropertyPanel),onClickOutsideUp(o,this.handleOutside.bind(this))}else this.annotation.actionType==1&&this.annotation.destPage?this.eventBus.dispatch("pageNumberChanged",this.annotation.destPage):this.annotation.actionType==6&&this.annotation.url&&this.buttonContainer.click()}},{key:"handleOutside",value:function(){this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||(document.getElementById("propertyPanelButton").click(),this.eventBus.dispatch("propertyChange",null),this.layer.selectedElementName=null),this.hidden=!this.hidden,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLine.removeEventListener("mousedown",this.onMousedown),this.outerLine.removeEventListener("touchstart",this.onMousedown),this.outerLineContainer.remove(),this.eventBus._off("pushButtonPropertyPanelChanged",this.handlePropertyPanel)}},{key:"handleMouseDown",value:function(o){this.layer.tool&&o.stopPropagation();var s=o.target.getAttribute("data-id"),u=getClickPoint(o),d=u.pageX,f=u.pageY;this.startState={operator:s,clickX:d,clickY:f},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup),this.handleClick()}},{key:"handleMouseMove",value:function(o){o.type==="touchmove"&&(document.body.style.overscrollBehavior="none"),this.moving=!0;var s=getClickPoint(o),u=s.pageX,d=s.pageY,f=this.start,v=this.end,m=this.startState,_=this.viewport,g=_.width,y=_.height;if(m.operator==="nw-resize"){var w=u-(m.clickX-this.start.x),x=d-(m.clickY-this.start.y);w=Math.min(v.x-5,w),w=Math.max(0,w),x=Math.min(v.y-5,x),x=Math.max(0,x),this.update({start:{x:w,y:x},end:v})}else if(m.operator==="w-resize"){var k=u-(m.clickX-this.start.x);k=Math.min(v.x-5,k),k=Math.max(0,k),this.update({start:{x:k,y:f.y},end:v})}else if(m.operator==="sw-resize"){var S=u-(m.clickX-this.start.x),E=d-(m.clickY-this.end.y);S=Math.min(v.x-5,S),S=Math.max(0,S),E=Math.min(y,E),E=Math.max(f.y+5,E),this.update({start:{x:S,y:f.y},end:{x:v.x,y:E}})}else if(m.operator==="s-resize"){var T=d-(m.clickY-this.end.y);T=Math.min(y,T),T=Math.max(f.y+5,T),this.update({start:f,end:{x:v.x,y:T}})}else if(m.operator==="se-resize"){var M=u-(m.clickX-this.end.x),I=d-(m.clickY-this.end.y);M=Math.min(g,M),M=Math.max(f.x+5,M),I=Math.min(y,I),I=Math.max(f.y+5,I),this.update({start:f,end:{x:M,y:I}})}else if(m.operator==="e-resize"){var F=u-(m.clickX-this.end.x);F=Math.min(g,F),F=Math.max(f.x+5,F),this.update({start:f,end:{x:F,y:v.y}})}else if(m.operator==="ne-resize"){var O=u-(m.clickX-this.end.x),N=d-(m.clickY-this.start.y);O=Math.min(g,O),O=Math.max(f.x+5,O),N=Math.min(v.y-5,N),N=Math.max(0,N),this.update({start:{x:f.x,y:N},end:{x:O,y:v.y}})}else if(m.operator==="n-resize"){var D=d-(m.clickY-this.start.y);D=Math.min(v.y-5,D),D=Math.max(0,D),this.update({start:{x:f.x,y:D},end:v})}else if(m.operator==="move"){var X=u-(m.clickX-this.start.x),U=d-(m.clickY-this.start.y),Z=u-(m.clickX-this.end.x),j=d-(m.clickY-this.end.y),Q={width:Math.abs(f.x-v.x),height:Math.abs(f.y-v.y)};X<Z?(X=Math.max(0,X),X=Math.min(g-Q.width,X),Z=Math.max(Q.width,Z),Z=Math.min(g,Z)):(Z=Math.max(0,Z),Z=Math.min(g-Q.width,Z),X=Math.max(Q.width,X),X=Math.min(g,X)),U<j?(U=Math.max(0,U),U=Math.min(y-Q.height,U),j=Math.max(Q.height,j),j=Math.min(y,j)):(j=Math.max(0,j),j=Math.min(y-Q.height,j),U=Math.max(Q.height,U),U=Math.min(y,U)),this.update({start:{x:X,y:U},end:{x:Z,y:j}})}}},{key:"handleDelete",value:function(o){this.layer.tool&&o&&o.stopPropagation(),this.handleOutside(),this.annotationContainer.remove(),this.annotation.isDelete=!0;var s={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.page}};this.annotation.annotPtr&&(s.annotation.annotPtr=this.annotation.annotPtr),o||(s.type="empty"),this.eventBus.dispatch("annotationChange",s)}},{key:"handleMouseUp",value:function(o){this.layer.tool&&o.stopPropagation(),o.type==="touchend"&&(document.body.style.overscrollBehavior="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup);var s=getClickPoint(o),u=s.pageX,d=s.pageY;if(u!==this.startState.clickX||d!==this.startState.clickY){this.start=this.newStart,this.end=this.newEnd;var f=this.annotation,v=this.getInitialPoint(),m=v.start,_=v.end,g={left:m.x,top:m.y,right:_.x,bottom:_.y};this.eventBus.dispatch("annotationChange",{type:"modify",annotation:{operate:"mod-form",name:f.name,pageIndex:this.page,pagePtr:f.pagePtr,annotPtr:f.annotPtr,rect:g}})}}},{key:"update",value:function(o){var s=o.start,u=o.end,d=this.calculate(s,u);this.newStart=s,this.newEnd=u,this.annotation.borderWidth,this.scale,this.annotationContainer.style.top=d.top+"px",this.annotationContainer.style.left=d.left+"px",this.annotationContainer.style.width=d.width+"px",this.annotationContainer.style.height=d.height+"px",this.annotationContainer.style.width="".concat(d.width,"px"),this.annotationContainer.style.height="".concat(d.height,"px"),this.shapeElement.style.width="".concat(d.width,"px"),this.shapeElement.style.height="".concat(d.height,"px"),this.outerLine.style.left="".concat(d.left-8,"px"),this.outerLine.style.top="".concat(d.top-8,"px"),this.outerLine.style.width="".concat(d.width+16,"px"),this.outerLine.style.height="".concat(d.height+16,"px");var f=d.left+d.width-30+"px",v=d.top+d.height+8+"px";this.deletetButton.style.left=f,this.deletetButton.style.top=v,this.moveRect.setAttribute("width",d.width+9),this.moveRect.setAttribute("height",d.height+9),this.LeftRect.setAttribute("y",d.height/2+5),this.bottomLeftRect.setAttribute("y",d.height+9),this.bottomRect.setAttribute("x",d.width/2+5),this.bottomRect.setAttribute("y",d.height+9),this.bottomRightRect.setAttribute("x",d.width+9),this.bottomRightRect.setAttribute("y",d.height+9),this.rightRect.setAttribute("x",d.width+9),this.rightRect.setAttribute("y",d.height/2+5),this.topRightRect.setAttribute("x",d.width+9),this.topRect.setAttribute("x",d.width/2+5)}},{key:"handlePropertyPanel",value:function(o){if(this.layer.annotationStore.selectedElementName===this.annotation.name){var s=this.annotation,u=0;for(var d in o)for(var f in this.annotation)if(f===d&&this.annotation[f]!==o[d]&&(this.annotation[f]=o[d],u++,d==="backgroundColor"&&(this.buttonContainer.style[d]=o[d],o[d]===""&&(o.clearBackgroundColor=!0)),d==="fontSize"&&(this.buttonContainer.style.fontSize=o[d]+"px"),d==="color"&&(this.buttonContainer.style.color=o[d]),d==="fontName"&&(this.buttonContainer.style.fontFamily=o[d]),d==="title"&&(this.buttonContainer.innerHTML=o[d]),d==="url"&&(this.buttonContainer.setAttribute("href",this.annotation.url),this.buttonContainer.setAttribute("target","_blank")),d==="fontStyle")){var v=o[d];v==="boldItalic"?(this.buttonContainer.style.fontStyle="italic",this.buttonContainer.style.fontWeight="bold",s.isBold=!0,s.isItalic=!0):v==="bold"?(this.buttonContainer.style.fontStyle="normal",this.buttonContainer.style.fontWeight="bold",s.isBold=!0,s.isItalic=!1):v==="italic"?(this.buttonContainer.style.fontStyle="italic",this.buttonContainer.style.fontWeight="normal",s.isBold=!1,s.isItalic=!0):(s.isItalic=!1,s.isBold=!1,this.buttonContainer.style.fontStyle="normal",this.buttonContainer.style.fontWeight="normal")}if(u>0){var m={operate:"mod-form",name:this.annotation.name,pageIndex:this.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,pageHeight:this.viewport.rawDims.pageHeight};(o.destPage||o.url)&&this.annotation.actionType!=="0"&&(m.actionType=this.annotation.actionType);var _=["fontSize","fontName","color","fontStyle"].some(function(x){return o[x]});if(_){m.fontSize=s.fontSize,m.color=s.color;var g={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},y=s.fontName;s.isBold&&s.isItalic?m.fontName=g[y].boldItalic:s.isBold?m.fontName=g[y].bold:s.isItalic?m.fontName=g[y].italic:m.fontName=g[y].normal}var w=Object.assign({},m,o);this.eventBus.dispatch("annotationChange",{type:"modify",annotation:w})}}}},{key:"setProperty",value:function(o){if(o.name===this.annotation.name){for(var s in o)for(var u in this.annotation)u===s&&this.annotation[u]!==o[s]&&(this.annotation[u]=o[s],s==="backgroundColor"&&(this.buttonContainer.style[s]=o[s]),s==="fontSize"&&(this.buttonContainer.style.fontSize=o[s]+"px"),s==="textColor"&&(this.buttonContainer.style.color=o[s]),s==="fontName"&&(this.buttonContainer.style.fontFamily=o[s]),s==="title"&&(this.buttonContainer.innerHTML=o[s]),s==="url"&&(this.buttonContainer.setAttribute("href",this.annotation.url),this.buttonContainer.setAttribute("target","_blank")));var d={operate:"mod-form",pageIndex:this.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr},f=Object.assign({},d,o);this.eventBus.dispatch("annotationChange",{type:"modify",annotation:f})}}}]),r}(),AddPushButton=function(){function e(n){var r=n.tool,o=n.color,s=n.svgElement,u=n.layer,d=n.container,f=n.viewport,v=n.page,m=n.eventBus;_classCallCheck(this,e),this.layer=u,this._tool=r,this.color=o,this.svgElement=s,this.container=d,this.viewport=f,this.page=v,this.eventBus=m,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.buttonEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.initPushButtonName=this.setInitProperty.bind(this),this.init()}return _createClass(e,[{key:"init",value:function(){this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown),this.container.addEventListener("mousedown",this.onMousedown),this.container.addEventListener("touchstart",this.onMousedown),this.svgElement.style.cursor="crosshair",this.container.style.touchAction="none",document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.eventBus._on("initPushButtonName",this.initPushButtonName)}},{key:"tool",get:function(){return this._tool},set:function(n){n!==this._tool&&(n||(this.reset(),this.svgElement.style.cursor="default",this.container.style.touchAction="",this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown)),this._tool=n)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.buttonEle&&this.buttonEle.remove(),this.buttonEle=null,this.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown),this.eventBus._off("initPushButtonName",this.initPushButtonName)}},{key:"handleMouseDown",value:function(n){if(!this.layer.annotationStore.selectedElementName){var r=getAbsoluteCoordinate(this.container,n),o=r.x,s=r.y;this.initStartPoint={x:o,y:s},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var n=this.initStartPoint,r=this.initEndPoint;if(r&&n.x!==r.x&&n.y!==r.y){var o=getInitialPoint(n,this.viewport,this.viewport.scale),s=getInitialPoint(r,this.viewport,this.viewport.scale);this.setInitProperty();var u={x:Math.min(o.x,s.x),y:Math.min(o.y,s.y)},d={x:Math.max(o.x,s.x),y:Math.max(o.y,s.y)},f={left:u.x,top:u.y,right:d.x,bottom:d.y},v={operate:"add-form",type:"pushbutton",pageIndex:this.page,date:new Date,rect:f,backgroundColor:"#DDE9FF",borderColor:"#43474D",borderStyle:"solid",borderWidth:1,fieldName:this.fieldName,isHidden:0,color:"#000000",fontName:"Helvetica",fontSize:14,title:"OK",actionType:0,destPage:"",url:""};this.eventBus.dispatch("annotationChange",{type:"add",show:!0,annotation:v})}this.initStartPoint=null,this.initEndPoint=null,this.buttonEle&&this.buttonEle.remove(),this.buttonEle=null,this.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(n){var r=getAbsoluteCoordinate(this.container,n),o=r.x,s=r.y,u=this.viewport,d=u.width,f=u.height;if(this.viewport.scale,o=Math.min(d,o),o=Math.max(0,o),s=Math.min(f,s),s=Math.max(0,s),this.initEndPoint={x:o,y:s},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.buttonEle){if(n.shiftKey){var v=this.initStartPoint,m=this.initEndPoint,_=Math.abs(m.x-v.x),g=Math.abs(m.y-v.y),y=Math.min(_,g);v.x<m.x?m.x=v.x+y:m.x=v.x-y,v.y<m.y?m.y=v.y+y:m.y=v.y-y}var w=this.calculate(this.initStartPoint,this.initEndPoint),x=this.buttonEle;x.style.top="".concat(w.top,"px"),x.style.left="".concat(w.left,"px"),x.style.width="".concat(Math.abs(w.width-1),"px"),x.style.height="".concat(Math.abs(w.height-1),"px")}else{var k=createElement("div",{display:"flex",alignItems:"center",justifyContent:"center",color:"#000000",fontSize:"14px",borderColor:"#001A4E",borderWidth:"1px",borderStyle:"solid",backgroundColor:"#DDE9FF",position:"absolute",fontFamily:"Helvetica",overflow:"hidden"});k.innerHTML="OK",this.buttonEle=k,this.scene=this.container.querySelector(".annotationLayer"),this.scene.append(this.buttonEle)}}},{key:"rectCalc",value:function(n){var r=n.start,o=n.end;return{top:r.y<o.y?r.y:o.y,left:r.x<o.x?r.x:o.x,width:Math.abs(o.x-r.x),height:Math.abs(o.y-r.y)}}},{key:"calculate",value:function(n,r){var o=this.rectCalc({start:n,end:r}),s=1*this.viewport.scale;return{top:o.top-s,left:o.left-s,width:o.width+2*s,height:o.height+2*s}}},{key:"setInitProperty",value:function(){var n=1;if(this.layer.annotationStore.annotationsAll)for(var r=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(u,d){return u.concat(d)},[]).filter(function(u){return u.type==="pushbutton"}),o=function(){var u="Button"+(s+1);if(r.every(function(d){return d.fieldName!==u}))return n=s+1,"break"},s=0;s<=r.length&&o()!=="break";s++);this.fieldName="Button"+n}}]),e}(),ListBox=function(e){_inherits(r,BaseAnnotation);var n=_createSuper(r);function r(o){var s,u=o.container,d=o.annotation,f=o.page,v=o.viewport,m=o.scale,_=o.eventBus,g=o.layer,y=o.show,w=y!==void 0&&y;return _classCallCheck(this,r),(s=n.call(this,{container:u,annotation:d,page:f,viewport:v,scale:m,eventBus:_,show:w})).layer=g,s.hidden=!0,s.initial=!1,s.outline=null,s.start=null,s.end=null,s.newStart=null,s.newEnd=null,s.startCircle=null,s.endCircle=null,s.show=w,s.onMousedown=s.handleMouseDown.bind(_assertThisInitialized(s)),s.onMouseup=s.handleMouseUp.bind(_assertThisInitialized(s)),s.onMousemove=s.handleMouseMove.bind(_assertThisInitialized(s)),s.onDelete=s.handleDelete.bind(_assertThisInitialized(s)),s.setProperty=s.setProperty.bind(_assertThisInitialized(s)),s.changeSelectAvailable=s.changeSelectAvailable.bind(_assertThisInitialized(s)),s.handlePropertyPanel=s.handlePropertyPanel.bind(_assertThisInitialized(s)),s.render(),s}return _createClass(r,[{key:"render",value:function(){this.eventBus._on("setProperty",this.setProperty),this.eventBus._on("changeSelectAvailable",this.changeSelectAvailable);var o=this.annotation;o.items||(o.items=[]),o.fontName||(o.fontName="Helvetica"),o.isBold&&o.isItalic?o.fontStyle="boldItalic":o.isBold?o.fontStyle="bold":o.isItalic?o.fontStyle="italic":o.fontStyle="normal",this.annotation.selected||this.annotation.selected===0||(this.annotation.selected=null);var s=this.getActualRect(this.viewport,this.scale),u=s.start,d=s.end;this.start=u,this.end=d;var f=this.calculate(u,d),v=document.createElement("div");v.id=o.name,v.className="annotation",v.style.top=f.top+"px",v.style.left=f.left+"px",v.style.width=f.width+"px",v.style.height=f.height+"px",this.annotationContainer=v,this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this));var m=createElement("div",{left:0,top:0,width:"".concat(Math.abs(f.width),"px"),height:"".concat(Math.abs(f.height),"px"),position:"relative"});this.borderElement=m;var _=createElement("div",{width:"".concat(Math.abs(f.width),"px"),height:"".concat(Math.abs(f.height),"px"),borderColor:o.borderColor,borderWidth:(o.borderWidth||1)+"px",borderStyle:o.borderStyle||"solid",cursor:"pointer",backgroundColor:o.backgroundColor,fontSize:o.fontSize+"px",fontWeight:o.isBold?"bold":"normal",fontStyle:o.isItalic?"italic":"normal",fontFamily:o.fontName,color:o.color||"#001A4E",overflow:"auto"});if(this.selectElement=_,this.borderElement.append(this.selectElement),this.annotationContainer.append(this.borderElement),this.container.append(this.annotationContainer),o.items&&o.items.length>0)for(var g=0;g<o.items.length;g++){var y=createElement("div",{width:"100%",height:"30px",lineHeight:"30px",borderBottom:"1px solid #666666",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},{class:"option"});y.innerText=o.items[g].Value,this.annotation.selected===g&&(y.style.backgroundColor="#dcdcdc"),this.selectElement.appendChild(y)}this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr;var w=f.left+f.width-30+"px",x=f.top+f.height+8+"px";this.deletetButton.style.left=w,this.deletetButton.style.top=x;var k=document.createElementNS("http://www.w3.org/2000/svg","svg");k.style.position="absolute",k.style.zIndex=1,k.style.left="".concat(f.left-8,"px"),k.style.top="".concat(f.top-8,"px"),k.style.width="".concat(f.width+16,"px"),k.style.height="".concat(f.height+16,"px"),this.outerLine=k,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:f.width+8,height:f.height+8,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:f.height/2+5}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:f.height+9}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:f.width/2+5,y:f.height+9}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:f.width+9,y:f.height+9}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:f.width+9,y:f.height/2+5}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:f.width+9,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:f.width/2+4,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.initial=!0,this.layer.toolMode!=="form"&&(this.annotation.isHidden==1?(this.annotationContainer.style.display="none",this.annotationContainer.style.pointerEvents="none"):this.annotation.isHidden==0&&(this.annotationContainer.style.display="block",this.annotationContainer.style.pointerEvents="auto")),this.show&&this.handleClick()}},{key:"getActualRect",value:function(o,s){var u=this.annotation.rect,d=u.left,f=u.top,v=u.right,m=u.bottom;return{start:getActualPoint({x:d,y:f},o),end:getActualPoint({x:v,y:m},o)}}},{key:"rectCalc",value:function(o){var s=o.start,u=o.end;return{top:s.y<u.y?s.y:u.y,left:s.x<u.x?s.x:u.x,width:Math.abs(u.x-s.x),height:Math.abs(u.y-s.y)}}},{key:"calculate",value:function(o,s){var u=this.rectCalc({start:o,end:s}),d=(this.annotation.borderWidth||1)*this.scale;return{top:u.top-d,left:u.left-d,width:u.width+2*d,height:u.height+2*d}}},{key:"getInitialPoint",value:function(){var o,s,u,d,f=this.scale,v=this.start.x,m=this.start.y,_=this.end.x,g=this.end.y,y=this.viewport,w=y.width,x=y.height,k=y.rotation;return k===0?(o=v/f,s=m/f,u=_/f,d=g/f):k===90?(o=m/f,s=v/f,u=g/f,d=_/f):k===180?(o=(w-v)/f,s=m/f,u=(w-_)/f,d=g/f):(o=(x-m)/f,s=(w-v)/f,u=(x-g)/f,d=(w-_)/f),{start:{x:o,y:s},end:{x:u,y:d}}}},{key:"updateTool",value:function(){this.initial&&(this.hidden?(this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLineContainer.remove()):(this.layer.annotationStore.selectedElementName!==this.annotation.name&&(this.layer.annotationStore.selectedElementName=this.annotation.name),this.container.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.eventBus.dispatch("propertyChange",this.annotation)))}},{key:"handleClick",value:function(o){if(this.hidden&&!document.fullscreenElement&&!this.layer.annotationStore.creating){if(this.layer.toolMode==="form")this.hidden=!1,this.updateTool(),this.hidden||document.getElementsByClassName("right-panel")[0].className.indexOf("closed")===-1||document.getElementById("propertyPanelButton").click(),this.eventBus._on("listBoxPropertyPanelChanged",this.handlePropertyPanel),onClickOutsideUp([this.annotationContainer,this.outerLine,this.deletetButton,document.getElementById("propertyPanelButton"),document.getElementsByClassName("right-panel")[0]],this.handleOutside.bind(this));else if(o.target&&o.target.className==="option"){for(var s=o.target.parentNode.children,u=0;u<s.length;u++)if(s[u]===o.target){this.annotation.selected=u;break}this.handleSelectItemBg()}}}},{key:"handleOutside",value:function(){this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||document.getElementById("propertyPanelButton").click(),this.hidden=!this.hidden,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLine.removeEventListener("mousedown",this.onMousedown),this.outerLine.removeEventListener("touchstart",this.onMousedown),this.outerLineContainer.remove(),this.eventBus._off("listBoxPropertyPanelChanged",this.handlePropertyPanel)}},{key:"handleMouseDown",value:function(o){this.layer.tool&&o.stopPropagation();var s=o.target.getAttribute("data-id"),u=getClickPoint(o),d=u.pageX,f=u.pageY;this.startState={operator:s,clickX:d,clickY:f},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup),this.handleClick()}},{key:"handleMouseMove",value:function(o){o.type==="touchmove"&&(document.body.style.overscrollBehavior="none"),this.moving=!0;var s=getClickPoint(o),u=s.pageX,d=s.pageY,f=this.start,v=this.end,m=this.startState,_=this.viewport,g=_.width,y=_.height;if(m.operator==="nw-resize"){var w=u-(m.clickX-this.start.x),x=d-(m.clickY-this.start.y);w=Math.min(v.x-5,w),w=Math.max(0,w),x=Math.min(v.y-5,x),x=Math.max(0,x),this.update({start:{x:w,y:x},end:v})}else if(m.operator==="w-resize"){var k=u-(m.clickX-this.start.x);k=Math.min(v.x-5,k),k=Math.max(0,k),this.update({start:{x:k,y:f.y},end:v})}else if(m.operator==="sw-resize"){var S=u-(m.clickX-this.start.x),E=d-(m.clickY-this.end.y);S=Math.min(v.x-5,S),S=Math.max(0,S),E=Math.min(y,E),E=Math.max(f.y+5,E),this.update({start:{x:S,y:f.y},end:{x:v.x,y:E}})}else if(m.operator==="s-resize"){var T=d-(m.clickY-this.end.y);T=Math.min(y,T),T=Math.max(f.y+5,T),this.update({start:f,end:{x:v.x,y:T}})}else if(m.operator==="se-resize"){var M=u-(m.clickX-this.end.x),I=d-(m.clickY-this.end.y);M=Math.min(g,M),M=Math.max(f.x+5,M),I=Math.min(y,I),I=Math.max(f.y+5,I),this.update({start:f,end:{x:M,y:I}})}else if(m.operator==="e-resize"){var F=u-(m.clickX-this.end.x);F=Math.min(g,F),F=Math.max(f.x+5,F),this.update({start:f,end:{x:F,y:v.y}})}else if(m.operator==="ne-resize"){var O=u-(m.clickX-this.end.x),N=d-(m.clickY-this.start.y);O=Math.min(g,O),O=Math.max(f.x+5,O),N=Math.min(v.y-5,N),N=Math.max(0,N),this.update({start:{x:f.x,y:N},end:{x:O,y:v.y}})}else if(m.operator==="n-resize"){var D=d-(m.clickY-this.start.y);D=Math.min(v.y-5,D),D=Math.max(0,D),this.update({start:{x:f.x,y:D},end:v})}else if(m.operator==="move"){var X=u-(m.clickX-this.start.x),U=d-(m.clickY-this.start.y),Z=u-(m.clickX-this.end.x),j=d-(m.clickY-this.end.y),Q={width:Math.abs(f.x-v.x),height:Math.abs(f.y-v.y)};X<Z?(X=Math.max(0,X),X=Math.min(g-Q.width,X),Z=Math.max(Q.width,Z),Z=Math.min(g,Z)):(Z=Math.max(0,Z),Z=Math.min(g-Q.width,Z),X=Math.max(Q.width,X),X=Math.min(g,X)),U<j?(U=Math.max(0,U),U=Math.min(y-Q.height,U),j=Math.max(Q.height,j),j=Math.min(y,j)):(j=Math.max(0,j),j=Math.min(y-Q.height,j),U=Math.max(Q.height,U),U=Math.min(y,U)),this.update({start:{x:X,y:U},end:{x:Z,y:j}})}}},{key:"handleDelete",value:function(o){this.layer.tool&&o&&o.stopPropagation(),this.handleOutside(),this.annotationContainer.remove(),this.annotation.isDelete=!0;var s={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.page}};this.annotation.annotPtr&&(s.annotation.annotPtr=this.annotation.annotPtr),o||(s.type="empty"),this.eventBus.dispatch("annotationChange",s)}},{key:"handleMouseUp",value:function(o){this.layer.tool&&o.stopPropagation(),o.type==="touchend"&&(document.body.style.overscrollBehavior="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup);var s=getClickPoint(o),u=s.pageX,d=s.pageY;if(u!==this.startState.clickX||d!==this.startState.clickY){this.start=this.newStart,this.end=this.newEnd;var f=this.annotation,v=this.getInitialPoint(),m=v.start,_=v.end,g={left:m.x,top:m.y,right:_.x,bottom:_.y};this.eventBus.dispatch("annotationChange",{type:"modify",annotation:{operate:"mod-form",name:f.name,pageIndex:this.page,pagePtr:f.pagePtr,annotPtr:f.annotPtr,rect:g}})}}},{key:"update",value:function(o){var s=o.start,u=o.end,d=this.calculate(s,u);this.newStart=s,this.newEnd=u,this.annotationContainer.style.top=d.top+"px",this.annotationContainer.style.left=d.left+"px",this.annotationContainer.style.width=d.width+"px",this.annotationContainer.style.height=d.height+"px",this.annotationContainer.style.width="".concat(d.width,"px"),this.annotationContainer.style.height="".concat(d.height,"px"),this.borderElement.style.width="".concat(d.width,"px"),this.borderElement.style.height="".concat(d.height,"px"),this.selectElement.style.width="".concat(d.width,"px"),this.selectElement.style.height="".concat(d.height,"px"),this.outerLine.style.left="".concat(d.left-8,"px"),this.outerLine.style.top="".concat(d.top-8,"px"),this.outerLine.style.width="".concat(d.width+16,"px"),this.outerLine.style.height="".concat(d.height+16,"px");var f=d.left+d.width-30+"px",v=d.top+d.height+8+"px";this.deletetButton.style.left=f,this.deletetButton.style.top=v,this.moveRect.setAttribute("width",d.width+9),this.moveRect.setAttribute("height",d.height+9),this.LeftRect.setAttribute("y",d.height/2+5),this.bottomLeftRect.setAttribute("y",d.height+9),this.bottomRect.setAttribute("x",d.width/2+5),this.bottomRect.setAttribute("y",d.height+9),this.bottomRightRect.setAttribute("x",d.width+9),this.bottomRightRect.setAttribute("y",d.height+9),this.rightRect.setAttribute("x",d.width+9),this.rightRect.setAttribute("y",d.height/2+5),this.topRightRect.setAttribute("x",d.width+9),this.topRect.setAttribute("x",d.width/2+5)}},{key:"handlePropertyPanel",value:function(o){var s=this.annotation;if(this.layer.annotationStore.selectedElementName===s.name){var u=0;for(var d in o){for(var f in s)if(f===d&&this.annotation[f]!==o[d]&&d!=="items"&&(this.annotation[f]=o[d],u++,s[f]=o[d],d==="backgroundColor"&&(o[d]===""&&(o.clearBackgroundColor=!0),this.selectElement.style[d]=o[d]),d==="fontSize"&&(this.selectElement.style.fontSize=o[d]+"px"),d==="color"&&(this.selectElement.style.color=o[d]),d==="fontName"&&(this.selectElement.style.fontFamily=o[d]),d==="fontStyle")){var v=o[d];v==="boldItalic"?(this.selectElement.style.fontStyle="italic",this.selectElement.style.fontWeight="bold",s.isBold=!0,s.isItalic=!0):v==="bold"?(this.selectElement.style.fontStyle="normal",this.selectElement.style.fontWeight="bold",s.isBold=!0,s.isItalic=!1):v==="italic"?(this.selectElement.style.fontStyle="italic",this.selectElement.style.fontWeight="normal",s.isBold=!1,s.isItalic=!0):(s.isItalic=!1,s.isBold=!1,this.selectElement.style.fontStyle="normal",this.selectElement.style.fontWeight="normal")}if(d==="item"){if(s.items.includes(o.item)){delete o.item;continue}u++,s.items.push({Value:o.item,String:o.item});var m=createElement("div",{width:"100%",height:"30px",lineHeight:"30px",borderBottom:"1px solid #666666",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},{class:"option"});m.value=o.item,m.innerHTML=o.item,this.selectElement.appendChild(m),o.item={value:o.item,index:s.items.length-1}}if(d==="deleteItemIndex"){u++;var _=o.deleteItemIndex;s.selected===o.deleteItemIndex&&(s.selected=null),s.items.splice(_,1),this.selectElement.children[_].remove()}if(d==="moveOption"){u++;var g=o.moveOption.fromIndex,y=o.moveOption.toIndex,w=s.items;g>y?w.splice(g-1,2,w[g],w[g-1]):w.splice(g,2,w[g+1],w[g]),o.moveOption.item={Value:w[y].Value,String:w[y].String};var x=this.selectElement.children[g];x.remove(),this.selectElement.insertBefore(x,this.selectElement.children[y])}}if(u>0){var k={operate:"mod-form",name:this.annotation.name,pageIndex:this.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr};s.items.length||(o.clearOption=!0);var S=["fontSize","fontName","color","fontStyle"].some(function(I){return o[I]});if(S){k.fontSize=s.fontSize,k.color=s.color;var E={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},T=s.fontName;s.isBold&&s.isItalic?k.fontName=E[T].boldItalic:s.isBold?k.fontName=E[T].bold:s.isItalic?k.fontName=E[T].italic:k.fontName=E[T].normal}var M=Object.assign({},k,o);!s.annotPtr&&(M.items=s.items),this.eventBus.dispatch("annotationChange",{type:"modify",annotation:M})}}}},{key:"setProperty",value:function(o){var s=this.annotation;if(o.name===s.name){for(var u in o)for(var d in s)d===u&&s[d]!==o[u]&&(s[d]=o[u],u==="backgroundColor"&&(this.selectElement.style[u]=o[u]));var f={operate:"mod-form",pageIndex:this.page,pagePtr:s.pagePtr,annotPtr:s.annotPtr},v=["fontSize","fontName","color","fontStyle"].some(function(y){return o[y]});if(v){f.fontSize=s.fontSize,f.color=s.color;var m={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},_=s.fontName;s.isBold&&s.isItalic?f.fontName=m[_].boldItalic:s.isBold?f.fontName=m[_].bold:s.isItalic?f.fontName=m[_].italic:f.fontName=m[_].normal}var g=Object.assign({},f,o);this.eventBus.dispatch("annotationChange",{type:"modify",annotation:g})}}},{key:"changeSelectAvailable",value:function(){this.layer.toolMode==="form"?this.selectElement.style.pointerEvents="none":this.selectElement.style.pointerEvents="auto"}},{key:"handleSelectItemBg",value:function(){var o,s=_createForOfIteratorHelper(this.selectElement.children);try{for(s.s();!(o=s.n()).done;)o.value.style.backgroundColor="unset"}catch(u){s.e(u)}finally{s.f()}this.selectElement.children[this.annotation.selected]&&(this.selectElement.children[this.annotation.selected].style.backgroundColor="#dcdcdc"),this.setProperty({selected:this.annotation.selected,name:this.annotation.name})}}]),r}(),AddListBox=function(){function e(n){var r=n.tool,o=n.color,s=n.svgElement,u=n.layer,d=n.container,f=n.viewport,v=n.page,m=n.eventBus;_classCallCheck(this,e),this.layer=u,this._tool=r,this.color=o,this.svgElement=s,this.container=d,this.viewport=f,this.page=v,this.eventBus=m,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.initListboxName=this.setInitProperty.bind(this),this.init()}return _createClass(e,[{key:"init",value:function(){this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown),this.container.addEventListener("mousedown",this.onMousedown),this.container.addEventListener("touchstart",this.onMousedown),this.svgElement.style.cursor="crosshair",this.container.style.touchAction="none",document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.eventBus._on("initListboxName",this.initListboxName)}},{key:"tool",get:function(){return this._tool},set:function(n){n!==this._tool&&(n||(this.reset(),this.svgElement.style.cursor="default",this.container.style.touchAction="",this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown)),this._tool=n)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown),this.eventBus._off("initListboxName",this.initListboxName)}},{key:"handleMouseDown",value:function(n){if(!this.layer.annotationStore.selectedElementName){var r=getAbsoluteCoordinate(this.container,n),o=r.x,s=r.y;this.initStartPoint={x:o,y:s},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var n=this.initStartPoint,r=this.initEndPoint;if(r&&n.x!==r.x&&n.y!==r.y){var o=getInitialPoint(n,this.viewport,this.viewport.scale),s=getInitialPoint(r,this.viewport,this.viewport.scale);this.setInitProperty();var u={x:Math.min(o.x,s.x),y:Math.min(o.y,s.y)},d={x:Math.max(o.x,s.x),y:Math.max(o.y,s.y)},f={left:u.x,top:u.y,right:d.x,bottom:d.y},v={operate:"add-form",type:"listbox",pageIndex:this.page,date:new Date,rect:f,backgroundColor:"#DDE9FF",borderColor:"#43474D",borderStyle:"solid",borderWidth:1,fieldName:this.fieldName,isHidden:0,color:"#000000",fontName:"Helvetica",fontSize:14,items:[{Value:this.layer.annotationStore.$t("rightPanel.option")+"1",String:this.layer.annotationStore.$t("rightPanel.option")+"1"},{Value:this.layer.annotationStore.$t("rightPanel.option")+"2",String:this.layer.annotationStore.$t("rightPanel.option")+"2"}],selected:0};this.eventBus.dispatch("annotationChange",{type:"add",show:!0,annotation:v})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(n){var r=getAbsoluteCoordinate(this.container,n),o=r.x,s=r.y,u=this.viewport,d=u.width,f=u.height;if(this.viewport.scale,o=Math.min(d,o),o=Math.max(0,o),s=Math.min(f,s),s=Math.max(0,s),this.initEndPoint={x:o,y:s},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(n.shiftKey){var v=this.initStartPoint,m=this.initEndPoint,_=Math.abs(m.x-v.x),g=Math.abs(m.y-v.y),y=Math.min(_,g);v.x<m.x?m.x=v.x+y:m.x=v.x-y,v.y<m.y?m.y=v.y+y:m.y=v.y-y}var w=this.calculate(this.initStartPoint,this.initEndPoint),x=this.shapeEle;x.style.top="".concat(w.top,"px"),x.style.left="".concat(w.left,"px"),x.style.width="".concat(Math.abs(w.width-1),"px"),x.style.height="".concat(Math.abs(w.height-1),"px")}else{var k=createElement("div",{backgroundColor:"#DDE9FF",borderColor:"#43474D",borderWidth:"1px",borderStyle:"solid",position:"absolute"});this.shapeEle=k,this.scene=this.container.querySelector(".annotationLayer"),this.scene.append(this.shapeEle)}}},{key:"rectCalc",value:function(n){var r=n.start,o=n.end;return{top:r.y<o.y?r.y:o.y,left:r.x<o.x?r.x:o.x,width:Math.abs(o.x-r.x),height:Math.abs(o.y-r.y)}}},{key:"calculate",value:function(n,r){var o=this.rectCalc({start:n,end:r}),s=1*this.viewport.scale;return{top:o.top-s,left:o.left-s,width:o.width+2*s,height:o.height+2*s}}},{key:"setInitProperty",value:function(){var n=1;if(this.layer.annotationStore.annotationsAll)for(var r=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(u,d){return u.concat(d)},[]).filter(function(u){return u.type==="listbox"}),o=function(){var u="List Box"+(s+1);if(r.every(function(d){return d.fieldName!==u}))return n=s+1,"break"},s=0;s<=r.length&&o()!=="break";s++);this.fieldName="List Box"+n}}]),e}(),ComboBox=function(e){_inherits(r,BaseAnnotation);var n=_createSuper(r);function r(o){var s,u=o.container,d=o.annotation,f=o.page,v=o.viewport,m=o.scale,_=o.eventBus,g=o.layer,y=o.show,w=y!==void 0&&y;return _classCallCheck(this,r),(s=n.call(this,{container:u,annotation:d,page:f,viewport:v,scale:m,eventBus:_,show:w})).layer=g,s.hidden=!0,s.initial=!1,s.outline=null,s.start=null,s.end=null,s.newStart=null,s.newEnd=null,s.startCircle=null,s.endCircle=null,s.show=w,s.onMousedown=s.handleMouseDown.bind(_assertThisInitialized(s)),s.onMouseup=s.handleMouseUp.bind(_assertThisInitialized(s)),s.onMousemove=s.handleMouseMove.bind(_assertThisInitialized(s)),s.onDelete=s.handleDelete.bind(_assertThisInitialized(s)),s.handlePropertyPanel=s.handlePropertyPanel.bind(_assertThisInitialized(s)),s.setProperty=s.setProperty.bind(_assertThisInitialized(s)),s.changeSelectAvailable=s.changeSelectAvailable.bind(_assertThisInitialized(s)),s.render(),s}return _createClass(r,[{key:"render",value:function(){this.eventBus._on("setProperty",this.setProperty),this.eventBus._on("changeSelectAvailable",this.changeSelectAvailable);var o=this.annotation;o.items||(o.items=[]),o.fontName||(o.fontName="Helvetica"),this.annotation.selected||this.annotation.selected===0||(this.annotation.selected=null),o.isBold&&o.isItalic?o.fontStyle="boldItalic":o.isBold?o.fontStyle="bold":o.isItalic?o.fontStyle="italic":o.fontStyle="normal";var s=this.getActualRect(this.viewport,this.scale),u=s.start,d=s.end;this.start=u,this.end=d;var f=this.calculate(u,d),v=document.createElement("div");v.id=o.name,v.className="annotation",v.style.top=f.top+"px",v.style.left=f.left+"px",v.style.width=f.width+"px",v.style.height=f.height+"px",this.annotationContainer=v,this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this));var m=createElement("div",{left:0,top:0,width:"".concat(Math.abs(f.width),"px"),height:"".concat(Math.abs(f.height),"px"),position:"relative",overflow:"hidden"});this.borderElement=m;var _=createElement("select",{paddingLeft:"4px",width:"".concat(Math.abs(f.width),"px"),height:"".concat(Math.abs(f.height),"px"),borderColor:o.borderColor,borderWidth:(o.borderWidth||1)+"px",borderStyle:o.borderStyle||"solid",cursor:"pointer",webkitAppearance:"none",appearance:"none",backgroundColor:o.backgroundColor,fontSize:o.fontSize+"px",fontFamily:o.fontName,color:o.color,fontWeight:o.isBold?"bold":"normal",fontStyle:o.isItalic?"italic":"normal",textOverflow:"ellipsis",whiteSpace:"nowrap"});this.layer.toolMode==="form"&&(_.style.pointerEvents="none"),this.selectElement=_;var g=createSvg("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},{width:"".concat(f.height/2,"px"),height:"".concat(f.height/2,"px"),position:"absolute",right:"4px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none"}),y=createSvg("path",{d:"M4 5.51025L8.0041 10.5L12 5.5L4 5.51025Z",fill:"#666"},{pointerEvents:"none"});if(this.svgElement=g,this.svgElement.append(y),this.borderElement.append(this.svgElement),this.borderElement.append(this.selectElement),this.annotationContainer.append(this.borderElement),this.container.append(this.annotationContainer),o.items&&o.items.length>0)for(var w=0;w<o.items.length;w++){var x=createElement("option");x.value=o.items[w].Value,x.innerHTML=o.items[w].Value,o.selected===w&&(x.selected=!0),this.selectElement.appendChild(x)}this.selectElement.addEventListener("change",this.handleSelect.bind(this)),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr;var k=f.left+f.width-30+"px",S=f.top+f.height+8+"px";this.deletetButton.style.left=k,this.deletetButton.style.top=S;var E=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.zIndex=1,E.style.left="".concat(f.left-8,"px"),E.style.top="".concat(f.top-8,"px"),E.style.width="".concat(f.width+16,"px"),E.style.height="".concat(f.height+16,"px"),this.outerLine=E,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:f.width+8,height:f.height+8,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:f.height/2+5}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:f.height+9}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:f.width/2+5,y:f.height+9}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:f.width+9,y:f.height+9}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:f.width+9,y:f.height/2+5}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:f.width+9,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:f.width/2+4,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.initial=!0,this.layer.toolMode!=="form"&&(this.annotation.isHidden==1?(this.annotationContainer.style.display="none",this.annotationContainer.style.pointerEvents="none"):this.annotation.isHidden==0&&(this.annotationContainer.style.display="block",this.annotationContainer.style.pointerEvents="auto")),this.show&&this.handleClick()}},{key:"getActualRect",value:function(o,s){var u=this.annotation.rect,d=u.left,f=u.top,v=u.right,m=u.bottom;return{start:getActualPoint({x:d,y:f},o),end:getActualPoint({x:v,y:m},o)}}},{key:"rectCalc",value:function(o){var s=o.start,u=o.end;return{top:s.y<u.y?s.y:u.y,left:s.x<u.x?s.x:u.x,width:Math.abs(u.x-s.x),height:Math.abs(u.y-s.y)}}},{key:"calculate",value:function(o,s){var u=this.rectCalc({start:o,end:s}),d=(this.annotation.borderWidth||1)*this.scale;return{top:u.top-d,left:u.left-d,width:u.width+2*d,height:u.height+2*d}}},{key:"getInitialPoint",value:function(){var o,s,u,d,f=this.scale,v=this.start.x,m=this.start.y,_=this.end.x,g=this.end.y,y=this.viewport,w=y.width,x=y.height,k=y.rotation;return k===0?(o=v/f,s=m/f,u=_/f,d=g/f):k===90?(o=m/f,s=v/f,u=g/f,d=_/f):k===180?(o=(w-v)/f,s=m/f,u=(w-_)/f,d=g/f):(o=(x-m)/f,s=(w-v)/f,u=(x-g)/f,d=(w-_)/f),{start:{x:o,y:s},end:{x:u,y:d}}}},{key:"updateTool",value:function(){this.initial&&(this.hidden?(this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLineContainer.remove()):(this.layer.annotationStore.selectedElementName!==this.annotation.name&&(this.layer.annotationStore.selectedElementName=this.annotation.name),this.container.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.eventBus.dispatch("propertyChange",this.annotation)))}},{key:"handleClick",value:function(){!this.hidden||document.fullscreenElement||this.layer.annotationStore.creating||this.layer.toolMode==="form"&&(this.hidden=!1,this.updateTool(),this.hidden||document.getElementsByClassName("right-panel")[0].className.indexOf("closed")===-1||document.getElementById("propertyPanelButton").click(),this.eventBus._on("comboBoxPropertyPanelChanged",this.handlePropertyPanel),onClickOutsideUp([this.annotationContainer,this.outerLine,this.deletetButton,document.getElementById("propertyPanelButton"),document.getElementsByClassName("right-panel")[0]],this.handleOutside.bind(this)))}},{key:"handleOutside",value:function(){this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||document.getElementById("propertyPanelButton").click(),this.hidden=!this.hidden,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLine.removeEventListener("mousedown",this.onMousedown),this.outerLine.removeEventListener("touchstart",this.onMousedown),this.outerLineContainer.remove(),this.eventBus._off("comboBoxPropertyPanelChanged",this.handlePropertyPanel)}},{key:"handleMouseDown",value:function(o){this.layer.tool&&o.stopPropagation();var s=o.target.getAttribute("data-id"),u=getClickPoint(o),d=u.pageX,f=u.pageY;this.startState={operator:s,clickX:d,clickY:f},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup),this.handleClick()}},{key:"handleMouseMove",value:function(o){o.type==="touchmove"&&(document.body.style.overscrollBehavior="none"),this.moving=!0;var s=getClickPoint(o),u=s.pageX,d=s.pageY,f=this.start,v=this.end,m=this.startState,_=this.viewport,g=_.width,y=_.height;if(m.operator==="nw-resize"){var w=u-(m.clickX-this.start.x),x=d-(m.clickY-this.start.y);w=Math.min(v.x-5,w),w=Math.max(0,w),x=Math.min(v.y-5,x),x=Math.max(0,x),this.update({start:{x:w,y:x},end:v})}else if(m.operator==="w-resize"){var k=u-(m.clickX-this.start.x);k=Math.min(v.x-5,k),k=Math.max(0,k),this.update({start:{x:k,y:f.y},end:v})}else if(m.operator==="sw-resize"){var S=u-(m.clickX-this.start.x),E=d-(m.clickY-this.end.y);S=Math.min(v.x-5,S),S=Math.max(0,S),E=Math.min(y,E),E=Math.max(f.y+5,E),this.update({start:{x:S,y:f.y},end:{x:v.x,y:E}})}else if(m.operator==="s-resize"){var T=d-(m.clickY-this.end.y);T=Math.min(y,T),T=Math.max(f.y+5,T),this.update({start:f,end:{x:v.x,y:T}})}else if(m.operator==="se-resize"){var M=u-(m.clickX-this.end.x),I=d-(m.clickY-this.end.y);M=Math.min(g,M),M=Math.max(f.x+5,M),I=Math.min(y,I),I=Math.max(f.y+5,I),this.update({start:f,end:{x:M,y:I}})}else if(m.operator==="e-resize"){var F=u-(m.clickX-this.end.x);F=Math.min(g,F),F=Math.max(f.x+5,F),this.update({start:f,end:{x:F,y:v.y}})}else if(m.operator==="ne-resize"){var O=u-(m.clickX-this.end.x),N=d-(m.clickY-this.start.y);O=Math.min(g,O),O=Math.max(f.x+5,O),N=Math.min(v.y-5,N),N=Math.max(0,N),this.update({start:{x:f.x,y:N},end:{x:O,y:v.y}})}else if(m.operator==="n-resize"){var D=d-(m.clickY-this.start.y);D=Math.min(v.y-5,D),D=Math.max(0,D),this.update({start:{x:f.x,y:D},end:v})}else if(m.operator==="move"){var X=u-(m.clickX-this.start.x),U=d-(m.clickY-this.start.y),Z=u-(m.clickX-this.end.x),j=d-(m.clickY-this.end.y),Q={width:Math.abs(f.x-v.x),height:Math.abs(f.y-v.y)};X<Z?(X=Math.max(0,X),X=Math.min(g-Q.width,X),Z=Math.max(Q.width,Z),Z=Math.min(g,Z)):(Z=Math.max(0,Z),Z=Math.min(g-Q.width,Z),X=Math.max(Q.width,X),X=Math.min(g,X)),U<j?(U=Math.max(0,U),U=Math.min(y-Q.height,U),j=Math.max(Q.height,j),j=Math.min(y,j)):(j=Math.max(0,j),j=Math.min(y-Q.height,j),U=Math.max(Q.height,U),U=Math.min(y,U)),this.update({start:{x:X,y:U},end:{x:Z,y:j}})}}},{key:"handleDelete",value:function(o){this.layer.tool&&o&&o.stopPropagation(),this.handleOutside(),this.annotationContainer.remove(),this.annotation.isDelete=!0;var s={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.page}};this.annotation.annotPtr&&(s.annotation.annotPtr=this.annotation.annotPtr),o||(s.type="empty"),this.eventBus.dispatch("annotationChange",s)}},{key:"handleMouseUp",value:function(o){this.layer.tool&&o.stopPropagation(),o.type==="touchend"&&(document.body.style.overscrollBehavior="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup);var s=getClickPoint(o),u=s.pageX,d=s.pageY;if(u!==this.startState.clickX||d!==this.startState.clickY){this.start=this.newStart,this.end=this.newEnd;var f=this.annotation,v=this.getInitialPoint(),m=v.start,_=v.end,g={left:m.x,top:m.y,right:_.x,bottom:_.y};this.eventBus.dispatch("annotationChange",{type:"modify",annotation:{operate:"mod-form",name:f.name,pageIndex:this.page,pagePtr:f.pagePtr,annotPtr:f.annotPtr,rect:g}})}}},{key:"update",value:function(o){var s=o.start,u=o.end,d=this.calculate(s,u);this.newStart=s,this.newEnd=u,this.annotationContainer.style.top=d.top+"px",this.annotationContainer.style.left=d.left+"px",this.annotationContainer.style.width=d.width+"px",this.annotationContainer.style.height=d.height+"px",this.annotationContainer.style.width="".concat(d.width,"px"),this.annotationContainer.style.height="".concat(d.height,"px"),this.borderElement.style.width="".concat(d.width,"px"),this.borderElement.style.height="".concat(d.height,"px"),this.selectElement.style.width="".concat(d.width,"px"),this.selectElement.style.height="".concat(d.height,"px"),this.outerLine.style.left="".concat(d.left-8,"px"),this.outerLine.style.top="".concat(d.top-8,"px"),this.outerLine.style.width="".concat(d.width+16,"px"),this.outerLine.style.height="".concat(d.height+16,"px");var f=d.left+d.width-30+"px",v=d.top+d.height+8+"px";this.deletetButton.style.left=f,this.deletetButton.style.top=v,this.moveRect.setAttribute("width",d.width+9),this.moveRect.setAttribute("height",d.height+9),this.LeftRect.setAttribute("y",d.height/2+5),this.bottomLeftRect.setAttribute("y",d.height+9),this.bottomRect.setAttribute("x",d.width/2+5),this.bottomRect.setAttribute("y",d.height+9),this.bottomRightRect.setAttribute("x",d.width+9),this.bottomRightRect.setAttribute("y",d.height+9),this.rightRect.setAttribute("x",d.width+9),this.rightRect.setAttribute("y",d.height/2+5),this.topRightRect.setAttribute("x",d.width+9),this.topRect.setAttribute("x",d.width/2+5),this.svgElement.style.width="".concat(d.height/2,"px"),this.svgElement.style.height="".concat(d.height/2,"px")}},{key:"handlePropertyPanel",value:function(o){var s=this.annotation;if(this.layer.annotationStore.selectedElementName===s.name){var u=0;for(var d in o){for(var f in s)if(f===d&&s[f]!==o[d]&&(u++,s[f]=o[d],d==="backgroundColor"&&(o[d]===""&&(o.clearBackgroundColor=!0),this.selectElement.style[d]=o[d]),d==="fontSize"&&(this.selectElement.style.fontSize=o[d]+"px"),d==="color"&&(this.selectElement.style.color=o[d]),d==="fontName"&&(this.selectElement.style.fontFamily=o[d]),d==="fontStyle")){var v=o[d];v==="boldItalic"?(this.selectElement.style.fontStyle="italic",this.selectElement.style.fontWeight="bold",s.isBold=!0,s.isItalic=!0):v==="bold"?(this.selectElement.style.fontWeight="bold",this.selectElement.style.fontStyle="normal",s.isBold=!0,s.isItalic=!1):v==="italic"?(this.selectElement.style.fontWeight="normal",this.selectElement.style.fontStyle="italic",s.isBold=!1,s.isItalic=!0):(s.isItalic=!1,s.isBold=!1,this.selectElement.style.fontStyle="normal",this.selectElement.style.fontWeight="normal")}if(d==="item"){if(s.items.includes(o.item)){delete o.item;continue}u++,s.items.push({Value:o.item,String:o.item});var m=createElement("option");m.value=o.item,m.innerHTML=o.item,this.selectElement.appendChild(m),o.item={value:o.item,index:s.items.length-1}}if(d==="deleteItemIndex"){u++;var _=o.deleteItemIndex;s.selected===o.deleteItemIndex&&(s.selected=null),s.items.splice(_,1),this.selectElement.options[_].remove()}if(d==="moveOption"){u++;var g=o.moveOption.fromIndex,y=o.moveOption.toIndex,w=s.items;g>y?w.splice(g-1,2,w[g],w[g-1]):w.splice(g,2,w[g+1],w[g]),o.moveOption.item={Value:w[y].Value,String:w[y].String};var x=this.selectElement.options[g];x.remove(),this.selectElement.insertBefore(x,this.selectElement.options[y])}}if(u>0){var k={operate:"mod-form",name:s.name,pageIndex:this.page,index:s.items.length-1,pagePtr:s.pagePtr,annotPtr:s.annotPtr};s.items.length||(o.clearOption=!0);var S=["fontSize","fontName","color","fontStyle"].some(function(I){return o[I]});if(S){k.fontSize=s.fontSize,k.color=s.color;var E={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},T=s.fontName;s.isBold&&s.isItalic?k.fontName=E[T].boldItalic:s.isBold?k.fontName=E[T].bold:s.isItalic?k.fontName=E[T].italic:k.fontName=E[T].normal}var M=Object.assign({},k,o);!s.annotPtr&&(M.items=s.items),this.eventBus.dispatch("annotationChange",{type:"modify",annotation:M})}}}},{key:"setProperty",value:function(o){var s=this.annotation;if(o.name===s.name){for(var u in o)for(var d in s)d===u&&s[d]!==o[u]&&(s[d]=o[u],u==="backgroundColor"&&(this.selectElement.style[u]=o[u]));var f={operate:"mod-form",pageIndex:this.page,pagePtr:s.pagePtr,annotPtr:s.annotPtr},v=["fontSize","fontName","color","fontStyle"].some(function(y){return o[y]});if(v){f.fontSize=s.fontSize,f.color=s.color;var m={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},_=s.fontName;s.isBold&&s.isItalic?f.fontName=m[_].boldItalic:s.isBold?f.fontName=m[_].bold:s.isItalic?f.fontName=m[_].italic:f.fontName=m[_].normal}var g=Object.assign({},f,o);this.eventBus.dispatch("annotationChange",{type:"modify",annotation:g})}}},{key:"changeSelectAvailable",value:function(){this.layer.toolMode==="form"?this.selectElement.style.pointerEvents="none":this.selectElement.style.pointerEvents="auto"}},{key:"handleSelect",value:function(){this.annotation.selected=this.selectElement.selectedIndex,this.setProperty({selected:this.annotation.selected,name:this.annotation.name})}}]),r}(),AddComboBox=function(){function e(n){var r=n.tool,o=n.color,s=n.svgElement,u=n.layer,d=n.container,f=n.viewport,v=n.page,m=n.eventBus;_classCallCheck(this,e),this.layer=u,this._tool=r,this.color=o,this.svgElement=s,this.container=d,this.viewport=f,this.page=v,this.eventBus=m,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.initComboboxName=this.setInitProperty.bind(this),this.init()}return _createClass(e,[{key:"init",value:function(){this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown),this.container.addEventListener("mousedown",this.onMousedown),this.container.addEventListener("touchstart",this.onMousedown),this.svgElement.style.cursor="crosshair",this.container.style.touchAction="none",document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.eventBus._on("initComboboxName",this.initComboboxName)}},{key:"tool",get:function(){return this._tool},set:function(n){n!==this._tool&&(n||(this.reset(),this.svgElement.style.cursor="default",this.container.style.touchAction="",this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown)),this._tool=n)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown),this.eventBus._off("initComboboxName",this.initComboboxName)}},{key:"handleMouseDown",value:function(n){if(!this.layer.annotationStore.selectedElementName){var r=getAbsoluteCoordinate(this.container,n),o=r.x,s=r.y;this.initStartPoint={x:o,y:s},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var n=this.initStartPoint,r=this.initEndPoint;if(r&&n.x!==r.x&&n.y!==r.y){var o=getInitialPoint(n,this.viewport,this.viewport.scale),s=getInitialPoint(r,this.viewport,this.viewport.scale);this.setInitProperty();var u={x:Math.min(o.x,s.x),y:Math.min(o.y,s.y)},d={x:Math.max(o.x,s.x),y:Math.max(o.y,s.y)},f={left:u.x,top:u.y,right:d.x,bottom:d.y},v={operate:"add-form",type:"combobox",pageIndex:this.page,date:new Date,rect:f,backgroundColor:"#DDE9FF",borderColor:"#43474D",borderStyle:"solid",borderWidth:1,fieldName:this.fieldName,isHidden:0,color:"#000000",fontName:"Helvetica",fontSize:14,items:[{Value:this.layer.annotationStore.$t("rightPanel.option")+"1",String:this.layer.annotationStore.$t("rightPanel.option")+"1"},{Value:this.layer.annotationStore.$t("rightPanel.option")+"2",String:this.layer.annotationStore.$t("rightPanel.option")+"2"}],selected:0};this.eventBus.dispatch("annotationChange",{type:"add",show:!0,annotation:v})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(n){var r=getAbsoluteCoordinate(this.container,n),o=r.x,s=r.y,u=this.viewport,d=u.width,f=u.height;if(this.viewport.scale,o=Math.min(d,o),o=Math.max(0,o),s=Math.min(f,s),s=Math.max(0,s),this.initEndPoint={x:o,y:s},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(n.shiftKey){var v=this.initStartPoint,m=this.initEndPoint,_=Math.abs(m.x-v.x),g=Math.abs(m.y-v.y),y=Math.min(_,g);v.x<m.x?m.x=v.x+y:m.x=v.x-y,v.y<m.y?m.y=v.y+y:m.y=v.y-y}var w=this.calculate(this.initStartPoint,this.initEndPoint),x=this.shapeEle;x.style.top="".concat(w.top,"px"),x.style.left="".concat(w.left,"px"),x.style.width="".concat(Math.abs(w.width-1),"px"),x.style.height="".concat(Math.abs(w.height-1),"px")}else{var k=createElement("div",{backgroundColor:"#DDE9FF",borderColor:"#43474D",borderWidth:"1px",borderStyle:"solid",position:"absolute"});this.shapeEle=k,this.scene=this.container.querySelector(".annotationLayer"),this.scene.append(this.shapeEle)}}},{key:"rectCalc",value:function(n){var r=n.start,o=n.end;return{top:r.y<o.y?r.y:o.y,left:r.x<o.x?r.x:o.x,width:Math.abs(o.x-r.x),height:Math.abs(o.y-r.y)}}},{key:"calculate",value:function(n,r){var o=this.rectCalc({start:n,end:r}),s=1*this.viewport.scale;return{top:o.top-s,left:o.left-s,width:o.width+2*s,height:o.height+2*s}}},{key:"setInitProperty",value:function(){var n=1;if(this.layer.annotationStore.annotationsAll)for(var r=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(u,d){return u.concat(d)},[]).filter(function(u){return u.type==="combobox"}),o=function(){var u="Combo Box"+(s+1);if(r.every(function(d){return d.fieldName!==u}))return n=s+1,"break"},s=0;s<=r.length&&o()!=="break";s++);this.fieldName="Combo Box"+n}}]),e}(),TextAnnotation=function(e){_inherits(r,BaseAnnotation);var n=_createSuper(r);function r(o){var s,u=o.container,d=o.annotation,f=o.page,v=o.viewport,m=o.scale,_=o.eventBus,g=o.layer,y=o.show,w=y!==void 0&&y;return _classCallCheck(this,r),(s=n.call(this,{container:u,annotation:d,page:f,viewport:v,scale:m,eventBus:_,show:w})).layer=g,s.hidden=!0,s.markupContainer=null,s.outerLineContainer=null,s.onHandleClick=s.handleClick.bind(_assertThisInitialized(s)),s.onDelete=s.handleDelete.bind(_assertThisInitialized(s)),s.render(),s}return _createClass(r,[{key:"render",value:function(){var o=this.annotation,s=this.scale,u=this.getActualRect(this.viewport,s),d=u.start,f=u.end,v=this.calculate(d,f),m=o.quadPoints;if(m){for(var _=[],g=0;g+3<m.length;g+=4){var y=parseInt(m[g].PointX*s,10),w=parseInt(m[g].PointY*s,10),x=parseInt(m[g+1].PointX*s,10),k=parseInt(m[g+2].PointY*s,10),S=Math.min(y,x),E=Math.max(y,x),T=Math.min(w,k),M=Math.max(w,k),I=parseInt(E-S),F=parseInt(M-T);_.push({left:S,top:T,width:I,height:F})}o.type==="highlight"?this.renderHighlight(_):o.type==="underline"?this.renderUnderline(_):o.type==="squiggly"?this.renderSquiggly(_):o.type==="strikeout"&&this.renderStrikeout(_),this.markupContainer.addEventListener("click",this.onHandleClick),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container";var O=createSvg("svg");O.style.left=v.left-6+"px",O.style.top=v.top-6+"px",O.style.width=v.width+12+"px",O.style.height=v.height+12+"px";var N=createSvg("rect",{x:3,y:3,width:v.width+6,height:v.height+6,fill:"#ffffff","fill-opacity":0,"stroke-width":1,stroke:"#1460F3"});O.append(N);var D=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"});D.addEventListener("click",this.onDelete),D.innerHTML=this.deleteSvgStr;var X=v.left+v.width-30+"px",U=v.top-38+"px";D.style.left=X,D.style.top=U,this.deletetButton=D,this.outerLineContainer.append(O),this.outerLineContainer.append(D)}}},{key:"getActualRect",value:function(o,s){var u=this.annotation.rect,d=u.left,f=u.top,v=u.right,m=u.bottom;return{start:getActualPoint({x:d,y:f},o),end:getActualPoint({x:v,y:m},o)}}},{key:"rectCalc",value:function(o){var s=o.start,u=o.end;return{top:s.y<u.y?s.y:u.y,left:s.x<u.x?s.x:u.x,width:Math.abs(u.x-s.x),height:Math.abs(u.y-s.y)}}},{key:"calculate",value:function(o,s){var u=this.rectCalc({start:o,end:s});return{top:u.top-2,left:u.left-2,width:u.width+4,height:u.height+4}}},{key:"handleClick",value:function(){this.hidden&&(this.hidden=!1,this.updateTool(),onClickOutside([this.markupContainer,this.outerLineContainer,this.deletetButton],this.handleOutside.bind(this)))}},{key:"handleOutside",value:function(){this.hidden=!this.hidden,this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLineContainer.remove()}},{key:"updateTool",value:function(){this.hidden?(this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLineContainer.remove()):(this.layer.selectedElementName!==this.annotation.name&&(this.layer.selectedElementName=this.annotation.name),this.container.append(this.outerLineContainer))}},{key:"handleDelete",value:function(o){this.layer.tool&&o&&o.stopPropagation(),this.handleOutside(),this.markupContainer.remove(),this.annotation.isDelete=!0;var s={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.page}};this.annotation.annotPtr&&(s.annotation.annotPtr=this.annotation.annotPtr),o||(s.type="empty"),this.eventBus.dispatch("annotationChange",s)}},{key:"setCss",value:function(o,s){if(o&&s)for(var u in s)o.style[u]=s[u]}},{key:"renderHighlight",value:function(o){var s=this.annotation,u=document.createElement("div");u.className="markup",this.setCss(u,{mixBlendMode:"multiply",cursor:"pointer",pointerEvents:"auto"});for(var d=0;d<o.length;d++){var f=o[d],v=document.createElement("div");this.setCss(v,{position:"absolute",opacity:.5,top:f.top+"px",left:f.left+"px",width:f.width+"px",height:f.height+"px",backgroundColor:s.color}),u.append(v)}this.container.append(u),this.markupContainer=u}},{key:"renderUnderline",value:function(o){var s=this.annotation,u=document.createElement("div");u.className="markup",this.setCss(u,{cursor:"pointer",pointerEvents:"auto"});for(var d=0;d<o.length;d++){var f=o[d],v=document.createElement("div");this.setCss(v,{position:"absolute",mixBlendMode:"multiply",opacity:s.opacity||1,top:f.top+"px",left:f.left+"px",width:f.width+"px",height:f.height+"px",borderBottom:"2px solid "+s.color}),u.append(v)}this.container.append(u),this.markupContainer=u}},{key:"renderSquiggly",value:function(o){var s=this.annotation,u=document.createElement("div");u.className="markup",this.setCss(u,{cursor:"pointer",pointerEvents:"auto"});for(var d=0;d<o.length;d++){var f=o[d],v=document.createElement("div");this.setCss(v,{position:"absolute",mixBlendMode:"multiply",overflow:"hidden",opacity:s.opacity||1,top:f.top+"px",left:f.left+"px",width:f.width+"px",height:f.height+"px"});var m=document.createElement("div");this.setCss(m,{position:"absolute",width:"100%",height:"5px",left:"0px",bottom:"1px",background:"radial-gradient(ellipse, transparent, transparent 8px, ".concat(s.color," 9px, ").concat(s.color," 10px, transparent 11px)"),backgroundSize:"22px 26px",backgroundRepeat:"repeat-x"});var _=document.createElement("div");this.setCss(_,{position:"absolute",width:"100%",height:"5px",left:"11px",bottom:"-2px",background:"radial-gradient(ellipse, transparent, transparent 8px, ".concat(s.color," 9px, ").concat(s.color," 10px, transparent 11px)"),backgroundSize:"22px 26px",backgroundPosition:"0px -22px",backgroundRepeat:"repeat-x"}),v.append(m),v.append(_),u.append(v)}this.container.append(u),this.markupContainer=u}},{key:"renderStrikeout",value:function(o){var s=this.annotation,u=document.createElement("div");u.className="markup",this.setCss(u,{cursor:"pointer",pointerEvents:"auto"});for(var d=0;d<o.length;d++){var f=o[d],v=document.createElement("div");this.setCss(v,{position:"absolute",mixBlendMode:"multiply",opacity:s.opacity||1,top:f.top+"px",left:f.left+"px",width:f.width+"px",height:f.height+"px"});var m=document.createElement("div");this.setCss(m,{position:"absolute",opacity:.8,top:"50%",left:0,width:"100%",height:"2px",transform:"translateY(-50%)",backgroundColor:s.color}),v.append(m),u.append(v)}this.container.append(u),this.markupContainer=u}}]),r}(),PaintLink=function(){function e(n){var r=n.tool,o=n.color,s=n.svgElement,u=n.layer,d=n.container,f=n.viewport,v=n.page,m=n.eventBus;_classCallCheck(this,e),this.layer=u,this._tool=r,this.color=o,this.svgElement=s,this.container=d,this.viewport=f,this.page=v,this.eventBus=m,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.linkEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.init()}return _createClass(e,[{key:"init",value:function(){this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown),this.container.addEventListener("mousedown",this.onMousedown),this.container.addEventListener("touchstart",this.onMousedown),this.svgElement.style.cursor="crosshair",this.container.style.touchAction="none",document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"tool",get:function(){return this._tool},set:function(n){n!==this._tool&&(n||(this.reset(),this.svgElement.style.cursor="default",this.container.style.touchAction="",this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown)),this._tool=n)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.linkEle&&this.linkEle.remove(),this.linkEle=null,this.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown)}},{key:"handleMouseDown",value:function(n){if(!this.layer.annotationStore.selectedElementName){var r=getAbsoluteCoordinate(this.container,n),o=r.x,s=r.y;this.initStartPoint={x:o,y:s},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var n=this.initStartPoint,r=this.initEndPoint;if(r&&n.x!==r.x&&n.y!==r.y){var o=getInitialPoint(n,this.viewport,this.viewport.scale),s=getInitialPoint(r,this.viewport,this.viewport.scale),u={operate:"add-annot",type:"link",pageIndex:this.page,date:new Date},d={x:Math.min(o.x,s.x),y:Math.min(o.y,s.y)},f={x:Math.max(o.x,s.x),y:Math.max(o.y,s.y)},v={left:d.x,top:d.y,right:f.x,bottom:f.y};u.rect=v,this.eventBus.dispatch("annotationChange",{type:"add",show:!0,annotation:u})}this.initStartPoint=null,this.initEndPoint=null,this.linkEle&&this.linkEle.remove(),this.linkEle=null,this.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(n){var r=getAbsoluteCoordinate(this.container,n),o=r.x,s=r.y,u=this.viewport,d=u.width,f=u.height;if(this.viewport.scale,o=Math.min(d,o),o=Math.max(0,o),s=Math.min(f,s),s=Math.max(0,s),this.initEndPoint={x:o,y:s},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.linkEle){var v=this.calculate(this.initStartPoint,this.initEndPoint),m=this.linkEle;m.style.top="".concat(v.top,"px"),m.style.left="".concat(v.left,"px"),m.style.width="".concat(Math.abs(v.width-1),"px"),m.style.height="".concat(Math.abs(v.height-1),"px")}else{var _=createElement("div",{display:"block",backgroundColor:"#93B9FD",opacity:"0.3",position:"absolute"});this.linkEle=_,this.scene=this.container.querySelector(".annotationLayer"),this.scene.append(this.linkEle)}}},{key:"rectCalc",value:function(n){var r=n.start,o=n.end;return{top:r.y<o.y?r.y:o.y,left:r.x<o.x?r.x:o.x,width:Math.abs(o.x-r.x),height:Math.abs(o.y-r.y)}}},{key:"calculate",value:function(n,r){var o=this.rectCalc({start:n,end:r}),s=1*this.viewport.scale;return{top:o.top-s,left:o.left-s,width:o.width+2*s,height:o.height+2*s}}}]),e}(),Link=function(e){_inherits(s,BaseAnnotation);var n,r,o=_createSuper(s);function s(u){var d,f=u.container,v=u.annotation,m=u.page,_=u.viewport,g=u.scale,y=u.eventBus,w=u.layer,x=u.show,k=x!==void 0&&x;return _classCallCheck(this,s),(d=o.call(this,{container:f,annotation:v,page:m,viewport:_,scale:g,eventBus:y,show:k})).layer=w,d.hidden=!0,d.initial=!1,d.outline=null,d.start=null,d.end=null,d.newStart=null,d.newEnd=null,d.startCircle=null,d.endCircle=null,d.show=k,d.onMousedown=d.handleMouseDown.bind(_assertThisInitialized(d)),d.onMouseup=d.handleMouseUp.bind(_assertThisInitialized(d)),d.onMousemove=d.handleMouseMove.bind(_assertThisInitialized(d)),d.onDelete=d.handleDelete.bind(_assertThisInitialized(d)),d.render(),d}return _createClass(s,[{key:"render",value:function(){var u;for(var d in this.eventBus._on("linkPropertyPanelChanged",this.handlePropertyPanel.bind(this)),this.eventBus._on("setProperty",this.setProperty.bind(this)),this.annotation)d==="background-color"&&(this.annotation.backgroundColor=this.annotation[d],delete this.annotation[d]),d==="OnActivation"&&(this.annotation[d].Action&&this.annotation[d].Action.Dest&&this.annotation[d].Action.Dest.XYZ?(this.annotation.destPage=(parseInt(this.annotation.OnActivation.Action.Dest.XYZ.Page)+1).toString(),this.annotation.url=""):this.annotation[d].Action&&this.annotation[d].Action.URI&&(this.annotation.url=this.annotation.OnActivation.Action.URI.URI,this.annotation.destPage=""),delete this.annotation[d]),d==="Dest"&&(this.annotation[d].XYZ&&this.annotation[d].XYZ.Page&&(this.annotation.destPage=(parseInt(this.annotation.Dest.XYZ.Page)+1).toString(),this.annotation.url=""),delete this.annotation[d]);if((u=this.annotation.url)===null||u===void 0||!u.startsWith("af://")){var f=this.annotation,v=this.getActualRect(this.viewport,this.scale),m=v.start,_=v.end;this.start=m,this.end=_;var g,y=this.calculate(m,_),w=document.createElement("div");w.id=f.name,w.className="annotation",w.style.top=y.top+"px",w.style.left=y.left+"px",w.style.width=y.width+"px",w.style.height=y.height+"px",this.annotationContainer=w,this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),g=createElement("div",{left:0,top:0,width:"".concat(Math.abs(y.width),"px"),height:"".concat(Math.abs(y.height),"px"),backgroundColor:"transparent",position:"relative"}),this.shapeElement=g,this.annotationContainer.append(this.shapeElement),this.container.append(this.annotationContainer),this.buttonContainer=createElement("a",{display:"block",width:"100%",height:"100%",outline:"none",backgroundColor:"#93B9FD",opacity:"0.3"}),this.shapeElement.append(this.buttonContainer),this.buttonContainer.addEventListener("blur",this.onBlur),this.annotation.url&&(this.buttonContainer.setAttribute("href",this.annotation.url),this.buttonContainer.setAttribute("target","_blank")),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr;var x=y.left+y.width-30+"px",k=y.top+y.height+8+"px";this.deletetButton.style.left=x,this.deletetButton.style.top=k;var S=document.createElementNS("http://www.w3.org/2000/svg","svg");S.style.position="absolute",S.style.zIndex=1,S.style.left="".concat(y.left-8,"px"),S.style.top="".concat(y.top-8,"px"),S.style.width="".concat(y.width+16,"px"),S.style.height="".concat(y.height+16,"px"),this.outerLine=S,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:y.width+8,height:y.height+8,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:y.height/2+5}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:y.height+9}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width/2+5,y:y.height+9}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width+9,y:y.height+9}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width+9,y:y.height/2+5}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width+9,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width/2+5,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.initial=!0,this.show&&this.handleClick()}}},{key:"getActualRect",value:function(u,d){var f=this.annotation.rect,v=f.left,m=f.top,_=f.right,g=f.bottom;return{start:getActualPoint({x:v,y:m},u),end:getActualPoint({x:_,y:g},u)}}},{key:"rectCalc",value:function(u){var d=u.start,f=u.end;return{top:d.y<f.y?d.y:f.y,left:d.x<f.x?d.x:f.x,width:Math.abs(f.x-d.x),height:Math.abs(f.y-d.y)}}},{key:"calculate",value:function(u,d){var f=this.rectCalc({start:u,end:d}),v=(this.annotation.borderWidth||2)*this.scale;return{top:f.top-v,left:f.left-v,width:f.width+2*v,height:f.height+2*v}}},{key:"getInitialPoint",value:function(){var u=this.scale;return{start:{x:this.start.x/u,y:this.start.y/u},end:{x:this.end.x/u,y:this.end.y/u}}}},{key:"updateTool",value:function(){this.initial&&(this.hidden?(this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove()):(this.layer.annotationStore.selectedElementName!==this.annotation.name&&(this.layer.annotationStore.selectedElementName=this.annotation.name),this.container.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.eventBus.dispatch("linkPanelChange",this.annotation)))}},{key:"handleClick",value:function(){!this.hidden||document.fullscreenElement||this.layer.annotationStore.creating||this.layer.toolMode==="editor"||(this.layer.toolMode==="annotation"&&this.layer.tool==="link"?(this.hidden=!1,this.updateTool(),onClickOutside([this.annotationContainer,this.outerLine,this.deletetButton,document.getElementById("linkPanel")],this.handleOutside.bind(this))):this.annotation.destPage?this.eventBus.dispatch("pageNumberChanged",this.annotation.destPage):this.annotation.url&&this.buttonContainer.click())}},{key:"handleOutside",value:function(){this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||(this.eventBus.dispatch("linkPanelChange",null),this.layer.annotationStore.selectedElementName=null),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLine.removeEventListener("mousedown",this.onMousedown),this.outerLine.removeEventListener("touchstart",this.onMousedown),this.outerLineContainer.remove(),this.annotation.url||this.annotation.destPage||this.handleDelete()}},{key:"handleMouseDown",value:function(u){if(u.button===0||u.type!=="mousedown"){this.layer.tool&&u.stopPropagation();var d=u.target.getAttribute("data-id"),f=getClickPoint(u),v=f.pageX,m=f.pageY;this.startState={operator:d,clickX:v,clickY:m},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup),this.handleClick()}}},{key:"handleMouseMove",value:function(u){if(u.button===0||u.type!=="mousemove"){u.type==="touchmove"&&(document.body.style.overscrollBehavior="none"),this.moving=!0;var d=getClickPoint(u),f=d.pageX,v=d.pageY,m=this.start,_=this.end,g=this.startState,y=this.viewport,w=y.width,x=y.height;if(g.operator==="nw-resize"){var k=f-(g.clickX-this.start.x),S=v-(g.clickY-this.start.y);k=Math.min(_.x-5,k),k=Math.max(0,k),S=Math.min(_.y-5,S),S=Math.max(0,S),this.update({start:{x:k,y:S},end:_})}else if(g.operator==="w-resize"){var E=f-(g.clickX-this.start.x);E=Math.min(_.x-5,E),E=Math.max(0,E),this.update({start:{x:E,y:m.y},end:_})}else if(g.operator==="sw-resize"){var T=f-(g.clickX-this.start.x),M=v-(g.clickY-this.end.y);T=Math.min(_.x-5,T),T=Math.max(0,T),M=Math.min(x,M),M=Math.max(m.y+5,M),this.update({start:{x:T,y:m.y},end:{x:_.x,y:M}})}else if(g.operator==="s-resize"){var I=v-(g.clickY-this.end.y);I=Math.min(x,I),I=Math.max(m.y+5,I),this.update({start:m,end:{x:_.x,y:I}})}else if(g.operator==="se-resize"){var F=f-(g.clickX-this.end.x),O=v-(g.clickY-this.end.y);F=Math.min(w,F),F=Math.max(m.x+5,F),O=Math.min(x,O),O=Math.max(m.y+5,O),this.update({start:m,end:{x:F,y:O}})}else if(g.operator==="e-resize"){var N=f-(g.clickX-this.end.x);N=Math.min(w,N),N=Math.max(m.x+5,N),this.update({start:m,end:{x:N,y:_.y}})}else if(g.operator==="ne-resize"){var D=f-(g.clickX-this.end.x),X=v-(g.clickY-this.start.y);D=Math.min(w,D),D=Math.max(m.x+5,D),X=Math.min(_.y-5,X),X=Math.max(0,X),this.update({start:{x:m.x,y:X},end:{x:D,y:_.y}})}else if(g.operator==="n-resize"){var U=v-(g.clickY-this.start.y);U=Math.min(_.y-5,U),U=Math.max(0,U),this.update({start:{x:m.x,y:U},end:_})}else if(g.operator==="move"){var Z=f-(g.clickX-this.start.x),j=v-(g.clickY-this.start.y),Q=f-(g.clickX-this.end.x),ve=v-(g.clickY-this.end.y),Se={width:Math.abs(m.x-_.x),height:Math.abs(m.y-_.y)};Z<Q?(Z=Math.max(0,Z),Z=Math.min(w-Se.width,Z),Q=Math.max(Se.width,Q),Q=Math.min(w,Q)):(Q=Math.max(0,Q),Q=Math.min(w-Se.width,Q),Z=Math.max(Se.width,Z),Z=Math.min(w,Z)),j<ve?(j=Math.max(0,j),j=Math.min(x-Se.height,j),ve=Math.max(Se.height,ve),ve=Math.min(x,ve)):(ve=Math.max(0,ve),ve=Math.min(x-Se.height,ve),j=Math.max(Se.height,j),j=Math.min(x,j)),this.update({start:{x:Z,y:j},end:{x:Q,y:ve}})}}}},{key:"handleDelete",value:function(u){if(this.annotationContainer){this.layer.tool&&u&&u.stopPropagation(),u&&this.handleOutside(),this.annotationContainer.remove(),this.annotation.isDelete=!0;var d={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.page}};this.annotation.annotPtr&&(d.annotation.annotPtr=this.annotation.annotPtr),u||(d.type="empty"),this.eventBus.dispatch("annotationChange",d)}}},{key:"handleMouseUp",value:function(u){if(u.button===0||u.type!=="mouseup"){this.layer.tool&&u.stopPropagation(),u.type==="touchend"&&(document.body.style.overscrollBehavior="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup);var d=getClickPoint(u),f=d.pageX,v=d.pageY;if(f!==this.startState.clickX||v!==this.startState.clickY){this.start=this.newStart,this.end=this.newEnd;var m=this.annotation,_=this.getInitialPoint(),g=_.start,y=_.end,w={left:g.x,top:g.y,right:y.x,bottom:y.y};this.eventBus.dispatch("annotationChange",{type:"modify",annotation:{operate:"mod-annot",name:m.name,pageIndex:this.page,pagePtr:m.pagePtr,annotPtr:m.annotPtr,rect:w}})}}}},{key:"update",value:function(u){var d=u.start,f=u.end,v=this.calculate(d,f);this.newStart=d,this.newEnd=f,this.annotationContainer.style.top=v.top+"px",this.annotationContainer.style.left=v.left+"px",this.annotationContainer.style.width=v.width+"px",this.annotationContainer.style.height=v.height+"px",this.annotationContainer.style.width="".concat(v.width,"px"),this.annotationContainer.style.height="".concat(v.height,"px"),this.shapeElement.style.width="".concat(v.width,"px"),this.shapeElement.style.height="".concat(v.height,"px"),this.outerLine.style.left="".concat(v.left-8,"px"),this.outerLine.style.top="".concat(v.top-8,"px"),this.outerLine.style.width="".concat(v.width+16,"px"),this.outerLine.style.height="".concat(v.height+16,"px");var m=v.left+v.width-30+"px",_=v.top+v.height+8+"px";this.deletetButton.style.left=m,this.deletetButton.style.top=_,this.moveRect.setAttribute("width",v.width+9),this.moveRect.setAttribute("height",v.height+9),this.LeftRect.setAttribute("y",v.height/2+5),this.bottomLeftRect.setAttribute("y",v.height+9),this.bottomRect.setAttribute("x",v.width/2+5),this.bottomRect.setAttribute("y",v.height+9),this.bottomRightRect.setAttribute("x",v.width+9),this.bottomRightRect.setAttribute("y",v.height+9),this.rightRect.setAttribute("x",v.width+9),this.rightRect.setAttribute("y",v.height/2+5),this.topRightRect.setAttribute("x",v.width+9),this.topRect.setAttribute("x",v.width/2+5)}},{key:"handlePropertyPanel",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function u(d){var f,v,m,_,g,y;return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(this.layer.annotationStore.selectedElementName===this.annotation.name){w.next=2;break}return w.abrupt("return");case 2:for(m in f=this.annotation,v=0,d){for(_ in f)_!==m||f[_]===d[m]||["url","destPage"].includes(m)||(f[_]=d[m],v++);m==="url"&&f[m]!==d[m]&&(this.buttonContainer.setAttribute("href",d[m]),this.buttonContainer.setAttribute("target","_blank"),f.destPage="",f.url=d[m],v++),m==="destPage"&&f[m]!==d[m]&&(f.url="",f.destPage=d[m],v++)}if(!(v>0)){w.next=10;break}return g={operate:"mod-annot",name:f.name,pageIndex:this.page,pagePtr:f.pagePtr,annotPtr:f.annotPtr,url:f.url,destPage:f.destPage},y=Object.assign({},g,d),w.next=10,this.eventBus.dispatch("annotationChange",{type:"modify",annotation:y});case 10:this.handleOutside();case 11:case"end":return w.stop()}},u,this)})),function(u){return r.apply(this,arguments)})},{key:"setProperty",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function u(d){var f,v,m,_,g,y;return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(this.layer.annotationStore.selectedElementName===this.annotation.name){w.next=2;break}return w.abrupt("return");case 2:for(m in f=this.annotation,v=0,d){for(_ in f)_!==m||f[_]===d[m]||["url","destPage"].includes(m)||(f[_]=d[m],v++);m==="url"&&f[m]!==d[m]&&(this.buttonContainer.setAttribute("href",d[m]),this.buttonContainer.setAttribute("target","_blank"),f.destPage="",f.url=d[m],v++),m==="destPage"&&f[m]!==d[m]&&(f.url="",f.destPage=d[m],v++)}if(!(v>0)){w.next=10;break}return g={operate:"mod-annot",name:f.name,pageIndex:this.page,pagePtr:f.pagePtr,annotPtr:f.annotPtr,url:f.url,destPage:f.destPage},y=Object.assign({},g,d),w.next=10,this.eventBus.dispatch("annotationChange",{type:"modify",annotation:y});case 10:case"end":return w.stop()}},u,this)})),function(u){return n.apply(this,arguments)})},{key:"isURL",value:function(u){return/^(?:(?:https?|ftp):\/\/)?(?:www\.)?(?:[\w]+\.){1,3}(?:[a-z]{2,})?(?:\/[\w .-]*)*(?:\?[^\s]*)?$/.test(u)}}]),s}(),ComPDFAnnotationLayer=function(){function e(n){var r=n.annotationStore,o=n.pageViewer,s=n.messageHandler,u=n.pageDiv,d=n.pdfPage,f=n.annotations,v=f===void 0?null:f,m=n.annotationsAll,_=n.viewport,g=n.scale,y=n.pageIndex,w=n.eventBus,x=n.$t;_classCallCheck(this,e),this._cancelled=!1,this.pageViewer=o,this.pageDiv=u,this.pdfPage=d,this.messageHandler=s,this.annotations=v||[],this.annotationsAll=m,this.viewport=_,this.annotationsArray=[],this.scale=g,this.eventBus=w,this.page=y,this.tool=o.tool||"",this.color=o.color||"",this.annotateManager=null,this.isDraging=!1,this.selectedElementName=null,this.addMode=!1,this.toolMode=o.toolMode||"",this.annotationStore=r,this.onHandleTool=this.handleTool.bind(this),this.onHandleToolMode=this.handleToolMode.bind(this),this.onHandlePropertyPanelChanged=this.handlePropertyPanelChanged.bind(this),this.onHandleAddSign=this.addSign.bind(this),this.annotationStore.$t=x}return _createClass(e,[{key:"handleTool",value:function(n){var r=n.tool,o=n.color;this.tool=r,this.color=o,this.pageViewer.tool=r,this.pageViewer.color=o,this.svgElement||(this.destroy(),this.renderPaintScene());var s=["highlight","underline","squiggly","strikeout"];if(r&&!s.includes(r)||document.querySelector(".document").classList.remove("annotation-edit"),s.includes(r)&&(this.freetextManager&&this.freetextManager.reset(),this.textManager&&this.textManager.reset(),this.textFieldManager&&this.textFieldManager.reset(),this.checkBoxManager&&this.checkBoxManager.reset(),this.radioButtonManager&&this.radioButtonManager.reset(),this.pushButtonManager&&this.pushButtonManager.reset(),this.listBoxManager&&this.listBoxManager.reset(),this.comboBoxManager&&this.comboBoxManager.reset(),this.annotateManager&&this.annotateManager.reset(),this.linkManager&&this.linkManager.reset()),s.includes(r)&&o&&this.svgElement.classList.add("point-none"),this.annotateManager&&(this.annotateManager.tool=r,this.annotateManager.color=o),this.freetextManager&&(this.freetextManager.tool=r,this.freetextManager.color=o),this.textManager&&(this.textManager.tool=r,this.textManager.color=o),this.textFieldManager&&(this.textFieldManager.tool=r,this.textFieldManager.color=o),this.checkBoxManager&&(this.checkBoxManager.tool=r,this.checkBoxManager.color=o),this.radioButtonManager&&(this.radioButtonManager.tool=r,this.radioButtonManager.color=o),this.pushButtonManager&&(this.pushButtonManager.tool=r,this.pushButtonManager.color=o),this.listBoxManager&&(this.listBoxManager.tool=r,this.listBoxManager.color=o),this.comboBoxManager&&(this.comboBoxManager.tool=r,this.comboBoxManager.color=o),this.linkManager&&(this.linkManager.tool=r,this.linkManager.color=o),["line","arrow","circle","square","ink"].includes(r)&&o){if(document.querySelector(".document").classList.add("annotation-edit"),this.freetextManager&&this.freetextManager.reset(),this.textManager&&this.textManager.reset(),this.textFieldManager&&this.textFieldManager.reset(),this.checkBoxManager&&this.checkBoxManager.reset(),this.radioButtonManager&&this.radioButtonManager.reset(),this.pushButtonManager&&this.pushButtonManager.reset(),this.listBoxManager&&this.listBoxManager.reset(),this.comboBoxManager&&this.comboBoxManager.reset(),this.linkManager&&this.linkManager.reset(),this.annotateManager)return void this.annotateManager.init();this.annotateManager=new PaintShape({tool:r,color:o,container:this.pageDiv,svgElement:this.svgElement,layer:this,viewport:this.viewport,scale:this.scale,page:this.page,eventBus:this.eventBus,selectedElementName:this.selectedElementName})}else if(r==="freetext"){if(document.querySelector(".document").classList.add("annotation-edit"),this.annotateManager&&this.annotateManager.reset(),this.textManager&&this.textManager.reset(),this.textFieldManager&&this.textFieldManager.reset(),this.checkBoxManager&&this.checkBoxManager.reset(),this.radioButtonManager&&this.radioButtonManager.reset(),this.pushButtonManager&&this.pushButtonManager.reset(),this.listBoxManager&&this.listBoxManager.reset(),this.comboBoxManager&&this.comboBoxManager.reset(),this.linkManager&&this.linkManager.reset(),this.freetextManager)return void this.freetextManager.init();this.freetextManager=new Freetext({tool:r,color:o,container:this.pageDiv,svgElement:this.svgElement,layer:this,viewport:this.viewport,scale:this.scale,page:this.page,eventBus:this.eventBus,selectedElementName:this.selectedElementName})}else if(r==="text"){if(document.querySelector(".document").classList.add("annotation-edit"),this.annotateManager&&this.annotateManager.reset(),this.freetextManager&&this.freetextManager.reset(),this.textFieldManager&&this.textFieldManager.reset(),this.checkBoxManager&&this.checkBoxManager.reset(),this.radioButtonManager&&this.radioButtonManager.reset(),this.pushButtonManager&&this.pushButtonManager.reset(),this.listBoxManager&&this.listBoxManager.reset(),this.comboBoxManager&&this.comboBoxManager.reset(),this.linkManager&&this.linkManager.reset(),this.textManager)return void this.textManager.init();this.textManager=new Text({tool:r,color:o,container:this.pageDiv,svgElement:this.svgElement,layer:this,viewport:this.viewport,scale:this.scale,page:this.page,eventBus:this.eventBus,selectedElementName:this.selectedElementName})}else if(r==="textfield"){if(document.querySelector(".document").classList.add("annotation-edit"),this.annotateManager&&this.annotateManager.reset(),this.freetextManager&&this.freetextManager.reset(),this.textManager&&this.textManager.reset(),this.checkBoxManager&&this.checkBoxManager.reset(),this.radioButtonManager&&this.radioButtonManager.reset(),this.pushButtonManager&&this.pushButtonManager.reset(),this.listBoxManager&&this.listBoxManager.reset(),this.comboBoxManager&&this.comboBoxManager.reset(),this.linkManager&&this.linkManager.reset(),this.textFieldManager)return void this.textFieldManager.init();this.textFieldManager=new AddTextField({tool:r,color:o,container:this.pageDiv,svgElement:this.svgElement,layer:this,viewport:this.viewport,scale:this.scale,page:this.page,eventBus:this.eventBus,selectedElementName:this.selectedElementName})}else if(r==="checkbox"){if(document.querySelector(".document").classList.add("annotation-edit"),this.annotateManager&&this.annotateManager.reset(),this.freetextManager&&this.freetextManager.reset(),this.textManager&&this.textManager.reset(),this.textFieldManager&&this.textFieldManager.reset(),this.radioButtonManager&&this.radioButtonManager.reset(),this.pushButtonManager&&this.pushButtonManager.reset(),this.listBoxManager&&this.listBoxManager.reset(),this.comboBoxManager&&this.comboBoxManager.reset(),this.linkManager&&this.linkManager.reset(),this.checkBoxManager)return void this.checkBoxManager.init();this.checkBoxManager=new AddCheckBox({tool:r,color:o,container:this.pageDiv,svgElement:this.svgElement,layer:this,viewport:this.viewport,scale:this.scale,page:this.page,eventBus:this.eventBus,selectedElementName:this.selectedElementName})}else if(r==="radiobutton"){if(document.querySelector(".document").classList.add("annotation-edit"),this.annotateManager&&this.annotateManager.reset(),this.freetextManager&&this.freetextManager.reset(),this.textManager&&this.textManager.reset(),this.textFieldManager&&this.textFieldManager.reset(),this.checkBoxManager&&this.checkBoxManager.reset(),this.pushButtonManager&&this.pushButtonManager.reset(),this.listBoxManager&&this.listBoxManager.reset(),this.comboBoxManager&&this.comboBoxManager.reset(),this.linkManager&&this.linkManager.reset(),this.radioButtonManager)return void this.radioButtonManager.init();this.radioButtonManager=new AddRadioButton({tool:r,color:o,container:this.pageDiv,svgElement:this.svgElement,layer:this,viewport:this.viewport,scale:this.scale,page:this.page,eventBus:this.eventBus,selectedElementName:this.selectedElementName})}else if(r==="pushbutton"){if(document.querySelector(".document").classList.add("annotation-edit"),this.annotateManager&&this.annotateManager.reset(),this.freetextManager&&this.freetextManager.reset(),this.textManager&&this.textManager.reset(),this.textFieldManager&&this.textFieldManager.reset(),this.checkBoxManager&&this.checkBoxManager.reset(),this.radioButtonManager&&this.radioButtonManager.reset(),this.listBoxManager&&this.listBoxManager.reset(),this.comboBoxManager&&this.comboBoxManager.reset(),this.linkManager&&this.linkManager.reset(),this.pushButtonManager)return void this.pushButtonManager.init();this.pushButtonManager=new AddPushButton({tool:r,color:o,container:this.pageDiv,svgElement:this.svgElement,layer:this,viewport:this.viewport,scale:this.scale,page:this.page,eventBus:this.eventBus,selectedElementName:this.selectedElementName})}else if(r==="combobox"){if(document.querySelector(".document").classList.add("annotation-edit"),this.annotateManager&&this.annotateManager.reset(),this.freetextManager&&this.freetextManager.reset(),this.textManager&&this.textManager.reset(),this.textFieldManager&&this.textFieldManager.reset(),this.checkBoxManager&&this.checkBoxManager.reset(),this.radioButtonManager&&this.radioButtonManager.reset(),this.pushButtonManager&&this.pushButtonManager.reset(),this.listBoxManager&&this.listBoxManager.reset(),this.linkManager&&this.linkManager.reset(),this.comboBoxManager)return void this.comboBoxManager.init();this.comboBoxManager=new AddComboBox({tool:r,color:o,container:this.pageDiv,svgElement:this.svgElement,layer:this,viewport:this.viewport,scale:this.scale,page:this.page,eventBus:this.eventBus,selectedElementName:this.selectedElementName})}else if(r==="listbox"){if(document.querySelector(".document").classList.add("annotation-edit"),this.annotateManager&&this.annotateManager.reset(),this.freetextManager&&this.freetextManager.reset(),this.textManager&&this.textManager.reset(),this.textFieldManager&&this.textFieldManager.reset(),this.checkBoxManager&&this.checkBoxManager.reset(),this.radioButtonManager&&this.radioButtonManager.reset(),this.pushButtonManager&&this.pushButtonManager.reset(),this.comboBoxManager&&this.comboBoxManager.reset(),this.linkManager&&this.linkManager.reset(),this.listBoxManager)return void this.listBoxManager.init();this.listBoxManager=new AddListBox({tool:r,color:o,container:this.pageDiv,svgElement:this.svgElement,layer:this,viewport:this.viewport,scale:this.scale,page:this.page,eventBus:this.eventBus,selectedElementName:this.selectedElementName})}else if(r==="stamp")this.annotateManager&&this.annotateManager.reset(),this.freetextManager&&this.freetextManager.reset(),this.textManager&&this.textManager.reset(),this.textFieldManager&&this.textFieldManager.reset(),this.checkBoxManager&&this.checkBoxManager.reset(),this.radioButtonManager&&this.radioButtonManager.reset(),this.pushButtonManager&&this.pushButtonManager.reset(),this.comboBoxManager&&this.comboBoxManager.reset(),this.listBoxManager&&this.listBoxManager.reset(),this.linkManager&&this.linkManager.reset();else if(r==="link"){if(document.querySelector(".document").classList.add("annotation-edit"),this.annotateManager&&this.annotateManager.reset(),this.freetextManager&&this.freetextManager.reset(),this.textManager&&this.textManager.reset(),this.textFieldManager&&this.textFieldManager.reset(),this.checkBoxManager&&this.checkBoxManager.reset(),this.radioButtonManager&&this.radioButtonManager.reset(),this.pushButtonManager&&this.pushButtonManager.reset(),this.comboBoxManager&&this.comboBoxManager.reset(),this.listBoxManager&&this.listBoxManager.reset(),this.linkManager)return void this.linkManager.init();this.linkManager=new PaintLink({tool:r,color:o,container:this.pageDiv,svgElement:this.svgElement,layer:this,viewport:this.viewport,scale:this.scale,page:this.page,eventBus:this.eventBus,selectedElementName:this.selectedElementName})}}},{key:"render",value:function(n){if(!this._cancelled){if(this.renderPaintScene(),this.eventBus._on("toolChanged",this.onHandleTool),this.eventBus._on("toolModeChanged",this.onHandleToolMode),this.eventBus._on("setDefaultSelect",this.onHandleDefaultSelect),this.eventBus._on("propertyPanelChanged",this.onHandlePropertyPanelChanged),n){var r=n.clone({dontFlip:!0});this.viewport=r,this.scale=r.scale,this.annotateManager&&(this.annotateManager.viewport=r),this.freetextManager&&(this.freetextManager.viewport=r),this.textManager&&(this.textManager.viewport=r),this.textFieldManager&&(this.textFieldManager.viewport=r),this.checkBoxManager&&(this.checkBoxManager.viewport=r),this.radioButtonManager&&(this.radioButtonManager.viewport=r),this.pushButtonManager&&(this.pushButtonManager.viewport=r),this.listBoxManager&&(this.listBoxManager.viewport=r),this.comboBoxManager&&(this.comboBoxManager.viewport=r),this.linkManager&&(this.linkManager.viewport=r)}if(this.div||this.renderContainer(),this.annotations&&this.annotations.length)for(var o=0;o<this.annotations.length;o++){var s,u,d,f,v,m,_,g=this.annotations[o];if(["highlight","underline","squiggly","strikeout"].includes(g.type)){var y=new TextAnnotation({container:this.div,annotation:g,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(y)}else if(g.type!=="line"||g.isDelete)if(g.type!=="square"&&g.type!=="circle"||g.isDelete)if(g.type!=="ink"||g.isDelete){if(g.type==="freetext"&&!g.isDelete){var w=new Shape({container:this.div,annotation:g,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(w)}}else{var x=new Ink({container:this.div,annotation:g,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(x)}else{var k=new Shape$1({container:this.div,annotation:g,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(k)}else{var S=!0;if(g.tail||g.head){var E=["None","Unknown"];E.includes(g.tail)&&E.includes(g.head)?S=!0:(g.head&&g.head!=="OpenArrow"&&g.head!=="None"&&(S=!1),g.tail&&g.tail!=="OpenArrow"&&g.tail!=="None"&&(S=!1))}if(S){var T=new Line({container:this.div,annotation:g,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(T)}}if(g.type==="text"&&!g.isDelete){var M=new Text$1({container:this.div,annotation:g,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(M)}if((g.type==="stamp"||g.type==="image")&&!g.isDelete){var I=new Stamp({container:this.div,annotation:g,messageHandler:this.messageHandler,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(I)}if(((s=g.type)===null||s===void 0?void 0:s.replace("-",""))==="textfield"&&!g.isDelete){var F=new TextField({container:this.div,annotation:g,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(F)}if(((u=g.type)===null||u===void 0?void 0:u.replace("-",""))==="checkbox"&&!g.isDelete){var O=new CheckBox({container:this.div,annotation:g,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(O)}if(((d=g.type)===null||d===void 0?void 0:d.replace("-",""))==="radiobutton"&&!g.isDelete){var N=new RadioButton({container:this.div,annotation:g,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(N)}if(((f=g.type)===null||f===void 0?void 0:f.replace("-",""))==="pushbutton"&&!g.isDelete){var D=new PushButton({container:this.div,annotation:g,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(D)}if(((v=g.type)===null||v===void 0?void 0:v.replace("-",""))==="listbox"&&!g.isDelete){var X=new ListBox({container:this.div,annotation:g,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(X)}if(((m=g.type)===null||m===void 0?void 0:m.replace("-",""))==="combobox"&&!g.isDelete){var U=new ComboBox({container:this.div,annotation:g,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(U)}if(((_=g.type)===null||_===void 0?void 0:_.replace("-",""))==="link"&&!g.isDelete){var Z=new Link({container:this.div,annotation:g,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(Z)}}this.tool&&this.color&&this.handleTool({tool:this.tool,color:this.color})}}},{key:"renderContainer",value:function(){var n=document.createElement("div");n.className="annotationContainer",n.tabIndex=0,this.pageDiv.append(n),this.div=n}},{key:"emptyAnnotations",value:function(){for(var n=this.annotationsArray.length,r=0;r<n;r++)this.annotationsArray[r].handleDelete();this.annotationsArray=[]}},{key:"cancel",value:function(){this._cancelled=!0,this.destroy()}},{key:"destroy",value:function(){var n,r;this.svgElement||(this.svgElement=this.pageDiv.querySelector(".annotationLayer svg")),(n=this.svgElement)===null||n===void 0||n.remove(),this.svgElement=null,this.div||(this.div=this.pageDiv.querySelector(".annotationContainer")),(r=this.div)===null||r===void 0||r.remove(),this.div=null,this.freetextManager&&this.freetextManager.reset(),this.textManager&&this.textManager.reset(),this.textFieldManager&&this.textFieldManager.reset(),this.checkBoxManager&&this.checkBoxManager.reset(),this.radioButtonManager&&this.radioButtonManager.reset(),this.pushButtonManager&&this.pushButtonManager.reset(),this.listBoxManager&&this.listBoxManager.reset(),this.comboBoxManager&&this.comboBoxManager.reset(),this.annotateManager&&this.annotateManager.reset(),this.linkManager&&this.linkManager.reset(),this.eventBus._off("toolChanged",this.onHandleTool),this.eventBus._off("toolModeChanged",this.onHandleToolMode),this.eventBus._off("setDefaultSelect",this.onHandleDefaultSelect),this.eventBus._off("propertyPanelChanged",this.onHandlePropertyPanelChanged),this.annotationStore.notFirstRender=!0}},{key:"setSceneDimensions",value:function(n){if(n){var r=n.clone({dontFlip:!0});this.viewport=r,this.annotateManager&&(this.annotateManager.viewport=r)}if(this.svgElement){var o=this.viewport,s=this.scene;s.style.width=o.width+"px",s.style.height=o.height+"px",this.svgElement.setAttribute("viewBox","0 0 ".concat(o.width," ").concat(o.height))}}},{key:"renderPaintScene",value:function(){this.svgElement||(this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.scene=this.pageDiv.querySelector(".annotationLayer"),this.scene.append(this.svgElement)),this.setSceneDimensions()}},{key:"renderAnnotation",value:function(n,r){if(this.div||this.renderContainer(),["highlight","underline","squiggly","strikeout"].includes(n.type)){var o=new TextAnnotation({container:this.div,annotation:n,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(o)}else if(n.type==="line"||n.type==="arrow"){var s=new Line({container:this.div,annotation:n,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,show:!0,layer:this});this.annotationsArray.push(s)}else if(n.type==="square"||n.type==="circle"){var u=new Shape$1({container:this.div,annotation:n,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(u)}else if(n.type!=="ink"||n.isDelete)if(n.type!=="freetext"||n.isDelete)if(n.type!=="text"||n.isDelete)if(n.type!=="stamp"||n.isDelete)if(n.type!=="textfield"||n.isDelete)if(n.type!=="checkbox"||n.isDelete)if(n.type!=="radiobutton"||n.isDelete)if(n.type!=="pushbutton"||n.isDelete)if(n.type!=="listbox"||n.isDelete)if(n.type!=="combobox"||n.isDelete){if(n.type==="link"&&!n.isDelete){var d=new Link({container:this.div,annotation:n,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this,show:r});this.annotationsArray.push(d)}}else{var f=new ComboBox({container:this.div,annotation:n,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this,show:r});this.annotationsArray.push(f)}else{var v=new ListBox({container:this.div,annotation:n,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this,show:r});this.annotationsArray.push(v)}else{var m=new PushButton({container:this.div,annotation:n,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this,show:r});this.annotationsArray.push(m)}else{var _=new RadioButton({container:this.div,annotation:n,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(_)}else{var g=new CheckBox({container:this.div,annotation:n,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(g)}else{var y=new TextField({container:this.div,annotation:n,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(y)}else{var w=new Stamp({container:this.div,annotation:n,messageHandler:this.messageHandler,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(w)}else{var x=new Text$1({container:this.div,annotation:n,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(x)}else{var k=new Shape({container:this.div,annotation:n,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this,show:r});this.annotationsArray.push(k)}else{var S=new Ink({container:this.div,annotation:n,page:this.page,viewport:this.viewport,scale:this.scale,eventBus:this.eventBus,layer:this});this.annotationsArray.push(S)}}},{key:"handleToolMode",value:function(n){this.toolMode=n,this.pageViewer.toolMode=n,this.eventBus.dispatch("changeSelectAvailable")}},{key:"handlePropertyPanelChanged",value:function(n){var r=this;if(this.annotations&&this.annotations.length){var o,s,u,d,f,v,m=this.annotations.find(function(_){return _.name===r.annotationStore.selectedElementName});m&&(((o=m.type)===null||o===void 0?void 0:o.replace("-",""))==="textfield"?this.eventBus.dispatch("textfieldPropertyPanelChanged",n):((s=m.type)===null||s===void 0?void 0:s.replace("-",""))==="checkbox"?this.eventBus.dispatch("checkboxPropertyPanelChanged",n):((u=m.type)===null||u===void 0?void 0:u.replace("-",""))==="radiobutton"?this.eventBus.dispatch("radioButtonPropertyPanelChanged",n):((d=m.type)===null||d===void 0?void 0:d.replace("-",""))==="pushbutton"?this.eventBus.dispatch("pushButtonPropertyPanelChanged",n):((f=m.type)===null||f===void 0?void 0:f.replace("-",""))==="listbox"?this.eventBus.dispatch("listBoxPropertyPanelChanged",n):((v=m.type)===null||v===void 0?void 0:v.replace("-",""))==="combobox"?this.eventBus.dispatch("comboBoxPropertyPanelChanged",n):m.type==="link"&&this.eventBus.dispatch("linkPropertyPanelChanged",n))}}},{key:"addSign",value:function(n){if(document.getElementsByClassName("sign-ink-save").length){var r=n instanceof PointerEvent;r&&this.eventBus.dispatch("getSignData",{page:this.page,viewport:this.viewport,clickX:n.offsetX,clickY:n.offsetY}),n&&n.page===this.page&&n.annotationData&&!r&&this.renderAnnotation(n.annotationData),this.pageDiv.removeEventListener("click",this.onHandleAddSign),this.eventBus.dispatch("initCursorStyle")}else this.pageDiv.removeEventListener("click",this.onHandleAddSign)}}]),e}(),toggleSelection=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var n=document.activeElement,r=[],o=0;o<e.rangeCount;o++)r.push(e.getRangeAt(o));switch(n.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":n.blur();break;default:n=null}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||r.forEach(function(s){e.addRange(s)}),n&&n.focus()}},deselectCurrent=toggleSelection,clipboardToIE11Formatting={"text/plain":"Text","text/html":"Url",default:"Text"},defaultMessage="Copy to clipboard: #{key}, Enter";function format(e){var n=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,n)}function copy(e,n){var r,o,s,u,d,f,v=!1;n||(n={}),r=n.debug||!1;try{if(s=deselectCurrent(),u=document.createRange(),d=document.getSelection(),(f=document.createElement("span")).textContent=e,f.ariaHidden="true",f.style.all="unset",f.style.position="fixed",f.style.top=0,f.style.clip="rect(0, 0, 0, 0)",f.style.whiteSpace="pre",f.style.webkitUserSelect="text",f.style.MozUserSelect="text",f.style.msUserSelect="text",f.style.userSelect="text",f.addEventListener("copy",function(m){if(m.stopPropagation(),n.format)if(m.preventDefault(),m.clipboardData===void 0){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var _=clipboardToIE11Formatting[n.format]||clipboardToIE11Formatting.default;window.clipboardData.setData(_,e)}else m.clipboardData.clearData(),m.clipboardData.setData(n.format,e);n.onCopy&&(m.preventDefault(),n.onCopy(m.clipboardData))}),document.body.appendChild(f),u.selectNodeContents(f),d.addRange(u),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");v=!0}catch(m){r&&console.error("unable to copy using execCommand: ",m),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(n.format||"text",e),n.onCopy&&n.onCopy(window.clipboardData),v=!0}catch(_){r&&console.error("unable to copy using clipboardData: ",_),r&&console.error("falling back to prompt"),o=format("message"in n?n.message:defaultMessage),window.prompt(o,e)}}finally{d&&(typeof d.removeRange=="function"?d.removeRange(u):d.removeAllRanges()),f&&document.body.removeChild(f),s()}return v}var copyToClipboard=copy,TextEditor=function(){function e(N){var D=N.eventBus,X=N.contentContainer,U=N.container,Z=N.pagePtr,j=N.editPagePtr,Q=N.editAreaPtr,ve=N.editAreaIndex,Se=N.viewport,we=N.scale,oe=N.messageHandler,ne=N.newAdd,q=N.pageViewer;_classCallCheck(this,e),this.eventBus=D,this.contentContainer=X,this.container=U,this.pagePtr=Z,this.editPagePtr=j,this.editAreaPtr=Q,this.editAreaIndex=ve,this.viewport=Se,this.scale=we,this.messageHandler=oe,this.newAdd=ne,this.pageViewer=q,this.frame=null,this.canvas=null,this.borderWidth=2,this.pointWidth=6,this.pointHeight=6,this.activeCharPlace={SectionIndex:0,LineIndex:0,RunIndex:0,CharIndex:0},this.selectedRects=null,this.selectedCharRange=null,this.state=0,this.mouseDown=!1,this.moving=!1,this.ratio=window.devicePixelRatio||1,this.start=null,this.end=null,this.newStart=null,this.newEnd=null,this.offsetX=0,this.offsetY=0,this.startPoint=null,this.endPoint=null,this.composing=!1,this.isFirefox=navigator.userAgent.indexOf("Firefox")>-1,this.mousedown=isMobileDevice$1?"touchstart":"mousedown",this.mouseup=isMobileDevice$1?"touchend":"mouseup",this.mousemove=isMobileDevice$1?"touchmove":"mousemove",this.textInput=isMobileDevice$1||this.isFirefox?"input":"textInput",this.onClick=this.handleClick.bind(this),this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.onBlur=this.handleBlur.bind(this),this.onKeydown=this.handleKeyDown.bind(this),this.onTextInput=this.handleTextInput.bind(this),this.onHandlePropertyPanelChanged=this.handlePropertyPanelChanged.bind(this),this.onCompositionstart=this.handleCompositionstart.bind(this),this.onCompositionend=this.handleCompositionend.bind(this),this.render()}var n,r,o,s,u,d,f,v,m,_,g,y,w,x,k,S,E,T,M,I,F,O;return _createClass(e,[{key:"render",value:(O=_asyncToGenerator(_regeneratorRuntime().mark(function N(){var D,X,U,Z,j,Q;return _regeneratorRuntime().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return this.eventBus._on("textPropertyChanged",this.onHandlePropertyPanelChanged),ve.next=3,this.getRect();case 3:return this.canvas=document.createElement("canvas"),X=createElement("div",{position:"absolute",left:this.rect.left+"px",top:this.rect.top+"px",width:this.rect.width+"px",height:this.rect.height+"px"},{class:"frame-container",index:this.editAreaIndex}),this.frameContainer=X,(D=this.container)===null||D===void 0||D.append(this.frameContainer),this.frameContainer.appendChild(this.canvas),U=createElement("div",{position:"absolute",left:0,top:0,width:"100%",height:"100%",borderWidth:this.borderWidth+"px",borderColor:"#1460F3"},{class:"text-container"}),this.textContainer=U,Z=createElement("textarea",{position:"absolute",left:0,top:0,width:"100%",height:"100%",resize:"none",opacity:0,touchAction:"none",zIndex:1}),this.textContainer.append(Z),this.textarea=Z,ve.next=15,this.getText();case 15:j=ve.sent,this.textarea.innerHTML=j,this.frameContainer.append(this.textContainer),this.textContainer.addEventListener(this.mousedown,this.onMousedown),this.textContainer.addEventListener(this.mouseup,this.onMouseup),Q=createSvg("svg",{class:"outerline"},{position:"absolute",left:this.rect.left-this.borderWidth+"px",top:this.rect.top-this.borderWidth+"px",width:this.rect.width+this.borderWidth+this.pointWidth/2+"px",height:this.rect.height+this.borderWidth+this.pointHeight/2+"px",zIndex:2}),this.outerLine=Q,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#1460F3","stroke-width":this.borderWidth,"fill-opacity":0,width:this.rect.width-this.borderWidth,height:this.rect.height-this.borderWidth,x:this.pointWidth/2,y:this.pointHeight/2}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:0,y:0}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:0,y:(this.rect.height-this.pointHeight+this.borderWidth)/2}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:0,y:this.rect.height-this.pointHeight/2+this.borderWidth/2}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:(this.rect.width-this.pointWidth+this.borderWidth)/2,y:this.rect.height-this.pointHeight/2+this.borderWidth/2}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:this.rect.width-this.pointWidth/2+this.borderWidth/2,y:this.rect.height-this.pointHeight/2+this.borderWidth/2}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:this.rect.width-this.pointWidth/2+this.borderWidth/2,y:(this.rect.height-this.pointHeight+this.borderWidth)/2}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:this.rect.width-this.pointWidth/2+this.borderWidth/2,y:0}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:(this.rect.width-this.pointWidth+this.borderWidth)/2,y:0}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLine.addEventListener(this.mousedown,this.onMousedown),this.outerLine.addEventListener(this.mouseup,this.onMouseup),this.newAdd&&this.goEditing();case 43:case"end":return ve.stop()}},N,this)})),function(){return O.apply(this,arguments)})},{key:"getActualRect",value:function(N,D,X){var U=X.left,Z=X.top,j=X.right,Q=X.bottom;return{start:getActualPoint({x:U,y:Z},N),end:getActualPoint({x:j,y:Q},N)}}},{key:"rectCalc",value:function(N,D){var X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;return{top:(N.y<D.y?N.y:D.y)-X,left:(N.x<D.x?N.x:D.x)-X,width:Math.abs(D.x-N.x)+2*X,height:Math.abs(D.y-N.y)+2*X}}},{key:"getInitialPoint",value:function(N,D){var X,U,Z,j,Q=this.scale,ve=N.x,Se=N.y,we=D.x,oe=D.y,ne=this.viewport,q=ne.width,H=ne.height,Y=ne.rotation;return Y===0?(X=ve/Q,U=Se/Q,Z=we/Q,j=oe/Q):Y===90?(X=Se/Q,U=ve/Q,Z=oe/Q,j=we/Q):Y===180?(X=(q-ve)/Q,U=Se/Q,Z=(q-we)/Q,j=oe/Q):(X=(H-Se)/Q,U=(q-ve)/Q,Z=(H-oe)/Q,j=(q-we)/Q),{start:{x:X,y:U},end:{x:Z,y:j}}}},{key:"handleMouseDown",value:function(N){if(N.button!==2){if(this.state===1){var D=N.target.getAttribute("data-id"),X=getClickPoint(N),U=X.pageX,Z=X.pageY;this.startState={operator:D,clickX:U,clickY:Z},document.addEventListener(this.mousemove,this.onMousemove)}else if(this.state===2){if(isMobileDevice$1){var j=N.changedTouches[0].clientX-this.pageViewer.div.getBoundingClientRect().left,Q=N.changedTouches[0].clientY-this.pageViewer.div.getBoundingClientRect().top;this.startPoint={x:j/this.scale,y:Q/this.scale}}else{var ve=N.offsetX,Se=N.offsetY;this.startPoint={x:(ve+this.rect.left)/this.scale,y:(Se+this.rect.top)/this.scale}}this.textContainer.addEventListener(this.mousemove,this.onMousemove)}document.addEventListener(this.mouseup,this.onMouseup),this.selectedCharRange=null,this.mouseMoved=!1,this.mouseDown=!0}}},{key:"handleMouseUp",value:(F=_asyncToGenerator(_regeneratorRuntime().mark(function N(D){var X,U,Z,j,Q,ve,Se,we,oe,ne,q,H,Y,le,Ce,Te,ke,Ee,Pe,Be,$e,Oe,Ne,J;return _regeneratorRuntime().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(!D||this.textContainer.contains(D.target)||this.state!==0){fe.next=2;break}return fe.abrupt("return");case 2:if(this.contentContainer.selectedFrameIndex===-1||this.contentContainer.selectedFrameIndex===this.editAreaIndex||this.state!==0){fe.next=4;break}return fe.abrupt("return");case 4:if(D&&D.target!==this.textarea&&D.target!==this.textContainer&&(isMobileDevice$1?(X=D.changedTouches[0].clientX-this.pageViewer.div.getBoundingClientRect().left,U=D.changedTouches[0].clientY-this.pageViewer.div.getBoundingClientRect().top):(X=D.offsetX,U=D.offsetY),Z=new MouseEvent(this.mouseup,{offsetX:X,offsetY:U,type:D.type,target:this.textarea}),this.textarea.dispatchEvent(Z)),this.mouseDown){fe.next=7;break}return fe.abrupt("return");case 7:if(this.mouseDown=!1,this.moving=!1,D.type==="touchend"&&(document.body.style.overscrollBehavior="auto"),j=!0,this.state===0&&(this.state=1,j=!1,this.getTextStyle(),this.contentContainer.selectedFrameIndex=this.editAreaIndex,this.eventBus.dispatch("changeRightPanelBtnDisabled",!1)),this.state!==1){fe.next=28;break}if(this.frameContainer.classList.remove("editing"),Se={start:this.start,end:this.end},we={start:this.newStart,end:this.newEnd},oe=getClickPoint(D),ne=oe.pageX,q=oe.pageY,(ne!==((Q=this.startState)===null||Q===void 0?void 0:Q.clickX)||q!==((ve=this.startState)===null||ve===void 0?void 0:ve.clickY))&&this.newStart&&this.newEnd&&(this.start=this.newStart,this.end=this.newEnd),this.container.append(this.outerLine),!this.mouseMoved){fe.next=27;break}return H=this.getInitialPoint(this.start,this.end),Y=H.start,le=H.end,Ce={left:Y.x,top:Y.y,right:le.x,bottom:le.y},fe.next=24,this.messageHandler.sendWithPromise("SetFrame",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr,rect:Ce});case 24:this.updateCanvas({oldPoint:Se,newPoint:we}),fe.next=28;break;case 27:!this.mouseMoved&&j&&(this.state=2,isMobileDevice$1||this.eventBus.dispatch("contentPropertyChange",{type:"text",isOpen:!0}));case 28:if(this.state!==2){fe.next=49;break}return this.outerLine.remove(),this.frameContainer.classList.add("editing"),isMobileDevice$1?(ke=D.changedTouches[0].clientX-this.pageViewer.div.getBoundingClientRect().left,Ee=D.changedTouches[0].clientY-this.pageViewer.div.getBoundingClientRect().top,Te={x:ke/this.scale,y:Ee/this.scale}):(Pe=D.offsetX,Be=D.offsetY,Te={x:(Pe+this.rect.left)/this.scale,y:(Be+this.rect.top)/this.scale}),this.mouseMoved&&(Te=this.endPoint,this.cursor.style.display="block"),this.startPoint||(this.startPoint=Te),fe.next=36,this.getCharsRange(this.startPoint,Te);case 36:$e=fe.sent,Oe=$e.start,Ne=$e.end,this.activeCharPlace=Ne,this.cursor||(J=createSvg("svg",{class:"cursor-animation"},{position:"absolute",left:0,top:0,width:"100%",height:"100%"}),this.cursor=J,this.textContainer.append(this.cursor)),this.updateCursorLine(),(this.selectedRects&&!this.mouseMoved||Oe.SectionIndex===Ne.SectionIndex&&Oe.LineIndex===Ne.LineIndex&&Oe.RunIndex===Ne.RunIndex&&Oe.CharIndex===Ne.CharIndex)&&this.clearSelectText(),this.selectedRects||this.getTextStyle(),this.textarea.focus(),this.textarea.addEventListener("blur",this.onBlur),this.textarea.addEventListener("keydown",this.onKeydown),this.textarea.addEventListener(this.textInput,this.onTextInput),this.isFirefox&&(this.textarea.addEventListener("compositionstart",this.onCompositionstart),this.textarea.addEventListener("compositionend",this.onCompositionend));case 49:this.frameContainer.classList.add("selected"),this.state===1&&onClickOutsideUp([this.textContainer,this.outerLine,document.querySelector(".editor-panel"),document.getElementById("propertyPanelButton")],this.handleOutside.bind(this)),document.removeEventListener(this.mousemove,this.onMousemove),document.removeEventListener(this.mouseup,this.onMouseup),this.textContainer.removeEventListener(this.mousemove,this.onMousemove);case 54:case"end":return fe.stop()}},N,this)})),function(N){return F.apply(this,arguments)})},{key:"handleMouseMove",value:(I=_asyncToGenerator(_regeneratorRuntime().mark(function N(D){var X,U,Z,j,Q,ve,Se,we,oe,ne,q,H,Y,le,Ce,Te,ke,Ee,Pe,Be,$e,Oe,Ne,J,fe,re,_e,be,Ae,Le,Ve,Fe,De,We;return _regeneratorRuntime().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(this.contentContainer.selectedFrameIndex===-1||this.contentContainer.selectedFrameIndex===this.editAreaIndex||this.state!==0){Re.next=2;break}return Re.abrupt("return");case 2:if(this.moving=!0,D.type==="touchmove"&&(document.body.style.overscrollBehavior="none"),this.state!==1){Re.next=17;break}if(X=getClickPoint(D),U=X.pageX,Z=X.pageY,j=this.start,Q=this.end,ve=this.startState){Re.next=11;break}return Re.abrupt("return");case 11:if(ve.clickX!==U||ve.clickY!==Z){Re.next=13;break}return Re.abrupt("return");case 13:Se=this.viewport,we=Se.width,oe=Se.height,ve.operator==="nw-resize"?(ne=U-(ve.clickX-this.start.x),q=Z-(ve.clickY-this.start.y),ne=Math.min(Q.x-5,ne),ne=Math.max(0,ne),q=Math.min(Q.y-5,q),q=Math.max(0,q),this.updateOutline({start:{x:ne,y:q},end:Q})):ve.operator==="w-resize"?(H=U-(ve.clickX-this.start.x),H=Math.min(Q.x-5,H),H=Math.max(0,H),this.updateOutline({start:{x:H,y:j.y},end:Q})):ve.operator==="sw-resize"?(Y=U-(ve.clickX-this.start.x),le=Z-(ve.clickY-this.end.y),Y=Math.min(Q.x-5,Y),Y=Math.max(0,Y),le=Math.min(oe,le),le=Math.max(j.y+5,le),this.updateOutline({start:{x:Y,y:j.y},end:{x:Q.x,y:le}})):ve.operator==="s-resize"?(Ce=Z-(ve.clickY-this.end.y),Ce=Math.min(oe,Ce),Ce=Math.max(j.y+5,Ce),this.updateOutline({start:j,end:{x:Q.x,y:Ce}})):ve.operator==="se-resize"?(Te=U-(ve.clickX-this.end.x),ke=Z-(ve.clickY-this.end.y),Te=Math.min(we,Te),Te=Math.max(j.x+5,Te),ke=Math.min(oe,ke),ke=Math.max(j.y+5,ke),this.updateOutline({start:j,end:{x:Te,y:ke}})):ve.operator==="e-resize"?(Ee=U-(ve.clickX-this.end.x),Ee=Math.min(we,Ee),Ee=Math.max(j.x+5,Ee),this.updateOutline({start:j,end:{x:Ee,y:Q.y}})):ve.operator==="ne-resize"?(Pe=U-(ve.clickX-this.end.x),Be=Z-(ve.clickY-this.start.y),Pe=Math.min(we,Pe),Pe=Math.max(j.x+5,Pe),Be=Math.min(Q.y-5,Be),Be=Math.max(0,Be),this.updateOutline({start:{x:j.x,y:Be},end:{x:Pe,y:Q.y}})):ve.operator==="n-resize"?($e=Z-(ve.clickY-this.start.y),$e=Math.min(Q.y-5,$e),$e=Math.max(0,$e),this.updateOutline({start:{x:j.x,y:$e},end:Q})):ve.operator==="move"&&(Oe=U-(ve.clickX-this.start.x),Ne=Z-(ve.clickY-this.start.y),J=U-(ve.clickX-this.end.x),fe=Z-(ve.clickY-this.end.y),re={width:Math.abs(j.x-Q.x),height:Math.abs(j.y-Q.y)},Oe<J?(Oe=Math.max(0,Oe),Oe=Math.min(we-re.width,Oe),J=Math.max(re.width,J),J=Math.min(we,J)):(J=Math.max(0,J),J=Math.min(we-re.width,J),Oe=Math.max(re.width,Oe),Oe=Math.min(we,Oe)),Ne<fe?(Ne=Math.max(0,Ne),Ne=Math.min(oe-re.height,Ne),fe=Math.max(re.height,fe),fe=Math.min(oe,fe)):(fe=Math.max(0,fe),fe=Math.min(oe-re.height,fe),Ne=Math.max(re.height,Ne),Ne=Math.min(oe,Ne)),this.updateOutline({start:{x:Oe,y:Ne},end:{x:J,y:fe}})),Re.next=30;break;case 17:if(this.startPoint){Re.next=19;break}return Re.abrupt("return");case 19:return isMobileDevice$1?(be=D.changedTouches[0].clientX-this.pageViewer.div.getBoundingClientRect().left,Ae=D.changedTouches[0].clientY-this.pageViewer.div.getBoundingClientRect().top,_e={x:be/this.scale,y:Ae/this.scale}):(Le=D.offsetX,Ve=D.offsetY,_e={x:(Le+this.rect.left)/this.scale,y:(Ve+this.rect.top)/this.scale}),this.endPoint=_e,Re.next=23,this.getCharsRange(this.startPoint,_e);case 23:Fe=Re.sent,De=Fe.start,We=Fe.end,this.activeCharPlace=We,this.selectedCharRange={start:De,end:We},this.cursor.style.display="none",this.updateSelectedRect(!0);case 30:this.mouseMoved=!0;case 31:case"end":return Re.stop()}},N,this)})),function(N){return I.apply(this,arguments)})},{key:"handleClick",value:function(){}},{key:"handleBlur",value:function(){}},{key:"handleOutside",value:(M=_asyncToGenerator(_regeneratorRuntime().mark(function N(){var D,X=this;return _regeneratorRuntime().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(!this.moving){U.next=2;break}return U.abrupt("return");case 2:if(this.state=this.state===2?1:this.state===1?0:this.state,this.frameContainer.classList.remove("editing"),this.clearSelectText(),(D=this.cursor)===null||D===void 0||D.remove(),this.cursor=null,this.state===0&&(this.frameContainer.classList.remove("selected"),this.outerLine.remove(),this.contentContainer.selectedFrameIndex=-1,setTimeout(function(){document.querySelector(".frame-container.selected")||(X.eventBus.dispatch("contentPropertyChange",{type:"text",isOpen:!1}),X.eventBus.dispatch("changeRightPanelBtnDisabled",!0))},1)),this.state!==1){U.next=21;break}return U.next=11,this.getText();case 11:if(U.sent.length!==0){U.next=18;break}return U.next=15,this.outerLine.remove();case 15:return this.contentContainer.selectedFrameIndex=-1,this.remove(),U.abrupt("return");case 18:this.container.append(this.outerLine),this.textContainer.removeEventListener(this.mousemove,this.onMousemove),onClickOutsideUp([this.textContainer,this.outerLine,document.querySelector(".editor-panel"),document.getElementById("propertyPanelButton")],this.handleOutside.bind(this));case 21:this.textarea.removeEventListener("blur",this.onBlur),this.textarea.removeEventListener("keydown",this.onKeydown),this.textarea.removeEventListener(this.textInput,this.onTextInput),this.isFirefox&&(this.textarea.removeEventListener("compositionstart",this.onCompositionstart),this.textarea.removeEventListener("compositionend",this.onCompositionend));case 25:case"end":return U.stop()}},N,this)})),function(){return M.apply(this,arguments)})},{key:"handleKeyDown",value:(T=_asyncToGenerator(_regeneratorRuntime().mark(function N(D){var X,U,Z,j,Q,ve,Se,we,oe,ne,q,H,Y,le;return _regeneratorRuntime().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(X=D.keyCode||D.which,U=[9,16,17,18,20,27,37,38,39,40,91,93],Z=D.ctrlKey||D.altKey||D.metaKey||U.includes(X),this.isToolKey=Z,X!==8&&X!==46){Ce.next=31;break}if(this.activeCharPlace.SectionIndex!==0||this.activeCharPlace.LineIndex!==0||this.activeCharPlace.RunIndex!==0||this.activeCharPlace.CharIndex!==-1||this.selectedCharRange){Ce.next=7;break}return Ce.abrupt("return");case 7:if(j={},!this.selectedCharRange){Ce.next=15;break}return Ce.next=11,this.getCharPlace("DeleteChars");case 11:j=Ce.sent,this.selectedCharRange=null,Ce.next=24;break;case 15:if(X!==8){Ce.next=21;break}return Ce.next=18,this.getCharPlace("BackSpaceChar");case 18:j=Ce.sent,Ce.next=24;break;case 21:return Ce.next=23,this.getCharPlace("DeleteChar");case 23:j=Ce.sent;case 24:return this.activeCharPlace=j,Q=this.rect,Ce.next=28,this.updateCanvas(null,Q);case 28:return this.clearSelectText(),this.updateCursorLine(),Ce.abrupt("return");case 31:if(!this.selectedCharRange||Z){Ce.next=41;break}return Ce.next=34,this.getCharPlace("DeleteChars");case 34:return ve=Ce.sent,this.activeCharPlace=ve,this.selectedCharRange=null,Se=this.rect,Ce.next=40,this.updateCanvas(null,Se);case 40:this.updateCursorLine();case 41:if(this.isPasteKey=(D.metaKey||D.ctrlKey)&&(D.key==="v"||D.key==="V"),X!==37){Ce.next=49;break}return Ce.next=45,this.getCharPlace("GetPrevCharPlace");case 45:we=Ce.sent,this.activeCharPlace=we.start,Ce.next=91;break;case 49:if(X!==38){Ce.next=56;break}return Ce.next=52,this.getCharPlace("GetUpCharPlace");case 52:oe=Ce.sent,this.activeCharPlace=oe.start,Ce.next=91;break;case 56:if(X!==39){Ce.next=63;break}return Ce.next=59,this.getCharPlace("GetNextCharPlace");case 59:ne=Ce.sent,this.activeCharPlace=ne.start,Ce.next=91;break;case 63:if(X!==40){Ce.next=70;break}return Ce.next=66,this.getCharPlace("GetDownCharPlace");case 66:q=Ce.sent,this.activeCharPlace=q.start,Ce.next=91;break;case 70:if(!D.metaKey&&!D.ctrlKey||D.key!=="c"&&D.key!=="C"||!this.selectedCharRange){Ce.next=78;break}return Ce.next=73,this.getText();case 73:return H=Ce.sent,copyToClipboard(H),Ce.abrupt("return");case 78:if(!D.metaKey&&!D.ctrlKey||D.key!=="x"&&D.key!=="X"||!this.selectedCharRange){Ce.next=90;break}return Ce.next=81,this.getText();case 81:return Y=Ce.sent,copyToClipboard(Y),Ce.next=85,this.getCharPlace("DeleteChars");case 85:le=Ce.sent,this.activeCharPlace=le,this.selectedCharRange=null,Ce.next=91;break;case 90:return Ce.abrupt("return");case 91:this.clearSelectText(),this.updateCursorLine();case 93:case"end":return Ce.stop()}},N,this)})),function(N){return T.apply(this,arguments)})},{key:"handleTextInput",value:(E=_asyncToGenerator(_regeneratorRuntime().mark(function N(D){var X,U;return _regeneratorRuntime().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(!this.isToolKey||this.isPasteKey){Z.next=2;break}return Z.abrupt("return");case 2:if(X=D.data,!this.isFirefox){Z.next=10;break}if(D.inputType!=="insertLineBreak"){Z.next=8;break}X=`
`,Z.next=10;break;case 8:if(!this.composing&&X!==null){Z.next=10;break}return Z.abrupt("return");case 10:return Z.next=12,this.messageHandler.sendWithPromise("InsertText",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace,text:X});case 12:U=Z.sent,this.activeCharPlace=U,this.saveEdit(),this.updateCanvas(),this.updateCursorLine();case 17:case"end":return Z.stop()}},N,this)})),function(N){return E.apply(this,arguments)})},{key:"handleCompositionstart",value:function(){this.composing=!0}},{key:"handleCompositionend",value:(S=_asyncToGenerator(_regeneratorRuntime().mark(function N(D){var X;return _regeneratorRuntime().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,this.messageHandler.sendWithPromise("InsertText",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace,text:D.data});case 2:X=U.sent,this.activeCharPlace=X,this.saveEdit(),this.updateCanvas(),this.updateCursorLine(),this.composing=!1;case 8:case"end":return U.stop()}},N,this)})),function(N){return S.apply(this,arguments)})},{key:"getRect",value:(k=_asyncToGenerator(_regeneratorRuntime().mark(function N(){var D,X,U,Z;return _regeneratorRuntime().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,this.messageHandler.sendWithPromise("GetFrame",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr});case 2:this.frame=j.sent,D=this.getActualRect(this.viewport,this.scale,this.frame),X=D.start,U=D.end,this.start=X,this.end=U,Z=this.rectCalc(X,U),this.rect=Z;case 8:case"end":return j.stop()}},N,this)})),function(){return k.apply(this,arguments)})},{key:"updateCanvas",value:(x=_asyncToGenerator(_regeneratorRuntime().mark(function N(D,X){var U,Z,j,Q,ve,Se,we,oe,ne,q,H,Y,le,Ce,Te,ke;return _regeneratorRuntime().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,this.getRect();case 2:return this.frameContainer&&this.outerLine&&(this.updateOutline({start:this.start,end:this.end}),setCss(this.frameContainer,{left:this.rect.left+"px",top:this.rect.top+"px",width:this.rect.width+"px",height:this.rect.height+"px"})),D?(U=D.oldPoint,Z=D.newPoint,j=this.getEntireArea(U,Z),Q=this.getActualRect(this.viewport,this.scale,j),ve=Q.start,Se=Q.end,we=this.rectCalc(ve,Se),oe=this.rectCalc(U.start,U.end),ne=this.getEntireArea(oe,this.rect),q={left:ne.left,top:ne.top,width:ne.right-ne.left,height:ne.bottom-ne.top},parseInt(we.left)===parseInt(ne.left)&&parseInt(we.top)===parseInt(ne.top)&&parseInt(we.width)===parseInt(ne.width)&&parseInt(we.height)===parseInt(ne.height)||(we=q),H={left:parseInt(we.left*this.ratio),top:parseInt(we.top*this.ratio),right:parseInt(we.left*this.ratio)+parseInt(we.width*this.ratio),bottom:parseInt(we.top*this.ratio)+parseInt(we.height*this.ratio),width:parseInt(we.width*this.ratio),height:parseInt(we.height*this.ratio)},this.imgRect=H,this.canvas.width=this.rect.width*this.ratio,this.canvas.height=this.rect.height*this.ratio):X?(Y=this.getEntireArea(X,this.rect),le={left:parseInt(Y.left*this.ratio),top:parseInt(Y.top*this.ratio),right:parseInt(Y.right*this.ratio),bottom:parseInt(Y.bottom*this.ratio),width:parseInt(Y.right*this.ratio)-parseInt(Y.left*this.ratio),height:parseInt(Y.bottom*this.ratio)-parseInt(Y.top*this.ratio)},this.imgRect=le,this.canvas.width=this.rect.width*this.ratio,this.canvas.height=this.rect.height*this.ratio):(Ce={left:parseInt(this.rect.left*this.ratio),top:parseInt(this.rect.top*this.ratio),right:parseInt(this.rect.left*this.ratio)+parseInt(this.rect.width*this.ratio),bottom:parseInt(this.rect.top*this.ratio)+parseInt(this.rect.height*this.ratio),width:parseInt(this.rect.width*this.ratio),height:parseInt(this.rect.height*this.ratio)},this.imgRect=Ce,this.canvas.width=Ce.width,this.canvas.height=Ce.height),Ee.next=6,this.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:this.pagePtr,scale:this.scale*this.ratio,left:this.imgRect.left,right:this.imgRect.right,bottom:this.imgRect.bottom,top:this.imgRect.top});case 6:Te=Ee.sent,ke=Te.imageArray,this.imageArray=ke,this.drawCanvas(),this.saveEdit();case 11:case"end":return Ee.stop()}},N,this)})),function(N,D){return x.apply(this,arguments)})},{key:"drawCanvas",value:function(){if(this.imgRect){if(this.pageViewer.canvas){var N=this.pageViewer.canvas.getContext("2d"),D=N.createImageData(parseInt(this.imgRect.width),parseInt(this.imgRect.height));D.data.set(this.imageArray),N.putImageData(D,this.imgRect.left,this.imgRect.top)}}else this.updateCanvas()}},{key:"updateCursorLine",value:(w=_asyncToGenerator(_regeneratorRuntime().mark(function N(){var D,X;return _regeneratorRuntime().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,this.messageHandler.sendWithPromise("GetTextCursorPoints",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr,char:this.activeCharPlace});case 2:D=U.sent,this.cursor.innerHTML="",X=createSvg("line",{x1:D.HighPointX*this.scale-this.rect.left,x2:D.LowPointX*this.scale-this.rect.left,y1:D.HighPointY*this.scale-this.rect.top,y2:D.LowPointY*this.scale-this.rect.top,stroke:"currentcolor"}),this.cursorLine=X,this.cursor.append(X);case 7:case"end":return U.stop()}},N,this)})),function(){return w.apply(this,arguments)})},{key:"getTextStyle",value:(y=_asyncToGenerator(_regeneratorRuntime().mark(function N(){var D,X,U;return _regeneratorRuntime().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,this.messageHandler.sendWithPromise("GetTextStyle",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace});case 2:return D=Z.sent,X={color:"rgb(".concat(D.R,", ").concat(D.G,", ").concat(D.B,")"),opacity:Math.round(100*D.Transparency),fontStyle:D.IsBold&&D.IsItalic?3:D.IsBold||D.IsItalic?D.IsBold?1:2:0,fontSize:Math.round(D.FontSize)},Z.next=6,this.messageHandler.sendWithPromise("GetBaseFontName",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace});case 6:U=Z.sent,X.fontFamily=U,this.textStyle=X,this.eventBus.dispatch("contentPropertyChange",_objectSpread2$1({type:"text"},X));case 10:case"end":return Z.stop()}},N,this)})),function(){return y.apply(this,arguments)})},{key:"getCharPlace",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function N(D){var X;return _regeneratorRuntime().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return X={editAreaPtr:this.editAreaPtr,char:this.activeCharPlace},D==="DeleteChars"&&(X.start=this.selectedCharRange.start,X.end=this.selectedCharRange.end),U.next=4,this.messageHandler.sendWithPromise(D,X);case 4:return U.abrupt("return",U.sent);case 5:case"end":return U.stop()}},N,this)})),function(N){return g.apply(this,arguments)})},{key:"getCharsRange",value:(_=_asyncToGenerator(_regeneratorRuntime().mark(function N(D,X){return _regeneratorRuntime().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,this.messageHandler.sendWithPromise("SelectCharsRangeAtPos",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr,startPoint:D,endPoint:X});case 2:return U.abrupt("return",U.sent);case 3:case"end":return U.stop()}},N,this)})),function(N,D){return _.apply(this,arguments)})},{key:"saveEdit",value:function(){this.messageHandler.sendWithPromise("EndEdit",this.editPagePtr)}},{key:"getText",value:(m=_asyncToGenerator(_regeneratorRuntime().mark(function N(){var D,X,U;return _regeneratorRuntime().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(!this.selectedCharRange){Z.next=7;break}return D=this.selectedCharRange,X=D.start,U=D.end,Z.next=4,this.messageHandler.sendWithPromise("GetTextByRange",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr,start:X,end:U});case 4:case 9:return Z.abrupt("return",Z.sent);case 7:return Z.next=9,this.messageHandler.sendWithPromise("GetText",this.editAreaPtr);case 10:case"end":return Z.stop()}},N,this)})),function(){return m.apply(this,arguments)})},{key:"updateOutline",value:function(N){var D=N.start,X=N.end,U=this.rectCalc(D,X);this.newStart=D,this.newEnd=X,setCss(this.outerLine,{left:U.left-this.borderWidth+"px",top:U.top-this.borderWidth+"px",width:U.width+this.borderWidth+this.pointWidth/2+"px",height:U.height+this.borderWidth+this.pointHeight/2+"px"}),this.moveRect.setAttribute("width",U.width-this.borderWidth),this.moveRect.setAttribute("height",U.height-this.borderWidth),this.LeftRect.setAttribute("y",(U.height-this.pointHeight+this.borderWidth)/2),this.bottomLeftRect.setAttribute("y",U.height-this.pointHeight/2+this.borderWidth/2),this.bottomRect.setAttribute("x",(U.width-this.pointWidth+this.borderWidth)/2),this.bottomRect.setAttribute("y",U.height-this.pointHeight/2+this.borderWidth/2),this.bottomRightRect.setAttribute("x",U.width-this.pointWidth/2+this.borderWidth/2),this.bottomRightRect.setAttribute("y",U.height-this.pointHeight/2+this.borderWidth/2),this.rightRect.setAttribute("x",U.width-this.pointWidth/2+this.borderWidth/2),this.rightRect.setAttribute("y",(U.height-this.pointHeight+this.borderWidth)/2),this.topRightRect.setAttribute("x",U.width-this.pointWidth/2+this.borderWidth/2),this.topRect.setAttribute("x",(U.width-this.pointWidth+this.borderWidth)/2)}},{key:"getCharsRect",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function N(D,X){var U,Z,j,Q,ve,Se,we,oe;return _regeneratorRuntime().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(D.SectionIndex!==X.SectionIndex||D.LineIndex!==X.LineIndex||D.RunIndex!==X.RunIndex||D.CharIndex!==X.CharIndex){ne.next=2;break}return ne.abrupt("return");case 2:return ne.next=4,this.messageHandler.sendWithPromise("GetSelectLineRects",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr,start:D,end:X});case 4:for(U=ne.sent,Z=[],j=0;j<U.length;j++)Q={left:U[j].Left,top:U[j].Top,right:U[j].Right,bottom:U[j].Bottom},ve=this.getActualRect(this.viewport,this.scale,Q),Se=ve.start,we=ve.end,this.start=Se,this.end=we,oe=this.rectCalc(Se,we,0),Z.push(oe);return ne.abrupt("return",Z);case 8:case"end":return ne.stop()}},N,this)})),function(N,D){return v.apply(this,arguments)})},{key:"updateSelectedRect",value:(f=_asyncToGenerator(_regeneratorRuntime().mark(function N(D){var X,U,Z,j,Q,ve,Se,we,oe,ne,q,H;return _regeneratorRuntime().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(this.selectedCharRange){Y.next=2;break}return Y.abrupt("return");case 2:return Z=this.selectedCharRange,j=Z.start,Q=Z.end,Y.next=5,this.getCharsRect(j,Q);case 5:if((ve=Y.sent)!=null&&ve.length){Y.next=8;break}return Y.abrupt("return");case 8:if(Se=(X=this.selectedRects)===null||X===void 0?void 0:X[this.selectedRects.length-1],!D||(Se==null?void 0:Se.left)!==ve[0].left||(Se==null?void 0:Se.top)!==ve[0].top||(Se==null?void 0:Se.width)!==ve[0].width||(Se==null?void 0:Se.height)!==ve[0].height){Y.next=12;break}return this.selectedRects=ve,Y.abrupt("return");case 12:if(we=this.canvas.getContext("2d"),(U=this.selectedRects)===null||U===void 0||!U.length){Y.next=26;break}oe=Math.max(this.selectedRects.length,ve.length),ne=0;case 16:if(!(ne<oe)){Y.next=25;break}if(q=this.selectedRects[ne],H=ve[ne],(q==null?void 0:q.left)!==(H==null?void 0:H.left)||(q==null?void 0:q.top)!==(H==null?void 0:H.top)||(q==null?void 0:q.width)!==(H==null?void 0:H.width)||(q==null?void 0:q.height)!==(H==null?void 0:H.height)){Y.next=21;break}return Y.abrupt("continue",22);case 21:we.clearRect(0,0,this.canvas.width,this.canvas.height);case 22:ne++,Y.next=16;break;case 25:this.drawCanvas();case 26:this.selectedRects=ve,this.selectText(),this.updateCursorLine();case 29:case"end":return Y.stop()}},N,this)})),function(N){return f.apply(this,arguments)})},{key:"selectText",value:function(){var N;if((N=this.selectedRects)!==null&&N!==void 0&&N.length){var D=this.canvas.getContext("2d");D.clearRect(0,0,this.canvas.width,this.canvas.height);var X,U=_createForOfIteratorHelper(this.selectedRects);try{for(U.s();!(X=U.n()).done;){var Z=X.value;D.beginPath(),D.fillStyle="rgba(0, 117, 255, 0.3)",D.fillRect((Z.left-this.rect.left)*this.ratio,(Z.top-this.rect.top)*this.ratio,Z.width*this.ratio,Z.height*this.ratio)}}catch(j){U.e(j)}finally{U.f()}}}},{key:"clearSelectText",value:function(){var N;(N=this.selectedRects)!==null&&N!==void 0&&N.length&&(this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.updateCanvas()),this.selectedRects=null,this.selectedCharRange=null}},{key:"setTextStyle",value:(d=_asyncToGenerator(_regeneratorRuntime().mark(function N(D){var X,U,Z;return _regeneratorRuntime().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:j.t0=_regeneratorRuntime().keys(D);case 1:if((j.t1=j.t0()).done){j.next=49;break}if((X=j.t1.value)!=="alignType"){j.next=11;break}if(this.selectedCharRange){j.next=9;break}return j.next=7,this.messageHandler.sendWithPromise("SetTextAligningSection",{editAreaPtr:this.editAreaPtr,alignType:D.alignType,char:activeCharPlace={SectionIndex:0,LineIndex:0,RunIndex:0,CharIndex:-1}});case 7:j.next=11;break;case 9:return j.next=11,this.messageHandler.sendWithPromise("SetTextAligningRange",{editAreaPtr:this.editAreaPtr,alignType:D.alignType,start:this.selectedCharRange.start,end:this.selectedCharRange.end});case 11:if(this.selectedCharRange||X==="alignType"){j.next=14;break}return j.next=14,this.selectAllText();case 14:if(X!=="color"){j.next=17;break}return j.next=17,this.messageHandler.sendWithPromise("SetCharsFontColor",{editAreaPtr:this.editAreaPtr,start:this.selectedCharRange.start,end:this.selectedCharRange.end,color:this.hexToRgb(D.color)});case 17:if(X!=="opacity"){j.next=20;break}return j.next=20,this.messageHandler.sendWithPromise("SetCharsFontTransparency",{editAreaPtr:this.editAreaPtr,start:this.selectedCharRange.start,end:this.selectedCharRange.end,opacity:D.opacity/100});case 20:if(X!=="fontSize"){j.next=23;break}return j.next=23,this.messageHandler.sendWithPromise("SetCharsFontSize",{editAreaPtr:this.editAreaPtr,start:this.selectedCharRange.start,end:this.selectedCharRange.end,fontSize:D.fontSize});case 23:if(X!=="fontFamily"){j.next=26;break}return j.next=26,this.messageHandler.sendWithPromise("SetFontFromNativeTrueTypeFont",{editAreaPtr:this.editAreaPtr,start:this.selectedCharRange.start,end:this.selectedCharRange.end,fontFamily:D.fontFamily});case 26:if(X!=="fontStyle"){j.next=47;break}return U=D.fontStyle,j.next=30,this.setCharsFontStyle("ClearCharsFontBold");case 30:return j.next=32,this.setCharsFontStyle("ClearCharsFontItalic");case 32:if(U!==1){j.next=37;break}return j.next=35,this.setCharsFontStyle("SetCharsFontBold");case 35:j.next=47;break;case 37:if(U!==2){j.next=42;break}return j.next=40,this.setCharsFontStyle("SetCharsFontItalic");case 40:j.next=47;break;case 42:if(U!==3){j.next=47;break}return j.next=45,this.setCharsFontStyle("SetCharsFontBold");case 45:return j.next=47,this.setCharsFontStyle("SetCharsFontItalic");case 47:j.next=1;break;case 49:return Z=this.rect,j.next=52,this.updateCanvas(null,Z);case 52:case"end":return j.stop()}},N,this)})),function(N){return d.apply(this,arguments)})},{key:"handlePropertyPanelChanged",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function N(D){var X,U,Z,j,Q,ve,Se;return _regeneratorRuntime().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if(this.state!==0){we.next=2;break}return we.abrupt("return");case 2:if(X=!1,this.selectedCharRange||this.state!==1){we.next=6;break}return we.next=6,this.selectAllText();case 6:we.t0=_regeneratorRuntime().keys(D);case 7:if((we.t1=we.t0()).done){we.next=59;break}if(U=we.t1.value,D[U]!==this.textStyle[U]){we.next=11;break}return we.abrupt("continue",7);case 11:if(U!=="alignType"){we.next=19;break}if(this.selectedCharRange){we.next=17;break}return we.next=15,this.messageHandler.sendWithPromise("SetTextAligningSection",{editAreaPtr:this.editAreaPtr,alignType:D.alignType,char:this.activeCharPlace});case 15:we.next=19;break;case 17:return we.next=19,this.messageHandler.sendWithPromise("SetTextAligningRange",{editAreaPtr:this.editAreaPtr,alignType:D.alignType,start:this.selectedCharRange.start,end:this.selectedCharRange.end});case 19:if(this.selectedCharRange||U==="alignType"||this.state!==2){we.next=22;break}return we.next=22,this.selectAllText();case 22:if(U!=="color"){we.next=25;break}return we.next=25,this.messageHandler.sendWithPromise("SetCharsFontColor",{editAreaPtr:this.editAreaPtr,start:this.selectedCharRange.start,end:this.selectedCharRange.end,color:this.hexToRgb(D.color)});case 25:if(U!=="opacity"){we.next=28;break}return we.next=28,this.messageHandler.sendWithPromise("SetCharsFontTransparency",{editAreaPtr:this.editAreaPtr,start:this.selectedCharRange.start,end:this.selectedCharRange.end,opacity:D.opacity/100});case 28:if(U!=="fontSize"){we.next=31;break}return we.next=31,this.messageHandler.sendWithPromise("SetCharsFontSize",{editAreaPtr:this.editAreaPtr,start:this.selectedCharRange.start,end:this.selectedCharRange.end,fontSize:D.fontSize});case 31:if(U!=="fontFamily"){we.next=34;break}return we.next=34,this.messageHandler.sendWithPromise("SetFontFromNativeTrueTypeFont",{editAreaPtr:this.editAreaPtr,start:this.selectedCharRange.start,end:this.selectedCharRange.end,fontFamily:D.fontFamily});case 34:if(U!=="fontStyle"){we.next=55;break}return Z=D.fontStyle,we.next=38,this.setCharsFontStyle("ClearCharsFontBold");case 38:return we.next=40,this.setCharsFontStyle("ClearCharsFontItalic");case 40:if(Z!==1){we.next=45;break}return we.next=43,this.setCharsFontStyle("SetCharsFontBold");case 43:we.next=55;break;case 45:if(Z!==2){we.next=50;break}return we.next=48,this.setCharsFontStyle("SetCharsFontItalic");case 48:we.next=55;break;case 50:if(Z!==3){we.next=55;break}return we.next=53,this.setCharsFontStyle("SetCharsFontBold");case 53:return we.next=55,this.setCharsFontStyle("SetCharsFontItalic");case 55:this.textStyle[U]=D[U],X=!0,we.next=7;break;case 59:if(X){we.next=61;break}return we.abrupt("return");case 61:return j=this.rect,we.next=64,this.updateCanvas(null,j);case 64:if(!this.selectedCharRange||this.state!==2){we.next=72;break}return we.next=67,this.messageHandler.sendWithPromise("RefreshRange",{editAreaPtr:this.editAreaPtr,start:this.selectedCharRange.start,end:this.selectedCharRange.end});case 67:Q=we.sent,ve=Q.start,Se=Q.end,this.selectedCharRange={start:ve,end:Se},this.activeCharPlace.CharIndex===ve.CharIndex?this.activeCharPlace=ve:this.activeCharPlace=Se;case 72:this.state===2&&(this.updateSelectedRect(),this.updateCursorLine());case 73:case"end":return we.stop()}},N,this)})),function(N){return u.apply(this,arguments)})},{key:"setCharsFontStyle",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function N(D){return _regeneratorRuntime().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.messageHandler.sendWithPromise("SetCharsFontStyle",{editAreaPtr:this.editAreaPtr,start:this.selectedCharRange.start,end:this.selectedCharRange.end,fontStyle:D});case 2:case"end":return X.stop()}},N,this)})),function(N){return s.apply(this,arguments)})},{key:"hexToRgb",value:function(N){return N=(N=N.replace("#","")).length===3?N.repeat(2):N,{r:parseInt(N.substr(0,2),16),g:parseInt(N.substr(2,2),16),b:parseInt(N.substr(4,2),16)}}},{key:"getEntireArea",value:function(N,D){var X=null;if(N.start&&D.start){var U=this.getInitialPoint(N.start,N.end),Z=this.getInitialPoint(D.start,D.end);X={left:Math.min(U.start.x,Z.start.x),top:Math.min(U.start.y,Z.start.y),right:Math.max(U.end.x,Z.end.x),bottom:Math.max(U.end.y,Z.end.y)}}else N.left&&D.left&&(X={left:Math.min(N.left,D.left),top:Math.min(N.top,D.top),right:Math.max(N.left+N.width,D.left+D.width),bottom:Math.max(N.top+N.height,D.top+D.height)});return X}},{key:"goEditing",value:function(){this.state=2,this.contentContainer.selectedFrameIndex=this.editAreaIndex,this.frameContainer.classList.add("selected"),this.frameContainer.classList.add("editing"),this.activeCharPlace={SectionIndex:0,LineIndex:0,RunIndex:0,CharIndex:-1};var N=createSvg("svg",{class:"cursor-animation"},{position:"absolute",left:0,top:0,width:"100%",height:"100%"});this.cursor=N,this.textContainer.append(this.cursor),this.updateCursorLine(),this.textarea.focus(),this.textarea.addEventListener("blur",this.onBlur),this.textarea.addEventListener("keydown",this.onKeydown),this.textarea.addEventListener(this.textInput,this.onTextInput),this.isFirefox&&(this.textarea.addEventListener("compositionstart",this.onCompositionstart),this.textarea.addEventListener("compositionend",this.onCompositionend)),onClickOutsideUp([this.textContainer,this.outerLine,document.querySelector(".editor-panel"),document.getElementById("propertyPanelButton")],this.handleOutside.bind(this))}},{key:"remove",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function N(){return _regeneratorRuntime().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return this.frameContainer.remove(),D.next=3,this.messageHandler.send("RemoveEditAreaByIndex",{editPagePtr:this.editPagePtr,editAreaIndex:this.editAreaIndex});case 3:this.contentContainer.removeEditor(this.editAreaIndex);case 4:case"end":return D.stop()}},N,this)})),function(){return o.apply(this,arguments)})},{key:"copyArea",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function N(){var D;return _regeneratorRuntime().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.messageHandler.sendWithPromise("CopyArea",{editPagePtr:this.editPagePtr,editAreaPtr:this.editAreaPtr});case 2:return D=X.sent,X.next=5,this.messageHandler.sendWithPromise("GetCopyAreaContent",{editPagePtr:this.editPagePtr,editAreaInfoPtr:D});case 5:X.sent;case 6:case"end":return X.stop()}},N,this)})),function(){return r.apply(this,arguments)})},{key:"selectAllText",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function N(){var D,X,U;return _regeneratorRuntime().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,this.messageHandler.sendWithPromise("GetBeginAndEndCharPlace",this.editAreaPtr);case 2:if(D=Z.sent,X=D.start,U=D.end,this.selectedCharRange={start:X,end:U},this.state!==2){Z.next=10;break}return Z.next=9,this.getCharsRect(X,U);case 9:this.selectedRectList=Z.sent;case 10:case"end":return Z.stop()}},N,this)})),function(){return n.apply(this,arguments)})}]),e}(),ImageEditor=function(){function e(w){var x=w.eventBus,k=w.contentContainer,S=w.container,E=w.pagePtr,T=w.editPagePtr,M=w.editAreaPtr,I=w.editAreaIndex,F=w.viewport,O=w.scale,N=w.messageHandler,D=w.newAdd,X=w.pageViewer,U=w.$t;_classCallCheck(this,e),this.eventBus=x,this.contentContainer=k,this.container=S,this.pagePtr=E,this.editPagePtr=T,this.editAreaPtr=M,this.editAreaIndex=I,this.viewport=F,this.scale=O,this.messageHandler=N,this.newAdd=D,this.pageViewer=X,this.$t=U,this.deleteSvgStr=`<rect width="30" height="30" rx="2" fill="#DDE9FF"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M19 6.5V9.5H24V10.5H21.5V23.5H8.5V10.5H6V9.5H11V6.5H19ZM9.5 10.5V22.5H20.5V10.5H9.5ZM18 7.5V9.5H12V7.5H18ZM13.5 13V20H12.5V13H13.5ZM17.5 20V13H16.5V20H17.5Z" fill="#333333"/>
    `,this.frame=null,this.borderWidth=2,this.pointWidth=6,this.pointHeight=6,this.activeCharPlace=null,this.selectedRects=null,this.selectedCharRange=null,this.state=0,this.mouseDown=!1,this.moving=!1,this.ratio=window.devicePixelRatio||1,this.opacity=1,this.imageRatio=1,this.imageUrl=null,this.cropped=!1,this.removed=!1,this.start=null,this.end=null,this.newStart=null,this.newEnd=null,this.mousedown=isMobileDevice$1?"touchstart":"mousedown",this.mouseup=isMobileDevice$1?"touchend":"mouseup",this.mousemove=isMobileDevice$1?"touchmove":"mousemove",this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.onHandlePropertyPanelChanged=this.handlePropertyPanelChanged.bind(this),this.onDelete=this.handleDelete.bind(this),this.render()}var n,r,o,s,u,d,f,v,m,_,g,y;return _createClass(e,[{key:"render",value:(y=_asyncToGenerator(_regeneratorRuntime().mark(function w(){var x,k,S,E,T,M;return _regeneratorRuntime().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return this.eventBus._on("imagePropertyChanged",this.onHandlePropertyPanelChanged),I.next=3,this.updateCanvas();case 3:return I.next=5,this.messageHandler.sendWithPromise("GetImageTransparency",this.editAreaPtr);case 5:this.opacity=I.sent,k=createElement("div",{position:"absolute",left:this.rect.left+"px",top:this.rect.top+"px",width:this.rect.width+"px",height:this.rect.height+"px"},{class:"frame-container",index:this.editAreaIndex}),this.frameContainer=k,(x=this.container)===null||x===void 0||x.append(this.frameContainer),S=createElement("div",{position:"absolute",left:0,top:0,width:"100%",height:"100%",borderWidth:this.borderWidth+"px",borderColor:"#1460F3",cursor:"default"},{class:"image-container"}),this.imageContainer=S,this.frameContainer.append(this.imageContainer),this.imageContainer.addEventListener(this.mousedown,this.onMousedown),this.imageContainer.addEventListener(this.mouseup,this.onMouseup),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.outerLineContainer.style.position="absolute",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{position:"absolute",width:"30px",height:"30px",cursor:"pointer",zIndex:2}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,E=this.rect.left+this.rect.width-30+"px",T=this.rect.top+this.rect.height+8+"px",this.deletetButton.style.left=E,this.deletetButton.style.top=T,M=createSvg("svg",{class:"outerline"},{position:"absolute",left:this.rect.left-this.borderWidth+"px",top:this.rect.top-this.borderWidth+"px",width:this.rect.width+this.borderWidth+this.pointWidth/2+"px",height:this.rect.height+this.borderWidth+this.pointHeight/2+"px",zIndex:2}),this.outerLine=M,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#1460F3","stroke-width":this.borderWidth,"fill-opacity":0,width:this.rect.width-this.borderWidth,height:this.rect.height-this.borderWidth,x:this.pointWidth/2,y:this.pointHeight/2}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:0,y:0}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:0,y:(this.rect.height-this.pointHeight+this.borderWidth)/2}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:0,y:this.rect.height-this.pointHeight/2+this.borderWidth/2}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:(this.rect.width-this.pointWidth+this.borderWidth)/2,y:this.rect.height-this.pointHeight/2+this.borderWidth/2}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:this.rect.width-this.pointWidth/2+this.borderWidth/2,y:this.rect.height-this.pointHeight/2+this.borderWidth/2}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:this.rect.width-this.pointWidth/2+this.borderWidth/2,y:(this.rect.height-this.pointHeight+this.borderWidth)/2}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:this.rect.width-this.pointWidth/2+this.borderWidth/2,y:0}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:(this.rect.width-this.pointWidth+this.borderWidth)/2,y:0}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.outerLine.addEventListener(this.mousedown,this.onMousedown),this.outerLine.addEventListener(this.mouseup,this.onMouseup),this.newAdd&&this.goEditing();case 49:case"end":return I.stop()}},w,this)})),function(){return y.apply(this,arguments)})},{key:"getActualRect",value:function(w,x,k){var S=k.left,E=k.top,T=k.right,M=k.bottom;return{start:getActualPoint({x:S,y:E},w),end:getActualPoint({x:T,y:M},w)}}},{key:"rectCalc",value:function(w,x){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;return{top:(w.y<x.y?w.y:x.y)-k,left:(w.x<x.x?w.x:x.x)-k,width:Math.abs(x.x-w.x)+2*k,height:Math.abs(x.y-w.y)+2*k}}},{key:"getInitialPoint",value:function(w,x){var k,S,E,T,M=this.scale,I=w.x,F=w.y,O=x.x,N=x.y,D=this.viewport,X=D.width,U=D.height,Z=D.rotation;return Z===0?(k=I/M,S=F/M,E=O/M,T=N/M):Z===90?(k=F/M,S=I/M,E=N/M,T=O/M):Z===180?(k=(X-I)/M,S=F/M,E=(X-O)/M,T=N/M):(k=(U-F)/M,S=(X-I)/M,E=(U-N)/M,T=(X-O)/M),{start:{x:k,y:S},end:{x:E,y:T}}}},{key:"handleMouseDown",value:function(w){if(w.button!==2){if(this.state>0){var x=w.target.getAttribute("data-id"),k=getClickPoint(w),S=k.pageX,E=k.pageY;this.startState={operator:x,clickX:S,clickY:E},document.addEventListener(this.mousemove,this.onMousemove)}document.addEventListener(this.mouseup,this.onMouseup),this.selectedCharRange=null,this.mouseMoved=!1,this.mouseDown=!0}}},{key:"handleMouseUp",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function w(x){var k,S,E,T,M,I,F,O,N,D,X,U;return _regeneratorRuntime().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(!x||this.frameContainer.contains(x.target)||this.state!==0){Z.next=2;break}return Z.abrupt("return");case 2:if(this.contentContainer.selectedFrameIndex===-1||this.contentContainer.selectedFrameIndex===this.editAreaIndex||this.state!==0){Z.next=4;break}return Z.abrupt("return");case 4:if(this.mouseDown){Z.next=6;break}return Z.abrupt("return");case 6:if(this.mouseDown=!1,this.moving=!1,this.frameContainer.classList.add("selected"),x.type==="touchend"&&(document.body.style.overscrollBehavior="auto"),this.state!==0||this.imageUrl||this.updateOriginalImageUrl(),this.state===0||this.mouseMoved||this.eventBus.dispatch("contentPropertyChange",{type:"image",isOpen:!0,opacity:100*this.opacity}),this.state===0&&(this.state=1,this.contentContainer.selectedFrameIndex=this.editAreaIndex,this.container.append(this.outerLineContainer),this.eventBus.dispatch("changeRightPanelBtnDisabled",!1)),!this.mouseMoved){Z.next=26;break}return E={start:this.start,end:this.end},T={start:this.newStart,end:this.newEnd},console.log(E,T),M=getClickPoint(x),I=M.pageX,F=M.pageY,(I!==((k=this.startState)===null||k===void 0?void 0:k.clickX)||F!==((S=this.startState)===null||S===void 0?void 0:S.clickY))&&this.newStart&&this.newEnd&&(this.start=this.newStart,this.end=this.newEnd),O=this.getInitialPoint(this.start,this.end),N=O.start,D=O.end,X={left:N.x,top:N.y,right:D.x,bottom:D.y},U=this.cropped?"SetClipRect":"SetFrame",this.state===2&&(U="CutWithRect",this.cropped=!0),Z.next=25,this.messageHandler.sendWithPromise(U,{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr,rect:X});case 25:this.updateCanvas({oldPoint:E,newPoint:T});case 26:onClickOutsideUp([this.imageContainer,this.outerLine,this.deletetButton,document.querySelector(".editor-panel"),document.getElementById("propertyPanelButton")],this.handleOutside.bind(this)),document.removeEventListener(this.mousemove,this.onMousemove),document.removeEventListener(this.mouseup,this.onMouseup);case 29:case"end":return Z.stop()}},w,this)})),function(w){return g.apply(this,arguments)})},{key:"handleMouseMove",value:(_=_asyncToGenerator(_regeneratorRuntime().mark(function w(x){var k,S,E,T,M,I,F,O,N,D,X,U,Z,j,Q,ve,Se,we,oe,ne,q,H,Y,le,Ce,Te,ke,Ee,Pe,Be,$e,Oe,Ne,J;return _regeneratorRuntime().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(this.contentContainer.selectedFrameIndex===-1||this.contentContainer.selectedFrameIndex===this.editAreaIndex||this.state!==0){fe.next=2;break}return fe.abrupt("return");case 2:if(this.moving=!0,x.type==="touchmove"&&(document.body.style.overscrollBehavior="none"),k=getClickPoint(x),S=k.pageX,E=k.pageY,T=this.start,M=this.end,I=this.startState){fe.next=10;break}return fe.abrupt("return");case 10:if(I.clickX!==S||I.clickY!==E){fe.next=12;break}return fe.abrupt("return");case 12:if(F=this.viewport,O=F.width,N=F.height,I.operator!=="nw-resize"){fe.next=29;break}if(D=S-(I.clickX-T.x),X=E-(I.clickY-T.y),D=Math.min(M.x-2,D),D=Math.max(this.state===2?T.x:0,D),X=Math.min(M.y-2,X),X=Math.max(this.state===2?T.y:0,X),this.state!==1){fe.next=26;break}if(U=D-T.x,Z=U*this.imageRatio,!((X=T.y+Z)<0||D<0||X>=M.y)){fe.next=26;break}return fe.abrupt("return");case 26:this.updateOutline({start:{x:D,y:X},end:{x:M.x,y:M.y}}),fe.next=116;break;case 29:if(I.operator!=="w-resize"){fe.next=36;break}j=S-(I.clickX-T.x),j=Math.min(M.x-2,j),j=Math.max(this.state===2?T.x:7,j),this.updateOutline({start:{x:j,y:T.y},end:M}),fe.next=116;break;case 36:if(I.operator!=="sw-resize"){fe.next=52;break}if(Q=S-(I.clickX-T.x),ve=E-(I.clickY-M.y),Q=Math.min(M.x-2,Q),Q=Math.max(this.state===2?T.x:0,Q),ve=Math.min(this.state===2?M.y:N,ve),ve=Math.max(T.y+2,ve),this.state!==1){fe.next=49;break}if(Se=Q-T.x,we=Se*this.imageRatio,!((ve=M.y-we)>=N||Q<0||ve<=T.y)){fe.next=49;break}return fe.abrupt("return");case 49:this.updateOutline({start:{x:Q,y:T.y},end:{x:M.x,y:ve}}),fe.next=116;break;case 52:if(I.operator!=="s-resize"){fe.next=59;break}oe=E-(I.clickY-M.y),oe=Math.min(this.state===2?M.y:N,oe),oe=Math.max(T.y+2,oe),this.updateOutline({start:T,end:{x:M.x,y:oe}}),fe.next=116;break;case 59:if(I.operator!=="se-resize"){fe.next=75;break}if(ne=S-(I.clickX-M.x),q=E-(I.clickY-M.y),ne=Math.min(this.state===2?M.x:O,ne),ne=Math.max(T.x+2,ne),q=Math.min(this.state===2?M.y:N,q),q=Math.max(T.y+2,q),this.state!==1){fe.next=72;break}if(H=M.x-ne,Y=H*this.imageRatio,!((q=M.y-Y)>=N||ne>=O||q-T.y<=0)){fe.next=72;break}return fe.abrupt("return");case 72:this.updateOutline({start:{x:T.x,y:T.y},end:{x:ne,y:q}}),fe.next=116;break;case 75:if(I.operator!=="e-resize"){fe.next=82;break}le=S-(I.clickX-M.x),le=Math.min(this.state===2?M.x:O,le),le=Math.max(T.x+2,le),this.updateOutline({start:T,end:{x:le,y:M.y}}),fe.next=116;break;case 82:if(I.operator!=="ne-resize"){fe.next=98;break}if(Ce=S-(I.clickX-M.x),Te=E-(I.clickY-T.y),Ce=Math.min(this.state===2?M.x:O,Ce),Ce=Math.max(T.x+2,Ce),Te=Math.min(M.y-2,Te),Te=Math.max(this.state===2?T.y:0,Te),this.state!==1){fe.next=95;break}if(ke=M.x-Ce,Ee=ke*this.imageRatio,!((Te=T.y+Ee)<=0||Ce>=O||M.y-Te<=0)){fe.next=95;break}return fe.abrupt("return");case 95:this.updateOutline({start:{x:T.x,y:Te},end:{x:Ce,y:M.y}}),fe.next=116;break;case 98:if(I.operator!=="n-resize"){fe.next=105;break}Pe=E-(I.clickY-T.y),Pe=Math.min(M.y-2,Pe),Pe=Math.max(this.state===2?T.y:0,Pe),this.updateOutline({start:{x:T.x,y:Pe},end:M}),fe.next=116;break;case 105:if(I.operator!=="move"){fe.next=116;break}if(this.state!==2){fe.next=108;break}return fe.abrupt("return");case 108:Be=S-(I.clickX-T.x),$e=E-(I.clickY-T.y),Oe=S-(I.clickX-M.x),Ne=E-(I.clickY-M.y),J={width:Math.abs(T.x-M.x),height:Math.abs(T.y-M.y)},Be<Oe?(Be=Math.max(this.state===2?T.x:0,Be),Be=Math.min(this.state===2?M.x-J.width:O-J.width,Be),Oe=Math.max(this.state===2?T.x+J.width:J.width,Oe),Oe=Math.min(this.state===2?M.x:O,Oe)):(Oe=Math.max(this.state===2?T.x:0,Oe),Oe=Math.min(this.state===2?M.x-J.width:O-J.width,Oe),Be=Math.max(this.state===2?T.x+J.width:J.width,Be),Be=Math.min(this.state===2?M.x:O,Be)),$e<Ne?($e=Math.max(this.state===2?T.y:0,$e),$e=Math.min(this.state===2?M.y-J.height:N-J.height,$e),Ne=Math.max(this.state===2?T.y+J.height:J.height,Ne),Ne=Math.min(this.state===2?M.y:N,Ne)):(Ne=Math.max(this.state===2?T.y:0,Ne),Ne=Math.min(this.state===2?M.y-J.height:N-J.height,Ne),$e=Math.max(this.state===2?T.y+J.height:J.height,$e),$e=Math.min(this.state===2?M.y:N,$e)),this.updateOutline({start:{x:Be,y:$e},end:{x:Oe,y:Ne}});case 116:this.mouseMoved=!0;case 117:case"end":return fe.stop()}},w,this)})),function(w){return _.apply(this,arguments)})},{key:"handleOutside",value:(m=_asyncToGenerator(_regeneratorRuntime().mark(function w(){var x=this;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!this.moving){k.next=2;break}return k.abrupt("return");case 2:this.state=0,this.imageUrl=null,this.contentContainer.selectedFrameIndex=-1,this.moveRect.style.cursor="all-scroll",this.updateRectStyle(),this.updateOutline({start:this.start,end:this.end}),this.frameContainer.classList.remove("editing"),this.frameContainer.classList.remove("selected"),this.outerLineContainer.remove(),this.outerLineContainer.append(this.deletetButton),setTimeout(function(){document.querySelector(".frame-container.selected")||(x.eventBus.dispatch("contentPropertyChange",{type:"image",isOpen:!1}),x.eventBus.dispatch("changeRightPanelBtnDisabled",!0))},1);case 13:case"end":return k.stop()}},w,this)})),function(){return m.apply(this,arguments)})},{key:"getRect",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function w(){var x,k,S,E,T;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(this.cropped){M.next=4;break}return M.next=3,this.messageHandler.sendWithPromise("GetFrame",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr});case 3:x=M.sent;case 4:return M.next=6,this.messageHandler.sendWithPromise("GetClipRect",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr});case 6:this.frame=M.sent,!x||x.left===this.frame.left&&x.top===this.frame.top&&x.right===this.frame.right&&x.bottom===this.frame.bottom||(this.cropped=!0),k=this.getActualRect(this.viewport,this.scale,this.frame),S=k.start,E=k.end,this.start=S,this.end=E,T=this.rectCalc(S,E),this.rect=T,this.imageRatio=this.rect.height/this.rect.width;case 14:case"end":return M.stop()}},w,this)})),function(){return v.apply(this,arguments)})},{key:"updateCanvas",value:(f=_asyncToGenerator(_regeneratorRuntime().mark(function w(x,k){var S,E,T,M,I,F,O,N,D,X,U,Z,j,Q,ve,Se;return _regeneratorRuntime().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if(this.removed){we.next=3;break}return we.next=3,this.getRect();case 3:return this.frameContainer&&this.outerLineContainer&&(this.updateOutline({start:this.start,end:this.end}),setCss(this.frameContainer,{left:this.rect.left+"px",top:this.rect.top+"px",width:this.rect.width+"px",height:this.rect.height+"px"})),x?(S=x.oldPoint,E=x.newPoint,T=this.getEntireArea(S,E),M=this.getActualRect(this.viewport,this.scale,T),I=M.start,F=M.end,O=this.rectCalc(I,F),N=this.rectCalc(S.start,S.end),D=this.getEntireArea(N,this.rect),X={left:D.left,top:D.top,width:D.right-D.left,height:D.bottom-D.top},parseInt(O.left)===parseInt(D.left)&&parseInt(O.top)===parseInt(D.top)&&parseInt(O.width)===parseInt(D.width)&&parseInt(O.height)===parseInt(D.height)||(O=X),U={left:parseInt(O.left*this.ratio),top:parseInt(O.top*this.ratio),right:parseInt(O.left*this.ratio)+parseInt(O.width*this.ratio),bottom:parseInt(O.top*this.ratio)+parseInt(O.height*this.ratio),width:parseInt(O.width*this.ratio),height:parseInt(O.height*this.ratio)},this.imgRect=U):k?(Z=this.getEntireArea(k,this.rect),j={left:parseInt(Z.left*this.ratio),top:parseInt(Z.top*this.ratio),right:parseInt(Z.right*this.ratio),bottom:parseInt(Z.bottom*this.ratio),width:parseInt(Z.right*this.ratio)-parseInt(Z.left*this.ratio),height:parseInt(Z.bottom*this.ratio)-parseInt(Z.top*this.ratio)},this.imgRect=j):(Q={left:parseInt(this.rect.left*this.ratio),top:parseInt(this.rect.top*this.ratio),right:parseInt(this.rect.left*this.ratio)+parseInt(this.rect.width*this.ratio),bottom:parseInt(this.rect.top*this.ratio)+parseInt(this.rect.height*this.ratio),width:parseInt(this.rect.width*this.ratio),height:parseInt(this.rect.height*this.ratio)},this.imgRect=Q),we.next=7,this.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:this.pagePtr,scale:this.scale*this.ratio,left:this.imgRect.left,right:this.imgRect.right,bottom:this.imgRect.bottom,top:this.imgRect.top});case 7:ve=we.sent,Se=ve.imageArray,this.imageArray=Se,this.drawCanvas(),this.saveEdit();case 12:case"end":return we.stop()}},w,this)})),function(w,x){return f.apply(this,arguments)})},{key:"drawCanvas",value:function(){if(this.imgRect){if(this.pageViewer.canvas){var w=this.pageViewer.canvas.getContext("2d"),x=w.createImageData(parseInt(this.imgRect.width),parseInt(this.imgRect.height));x.data.set(this.imageArray),w.putImageData(x,this.imgRect.left,this.imgRect.top)}}else this.updateCanvas()}},{key:"saveEdit",value:(d=_asyncToGenerator(_regeneratorRuntime().mark(function w(){return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.messageHandler.sendWithPromise("EndEdit",this.editPagePtr);case 2:case"end":return x.stop()}},w,this)})),function(){return d.apply(this,arguments)})},{key:"updateOutline",value:function(w){var x=w.start,k=w.end,S=this.rectCalc(x,k);this.newStart=x,this.newEnd=k,setCss(this.outerLine,{left:S.left-this.borderWidth+"px",top:S.top-this.borderWidth+"px",width:S.width+this.borderWidth+this.pointWidth/2+"px",height:S.height+this.borderWidth+this.pointHeight/2+"px"});var E=S.left+S.width-30+"px",T=S.top+S.height+8+"px";if(this.deletetButton.style.left=E,this.deletetButton.style.top=T,this.moveRect.setAttribute("width",S.width-this.borderWidth),this.moveRect.setAttribute("height",S.height-this.borderWidth),this.LeftRect.setAttribute("y",(S.height-this.pointHeight+this.borderWidth)/2),this.bottomRect.setAttribute("x",(S.width-this.pointWidth+this.borderWidth)/2),this.bottomRect.setAttribute("y",S.height-this.pointHeight/2+this.borderWidth/2),this.rightRect.setAttribute("x",S.width-this.pointWidth/2+this.borderWidth/2),this.rightRect.setAttribute("y",(S.height-this.pointHeight+this.borderWidth)/2),this.topRect.setAttribute("x",(S.width-this.pointWidth+this.borderWidth)/2),this.state===2){var M=15;this.LeftRect.setAttribute("y",(S.height-M+this.borderWidth)/2),this.topRect.setAttribute("x",(S.width-M+this.borderWidth)/2),this.rightRect.setAttribute("y",(S.height-M+this.borderWidth)/2),this.bottomRect.setAttribute("x",(S.width-M+this.borderWidth)/2),this.topRightRect.setAttribute("d","M".concat(S.width+this.borderWidth/2-M+this.pointWidth/2,",").concat(this.pointWidth/2," H").concat(S.width+this.borderWidth/2," V").concat(M)),this.bottomLeftRect.setAttribute("d","M".concat(this.pointWidth/2,",").concat(S.height+this.borderWidth/2-M+this.pointWidth/2," V").concat(S.height+this.borderWidth/2," H").concat(M)),this.bottomRightRect.setAttribute("d","M".concat(S.width+this.borderWidth/2,",").concat(S.height+this.borderWidth/2-M+this.pointWidth/2," V").concat(S.height+this.borderWidth/2," H").concat(S.width+this.borderWidth/2-M+this.pointWidth/2));var I=S.left-this.rect.left,F=S.top-this.rect.top,O=this.rect.left+this.rect.width-S.left-S.width,N=this.rect.top+this.rect.height-S.top-S.height;switch(this.startState.operator){case"sw-resize":this.frameContainer.style["box-shadow"]="inset ".concat(I,"px ").concat(-N,"px rgba(0, 0, 0, 0.5)");break;case"ne-resize":this.frameContainer.style["box-shadow"]="inset ".concat(-O,"px ").concat(F,"px rgba(0, 0, 0, 0.5)");break;case"nw-resize":case"n-resize":case"w-resize":this.frameContainer.style["box-shadow"]="inset ".concat(I,"px ").concat(F,"px rgba(0, 0, 0, 0.5)");break;case"se-resize":case"s-resize":case"e-resize":this.frameContainer.style["box-shadow"]="inset ".concat(-O,"px ").concat(-N,"px rgba(0, 0, 0, 0.5)")}}else this.bottomLeftRect.setAttribute("y",S.height-this.pointHeight/2+this.borderWidth/2),this.bottomRightRect.setAttribute("x",S.width-this.pointWidth/2+this.borderWidth/2),this.bottomRightRect.setAttribute("y",S.height-this.pointHeight/2+this.borderWidth/2),this.topRightRect.setAttribute("x",S.width-this.pointWidth/2+this.borderWidth/2)}},{key:"setProperty",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function w(x){var k,S;return _regeneratorRuntime().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:E.t0=_regeneratorRuntime().keys(x);case 1:if((E.t1=E.t0()).done){E.next=25;break}if((k=E.t1.value)!=="alignType"){E.next=11;break}if(this.selectedCharRange){E.next=9;break}return E.next=7,this.messageHandler.sendWithPromise("SetTextAligningSection",{editAreaPtr:this.editAreaPtr,alignType:x.alignType,char:activeCharPlace={SectionIndex:0,LineIndex:0,RunIndex:0,CharIndex:-1}});case 7:E.next=11;break;case 9:return E.next=11,this.messageHandler.sendWithPromise("SetTextAligningRange",{editAreaPtr:this.editAreaPtr,alignType:x.alignType,start:this.selectedCharRange.start,end:this.selectedCharRange.end});case 11:if(this.selectedCharRange||k==="alignType"){E.next=14;break}return E.next=14,this.selectAllText();case 14:if(k!=="opacity"){E.next=17;break}return E.next=17,this.messageHandler.sendWithPromise("SetCharsFontTransparency",{editAreaPtr:this.editAreaPtr,start:this.selectedCharRange.start,end:this.selectedCharRange.end,opacity:x.opacity/100});case 17:if(k!=="fontSize"){E.next=20;break}return E.next=20,this.messageHandler.sendWithPromise("SetCharsFontSize",{editAreaPtr:this.editAreaPtr,start:this.selectedCharRange.start,end:this.selectedCharRange.end,fontSize:x.fontSize});case 20:if(k!=="fontFamily"){E.next=23;break}return E.next=23,this.messageHandler.sendWithPromise("SetFontFromNativeTrueTypeFont",{editAreaPtr:this.editAreaPtr,start:this.selectedCharRange.start,end:this.selectedCharRange.end,fontFamily:x.fontFamily});case 23:E.next=1;break;case 25:return S=this.rect,E.next=28,this.updateCanvas(null,S);case 28:case"end":return E.stop()}},w,this)})),function(w){return u.apply(this,arguments)})},{key:"handlePropertyPanelChanged",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function w(x){var k,S,E=this;return _regeneratorRuntime().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(this.state!==0){T.next=2;break}return T.abrupt("return");case 2:T.t0=_regeneratorRuntime().keys(x);case 3:if((T.t1=T.t0()).done){T.next=38;break}if((k=T.t1.value)!=="rotate"){T.next=8;break}return T.next=8,this.messageHandler.sendWithPromise("RotateImage",{editAreaPtr:this.editAreaPtr,angle:x[k]});case 8:if(k!=="flip"){T.next=17;break}if(x[k]!=="x"){T.next=14;break}return T.next=12,this.messageHandler.sendWithPromise("HorizontalMirrorImage",this.editAreaPtr);case 12:T.next=17;break;case 14:if(x[k]!=="y"){T.next=17;break}return T.next=17,this.messageHandler.sendWithPromise("VerticalMirrorImage",this.editAreaPtr);case 17:if(k!=="opacity"||this.opacity===x.opacity/100){T.next=21;break}return T.next=20,this.messageHandler.sendWithPromise("SetImageTransparency",{editAreaPtr:this.editAreaPtr,opacity:x.opacity/100});case 20:this.opacity=x.opacity/100;case 21:if(k!=="tool"||x.tool!=="replace"){T.next=24;break}return T.next=24,this.uploadFile().then(function(){var M=_asyncToGenerator(_regeneratorRuntime().mark(function I(F){var O,N,D,X,U,Z,j,Q,ve,Se,we,oe;return _regeneratorRuntime().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return O=F.imageBase64,N=F.width,D=F.height,X={top:E.frame.top,left:E.frame.left,width:E.frame.right-E.frame.left,height:E.frame.bottom-E.frame.top},(U=N/D)>X.width/X.height?(Z=X.width,j=X.width/U):(Z=X.height*U,j=X.height),Q=(oe={x:X.left+X.width/2,y:X.top+X.height/2}).x-Z/2,ve=oe.x+Z/2,Se=oe.y+j/2,we=oe.y-j/2,ne.next=12,E.messageHandler.sendWithPromise("ReplaceImageAreaByStream",{pagePtr:E.pagePtr,editPagePtr:E.editPagePtr,editAreaPtr:E.editAreaPtr,rect:{left:Q,right:ve,bottom:Se,top:we},imageBase64:O});case 12:E.editAreaPtr=ne.sent,E.saveEdit();case 14:case"end":return ne.stop()}},I)}));return function(I){return M.apply(this,arguments)}}()).catch(function(M){console.error(M)});case 24:if(k!=="tool"||x.tool!=="export"){T.next=27;break}return this.exportImage(this.imageUrl),T.abrupt("return");case 27:if(k!=="tool"||x.tool!=="crop"){T.next=36;break}if(this.state!==2){T.next=30;break}return T.abrupt("return");case 30:return this.state=2,this.frameContainer.classList.add("editing"),this.deletetButton.remove(),this.moveRect.style.cursor="auto",this.updateRectStyle(),T.abrupt("return");case 36:T.next=3;break;case 38:return S=this.rect,T.next=41,this.updateCanvas(null,S);case 41:case"end":return T.stop()}},w,this)})),function(w){return s.apply(this,arguments)})},{key:"getEntireArea",value:function(w,x){var k=null;if(w.start&&x.start){var S=this.getInitialPoint(w.start,w.end),E=this.getInitialPoint(x.start,x.end);k={left:Math.min(S.start.x,E.start.x),top:Math.min(S.start.y,E.start.y),right:Math.max(S.end.x,E.end.x),bottom:Math.max(S.end.y,E.end.y)}}else w.left&&x.left&&(k={left:Math.min(w.left,x.left),top:Math.min(w.top,x.top),right:Math.max(w.left+w.width,x.left+x.width),bottom:Math.max(w.top+w.height,x.top+x.height)});return k}},{key:"goEditing",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function w(){return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:this.state=1,this.contentContainer.selectedFrameIndex=this.editAreaIndex,this.frameContainer.classList.add("selected"),this.container.append(this.outerLineContainer),this.imageUrl||this.updateOriginalImageUrl(),onClickOutsideUp([this.imageContainer,this.outerLine,this.deletetButton,document.querySelector(".editor-panel"),document.getElementById("propertyPanelButton")],this.handleOutside.bind(this));case 6:case"end":return x.stop()}},w,this)})),function(){return o.apply(this,arguments)})},{key:"handleDelete",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function w(){return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return this.removed=!0,this.outerLineContainer.remove(),this.frameContainer.remove(),this.contentContainer.selectedFrameIndex=-1,x.next=6,this.messageHandler.send("RemoveEditArea",{editPagePtr:this.editPagePtr,editAreaPtr:this.editAreaPtr});case 6:this.contentContainer.removeEditor(this.editAreaIndex),this.updateCanvas(),this.eventBus.dispatch("contentPropertyChange",{type:"image",isOpen:!1});case 9:case"end":return x.stop()}},w,this)})),function(){return r.apply(this,arguments)})},{key:"uploadFile",value:function(){var w=this;return new Promise(function(x,k){var S=document.createElement("input");S.type="file",S.accept=".jpg, .jpeg, .png",S.onchange=function(){var E=S.files[0];if(E.size>2097152)return k(w.$t("editorPanel.maximum")),S.remove(),void window.$message.error(w.$t("editorPanel.maximum"),{duration:3e3});if(E){var T=new FileReader;T.onload=function(M){var I=new Image;I.onload=function(){x({imageBase64:M.target.result,width:I.width,height:I.height})},I.onerror=function(F){k(F)},I.src=M.target.result},T.onerror=function(M){k(M)},T.readAsDataURL(E),S.remove()}},S.click()})}},{key:"updateOriginalImageUrl",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function w(){var x,k,S,E,T,M;return _regeneratorRuntime().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,this.messageHandler.sendWithPromise("GetImageAreaSize",this.editAreaPtr);case 2:return x=I.sent,k=x.width,S=x.height,E=x.stride,I.next=8,this.messageHandler.sendWithPromise("ExtractOriginalImage",{editAreaPtr:this.editAreaPtr,width:k,height:S,stride:E});case 8:T=I.sent,M=T.imageArray,this.imageUrl=this.imageArrayToUrl(M,k,S),this.eventBus.dispatch("contentPropertyChange",{type:"image",imageUrl:this.imageUrl});case 12:case"end":return I.stop()}},w,this)})),function(){return n.apply(this,arguments)})},{key:"updateRectStyle",value:function(){if(this.topLeftRect.remove(),this.topRightRect.remove(),this.bottomLeftRect.remove(),this.bottomRightRect.remove(),this.state===2){var w=15;this.LeftRect.setAttribute("height",w),this.LeftRect.setAttribute("y",(this.rect.height-w+this.borderWidth)/2),this.LeftRect.style.cursor="e-resize",this.topRect.setAttribute("width",w),this.topRect.setAttribute("x",(this.rect.width-w+this.borderWidth)/2),this.topRect.style.cursor="s-resize",this.rightRect.setAttribute("height",w),this.rightRect.setAttribute("y",(this.rect.height-w+this.borderWidth)/2),this.rightRect.style.cursor="w-resize",this.bottomRect.setAttribute("width",w),this.bottomRect.setAttribute("x",(this.rect.width-w+this.borderWidth)/2),this.bottomRect.style.cursor="n-resize",this.topLeftRect=createSvg("path",{class:"nw-resize","data-id":"nw-resize",fill:"none",stroke:"#1460F3","stroke-width":this.pointWidth,d:"M".concat(w,",").concat(this.pointWidth/2," H").concat(this.pointWidth/2," V").concat(w)},{cursor:"se-resize"}),this.topRightRect=createSvg("path",{class:"ne-resize","data-id":"ne-resize",fill:"none",stroke:"#1460F3","stroke-width":this.pointWidth,d:"M".concat(this.rect.width+this.borderWidth/2-w+this.pointWidth/2,",").concat(this.pointWidth/2," H").concat(this.rect.width+this.borderWidth/2," V").concat(w)},{cursor:"sw-resize"}),this.bottomLeftRect=createSvg("path",{class:"sw-resize","data-id":"sw-resize",fill:"none",stroke:"#1460F3","stroke-width":this.pointWidth,d:"M".concat(this.pointWidth/2,",").concat(this.rect.height+this.borderWidth/2-w+this.pointWidth/2," V").concat(this.rect.height+this.borderWidth/2," H").concat(w)},{cursor:"ne-resize"}),this.bottomRightRect=createSvg("path",{class:"se-resize","data-id":"se-resize",fill:"none",stroke:"#1460F3","stroke-width":this.pointWidth,d:"M".concat(this.rect.width+this.borderWidth/2,",").concat(this.rect.height+this.borderWidth/2-w+this.pointWidth/2," V").concat(this.rect.height+this.borderWidth/2," H").concat(this.rect.width+this.borderWidth/2-w+this.pointWidth/2)},{cursor:"nw-resize"})}else this.LeftRect.setAttribute("height",this.pointHeight),this.LeftRect.style.cursor="w-resize",this.topRect.setAttribute("width",this.pointWidth),this.topRect.style.cursor="n-resize",this.rightRect.setAttribute("height",this.pointHeight),this.rightRect.style.cursor="e-resize",this.bottomRect.setAttribute("width",this.pointWidth),this.bottomRect.style.cursor="s-resize",this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:0,y:0}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:this.rect.width-this.pointWidth/2+this.borderWidth/2,y:0}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:0,y:this.rect.height-this.pointHeight/2+this.borderWidth/2}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:this.rect.width-this.pointWidth/2+this.borderWidth/2,y:this.rect.height-this.pointHeight/2+this.borderWidth/2});this.outerLine.append(this.topLeftRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRightRect)}},{key:"imageArrayToUrl",value:function(w,x,k){var S=document.createElement("canvas"),E=S.getContext("2d");S.width=x,S.height=k;var T=E.createImageData(x,k),M=new Uint8ClampedArray(w.buffer);T.data.set(M),E.putImageData(T,0,0);var I=S.toDataURL("image/png",1);return S.remove(),S=null,I}},{key:"exportImage",value:function(w,x){var k=document.createElement("a");k.href=w,k.download=x||"image",document.body.appendChild(k),k.click(),document.body.removeChild(k)}}]),e}(),AddText=function(){function e(n){var r=n.tool,o=n.color,s=n.container,u=n.viewport,d=n.page,f=n.eventBus,v=n.contentContainer;_classCallCheck(this,e),this._tool=r,this.color=o,this.container=s,this.viewport=u,this.page=d,this.eventBus=f,this.contentContainer=v,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.init()}return _createClass(e,[{key:"init",value:function(){this.container.addEventListener("mousedown",this.onMousedown),this.container.addEventListener("touchstart",this.onMousedown),this.container.style.cursor="crosshair",this.container.style.touchAction="none",document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"tool",get:function(){return this._tool},set:function(n){n!==this._tool&&(n||(this.reset(),this.container.style.cursor="default",this.container.style.touchAction="",this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown)),this._tool=n)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown)}},{key:"handleMouseDown",value:function(n){if((n.target.className||n.target.className.includes("contentContainer"))&&this.contentContainer.selectedFrameIndex===-1){var r=getAbsoluteCoordinate(this.container,n),o=r.x,s=r.y;this.initStartPoint={x:o,y:s},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var n=this.initStartPoint,r=this.initEndPoint;if(r&&n.x!==r.x&&n.y!==r.y){var o=getInitialPoint(n,this.viewport,this.viewport.scale),s=getInitialPoint(r,this.viewport,this.viewport.scale),u={x:Math.min(o.x,s.x),y:Math.min(o.y,s.y)},d={x:Math.max(o.x,s.x),y:Math.max(o.y,s.y)},f={rect:{left:u.x,top:u.y,right:d.x,bottom:u.y+16},fontData:{fontName:"Helvetica",fontSize:14,r:0,g:0,b:0,opacity:1,isBold:0,italic:0},alignType:2};this.contentContainer.addTextEditor(f)}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(n){var r=getAbsoluteCoordinate(this.container,n),o=r.x,s=r.y,u=this.viewport,d=u.width,f=u.height;if(this.viewport.scale,o=Math.min(d,o),o=Math.max(0,o),s=Math.min(f,s),s=Math.max(0,s),this.initEndPoint={x:o,y:s},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(n.shiftKey){var v=this.initStartPoint,m=this.initEndPoint,_=Math.abs(m.x-v.x),g=Math.abs(m.y-v.y),y=Math.min(_,g);v.x<m.x?m.x=v.x+y:m.x=v.x-y,v.y<m.y?m.y=v.y+y:m.y=v.y-y}var w=this.calculate(this.initStartPoint,this.initEndPoint),x=this.shapeEle;x.style.top="".concat(w.top,"px"),x.style.left="".concat(w.left,"px"),x.style.width="".concat(Math.abs(w.width-1),"px"),x.style.height="".concat(Math.abs(w.height-1),"px")}else{var k=createElement("div",{backgroundColor:"#DDE9FF",position:"absolute","z-index":3},{class:"add-text"});this.shapeEle=k,this.container.append(this.shapeEle)}}},{key:"rectCalc",value:function(n){var r=n.start,o=n.end;return{top:r.y<o.y?r.y:o.y,left:r.x<o.x?r.x:o.x,width:Math.abs(o.x-r.x),height:Math.abs(o.y-r.y)}}},{key:"calculate",value:function(n,r){var o=this.rectCalc({start:n,end:r}),s=1*this.viewport.scale;return{top:o.top-s,left:o.left-s,width:o.width+2*s,height:o.height+2*s}}}]),e}(),AddImage=function(){function e(n){var r=n.tool,o=n.color,s=n.container,u=n.viewport,d=n.page,f=n.eventBus,v=n.contentContainer,m=n.$t;_classCallCheck(this,e),this._tool=r,this.color=o,this.container=s,this.viewport=u,this.page=d,this.eventBus=f,this.contentContainer=v,this.$t=m,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.init()}return _createClass(e,[{key:"init",value:function(){this.container.addEventListener("mousedown",this.onMousedown),this.container.addEventListener("touchstart",this.onMousedown),this.container.style.cursor="crosshair",this.container.style.touchAction="none",document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"tool",get:function(){return this._tool},set:function(n){n!==this._tool&&(n||(this.reset(),this.container.style.cursor="default",this.container.style.touchAction="",this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown)),this._tool=n)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown)}},{key:"handleMouseDown",value:function(n){if(this.contentContainer.selectedFrameIndex===-1&&(n.target.className||n.target.className.includes("contentContainer"))&&!n.target.className.includes("image-container")){var r=getAbsoluteCoordinate(this.container,n),o=r.x,s=r.y;this.initStartPoint={x:o,y:s},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var n=this,r=this.initStartPoint,o=this.initEndPoint;if(o&&r.x!==o.x&&r.y!==o.y){var s=getInitialPoint(r,this.viewport,this.viewport.scale),u=getInitialPoint(o,this.viewport,this.viewport.scale),d={x:Math.min(s.x,u.x),y:Math.min(s.y,u.y)},f={x:Math.max(s.x,u.x),y:Math.max(s.y,u.y)},v={left:d.x,top:d.y,right:f.x,bottom:f.y,width:f.x-d.x,height:f.y-d.y};this.uploadFile().then(function(x){var k,S,E=x.imageBase64,T=x.width/x.height;T>v.width/v.height?(k=v.width,S=v.width/T):(k=v.height*T,S=v.height);var M=v.left+v.width/2,I=v.top+v.height/2,F={left:M-k/2,top:I-S/2,right:M+k/2,bottom:I+S/2};n.contentContainer.addImageEditor({rect:F,imageBase64:E})}).catch(function(x){console.error(x)})}else{var m=getInitialPoint(r,this.viewport,this.viewport.scale),_=this.viewport.viewBox[2],g=this.viewport.viewBox[3],y=_/2,w=g/2;this.uploadFile().then(function(x){var k=x.imageBase64,S=x.width,E=x.height,T=S,M=E;if(S>y||E>w){var I=S/E;I>y/w?(T=y,M=y/I):(T=w*I,M=w)}var F={left:m.x-T/2,top:m.y-M/2,right:m.x+T/2,bottom:m.y+M/2};if(F.left<7){var O=7-F.left;F.left+=O,F.right+=O}if(F.top<7){var N=7-F.top;F.top+=N,F.bottom+=N}if(F.right>_){var D=F.right-_+7;F.right-=D,F.left-=D}if(F.bottom>g){var X=F.bottom-g+7;F.bottom-=X,F.top-=X}n.contentContainer.addImageEditor({rect:F,imageBase64:k})}).catch(function(x){console.error(x)})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(n){var r=getAbsoluteCoordinate(this.container,n),o=r.x,s=r.y,u=this.viewport,d=u.width,f=u.height;if(this.viewport.scale,o=Math.min(d,o),o=Math.max(0,o),s=Math.min(f,s),s=Math.max(0,s),this.initEndPoint={x:o,y:s},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(n.shiftKey){var v=this.initStartPoint,m=this.initEndPoint,_=Math.abs(m.x-v.x),g=Math.abs(m.y-v.y),y=Math.min(_,g);v.x<m.x?m.x=v.x+y:m.x=v.x-y,v.y<m.y?m.y=v.y+y:m.y=v.y-y}var w=this.calculate(this.initStartPoint,this.initEndPoint),x=this.shapeEle;x.style.top="".concat(w.top,"px"),x.style.left="".concat(w.left,"px"),x.style.width="".concat(Math.abs(w.width-1),"px"),x.style.height="".concat(Math.abs(w.height-1),"px")}else{var k=createElement("div",{backgroundColor:"#DDE9FF",position:"absolute","z-index":3},{class:"add-text"});this.shapeEle=k,this.container.append(this.shapeEle)}}},{key:"rectCalc",value:function(n){var r=n.start,o=n.end;return{top:r.y<o.y?r.y:o.y,left:r.x<o.x?r.x:o.x,width:Math.abs(o.x-r.x),height:Math.abs(o.y-r.y)}}},{key:"calculate",value:function(n,r){var o=this.rectCalc({start:n,end:r}),s=1*this.viewport.scale;return{top:o.top-s,left:o.left-s,width:o.width+2*s,height:o.height+2*s}}},{key:"uploadFile",value:function(){var n=this;return new Promise(function(r,o){var s=document.createElement("input");s.type="file",s.accept=".jpg, .jpeg, .png",s.onchange=function(){var u=s.files[0];if(u.size>2097152)return o(n.$t("editorPanel.maximum")),s.remove(),void window.$message.error(n.$t("editorPanel.maximum"),{duration:3e3});if(u){var d=new FileReader;d.onload=function(f){var v=new Image;v.onload=function(){r({imageBase64:f.target.result,width:v.width,height:v.height})},v.onerror=function(m){o(m)},v.src=f.target.result},d.onerror=function(f){o(f)},d.readAsDataURL(u),s.remove()}},s.click()})}}]),e}(),ContentContainer=function(){function e(u){_classCallCheck(this,e),this.pageViewer=u.pageViewer,this.eventBus=u.eventBus,this.pageIndex=u.pageIndex,this.pagePtr=u.pagePtr,this.messageHandler=u.messageHandler,this.pageDiv=u.pageDiv,this.viewport=u.viewport,this.scale=u.scale,this.$t=u.$t,this._cancelled=!1,this.destroyed=!1,this.rendered=!1,this.frameEditorList=[],this.tool=this.pageViewer.tool||"",this.color=this.pageViewer.color||"",this._selectedFrameIndex=-1,this.onHandleTool=this.handleTool.bind(this)}var n,r,o,s;return _createClass(e,[{key:"init",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function u(){var d,f;return _regeneratorRuntime().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.messageHandler.sendWithPromise("InitEditPage",{pagePtr:this.pagePtr});case 2:return d=v.sent,f=d.editPagePtr,this.editPagePtr=f,v.next=7,this.messageHandler.sendWithPromise("SetFontCallBackForEditPage",{editPagePtr:this.editPagePtr,fontFile:this.pageViewer.fontFile,fontName:"DroidSansFallbackFull"});case 7:case"end":return v.stop()}},u,this)})),function(){return s.apply(this,arguments)})},{key:"render",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function u(){var d,f,v,m,_,g;return _regeneratorRuntime().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!this._cancelled&&!this.contentContainer){y.next=2;break}return y.abrupt("return");case 2:return(d=document.createElement("div")).className="contentContainer",this.contentContainer=d,this.pageDiv.append(this.contentContainer),y.next=8,this.init();case 8:return this.eventBus._on("toolChanged",this.onHandleTool),y.next=11,this.messageHandler.sendWithPromise("BeginEdit",{editPagePtr:this.editPagePtr,type:3});case 11:return y.next=13,this.messageHandler.sendWithPromise("GetEditAreaCount",this.editPagePtr);case 13:f=y.sent,v=0;case 15:if(!(v<f)){y.next=35;break}return y.next=18,this.messageHandler.sendWithPromise("GetEditArea",{editPagePtr:this.editPagePtr,index:v});case 18:if(m=y.sent){y.next=21;break}return y.abrupt("continue",32);case 21:return y.next=23,this.messageHandler.sendWithPromise("IsTextArea",m);case 23:if(!y.sent){y.next=28;break}return _=new TextEditor({eventBus:this.eventBus,contentContainer:this,container:this.contentContainer,pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,editAreaPtr:m,editAreaIndex:v,viewport:this.viewport,scale:this.scale,messageHandler:this.messageHandler,pageViewer:this.pageViewer}),this.frameEditorList.push(_),y.abrupt("continue",32);case 28:return y.next=30,this.messageHandler.sendWithPromise("IsImageArea",m);case 30:y.sent&&(g=new ImageEditor({eventBus:this.eventBus,contentContainer:this,container:this.contentContainer,pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,editAreaPtr:m,editAreaIndex:v,viewport:this.viewport,scale:this.scale,messageHandler:this.messageHandler,pageViewer:this.pageViewer,$t:this.$t}),this.frameEditorList.push(g));case 32:v++,y.next=15;break;case 35:this.tool==="addText"&&this.addTextManager(),this.tool==="addImage"&&this.addImageManager(),this.destroyed=!1,this.rendered=!0;case 39:case"end":return y.stop()}},u,this)})),function(){return o.apply(this,arguments)})},{key:"show",value:function(){this.contentContainer.style.display="block"}},{key:"hide",value:function(){this.contentContainer.style.display="none",this.textManager&&(this.textManager.tool="",this.textManager.reset()),this.imageManager&&(this.imageManager.tool="",this.imageManager.reset())}},{key:"cancel",value:function(){this._cancelled=!0,this.destroy()}},{key:"destroy",value:function(){var u;!this.destroyed&&this.rendered&&((u=this.contentContainer)===null||u===void 0||u.remove(),this.contentContainer=null,this.textManager&&(this.textManager.tool="",this.textManager.reset()),this.imageManager&&(this.imageManager.tool="",this.imageManager.reset()),this.destroyed=!0,this.eventBus._off("toolChanged",this.onHandleTool),this.messageHandler.sendWithPromise("ClearEditPage",this.editPagePtr))}},{key:"handleTool",value:function(u){var d=u.tool,f=u.color;this.tool=d,this.color=f,this.textManager&&(this.textManager.tool=d,this.textManager.color=f),this.imageManager&&(this.imageManager.tool=d,this.imageManager.color=f),d==="addText"&&(this.imageManager&&(this.imageManager.tool="",this.imageManager.reset()),this.addTextManager()),d==="addImage"&&(this.textManager&&(this.textManager.tool="",this.textManager.reset()),this.addImageManager())}},{key:"addTextManager",value:function(){this.textManager?this.textManager.init():this.textManager=new AddText({tool:this.tool,color:this.color,container:this.pageDiv,viewport:this.viewport,scale:this.scale,page:this.page,eventBus:this.eventBus,contentContainer:this})}},{key:"addImageManager",value:function(){this.imageManager?this.imageManager.init():this.imageManager=new AddImage({tool:this.tool,color:this.color,container:this.pageDiv,viewport:this.viewport,scale:this.scale,page:this.page,eventBus:this.eventBus,contentContainer:this,$t:this.$t})}},{key:"addTextEditor",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function u(d){var f,v,m,_,g;return _regeneratorRuntime().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return f=d.rect,v=d.fontData,m=d.alignType,y.next=3,this.messageHandler.sendWithPromise("CreateNewTextArea",{pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,rect:f,fontData:v,alignType:m});case 3:if(_=y.sent){y.next=6;break}return y.abrupt("return");case 6:g=new TextEditor({eventBus:this.eventBus,contentContainer:this,container:this.contentContainer,pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,editAreaPtr:_,editAreaIndex:this.frameEditorList.length,viewport:this.viewport,scale:this.scale,messageHandler:this.messageHandler,newAdd:!0,pageViewer:this.pageViewer}),this.frameEditorList.push(g);case 8:case"end":return y.stop()}},u,this)})),function(u){return r.apply(this,arguments)})},{key:"addImageEditor",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function u(d){var f,v,m,_;return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return f=d.rect,v=d.imageBase64,g.next=3,this.messageHandler.sendWithPromise("CreateNewImageAreaByStream",{pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,rect:f,imageBase64:v});case 3:if(m=g.sent){g.next=6;break}return g.abrupt("return");case 6:_=new ImageEditor({eventBus:this.eventBus,contentContainer:this,container:this.contentContainer,pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,editAreaPtr:m,editAreaIndex:this.frameEditorList.length,viewport:this.viewport,scale:this.scale,messageHandler:this.messageHandler,newAdd:!0,pageViewer:this.pageViewer,$t:this.$t}),this.frameEditorList.push(_);case 8:case"end":return g.stop()}},u,this)})),function(u){return n.apply(this,arguments)})},{key:"selectedFrameIndex",get:function(){return this._selectedFrameIndex},set:function(u){this._selectedFrameIndex=u}},{key:"removeEditor",value:function(u){this.frameEditorList.splice(u,1)}}]),e}(),_TextSelection_pagePtr,_TextSelection_textPtr;function __awaiter(e,n,r,o){return new(r||(r=Promise))(function(s,u){function d(m){try{v(o.next(m))}catch(_){u(_)}}function f(m){try{v(o.throw(m))}catch(_){u(_)}}function v(m){var _;m.done?s(m.value):(_=m.value,_ instanceof r?_:new r(function(g){g(_)})).then(d,f)}v((o=o.apply(e,n||[])).next())})}function __classPrivateFieldGet(e,n,r,o){if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!o:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?o:r==="a"?o.call(e):o?o.value:n.get(e)}function __classPrivateFieldSet(e,n,r,o,s){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?e!==n||!s:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?s.call(e,r):s?s.value=r:n.set(e,r),r}var markupType=["highlight","underline","squiggly","strikeout",""],TextSelection=function(){function e(n){_classCallCheck(this,e),_TextSelection_pagePtr.set(this,void 0),_TextSelection_textPtr.set(this,void 0),this._tool=null,this.color=null,this.selecting=!1,this._selection=null,this.messageHandler=n.messageHandler,this.container=n.container||null,__classPrivateFieldSet(this,_TextSelection_textPtr,n.pagePtr.textPtr,"f"),__classPrivateFieldSet(this,_TextSelection_pagePtr,n.pagePtr.pagePtr,"f"),this.selected=n.selected,this.viewport=n.viewport,this.scale=n.scale,this.eventBus=n.eventBus,this.pageIndex=n.pageIndex,this.pageViewer=n.pageViewer,this.handleTool=this.handleTool.bind(this),this.handleToolMode=this.handleToolMode.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.toolMode=n.toolMode,this.tool=n.tool,this.color=n.color,this.eventBus._on("toolChanged",this.handleTool),this.eventBus._on("toolModeChanged",this.handleToolMode)}return _createClass(e,[{key:"handleToolMode",value:function(n){n!==this.toolMode&&(this.toolMode=n,document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("mousedown",this.handleMouseDown),document.removeEventListener("touchstart",this.handleMouseDown),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("touchmove",this.handleMouseMove),this.toolMode!=="view"&&this.toolMode!=="annotation"||(document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("mousedown",this.handleMouseDown),document.addEventListener("touchstart",this.handleMouseDown),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleMouseMove)))}},{key:"handleTool",value:function(n){var r=n.tool,o=n.color;this.tool=r,this.color=o,markupType.includes(this.tool)?(document.body.style.userSelect="auto",document.body.style.webkitUserSelect="auto"):(document.body.style.userSelect="none",document.body.style.webkitUserSelect="none")}},{key:"tool",get:function(){return this._tool},set:function(n){if(n!==this._tool||n===""){if(!markupType.includes(n)||this.toolMode==="editor")return document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("mousedown",this.handleMouseDown),document.removeEventListener("touchstart",this.handleMouseDown),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("touchmove",this.handleMouseMove),void(this._tool=n);markupType.includes(n)&&markupType.includes(this.tool)||(document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("mousedown",this.handleMouseDown),document.addEventListener("touchstart",this.handleMouseDown),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleMouseMove)),this._tool=n}}},{key:"testPoint",value:function(n){var r=getAbsoluteCoordinate(this.container,n),o=r.x,s=r.y,u=r.width,d=r.height;return!(o<0||s<0||o>u||s>d)&&{x:o,y:s}}},{key:"handleKeyDown",value:function(n){var r;if(n.key.toLocaleLowerCase()==="c"&&(n.ctrlKey||n.metaKey)){var o=(r=this._selection)===null||r===void 0?void 0:r.textContent;o&&copyToClipboard(o)}}},{key:"handleMouseDown",value:function(n){this.cleanSelection();var r=this.tool;if(markupType.includes(r)){var o=this.testPoint(n);if(o){var s=getInitialPoint({x:o.x,y:o.y},this.viewport,this.scale);this.startPoint=s,this.selecting=!0,document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleMouseUp)}}}},{key:"handleMouseMove",value:function(n){var r,o,s;return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function u(){var d,f,v,m,_;return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if((d=this.testPoint(n))&&!document.querySelector(".annotationContainer .outline-container")){g.next=4;break}return(r=this.container)===null||r===void 0||r.classList.remove("text"),g.abrupt("return");case 4:return f=d.x,v=d.y,m=getInitialPoint({x:f,y:v},this.viewport,this.scale),g.next=8,this.messageHandler.sendWithPromise("GetCharIndexAtPos",{pagePtr:__classPrivateFieldGet(this,_TextSelection_pagePtr,"f"),textPtr:__classPrivateFieldGet(this,_TextSelection_textPtr,"f"),point:m});case 8:if(!g.sent){g.next=14;break}(o=this.container)===null||o===void 0||o.classList.add("text"),this.endPoint=m,g.next=16;break;case 14:return(s=this.container)===null||s===void 0||s.classList.remove("text"),g.abrupt("return");case 16:if(this.selecting){g.next=18;break}return g.abrupt("return");case 18:return g.next=20,this.messageHandler.sendWithPromise("GetCharsRangeAtPos",{pagePtr:__classPrivateFieldGet(this,_TextSelection_pagePtr,"f"),textPtr:__classPrivateFieldGet(this,_TextSelection_textPtr,"f"),start:this.startPoint,end:this.endPoint});case 20:_=g.sent,this._selection=_,this.updateSelection();case 23:case"end":return g.stop()}},u,this)}))}},{key:"handleMouseUp",value:function(){if(this.selecting&&this._selection&&["highlight","underline","squiggly","strikeout"].includes(this.tool)){var n={operate:"add-annot",type:this.tool,pageIndex:this.pageIndex,date:new Date,opacity:.5,quadPoints:this.quadPoints,rect:this.rect,color:this.color,contents:this._selection.textContent||void 0};this.eventBus.dispatch("annotationChange",{type:"add",annotation:n}),this.cleanSelection()}this.startPoint=null,this.endPoint=null,this.selecting=!1,document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleMouseUp)}},{key:"updateSelection",value:function(){var n,r=this._selection.textRects;(n=this.textContainer)===null||n===void 0||(n.textContent="");for(var o=[],s=[],u=[],d=[],f=[],v=0;v<r.length;v++){var m=r[v],_=m.Left,g=m.Top,y=m.Right,w=m.Bottom,x={left:_*this.scale,top:g*this.scale,right:y*this.scale,bottom:w*this.scale};s.push(g),u.push(w),d.push(_),f.push(y);var k={PointX:_,PointY:g},S={PointX:y,PointY:g},E={PointX:_,PointY:w},T={PointX:y,PointY:w};o.push(k,S,E,T),this.drawSelection(x)}this.quadPoints=o;var M=Math.min.apply(Math,s),I=Math.max.apply(Math,u),F=Math.min.apply(Math,d),O=Math.max.apply(Math,f);this.rect={left:F,top:M,right:O,bottom:I}}},{key:"drawSelection",value:function(n){var r,o;this.textContainer||(this.textContainer=document.createElement("div"),this.textContainer.classList.add("text-container"),(r=this.container)===null||r===void 0||r.appendChild(this.textContainer));var s=n.left,u=n.top,d=n.right,f=n.bottom,v=document.createElement("div");v.classList.add("text-selection"),v.style.left="".concat(s,"px"),v.style.top="".concat(u,"px"),v.style.width="".concat(d-s,"px"),v.style.height="".concat(f-u,"px"),(o=this.textContainer)===null||o===void 0||o.appendChild(v)}},{key:"cleanSelection",value:function(){var n;(n=this.textContainer)===null||n===void 0||n.remove(),this.textContainer=null,this._selection=null}},{key:"destroy",value:function(){var n;(n=this.textContainer)===null||n===void 0||n.remove(),this.textContainer=null,this._selection=null,document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("mousedown",this.handleMouseDown),document.removeEventListener("touchstart",this.handleMouseDown),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("touchmove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleMouseUp),this.eventBus._off("toolChanged",this.handleTool),this.eventBus._off("toolModeChanged",this.handleToolMode)}}]),e}();_TextSelection_pagePtr=new WeakMap,_TextSelection_textPtr=new WeakMap;var TextSearch=function(){function e(n){var r=n.container,o=n.viewport,s=n.scale,u=n.pageIndex,d=n.results;_classCallCheck(this,e),this.searchContainer=null,this.activeIndex=0,this.container=null,this.scale=0,this.pageIndex=0,this._searchResults=[],this.container=r,this.viewport=o,this.scale=s,this.pageIndex=u,this._searchResults=d,d&&d.length&&this.renderSearchResults()}return _createClass(e,[{key:"searchResults",get:function(){return this._searchResults},set:function(n){this._searchResults=n,this.renderSearchResults()}},{key:"setActiveSearchResult",value:function(n){var r=n.pageNum;n&&(this.searchContainer&&this.searchContainer.querySelectorAll(".searchItems")[n.pageSearchIndex].classList.add("selected"),this.activeIndex=r-1)}},{key:"clearActiveSearchResult",value:function(n){if(this.searchContainer){var r=n.pageSearchIndex;this.searchContainer.querySelectorAll(".searchItems")[r].classList.remove("selected")}}},{key:"renderSearchResults",value:function(){var n=this.scale;if(!this.searchContainer){var r=document.createElement("div");r.className="searchContainer",this.container.appendChild(r),this.searchContainer=r}this.searchContainer.textContent="";for(var o=0;o<this.searchResults.length;o++)if(this.searchResults[o].pageNum===this.pageIndex+1){var s=this.searchResults[o],u=document.createElement("div");u.className="searchItems";for(var d=0;d<s.quads.length;d++){var f=s.quads[d],v=f.left,m=f.top,_={left:v*n,top:m*n,width:f.right*n-v*n,height:f.bottom*n-m*n},g=document.createElement("div");g.className="highlight",g.style.position="absolute",g.style.left="".concat(_.left,"px"),g.style.top="".concat(_.top,"px"),g.style.width="".concat(_.width,"px"),g.style.height="".concat(_.height,"px"),u.appendChild(g)}this.searchContainer.appendChild(u)}}},{key:"destroy",value:function(){this.searchContainer&&(this.searchContainer.parentNode.removeChild(this.searchContainer),this.searchContainer=null)}}]),e}(),MAX_CANVAS_PIXELS=maxCanvasPixels,_previousRotation=new WeakMap,_useThumbnailCanvas=new WeakMap,_activeSearch=new WeakMap,_setDimensions=new WeakSet,_renderTextLayer=new WeakSet,PDFPageView=function(){function e(d){var f;_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_renderTextLayer),_classPrivateMethodInitSpec(this,_setDimensions),_classPrivateFieldInitSpec(this,_previousRotation,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_useThumbnailCanvas,{writable:!0,value:{initialOptionalContent:!0,regularAnnotations:!0}}),_classPrivateFieldInitSpec(this,_activeSearch,{writable:!0,value:null}),this._loadingId=null;var v=d.container,m=d.defaultViewport;this.id=d.id,this.pageIndex=d.pageIndex,this.renderingId="page"+this.id,this.layerProperties=d.layerProperties,this.doc=d.doc,this.messageHandler=d.messageHandler,this.messageHandler=d.messageHandler,this.pagesPtr=d.pagesPtr,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.annotationStore=d.annotationStore,this.tool="",this.color="",this.toolMode="",this.scale=d.scale||DEFAULT_SCALE,this.viewport=m,this.pdfPageRotate=m.rotation,this.hasRestrictedScaling=!1,this.textLayerMode=(f=d.textLayerMode)!==null&&f!==void 0?f:TextLayerMode.ENABLE,this.imageResourcesPath=d.imageResourcesPath||"",this.useOnlyCssZoom=d.useOnlyCssZoom||!1,this.isOffscreenCanvasSupported=!0,this.maxCanvasPixels=d.maxCanvasPixels||MAX_CANVAS_PIXELS,this.pageColors=d.pageColors||null,this.eventBus=d.eventBus,this._annotations=d.annotations,this._annotationsAll=d.annotationsAll,this.pagesPtr=d.pagesPtr,(typeof PDFJSDev>"u"||PDFJSDev.test("!PRODUCTION || GENERIC"))&&(this.renderer=d.renderer||RendererType.CANVAS),this.l10n=d.l10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this._renderingState=RenderingStates$1.INITIAL,this.resume=null,this._renderError=null,this._annotationCanvasMap=null,this.annotationLayer=null,this.compdfAnnotationLayer=null,this.annotationEditorLayer=null,this.textSelect=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null,this.contentContainer=null,this.textSelection=null,this.textSearch=null,this.searchResults=null;var _=document.createElement("div");_.className="page page-number"+this.id,_.setAttribute("data-page-number",this.id),_.setAttribute("role","region"),this.pagePressHandle=this.pagePressHandle.bind(this),_.addEventListener("click",this.pagePressHandle),this.div=_,_classPrivateMethodGet(this,_setDimensions,_setDimensions2).call(this),v==null||v.append(_),this.selected=d.selected,this.$t=d.$t,this.eventBus._on("toolChanged",this.handleTool.bind(this)),this.eventBus._on("toolModeChanged",this.handleToolMode.bind(this)),this.eventBus._on("search",this.handleSearch.bind(this)),this.mode=null,v==null||v.style.setProperty("--scale-factor",this.scale*PixelsPerInch.PDF_TO_CSS_UNITS)}var n,r,o,s,u;return _createClass(e,[{key:"pagePressHandle",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function d(f){var v,m,_,g,y,w,x,k,S,E,T,M,I,F,O,N,D,X,U,Z;return _regeneratorRuntime().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(v=f.currentTarget,m=this.id,_=this.pageIndex,m&&(g=document.getElementById("sign-image-save"))){if(y=g.getAttribute("src"),w=v.getBoundingClientRect(),x=g.getBoundingClientRect(),k=x.x-w.x,S=x.y-w.y,E=k+g.width,T=S+g.height,M=k/this.scale,I=S/this.scale,F=E/this.scale,O=T/this.scale,N=null,g.inkPath){for(D=[],X=0;X<g.inkPath.length;X++){for(U=[],Z=0;Z<g.inkPath[X].length;Z++)U.push({PointX:g.inkPath[X][Z].x/this.scale+M,PointY:I+g.inkPath[X][Z].y/this.scale});D.push(U)}N={operate:"add-annot",type:"ink",pageIndex:_,inkPointes:D,rect:{left:M,top:I,right:F,bottom:O},targetPage:m,borderWidth:g.inkParam.width||1,borderColor:g.inkParam.color||"#000",date:new Date,name:v4()}}else N={operate:"add-annot",type:"stamp",stampType:"image",pageIndex:_,imageBase64:y,rect:{left:M,top:I,right:F,bottom:O},targetPage:m,date:new Date,name:v4()};N&&this.eventBus.dispatch("createSignature",N),g.remove(),document.querySelector(".content").onmousemove=null}case 4:case"end":return j.stop()}},d,this)})),function(d){return u.apply(this,arguments)})},{key:"handleTool",value:function(d){var f=d.tool,v=d.color;this.compdfAnnotationLayer||(this.tool=f,this.color=v)}},{key:"handleToolMode",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function d(f){return _regeneratorRuntime().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(this.mode=f,this.toolMode=f,!this.contentContainer){v.next=9;break}if(f!=="editor"){v.next=8;break}return v.next=6,this.contentContainer.render();case 6:v.next=9;break;case 8:this.contentContainer.destroy();case 9:if(!this.compdfAnnotationLayer){v.next=11;break}return v.abrupt("return");case 11:case"end":return v.stop()}},d,this)})),function(d){return s.apply(this,arguments)})},{key:"handleSearch",value:function(d){this.searchResults=d,this.textSearch&&(this.textSearch.searchResults=d)}},{key:"annotations",get:function(){return this._annotations},set:function(d){this._annotations=d,this.compdfAnnotationLayer&&(this.compdfAnnotationLayer.annotations=this.annotations)}},{key:"annotationsAll",get:function(){return this._annotationsAll},set:function(d){this._annotationsAll=d,this.compdfAnnotationLayer&&(this.compdfAnnotationLayer.annotationsAll=this.annotationsAll)}},{key:"renderingState",get:function(){return this._renderingState},set:function(d){var f=this;if(d!==this._renderingState)switch(this._renderingState=d,this._loadingId&&(clearTimeout(this._loadingId),this._loadingId=null),d){case RenderingStates$1.PAUSED:this.div.classList.remove("loading");break;case RenderingStates$1.RUNNING:this.div.classList.add("loadingIcon"),this._loadingId=setTimeout(function(){f.div.classList.add("loading"),f._loadingId=null},0);break;case RenderingStates$1.INITIAL:case RenderingStates$1.FINISHED:this.div.classList.remove("loadingIcon","loading")}}},{key:"selectedText",get:function(){if(!this.textSelection)return null;var d=this.textSelection._selection;return d?d.textContent:null}},{key:"setPdfPage",value:function(d){this.pdfPage=d,this.pdfPageRotate=d.rotate;var f=(this.rotation+this.pdfPageRotate)%360;this.viewport=d.getViewport({scale:this.scale*PixelsPerInch.PDF_TO_CSS_UNITS,rotation:f}),_classPrivateMethodGet(this,_setDimensions,_setDimensions2).call(this),this.reset()}},{key:"destroy",value:function(){var d;this.reset(),(d=this.pdfPage)===null||d===void 0||d.cleanup()}},{key:"clearSearchResults",value:function(){this.searchResults=null,this.textSearch&&this.textSearch.destroy()}},{key:"_renderAnnotationLayer",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function d(){var f;return _regeneratorRuntime().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return f=null,v.prev=1,v.next=4,this.annotationLayer.render(this.viewport,"display");case 4:v.next=10;break;case 6:v.prev=6,v.t0=v.catch(1),console.error('_renderAnnotationLayer: "'.concat(v.t0,'".')),f=v.t0;case 10:return v.prev=10,this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:f}),v.finish(10);case 13:case"end":return v.stop()}},d,this,[[1,6,10,13]])})),function(){return o.apply(this,arguments)})},{key:"emptyAnnotations",value:function(){this.compdfAnnotationLayer&&this.compdfAnnotationLayer.emptyAnnotations()}},{key:"_renderAnnotationEditorLayer",value:function(){this.annotationEditorLayer.render(this.viewport,"display")}},{key:"renderPage",value:function(){var d=this;this.renderingState!==RenderingStates$1.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());var f=this.div,v=this.viewport,m=this.pdfPage,_=this.annotations,g=this.annotationsAll;if(!m)throw this.renderingState=RenderingStates$1.FINISHED,new Error("pdfPage is not loaded");this.renderingState=RenderingStates$1.RUNNING;var y=document.createElement("div");y.classList.add("canvasWrapper"),f.append(y);var w=document.createElement("canvas");w.setAttribute("role","presentation"),w.hidden=!0;var x=!0;y.append(w),this.canvas=w;var k=window.devicePixelRatio||1;this.radio=k;var S=v.width,E=v.height,T=v.scale,M=Math.round(S*k),I=Math.round(E*k);w.width=M,w.height=I;var F=w.style;F.width=Math.round(S)+"px",F.height=Math.round(E)+"px",this.paintedViewportMap.set(w,v);var O=(this.renderTask=this.internalRenderTask({width:S,height:E,scale:T*k})).promise.then(_asyncToGenerator(_regeneratorRuntime().mark(function N(){var D,X,U;return _regeneratorRuntime().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return x&&(w.hidden=!1,x=!1),Z.next=3,d.finishRenderTask();case 3:if(_classPrivateMethodGet(d,_renderTextLayer,_renderTextLayer2).call(d),!d.annotationLayer){Z.next=7;break}return Z.next=7,d._renderAnnotationLayer();case 7:if(d.annotationEditorLayer){Z.next=12;break}if(D=d.layerProperties(),X=D.annotationEditorUIManager,U=D.annotationStorage,X){Z.next=11;break}return Z.abrupt("return");case 11:d.annotationEditorLayer=new PDFAnnotationLayer({uiManager:X,annotationStorage:U,pageIndex:d.pageIndex,pageDiv:f,viewport:d.viewport,scale:d.scale,annotations:_,accessibilityManager:d._accessibilityManager});case 12:if(d._renderAnnotationEditorLayer(),d.compdfAnnotationLayer||(d.compdfAnnotationLayer=new ComPDFAnnotationLayer({annotationStore:d.annotationStore,messageHandler:d.messageHandler,pageViewer:d,annotations:_,annotationsAll:g,viewport:d.viewport,scale:d.scale,pageIndex:d.pageIndex,pageDiv:f,eventBus:d.eventBus,selected:d.selected,$t:d.$t})),d.compdfAnnotationLayer.render(d.viewport),d.contentContainer||(d.contentContainer=new ContentContainer({annotationStore:d.annotationStore,pageViewer:d,annotations:_,annotationsAll:g,viewport:d.viewport,scale:d.scale,pageIndex:d.pageIndex,pageDiv:f,eventBus:d.eventBus,selected:d.selected,pagePtr:d.pagesPtr[d.pageIndex].pagePtr,messageHandler:d.messageHandler,$t:d.$t})),d.mode!=="editor"){Z.next=19;break}return Z.next=19,d.contentContainer.render();case 19:d.textSelection||(d.textSelection=new TextSelection({viewport:d.viewport,scale:d.scale,pageIndex:d.pageIndex,container:f,eventBus:d.eventBus,selected:d.selected,pagePtr:d.pagesPtr[d.pageIndex],messageHandler:d.messageHandler,tool:d.tool,toolMode:d.toolMode,color:d.color,pageViewer:d})),d.textSearch||(d.textSearch=new TextSearch({viewport:d.viewport,scale:d.scale,pageIndex:d.pageIndex,container:f,results:d.searchResults}),_classPrivateFieldGet(d,_activeSearch)&&d.textSearch.setActiveSearchResult(_classPrivateFieldGet(d,_activeSearch)));case 21:case"end":return Z.stop()}},N)})),function(N){return console.log(N),d.finishRenderTask(N)});return f.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),O}},{key:"internalRenderTask",value:function(d){var f=d.width,v=d.height,m=d.scale,_=this.renderTask;return _&&_.cancel(),_=this.render({width:f,height:v,scale:m})}},{key:"render",value:function(d){var f=d.width,v=d.height,m=d.scale,_=new PromiseExt;_.cancel=function(){_.reject("Cancel")};var g=this.canvas,y=this.pagesPtr,w=this.pageIndex;return this.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:y[w].pagePtr,left:0,top:0,right:Math.round(f),bottom:Math.round(v),scale:m}).then(function(x){var k=g.getContext("2d",{alpha:!1}),S=x.imageArray;k.clearRect(0,0,f,v);var E=k.createImageData(f,v);E.data.set(S),k.putImageData(E,0,0),_.resolve()}).catch(function(x){console.log(x)}),_}},{key:"finishRenderTask",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(this.renderTask=null,this._renderError=d,this.renderingState=RenderingStates$1.FINISHED,this._resetZoomLayer(!0),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:this._renderError}),d)throw d}},{key:"_resetZoomLayer",value:function(){var d=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.zoomLayer){var f=this.zoomLayer.firstChild;this.paintedViewportMap.delete(f),f.width=0,f.height=0,d&&this.zoomLayer.remove(),this.zoomLayer=null}}},{key:"reset",value:function(){var d,f,v,m,_=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=_.keepZoomLayer,y=g!==void 0&&g,w=_.keepAnnotationLayer,x=w!==void 0&&w,k=_.keepAnnotationEditorLayer,S=k!==void 0&&k,E=_.keepXfaLayer,T=E!==void 0&&E,M=_.keepTextLayer,I=M!==void 0&&M;this.cancelRendering({keepAnnotationLayer:x,keepAnnotationEditorLayer:S,keepXfaLayer:T,keepTextLayer:I}),this.renderingState=RenderingStates$1.INITIAL;for(var F,O=this.div,N=O.childNodes,D=y&&this.zoomLayer||null,X=x&&((d=this.annotationLayer)===null||d===void 0?void 0:d.div)||null,U=S&&((f=this.annotationEditorLayer)===null||f===void 0?void 0:f.div)||null,Z=I&&((v=this.textLayer)===null||v===void 0?void 0:v.div)||null,j=N.length-1;j>=0;j--){var Q=N[j];switch(Q){case D:case Z:case X:case U:continue}Q.remove()}O.removeAttribute("data-loaded"),X&&this.annotationLayer.hide(),U?this.annotationEditorLayer.hide():(F=this.annotationEditorLayer)===null||F===void 0||F.destroy(),Z&&this.textLayer.hide(),(m=this.structTreeLayer)===null||m===void 0||m.hide(),D||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}},{key:"update",value:function(d){var f,v=d.scale,m=v===void 0?0:v,_=d.rotation,g=_===void 0?null:_,y=d.drawingDelay,w=y===void 0?-1:y;this.scale=m||this.scale,typeof g=="number"&&(this.rotation=g);var x=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*PixelsPerInch.PDF_TO_CSS_UNITS,rotation:x}),_classPrivateMethodGet(this,_setDimensions,_setDimensions2).call(this),(f=this.div.parentNode)===null||f===void 0||f.style.setProperty("--scale-factor",this.viewport.scale);var k=w>=0&&w<1e3;if(this.canvas){if(k||this.useOnlyCssZoom||this.hasRestrictedScaling&&isScalingRestricted)return k&&this.renderingState!==RenderingStates$1.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:w}),this.renderingState=RenderingStates$1.FINISHED),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!k,hideTextLayer:k}),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError}),void this.reset({keepZoomLayer:!1,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0});this.zoomLayer||this.canvas.hidden||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}},{key:"cancelRendering",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=d.keepAnnotationLayer,v=f!==void 0&&f,m=d.keepAnnotationEditorLayer,_=m!==void 0&&m,g=d.cancelExtraDelay,y=g===void 0?0:g;this.paintTask&&(this.paintTask.cancel(y),this.paintTask=null),this.resume=null,this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),!this.annotationLayer||v&&this.annotationLayer.div||(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.compdfAnnotationLayer&&(this.compdfAnnotationLayer.cancel(),this.compdfAnnotationLayer=null),!this.annotationEditorLayer||_&&this.annotationEditorLayer.div||(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.contentContainer&&(this.contentContainer.cancel(),this.contentContainer=null),this.textSelection&&(this.textSelection.destroy(),this.textSelection=null),this.textSearch&&(this.textSearch.destroy(),this.textSearch=null)}},{key:"cssTransform",value:function(d){var f=d.target,v=d.redrawAnnotationLayer,m=v!==void 0&&v,_=d.redrawAnnotationEditorLayer,g=_!==void 0&&_;d.redrawXfaLayer;var y=d.redrawTextLayer,w=y!==void 0&&y,x=d.hideTextLayer,k=x!==void 0&&x;if(f instanceof HTMLCanvasElement){if(!f.hasAttribute("zooming")){f.setAttribute("zooming",!0);var S=f.style;S.width=S.height=""}}else{var E=this.div,T=this.viewport,M=T.width,I=T.height;f.style.width=f.parentNode.style.width=E.style.width=Math.floor(M)+"px",f.style.height=f.parentNode.style.height=E.style.height=Math.floor(I)+"px"}var F,O=this.paintedViewportMap.get(f);if(this.viewport!==O){var N=this.viewport.rotation-O.rotation,D=Math.abs(N),X=1,U=1;if(D===90||D===270){var Z=this.viewport,j=Z.width,Q=Z.height;X=Q/j,U=j/Q}D!==0&&(f.style.transform="rotate(".concat(N,"deg) scale(").concat(X,", ").concat(U,")"))}m&&this.annotationLayer&&this._renderAnnotationLayer(),g&&this.annotationEditorLayer&&this._renderAnnotationEditorLayer(),this.textLayer&&(k?(this.textLayer.hide(),(F=this.structTreeLayer)===null||F===void 0||F.hide()):w&&_classPrivateMethodGet(this,_renderTextLayer,_renderTextLayer2).call(this))}},{key:"width",get:function(){return this.viewport.width}},{key:"height",get:function(){return this.viewport.height}},{key:"getPagePoint",value:function(d,f){return this.viewport.convertToPdfPoint(d,f)}},{key:"addTextEditor",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function d(f){var v,m,_,g;return _regeneratorRuntime().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(this.contentContainer){y.next=5;break}return v=this.div,m=this.annotationStore,_=this.annotations,g=this.annotationsAll,this.contentContainer=new ContentContainer({annotationStore:m,pageViewer:this,annotations:_,annotationsAll:g,viewport:this.viewport,scale:this.scale,pageIndex:this.pageIndex,pageDiv:v,eventBus:this.eventBus,selected:this.selected,pagePtr:this.pagesPtr[this.pageIndex].pagePtr,messageHandler:this.messageHandler,$t:this.$t}),y.next=5,this.contentContainer.render();case 5:this.contentContainer.addTextEditor(f);case 6:case"end":return y.stop()}},d,this)})),function(d){return r.apply(this,arguments)})},{key:"getEditAnnotation",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function d(){var f,v,m,_;return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(this.contentContainer){g.next=5;break}return f=this.div,v=this.annotationStore,m=this.annotations,_=this.annotationsAll,this.contentContainer=new ContentContainer({annotationStore:v,pageViewer:this,annotations:m,annotationsAll:_,viewport:this.viewport,scale:this.scale,pageIndex:this.pageIndex,pageDiv:f,eventBus:this.eventBus,selected:this.selected,pagePtr:this.pagesPtr[this.pageIndex].pagePtr,messageHandler:this.messageHandler,$t:this.$t}),g.next=5,this.contentContainer.render();case 5:return g.abrupt("return",this.contentContainer.frameEditorList);case 6:case"end":return g.stop()}},d,this)})),function(){return n.apply(this,arguments)})},{key:"draw",value:function(){var d=this;this.renderingState!==RenderingStates$1.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());var f=this.div,v=this.pdfPage,m=this.annotations,_=this.annotationsAll;if(!v)return this.renderingState=RenderingStates$1.FINISHED,Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=RenderingStates$1.RUNNING;var g=document.createElement("div");g.classList.add("canvasWrapper"),f.append(g);var y=function(){var k=_asyncToGenerator(_regeneratorRuntime().mark(function S(){var E,T=arguments;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(E=T.length>0&&T[0]!==void 0?T[0]:null,w===d.paintTask&&(d.paintTask=null),!(E instanceof pdfExports.RenderingCancelledException)){M.next=5;break}return d._renderError=null,M.abrupt("return");case 5:if(d._renderError=E,d.renderingState=RenderingStates$1.FINISHED,d._resetZoomLayer(!0),_classPrivateFieldGet(d,_useThumbnailCanvas).regularAnnotations=!w.separateAnnots,d.eventBus.dispatch("pagerendered",{source:d,pageNumber:d.id,cssTransform:!1,timestamp:performance.now(),error:d._renderError}),!E){M.next=12;break}throw E;case 12:case"end":return M.stop()}},S)}));return function(){return k.apply(this,arguments)}}(),w=this.paintOnCanvas(g);w.onRenderContinue=null,this.paintTask=w;var x=w.promise.then(function(){return y(null).then(_asyncToGenerator(_regeneratorRuntime().mark(function k(){var S,E,T;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(_classPrivateMethodGet(d,_renderTextLayer,_renderTextLayer2).call(d),!d.annotationLayer){M.next=4;break}return M.next=4,d._renderAnnotationLayer();case 4:if(d.annotationEditorLayer){M.next=9;break}if(S=d.layerProperties(),E=S.annotationEditorUIManager,T=S.annotationStorage,E){M.next=8;break}return M.abrupt("return");case 8:d.annotationEditorLayer=new PDFAnnotationLayer({uiManager:E,annotationStorage:T,pageIndex:d.pageIndex,pageDiv:f,viewport:d.viewport,scale:d.scale,annotations:m,accessibilityManager:d._accessibilityManager});case 9:if(d._renderAnnotationEditorLayer(),d.compdfAnnotationLayer?d.compdfAnnotationLayer.destroy():d.compdfAnnotationLayer=new ComPDFAnnotationLayer({annotationStore:d.annotationStore,messageHandler:d.messageHandler,pageViewer:d,annotations:m,annotationsAll:_,viewport:d.viewport,scale:d.scale,pageIndex:d.pageIndex,pageDiv:f,eventBus:d.eventBus,selected:d.selected,$t:d.$t}),d.compdfAnnotationLayer.render(d.viewport),d.contentContainer||(d.contentContainer=new ContentContainer({annotationStore:d.annotationStore,pageViewer:d,annotations:m,annotationsAll:_,viewport:d.viewport,scale:d.scale,pageIndex:d.pageIndex,pageDiv:f,eventBus:d.eventBus,selected:d.selected,pagePtr:d.pagesPtr[d.pageIndex].pagePtr,messageHandler:d.messageHandler,$t:d.$t})),d.mode!=="editor"){M.next=16;break}return M.next=16,d.contentContainer.render();case 16:d.textSelection||(d.textSelection=new TextSelection({viewport:d.viewport,scale:d.scale,pageIndex:d.pageIndex,container:f,eventBus:d.eventBus,selected:d.selected,pagePtr:d.pagesPtr[d.pageIndex],messageHandler:d.messageHandler,tool:d.tool,toolMode:d.toolMode,color:d.color,pageViewer:d})),d.textSearch||(d.textSearch=new TextSearch({viewport:d.viewport,scale:d.scale,pageIndex:d.pageIndex,container:f,results:d.searchResults}),_classPrivateFieldGet(d,_activeSearch)&&d.textSearch.setActiveSearchResult(_classPrivateFieldGet(d,_activeSearch)));case 18:case"end":return M.stop()}},k)})))},function(k){return y(k)});return f.setAttribute("data-loaded",!0),x}},{key:"paintOnCanvas",value:function(d){var f=this,v=pdfExports.createPromiseCapability(),m={promise:v.promise,onRenderContinue:function(N){N()},cancel:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;O.cancel(N)},get separateAnnots(){return O.separateAnnots}},_=document.createElement("canvas");_.setAttribute("role","presentation"),_.hidden=!0;var g=!0,y=function(){g&&(_.hidden=!1,g=!1)};d.append(_),this.canvas=_;var w=_.getContext("2d",{alpha:!1}),x=window.devicePixelRatio||1;this.radio=x;var k=this.viewport,S=k.width,E=k.height,T=k.scale,M=Math.round(S*x),I=Math.round(E*x);_.width=M,_.height=I;var F=_.style;F.width=Math.round(S)+"px",F.height=Math.round(E)+"px",this.paintedViewportMap.set(_,k);var O=new PromiseExt;return O.cancel=function(){},O.resolve(),O.promise.then(_asyncToGenerator(_regeneratorRuntime().mark(function N(){var D,X,U;return _regeneratorRuntime().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,f.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:f.pagesPtr[f.pageIndex].pagePtr,left:0,top:0,right:Math.round(M),bottom:Math.round(I),scale:T*x});case 2:D=Z.sent,X=D.imageArray,w.clearRect(0,0,M,I),(U=w.createImageData(M,I)).data.set(X),w.putImageData(U,0,0),y(),v.resolve();case 10:case"end":return Z.stop()}},N)})),function(N){console.log(N),N instanceof pdfExports.RenderingCancelledException||y(),v.reject(N)}),m}},{key:"setActiveSearchResult",value:function(d){_classPrivateFieldSet(this,_activeSearch,d),this.textSearch&&this.textSearch.setActiveSearchResult(d)}},{key:"clearActiveSearchResult",value:function(d){_classPrivateFieldSet(this,_activeSearch,null),this.textSearch&&this.textSearch.clearActiveSearchResult(d)}},{key:"setPageLabel",value:function(d){this.pageLabel=typeof d=="string"?d:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}},{key:"thumbnailCanvas",get:function(){return this.canvas}},{key:"fontFile",get:function(){return this._fontFile},set:function(d){this._fontFile=d}}]),e}(),_Symbol$iterator;function _setDimensions2(){var e=this.viewport;if(this.pdfPage){if(_classPrivateFieldGet(this,_previousRotation)===e.rotation)return;_classPrivateFieldSet(this,_previousRotation,e.rotation)}pdfExports.setLayerDimensions(this.div,e,!0,!1)}function _renderTextLayer2(){return _renderTextLayer3.apply(this,arguments)}function _renderTextLayer3(){return(_renderTextLayer3=_asyncToGenerator(_regeneratorRuntime().mark(function e(){var n,r,o,s,u;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(n=this.pdfPage,r=this.textLayer,o=this.viewport,r){d.next=3;break}return d.abrupt("return");case 3:return s=null,d.prev=4,r.renderingDone||(u=n.streamTextContent({includeMarkedContent:!0}),r.setTextContentSource(u)),d.next=8,r.render(o);case 8:d.next=16;break;case 10:if(d.prev=10,d.t0=d.catch(4),!(d.t0 instanceof pdfExports.AbortException)){d.next=14;break}return d.abrupt("return");case 14:console.error('#renderTextLayer: "'.concat(d.t0,'".')),s=d.t0;case 16:this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:r.numTextDivs,error:s});case 17:case"end":return d.stop()}},e,this,[[4,10]])}))).apply(this,arguments)}var DEFAULT_CACHE_SIZE=3,ENABLE_PERMISSIONS_CLASS="enablePermissions",PagesCountLimit={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};function isValidAnnotationEditorMode(e){return Object.values(pdfExports.AnnotationEditorType).includes(e)&&e!==pdfExports.AnnotationEditorType.DISABLE}var _buf=new WeakMap,_size=new WeakMap,_destroyFirstView=new WeakSet;_Symbol$iterator=Symbol.iterator;var PDFPageViewBuffer=function(){function e(n){_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_destroyFirstView),_classPrivateFieldInitSpec(this,_buf,{writable:!0,value:new Set}),_classPrivateFieldInitSpec(this,_size,{writable:!0,value:0}),_classPrivateFieldSet(this,_size,n)}return _createClass(e,[{key:"push",value:function(n){var r=_classPrivateFieldGet(this,_buf);r.has(n)&&r.delete(n),r.add(n),r.size>_classPrivateFieldGet(this,_size)&&_classPrivateMethodGet(this,_destroyFirstView,_destroyFirstView2).call(this)}},{key:"resize",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;_classPrivateFieldSet(this,_size,n);var o=_classPrivateFieldGet(this,_buf);if(r){var s,u=o.size,d=1,f=_createForOfIteratorHelper(o);try{for(f.s();!(s=f.n()).done;){var v=s.value;if(r.has(v.id)&&(o.delete(v),o.add(v)),++d>u)break}}catch(m){f.e(m)}finally{f.f()}}for(;o.size>_classPrivateFieldGet(this,_size);)_classPrivateMethodGet(this,_destroyFirstView,_destroyFirstView2).call(this)}},{key:"has",value:function(n){return _classPrivateFieldGet(this,_buf).has(n)}},{key:_Symbol$iterator,value:function(){return _classPrivateFieldGet(this,_buf).keys()}}]),e}();function _destroyFirstView2(){var e=_classPrivateFieldGet(this,_buf).keys().next().value;e==null||e.destroy(),_classPrivateFieldGet(this,_buf).delete(e)}var _buffer=new WeakMap,_enablePermissions=new WeakMap,_scrollModePageState=new WeakMap,_onVisibilityChange=new WeakMap,_scaleTimeoutId=new WeakMap,_renderedPagesView=new WeakMap,_rendering=new WeakMap,_cacheTask=new WeakMap,_layerProperties=new WeakSet,_initializePermissions=new WeakSet,_onePageRenderedOrForceFetch=new WeakSet,_ensurePageViewVisible=new WeakSet,_scrollIntoView=new WeakSet,_isSameScale=new WeakSet,_resetCurrentPageView=new WeakSet,_ensurePdfPageLoaded$1=new WeakSet,_getScrollAhead$1=new WeakSet,PDFViewer=function(){function e(r){var o,s,u,d,f;if(_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_getScrollAhead$1),_classPrivateMethodInitSpec(this,_ensurePdfPageLoaded$1),_classPrivateMethodInitSpec(this,_resetCurrentPageView),_classPrivateMethodInitSpec(this,_isSameScale),_classPrivateMethodInitSpec(this,_scrollIntoView),_classPrivateMethodInitSpec(this,_ensurePageViewVisible),_classPrivateMethodInitSpec(this,_onePageRenderedOrForceFetch),_classPrivateMethodInitSpec(this,_initializePermissions),_classPrivateMethodInitSpec(this,_layerProperties),_classPrivateFieldInitSpec(this,_buffer,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_enablePermissions,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_scrollModePageState,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_onVisibilityChange,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_scaleTimeoutId,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_renderedPagesView,{writable:!0,value:[]}),_classPrivateFieldInitSpec(this,_rendering,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_cacheTask,{writable:!0,value:[]}),this.eventBus=r.eventBus,this._annotationEditorUIManager=null,this.container=r.container,this.viewer=r.viewer||r.container.firstElementChild,this.annotationStore=r.annotationStore,this.messageHandler=r.messageHandler,this.exitPresentationMode=!1,((o=this.container)===null||o===void 0?void 0:o.tagName)!=="DIV"||((s=this.viewer)===null||s===void 0?void 0:s.tagName)!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");this.linkService=r.linkService,this.removePageBorders=!1,this.textLayerMode=(u=r.textLayerMode)!==null&&u!==void 0?u:TextLayerMode.ENABLE,this._annotationEditorMode=(d=r.annotationEditorMode)!==null&&d!==void 0?d:pdfExports.AnnotationEditorType.NONE,this.imageResourcesPath=r.imageResourcesPath||"",this.enablePrintAutoRotate=r.enablePrintAutoRotate||!1,this.renderer=r.renderer||RendererType.CANVAS,this.useOnlyCssZoom=r.useOnlyCssZoom||!1,this.isOffscreenCanvasSupported=(f=r.isOffscreenCanvasSupported)===null||f===void 0||f,this.maxCanvasPixels=maxCanvasPixels,_classPrivateFieldSet(this,_enablePermissions,r.enablePermissions||!1),this.pageColors=r.pageColors||null,this.$t=r.$t,this.doc=r.doc,this.messageHandler=r.messageHandler,this._fontFile=null,!this.pageColors||CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground)||((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.renderingQueue=r.renderingQueue,this.scroll=watchScroll(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders")}var n;return _createClass(e,[{key:"pagesCount",get:function(){return this._pages.length}},{key:"getPageView",value:function(r){return this._pages[r]}},{key:"pageViewsReady",get:function(){return!!this._pagesCapability.settled&&this._pages.every(function(r){return r==null?void 0:r.pdfPage})}},{key:"currentPageNumber",get:function(){return this._currentPageNumber},set:function(r){if(!Number.isInteger(r))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(r,!0)||console.error('currentPageNumber: "'.concat(r,'" is not a valid page.')))}},{key:"_setCurrentPageNumber",value:function(r){var o,s,u=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(this._currentPageNumber===r)return u&&_classPrivateMethodGet(this,_resetCurrentPageView,_resetCurrentPageView2).call(this),!0;if(!(0<r&&r<=this.pagesCount))return!1;var d=this._currentPageNumber;return this._currentPageNumber=r,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:r,pageLabel:(o=(s=this._pageLabels)===null||s===void 0?void 0:s[r-1])!==null&&o!==void 0?o:null,previous:d}),u&&_classPrivateMethodGet(this,_resetCurrentPageView,_resetCurrentPageView2).call(this),!0}},{key:"currentPageLabel",get:function(){var r,o;return(r=(o=this._pageLabels)===null||o===void 0?void 0:o[this._currentPageNumber-1])!==null&&r!==void 0?r:null},set:function(r){if(this.pdfDocument){var o=0|r;if(this._pageLabels){var s=this._pageLabels.indexOf(r);s>=0&&(o=s+1)}this._setCurrentPageNumber(o,!0)||console.error('currentPageLabel: "'.concat(r,'" is not a valid page.'))}}},{key:"currentScale",get:function(){return this._currentScale!==UNKNOWN_SCALE?this._currentScale:DEFAULT_SCALE},set:function(r){if(isNaN(r))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(r,{noScroll:!1})}},{key:"currentScaleValue",get:function(){return this._currentScaleValue},set:function(r){this.pdfDocument&&this._setScale(r,{noScroll:!1})}},{key:"pagesRotation",get:function(){return this._pagesRotation},set:function(r){if(!isValidRotation(r))throw new Error("Invalid pages rotation angle.");if(this.pdfDocument&&((r%=360)<0&&(r+=360),this._pagesRotation!==r)){this._pagesRotation=r;var o=this._currentPageNumber;this.refresh(!0,{rotation:r}),this._currentScaleValue&&this._setScale(this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:r,pageNumber:o})}}},{key:"firstPagePromise",get:function(){return this.pdfDocument?this._firstPageCapability.promise:null}},{key:"onePageRendered",get:function(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}},{key:"pagesPromise",get:function(){return this.pdfDocument?this._pagesCapability.promise:null}},{key:"setDocument",value:function(r,o,s){var u=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this._annotationEditorUIManager&&(this._annotationEditorUIManager.destroy(),this._annotationEditorUIManager=null)),this.pdfDocument=r,r){var d=r.numPages,f=r.getPage(1),v=r.getOptionalContentConfig(),m=_classPrivateFieldGet(this,_enablePermissions)?r.getPermissions():Promise.resolve();if(d>PagesCountLimit.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");var _=this._scrollMode=ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:_})}this._pagesCapability.promise.then(function(){u.eventBus.dispatch("pagesloaded",{source:u,pagesCount:d})},function(){}),this._onBeforeDraw=function(g){u._pages[g.pageNumber-1]},this._onAfterDraw=function(g){g.cssTransform||u._onePageRenderedCapability.settled||(u._onePageRenderedCapability.resolve({timestamp:g.timestamp}),u.eventBus._off("pagerendered",u._onAfterDraw),u._onAfterDraw=null,_classPrivateFieldGet(u,_onVisibilityChange)&&(document.removeEventListener("visibilitychange",_classPrivateFieldGet(u,_onVisibilityChange)),_classPrivateFieldSet(u,_onVisibilityChange,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([f,m]).then(function(g){var y=_slicedToArray(g,2),w=y[0],x=y[1];if(r===u.pdfDocument){u._firstPageCapability.resolve(w),u._optionalContentConfigPromise=v;var k=_classPrivateMethodGet(u,_initializePermissions,_initializePermissions2).call(u,x),S=k.annotationEditorMode,E=k.textLayerMode;if(S!==pdfExports.AnnotationEditorType.DISABLE){var T=S;r.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):isValidAnnotationEditorMode(T)?(u._annotationEditorUIManager=new pdfExports.AnnotationEditorUIManager(u.container,u.eventBus,r==null?void 0:r.annotationStorage),T!==pdfExports.AnnotationEditorType.NONE&&u._annotationEditorUIManager.updateMode(T)):console.error("Invalid AnnotationEditor mode: ".concat(T))}var M=_classPrivateMethodGet(u,_layerProperties,_layerProperties2).bind(u),I=u._scrollMode===ScrollMode.PAGE?null:u.viewer,F=u.currentScale,O=w.getViewport({scale:F*PixelsPerInch.PDF_TO_CSS_UNITS});O.rotation!==0&&(O.rotation=0),u.viewer.style.setProperty("--scale-factor",O.scale);for(var N=1;N<=d;++N){var D=new PDFPageView(_defineProperty$1({container:I,eventBus:u.eventBus,id:N,pageIndex:N-1,scale:F,messageHandler:u.messageHandler,annotationStore:u.annotationStore,annotations:o&&o[N-1]||null,annotationsAll:o,pagesPtr:s,defaultViewport:O.clone(),optionalContentConfigPromise:v,renderingQueue:u.renderingQueue,textLayerMode:E,imageResourcesPath:u.imageResourcesPath,renderer:typeof PDFJSDev>"u"||PDFJSDev.test("!PRODUCTION || GENERIC")?u.renderer:null,useOnlyCssZoom:u.useOnlyCssZoom,isOffscreenCanvasSupported:u.isOffscreenCanvasSupported,maxCanvasPixels:u.maxCanvasPixels,pageColors:u.pageColors,layerProperties:M,l10n:u.l10n,$t:u.$t,doc:u.doc},"messageHandler",u.messageHandler));u._pages.push(D)}var X=u._pages[0];X&&(X.setPdfPage(w),u.linkService.cachePageRef(1,w.ref)),u._scrollMode===ScrollMode.PAGE?_classPrivateMethodGet(u,_ensurePageViewVisible,_ensurePageViewVisible2).call(u):u._spreadMode!==SpreadMode.NONE&&u._updateSpreadMode(),_classPrivateMethodGet(u,_onePageRenderedOrForceFetch,_onePageRenderedOrForceFetch2).call(u).then(_asyncToGenerator(_regeneratorRuntime().mark(function U(){var Z,j,Q;return _regeneratorRuntime().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(u._annotationEditorUIManager&&u.eventBus.dispatch("annotationeditormodechanged",{source:u,mode:u._annotationEditorMode}),!(r.loadingParams.disableAutoFetch||d>PagesCountLimit.FORCE_LAZY_PAGE_INIT)){ve.next=4;break}return u._pagesCapability.resolve(),ve.abrupt("return");case 4:if(!((Z=d-1)<=0)){ve.next=8;break}return u._pagesCapability.resolve(),ve.abrupt("return");case 8:j=_regeneratorRuntime().mark(function Se(we){var oe;return _regeneratorRuntime().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(oe=r.getPage(we).then(function(q){var H=u._pages[we-1];H.pdfPage||H.setPdfPage(q),u.linkService.cachePageRef(we,q.ref),--Z==0&&u._pagesCapability.resolve()},function(q){console.error("Unable to get page ".concat(we," to initialize viewer"),q),--Z==0&&u._pagesCapability.resolve()}),we%PagesCountLimit.PAUSE_EAGER_PAGE_INIT!=0){ne.next=4;break}return ne.next=4,oe;case 4:case"end":return ne.stop()}},Se)}),Q=2;case 10:if(!(Q<=d)){ve.next=15;break}return ve.delegateYield(j(Q),"t0",12);case 12:++Q,ve.next=10;break;case 15:case"end":return ve.stop()}},U)}))),u.eventBus.dispatch("pagesinit",{source:u}),r.getMetadata().then(function(U){var Z=U.info;r===u.pdfDocument&&Z.Language&&(u.viewer.lang=Z.Language)})}}).catch(function(g){console.error("Unable to initialize viewer",g),u._pagesCapability.reject(g)})}}},{key:"setPageLabels",value:function(r){if(this.pdfDocument){r?Array.isArray(r)&&this.pdfDocument.numPages===r.length?this._pageLabels=r:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(var o=0,s=this._pages.length;o<s;o++){var u,d;this._pages[o].setPageLabel((u=(d=this._pageLabels)===null||d===void 0?void 0:d[o])!==null&&u!==void 0?u:null)}}}},{key:"renderAnnotation",value:function(r,o){this._pages[r.pageIndex]&&this._pages[r.pageIndex].compdfAnnotationLayer&&this._pages[r.pageIndex].compdfAnnotationLayer.renderAnnotation(r,o)}},{key:"_resetView",value:function(){this._pages=[],this._currentPageNumber=1,this._currentScale=UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,_classPrivateFieldSet(this,_buffer,new PDFPageViewBuffer(DEFAULT_CACHE_SIZE)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=pdfExports.createPromiseCapability(),this._onePageRenderedCapability=pdfExports.createPromiseCapability(),this._pagesCapability=pdfExports.createPromiseCapability(),this._scrollMode=ScrollMode.VERTICAL,this._previousScrollMode=ScrollMode.UNKNOWN,this._spreadMode=SpreadMode.NONE,_classPrivateFieldSet(this,_scrollModePageState,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),_classPrivateFieldGet(this,_onVisibilityChange)&&(document.removeEventListener("visibilitychange",_classPrivateFieldGet(this,_onVisibilityChange)),_classPrivateFieldSet(this,_onVisibilityChange,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(ENABLE_PERMISSIONS_CLASS)}},{key:"_scrollUpdate",value:function(){this.pagesCount!==0&&this.update()}},{key:"_setScaleUpdatePages",value:function(r,o,s){var u=this,d=s.noScroll,f=d!==void 0&&d,v=s.preset,m=v!==void 0&&v,_=s.drawingDelay,g=_===void 0?-1:_;if(this._currentScaleValue=o.toString(),_classPrivateMethodGet(this,_isSameScale,_isSameScale2).call(this,r))m&&this.eventBus.dispatch("scalechanging",{source:this,scale:r,presetValue:o});else{this.viewer.style.setProperty("--scale-factor",r*PixelsPerInch.PDF_TO_CSS_UNITS);var y=g>=0&&g<1e3;if(this.refresh(!0,{scale:r,drawingDelay:y?g:-1}),y&&_classPrivateFieldSet(this,_scaleTimeoutId,setTimeout(function(){_classPrivateFieldSet(u,_scaleTimeoutId,null),u.refresh(),u.exitPresentationMode=!1},g)),this._currentScale=r,!f){var w,x=this._currentPageNumber;!this._location||this.isInPresentationMode||this.isChangingPresentationMode||(x=this._location.pageNumber,w=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:x,destArray:w,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:r,presetValue:m?o:void 0})}}},{key:"_pageWidthScaleFactor",get:function(){return this._spreadMode!==SpreadMode.NONE&&this._scrollMode!==ScrollMode.HORIZONTAL?2:1}},{key:"_setScale",value:function(r,o){var s=parseFloat(r);if(s>0)o.preset=!1,this._setScaleUpdatePages(s,r,o);else{var u=this._pages[this._currentPageNumber-1];if(!u)return;var d=SCROLLBAR_PADDING,f=VERTICAL_PADDING;if(this.isInPresentationMode)d=f=4,this._spreadMode!==SpreadMode.NONE&&(d*=2);else if(this.removePageBorders)d=f=0;else if(this._scrollMode===ScrollMode.HORIZONTAL){var v=[f,d];d=v[0],f=v[1]}var m=(this.container.clientWidth-d)/u.width*u.scale/this._pageWidthScaleFactor,_=(this.container.clientHeight-f)/u.height*u.scale;switch(r){case"page-actual":s=1;break;case"page-width":s=m;break;case"page-height":s=_;break;case"page-fit":s=Math.min(m,_);break;case"auto":var g=isPortraitOrientation(u)?m:Math.min(_,m);s=Math.min(MAX_AUTO_SCALE,g);break;default:return void console.error('_setScale: "'.concat(r,'" is an unknown zoom value.'))}o.preset=!0,this._setScaleUpdatePages(s,r,o)}}},{key:"pageLabelToPageNumber",value:function(r){if(!this._pageLabels)return null;var o=this._pageLabels.indexOf(r);return o<0?null:o+1}},{key:"scrollPageIntoView",value:function(r){var o=r.pageNumber,s=r.destArray,u=s===void 0?null:s,d=r.allowNegativeOffset,f=d!==void 0&&d,v=r.ignoreDestinationZoom,m=v!==void 0&&v;if(this.pdfDocument){var _=Number.isInteger(o)&&this._pages[o-1];if(_)if(!this.isInPresentationMode&&u){var g,y,w=0,x=0,k=0,S=0,E=_.rotation%180!=0,T=(E?_.height:_.width)/_.scale/PixelsPerInch.PDF_TO_CSS_UNITS,M=(E?_.width:_.height)/_.scale/PixelsPerInch.PDF_TO_CSS_UNITS,I=0;switch(u[1].name){case"XYZ":w=u[2],x=u[3],I=u[4],w=w!==null?w:0,x=x!==null?x:M;break;case"Fit":case"FitB":I="page-fit";break;case"FitH":case"FitBH":I="page-width",(x=u[2])===null&&this._location?(w=this._location.left,x=this._location.top):(typeof x!="number"||x<0)&&(x=M);break;case"FitV":case"FitBV":w=u[2],k=T,S=M,I="page-height";break;case"FitR":w=u[2],x=u[3],k=u[4]-w,S=u[5]-x;var F=this.removePageBorders?0:SCROLLBAR_PADDING,O=this.removePageBorders?0:VERTICAL_PADDING;g=(this.container.clientWidth-F)/k/PixelsPerInch.PDF_TO_CSS_UNITS,y=(this.container.clientHeight-O)/S/PixelsPerInch.PDF_TO_CSS_UNITS,I=Math.min(Math.abs(g),Math.abs(y));break;default:return void console.error('scrollPageIntoView: "'.concat(u[1].name,'" is not a valid destination type.'))}if(m||(I&&I!==this._currentScale?this.currentScaleValue=I:this._currentScale===UNKNOWN_SCALE&&(this.currentScaleValue=DEFAULT_SCALE_VALUE)),I!=="page-fit"||u[4]){var N=[_.viewport.convertToViewportPoint(w,x),_.viewport.convertToViewportPoint(w+k,x+S)],D=Math.min(N[0][0],N[1][0]),X=Math.min(N[0][1],N[1][1]);f||(D=Math.max(D,0),X=Math.max(X,0)),_classPrivateMethodGet(this,_scrollIntoView,_scrollIntoView2).call(this,_,{left:D,top:X})}else _classPrivateMethodGet(this,_scrollIntoView,_scrollIntoView2).call(this,_)}else this._setCurrentPageNumber(o,!0);else console.error('scrollPageIntoView: "'.concat(o,'" is not a valid pageNumber parameter.'))}}},{key:"_updateLocation",value:function(r){var o=this._currentScale,s=this._currentScaleValue,u=parseFloat(s)===o?Math.round(1e4*o)/100:s,d=r.id,f=this._pages[d-1],v=this.container,m=f.getPagePoint(v.scrollLeft-r.x,v.scrollTop-r.y),_=Math.round(m[0]),g=Math.round(m[1]),y="#page=".concat(d);this.isInPresentationMode||(y+="&zoom=".concat(u,",").concat(_,",").concat(g)),this._location={pageNumber:d,scale:u,top:g,left:_,rotation:this._pagesRotation,pdfOpenParams:y}}},{key:"cleanupPages",value:function(){var r=this._getVisiblePages(),o=r.views;if(o.length!==0){for(var s=0;s<_classPrivateFieldGet(this,_renderedPagesView).length;s++){var u=_classPrivateFieldGet(this,_renderedPagesView)[s];r.ids.has(u.id)||u.destroy()}var d,f=this._spreadMode===SpreadMode.NONE&&(this._scrollMode===ScrollMode.PAGE||this._scrollMode===ScrollMode.VERTICAL),v=this._currentPageNumber,m=!1,_=_createForOfIteratorHelper(o);try{for(_.s();!(d=_.n()).done;){var g=d.value;if(g.percent<100)break;if(g.id===v&&f){m=!0;break}}}catch(y){_.e(y)}finally{_.f()}this._setCurrentPageNumber(m?v:o[0].id),this._updateLocation(r.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}}},{key:"update",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function r(){var o,s;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(_classPrivateFieldGet(this,_scaleTimeoutId)===null||this.isInPresentationMode||this.exitPresentationMode||(clearTimeout(_classPrivateFieldGet(this,_scaleTimeoutId)),_classPrivateFieldSet(this,_scaleTimeoutId,null)),o=this._getVisiblePages(),o.views.length!==0){u.next=5;break}return u.abrupt("return");case 5:return s=DEFAULT_CACHE_SIZE,_classPrivateFieldGet(this,_buffer).resize(s,o.ids),u.next=9,this.forceRendering(o);case 9:this.cleanupPages();case 10:case"end":return u.stop()}},r,this)})),function(){return n.apply(this,arguments)})},{key:"containsElement",value:function(r){return this.container.contains(r)}},{key:"focus",value:function(){this.container.focus()}},{key:"_isContainerRtl",get:function(){return getComputedStyle(this.container).direction==="rtl"}},{key:"isInPresentationMode",get:function(){return this.presentationModeState===PresentationModeState.FULLSCREEN}},{key:"isChangingPresentationMode",get:function(){return this.presentationModeState===PresentationModeState.CHANGING}},{key:"isHorizontalScrollbarEnabled",get:function(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}},{key:"isVerticalScrollbarEnabled",get:function(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}},{key:"_getVisiblePages",value:function(){var r=this._scrollMode===ScrollMode.PAGE?_classPrivateFieldGet(this,_scrollModePageState).pages:this._pages,o=this._scrollMode===ScrollMode.HORIZONTAL,s=o&&this._isContainerRtl;return getVisibleElements({scrollEl:this.container,views:r,sortByVisibility:!0,horizontal:o,rtl:s})}},{key:"isPageVisible",value:function(r){return!!this.pdfDocument&&(Number.isInteger(r)&&r>0&&r<=this.pagesCount?this._getVisiblePages().ids.has(r):(console.error('isPageVisible: "'.concat(r,'" is not a valid page.')),!1))}},{key:"isPageCached",value:function(r){if(!this.pdfDocument)return!1;if(!(Number.isInteger(r)&&r>0&&r<=this.pagesCount))return console.error('isPageCached: "'.concat(r,'" is not a valid page.')),!1;var o=this._pages[r-1];return _classPrivateFieldGet(this,_buffer).has(o)}},{key:"cleanup",value:function(){var r,o=_createForOfIteratorHelper(this._pages);try{for(o.s();!(r=o.n()).done;){var s=r.value;s.renderingState!==RenderingStates$1.FINISHED&&s.reset()}}catch(u){o.e(u)}finally{o.f()}}},{key:"_cancelRendering",value:function(){var r,o=_createForOfIteratorHelper(this._pages);try{for(o.s();!(r=o.n()).done;)r.value.cancelRendering()}catch(s){o.e(s)}finally{o.f()}}},{key:"forceRendering",value:function(){var r=_asyncToGenerator(_regeneratorRuntime().mark(function o(s){var u,d,f,v,m,_=this;return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(u=s||this._getVisiblePages(),!_classPrivateFieldGet(this,_rendering)){g.next=4;break}return _classPrivateFieldGet(this,_cacheTask).push({visiblePages:u}),g.abrupt("return");case 4:_classPrivateFieldSet(this,_rendering,!0),d=[],f=_regeneratorRuntime().mark(function y(){var w;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if((w=u.views[v].view).renderingState!==RenderingStates$1.FINISHED||!w.canvas){x.next=5;break}return x.abrupt("return","continue");case 5:w.renderingState===RenderingStates$1.FINISHED&&w.reset();case 6:return x.next=8,_classPrivateMethodGet(_,_ensurePdfPageLoaded$1,_ensurePdfPageLoaded2$1).call(_,w).then(function(){d.push(w.draw()),_classPrivateFieldGet(_,_renderedPagesView).push(w)});case 8:case"end":return x.stop()}},y)}),v=0;case 8:if(!(v<u.views.length)){g.next=16;break}return g.delegateYield(f(),"t0",10);case 10:if(g.t0!=="continue"){g.next=13;break}return g.abrupt("continue",13);case 13:v++,g.next=8;break;case 16:return g.next=18,Promise.all(d);case 18:if(_classPrivateFieldSet(this,_rendering,!1),!_classPrivateFieldGet(this,_cacheTask).length){g.next=25;break}return m=_classPrivateFieldGet(this,_cacheTask).pop(),_classPrivateFieldSet(this,_cacheTask,[]),g.next=24,this.forceRendering(m.visiblePages);case 24:return g.abrupt("return",!0);case 25:return g.abrupt("return",!1);case 26:case"end":return g.stop()}},o,this)}));return function(o){return r.apply(this,arguments)}}()},{key:"hasEqualPageSizes",get:function(){for(var r=this._pages[0],o=1,s=this._pages.length;o<s;++o){var u=this._pages[o];if(u.width!==r.width||u.height!==r.height)return!1}return!0}},{key:"getPagesOverview",value:function(){var r=this;return this._pages.map(function(o){var s=o.pdfPage.getViewport({scale:1});return!r.enablePrintAutoRotate||isPortraitOrientation(s)?{width:s.width,height:s.height,rotation:s.rotation}:{width:s.height,height:s.width,rotation:(s.rotation-90)%360}})}},{key:"optionalContentConfigPromise",get:function(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)},set:function(r){if(!(r instanceof Promise))throw new Error("Invalid optionalContentConfigPromise: ".concat(r));this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=r,this.refresh(!1,{optionalContentConfigPromise:r}))}},{key:"scrollMode",get:function(){return this._scrollMode},set:function(r){if(this._scrollMode!==r){if(!isValidScrollMode(r))throw new Error("Invalid scroll mode: ".concat(r));this.pagesCount>PagesCountLimit.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=r,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:r}),this._updateScrollMode(this._currentPageNumber))}}},{key:"_updateScrollMode",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,o=this._scrollMode,s=this.viewer;s.classList.toggle("scrollHorizontal",o===ScrollMode.HORIZONTAL),s.classList.toggle("scrollWrapped",o===ScrollMode.WRAPPED),this.pdfDocument&&r&&(o===ScrollMode.PAGE?_classPrivateMethodGet(this,_ensurePageViewVisible,_ensurePageViewVisible2).call(this):this._previousScrollMode===ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(r,!0),this.update())}},{key:"spreadMode",get:function(){return this._spreadMode},set:function(r){if(this._spreadMode!==r){if(!isValidSpreadMode(r))throw new Error("Invalid spread mode: ".concat(r));this._spreadMode=r,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:r}),this._updateSpreadMode(this._currentPageNumber)}}},{key:"_updateSpreadMode",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(this.pdfDocument){var o=this.viewer,s=this._pages;if(this._scrollMode===ScrollMode.PAGE)_classPrivateMethodGet(this,_ensurePageViewVisible,_ensurePageViewVisible2).call(this);else if(o.textContent="",this._spreadMode===SpreadMode.NONE){var u,d=_createForOfIteratorHelper(this._pages);try{for(d.s();!(u=d.n()).done;){var f=u.value;o.append(f.div)}}catch(y){d.e(y)}finally{d.f()}}else for(var v=this._spreadMode-1,m=null,_=0,g=s.length;_<g;++_)m===null?((m=document.createElement("div")).className="spread",o.append(m)):_%2===v&&(m=m.cloneNode(!1),o.append(m)),m.append(s[_].div);r&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(r,!0),this.update())}}},{key:"_getPageAdvance",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];switch(this._scrollMode){case ScrollMode.WRAPPED:var s,u=this._getVisiblePages().views,d=new Map,f=_createForOfIteratorHelper(u);try{for(f.s();!(s=f.n()).done;){var v=s.value,m=v.id,_=v.y,g=v.percent,y=v.widthPercent;if(!(g===0||y<100)){var w=d.get(_);w||d.set(_,w||(w=[])),w.push(m)}}}catch(H){f.e(H)}finally{f.f()}var x,k=_createForOfIteratorHelper(d.values());try{for(k.s();!(x=k.n()).done;){var S=x.value,E=S.indexOf(r);if(E!==-1){var T=S.length;if(T===1)break;if(o)for(var M=E-1;M>=0;M--){var I=S[M],F=S[M+1]-1;if(I<F)return r-F}else for(var O=E+1,N=T;O<N;O++){var D=S[O],X=S[O-1]+1;if(D>X)return X-r}if(o){var U=S[0];if(U<r)return r-U+1}else{var Z=S[T-1];if(Z>r)return Z-r+1}break}}}catch(H){k.e(H)}finally{k.f()}break;case ScrollMode.HORIZONTAL:break;case ScrollMode.PAGE:case ScrollMode.VERTICAL:if(this._spreadMode===SpreadMode.NONE)break;var j=this._spreadMode-1;if(o&&r%2!==j||!o&&r%2===j)break;var Q,ve=o?r-1:r+1,Se=_createForOfIteratorHelper(this._getVisiblePages().views);try{for(Se.s();!(Q=Se.n()).done;){var we=Q.value,oe=we.id,ne=we.percent,q=we.widthPercent;if(oe===ve){if(ne>0&&q===100)return 2;break}}}catch(H){Se.e(H)}finally{Se.f()}}return 1}},{key:"nextPage",value:function(){var r=this._currentPageNumber,o=this.pagesCount;if(r>=o)return!1;var s=this._getPageAdvance(r,!1)||1;return this.currentPageNumber=Math.min(r+s,o),!0}},{key:"previousPage",value:function(){var r=this._currentPageNumber;if(r<=1)return!1;var o=this._getPageAdvance(r,!0)||1;return this.currentPageNumber=Math.max(r-o,1),!0}},{key:"increaseScale",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(typeof r=="number"&&(console.error("The `increaseScale` method-signature was updated, please use an object instead."),r={steps:r}),this.pdfDocument){r||(r=Object.create(null));var o=this._currentScale;if(r.scaleFactor>1)o=Math.min(MAX_SCALE,Math.round(o*r.scaleFactor*100)/100);else{var s,u=(s=r.steps)!==null&&s!==void 0?s:1;do o=(o*DEFAULT_SCALE_DELTA).toFixed(2),o=Math.ceil(10*o)/10,o=Math.min(MAX_SCALE,o);while(--u>0&&o<MAX_SCALE)}r.noScroll=!0,this._setScale(o,r),_classPrivateFieldSet(this,_rendering,!1)}}},{key:"decreaseScale",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(typeof r=="number"&&(console.error("The `decreaseScale` method-signature was updated, please use an object instead."),r={steps:r}),this.pdfDocument){r||(r=Object.create(null));var o=this._currentScale;if(r.scaleFactor>0&&r.scaleFactor<1)o=Math.max(MIN_SCALE,Math.round(o*r.scaleFactor*100)/100);else{var s,u=(s=r.steps)!==null&&s!==void 0?s:1;do o=(o/DEFAULT_SCALE_DELTA).toFixed(2),o=Math.floor(10*o)/10,o=Math.max(MIN_SCALE,o);while(--u>0&&o>MIN_SCALE)}r.noScroll=!0,this._setScale(o,r),_classPrivateFieldSet(this,_rendering,!1)}}},{key:"resize",value:function(r){this._setScale(r,{noScroll:!1,drawingDelay:400}),_classPrivateFieldSet(this,_rendering,!1)}},{key:"annotationEditorMode",get:function(){return this._annotationEditorUIManager?this._annotationEditorMode:pdfExports.AnnotationEditorType.DISABLE},set:function(r){if(!this._annotationEditorUIManager)throw new Error("The AnnotationEditor is not enabled.");if(this._annotationEditorMode!==r){if(!isValidAnnotationEditorMode(r))throw new Error("Invalid AnnotationEditor mode: ".concat(r));this.pdfDocument&&(this._annotationEditorMode=r,this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:r}),this._annotationEditorUIManager.updateMode(r))}}},{key:"refresh",value:function(){var r=arguments.length>0&&arguments[0]!==void 0&&arguments[0],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object.create(null);if(this.pdfDocument){var s,u=_createForOfIteratorHelper(this._pages);try{for(u.s();!(s=u.n()).done;)s.value.update(o)}catch(d){u.e(d)}finally{u.f()}_classPrivateFieldGet(this,_scaleTimeoutId)===null||this.isInPresentationMode||this.exitPresentationMode||(clearTimeout(_classPrivateFieldGet(this,_scaleTimeoutId)),_classPrivateFieldSet(this,_scaleTimeoutId,null)),r||this.update()}}},{key:"setFontFile",value:function(r){var o,s=_createForOfIteratorHelper(this._pages);try{for(s.s();!(o=s.n()).done;)o.value.fontFile=r}catch(u){s.e(u)}finally{s.f()}}}]),e}();function _layerProperties2(){var e=this;return{get annotationEditorUIManager(){return e._annotationEditorUIManager},get annotationStorage(){var n;return(n=e.pdfDocument)===null||n===void 0?void 0:n.annotationStorage},get fieldObjectsPromise(){var n;return(n=e.pdfDocument)===null||n===void 0?void 0:n.getFieldObjects()},get hasJSActionsPromise(){var n;return(n=e.pdfDocument)===null||n===void 0?void 0:n.hasJSActions()},get linkService(){return e.linkService}}}function _initializePermissions2(e){var n={annotationEditorMode:this._annotationEditorMode,textLayerMode:this.textLayerMode};return e&&(e.includes(pdfExports.PermissionFlag.COPY)||this.viewer.classList.add(ENABLE_PERMISSIONS_CLASS),e.includes(pdfExports.PermissionFlag.MODIFY_CONTENTS)||(n.annotationEditorMode=pdfExports.AnnotationEditorType.DISABLE),e.includes(pdfExports.PermissionFlag.MODIFY_ANNOTATIONS)||e.includes(pdfExports.PermissionFlag.FILL_INTERACTIVE_FORMS)||(n.annotationMode=pdfExports.AnnotationMode.ENABLE)),n}function _onePageRenderedOrForceFetch2(){var e=this;if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();var n=new Promise(function(r){_classPrivateFieldSet(e,_onVisibilityChange,function(){document.visibilityState==="hidden"&&(r(),document.removeEventListener("visibilitychange",_classPrivateFieldGet(e,_onVisibilityChange)),_classPrivateFieldSet(e,_onVisibilityChange,null))}),document.addEventListener("visibilitychange",_classPrivateFieldGet(e,_onVisibilityChange))});return Promise.race([this._onePageRenderedCapability.promise,n])}function _ensurePageViewVisible2(){if(this._scrollMode!==ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");var e=this._currentPageNumber,n=_classPrivateFieldGet(this,_scrollModePageState),r=this.viewer;if(r.textContent="",n.pages.length=0,this._spreadMode!==SpreadMode.NONE||this.isInPresentationMode){var o=new Set,s=this._spreadMode-1;s===-1?o.add(e-1):e%2!==s?(o.add(e-1),o.add(e)):(o.add(e-2),o.add(e-1));var u=document.createElement("div");if(u.className="spread",this.isInPresentationMode){var d=document.createElement("div");d.className="dummyPage",u.append(d)}var f,v=_createForOfIteratorHelper(o);try{for(v.s();!(f=v.n()).done;){var m=f.value,_=this._pages[m];_&&(u.append(_.div),n.pages.push(_))}}catch(y){v.e(y)}finally{v.f()}r.append(u)}else{var g=this._pages[e-1];r.append(g.div),n.pages.push(g)}n.scrollDown=e>=n.previousPageNumber,n.previousPageNumber=e}function _scrollIntoView2(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(e){var r=e.div,o=e.id;if(this._currentPageNumber!==o&&this._setCurrentPageNumber(o),this._scrollMode===ScrollMode.PAGE&&(_classPrivateMethodGet(this,_ensurePageViewVisible,_ensurePageViewVisible2).call(this),this.update()),!n&&!this.isInPresentationMode){var s=r.offsetLeft+r.clientLeft,u=s+r.clientWidth,d=this.container,f=d.scrollLeft,v=d.clientWidth;(this._scrollMode===ScrollMode.HORIZONTAL||s<f||u>f+v)&&(n={left:0,top:0})}scrollIntoView(r,n),!this._currentScaleValue&&this._location&&(this._location=null)}}function _isSameScale2(e){return e===this._currentScale||Math.abs(e-this._currentScale)<1e-15}function _resetCurrentPageView2(){var e=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,{noScroll:!0}),_classPrivateMethodGet(this,_scrollIntoView,_scrollIntoView2).call(this,e)}function _ensurePdfPageLoaded2$1(e){return _ensurePdfPageLoaded3$1.apply(this,arguments)}function _ensurePdfPageLoaded3$1(){return(_ensurePdfPageLoaded3$1=_asyncToGenerator(_regeneratorRuntime().mark(function e(n){var r,o,s;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!n.pdfPage){u.next=2;break}return u.abrupt("return",n.pdfPage);case 2:return u.prev=2,u.next=5,this.pdfDocument.getPage(n.id);case 5:return s=u.sent,n.pdfPage||n.setPdfPage(s),(r=(o=this.linkService)._cachedPageNumber)!==null&&r!==void 0&&r.call(o,s.ref)||this.linkService.cachePageRef(n.id,s.ref),u.abrupt("return",s);case 11:return u.prev=11,u.t0=u.catch(2),console.error("Unable to get page for page view",u.t0),u.abrupt("return",null);case 15:case"end":return u.stop()}},e,this,[[2,11]])}))).apply(this,arguments)}var DRAW_UPSCALE_FACTOR=2,MAX_NUM_SCALING_STEPS=3,THUMBNAIL_CANVAS_BORDER_WIDTH=1,THUMBNAIL_WIDTH=120,TempImageFactory=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getCanvas",value:function(n,r){var o=_classStaticPrivateFieldSpecGet(this,e,_tempCanvas)||_classStaticPrivateFieldSpecSet(this,e,_tempCanvas,document.createElement("canvas"));o.width=n,o.height=r;var s=o.getContext("2d",{alpha:!1});return s.save(),s.fillStyle="rgb(255, 255, 255)",s.fillRect(0,0,n,r),s.restore(),[o,o.getContext("2d")]}},{key:"destroyCanvas",value:function(){var n=_classStaticPrivateFieldSpecGet(this,e,_tempCanvas);n&&(n.width=0,n.height=0),_classStaticPrivateFieldSpecSet(this,e,_tempCanvas,null)}}]),e}(),_tempCanvas={writable:!0,value:null},PDFThumbnailView=function(){function e(n){var r=n.container,o=n.id,s=n.defaultViewport,u=n.linkService,d=n.renderingQueue,f=n.pageColors;_classCallCheck(this,e),this.id=o,this.renderingId="thumbnail"+o,this.pageLabel=null,this.pdfPage=null,this.rotation=0,this.viewport=s,this.pdfPageRotate=s.rotation,this.pageColors=f||null,this.linkService=u,this.renderingQueue=d,this.renderTask=null,this.renderingState=RenderingStates$1.INITIAL,this.resume=null;var v=this.viewport.width,m=v/this.viewport.height;this.canvasWidth=THUMBNAIL_WIDTH,this.canvasHeight=this.canvasWidth/m|0,this.scale=this.canvasWidth/v;var _=document.createElement("div");_.onclick=function(){return u.goToPage(o),!1},this.anchor=_;var g=document.createElement("div");g.className="thumbnail",g.setAttribute("data-page-number",this.id),this.div=g;var y=document.createElement("div");y.className="thumbnailSelectionRing";var w=2*THUMBNAIL_CANVAS_BORDER_WIDTH;y.style.width=this.canvasWidth+w+"px",y.style.height=this.canvasHeight+w+"px",this.ring=y,g.append(y);var x=document.createElement("div");x.className="box-thumbnail",x.textContent=this.id,g.append(x),_.append(g),r.append(_)}return _createClass(e,[{key:"setPdfPage",value:function(n){this.pdfPage=n,this.pdfPageRotate=n.rotate;var r=(this.rotation+this.pdfPageRotate)%360;this.viewport=n.getViewport({scale:1,rotation:r}),this.reset()}},{key:"reset",value:function(){this.cancelRendering(),this.renderingState=RenderingStates$1.INITIAL;var n=this.viewport.width,r=n/this.viewport.height;this.canvasHeight=this.canvasWidth/r|0,this.scale=this.canvasWidth/n,this.div.removeAttribute("data-loaded");var o=this.ring;o.textContent="";var s=2*THUMBNAIL_CANVAS_BORDER_WIDTH;o.style.width=this.canvasWidth+s+"px",o.style.height=this.canvasHeight+s+"px",this.canvas&&(this.canvas.width=0,this.canvas.height=0,delete this.canvas),this.image&&(this.image.removeAttribute("src"),delete this.image)}},{key:"update",value:function(n){var r=n.rotation,o=r===void 0?null:r;typeof o=="number"&&(this.rotation=o);var s=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:s}),this.reset()}},{key:"cancelRendering",value:function(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.resume=null}},{key:"_getPageDrawContext",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=document.createElement("canvas"),o=r.getContext("2d",{alpha:!1}),s=new OutputScale;return r.width=n*this.canvasWidth*s.sx|0,r.height=n*this.canvasHeight*s.sy|0,{ctx:o,canvas:r,transform:s.scaled?[s.sx,0,0,s.sy,0,0]:null}}},{key:"_convertCanvasToImage",value:function(n){if(this.renderingState!==RenderingStates$1.FINISHED)throw new Error("_convertCanvasToImage: Rendering has not finished.");var r=this._reduceImage(n),o=document.createElement("img");o.className="thumbnailImage",this._thumbPageCanvas.then(function(s){o.setAttribute("aria-label",s)}),o.style.width=this.canvasWidth+"px",o.style.height=this.canvasHeight+"px",o.src=r.toDataURL(),this.image=o,this.div.setAttribute("data-loaded",!0),this.ring.append(o),r.width=0,r.height=0}},{key:"draw",value:function(){var n=this;if(this.renderingState!==RenderingStates$1.INITIAL)return console.error("Must be in new state before drawing"),Promise.resolve();var r=this.pdfPage;if(!r)return this.renderingState=RenderingStates$1.FINISHED,Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=RenderingStates$1.RUNNING;var o=function(){var _=_asyncToGenerator(_regeneratorRuntime().mark(function g(){var y,w=arguments;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(y=w.length>0&&w[0]!==void 0?w[0]:null,v===n.renderTask&&(n.renderTask=null),!(y instanceof pdfExports.RenderingCancelledException)){x.next=4;break}return x.abrupt("return");case 4:if(n.renderingState=RenderingStates$1.FINISHED,n._convertCanvasToImage(d),!y){x.next=8;break}throw y;case 8:case"end":return x.stop()}},g)}));return function(){return _.apply(this,arguments)}}(),s=this._getPageDrawContext(DRAW_UPSCALE_FACTOR),u=s.ctx,d=s.canvas,f={canvasContext:u,transform:s.transform,viewport:this.viewport.clone({scale:DRAW_UPSCALE_FACTOR*this.scale}),pageColors:this.pageColors},v=this.renderTask=r.render(f);v.onContinue=function(_){if(!n.renderingQueue.isHighestPriority(n))return n.renderingState=RenderingStates$1.PAUSED,void(n.resume=function(){n.renderingState=RenderingStates$1.RUNNING,_()});_()};var m=v.promise.then(function(){return o(null)},function(_){return o(_)});return m.finally(function(){var _;d.width=0,d.height=0,n.linkService.isPageCached(n.id)||(_=n.pdfPage)===null||_===void 0||_.cleanup()}),m}},{key:"setImage",value:function(n){if(this.renderingState===RenderingStates$1.INITIAL){var r=n.thumbnailCanvas,o=n.pdfPage,s=n.scale;r&&(this.pdfPage||this.setPdfPage(o),s<this.scale||(this.renderingState=RenderingStates$1.FINISHED,this._convertCanvasToImage(r)))}}},{key:"_reduceImage",value:function(n){var r=this._getPageDrawContext(),o=r.ctx,s=r.canvas;if(n.width<=2*s.width)return o.drawImage(n,0,0,n.width,n.height,0,0,s.width,s.height),s;for(var u=s.width<<MAX_NUM_SCALING_STEPS,d=s.height<<MAX_NUM_SCALING_STEPS,f=_slicedToArray(TempImageFactory.getCanvas(u,d),2),v=f[0],m=f[1];u>n.width||d>n.height;)u>>=1,d>>=1;for(m.drawImage(n,0,0,n.width,n.height,0,0,u,d);u>2*s.width;)m.drawImage(v,0,0,u,d,0,0,u>>1,d>>1),u>>=1,d>>=1;return o.drawImage(v,0,0,u,d,0,0,s.width,s.height),s}},{key:"_thumbPageTitle",get:function(){var n;return Promise.resolve("Page ".concat((n=this.pageLabel)!==null&&n!==void 0?n:this.id))}},{key:"_thumbPageCanvas",get:function(){var n;return Promise.resolve("Thumbnail of Page ".concat((n=this.pageLabel)!==null&&n!==void 0?n:this.id))}},{key:"setPageLabel",value:function(n){var r=this;this.pageLabel=typeof n=="string"?n:null,this._thumbPageTitle.then(function(o){r.anchor.title=o}),this.renderingState===RenderingStates$1.FINISHED&&this._thumbPageCanvas.then(function(o){var s;(s=r.image)===null||s===void 0||s.setAttribute("aria-label",o)})}}]),e}(),THUMBNAIL_SCROLL_MARGIN=-19,THUMBNAIL_SELECTED_CLASS="selected",_ensurePdfPageLoaded=new WeakSet,_getScrollAhead=new WeakSet,PDFThumbnailViewer=function(){function e(n){var r=n.container,o=n.renderingQueue,s=n.linkService;_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_getScrollAhead),_classPrivateMethodInitSpec(this,_ensurePdfPageLoaded),this.container=r,this.linkService=s,this.renderingQueue=o,this.pageColors=null,typeof PDFJSDev<"u"&&PDFJSDev.test("MOZCENTRAL")||!this.pageColors||CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground)||((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFThumbnailViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.scroll=watchScroll(this.container,this._scrollUpdated.bind(this)),this._resetView()}return _createClass(e,[{key:"_scrollUpdated",value:function(){this.renderingQueue.renderHighestPriority()}},{key:"getThumbnail",value:function(n){return this._thumbnails[n]}},{key:"_getVisibleThumbs",value:function(){return getVisibleElements({scrollEl:this.container,views:this._thumbnails})}},{key:"scrollThumbnailIntoView",value:function(n){if(this.pdfDocument){var r=this._thumbnails[n-1];if(r){n!==this._currentPageNumber&&(this._thumbnails[this._currentPageNumber-1].div.classList.remove(THUMBNAIL_SELECTED_CLASS),r.div.classList.add(THUMBNAIL_SELECTED_CLASS));var o=this._getVisibleThumbs(),s=o.first,u=o.last,d=o.views;if(d.length>0){var f=!1;if(n<=s.id||n>=u.id)f=!0;else{var v,m=_createForOfIteratorHelper(d);try{for(m.s();!(v=m.n()).done;){var _=v.value,g=_.id,y=_.percent;if(g===n){f=y<100;break}}}catch(w){m.e(w)}finally{m.f()}}this._scrollUpdated(),f&&scrollIntoView(r.div,{top:THUMBNAIL_SCROLL_MARGIN})}this._currentPageNumber=n}else console.warn('scrollThumbnailIntoView: Invalid "pageNumber" parameter.')}}},{key:"pagesRotation",get:function(){return this._pagesRotation},set:function(n){if(!isValidRotation(n))throw new Error("Invalid thumbnails rotation angle.");if(this.pdfDocument&&this._pagesRotation!==n){this._pagesRotation=n;var r,o={rotation:n},s=_createForOfIteratorHelper(this._thumbnails);try{for(s.s();!(r=s.n()).done;)r.value.update(o)}catch(u){s.e(u)}finally{s.f()}}}},{key:"cleanup",value:function(){var n,r=_createForOfIteratorHelper(this._thumbnails);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.renderingState!==RenderingStates$1.FINISHED&&o.reset()}}catch(s){r.e(s)}finally{r.f()}TempImageFactory.destroyCanvas()}},{key:"_resetView",value:function(){this._thumbnails=[],this._currentPageNumber=1,this._pageLabels=null,this._pagesRotation=0,this.container.textContent=""}},{key:"setDocument",value:function(n){var r=this;this.pdfDocument&&(this._cancelRendering(),this._resetView()),this.pdfDocument=n,n&&n.getPage(1).then(function(o){for(var s,u=n.numPages,d=o.getViewport({scale:1}),f=1;f<=u;++f){var v=new PDFThumbnailView({container:r.container,id:f,defaultViewport:d.clone(),linkService:r.linkService,renderingQueue:r.renderingQueue,pageColors:r.pageColors});r._thumbnails.push(v)}(s=r._thumbnails[0])===null||s===void 0||s.setPdfPage(o),r._thumbnails[r._currentPageNumber-1].div.classList.add(THUMBNAIL_SELECTED_CLASS)}).catch(function(o){console.error("Unable to initialize thumbnail viewer",o)})}},{key:"_cancelRendering",value:function(){var n,r=_createForOfIteratorHelper(this._thumbnails);try{for(r.s();!(n=r.n()).done;)n.value.cancelRendering()}catch(o){r.e(o)}finally{r.f()}}},{key:"setPageLabels",value:function(n){if(this.pdfDocument){n?Array.isArray(n)&&this.pdfDocument.numPages===n.length?this._pageLabels=n:(this._pageLabels=null,console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")):this._pageLabels=null;for(var r=0,o=this._thumbnails.length;r<o;r++){var s,u;this._thumbnails[r].setPageLabel((s=(u=this._pageLabels)===null||u===void 0?void 0:u[r])!==null&&s!==void 0?s:null)}}}},{key:"forceRendering",value:function(){var n=this,r=this._getVisibleThumbs(),o=_classPrivateMethodGet(this,_getScrollAhead,_getScrollAhead2).call(this,r),s=this.renderingQueue.getHighestPriority(r,this._thumbnails,o);return!!s&&(_classPrivateMethodGet(this,_ensurePdfPageLoaded,_ensurePdfPageLoaded2).call(this,s).then(function(){n.renderingQueue.renderView(s)}),!0)}}]),e}();function _ensurePdfPageLoaded2(e){return _ensurePdfPageLoaded3.apply(this,arguments)}function _ensurePdfPageLoaded3(){return(_ensurePdfPageLoaded3=_asyncToGenerator(_regeneratorRuntime().mark(function e(n){var r;return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!n.pdfPage){o.next=2;break}return o.abrupt("return",n.pdfPage);case 2:return o.prev=2,o.next=5,this.pdfDocument.getPage(n.id);case 5:return r=o.sent,n.pdfPage||n.setPdfPage(r),o.abrupt("return",r);case 10:return o.prev=10,o.t0=o.catch(2),console.error("Unable to get page for thumb view",o.t0),o.abrupt("return",null);case 14:case"end":return o.stop()}},e,this,[[2,10]])}))).apply(this,arguments)}function _getScrollAhead2(e){var n,r;return((n=e.first)===null||n===void 0?void 0:n.id)===1||((r=e.last)===null||r===void 0?void 0:r.id)!==this._thumbnails.length&&this.scroll.down}var CLEANUP_TIMEOUT=3e4,PDFRenderingQueue=function(){function e(){_classCallCheck(this,e),this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}var n;return _createClass(e,[{key:"setViewer",value:function(r){this.pdfViewer=r}},{key:"setThumbnailViewer",value:function(r){this.pdfThumbnailViewer=r}},{key:"isHighestPriority",value:function(r){return this.highestPriorityPage===r.renderingId}},{key:"hasViewer",value:function(){return!!this.pdfViewer}},{key:"renderHighestPriority",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function r(o){var s;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),u.next=3,this.pdfViewer.forceRendering(o);case 3:if(!u.sent){u.next=5;break}return u.abrupt("return");case 5:if(!this.isThumbnailViewEnabled||(s=this.pdfThumbnailViewer)===null||s===void 0||!s.forceRendering()){u.next=7;break}return u.abrupt("return");case 7:if(!this.printing){u.next=9;break}return u.abrupt("return");case 9:this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),CLEANUP_TIMEOUT));case 10:case"end":return u.stop()}},r,this)})),function(r){return n.apply(this,arguments)})},{key:"getHighestPriority",value:function(r,o,s){var u=arguments.length>3&&arguments[3]!==void 0&&arguments[3],d=r.views,f=d.length;if(f===0)return null;for(var v=0;v<f;v++){var m=d[v].view;if(!this.isViewFinished(m))return m}var _=r.first.id,g=r.last.id;if(g-_+1>f)for(var y=r.ids,w=1,x=g-_;w<x;w++){var k=s?_+w:g-w;if(!y.has(k)){var S=o[k-1];if(!this.isViewFinished(S))return S}}var E=s?g:_-2,T=o[E];return T&&!this.isViewFinished(T)||u&&(T=o[E+=s?1:-1])&&!this.isViewFinished(T)?T:null}},{key:"isViewFinished",value:function(r){return r.renderingState===RenderingStates.FINISHED}},{key:"renderView",value:function(r){var o=this;switch(r.renderingState){case RenderingStates.FINISHED:return!1;case RenderingStates.PAUSED:this.highestPriorityPage=r.renderingId,r.resume();break;case RenderingStates.RUNNING:this.highestPriorityPage=r.renderingId;break;case RenderingStates.INITIAL:this.highestPriorityPage=r.renderingId,r.draw().finally(function(){o.renderHighestPriority()})}return!0}}]),e}(),UI_NOTIFICATION_CLASS="pdfSidebarNotification",_dispatchEvent$1=new WeakSet,_forceRendering=new WeakSet,_updateThumbnailViewer=new WeakSet,_showUINotification=new WeakSet,_hideUINotification=new WeakSet,_addEventListeners$1=new WeakSet,PDFSidebar=function(){function e(n){var r=n.elements,o=n.pdfViewer,s=n.pdfThumbnailViewer,u=n.eventBus,d=n.l10n;_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_addEventListeners$1),_classPrivateMethodInitSpec(this,_hideUINotification),_classPrivateMethodInitSpec(this,_showUINotification),_classPrivateMethodInitSpec(this,_updateThumbnailViewer),_classPrivateMethodInitSpec(this,_forceRendering),_classPrivateMethodInitSpec(this,_dispatchEvent$1),this.isOpen=!1,this.active=SidebarView.THUMBS,this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,this.onToggled=null,this.pdfViewer=o,this.pdfThumbnailViewer=s,this.outerContainer=r.outerContainer,this.sidebarContainer=r.sidebarContainer,this.toggleButton=r.toggleButton,this.thumbnailButton=r.thumbnailButton,this.outlineButton=r.outlineButton,this.attachmentsButton=r.attachmentsButton,this.layersButton=r.layersButton,this.thumbnailView=r.thumbnailView,this.outlineView=r.outlineView,this.attachmentsView=r.attachmentsView,this.layersView=r.layersView,this._outlineOptionsContainer=r.outlineOptionsContainer,this._currentOutlineItemButton=r.currentOutlineItemButton,this.eventBus=u,this.l10n=d}return _createClass(e,[{key:"reset",value:function(){this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,_classPrivateMethodGet(this,_hideUINotification,_hideUINotification2).call(this,!0),this.switchView(SidebarView.THUMBS)}},{key:"visibleView",get:function(){return this.isOpen?this.active:SidebarView.NONE}},{key:"setInitialView",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:SidebarView.NONE;this.isInitialViewSet||(this.isInitialViewSet=!0,n!==SidebarView.NONE&&n!==SidebarView.UNKNOWN?(this.switchView(n,!0),this.isInitialEventDispatched||_classPrivateMethodGet(this,_dispatchEvent$1,_dispatchEvent2$1).call(this)):_classPrivateMethodGet(this,_dispatchEvent$1,_dispatchEvent2$1).call(this))}},{key:"switchView",value:function(n){var r,o,s,u,d,f,v,m,_,g,y,w,x,k=arguments.length>1&&arguments[1]!==void 0&&arguments[1],S=n!==this.active,E=!1;switch(n){case SidebarView.NONE:return void(this.isOpen&&this.close());case SidebarView.THUMBS:this.isOpen&&S&&(E=!0);break;case SidebarView.ATTACHMENTS:if(this.attachmentsButton.disabled)return;break;case SidebarView.OUTLINE:case SidebarView.LAYERS:break;default:return void console.error('PDFSidebar.switchView: "'.concat(n,'" is not a valid view.'))}this.active=n;var T=n===SidebarView.THUMBS,M=n===SidebarView.OUTLINE,I=n===SidebarView.ATTACHMENTS,F=n===SidebarView.LAYERS;(r=this.thumbnailButton)===null||r===void 0||r.classList.toggle("toggled",T),(o=this.outlineButton)===null||o===void 0||o.classList.toggle("toggled",M),(s=this.attachmentsButton)===null||s===void 0||s.classList.toggle("toggled",I),(u=this.layersButton)===null||u===void 0||u.classList.toggle("toggled",F),(d=this.thumbnailButton)===null||d===void 0||d.setAttribute("aria-checked",T),(f=this.outlineButton)===null||f===void 0||f.setAttribute("aria-checked",M),(v=this.attachmentsButton)===null||v===void 0||v.setAttribute("aria-checked",I),(m=this.layersButton)===null||m===void 0||m.setAttribute("aria-checked",F),(_=this.thumbnailView)===null||_===void 0||_.classList.toggle("hidden",!T),(g=this.outlineView)===null||g===void 0||g.classList.toggle("hidden",!M),(y=this.attachmentsView)===null||y===void 0||y.classList.toggle("hidden",!I),(w=this.layersView)===null||w===void 0||w.classList.toggle("hidden",!F),(x=this._outlineOptionsContainer)===null||x===void 0||x.classList.toggle("hidden",!M),!k||this.isOpen?(E&&(_classPrivateMethodGet(this,_updateThumbnailViewer,_updateThumbnailViewer2).call(this),_classPrivateMethodGet(this,_forceRendering,_forceRendering2).call(this)),S&&_classPrivateMethodGet(this,_dispatchEvent$1,_dispatchEvent2$1).call(this)):this.open()}},{key:"open",value:function(){var n,r,o;this.isOpen||(this.isOpen=!0,(n=this.toggleButton)===null||n===void 0||n.classList.add("toggled"),(r=this.toggleButton)===null||r===void 0||r.setAttribute("aria-expanded","true"),(o=this.outerContainer)===null||o===void 0||o.classList.add("sidebarMoving","sidebarOpen"),this.active===SidebarView.THUMBS&&_classPrivateMethodGet(this,_updateThumbnailViewer,_updateThumbnailViewer2).call(this),_classPrivateMethodGet(this,_forceRendering,_forceRendering2).call(this),_classPrivateMethodGet(this,_dispatchEvent$1,_dispatchEvent2$1).call(this),_classPrivateMethodGet(this,_hideUINotification,_hideUINotification2).call(this))}},{key:"close",value:function(){var n,r,o,s;this.isOpen&&(this.isOpen=!1,(n=this.toggleButton)===null||n===void 0||n.classList.remove("toggled"),(r=this.toggleButton)===null||r===void 0||r.setAttribute("aria-expanded","false"),(o=this.outerContainer)===null||o===void 0||o.classList.add("sidebarMoving"),(s=this.outerContainer)===null||s===void 0||s.classList.remove("sidebarOpen"),_classPrivateMethodGet(this,_forceRendering,_forceRendering2).call(this),_classPrivateMethodGet(this,_dispatchEvent$1,_dispatchEvent2$1).call(this))}},{key:"toggle",value:function(){this.isOpen?this.close():this.open()}}]),e}();function _dispatchEvent2$1(){this.isInitialViewSet&&!this.isInitialEventDispatched&&(this.isInitialEventDispatched=!0),this.eventBus.dispatch("sidebarviewchanged",{source:this,view:this.visibleView})}function _forceRendering2(){this.onToggled?this.onToggled():(this.pdfViewer.forceRendering(),this.pdfThumbnailViewer.forceRendering())}function _updateThumbnailViewer2(){for(var e=this.pdfViewer,n=this.pdfThumbnailViewer,r=e.pagesCount,o=0;o<r;o++){var s=e.getPageView(o);(s==null?void 0:s.renderingState)===RenderingStates$1.FINISHED&&n.getThumbnail(o).setImage(s)}n.scrollThumbnailIntoView(e.currentPageNumber)}function _hideUINotification2(){var e,n,r=arguments.length>0&&arguments[0]!==void 0&&arguments[0];(this.isOpen||r)&&((e=this.toggleButton)===null||e===void 0||e.classList.remove(UI_NOTIFICATION_CLASS)),r&&((n=this.toggleButton)===null||n===void 0||n.setAttribute("data-l10n-id","toggle_sidebar"))}function _download(e,n){var r=document.createElement("a");if(!r.click)throw new Error('DownloadManager: "a.click()" is not supported.');r.href=e,r.target="_parent","download"in r&&(r.download=n),(document.body||document.documentElement).append(r),r.click(),r.remove()}var _openBlobUrls=new WeakMap,DownloadManager=function(){function e(){_classCallCheck(this,e),_classPrivateFieldInitSpec(this,_openBlobUrls,{writable:!0,value:new WeakMap})}return _createClass(e,[{key:"downloadUrl",value:function(n,r){pdfExports.createValidAbsoluteUrl(n,"http://example.com")?_download(n+"#pdfjs.action=download",r):console.error("downloadUrl - not a valid URL: ".concat(n))}},{key:"downloadData",value:function(n,r,o){_download(URL.createObjectURL(new Blob([n],{type:o})),r)}},{key:"openOrDownloadData",value:function(n,r,o){var s=pdfExports.isPdfFile(o),u=s?"application/pdf":"";if(s){var d,f=_classPrivateFieldGet(this,_openBlobUrls).get(n);f||(f=URL.createObjectURL(new Blob([r],{type:u})),_classPrivateFieldGet(this,_openBlobUrls).set(n,f)),typeof PDFJSDev>"u"||PDFJSDev.test("GENERIC")?d="?file="+encodeURIComponent(f+"#"+o):PDFJSDev.test("CHROME")&&(d=chrome.runtime.getURL("/content/web/viewer.html")+"?file="+encodeURIComponent(f+"#"+o));try{return window.open(d),!0}catch(v){console.error("openOrDownloadData: ".concat(v)),URL.revokeObjectURL(f),_classPrivateFieldGet(this,_openBlobUrls).delete(n)}}return this.downloadData(r,o,u),!1}},{key:"download",value:function(n,r,o){_download(URL.createObjectURL(n),o)}}]),e}(),DefaultExternalServices=function(){function e(){throw _classCallCheck(this,e),new Error("Cannot initialize DefaultExternalServices.")}return _createClass(e,null,[{key:"updateFindControlState",value:function(n){}},{key:"updateFindMatchesCount",value:function(n){}},{key:"initPassiveLoading",value:function(n){}},{key:"reportTelemetry",value:function(n){}},{key:"createDownloadManager",value:function(){throw new Error("Not implemented: createDownloadManager")}},{key:"createPreferences",value:function(){throw new Error("Not implemented: createPreferences")}},{key:"createL10n",value:function(n){throw new Error("Not implemented: createL10n")}},{key:"createScripting",value:function(n){throw new Error("Not implemented: createScripting")}},{key:"supportsIntegratedFind",get:function(){return shadow(this,"supportsIntegratedFind",!1)}},{key:"supportsDocumentFonts",get:function(){return shadow(this,"supportsDocumentFonts",!0)}},{key:"supportedMouseWheelZoomModifierKeys",get:function(){return shadow(this,"supportedMouseWheelZoomModifierKeys",{ctrlKey:!0,metaKey:!0})}},{key:"isInAutomation",get:function(){return shadow(this,"isInAutomation",!1)}},{key:"updateEditorStates",value:function(n){throw new Error("Not implemented: updateEditorStates")}}]),e}(),GenericExternalServices=function(e){_inherits(r,DefaultExternalServices);var n=_createSuper(r);function r(){return _classCallCheck(this,r),n.apply(this,arguments)}return _createClass(r,null,[{key:"createDownloadManager",value:function(){return new DownloadManager}}]),r}(),CSS_CLASS_GRAB="grab-to-pan-grab",_onMouseDown=new WeakSet,_onMouseMove=new WeakSet,_endPan=new WeakSet,GrabToPan=function(){function e(n){_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_endPan),_classPrivateMethodInitSpec(this,_onMouseMove),_classPrivateMethodInitSpec(this,_onMouseDown),this.element=n.element,this.document=n.element.ownerDocument,typeof n.ignoreTarget=="function"&&(this.ignoreTarget=n.ignoreTarget),this.onActiveChanged=n.onActiveChanged,this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.toggle=this.toggle.bind(this),this._onMouseDown=_classPrivateMethodGet(this,_onMouseDown,_onMouseDown2).bind(this),this._onMouseMove=_classPrivateMethodGet(this,_onMouseMove,_onMouseMove2).bind(this),this._endPan=_classPrivateMethodGet(this,_endPan,_endPan2).bind(this),(this.overlay=document.createElement("div")).className="grab-to-pan-grabbing"}return _createClass(e,[{key:"activate",value:function(){var n;this.active||(this.active=!0,this.element.addEventListener("mousedown",this._onMouseDown,!0),this.element.classList.add(CSS_CLASS_GRAB),(n=this.onActiveChanged)===null||n===void 0||n.call(this,!0))}},{key:"deactivate",value:function(){var n;this.active&&(this.active=!1,this.element.removeEventListener("mousedown",this._onMouseDown,!0),this._endPan(),this.element.classList.remove(CSS_CLASS_GRAB),(n=this.onActiveChanged)===null||n===void 0||n.call(this,!1))}},{key:"toggle",value:function(){this.active?this.deactivate():this.activate()}},{key:"ignoreTarget",value:function(n){return n.matches("a[href], a[href] *, input, textarea, button, button *, select, option")}}]),e}();function _onMouseDown2(e){if(e.button===0&&!this.ignoreTarget(e.target)){if(e.originalTarget)try{e.originalTarget.tagName}catch{return}this.scrollLeftStart=this.element.scrollLeft,this.scrollTopStart=this.element.scrollTop,this.clientXStart=e.clientX,this.clientYStart=e.clientY,this.document.addEventListener("mousemove",this._onMouseMove,!0),this.document.addEventListener("mouseup",this._endPan,!0),this.element.addEventListener("scroll",this._endPan,!0),e.preventDefault(),e.stopPropagation();var n=document.activeElement;n&&!n.contains(e.target)&&n.blur()}}function _onMouseMove2(e){if(this.element.removeEventListener("scroll",this._endPan,!0),1&e.buttons){var n=e.clientX-this.clientXStart,r=e.clientY-this.clientYStart,o=this.scrollTopStart-r,s=this.scrollLeftStart-n;this.element.scrollTo?this.element.scrollTo({top:o,left:s,behavior:"instant"}):(this.element.scrollTop=o,this.element.scrollLeft=s),this.overlay.parentNode||document.body.append(this.overlay)}else this._endPan()}function _endPan2(){this.element.removeEventListener("scroll",this._endPan,!0),this.document.removeEventListener("mousemove",this._onMouseMove,!0),this.document.removeEventListener("mouseup",this._endPan,!0),this.overlay.remove()}var CursorTool={SELECT:0,HAND:1,ZOOM:2},_dispatchEvent$2=new WeakSet,_addEventListeners=new WeakSet,PDFCursorTools=function(){function e(n){var r=this,o=n.container,s=n.eventBus,u=n.cursorToolOnLoad,d=u===void 0?CursorTool.SELECT:u;_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_addEventListeners),_classPrivateMethodInitSpec(this,_dispatchEvent$2),this.container=o,this.eventBus=s,this.active=CursorTool.SELECT,this.previouslyActive=null,this.handTool=new GrabToPan({element:this.container}),_classPrivateMethodGet(this,_addEventListeners,_addEventListeners2).call(this),Promise.resolve().then(function(){r.switchTool(d)})}return _createClass(e,[{key:"activeTool",get:function(){return this.active}},{key:"switchTool",value:function(n){var r=this;if(this.previouslyActive===null&&n!==this.active){var o=function(){switch(r.active){case CursorTool.SELECT:break;case CursorTool.HAND:r.handTool.deactivate()}};switch(n){case CursorTool.SELECT:o();break;case CursorTool.HAND:o(),this.handTool.activate();break;case CursorTool.ZOOM:default:return void console.error('switchTool: "'.concat(n,'" is an unsupported value.'))}this.active=n,_classPrivateMethodGet(this,_dispatchEvent$2,_dispatchEvent2).call(this)}}}]),e}();function _dispatchEvent2(){this.eventBus.dispatch("cursortoolchanged",{source:this,tool:this.active})}function _addEventListeners2(){var e=this;this.eventBus._on("switchcursortool",function(u){e.switchTool(u.tool)});var n=pdfExports.AnnotationEditorType.NONE,r=PresentationModeState.NORMAL,o=function(){var u,d=e.active;e.switchTool(CursorTool.SELECT),(u=e.previouslyActive)!==null&&u!==void 0||(e.previouslyActive=d)},s=function(){var u=e.previouslyActive;u!==null&&n===pdfExports.AnnotationEditorType.NONE&&r===PresentationModeState.NORMAL&&(e.previouslyActive=null,e.switchTool(u))};this.eventBus._on("secondarytoolbarreset",function(u){e.previouslyActive!==null&&(n=pdfExports.AnnotationEditorType.NONE,r=PresentationModeState.NORMAL,s())}),this.eventBus._on("annotationeditormodechanged",function(u){var d=u.mode;n=d,d===pdfExports.AnnotationEditorType.NONE?s():o()}),this.eventBus._on("presentationmodechanged",function(u){var d=u.state;r=d,d===PresentationModeState.NORMAL?s():d===PresentationModeState.FULLSCREEN&&o()})}var DELAY_BEFORE_HIDING_CONTROLS=3e3,ACTIVE_SELECTOR="pdfPresentationMode",CONTROLS_SELECTOR="pdfPresentationModeControls",MOUSE_SCROLL_COOLDOWN_TIME=50,PAGE_SWITCH_THRESHOLD=.1,SWIPE_MIN_DISTANCE_THRESHOLD=50,SWIPE_ANGLE_THRESHOLD=Math.PI/6,_state=new WeakMap,_args=new WeakMap,_mouseWheel=new WeakSet,_notifyStateChange=new WeakSet,_enter=new WeakSet,_exit=new WeakSet,_mouseDown=new WeakSet,_contextMenu=new WeakSet,_showControls=new WeakSet,_hideControls=new WeakSet,_resetMouseScrollState=new WeakSet,_touchSwipe=new WeakSet,_addWindowListeners=new WeakSet,_removeWindowListeners=new WeakSet,_fullscreenChange=new WeakSet,_addFullscreenChangeListeners=new WeakSet,_removeFullscreenChangeListeners=new WeakSet,PDFPresentationMode=function(){function e(r){var o=r.container,s=r.pdfViewer,u=r.eventBus;_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_removeFullscreenChangeListeners),_classPrivateMethodInitSpec(this,_addFullscreenChangeListeners),_classPrivateMethodInitSpec(this,_fullscreenChange),_classPrivateMethodInitSpec(this,_removeWindowListeners),_classPrivateMethodInitSpec(this,_addWindowListeners),_classPrivateMethodInitSpec(this,_touchSwipe),_classPrivateMethodInitSpec(this,_resetMouseScrollState),_classPrivateMethodInitSpec(this,_hideControls),_classPrivateMethodInitSpec(this,_showControls),_classPrivateMethodInitSpec(this,_contextMenu),_classPrivateMethodInitSpec(this,_mouseDown),_classPrivateMethodInitSpec(this,_exit),_classPrivateMethodInitSpec(this,_enter),_classPrivateMethodInitSpec(this,_notifyStateChange),_classPrivateMethodInitSpec(this,_mouseWheel),_classPrivateFieldInitSpec(this,_state,{writable:!0,value:PresentationModeState.UNKNOWN}),_classPrivateFieldInitSpec(this,_args,{writable:!0,value:null}),this.container=o,this.pdfViewer=s,this.eventBus=u,this.contextMenuOpen=!1,this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0,this.touchSwipeState=null}var n;return _createClass(e,[{key:"request",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function r(){var o,s,u;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(o=this.container,s=this.pdfViewer,!this.active&&s.pagesCount){d.next=3;break}return d.abrupt("return",!1);case 3:return _classPrivateMethodGet(this,_addFullscreenChangeListeners,_addFullscreenChangeListeners2).call(this),_classPrivateMethodGet(this,_notifyStateChange,_notifyStateChange2).call(this,PresentationModeState.CHANGING),u=null,o.webkitRequestFullScreen?u=o.webkitRequestFullScreen():o.mozRequestFullScreen?u=o.mozRequestFullScreen():o.requestFullscreen&&(u=o.requestFullscreen()),_classPrivateFieldSet(this,_args,{pageNumber:s.currentPageNumber,scaleValue:s.currentScaleValue,scrollMode:s.scrollMode,spreadMode:null,annotationEditorMode:null}),s.spreadMode===SpreadMode.NONE||s.pageViewsReady&&s.hasEqualPageSizes||(console.warn("Ignoring Spread modes when entering PresentationMode, since the document may contain varying page sizes."),_classPrivateFieldGet(this,_args).spreadMode=s.spreadMode),s.annotationEditorMode!==pdfExports.AnnotationEditorType.DISABLE&&(_classPrivateFieldGet(this,_args).annotationEditorMode=s.annotationEditorMode),d.prev=10,d.next=13,u;case 13:return s.focus(),d.abrupt("return",!0);case 17:d.prev=17,d.t0=d.catch(10),_classPrivateMethodGet(this,_removeFullscreenChangeListeners,_removeFullscreenChangeListeners2).call(this),_classPrivateMethodGet(this,_notifyStateChange,_notifyStateChange2).call(this,PresentationModeState.NORMAL);case 21:return d.abrupt("return",!1);case 22:case"end":return d.stop()}},r,this,[[10,17]])})),function(){return n.apply(this,arguments)})},{key:"active",get:function(){return _classPrivateFieldGet(this,_state)===PresentationModeState.CHANGING||_classPrivateFieldGet(this,_state)===PresentationModeState.FULLSCREEN}}]),e}();function _mouseWheel2(e){if(this.active){e.preventDefault();var n=normalizeWheelEventDelta(e),r=Date.now(),o=this.mouseScrollTimeStamp;if(!(r>o&&r-o<MOUSE_SCROLL_COOLDOWN_TIME)&&((this.mouseScrollDelta>0&&n<0||this.mouseScrollDelta<0&&n>0)&&_classPrivateMethodGet(this,_resetMouseScrollState,_resetMouseScrollState2).call(this),this.mouseScrollDelta+=n,Math.abs(this.mouseScrollDelta)>=PAGE_SWITCH_THRESHOLD)){var s=this.mouseScrollDelta;_classPrivateMethodGet(this,_resetMouseScrollState,_resetMouseScrollState2).call(this),(s>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage())&&(this.mouseScrollTimeStamp=r)}}}function _notifyStateChange2(e){_classPrivateFieldSet(this,_state,e),this.eventBus.dispatch("presentationmodechanged",{source:this,state:e})}function _enter2(){var e=this;_classPrivateMethodGet(this,_notifyStateChange,_notifyStateChange2).call(this,PresentationModeState.FULLSCREEN),this.container.classList.add(ACTIVE_SELECTOR),setTimeout(function(){e.pdfViewer.scrollMode=ScrollMode.PAGE,_classPrivateFieldGet(e,_args).spreadMode!==null&&(e.pdfViewer.spreadMode=SpreadMode.NONE),e.pdfViewer.currentPageNumber=_classPrivateFieldGet(e,_args).pageNumber,e.pdfViewer.currentScaleValue="page-fit",_classPrivateFieldGet(e,_args).annotationEditorMode!==null&&(e.pdfViewer.annotationEditorMode=pdfExports.AnnotationEditorType.NONE)},0),_classPrivateMethodGet(this,_addWindowListeners,_addWindowListeners2).call(this),_classPrivateMethodGet(this,_showControls,_showControls2).call(this),this.contextMenuOpen=!1,window.getSelection().removeAllRanges()}function _exit2(){var e=this,n=this.pdfViewer.currentPageNumber;this.container.classList.remove(ACTIVE_SELECTOR),setTimeout(function(){_classPrivateMethodGet(e,_removeFullscreenChangeListeners,_removeFullscreenChangeListeners2).call(e),_classPrivateMethodGet(e,_notifyStateChange,_notifyStateChange2).call(e,PresentationModeState.NORMAL),e.pdfViewer.scrollMode=_classPrivateFieldGet(e,_args).scrollMode,_classPrivateFieldGet(e,_args).spreadMode!==null&&(e.pdfViewer.spreadMode=_classPrivateFieldGet(e,_args).spreadMode),e.pdfViewer.exitPresentationMode=!0,e.pdfViewer.currentPageNumber=n,e.pdfViewer.currentScaleValue=_classPrivateFieldGet(e,_args).scaleValue,_classPrivateFieldGet(e,_args).annotationEditorMode!==null&&(e.pdfViewer.annotationEditorMode=_classPrivateFieldGet(e,_args).annotationEditorMode),_classPrivateFieldSet(e,_args,null)},0),_classPrivateMethodGet(this,_removeWindowListeners,_removeWindowListeners2).call(this),_classPrivateMethodGet(this,_hideControls,_hideControls2).call(this),_classPrivateMethodGet(this,_resetMouseScrollState,_resetMouseScrollState2).call(this),this.contextMenuOpen=!1}function _mouseDown2(e){var n;if(this.contextMenuOpen)return this.contextMenuOpen=!1,void e.preventDefault();e.button===0&&(e.target.href&&(n=e.target.parentNode)!==null&&n!==void 0&&n.hasAttribute("data-internal-link")||(e.preventDefault(),e.shiftKey?this.pdfViewer.previousPage():this.pdfViewer.nextPage()))}function _contextMenu2(){this.contextMenuOpen=!0}function _showControls2(){var e=this;this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(CONTROLS_SELECTOR),this.controlsTimeout=setTimeout(function(){e.container.classList.remove(CONTROLS_SELECTOR),delete e.controlsTimeout},DELAY_BEFORE_HIDING_CONTROLS)}function _hideControls2(){this.controlsTimeout&&(clearTimeout(this.controlsTimeout),this.container.classList.remove(CONTROLS_SELECTOR),delete this.controlsTimeout)}function _resetMouseScrollState2(){this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0}function _touchSwipe2(e){if(this.active)if(e.touches.length>1)this.touchSwipeState=null;else switch(e.type){case"touchstart":this.touchSwipeState={startX:e.touches[0].pageX,startY:e.touches[0].pageY,endX:e.touches[0].pageX,endY:e.touches[0].pageY};break;case"touchmove":if(this.touchSwipeState===null)return;this.touchSwipeState.endX=e.touches[0].pageX,this.touchSwipeState.endY=e.touches[0].pageY,e.preventDefault();break;case"touchend":if(this.touchSwipeState===null)return;var n=0,r=this.touchSwipeState.endX-this.touchSwipeState.startX,o=this.touchSwipeState.endY-this.touchSwipeState.startY,s=Math.abs(Math.atan2(o,r));Math.abs(r)>SWIPE_MIN_DISTANCE_THRESHOLD&&(s<=SWIPE_ANGLE_THRESHOLD||s>=Math.PI-SWIPE_ANGLE_THRESHOLD)?n=r:Math.abs(o)>SWIPE_MIN_DISTANCE_THRESHOLD&&Math.abs(s-Math.PI/2)<=SWIPE_ANGLE_THRESHOLD&&(n=o),n>0?this.pdfViewer.previousPage():n<0&&this.pdfViewer.nextPage()}}function _addWindowListeners2(){this.showControlsBind=_classPrivateMethodGet(this,_showControls,_showControls2).bind(this),this.mouseDownBind=_classPrivateMethodGet(this,_mouseDown,_mouseDown2).bind(this),this.mouseWheelBind=_classPrivateMethodGet(this,_mouseWheel,_mouseWheel2).bind(this),this.resetMouseScrollStateBind=_classPrivateMethodGet(this,_resetMouseScrollState,_resetMouseScrollState2).bind(this),this.contextMenuBind=_classPrivateMethodGet(this,_contextMenu,_contextMenu2).bind(this),this.touchSwipeBind=_classPrivateMethodGet(this,_touchSwipe,_touchSwipe2).bind(this),window.addEventListener("mousemove",this.showControlsBind),window.addEventListener("mousedown",this.mouseDownBind),window.addEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.addEventListener("keydown",this.resetMouseScrollStateBind),window.addEventListener("contextmenu",this.contextMenuBind),window.addEventListener("touchstart",this.touchSwipeBind),window.addEventListener("touchmove",this.touchSwipeBind),window.addEventListener("touchend",this.touchSwipeBind)}function _removeWindowListeners2(){window.removeEventListener("mousemove",this.showControlsBind),window.removeEventListener("mousedown",this.mouseDownBind),window.removeEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.removeEventListener("keydown",this.resetMouseScrollStateBind),window.removeEventListener("contextmenu",this.contextMenuBind),window.removeEventListener("touchstart",this.touchSwipeBind),window.removeEventListener("touchmove",this.touchSwipeBind),window.removeEventListener("touchend",this.touchSwipeBind),delete this.showControlsBind,delete this.mouseDownBind,delete this.mouseWheelBind,delete this.resetMouseScrollStateBind,delete this.contextMenuBind,delete this.touchSwipeBind}function _fullscreenChange2(){document.fullscreenElement?_classPrivateMethodGet(this,_enter,_enter2).call(this):_classPrivateMethodGet(this,_exit,_exit2).call(this)}function _addFullscreenChangeListeners2(){this.fullscreenChangeBind=_classPrivateMethodGet(this,_fullscreenChange,_fullscreenChange2).bind(this),window.addEventListener("fullscreenchange",this.fullscreenChangeBind),window.addEventListener("webkitfullscreenchange",this.fullscreenChangeBind),window.addEventListener("mozfullscreenchange",this.fullscreenChangeBind)}function _removeFullscreenChangeListeners2(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind),window.removeEventListener("webkitfullscreenchange",this.fullscreenChangeBind),window.removeEventListener("mozfullscreenchange",this.fullscreenChangeBind),delete this.fullscreenChangeBind}var annotationStore={selectedName:null,annotationsAll:null,notFirstRender:!1,creating:!1,fileData:null,$t:null},InkSign=function(){function e(n){var r=n.container,o=n.pdfViewer,s=n.eventBus;_classCallCheck(this,e),this.container=r,this.pdfViewer=o,this.eventBus=s,this.path=[],this.inkPath=[],this.currentPath=[],this.areaBound=[NaN,NaN,NaN,NaN],this.inkPadding={x:10,y:10},this.strokeWidth=5,this.strokColor="#000",this.onMousedown=this.handleMouseDown.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onHandleGetSignData=this.getData.bind(this),this.onHandleInitCursorStyle=this.initCursorStyle.bind(this),this.init()}return _createClass(e,[{key:"init",value:function(){this.canvas=document.getElementById("trackpadCanvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.style.cursor="crosshair",this.canvasWidth=this.canvas.width,this.canvasHeight=this.canvas.height,this.canvas.addEventListener("mousedown",this.onMousedown),this.canvas.addEventListener("touchstart",this.onMousedown),this.eventBus._on("getSignData",this.onHandleGetSignData),this.eventBus._on("initCursorStyle",this.onHandleInitCursorStyle)}},{key:"handleMouseDown",value:function(n){if(!n.changedTouches||n.changedTouches.length===1){var r=n.clientX||n.changedTouches[0].clientX,o=n.clientY||n.changedTouches[0].clientY,s=r-this.canvas.offsetLeft,u=o-this.canvas.offsetTop;this.ctx.lineWidth=this.strokeWidth,this.ctx.strokeStyle=this.strokColor,this.ctx.lineJoin="round",this.ctx.lineCap="round",this.currentPath.length>0&&(this.inkPath.push(this.currentPath),this.currentPath=[]),this.ctx.beginPath(),this.ctx.moveTo(s,u),this.mousedown=!0,this.pressPoint={x:s,y:u},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(n){var r=n.clientX||n.changedTouches[0].clientX,o=n.clientY||n.changedTouches[0].clientY,s=r-this.canvas.offsetLeft,u=o-this.canvas.offsetTop;if(!(s>this.canvasWidth||u>this.canvasHeight||s<0||u<0)){var d=!0;this.mousedown&&this.pressPoint&&s==this.pressPoint.x&&u==this.pressPoint.y&&(d=!1),d&&(this.ctx.lineTo(s,u),this.ctx.stroke(),this.path.push([s,u]),this.currentPath.push({x:s,y:u}))}}},{key:"handleMouseUp",value:function(){document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.mousedown=!1,this.pressPoint={x:-1,y:-1};var n=this.getRect();this.rect=n,this.currentPath.length>0&&(this.inkPath.push(this.currentPath),this.currentPath=[])}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.path=[],this.inkPath=[],this.currentPath=[],this.areaBound=[NaN,NaN,NaN,NaN],this.initCursorStyle()}},{key:"reset",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.path=[],this.inkPath=[],this.currentPath=[],this.areaBound=[NaN,NaN,NaN,NaN],this.onMousedown=null,this.onMousemove=null,this.onMouseup=null,this.onHandleGetSignData=null,this.onHandleInitCursorStyle=null}},{key:"getRect",value:function(){var n=[],r=[];this.path.forEach(function(f){n.push(f[0]),r.push(f[1])});var o=Math.min.apply(Math,r),s=Math.min.apply(Math,n),u=Math.max.apply(Math,r),d=Math.max.apply(Math,n);return{left:s,top:o,bottom:u,right:d,width:d-s,height:u-o}}},{key:"toImage",value:function(n){if(this.path.length!==0){var r=this.getInkPathData(),o=r.toDataURL("image/png"),s=!0;r||(inalCanvas=this.paintFinalCanvas(),o=r.toDataURL("image/jpeg"),s=!1),this.dataURL=o;var u=new Image;u.src=o,u.id="sign-image-save",u.style.position="fixed",u.style.pointerEvents="none",u.style.zIndex="5",u.classList.add("sign-ink-save"),s&&(Object.defineProperty(u,"inkPath",{value:this.inkPath}),Object.defineProperty(u,"inkParam",{value:n}));var d=document.querySelector(".document-container"),f=this.rect;d.addEventListener("mousemove",function(k){var S=k.clientX,E=k.clientY,T=f.width/2,M=f.height/2;u.style.left=S-T+"px",u.style.top=E-M+"px"});var v=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),m=document.querySelector(".page.page-number"+this.pdfViewer.currentPageNumber);if(v){var _=m.getBoundingClientRect(),g=_.left+_.width/2,y=_.top+_.height/2,w=f.width/2,x=f.height/2;u.style.left=g-w+"px",u.style.top=y-x+"px"}this.img=u,d.appendChild(this.img),this.documentContainer=d,setTimeout(function(){if(v){var k=new PointerEvent("click");m.dispatchEvent(k)}},10)}}},{key:"getData",value:function(n){if(this.path.length!==0){this.layerData=n;var r={operate:"add-annot",type:"image",pageIndex:this.layerData.page+1,imageBase64:this.dataURL,date:new Date},o=this.formatPath();o.path;var s=o.rect;r.rect=s,this.eventBus.dispatch("createSignature",r)}}},{key:"calcInkPath",value:function(){if(this.inkPath.length>0){for(var n=0;n<this.inkPath.length;n++)for(var r=0;r<this.inkPath[n].length;r++)isNaN(this.areaBound[0])?(this.areaBound[0]=this.inkPath[n][r].x,this.areaBound[1]=this.inkPath[n][r].y,this.areaBound[2]=this.inkPath[n][r].x,this.areaBound[3]=this.inkPath[n][r].y):(this.areaBound[0]>this.inkPath[n][r].x&&(this.areaBound[0]=this.inkPath[n][r].x),this.areaBound[1]>this.inkPath[n][r].y&&(this.areaBound[1]=this.inkPath[n][r].y),this.areaBound[2]<this.inkPath[n][r].x&&(this.areaBound[2]=this.inkPath[n][r].x),this.areaBound[3]<this.inkPath[n][r].y&&(this.areaBound[3]=this.inkPath[n][r].y));if(!isNaN(this.areaBound[0]))for(var o={x:this.inkPadding.x-this.areaBound[0],y:this.inkPadding.y-this.areaBound[1]},s=0;s<this.inkPath.length;s++)for(var u=0;u<this.inkPath[s].length;u++)this.inkPath[s][u].x=this.inkPath[s][u].x+o.x,this.inkPath[s][u].y=this.inkPath[s][u].y+o.y}}},{key:"getInkPathData",value:function(){if(this.calcInkPath(),!isNaN(this.areaBound[0])){var n=document.createElement("canvas"),r=n.getContext("2d");n.width=this.areaBound[2]-this.areaBound[0]+2*this.inkPadding.x,n.height=this.areaBound[3]-this.areaBound[1]+2*this.inkPadding.y,r.strokeStyle=this.strokColor,r.lineWidth=this.strokeWidth;for(var o=0;o<this.inkPath.length;o++)if(this.inkPath[o].length==1&&(r.beginPath(),r.fillStyle=this.strokColor,r.ellipse(this.inkPath[o][0].x,this.inkPath[o][0].y,this.strokeWidth/2,this.strokeWidth/2,0,0,360,!1),r.fill(),r.closePath()),this.inkPath[o].length>1){r.beginPath(),r.moveTo(this.inkPath[o][0].x,this.inkPath[o][0].y);for(var s=1;s<this.inkPath[o].length;s++)r.lineTo(this.inkPath[o][s].x,this.inkPath[o][s].y);r.stroke(),r.closePath()}return n}return null}},{key:"formatPath",value:function(){for(var n="",r=this.path.length,o=[],s=[],u=0;u<r;u+=2){var d=this.handlePoint(this.path[u]);if(o.push(d.x),s.push(d.y),n+=d.x.toFixed(2)+","+d.y.toFixed(2),u+1<r){var f=this.handlePoint(this.path[u]);o.push(f.x),s.push(f.y),n+=";"+f.x.toFixed(2)+","+f.y.toFixed(2),u+2<r&&(n+=";")}}var v=Math.min.apply(Math,o),m=Math.min.apply(Math,s),_=Math.max.apply(Math,o),g=Math.max.apply(Math,s);return{path:n,rect:"".concat(v,",").concat(m,",").concat(_,",").concat(g)}}},{key:"handlePoint",value:function(n){var r=getInitialPoint({x:n[0]+this.layerData.clickX-this.rect.width/2,y:n[1]+this.layerData.clickY-this.rect.height/2},this.layerData.viewport,this.layerData.viewport.scale);return{x:r.x,y:r.y}}},{key:"initCursorStyle",value:function(){this.img&&this.img.remove()}},{key:"paintFinalCanvas",value:function(){var n=document.createElement("canvas"),r=n.getContext("2d");return n.width=this.rect.width,n.height=this.rect.height,r.fillStyle="white",r.fillRect(0,0,n.width,n.height),r.lineWidth=3,r.strokeStyle="black",r.drawImage(this.canvas,this.rect.left,this.rect.top,n.width,n.height,0,0,n.width,n.height),n}},{key:"update",value:function(n){if(n&&(this.strokeWidth=n.width,this.strokColor=n.color),this.inkPath){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.lineWidth=this.strokeWidth,this.ctx.strokeStyle=this.strokColor;for(var r=0;r<this.inkPath.length;r++)if(this.inkPath[r].length==1&&(this.ctx.beginPath(),this.ctx.fillStyle=this.strokColor,this.ctx.ellipse(this.inkPath[r][0].x,this.inkPath[r][0].y,this.strokeWidth/2,this.strokeWidth/2,0,0,360,!1),this.ctx.fill(),this.ctx.closePath()),this.inkPath[r].length>1){this.ctx.beginPath(),this.ctx.moveTo(this.inkPath[r][0].x,this.inkPath[r][0].y);for(var o=1;o<this.inkPath[r].length;o++)this.ctx.lineTo(this.inkPath[r][o].x,this.inkPath[r][o].y);this.ctx.stroke(),this.ctx.closePath()}}}}]),e}(),MessageHandler=function(){function e(n,r,o){var s=this;_classCallCheck(this,e),this.sourceName=n,this.targetName=r,this.comObj=o,this.callbackId=1,this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(u){var d=u.data;if(d.targetName===s.sourceName)if(d.callback){var f=d.callbackId,v=s.callbackCapabilities[f];if(!v)throw new Error("Cannot resolve callback ".concat(f));if(delete s.callbackCapabilities[f],d.callback!=="resolve")throw new Error("Unexpected callback case");v.resolve(d.data)}else{var m=s.actionHandler[d.action];if(!m)throw new Error("Unknown action from worker: ".concat(d.action));if(d.callbackId){var _=s.sourceName,g=d.sourceName;new Promise(function(y){y(m(d.data))}).then(function(y){o.postMessage({sourceName:_,targetName:g,callback:"resolve",callbackId:d.callbackId,data:y})},function(y){o.postMessage({data:d,sourceName:_,targetName:g,callback:"reject",callbackId:d.callbackId,reason:y})})}else m(d.data)}},o.addEventListener("message",this._onComObjOnMessage)}return _createClass(e,[{key:"on",value:function(n,r){var o=this.actionHandler;if(o[n])throw new Error('There is already an actionName called "'.concat(n,'"'));o[n]=r}},{key:"send",value:function(n,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:n,data:r})}},{key:"sendWithPromise",value:function(n,r){var o=this.callbackId++,s=new PromiseExt;this.callbackCapabilities[o]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:n,callbackId:o,data:r})}catch(u){s.reject(u)}return s.promise}},{key:"destroy",value:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}]),e}(),jszip_minExports={},jszip_min={get exports(){return jszip_minExports},set exports(e){jszip_minExports=e}};jszip_min.exports=function e(n,r,o){function s(f,v){if(!r[f]){if(!n[f]){var m=typeof commonjsRequire=="function"&&commonjsRequire;if(!v&&m)return m(f,!0);if(u)return u(f,!0);var _=new Error("Cannot find module '"+f+"'");throw _.code="MODULE_NOT_FOUND",_}var g=r[f]={exports:{}};n[f][0].call(g.exports,function(y){return s(n[f][1][y]||y)},g,g.exports,e,n,r,o)}return r[f].exports}for(var u=typeof commonjsRequire=="function"&&commonjsRequire,d=0;d<o.length;d++)s(o[d]);return s}({1:[function(e,n,r){var o=e("./utils"),s=e("./support"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(d){for(var f,v,m,_,g,y,w,x=[],k=0,S=d.length,E=S,T=o.getTypeOf(d)!=="string";k<d.length;)E=S-k,m=T?(f=d[k++],v=k<S?d[k++]:0,k<S?d[k++]:0):(f=d.charCodeAt(k++),v=k<S?d.charCodeAt(k++):0,k<S?d.charCodeAt(k++):0),_=f>>2,g=(3&f)<<4|v>>4,y=1<E?(15&v)<<2|m>>6:64,w=2<E?63&m:64,x.push(u.charAt(_)+u.charAt(g)+u.charAt(y)+u.charAt(w));return x.join("")},r.decode=function(d){var f,v,m,_,g,y,w=0,x=0,k="data:";if(d.substr(0,k.length)===k)throw new Error("Invalid base64 input, it looks like a data url.");var S,E=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===u.charAt(64)&&E--,d.charAt(d.length-2)===u.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=s.uint8array?new Uint8Array(0|E):new Array(0|E);w<d.length;)f=u.indexOf(d.charAt(w++))<<2|(_=u.indexOf(d.charAt(w++)))>>4,v=(15&_)<<4|(g=u.indexOf(d.charAt(w++)))>>2,m=(3&g)<<6|(y=u.indexOf(d.charAt(w++))),S[x++]=f,g!==64&&(S[x++]=v),y!==64&&(S[x++]=m);return S}},{"./support":30,"./utils":32}],2:[function(e,n,r){var o=e("./external"),s=e("./stream/DataWorker"),u=e("./stream/Crc32Probe"),d=e("./stream/DataLengthProbe");function f(v,m,_,g,y){this.compressedSize=v,this.uncompressedSize=m,this.crc32=_,this.compression=g,this.compressedContent=y}f.prototype={getContentWorker:function(){var v=new s(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),m=this;return v.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),v},getCompressedWorker:function(){return new s(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(v,m,_){return v.pipe(new u).pipe(new d("uncompressedSize")).pipe(m.compressWorker(_)).pipe(new d("compressedSize")).withStreamInfo("compression",m)},n.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,n,r){var o=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,n,r){var o=e("./utils"),s=function(){for(var u,d=[],f=0;f<256;f++){u=f;for(var v=0;v<8;v++)u=1&u?3988292384^u>>>1:u>>>1;d[f]=u}return d}();n.exports=function(u,d){return u!==void 0&&u.length?o.getTypeOf(u)!=="string"?function(f,v,m,_){var g=s,y=_+m;f^=-1;for(var w=_;w<y;w++)f=f>>>8^g[255&(f^v[w])];return-1^f}(0|d,u,u.length,0):function(f,v,m,_){var g=s,y=_+m;f^=-1;for(var w=_;w<y;w++)f=f>>>8^g[255&(f^v.charCodeAt(w))];return-1^f}(0|d,u,u.length,0):0}},{"./utils":32}],5:[function(e,n,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,n,r){var o=null;o=typeof Promise<"u"?Promise:e("lie"),n.exports={Promise:o}},{lie:37}],7:[function(e,n,r){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=e("pako"),u=e("./utils"),d=e("./stream/GenericWorker"),f=o?"uint8array":"array";function v(m,_){d.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=_,this.meta={}}r.magic="\b\0",u.inherits(v,d),v.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(u.transformTo(f,m.data),!1)},v.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},v.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},v.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(_){m.push({data:_,meta:m.meta})}},r.compressWorker=function(m){return new v("Deflate",m)},r.uncompressWorker=function(){return new v("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,n,r){function o(g,y){var w,x="";for(w=0;w<y;w++)x+=String.fromCharCode(255&g),g>>>=8;return x}function s(g,y,w,x,k,S){var E,T,M=g.file,I=g.compression,F=S!==f.utf8encode,O=u.transformTo("string",S(M.name)),N=u.transformTo("string",f.utf8encode(M.name)),D=M.comment,X=u.transformTo("string",S(D)),U=u.transformTo("string",f.utf8encode(D)),Z=N.length!==M.name.length,j=U.length!==D.length,Q="",ve="",Se="",we=M.dir,oe=M.date,ne={crc32:0,compressedSize:0,uncompressedSize:0};y&&!w||(ne.crc32=g.crc32,ne.compressedSize=g.compressedSize,ne.uncompressedSize=g.uncompressedSize);var q=0;y&&(q|=8),F||!Z&&!j||(q|=2048);var H=0,Y=0;we&&(H|=16),k==="UNIX"?(Y=798,H|=function(Ce,Te){var ke=Ce;return Ce||(ke=Te?16893:33204),(65535&ke)<<16}(M.unixPermissions,we)):(Y=20,H|=function(Ce){return 63&(Ce||0)}(M.dosPermissions)),E=oe.getUTCHours(),E<<=6,E|=oe.getUTCMinutes(),E<<=5,E|=oe.getUTCSeconds()/2,T=oe.getUTCFullYear()-1980,T<<=4,T|=oe.getUTCMonth()+1,T<<=5,T|=oe.getUTCDate(),Z&&(ve=o(1,1)+o(v(O),4)+N,Q+="up"+o(ve.length,2)+ve),j&&(Se=o(1,1)+o(v(X),4)+U,Q+="uc"+o(Se.length,2)+Se);var le="";return le+=`
\0`,le+=o(q,2),le+=I.magic,le+=o(E,2),le+=o(T,2),le+=o(ne.crc32,4),le+=o(ne.compressedSize,4),le+=o(ne.uncompressedSize,4),le+=o(O.length,2),le+=o(Q.length,2),{fileRecord:m.LOCAL_FILE_HEADER+le+O+Q,dirRecord:m.CENTRAL_FILE_HEADER+o(Y,2)+le+o(X.length,2)+"\0\0\0\0"+o(H,4)+o(x,4)+O+Q+X}}var u=e("../utils"),d=e("../stream/GenericWorker"),f=e("../utf8"),v=e("../crc32"),m=e("../signature");function _(g,y,w,x){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=w,this.encodeFileName=x,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}u.inherits(_,d),_.prototype.push=function(g){var y=g.meta.percent||0,w=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,d.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:w?(y+100*(w-x-1))/w:100}}))},_.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var y=this.streamFiles&&!g.file.dir;if(y){var w=s(g,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},_.prototype.closedSource=function(g){this.accumulate=!1;var y=this.streamFiles&&!g.file.dir,w=s(g,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),y)this.push({data:function(x){return m.DATA_DESCRIPTOR+o(x.crc32,4)+o(x.compressedSize,4)+o(x.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},_.prototype.flush=function(){for(var g=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var w=this.bytesWritten-g,x=function(k,S,E,T,M){var I=u.transformTo("string",M(T));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(k,2)+o(k,2)+o(S,4)+o(E,4)+o(I.length,2)+I}(this.dirRecords.length,w,g,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},_.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},_.prototype.registerPrevious=function(g){this._sources.push(g);var y=this;return g.on("data",function(w){y.processChunk(w)}),g.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),g.on("error",function(w){y.error(w)}),this},_.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},_.prototype.error=function(g){var y=this._sources;if(!d.prototype.error.call(this,g))return!1;for(var w=0;w<y.length;w++)try{y[w].error(g)}catch{}return!0},_.prototype.lock=function(){d.prototype.lock.call(this);for(var g=this._sources,y=0;y<g.length;y++)g[y].lock()},n.exports=_},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,n,r){var o=e("../compressions"),s=e("./ZipFileWorker");r.generateWorker=function(u,d,f){var v=new s(d.streamFiles,f,d.platform,d.encodeFileName),m=0;try{u.forEach(function(_,g){m++;var y=function(S,E){var T=S||E,M=o[T];if(!M)throw new Error(T+" is not a valid compression method !");return M}(g.options.compression,d.compression),w=g.options.compressionOptions||d.compressionOptions||{},x=g.dir,k=g.date;g._compressWorker(y,w).withStreamInfo("file",{name:_,dir:x,date:k,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(v)}),v.entriesCount=m}catch(_){v.error(_)}return v}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,n,r){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new o;for(var u in this)typeof this[u]!="function"&&(s[u]=this[u]);return s}}(o.prototype=e("./object")).loadAsync=e("./load"),o.support=e("./support"),o.defaults=e("./defaults"),o.version="3.10.1",o.loadAsync=function(s,u){return new o().loadAsync(s,u)},o.external=e("./external"),n.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,n,r){var o=e("./utils"),s=e("./external"),u=e("./utf8"),d=e("./zipEntries"),f=e("./stream/Crc32Probe"),v=e("./nodejsUtils");function m(_){return new s.Promise(function(g,y){var w=_.decompressed.getContentWorker().pipe(new f);w.on("error",function(x){y(x)}).on("end",function(){w.streamInfo.crc32!==_.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}n.exports=function(_,g){var y=this;return g=o.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:u.utf8decode}),v.isNode&&v.isStream(_)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",_,!0,g.optimizedBinaryString,g.base64).then(function(w){var x=new d(g);return x.load(w),x}).then(function(w){var x=[s.Promise.resolve(w)],k=w.files;if(g.checkCRC32)for(var S=0;S<k.length;S++)x.push(m(k[S]));return s.Promise.all(x)}).then(function(w){for(var x=w.shift(),k=x.files,S=0;S<k.length;S++){var E=k[S],T=E.fileNameStr,M=o.resolve(E.fileNameStr);y.file(M,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:g.createFolders}),E.dir||(y.file(M).unsafeOriginalName=T)}return x.zipComment.length&&(y.comment=x.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,n,r){var o=e("../utils"),s=e("../stream/GenericWorker");function u(d,f){s.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(f)}o.inherits(u,s),u.prototype._bindStream=function(d){var f=this;(this._stream=d).pause(),d.on("data",function(v){f.push({data:v,meta:{percent:0}})}).on("error",function(v){f.isPaused?this.generatedError=v:f.error(v)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},u.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},u.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=u},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,n,r){var o=e("readable-stream").Readable;function s(u,d,f){o.call(this,d),this._helper=u;var v=this;u.on("data",function(m,_){v.push(m)||v._helper.pause(),f&&f(_)}).on("error",function(m){v.emit("error",m)}).on("end",function(){v.push(null)})}e("../utils").inherits(s,o),s.prototype._read=function(){this._helper.resume()},n.exports=s},{"../utils":32,"readable-stream":16}],14:[function(e,n,r){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,s);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,s)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var s=new Buffer(o);return s.fill(0),s},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(e,n,r){function o(M,I,F){var O,N=u.getTypeOf(I),D=u.extend(F||{},v);D.date=D.date||new Date,D.compression!==null&&(D.compression=D.compression.toUpperCase()),typeof D.unixPermissions=="string"&&(D.unixPermissions=parseInt(D.unixPermissions,8)),D.unixPermissions&&16384&D.unixPermissions&&(D.dir=!0),D.dosPermissions&&16&D.dosPermissions&&(D.dir=!0),D.dir&&(M=k(M)),D.createFolders&&(O=x(M))&&S.call(this,O,!0);var X=N==="string"&&D.binary===!1&&D.base64===!1;F&&F.binary!==void 0||(D.binary=!X),(I instanceof m&&I.uncompressedSize===0||D.dir||!I||I.length===0)&&(D.base64=!1,D.binary=!0,I="",D.compression="STORE",N="string");var U=null;U=I instanceof m||I instanceof d?I:y.isNode&&y.isStream(I)?new w(M,I):u.prepareContent(M,I,D.binary,D.optimizedBinaryString,D.base64);var Z=new _(M,U,D);this.files[M]=Z}var s=e("./utf8"),u=e("./utils"),d=e("./stream/GenericWorker"),f=e("./stream/StreamHelper"),v=e("./defaults"),m=e("./compressedObject"),_=e("./zipObject"),g=e("./generate"),y=e("./nodejsUtils"),w=e("./nodejs/NodejsStreamInputAdapter"),x=function(M){M.slice(-1)==="/"&&(M=M.substring(0,M.length-1));var I=M.lastIndexOf("/");return 0<I?M.substring(0,I):""},k=function(M){return M.slice(-1)!=="/"&&(M+="/"),M},S=function(M,I){return I=I!==void 0?I:v.createFolders,M=k(M),this.files[M]||o.call(this,M,null,{dir:!0,createFolders:I}),this.files[M]};function E(M){return Object.prototype.toString.call(M)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(M){var I,F,O;for(I in this.files)O=this.files[I],(F=I.slice(this.root.length,I.length))&&I.slice(0,this.root.length)===this.root&&M(F,O)},filter:function(M){var I=[];return this.forEach(function(F,O){M(F,O)&&I.push(O)}),I},file:function(M,I,F){if(arguments.length!==1)return M=this.root+M,o.call(this,M,I,F),this;if(E(M)){var O=M;return this.filter(function(D,X){return!X.dir&&O.test(D)})}var N=this.files[this.root+M];return N&&!N.dir?N:null},folder:function(M){if(!M)return this;if(E(M))return this.filter(function(N,D){return D.dir&&M.test(N)});var I=this.root+M,F=S.call(this,I),O=this.clone();return O.root=F.name,O},remove:function(M){M=this.root+M;var I=this.files[M];if(I||(M.slice(-1)!=="/"&&(M+="/"),I=this.files[M]),I&&!I.dir)delete this.files[M];else for(var F=this.filter(function(N,D){return D.name.slice(0,M.length)===M}),O=0;O<F.length;O++)delete this.files[F[O].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(M){var I,F={};try{if((F=u.extend(M||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=F.type.toLowerCase(),F.compression=F.compression.toUpperCase(),F.type==="binarystring"&&(F.type="string"),!F.type)throw new Error("No output type specified.");u.checkSupport(F.type),F.platform!=="darwin"&&F.platform!=="freebsd"&&F.platform!=="linux"&&F.platform!=="sunos"||(F.platform="UNIX"),F.platform==="win32"&&(F.platform="DOS");var O=F.comment||this.comment||"";I=g.generateWorker(this,F,O)}catch(N){(I=new d("error")).error(N)}return new f(I,F.type||"string",F.mimeType)},generateAsync:function(M,I){return this.generateInternalStream(M).accumulate(I)},generateNodeStream:function(M,I){return(M=M||{}).type||(M.type="nodebuffer"),this.generateInternalStream(M).toNodejsStream(I)}};n.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,n,r){n.exports=e("stream")},{stream:void 0}],17:[function(e,n,r){var o=e("./DataReader");function s(u){o.call(this,u);for(var d=0;d<this.data.length;d++)u[d]=255&u[d]}e("../utils").inherits(s,o),s.prototype.byteAt=function(u){return this.data[this.zero+u]},s.prototype.lastIndexOfSignature=function(u){for(var d=u.charCodeAt(0),f=u.charCodeAt(1),v=u.charCodeAt(2),m=u.charCodeAt(3),_=this.length-4;0<=_;--_)if(this.data[_]===d&&this.data[_+1]===f&&this.data[_+2]===v&&this.data[_+3]===m)return _-this.zero;return-1},s.prototype.readAndCheckSignature=function(u){var d=u.charCodeAt(0),f=u.charCodeAt(1),v=u.charCodeAt(2),m=u.charCodeAt(3),_=this.readData(4);return d===_[0]&&f===_[1]&&v===_[2]&&m===_[3]},s.prototype.readData=function(u){if(this.checkOffset(u),u===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},n.exports=s},{"../utils":32,"./DataReader":18}],18:[function(e,n,r){var o=e("../utils");function s(u){this.data=u,this.length=u.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(u){this.checkIndex(this.index+u)},checkIndex:function(u){if(this.length<this.zero+u||u<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+u+"). Corrupted zip ?")},setIndex:function(u){this.checkIndex(u),this.index=u},skip:function(u){this.setIndex(this.index+u)},byteAt:function(){},readInt:function(u){var d,f=0;for(this.checkOffset(u),d=this.index+u-1;d>=this.index;d--)f=(f<<8)+this.byteAt(d);return this.index+=u,f},readString:function(u){return o.transformTo("string",this.readData(u))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var u=this.readInt(4);return new Date(Date.UTC(1980+(u>>25&127),(u>>21&15)-1,u>>16&31,u>>11&31,u>>5&63,(31&u)<<1))}},n.exports=s},{"../utils":32}],19:[function(e,n,r){var o=e("./Uint8ArrayReader");function s(u){o.call(this,u)}e("../utils").inherits(s,o),s.prototype.readData=function(u){this.checkOffset(u);var d=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},n.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,n,r){var o=e("./DataReader");function s(u){o.call(this,u)}e("../utils").inherits(s,o),s.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},s.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},s.prototype.readAndCheckSignature=function(u){return u===this.readData(4)},s.prototype.readData=function(u){this.checkOffset(u);var d=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},n.exports=s},{"../utils":32,"./DataReader":18}],21:[function(e,n,r){var o=e("./ArrayReader");function s(u){o.call(this,u)}e("../utils").inherits(s,o),s.prototype.readData=function(u){if(this.checkOffset(u),u===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},n.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(e,n,r){var o=e("../utils"),s=e("../support"),u=e("./ArrayReader"),d=e("./StringReader"),f=e("./NodeBufferReader"),v=e("./Uint8ArrayReader");n.exports=function(m){var _=o.getTypeOf(m);return o.checkSupport(_),_!=="string"||s.uint8array?_==="nodebuffer"?new f(m):s.uint8array?new v(o.transformTo("uint8array",m)):new u(o.transformTo("array",m)):new d(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,n,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,n,r){var o=e("./GenericWorker"),s=e("../utils");function u(d){o.call(this,"ConvertWorker to "+d),this.destType=d}s.inherits(u,o),u.prototype.processChunk=function(d){this.push({data:s.transformTo(this.destType,d.data),meta:d.meta})},n.exports=u},{"../utils":32,"./GenericWorker":28}],25:[function(e,n,r){var o=e("./GenericWorker"),s=e("../crc32");function u(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(u,o),u.prototype.processChunk=function(d){this.streamInfo.crc32=s(d.data,this.streamInfo.crc32||0),this.push(d)},n.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,n,r){var o=e("../utils"),s=e("./GenericWorker");function u(d){s.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}o.inherits(u,s),u.prototype.processChunk=function(d){if(d){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+d.data.length}s.prototype.processChunk.call(this,d)},n.exports=u},{"../utils":32,"./GenericWorker":28}],27:[function(e,n,r){var o=e("../utils"),s=e("./GenericWorker");function u(d){s.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(v){f.dataIsReady=!0,f.data=v,f.max=v&&v.length||0,f.type=o.getTypeOf(v),f.isPaused||f._tickAndRepeat()},function(v){f.error(v)})}o.inherits(u,s),u.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,f);break;case"uint8array":d=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":d=this.data.slice(this.index,f)}return this.index=f,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(e,n,r){function o(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,u){return this._listeners[s].push(u),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,u){if(this._listeners[s])for(var d=0;d<this._listeners[s].length;d++)this._listeners[s][d].call(this,u)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var u=this;return s.on("data",function(d){u.processChunk(d)}),s.on("end",function(){u.end()}),s.on("error",function(d){u.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,u){return this.extraStreamInfo[s]=u,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},n.exports=o},{}],29:[function(e,n,r){var o=e("../utils"),s=e("./ConvertWorker"),u=e("./GenericWorker"),d=e("../base64"),f=e("../support"),v=e("../external"),m=null;if(f.nodestream)try{m=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function _(y,w){return new v.Promise(function(x,k){var S=[],E=y._internalType,T=y._outputType,M=y._mimeType;y.on("data",function(I,F){S.push(I),w&&w(F)}).on("error",function(I){S=[],k(I)}).on("end",function(){try{var I=function(F,O,N){switch(F){case"blob":return o.newBlob(o.transformTo("arraybuffer",O),N);case"base64":return d.encode(O);default:return o.transformTo(F,O)}}(T,function(F,O){var N,D=0,X=null,U=0;for(N=0;N<O.length;N++)U+=O[N].length;switch(F){case"string":return O.join("");case"array":return Array.prototype.concat.apply([],O);case"uint8array":for(X=new Uint8Array(U),N=0;N<O.length;N++)X.set(O[N],D),D+=O[N].length;return X;case"nodebuffer":return Buffer.concat(O);default:throw new Error("concat : unsupported type '"+F+"'")}}(E,S),M);x(I)}catch(F){k(F)}S=[]}).resume()})}function g(y,w,x){var k=w;switch(w){case"blob":case"arraybuffer":k="uint8array";break;case"base64":k="string"}try{this._internalType=k,this._outputType=w,this._mimeType=x,o.checkSupport(k),this._worker=y.pipe(new s(k)),y.lock()}catch(S){this._worker=new u("error"),this._worker.error(S)}}g.prototype={accumulate:function(y){return _(this,y)},on:function(y,w){var x=this;return y==="data"?this._worker.on(y,function(k){w.call(x,k.data,k.meta)}):this._worker.on(y,function(){o.delay(w,arguments,x)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},y)}},n.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,n,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var o=new ArrayBuffer(0);try{r.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(o),r.blob=s.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(e,n,r){for(var o=e("./utils"),s=e("./support"),u=e("./nodejsUtils"),d=e("./stream/GenericWorker"),f=new Array(256),v=0;v<256;v++)f[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;function m(){d.call(this,"utf-8 decode"),this.leftOver=null}function _(){d.call(this,"utf-8 encode")}f[254]=f[254]=1,r.utf8encode=function(g){return s.nodebuffer?u.newBufferFrom(g,"utf-8"):function(y){var w,x,k,S,E,T=y.length,M=0;for(S=0;S<T;S++)(64512&(x=y.charCodeAt(S)))==55296&&S+1<T&&(64512&(k=y.charCodeAt(S+1)))==56320&&(x=65536+(x-55296<<10)+(k-56320),S++),M+=x<128?1:x<2048?2:x<65536?3:4;for(w=s.uint8array?new Uint8Array(M):new Array(M),S=E=0;E<M;S++)(64512&(x=y.charCodeAt(S)))==55296&&S+1<T&&(64512&(k=y.charCodeAt(S+1)))==56320&&(x=65536+(x-55296<<10)+(k-56320),S++),x<128?w[E++]=x:(x<2048?w[E++]=192|x>>>6:(x<65536?w[E++]=224|x>>>12:(w[E++]=240|x>>>18,w[E++]=128|x>>>12&63),w[E++]=128|x>>>6&63),w[E++]=128|63&x);return w}(g)},r.utf8decode=function(g){return s.nodebuffer?o.transformTo("nodebuffer",g).toString("utf-8"):function(y){var w,x,k,S,E=y.length,T=new Array(2*E);for(w=x=0;w<E;)if((k=y[w++])<128)T[x++]=k;else if(4<(S=f[k]))T[x++]=65533,w+=S-1;else{for(k&=S===2?31:S===3?15:7;1<S&&w<E;)k=k<<6|63&y[w++],S--;1<S?T[x++]=65533:k<65536?T[x++]=k:(k-=65536,T[x++]=55296|k>>10&1023,T[x++]=56320|1023&k)}return T.length!==x&&(T.subarray?T=T.subarray(0,x):T.length=x),o.applyFromCharCode(T)}(g=o.transformTo(s.uint8array?"uint8array":"array",g))},o.inherits(m,d),m.prototype.processChunk=function(g){var y=o.transformTo(s.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var w=y;(y=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),y.set(w,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var x=function(S,E){var T;for((E=E||S.length)>S.length&&(E=S.length),T=E-1;0<=T&&(192&S[T])==128;)T--;return T<0||T===0?E:T+f[S[T]]>E?T:E}(y),k=y;x!==y.length&&(s.uint8array?(k=y.subarray(0,x),this.leftOver=y.subarray(x,y.length)):(k=y.slice(0,x),this.leftOver=y.slice(x,y.length))),this.push({data:r.utf8decode(k),meta:g.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=m,o.inherits(_,d),_.prototype.processChunk=function(g){this.push({data:r.utf8encode(g.data),meta:g.meta})},r.Utf8EncodeWorker=_},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,n,r){var o=e("./support"),s=e("./base64"),u=e("./nodejsUtils"),d=e("./external");function f(w){return w}function v(w,x){for(var k=0;k<w.length;++k)x[k]=255&w.charCodeAt(k);return x}e("setimmediate"),r.newBlob=function(w,x){r.checkSupport("blob");try{return new Blob([w],{type:x})}catch{try{var k=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return k.append(w),k.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(w,x,k){var S=[],E=0,T=w.length;if(T<=k)return String.fromCharCode.apply(null,w);for(;E<T;)x==="array"||x==="nodebuffer"?S.push(String.fromCharCode.apply(null,w.slice(E,Math.min(E+k,T)))):S.push(String.fromCharCode.apply(null,w.subarray(E,Math.min(E+k,T)))),E+=k;return S.join("")},stringifyByChar:function(w){for(var x="",k=0;k<w.length;k++)x+=String.fromCharCode(w[k]);return x},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,u.allocBuffer(1)).length===1}catch{return!1}}()}};function _(w){var x=65536,k=r.getTypeOf(w),S=!0;if(k==="uint8array"?S=m.applyCanBeUsed.uint8array:k==="nodebuffer"&&(S=m.applyCanBeUsed.nodebuffer),S)for(;1<x;)try{return m.stringifyByChunk(w,k,x)}catch{x=Math.floor(x/2)}return m.stringifyByChar(w)}function g(w,x){for(var k=0;k<w.length;k++)x[k]=w[k];return x}r.applyFromCharCode=_;var y={};y.string={string:f,array:function(w){return v(w,new Array(w.length))},arraybuffer:function(w){return y.string.uint8array(w).buffer},uint8array:function(w){return v(w,new Uint8Array(w.length))},nodebuffer:function(w){return v(w,u.allocBuffer(w.length))}},y.array={string:_,array:f,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return u.newBufferFrom(w)}},y.arraybuffer={string:function(w){return _(new Uint8Array(w))},array:function(w){return g(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:f,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return u.newBufferFrom(new Uint8Array(w))}},y.uint8array={string:_,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:f,nodebuffer:function(w){return u.newBufferFrom(w)}},y.nodebuffer={string:_,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return y.nodebuffer.uint8array(w).buffer},uint8array:function(w){return g(w,new Uint8Array(w.length))},nodebuffer:f},r.transformTo=function(w,x){if(x=x||"",!w)return x;r.checkSupport(w);var k=r.getTypeOf(x);return y[k][w](x)},r.resolve=function(w){for(var x=w.split("/"),k=[],S=0;S<x.length;S++){var E=x[S];E==="."||E===""&&S!==0&&S!==x.length-1||(E===".."?k.pop():k.push(E))}return k.join("/")},r.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":o.nodebuffer&&u.isBuffer(w)?"nodebuffer":o.uint8array&&w instanceof Uint8Array?"uint8array":o.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(w){if(!o[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(w){var x,k,S="";for(k=0;k<(w||"").length;k++)S+="\\x"+((x=w.charCodeAt(k))<16?"0":"")+x.toString(16).toUpperCase();return S},r.delay=function(w,x,k){setImmediate(function(){w.apply(k||null,x||[])})},r.inherits=function(w,x){function k(){}k.prototype=x.prototype,w.prototype=new k},r.extend=function(){var w,x,k={};for(w=0;w<arguments.length;w++)for(x in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],x)&&k[x]===void 0&&(k[x]=arguments[w][x]);return k},r.prepareContent=function(w,x,k,S,E){return d.Promise.resolve(x).then(function(T){return o.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new d.Promise(function(M,I){var F=new FileReader;F.onload=function(O){M(O.target.result)},F.onerror=function(O){I(O.target.error)},F.readAsArrayBuffer(T)}):T}).then(function(T){var M=r.getTypeOf(T);return M?(M==="arraybuffer"?T=r.transformTo("uint8array",T):M==="string"&&(E?T=s.decode(T):k&&S!==!0&&(T=function(I){return v(I,o.uint8array?new Uint8Array(I.length):new Array(I.length))}(T))),T):d.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,n,r){var o=e("./reader/readerFor"),s=e("./utils"),u=e("./signature"),d=e("./zipEntry"),f=e("./support");function v(m){this.files=[],this.loadOptions=m}v.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var _=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(_)+", expected "+s.pretty(m)+")")}},isSignature:function(m,_){var g=this.reader.index;this.reader.setIndex(m);var y=this.reader.readString(4)===_;return this.reader.setIndex(g),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),_=f.uint8array?"uint8array":"array",g=s.transformTo(_,m);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,_,g,y=this.zip64EndOfCentralSize-44;0<y;)m=this.reader.readInt(2),_=this.reader.readInt(4),g=this.reader.readData(_),this.zip64ExtensibleData[m]={id:m,length:_,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,_;for(m=0;m<this.files.length;m++)_=this.files[m],this.reader.setIndex(_.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),_.readLocalPart(this.reader),_.handleUTF8(),_.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(u.CENTRAL_FILE_HEADER);)(m=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,u.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var _=m;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var y=_-g;if(0<y)this.isSignature(_,u.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(m){this.reader=o(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=v},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,n,r){var o=e("./reader/readerFor"),s=e("./utils"),u=e("./compressedObject"),d=e("./crc32"),f=e("./utf8"),v=e("./compressions"),m=e("./support");function _(g,y){this.options=g,this.loadOptions=y}_.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var y,w;if(g.skip(22),this.fileNameLength=g.readInt(2),w=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(x){for(var k in v)if(Object.prototype.hasOwnProperty.call(v,k)&&v[k].magic===x)return v[k];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new u(this.compressedSize,this.uncompressedSize,this.crc32,y,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var y=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(y),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=o(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var y,w,x,k=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<k;)y=g.readInt(2),w=g.readInt(2),x=g.readData(w),this.extraFields[y]={id:y,length:w,value:x};g.setIndex(k)},handleUTF8:function(){var g=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var w=s.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var k=s.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(k)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var y=o(g.value);return y.readInt(1)!==1||d(this.fileName)!==y.readInt(4)?null:f.utf8decode(y.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var y=o(g.value);return y.readInt(1)!==1||d(this.fileComment)!==y.readInt(4)?null:f.utf8decode(y.readData(g.length-5))}return null}},n.exports=_},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,n,r){function o(y,w,x){this.name=y,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=w,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var s=e("./stream/StreamHelper"),u=e("./stream/DataWorker"),d=e("./utf8"),f=e("./compressedObject"),v=e("./stream/GenericWorker");o.prototype={internalStream:function(y){var w=null,x="string";try{if(!y)throw new Error("No output type specified.");var k=(x=y.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),w=this._decompressWorker();var S=!this._dataBinary;S&&!k&&(w=w.pipe(new d.Utf8EncodeWorker)),!S&&k&&(w=w.pipe(new d.Utf8DecodeWorker))}catch(E){(w=new v("error")).error(E)}return new s(w,x,"")},async:function(y,w){return this.internalStream(y).accumulate(w)},nodeStream:function(y,w){return this.internalStream(y||"nodebuffer").toNodejsStream(w)},_compressWorker:function(y,w){if(this._data instanceof f&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new d.Utf8EncodeWorker)),f.createWorkerFrom(x,y,w)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof v?this._data:new u(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],_=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<m.length;g++)o.prototype[m[g]]=_;n.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,n,r){(function(o){var s,u,d=o.MutationObserver||o.WebKitMutationObserver;if(d){var f=0,v=new d(y),m=o.document.createTextNode("");v.observe(m,{characterData:!0}),s=function(){m.data=f=++f%2}}else if(o.setImmediate||o.MessageChannel===void 0)s="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var w=o.document.createElement("script");w.onreadystatechange=function(){y(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},o.document.documentElement.appendChild(w)}:function(){setTimeout(y,0)};else{var _=new o.MessageChannel;_.port1.onmessage=y,s=function(){_.port2.postMessage(0)}}var g=[];function y(){var w,x;u=!0;for(var k=g.length;k;){for(x=g,g=[],w=-1;++w<k;)x[w]();k=g.length}u=!1}n.exports=function(w){g.push(w)!==1||u||s()}}).call(this,commonjsGlobal!==void 0?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,n,r){var o=e("immediate");function s(){}var u={},d=["REJECTED"],f=["FULFILLED"],v=["PENDING"];function m(k){if(typeof k!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,k!==s&&w(this,k)}function _(k,S,E){this.promise=k,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function g(k,S,E){o(function(){var T;try{T=S(E)}catch(M){return u.reject(k,M)}T===k?u.reject(k,new TypeError("Cannot resolve promise with itself")):u.resolve(k,T)})}function y(k){var S=k&&k.then;if(k&&(_typeof$1(k)=="object"||typeof k=="function")&&typeof S=="function")return function(){S.apply(k,arguments)}}function w(k,S){var E=!1;function T(F){E||(E=!0,u.reject(k,F))}function M(F){E||(E=!0,u.resolve(k,F))}var I=x(function(){S(M,T)});I.status==="error"&&T(I.value)}function x(k,S){var E={};try{E.value=k(S),E.status="success"}catch(T){E.status="error",E.value=T}return E}(n.exports=m).prototype.finally=function(k){if(typeof k!="function")return this;var S=this.constructor;return this.then(function(E){return S.resolve(k()).then(function(){return E})},function(E){return S.resolve(k()).then(function(){throw E})})},m.prototype.catch=function(k){return this.then(null,k)},m.prototype.then=function(k,S){if(typeof k!="function"&&this.state===f||typeof S!="function"&&this.state===d)return this;var E=new this.constructor(s);return this.state!==v?g(E,this.state===f?k:S,this.outcome):this.queue.push(new _(E,k,S)),E},_.prototype.callFulfilled=function(k){u.resolve(this.promise,k)},_.prototype.otherCallFulfilled=function(k){g(this.promise,this.onFulfilled,k)},_.prototype.callRejected=function(k){u.reject(this.promise,k)},_.prototype.otherCallRejected=function(k){g(this.promise,this.onRejected,k)},u.resolve=function(k,S){var E=x(y,S);if(E.status==="error")return u.reject(k,E.value);var T=E.value;if(T)w(k,T);else{k.state=f,k.outcome=S;for(var M=-1,I=k.queue.length;++M<I;)k.queue[M].callFulfilled(S)}return k},u.reject=function(k,S){k.state=d,k.outcome=S;for(var E=-1,T=k.queue.length;++E<T;)k.queue[E].callRejected(S);return k},m.resolve=function(k){return k instanceof this?k:u.resolve(new this(s),k)},m.reject=function(k){var S=new this(s);return u.reject(S,k)},m.all=function(k){var S=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=k.length,T=!1;if(!E)return this.resolve([]);for(var M=new Array(E),I=0,F=-1,O=new this(s);++F<E;)N(k[F],F);return O;function N(D,X){S.resolve(D).then(function(U){M[X]=U,++I!==E||T||(T=!0,u.resolve(O,M))},function(U){T||(T=!0,u.reject(O,U))})}},m.race=function(k){var S=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=k.length,T=!1;if(!E)return this.resolve([]);for(var M,I=-1,F=new this(s);++I<E;)M=k[I],S.resolve(M).then(function(O){T||(T=!0,u.resolve(F,O))},function(O){T||(T=!0,u.reject(F,O))});return F}},{immediate:36}],38:[function(e,n,r){var o={};(0,e("./lib/utils/common").assign)(o,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),n.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,n,r){var o=e("./zlib/deflate"),s=e("./utils/common"),u=e("./utils/strings"),d=e("./zlib/messages"),f=e("./zlib/zstream"),v=Object.prototype.toString,m=0,_=-1,g=0,y=8;function w(k){if(!(this instanceof w))return new w(k);this.options=s.assign({level:_,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},k||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var E=o.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(E!==m)throw new Error(d[E]);if(S.header&&o.deflateSetHeader(this.strm,S.header),S.dictionary){var T;if(T=typeof S.dictionary=="string"?u.string2buf(S.dictionary):v.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(E=o.deflateSetDictionary(this.strm,T))!==m)throw new Error(d[E]);this._dict_set=!0}}function x(k,S){var E=new w(S);if(E.push(k,!0),E.err)throw E.msg||d[E.err];return E.result}w.prototype.push=function(k,S){var E,T,M=this.strm,I=this.options.chunkSize;if(this.ended)return!1;T=S===~~S?S:S===!0?4:0,typeof k=="string"?M.input=u.string2buf(k):v.call(k)==="[object ArrayBuffer]"?M.input=new Uint8Array(k):M.input=k,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new s.Buf8(I),M.next_out=0,M.avail_out=I),(E=o.deflate(M,T))!==1&&E!==m)return this.onEnd(E),!(this.ended=!0);M.avail_out!==0&&(M.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(u.buf2binstring(s.shrinkBuf(M.output,M.next_out))):this.onData(s.shrinkBuf(M.output,M.next_out)))}while((0<M.avail_in||M.avail_out===0)&&E!==1);return T===4?(E=o.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===m):T!==2||(this.onEnd(m),!(M.avail_out=0))},w.prototype.onData=function(k){this.chunks.push(k)},w.prototype.onEnd=function(k){k===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=k,this.msg=this.strm.msg},r.Deflate=w,r.deflate=x,r.deflateRaw=function(k,S){return(S=S||{}).raw=!0,x(k,S)},r.gzip=function(k,S){return(S=S||{}).gzip=!0,x(k,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,n,r){var o=e("./zlib/inflate"),s=e("./utils/common"),u=e("./utils/strings"),d=e("./zlib/constants"),f=e("./zlib/messages"),v=e("./zlib/zstream"),m=e("./zlib/gzheader"),_=Object.prototype.toString;function g(w){if(!(this instanceof g))return new g(w);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},w||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||w&&w.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&(15&x.windowBits)==0&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var k=o.inflateInit2(this.strm,x.windowBits);if(k!==d.Z_OK)throw new Error(f[k]);this.header=new m,o.inflateGetHeader(this.strm,this.header)}function y(w,x){var k=new g(x);if(k.push(w,!0),k.err)throw k.msg||f[k.err];return k.result}g.prototype.push=function(w,x){var k,S,E,T,M,I,F=this.strm,O=this.options.chunkSize,N=this.options.dictionary,D=!1;if(this.ended)return!1;S=x===~~x?x:x===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof w=="string"?F.input=u.binstring2buf(w):_.call(w)==="[object ArrayBuffer]"?F.input=new Uint8Array(w):F.input=w,F.next_in=0,F.avail_in=F.input.length;do{if(F.avail_out===0&&(F.output=new s.Buf8(O),F.next_out=0,F.avail_out=O),(k=o.inflate(F,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&N&&(I=typeof N=="string"?u.string2buf(N):_.call(N)==="[object ArrayBuffer]"?new Uint8Array(N):N,k=o.inflateSetDictionary(this.strm,I)),k===d.Z_BUF_ERROR&&D===!0&&(k=d.Z_OK,D=!1),k!==d.Z_STREAM_END&&k!==d.Z_OK)return this.onEnd(k),!(this.ended=!0);F.next_out&&(F.avail_out!==0&&k!==d.Z_STREAM_END&&(F.avail_in!==0||S!==d.Z_FINISH&&S!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=u.utf8border(F.output,F.next_out),T=F.next_out-E,M=u.buf2string(F.output,E),F.next_out=T,F.avail_out=O-T,T&&s.arraySet(F.output,F.output,E,T,0),this.onData(M)):this.onData(s.shrinkBuf(F.output,F.next_out)))),F.avail_in===0&&F.avail_out===0&&(D=!0)}while((0<F.avail_in||F.avail_out===0)&&k!==d.Z_STREAM_END);return k===d.Z_STREAM_END&&(S=d.Z_FINISH),S===d.Z_FINISH?(k=o.inflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===d.Z_OK):S!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(F.avail_out=0))},g.prototype.onData=function(w){this.chunks.push(w)},g.prototype.onEnd=function(w){w===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},r.Inflate=g,r.inflate=y,r.inflateRaw=function(w,x){return(x=x||{}).raw=!0,y(w,x)},r.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,n,r){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(d){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var v=f.shift();if(v){if(_typeof$1(v)!="object")throw new TypeError(v+"must be non-object");for(var m in v)v.hasOwnProperty(m)&&(d[m]=v[m])}}return d},r.shrinkBuf=function(d,f){return d.length===f?d:d.subarray?d.subarray(0,f):(d.length=f,d)};var s={arraySet:function(d,f,v,m,_){if(f.subarray&&d.subarray)d.set(f.subarray(v,v+m),_);else for(var g=0;g<m;g++)d[_+g]=f[v+g]},flattenChunks:function(d){var f,v,m,_,g,y;for(f=m=0,v=d.length;f<v;f++)m+=d[f].length;for(y=new Uint8Array(m),f=_=0,v=d.length;f<v;f++)g=d[f],y.set(g,_),_+=g.length;return y}},u={arraySet:function(d,f,v,m,_){for(var g=0;g<m;g++)d[_+g]=f[v+g]},flattenChunks:function(d){return[].concat.apply([],d)}};r.setTyped=function(d){d?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,s)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,u))},r.setTyped(o)},{}],42:[function(e,n,r){var o=e("./common"),s=!0,u=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{u=!1}for(var d=new o.Buf8(256),f=0;f<256;f++)d[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function v(m,_){if(_<65537&&(m.subarray&&u||!m.subarray&&s))return String.fromCharCode.apply(null,o.shrinkBuf(m,_));for(var g="",y=0;y<_;y++)g+=String.fromCharCode(m[y]);return g}d[254]=d[254]=1,r.string2buf=function(m){var _,g,y,w,x,k=m.length,S=0;for(w=0;w<k;w++)(64512&(g=m.charCodeAt(w)))==55296&&w+1<k&&(64512&(y=m.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(y-56320),w++),S+=g<128?1:g<2048?2:g<65536?3:4;for(_=new o.Buf8(S),w=x=0;x<S;w++)(64512&(g=m.charCodeAt(w)))==55296&&w+1<k&&(64512&(y=m.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(y-56320),w++),g<128?_[x++]=g:(g<2048?_[x++]=192|g>>>6:(g<65536?_[x++]=224|g>>>12:(_[x++]=240|g>>>18,_[x++]=128|g>>>12&63),_[x++]=128|g>>>6&63),_[x++]=128|63&g);return _},r.buf2binstring=function(m){return v(m,m.length)},r.binstring2buf=function(m){for(var _=new o.Buf8(m.length),g=0,y=_.length;g<y;g++)_[g]=m.charCodeAt(g);return _},r.buf2string=function(m,_){var g,y,w,x,k=_||m.length,S=new Array(2*k);for(g=y=0;g<k;)if((w=m[g++])<128)S[y++]=w;else if(4<(x=d[w]))S[y++]=65533,g+=x-1;else{for(w&=x===2?31:x===3?15:7;1<x&&g<k;)w=w<<6|63&m[g++],x--;1<x?S[y++]=65533:w<65536?S[y++]=w:(w-=65536,S[y++]=55296|w>>10&1023,S[y++]=56320|1023&w)}return v(S,y)},r.utf8border=function(m,_){var g;for((_=_||m.length)>m.length&&(_=m.length),g=_-1;0<=g&&(192&m[g])==128;)g--;return g<0||g===0?_:g+d[m[g]]>_?g:_}},{"./common":41}],43:[function(e,n,r){n.exports=function(o,s,u,d){for(var f=65535&o|0,v=o>>>16&65535|0,m=0;u!==0;){for(u-=m=2e3<u?2e3:u;v=v+(f=f+s[d++]|0)|0,--m;);f%=65521,v%=65521}return f|v<<16|0}},{}],44:[function(e,n,r){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,n,r){var o=function(){for(var s,u=[],d=0;d<256;d++){s=d;for(var f=0;f<8;f++)s=1&s?3988292384^s>>>1:s>>>1;u[d]=s}return u}();n.exports=function(s,u,d,f){var v=o,m=f+d;s^=-1;for(var _=f;_<m;_++)s=s>>>8^v[255&(s^u[_])];return-1^s}},{}],46:[function(e,n,r){var o,s=e("../utils/common"),u=e("./trees"),d=e("./adler32"),f=e("./crc32"),v=e("./messages"),m=0,_=4,g=0,y=-2,w=-1,x=4,k=2,S=8,E=9,T=286,M=30,I=19,F=2*T+1,O=15,N=3,D=258,X=D+N+1,U=42,Z=113,j=1,Q=2,ve=3,Se=4;function we(J,fe){return J.msg=v[fe],fe}function oe(J){return(J<<1)-(4<J?9:0)}function ne(J){for(var fe=J.length;0<=--fe;)J[fe]=0}function q(J){var fe=J.state,re=fe.pending;re>J.avail_out&&(re=J.avail_out),re!==0&&(s.arraySet(J.output,fe.pending_buf,fe.pending_out,re,J.next_out),J.next_out+=re,fe.pending_out+=re,J.total_out+=re,J.avail_out-=re,fe.pending-=re,fe.pending===0&&(fe.pending_out=0))}function H(J,fe){u._tr_flush_block(J,0<=J.block_start?J.block_start:-1,J.strstart-J.block_start,fe),J.block_start=J.strstart,q(J.strm)}function Y(J,fe){J.pending_buf[J.pending++]=fe}function le(J,fe){J.pending_buf[J.pending++]=fe>>>8&255,J.pending_buf[J.pending++]=255&fe}function Ce(J,fe){var re,_e,be=J.max_chain_length,Ae=J.strstart,Le=J.prev_length,Ve=J.nice_match,Fe=J.strstart>J.w_size-X?J.strstart-(J.w_size-X):0,De=J.window,We=J.w_mask,Re=J.prev,He=J.strstart+D,Ze=De[Ae+Le-1],Xe=De[Ae+Le];J.prev_length>=J.good_match&&(be>>=2),Ve>J.lookahead&&(Ve=J.lookahead);do if(De[(re=fe)+Le]===Xe&&De[re+Le-1]===Ze&&De[re]===De[Ae]&&De[++re]===De[Ae+1]){Ae+=2,re++;do;while(De[++Ae]===De[++re]&&De[++Ae]===De[++re]&&De[++Ae]===De[++re]&&De[++Ae]===De[++re]&&De[++Ae]===De[++re]&&De[++Ae]===De[++re]&&De[++Ae]===De[++re]&&De[++Ae]===De[++re]&&Ae<He);if(_e=D-(He-Ae),Ae=He-D,Le<_e){if(J.match_start=fe,Ve<=(Le=_e))break;Ze=De[Ae+Le-1],Xe=De[Ae+Le]}}while((fe=Re[fe&We])>Fe&&--be!=0);return Le<=J.lookahead?Le:J.lookahead}function Te(J){var fe,re,_e,be,Ae,Le,Ve,Fe,De,We,Re=J.w_size;do{if(be=J.window_size-J.lookahead-J.strstart,J.strstart>=Re+(Re-X)){for(s.arraySet(J.window,J.window,Re,Re,0),J.match_start-=Re,J.strstart-=Re,J.block_start-=Re,fe=re=J.hash_size;_e=J.head[--fe],J.head[fe]=Re<=_e?_e-Re:0,--re;);for(fe=re=Re;_e=J.prev[--fe],J.prev[fe]=Re<=_e?_e-Re:0,--re;);be+=Re}if(J.strm.avail_in===0)break;if(Le=J.strm,Ve=J.window,Fe=J.strstart+J.lookahead,We=void 0,(De=be)<(We=Le.avail_in)&&(We=De),re=We===0?0:(Le.avail_in-=We,s.arraySet(Ve,Le.input,Le.next_in,We,Fe),Le.state.wrap===1?Le.adler=d(Le.adler,Ve,We,Fe):Le.state.wrap===2&&(Le.adler=f(Le.adler,Ve,We,Fe)),Le.next_in+=We,Le.total_in+=We,We),J.lookahead+=re,J.lookahead+J.insert>=N)for(Ae=J.strstart-J.insert,J.ins_h=J.window[Ae],J.ins_h=(J.ins_h<<J.hash_shift^J.window[Ae+1])&J.hash_mask;J.insert&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[Ae+N-1])&J.hash_mask,J.prev[Ae&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=Ae,Ae++,J.insert--,!(J.lookahead+J.insert<N)););}while(J.lookahead<X&&J.strm.avail_in!==0)}function ke(J,fe){for(var re,_e;;){if(J.lookahead<X){if(Te(J),J.lookahead<X&&fe===m)return j;if(J.lookahead===0)break}if(re=0,J.lookahead>=N&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+N-1])&J.hash_mask,re=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart),re!==0&&J.strstart-re<=J.w_size-X&&(J.match_length=Ce(J,re)),J.match_length>=N)if(_e=u._tr_tally(J,J.strstart-J.match_start,J.match_length-N),J.lookahead-=J.match_length,J.match_length<=J.max_lazy_match&&J.lookahead>=N){for(J.match_length--;J.strstart++,J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+N-1])&J.hash_mask,re=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart,--J.match_length!=0;);J.strstart++}else J.strstart+=J.match_length,J.match_length=0,J.ins_h=J.window[J.strstart],J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+1])&J.hash_mask;else _e=u._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++;if(_e&&(H(J,!1),J.strm.avail_out===0))return j}return J.insert=J.strstart<N-1?J.strstart:N-1,fe===_?(H(J,!0),J.strm.avail_out===0?ve:Se):J.last_lit&&(H(J,!1),J.strm.avail_out===0)?j:Q}function Ee(J,fe){for(var re,_e,be;;){if(J.lookahead<X){if(Te(J),J.lookahead<X&&fe===m)return j;if(J.lookahead===0)break}if(re=0,J.lookahead>=N&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+N-1])&J.hash_mask,re=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart),J.prev_length=J.match_length,J.prev_match=J.match_start,J.match_length=N-1,re!==0&&J.prev_length<J.max_lazy_match&&J.strstart-re<=J.w_size-X&&(J.match_length=Ce(J,re),J.match_length<=5&&(J.strategy===1||J.match_length===N&&4096<J.strstart-J.match_start)&&(J.match_length=N-1)),J.prev_length>=N&&J.match_length<=J.prev_length){for(be=J.strstart+J.lookahead-N,_e=u._tr_tally(J,J.strstart-1-J.prev_match,J.prev_length-N),J.lookahead-=J.prev_length-1,J.prev_length-=2;++J.strstart<=be&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+N-1])&J.hash_mask,re=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart),--J.prev_length!=0;);if(J.match_available=0,J.match_length=N-1,J.strstart++,_e&&(H(J,!1),J.strm.avail_out===0))return j}else if(J.match_available){if((_e=u._tr_tally(J,0,J.window[J.strstart-1]))&&H(J,!1),J.strstart++,J.lookahead--,J.strm.avail_out===0)return j}else J.match_available=1,J.strstart++,J.lookahead--}return J.match_available&&(_e=u._tr_tally(J,0,J.window[J.strstart-1]),J.match_available=0),J.insert=J.strstart<N-1?J.strstart:N-1,fe===_?(H(J,!0),J.strm.avail_out===0?ve:Se):J.last_lit&&(H(J,!1),J.strm.avail_out===0)?j:Q}function Pe(J,fe,re,_e,be){this.good_length=J,this.max_lazy=fe,this.nice_length=re,this.max_chain=_e,this.func=be}function Be(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*F),this.dyn_dtree=new s.Buf16(2*(2*M+1)),this.bl_tree=new s.Buf16(2*(2*I+1)),ne(this.dyn_ltree),ne(this.dyn_dtree),ne(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(O+1),this.heap=new s.Buf16(2*T+1),ne(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*T+1),ne(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function $e(J){var fe;return J&&J.state?(J.total_in=J.total_out=0,J.data_type=k,(fe=J.state).pending=0,fe.pending_out=0,fe.wrap<0&&(fe.wrap=-fe.wrap),fe.status=fe.wrap?U:Z,J.adler=fe.wrap===2?0:1,fe.last_flush=m,u._tr_init(fe),g):we(J,y)}function Oe(J){var fe=$e(J);return fe===g&&function(re){re.window_size=2*re.w_size,ne(re.head),re.max_lazy_match=o[re.level].max_lazy,re.good_match=o[re.level].good_length,re.nice_match=o[re.level].nice_length,re.max_chain_length=o[re.level].max_chain,re.strstart=0,re.block_start=0,re.lookahead=0,re.insert=0,re.match_length=re.prev_length=N-1,re.match_available=0,re.ins_h=0}(J.state),fe}function Ne(J,fe,re,_e,be,Ae){if(!J)return y;var Le=1;if(fe===w&&(fe=6),_e<0?(Le=0,_e=-_e):15<_e&&(Le=2,_e-=16),be<1||E<be||re!==S||_e<8||15<_e||fe<0||9<fe||Ae<0||x<Ae)return we(J,y);_e===8&&(_e=9);var Ve=new Be;return(J.state=Ve).strm=J,Ve.wrap=Le,Ve.gzhead=null,Ve.w_bits=_e,Ve.w_size=1<<Ve.w_bits,Ve.w_mask=Ve.w_size-1,Ve.hash_bits=be+7,Ve.hash_size=1<<Ve.hash_bits,Ve.hash_mask=Ve.hash_size-1,Ve.hash_shift=~~((Ve.hash_bits+N-1)/N),Ve.window=new s.Buf8(2*Ve.w_size),Ve.head=new s.Buf16(Ve.hash_size),Ve.prev=new s.Buf16(Ve.w_size),Ve.lit_bufsize=1<<be+6,Ve.pending_buf_size=4*Ve.lit_bufsize,Ve.pending_buf=new s.Buf8(Ve.pending_buf_size),Ve.d_buf=1*Ve.lit_bufsize,Ve.l_buf=3*Ve.lit_bufsize,Ve.level=fe,Ve.strategy=Ae,Ve.method=re,Oe(J)}o=[new Pe(0,0,0,0,function(J,fe){var re=65535;for(re>J.pending_buf_size-5&&(re=J.pending_buf_size-5);;){if(J.lookahead<=1){if(Te(J),J.lookahead===0&&fe===m)return j;if(J.lookahead===0)break}J.strstart+=J.lookahead,J.lookahead=0;var _e=J.block_start+re;if((J.strstart===0||J.strstart>=_e)&&(J.lookahead=J.strstart-_e,J.strstart=_e,H(J,!1),J.strm.avail_out===0)||J.strstart-J.block_start>=J.w_size-X&&(H(J,!1),J.strm.avail_out===0))return j}return J.insert=0,fe===_?(H(J,!0),J.strm.avail_out===0?ve:Se):(J.strstart>J.block_start&&(H(J,!1),J.strm.avail_out),j)}),new Pe(4,4,8,4,ke),new Pe(4,5,16,8,ke),new Pe(4,6,32,32,ke),new Pe(4,4,16,16,Ee),new Pe(8,16,32,32,Ee),new Pe(8,16,128,128,Ee),new Pe(8,32,128,256,Ee),new Pe(32,128,258,1024,Ee),new Pe(32,258,258,4096,Ee)],r.deflateInit=function(J,fe){return Ne(J,fe,S,15,8,0)},r.deflateInit2=Ne,r.deflateReset=Oe,r.deflateResetKeep=$e,r.deflateSetHeader=function(J,fe){return J&&J.state?J.state.wrap!==2?y:(J.state.gzhead=fe,g):y},r.deflate=function(J,fe){var re,_e,be,Ae;if(!J||!J.state||5<fe||fe<0)return J?we(J,y):y;if(_e=J.state,!J.output||!J.input&&J.avail_in!==0||_e.status===666&&fe!==_)return we(J,J.avail_out===0?-5:y);if(_e.strm=J,re=_e.last_flush,_e.last_flush=fe,_e.status===U)if(_e.wrap===2)J.adler=0,Y(_e,31),Y(_e,139),Y(_e,8),_e.gzhead?(Y(_e,(_e.gzhead.text?1:0)+(_e.gzhead.hcrc?2:0)+(_e.gzhead.extra?4:0)+(_e.gzhead.name?8:0)+(_e.gzhead.comment?16:0)),Y(_e,255&_e.gzhead.time),Y(_e,_e.gzhead.time>>8&255),Y(_e,_e.gzhead.time>>16&255),Y(_e,_e.gzhead.time>>24&255),Y(_e,_e.level===9?2:2<=_e.strategy||_e.level<2?4:0),Y(_e,255&_e.gzhead.os),_e.gzhead.extra&&_e.gzhead.extra.length&&(Y(_e,255&_e.gzhead.extra.length),Y(_e,_e.gzhead.extra.length>>8&255)),_e.gzhead.hcrc&&(J.adler=f(J.adler,_e.pending_buf,_e.pending,0)),_e.gzindex=0,_e.status=69):(Y(_e,0),Y(_e,0),Y(_e,0),Y(_e,0),Y(_e,0),Y(_e,_e.level===9?2:2<=_e.strategy||_e.level<2?4:0),Y(_e,3),_e.status=Z);else{var Le=S+(_e.w_bits-8<<4)<<8;Le|=(2<=_e.strategy||_e.level<2?0:_e.level<6?1:_e.level===6?2:3)<<6,_e.strstart!==0&&(Le|=32),Le+=31-Le%31,_e.status=Z,le(_e,Le),_e.strstart!==0&&(le(_e,J.adler>>>16),le(_e,65535&J.adler)),J.adler=1}if(_e.status===69)if(_e.gzhead.extra){for(be=_e.pending;_e.gzindex<(65535&_e.gzhead.extra.length)&&(_e.pending!==_e.pending_buf_size||(_e.gzhead.hcrc&&_e.pending>be&&(J.adler=f(J.adler,_e.pending_buf,_e.pending-be,be)),q(J),be=_e.pending,_e.pending!==_e.pending_buf_size));)Y(_e,255&_e.gzhead.extra[_e.gzindex]),_e.gzindex++;_e.gzhead.hcrc&&_e.pending>be&&(J.adler=f(J.adler,_e.pending_buf,_e.pending-be,be)),_e.gzindex===_e.gzhead.extra.length&&(_e.gzindex=0,_e.status=73)}else _e.status=73;if(_e.status===73)if(_e.gzhead.name){be=_e.pending;do{if(_e.pending===_e.pending_buf_size&&(_e.gzhead.hcrc&&_e.pending>be&&(J.adler=f(J.adler,_e.pending_buf,_e.pending-be,be)),q(J),be=_e.pending,_e.pending===_e.pending_buf_size)){Ae=1;break}Ae=_e.gzindex<_e.gzhead.name.length?255&_e.gzhead.name.charCodeAt(_e.gzindex++):0,Y(_e,Ae)}while(Ae!==0);_e.gzhead.hcrc&&_e.pending>be&&(J.adler=f(J.adler,_e.pending_buf,_e.pending-be,be)),Ae===0&&(_e.gzindex=0,_e.status=91)}else _e.status=91;if(_e.status===91)if(_e.gzhead.comment){be=_e.pending;do{if(_e.pending===_e.pending_buf_size&&(_e.gzhead.hcrc&&_e.pending>be&&(J.adler=f(J.adler,_e.pending_buf,_e.pending-be,be)),q(J),be=_e.pending,_e.pending===_e.pending_buf_size)){Ae=1;break}Ae=_e.gzindex<_e.gzhead.comment.length?255&_e.gzhead.comment.charCodeAt(_e.gzindex++):0,Y(_e,Ae)}while(Ae!==0);_e.gzhead.hcrc&&_e.pending>be&&(J.adler=f(J.adler,_e.pending_buf,_e.pending-be,be)),Ae===0&&(_e.status=103)}else _e.status=103;if(_e.status===103&&(_e.gzhead.hcrc?(_e.pending+2>_e.pending_buf_size&&q(J),_e.pending+2<=_e.pending_buf_size&&(Y(_e,255&J.adler),Y(_e,J.adler>>8&255),J.adler=0,_e.status=Z)):_e.status=Z),_e.pending!==0){if(q(J),J.avail_out===0)return _e.last_flush=-1,g}else if(J.avail_in===0&&oe(fe)<=oe(re)&&fe!==_)return we(J,-5);if(_e.status===666&&J.avail_in!==0)return we(J,-5);if(J.avail_in!==0||_e.lookahead!==0||fe!==m&&_e.status!==666){var Ve=_e.strategy===2?function(Fe,De){for(var We;;){if(Fe.lookahead===0&&(Te(Fe),Fe.lookahead===0)){if(De===m)return j;break}if(Fe.match_length=0,We=u._tr_tally(Fe,0,Fe.window[Fe.strstart]),Fe.lookahead--,Fe.strstart++,We&&(H(Fe,!1),Fe.strm.avail_out===0))return j}return Fe.insert=0,De===_?(H(Fe,!0),Fe.strm.avail_out===0?ve:Se):Fe.last_lit&&(H(Fe,!1),Fe.strm.avail_out===0)?j:Q}(_e,fe):_e.strategy===3?function(Fe,De){for(var We,Re,He,Ze,Xe=Fe.window;;){if(Fe.lookahead<=D){if(Te(Fe),Fe.lookahead<=D&&De===m)return j;if(Fe.lookahead===0)break}if(Fe.match_length=0,Fe.lookahead>=N&&0<Fe.strstart&&(Re=Xe[He=Fe.strstart-1])===Xe[++He]&&Re===Xe[++He]&&Re===Xe[++He]){Ze=Fe.strstart+D;do;while(Re===Xe[++He]&&Re===Xe[++He]&&Re===Xe[++He]&&Re===Xe[++He]&&Re===Xe[++He]&&Re===Xe[++He]&&Re===Xe[++He]&&Re===Xe[++He]&&He<Ze);Fe.match_length=D-(Ze-He),Fe.match_length>Fe.lookahead&&(Fe.match_length=Fe.lookahead)}if(Fe.match_length>=N?(We=u._tr_tally(Fe,1,Fe.match_length-N),Fe.lookahead-=Fe.match_length,Fe.strstart+=Fe.match_length,Fe.match_length=0):(We=u._tr_tally(Fe,0,Fe.window[Fe.strstart]),Fe.lookahead--,Fe.strstart++),We&&(H(Fe,!1),Fe.strm.avail_out===0))return j}return Fe.insert=0,De===_?(H(Fe,!0),Fe.strm.avail_out===0?ve:Se):Fe.last_lit&&(H(Fe,!1),Fe.strm.avail_out===0)?j:Q}(_e,fe):o[_e.level].func(_e,fe);if(Ve!==ve&&Ve!==Se||(_e.status=666),Ve===j||Ve===ve)return J.avail_out===0&&(_e.last_flush=-1),g;if(Ve===Q&&(fe===1?u._tr_align(_e):fe!==5&&(u._tr_stored_block(_e,0,0,!1),fe===3&&(ne(_e.head),_e.lookahead===0&&(_e.strstart=0,_e.block_start=0,_e.insert=0))),q(J),J.avail_out===0))return _e.last_flush=-1,g}return fe!==_?g:_e.wrap<=0?1:(_e.wrap===2?(Y(_e,255&J.adler),Y(_e,J.adler>>8&255),Y(_e,J.adler>>16&255),Y(_e,J.adler>>24&255),Y(_e,255&J.total_in),Y(_e,J.total_in>>8&255),Y(_e,J.total_in>>16&255),Y(_e,J.total_in>>24&255)):(le(_e,J.adler>>>16),le(_e,65535&J.adler)),q(J),0<_e.wrap&&(_e.wrap=-_e.wrap),_e.pending!==0?g:1)},r.deflateEnd=function(J){var fe;return J&&J.state?(fe=J.state.status)!==U&&fe!==69&&fe!==73&&fe!==91&&fe!==103&&fe!==Z&&fe!==666?we(J,y):(J.state=null,fe===Z?we(J,-3):g):y},r.deflateSetDictionary=function(J,fe){var re,_e,be,Ae,Le,Ve,Fe,De,We=fe.length;if(!J||!J.state||(Ae=(re=J.state).wrap)===2||Ae===1&&re.status!==U||re.lookahead)return y;for(Ae===1&&(J.adler=d(J.adler,fe,We,0)),re.wrap=0,We>=re.w_size&&(Ae===0&&(ne(re.head),re.strstart=0,re.block_start=0,re.insert=0),De=new s.Buf8(re.w_size),s.arraySet(De,fe,We-re.w_size,re.w_size,0),fe=De,We=re.w_size),Le=J.avail_in,Ve=J.next_in,Fe=J.input,J.avail_in=We,J.next_in=0,J.input=fe,Te(re);re.lookahead>=N;){for(_e=re.strstart,be=re.lookahead-(N-1);re.ins_h=(re.ins_h<<re.hash_shift^re.window[_e+N-1])&re.hash_mask,re.prev[_e&re.w_mask]=re.head[re.ins_h],re.head[re.ins_h]=_e,_e++,--be;);re.strstart=_e,re.lookahead=N-1,Te(re)}return re.strstart+=re.lookahead,re.block_start=re.strstart,re.insert=re.lookahead,re.lookahead=0,re.match_length=re.prev_length=N-1,re.match_available=0,J.next_in=Ve,J.input=Fe,J.avail_in=Le,re.wrap=Ae,g},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,n,r){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,n,r){n.exports=function(o,s){var u,d,f,v,m,_,g,y,w,x,k,S,E,T,M,I,F,O,N,D,X,U,Z,j,Q;u=o.state,d=o.next_in,j=o.input,f=d+(o.avail_in-5),v=o.next_out,Q=o.output,m=v-(s-o.avail_out),_=v+(o.avail_out-257),g=u.dmax,y=u.wsize,w=u.whave,x=u.wnext,k=u.window,S=u.hold,E=u.bits,T=u.lencode,M=u.distcode,I=(1<<u.lenbits)-1,F=(1<<u.distbits)-1;e:do{E<15&&(S+=j[d++]<<E,E+=8,S+=j[d++]<<E,E+=8),O=T[S&I];t:for(;;){if(S>>>=N=O>>>24,E-=N,(N=O>>>16&255)==0)Q[v++]=65535&O;else{if(!(16&N)){if((64&N)==0){O=T[(65535&O)+(S&(1<<N)-1)];continue t}if(32&N){u.mode=12;break e}o.msg="invalid literal/length code",u.mode=30;break e}D=65535&O,(N&=15)&&(E<N&&(S+=j[d++]<<E,E+=8),D+=S&(1<<N)-1,S>>>=N,E-=N),E<15&&(S+=j[d++]<<E,E+=8,S+=j[d++]<<E,E+=8),O=M[S&F];n:for(;;){if(S>>>=N=O>>>24,E-=N,!(16&(N=O>>>16&255))){if((64&N)==0){O=M[(65535&O)+(S&(1<<N)-1)];continue n}o.msg="invalid distance code",u.mode=30;break e}if(X=65535&O,E<(N&=15)&&(S+=j[d++]<<E,(E+=8)<N&&(S+=j[d++]<<E,E+=8)),g<(X+=S&(1<<N)-1)){o.msg="invalid distance too far back",u.mode=30;break e}if(S>>>=N,E-=N,(N=v-m)<X){if(w<(N=X-N)&&u.sane){o.msg="invalid distance too far back",u.mode=30;break e}if(Z=k,(U=0)===x){if(U+=y-N,N<D){for(D-=N;Q[v++]=k[U++],--N;);U=v-X,Z=Q}}else if(x<N){if(U+=y+x-N,(N-=x)<D){for(D-=N;Q[v++]=k[U++],--N;);if(U=0,x<D){for(D-=N=x;Q[v++]=k[U++],--N;);U=v-X,Z=Q}}}else if(U+=x-N,N<D){for(D-=N;Q[v++]=k[U++],--N;);U=v-X,Z=Q}for(;2<D;)Q[v++]=Z[U++],Q[v++]=Z[U++],Q[v++]=Z[U++],D-=3;D&&(Q[v++]=Z[U++],1<D&&(Q[v++]=Z[U++]))}else{for(U=v-X;Q[v++]=Q[U++],Q[v++]=Q[U++],Q[v++]=Q[U++],2<(D-=3););D&&(Q[v++]=Q[U++],1<D&&(Q[v++]=Q[U++]))}break}}break}}while(d<f&&v<_);d-=D=E>>3,S&=(1<<(E-=D<<3))-1,o.next_in=d,o.next_out=v,o.avail_in=d<f?f-d+5:5-(d-f),o.avail_out=v<_?_-v+257:257-(v-_),u.hold=S,u.bits=E}},{}],49:[function(e,n,r){var o=e("../utils/common"),s=e("./adler32"),u=e("./crc32"),d=e("./inffast"),f=e("./inftrees"),v=1,m=2,_=0,g=-2,y=1,w=852,x=592;function k(U){return(U>>>24&255)+(U>>>8&65280)+((65280&U)<<8)+((255&U)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(U){var Z;return U&&U.state?(Z=U.state,U.total_in=U.total_out=Z.total=0,U.msg="",Z.wrap&&(U.adler=1&Z.wrap),Z.mode=y,Z.last=0,Z.havedict=0,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new o.Buf32(w),Z.distcode=Z.distdyn=new o.Buf32(x),Z.sane=1,Z.back=-1,_):g}function T(U){var Z;return U&&U.state?((Z=U.state).wsize=0,Z.whave=0,Z.wnext=0,E(U)):g}function M(U,Z){var j,Q;return U&&U.state?(Q=U.state,Z<0?(j=0,Z=-Z):(j=1+(Z>>4),Z<48&&(Z&=15)),Z&&(Z<8||15<Z)?g:(Q.window!==null&&Q.wbits!==Z&&(Q.window=null),Q.wrap=j,Q.wbits=Z,T(U))):g}function I(U,Z){var j,Q;return U?(Q=new S,(U.state=Q).window=null,(j=M(U,Z))!==_&&(U.state=null),j):g}var F,O,N=!0;function D(U){if(N){var Z;for(F=new o.Buf32(512),O=new o.Buf32(32),Z=0;Z<144;)U.lens[Z++]=8;for(;Z<256;)U.lens[Z++]=9;for(;Z<280;)U.lens[Z++]=7;for(;Z<288;)U.lens[Z++]=8;for(f(v,U.lens,0,288,F,0,U.work,{bits:9}),Z=0;Z<32;)U.lens[Z++]=5;f(m,U.lens,0,32,O,0,U.work,{bits:5}),N=!1}U.lencode=F,U.lenbits=9,U.distcode=O,U.distbits=5}function X(U,Z,j,Q){var ve,Se=U.state;return Se.window===null&&(Se.wsize=1<<Se.wbits,Se.wnext=0,Se.whave=0,Se.window=new o.Buf8(Se.wsize)),Q>=Se.wsize?(o.arraySet(Se.window,Z,j-Se.wsize,Se.wsize,0),Se.wnext=0,Se.whave=Se.wsize):(Q<(ve=Se.wsize-Se.wnext)&&(ve=Q),o.arraySet(Se.window,Z,j-Q,ve,Se.wnext),(Q-=ve)?(o.arraySet(Se.window,Z,j-Q,Q,0),Se.wnext=Q,Se.whave=Se.wsize):(Se.wnext+=ve,Se.wnext===Se.wsize&&(Se.wnext=0),Se.whave<Se.wsize&&(Se.whave+=ve))),0}r.inflateReset=T,r.inflateReset2=M,r.inflateResetKeep=E,r.inflateInit=function(U){return I(U,15)},r.inflateInit2=I,r.inflate=function(U,Z){var j,Q,ve,Se,we,oe,ne,q,H,Y,le,Ce,Te,ke,Ee,Pe,Be,$e,Oe,Ne,J,fe,re,_e,be=0,Ae=new o.Buf8(4),Le=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!U||!U.state||!U.output||!U.input&&U.avail_in!==0)return g;(j=U.state).mode===12&&(j.mode=13),we=U.next_out,ve=U.output,ne=U.avail_out,Se=U.next_in,Q=U.input,oe=U.avail_in,q=j.hold,H=j.bits,Y=oe,le=ne,fe=_;e:for(;;)switch(j.mode){case y:if(j.wrap===0){j.mode=13;break}for(;H<16;){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}if(2&j.wrap&&q===35615){Ae[j.check=0]=255&q,Ae[1]=q>>>8&255,j.check=u(j.check,Ae,2,0),H=q=0,j.mode=2;break}if(j.flags=0,j.head&&(j.head.done=!1),!(1&j.wrap)||(((255&q)<<8)+(q>>8))%31){U.msg="incorrect header check",j.mode=30;break}if((15&q)!=8){U.msg="unknown compression method",j.mode=30;break}if(H-=4,J=8+(15&(q>>>=4)),j.wbits===0)j.wbits=J;else if(J>j.wbits){U.msg="invalid window size",j.mode=30;break}j.dmax=1<<J,U.adler=j.check=1,j.mode=512&q?10:12,H=q=0;break;case 2:for(;H<16;){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}if(j.flags=q,(255&j.flags)!=8){U.msg="unknown compression method",j.mode=30;break}if(57344&j.flags){U.msg="unknown header flags set",j.mode=30;break}j.head&&(j.head.text=q>>8&1),512&j.flags&&(Ae[0]=255&q,Ae[1]=q>>>8&255,j.check=u(j.check,Ae,2,0)),H=q=0,j.mode=3;case 3:for(;H<32;){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}j.head&&(j.head.time=q),512&j.flags&&(Ae[0]=255&q,Ae[1]=q>>>8&255,Ae[2]=q>>>16&255,Ae[3]=q>>>24&255,j.check=u(j.check,Ae,4,0)),H=q=0,j.mode=4;case 4:for(;H<16;){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}j.head&&(j.head.xflags=255&q,j.head.os=q>>8),512&j.flags&&(Ae[0]=255&q,Ae[1]=q>>>8&255,j.check=u(j.check,Ae,2,0)),H=q=0,j.mode=5;case 5:if(1024&j.flags){for(;H<16;){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}j.length=q,j.head&&(j.head.extra_len=q),512&j.flags&&(Ae[0]=255&q,Ae[1]=q>>>8&255,j.check=u(j.check,Ae,2,0)),H=q=0}else j.head&&(j.head.extra=null);j.mode=6;case 6:if(1024&j.flags&&(oe<(Ce=j.length)&&(Ce=oe),Ce&&(j.head&&(J=j.head.extra_len-j.length,j.head.extra||(j.head.extra=new Array(j.head.extra_len)),o.arraySet(j.head.extra,Q,Se,Ce,J)),512&j.flags&&(j.check=u(j.check,Q,Ce,Se)),oe-=Ce,Se+=Ce,j.length-=Ce),j.length))break e;j.length=0,j.mode=7;case 7:if(2048&j.flags){if(oe===0)break e;for(Ce=0;J=Q[Se+Ce++],j.head&&J&&j.length<65536&&(j.head.name+=String.fromCharCode(J)),J&&Ce<oe;);if(512&j.flags&&(j.check=u(j.check,Q,Ce,Se)),oe-=Ce,Se+=Ce,J)break e}else j.head&&(j.head.name=null);j.length=0,j.mode=8;case 8:if(4096&j.flags){if(oe===0)break e;for(Ce=0;J=Q[Se+Ce++],j.head&&J&&j.length<65536&&(j.head.comment+=String.fromCharCode(J)),J&&Ce<oe;);if(512&j.flags&&(j.check=u(j.check,Q,Ce,Se)),oe-=Ce,Se+=Ce,J)break e}else j.head&&(j.head.comment=null);j.mode=9;case 9:if(512&j.flags){for(;H<16;){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}if(q!==(65535&j.check)){U.msg="header crc mismatch",j.mode=30;break}H=q=0}j.head&&(j.head.hcrc=j.flags>>9&1,j.head.done=!0),U.adler=j.check=0,j.mode=12;break;case 10:for(;H<32;){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}U.adler=j.check=k(q),H=q=0,j.mode=11;case 11:if(j.havedict===0)return U.next_out=we,U.avail_out=ne,U.next_in=Se,U.avail_in=oe,j.hold=q,j.bits=H,2;U.adler=j.check=1,j.mode=12;case 12:if(Z===5||Z===6)break e;case 13:if(j.last){q>>>=7&H,H-=7&H,j.mode=27;break}for(;H<3;){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}switch(j.last=1&q,H-=1,3&(q>>>=1)){case 0:j.mode=14;break;case 1:if(D(j),j.mode=20,Z!==6)break;q>>>=2,H-=2;break e;case 2:j.mode=17;break;case 3:U.msg="invalid block type",j.mode=30}q>>>=2,H-=2;break;case 14:for(q>>>=7&H,H-=7&H;H<32;){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}if((65535&q)!=(q>>>16^65535)){U.msg="invalid stored block lengths",j.mode=30;break}if(j.length=65535&q,H=q=0,j.mode=15,Z===6)break e;case 15:j.mode=16;case 16:if(Ce=j.length){if(oe<Ce&&(Ce=oe),ne<Ce&&(Ce=ne),Ce===0)break e;o.arraySet(ve,Q,Se,Ce,we),oe-=Ce,Se+=Ce,ne-=Ce,we+=Ce,j.length-=Ce;break}j.mode=12;break;case 17:for(;H<14;){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}if(j.nlen=257+(31&q),q>>>=5,H-=5,j.ndist=1+(31&q),q>>>=5,H-=5,j.ncode=4+(15&q),q>>>=4,H-=4,286<j.nlen||30<j.ndist){U.msg="too many length or distance symbols",j.mode=30;break}j.have=0,j.mode=18;case 18:for(;j.have<j.ncode;){for(;H<3;){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}j.lens[Le[j.have++]]=7&q,q>>>=3,H-=3}for(;j.have<19;)j.lens[Le[j.have++]]=0;if(j.lencode=j.lendyn,j.lenbits=7,re={bits:j.lenbits},fe=f(0,j.lens,0,19,j.lencode,0,j.work,re),j.lenbits=re.bits,fe){U.msg="invalid code lengths set",j.mode=30;break}j.have=0,j.mode=19;case 19:for(;j.have<j.nlen+j.ndist;){for(;Pe=(be=j.lencode[q&(1<<j.lenbits)-1])>>>16&255,Be=65535&be,!((Ee=be>>>24)<=H);){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}if(Be<16)q>>>=Ee,H-=Ee,j.lens[j.have++]=Be;else{if(Be===16){for(_e=Ee+2;H<_e;){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}if(q>>>=Ee,H-=Ee,j.have===0){U.msg="invalid bit length repeat",j.mode=30;break}J=j.lens[j.have-1],Ce=3+(3&q),q>>>=2,H-=2}else if(Be===17){for(_e=Ee+3;H<_e;){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}H-=Ee,J=0,Ce=3+(7&(q>>>=Ee)),q>>>=3,H-=3}else{for(_e=Ee+7;H<_e;){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}H-=Ee,J=0,Ce=11+(127&(q>>>=Ee)),q>>>=7,H-=7}if(j.have+Ce>j.nlen+j.ndist){U.msg="invalid bit length repeat",j.mode=30;break}for(;Ce--;)j.lens[j.have++]=J}}if(j.mode===30)break;if(j.lens[256]===0){U.msg="invalid code -- missing end-of-block",j.mode=30;break}if(j.lenbits=9,re={bits:j.lenbits},fe=f(v,j.lens,0,j.nlen,j.lencode,0,j.work,re),j.lenbits=re.bits,fe){U.msg="invalid literal/lengths set",j.mode=30;break}if(j.distbits=6,j.distcode=j.distdyn,re={bits:j.distbits},fe=f(m,j.lens,j.nlen,j.ndist,j.distcode,0,j.work,re),j.distbits=re.bits,fe){U.msg="invalid distances set",j.mode=30;break}if(j.mode=20,Z===6)break e;case 20:j.mode=21;case 21:if(6<=oe&&258<=ne){U.next_out=we,U.avail_out=ne,U.next_in=Se,U.avail_in=oe,j.hold=q,j.bits=H,d(U,le),we=U.next_out,ve=U.output,ne=U.avail_out,Se=U.next_in,Q=U.input,oe=U.avail_in,q=j.hold,H=j.bits,j.mode===12&&(j.back=-1);break}for(j.back=0;Pe=(be=j.lencode[q&(1<<j.lenbits)-1])>>>16&255,Be=65535&be,!((Ee=be>>>24)<=H);){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}if(Pe&&(240&Pe)==0){for($e=Ee,Oe=Pe,Ne=Be;Pe=(be=j.lencode[Ne+((q&(1<<$e+Oe)-1)>>$e)])>>>16&255,Be=65535&be,!($e+(Ee=be>>>24)<=H);){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}q>>>=$e,H-=$e,j.back+=$e}if(q>>>=Ee,H-=Ee,j.back+=Ee,j.length=Be,Pe===0){j.mode=26;break}if(32&Pe){j.back=-1,j.mode=12;break}if(64&Pe){U.msg="invalid literal/length code",j.mode=30;break}j.extra=15&Pe,j.mode=22;case 22:if(j.extra){for(_e=j.extra;H<_e;){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}j.length+=q&(1<<j.extra)-1,q>>>=j.extra,H-=j.extra,j.back+=j.extra}j.was=j.length,j.mode=23;case 23:for(;Pe=(be=j.distcode[q&(1<<j.distbits)-1])>>>16&255,Be=65535&be,!((Ee=be>>>24)<=H);){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}if((240&Pe)==0){for($e=Ee,Oe=Pe,Ne=Be;Pe=(be=j.distcode[Ne+((q&(1<<$e+Oe)-1)>>$e)])>>>16&255,Be=65535&be,!($e+(Ee=be>>>24)<=H);){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}q>>>=$e,H-=$e,j.back+=$e}if(q>>>=Ee,H-=Ee,j.back+=Ee,64&Pe){U.msg="invalid distance code",j.mode=30;break}j.offset=Be,j.extra=15&Pe,j.mode=24;case 24:if(j.extra){for(_e=j.extra;H<_e;){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}j.offset+=q&(1<<j.extra)-1,q>>>=j.extra,H-=j.extra,j.back+=j.extra}if(j.offset>j.dmax){U.msg="invalid distance too far back",j.mode=30;break}j.mode=25;case 25:if(ne===0)break e;if(Ce=le-ne,j.offset>Ce){if((Ce=j.offset-Ce)>j.whave&&j.sane){U.msg="invalid distance too far back",j.mode=30;break}Te=Ce>j.wnext?(Ce-=j.wnext,j.wsize-Ce):j.wnext-Ce,Ce>j.length&&(Ce=j.length),ke=j.window}else ke=ve,Te=we-j.offset,Ce=j.length;for(ne<Ce&&(Ce=ne),ne-=Ce,j.length-=Ce;ve[we++]=ke[Te++],--Ce;);j.length===0&&(j.mode=21);break;case 26:if(ne===0)break e;ve[we++]=j.length,ne--,j.mode=21;break;case 27:if(j.wrap){for(;H<32;){if(oe===0)break e;oe--,q|=Q[Se++]<<H,H+=8}if(le-=ne,U.total_out+=le,j.total+=le,le&&(U.adler=j.check=j.flags?u(j.check,ve,le,we-le):s(j.check,ve,le,we-le)),le=ne,(j.flags?q:k(q))!==j.check){U.msg="incorrect data check",j.mode=30;break}H=q=0}j.mode=28;case 28:if(j.wrap&&j.flags){for(;H<32;){if(oe===0)break e;oe--,q+=Q[Se++]<<H,H+=8}if(q!==(4294967295&j.total)){U.msg="incorrect length check",j.mode=30;break}H=q=0}j.mode=29;case 29:fe=1;break e;case 30:fe=-3;break e;case 31:return-4;default:return g}return U.next_out=we,U.avail_out=ne,U.next_in=Se,U.avail_in=oe,j.hold=q,j.bits=H,(j.wsize||le!==U.avail_out&&j.mode<30&&(j.mode<27||Z!==4))&&X(U,U.output,U.next_out,le-U.avail_out)?(j.mode=31,-4):(Y-=U.avail_in,le-=U.avail_out,U.total_in+=Y,U.total_out+=le,j.total+=le,j.wrap&&le&&(U.adler=j.check=j.flags?u(j.check,ve,le,U.next_out-le):s(j.check,ve,le,U.next_out-le)),U.data_type=j.bits+(j.last?64:0)+(j.mode===12?128:0)+(j.mode===20||j.mode===15?256:0),(Y==0&&le===0||Z===4)&&fe===_&&(fe=-5),fe)},r.inflateEnd=function(U){if(!U||!U.state)return g;var Z=U.state;return Z.window&&(Z.window=null),U.state=null,_},r.inflateGetHeader=function(U,Z){var j;return U&&U.state?(2&(j=U.state).wrap)==0?g:((j.head=Z).done=!1,_):g},r.inflateSetDictionary=function(U,Z){var j,Q=Z.length;return U&&U.state?(j=U.state).wrap!==0&&j.mode!==11?g:j.mode===11&&s(1,Z,Q,0)!==j.check?-3:X(U,Z,Q,Q)?(j.mode=31,-4):(j.havedict=1,_):g},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,n,r){var o=e("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(v,m,_,g,y,w,x,k){var S,E,T,M,I,F,O,N,D,X=k.bits,U=0,Z=0,j=0,Q=0,ve=0,Se=0,we=0,oe=0,ne=0,q=0,H=null,Y=0,le=new o.Buf16(16),Ce=new o.Buf16(16),Te=null,ke=0;for(U=0;U<=15;U++)le[U]=0;for(Z=0;Z<g;Z++)le[m[_+Z]]++;for(ve=X,Q=15;1<=Q&&le[Q]===0;Q--);if(Q<ve&&(ve=Q),Q===0)return y[w++]=20971520,y[w++]=20971520,k.bits=1,0;for(j=1;j<Q&&le[j]===0;j++);for(ve<j&&(ve=j),U=oe=1;U<=15;U++)if(oe<<=1,(oe-=le[U])<0)return-1;if(0<oe&&(v===0||Q!==1))return-1;for(Ce[1]=0,U=1;U<15;U++)Ce[U+1]=Ce[U]+le[U];for(Z=0;Z<g;Z++)m[_+Z]!==0&&(x[Ce[m[_+Z]]++]=Z);if(F=v===0?(H=Te=x,19):v===1?(H=s,Y-=257,Te=u,ke-=257,256):(H=d,Te=f,-1),U=j,I=w,we=Z=q=0,T=-1,M=(ne=1<<(Se=ve))-1,v===1&&852<ne||v===2&&592<ne)return 1;for(;;){for(O=U-we,D=x[Z]<F?(N=0,x[Z]):x[Z]>F?(N=Te[ke+x[Z]],H[Y+x[Z]]):(N=96,0),S=1<<U-we,j=E=1<<Se;y[I+(q>>we)+(E-=S)]=O<<24|N<<16|D|0,E!==0;);for(S=1<<U-1;q&S;)S>>=1;if(S!==0?(q&=S-1,q+=S):q=0,Z++,--le[U]==0){if(U===Q)break;U=m[_+x[Z]]}if(ve<U&&(q&M)!==T){for(we===0&&(we=ve),I+=j,oe=1<<(Se=U-we);Se+we<Q&&!((oe-=le[Se+we])<=0);)Se++,oe<<=1;if(ne+=1<<Se,v===1&&852<ne||v===2&&592<ne)return 1;y[T=q&M]=ve<<24|Se<<16|I-w|0}}return q!==0&&(y[I+q]=U-we<<24|64<<16|0),k.bits=ve,0}},{"../utils/common":41}],51:[function(e,n,r){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,n,r){var o=e("../utils/common"),s=0,u=1;function d(be){for(var Ae=be.length;0<=--Ae;)be[Ae]=0}var f=0,v=29,m=256,_=m+1+v,g=30,y=19,w=2*_+1,x=15,k=16,S=7,E=256,T=16,M=17,I=18,F=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],O=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=new Array(2*(_+2));d(X);var U=new Array(2*g);d(U);var Z=new Array(512);d(Z);var j=new Array(256);d(j);var Q=new Array(v);d(Q);var ve,Se,we,oe=new Array(g);function ne(be,Ae,Le,Ve,Fe){this.static_tree=be,this.extra_bits=Ae,this.extra_base=Le,this.elems=Ve,this.max_length=Fe,this.has_stree=be&&be.length}function q(be,Ae){this.dyn_tree=be,this.max_code=0,this.stat_desc=Ae}function H(be){return be<256?Z[be]:Z[256+(be>>>7)]}function Y(be,Ae){be.pending_buf[be.pending++]=255&Ae,be.pending_buf[be.pending++]=Ae>>>8&255}function le(be,Ae,Le){be.bi_valid>k-Le?(be.bi_buf|=Ae<<be.bi_valid&65535,Y(be,be.bi_buf),be.bi_buf=Ae>>k-be.bi_valid,be.bi_valid+=Le-k):(be.bi_buf|=Ae<<be.bi_valid&65535,be.bi_valid+=Le)}function Ce(be,Ae,Le){le(be,Le[2*Ae],Le[2*Ae+1])}function Te(be,Ae){for(var Le=0;Le|=1&be,be>>>=1,Le<<=1,0<--Ae;);return Le>>>1}function ke(be,Ae,Le){var Ve,Fe,De=new Array(x+1),We=0;for(Ve=1;Ve<=x;Ve++)De[Ve]=We=We+Le[Ve-1]<<1;for(Fe=0;Fe<=Ae;Fe++){var Re=be[2*Fe+1];Re!==0&&(be[2*Fe]=Te(De[Re]++,Re))}}function Ee(be){var Ae;for(Ae=0;Ae<_;Ae++)be.dyn_ltree[2*Ae]=0;for(Ae=0;Ae<g;Ae++)be.dyn_dtree[2*Ae]=0;for(Ae=0;Ae<y;Ae++)be.bl_tree[2*Ae]=0;be.dyn_ltree[2*E]=1,be.opt_len=be.static_len=0,be.last_lit=be.matches=0}function Pe(be){8<be.bi_valid?Y(be,be.bi_buf):0<be.bi_valid&&(be.pending_buf[be.pending++]=be.bi_buf),be.bi_buf=0,be.bi_valid=0}function Be(be,Ae,Le,Ve){var Fe=2*Ae,De=2*Le;return be[Fe]<be[De]||be[Fe]===be[De]&&Ve[Ae]<=Ve[Le]}function $e(be,Ae,Le){for(var Ve=be.heap[Le],Fe=Le<<1;Fe<=be.heap_len&&(Fe<be.heap_len&&Be(Ae,be.heap[Fe+1],be.heap[Fe],be.depth)&&Fe++,!Be(Ae,Ve,be.heap[Fe],be.depth));)be.heap[Le]=be.heap[Fe],Le=Fe,Fe<<=1;be.heap[Le]=Ve}function Oe(be,Ae,Le){var Ve,Fe,De,We,Re=0;if(be.last_lit!==0)for(;Ve=be.pending_buf[be.d_buf+2*Re]<<8|be.pending_buf[be.d_buf+2*Re+1],Fe=be.pending_buf[be.l_buf+Re],Re++,Ve===0?Ce(be,Fe,Ae):(Ce(be,(De=j[Fe])+m+1,Ae),(We=F[De])!==0&&le(be,Fe-=Q[De],We),Ce(be,De=H(--Ve),Le),(We=O[De])!==0&&le(be,Ve-=oe[De],We)),Re<be.last_lit;);Ce(be,E,Ae)}function Ne(be,Ae){var Le,Ve,Fe,De=Ae.dyn_tree,We=Ae.stat_desc.static_tree,Re=Ae.stat_desc.has_stree,He=Ae.stat_desc.elems,Ze=-1;for(be.heap_len=0,be.heap_max=w,Le=0;Le<He;Le++)De[2*Le]!==0?(be.heap[++be.heap_len]=Ze=Le,be.depth[Le]=0):De[2*Le+1]=0;for(;be.heap_len<2;)De[2*(Fe=be.heap[++be.heap_len]=Ze<2?++Ze:0)]=1,be.depth[Fe]=0,be.opt_len--,Re&&(be.static_len-=We[2*Fe+1]);for(Ae.max_code=Ze,Le=be.heap_len>>1;1<=Le;Le--)$e(be,De,Le);for(Fe=He;Le=be.heap[1],be.heap[1]=be.heap[be.heap_len--],$e(be,De,1),Ve=be.heap[1],be.heap[--be.heap_max]=Le,be.heap[--be.heap_max]=Ve,De[2*Fe]=De[2*Le]+De[2*Ve],be.depth[Fe]=(be.depth[Le]>=be.depth[Ve]?be.depth[Le]:be.depth[Ve])+1,De[2*Le+1]=De[2*Ve+1]=Fe,be.heap[1]=Fe++,$e(be,De,1),2<=be.heap_len;);be.heap[--be.heap_max]=be.heap[1],function(Xe,at){var ut,ct,mt,pt,kt,Ct,ht=at.dyn_tree,Pt=at.max_code,Ue=at.stat_desc.static_tree,qe=at.stat_desc.has_stree,Ye=at.stat_desc.extra_bits,st=at.stat_desc.extra_base,ot=at.stat_desc.max_length,Qe=0;for(pt=0;pt<=x;pt++)Xe.bl_count[pt]=0;for(ht[2*Xe.heap[Xe.heap_max]+1]=0,ut=Xe.heap_max+1;ut<w;ut++)ot<(pt=ht[2*ht[2*(ct=Xe.heap[ut])+1]+1]+1)&&(pt=ot,Qe++),ht[2*ct+1]=pt,Pt<ct||(Xe.bl_count[pt]++,kt=0,st<=ct&&(kt=Ye[ct-st]),Ct=ht[2*ct],Xe.opt_len+=Ct*(pt+kt),qe&&(Xe.static_len+=Ct*(Ue[2*ct+1]+kt)));if(Qe!==0){do{for(pt=ot-1;Xe.bl_count[pt]===0;)pt--;Xe.bl_count[pt]--,Xe.bl_count[pt+1]+=2,Xe.bl_count[ot]--,Qe-=2}while(0<Qe);for(pt=ot;pt!==0;pt--)for(ct=Xe.bl_count[pt];ct!==0;)Pt<(mt=Xe.heap[--ut])||(ht[2*mt+1]!==pt&&(Xe.opt_len+=(pt-ht[2*mt+1])*ht[2*mt],ht[2*mt+1]=pt),ct--)}}(be,Ae),ke(De,Ze,be.bl_count)}function J(be,Ae,Le){var Ve,Fe,De=-1,We=Ae[1],Re=0,He=7,Ze=4;for(We===0&&(He=138,Ze=3),Ae[2*(Le+1)+1]=65535,Ve=0;Ve<=Le;Ve++)Fe=We,We=Ae[2*(Ve+1)+1],++Re<He&&Fe===We||(Re<Ze?be.bl_tree[2*Fe]+=Re:Fe!==0?(Fe!==De&&be.bl_tree[2*Fe]++,be.bl_tree[2*T]++):Re<=10?be.bl_tree[2*M]++:be.bl_tree[2*I]++,De=Fe,Ze=(Re=0)===We?(He=138,3):Fe===We?(He=6,3):(He=7,4))}function fe(be,Ae,Le){var Ve,Fe,De=-1,We=Ae[1],Re=0,He=7,Ze=4;for(We===0&&(He=138,Ze=3),Ve=0;Ve<=Le;Ve++)if(Fe=We,We=Ae[2*(Ve+1)+1],!(++Re<He&&Fe===We)){if(Re<Ze)for(;Ce(be,Fe,be.bl_tree),--Re!=0;);else Fe!==0?(Fe!==De&&(Ce(be,Fe,be.bl_tree),Re--),Ce(be,T,be.bl_tree),le(be,Re-3,2)):Re<=10?(Ce(be,M,be.bl_tree),le(be,Re-3,3)):(Ce(be,I,be.bl_tree),le(be,Re-11,7));De=Fe,Ze=(Re=0)===We?(He=138,3):Fe===We?(He=6,3):(He=7,4)}}d(oe);var re=!1;function _e(be,Ae,Le,Ve){le(be,(f<<1)+(Ve?1:0),3),function(Fe,De,We,Re){Pe(Fe),Re&&(Y(Fe,We),Y(Fe,~We)),o.arraySet(Fe.pending_buf,Fe.window,De,We,Fe.pending),Fe.pending+=We}(be,Ae,Le,!0)}r._tr_init=function(be){re||(function(){var Ae,Le,Ve,Fe,De,We=new Array(x+1);for(Fe=Ve=0;Fe<v-1;Fe++)for(Q[Fe]=Ve,Ae=0;Ae<1<<F[Fe];Ae++)j[Ve++]=Fe;for(j[Ve-1]=Fe,Fe=De=0;Fe<16;Fe++)for(oe[Fe]=De,Ae=0;Ae<1<<O[Fe];Ae++)Z[De++]=Fe;for(De>>=7;Fe<g;Fe++)for(oe[Fe]=De<<7,Ae=0;Ae<1<<O[Fe]-7;Ae++)Z[256+De++]=Fe;for(Le=0;Le<=x;Le++)We[Le]=0;for(Ae=0;Ae<=143;)X[2*Ae+1]=8,Ae++,We[8]++;for(;Ae<=255;)X[2*Ae+1]=9,Ae++,We[9]++;for(;Ae<=279;)X[2*Ae+1]=7,Ae++,We[7]++;for(;Ae<=287;)X[2*Ae+1]=8,Ae++,We[8]++;for(ke(X,_+1,We),Ae=0;Ae<g;Ae++)U[2*Ae+1]=5,U[2*Ae]=Te(Ae,5);ve=new ne(X,F,m+1,_,x),Se=new ne(U,O,0,g,x),we=new ne(new Array(0),N,0,y,S)}(),re=!0),be.l_desc=new q(be.dyn_ltree,ve),be.d_desc=new q(be.dyn_dtree,Se),be.bl_desc=new q(be.bl_tree,we),be.bi_buf=0,be.bi_valid=0,Ee(be)},r._tr_stored_block=_e,r._tr_flush_block=function(be,Ae,Le,Ve){var Fe,De,We=0;0<be.level?(be.strm.data_type===2&&(be.strm.data_type=function(Re){var He,Ze=4093624447;for(He=0;He<=31;He++,Ze>>>=1)if(1&Ze&&Re.dyn_ltree[2*He]!==0)return s;if(Re.dyn_ltree[18]!==0||Re.dyn_ltree[20]!==0||Re.dyn_ltree[26]!==0)return u;for(He=32;He<m;He++)if(Re.dyn_ltree[2*He]!==0)return u;return s}(be)),Ne(be,be.l_desc),Ne(be,be.d_desc),We=function(Re){var He;for(J(Re,Re.dyn_ltree,Re.l_desc.max_code),J(Re,Re.dyn_dtree,Re.d_desc.max_code),Ne(Re,Re.bl_desc),He=y-1;3<=He&&Re.bl_tree[2*D[He]+1]===0;He--);return Re.opt_len+=3*(He+1)+5+5+4,He}(be),Fe=be.opt_len+3+7>>>3,(De=be.static_len+3+7>>>3)<=Fe&&(Fe=De)):Fe=De=Le+5,Le+4<=Fe&&Ae!==-1?_e(be,Ae,Le,Ve):be.strategy===4||De===Fe?(le(be,2+(Ve?1:0),3),Oe(be,X,U)):(le(be,4+(Ve?1:0),3),function(Re,He,Ze,Xe){var at;for(le(Re,He-257,5),le(Re,Ze-1,5),le(Re,Xe-4,4),at=0;at<Xe;at++)le(Re,Re.bl_tree[2*D[at]+1],3);fe(Re,Re.dyn_ltree,He-1),fe(Re,Re.dyn_dtree,Ze-1)}(be,be.l_desc.max_code+1,be.d_desc.max_code+1,We+1),Oe(be,be.dyn_ltree,be.dyn_dtree)),Ee(be),Ve&&Pe(be)},r._tr_tally=function(be,Ae,Le){return be.pending_buf[be.d_buf+2*be.last_lit]=Ae>>>8&255,be.pending_buf[be.d_buf+2*be.last_lit+1]=255&Ae,be.pending_buf[be.l_buf+be.last_lit]=255&Le,be.last_lit++,Ae===0?be.dyn_ltree[2*Le]++:(be.matches++,Ae--,be.dyn_ltree[2*(j[Le]+m+1)]++,be.dyn_dtree[2*H(Ae)]++),be.last_lit===be.lit_bufsize-1},r._tr_align=function(be){le(be,2,3),Ce(be,E,X),function(Ae){Ae.bi_valid===16?(Y(Ae,Ae.bi_buf),Ae.bi_buf=0,Ae.bi_valid=0):8<=Ae.bi_valid&&(Ae.pending_buf[Ae.pending++]=255&Ae.bi_buf,Ae.bi_buf>>=8,Ae.bi_valid-=8)}(be)}},{"../utils/common":41}],53:[function(e,n,r){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,n,r){(function(o){(function(s,u){if(!s.setImmediate){var d,f,v,m,_=1,g={},y=!1,w=s.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(s);x=x&&x.setTimeout?x:s,d={}.toString.call(s.process)==="[object process]"?function(T){process.nextTick(function(){S(T)})}:function(){if(s.postMessage&&!s.importScripts){var T=!0,M=s.onmessage;return s.onmessage=function(){T=!1},s.postMessage("","*"),s.onmessage=M,T}}()?(m="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",E,!1):s.attachEvent("onmessage",E),function(T){s.postMessage(m+T,"*")}):s.MessageChannel?((v=new MessageChannel).port1.onmessage=function(T){S(T.data)},function(T){v.port2.postMessage(T)}):w&&"onreadystatechange"in w.createElement("script")?(f=w.documentElement,function(T){var M=w.createElement("script");M.onreadystatechange=function(){S(T),M.onreadystatechange=null,f.removeChild(M),M=null},f.appendChild(M)}):function(T){setTimeout(S,0,T)},x.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var M=new Array(arguments.length-1),I=0;I<M.length;I++)M[I]=arguments[I+1];var F={callback:T,args:M};return g[_]=F,d(_),_++},x.clearImmediate=k}function k(T){delete g[T]}function S(T){if(y)setTimeout(S,0,T);else{var M=g[T];if(M){y=!0;try{(function(I){var F=I.callback,O=I.args;switch(O.length){case 0:F();break;case 1:F(O[0]);break;case 2:F(O[0],O[1]);break;case 3:F(O[0],O[1],O[2]);break;default:F.apply(u,O)}})(M)}finally{k(T),y=!1}}}}function E(T){T.source===s&&typeof T.data=="string"&&T.data.indexOf(m)===0&&S(+T.data.slice(m.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,commonjsGlobal!==void 0?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10);var JSZip=jszip_minExports,Outline=function(){function e(n){_classCallCheck(this,e),this.doc=n.doc,this.messageHandler=n.messageHandler,this.outline=n.outline,this.index=n.index,this.children=n.children||[],this.parent=n.parent}return _createClass(e,[{key:"pageNumber",get:function(){return this.outline.pageNumber}},{key:"title",get:function(){return this.outline.title}},{key:"level",get:function(){return this.outline.level}},{key:"getOutline",value:function(){return this.outline}}]),e}();pdfExports.GlobalWorkerOptions.workerSrc="./lib/pdf.worker.min.js";var CMAP_URL="./cmaps/",_pwd=new WeakMap,_oldPwd=new WeakMap,_textSearch=new WeakMap,_activeSearchIndex=new WeakMap,_fonFile=new WeakMap,_formatRect=new WeakSet,_formatCoords=new WeakSet,_formatLinePoints=new WeakSet,_formatInkPointes=new WeakSet,_formatAnnotation=new WeakSet,_getItems=new WeakSet,_convertAnnotationsForBackend=new WeakSet,_formatRectForBackend=new WeakSet,_formatLinePointsForBackend=new WeakSet,ComPDFKitViewer=function(){function e(q){_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_formatLinePointsForBackend),_classPrivateMethodInitSpec(this,_formatRectForBackend),_classPrivateMethodInitSpec(this,_convertAnnotationsForBackend),_classPrivateMethodInitSpec(this,_getItems),_classPrivateMethodInitSpec(this,_formatAnnotation),_classPrivateMethodInitSpec(this,_formatInkPointes),_classPrivateMethodInitSpec(this,_formatLinePoints),_classPrivateMethodInitSpec(this,_formatCoords),_classPrivateMethodInitSpec(this,_formatRect),_classPrivateFieldInitSpec(this,_pwd,{writable:!0,value:""}),_classPrivateFieldInitSpec(this,_oldPwd,{writable:!0,value:""}),_classPrivateFieldInitSpec(this,_textSearch,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_activeSearchIndex,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,_fonFile,{writable:!0,value:null}),this.config=q,this.viewerContainer=null,this.pdfLoadingTask=null,this.printService=null,this.pdfSidebar=null,this.pdfOutlineViewer=null,this.outlines=[],this.pdfLayerViewer=null,this.pdfDocument=null,this.downloadComplete=!1,this.isInitialViewSet=!1,this.pdfLinkService=null,this.externalServices=GenericExternalServices,this.percent=0,this.pageChangedCallback=null,this.scaleChangedCallback=null,this.annotationsNumChangedCallback=null,this.distanceChangedCallback=null,this._license="",this._token=null,this._pdfId=null,this.annotations=null,this.annotationHistory=[],this._annotationMode=0,this._boundEvents=Object.create(null),this._title=document.title,this.activeTool="",this.color="color",this.pagesPtr=[],this.saveAction=null,this.optionUrl={baseUrl:"https://wms.compdf.com",verifyUrl:"/api/license/verify/v1",webviewBaseUrl:"https://web-viewer-backend.compdf.com",uploadUrl:"/web-viewer/annotate/openPdfToAnnotate",editUrl:"/web-viewer/annotate/edit",saveUrl:"/web-viewer/annotate/save",flattenUrl:"/web-viewer/annotate/saveAndFlatten",uploadAnnotationsUrl:"/web-viewer/annotate/importAnnotateToPdf",downloadAnnotation:"/web-viewer/annotate/exportAnnotate",compareUrl:"/web-viewer/annotate/pdfCompare"},this.eventBus=new EventBus,this.toolMode="",this.$t=q.$t,this.fontFileInited=!1,this.contentEditAnnotationsManager={},this.initWorker()}var n,r,o,s,u,d,f,v,m,_,g,y,w,x,k,S,E,T,M,I,F,O,N,D,X,U,Z,j,Q,ve,Se,we,oe,ne;return _createClass(e,[{key:"pagesCount",get:function(){return this.doc?this._pagesCount:0}},{key:"annotationsCount",get:function(){return this.pdfViewer.annotationStorage?this.pdfViewer.annotationStorage.size:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(q){this.pdfViewer.currentPageNumber=q}},{key:"currentPageNumber",get:function(){return this.pdfViewer.currentPageNumber}},{key:"scale",get:function(){return this.pdfViewer.currentScale}},{key:"getPageWidth",value:function(q){return this.pagesPtr[q-1].width}},{key:"getPageHeight",value:function(q){return this.pagesPtr[q-1].height}},{key:"initWorker",value:function(){var q=new PDFWorker;this.worker=q;var H=q.messageHandler;this.messageHandler=H}},{key:"init",value:(ne=_asyncToGenerator(_regeneratorRuntime().mark(function q(){var H=this;return _regeneratorRuntime().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,new Promise(function(le,Ce){var Te=new PDFWorker;H.worker=Te;var ke=Te.messageHandler;H.messageHandler=ke});case 2:case"end":return Y.stop()}},q)})),function(){return ne.apply(this,arguments)})},{key:"_decrypt",value:function(q){var H=new JSEncrypt;H.setPrivateKey(`MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCb9LJZzBAOR3YDT0/rLqY1pCu6
    ge7lb0aU4k/aTnxSz10t/JUUtGMvQ2tBy36hjwulouM6xoFSm8gnjovALuVpTltRPPEfN+uX6AVy
    Wa58TsS2+Q9JRPHJlOb4sDEriUnzLtonahqF/S/EiijMAkNc2b1KNNUb2bDNmLi6YvT7d1sh3iIf
    kTggsyt3UVUjh2exEVpb8Ww4grmLJjFssi5nZksLDhlA0MUr4dPmIcDl0RlIwHTsxrJbewnX7kNd
    MsSvCxYV1EtmBx9KRCu8ON2bRwKaaWd7fAT9yZWYpjQmbZ5A4CAqDcEAlW8RrhMv0FNKVn1/GMVu
    DC/PsWTyI1fJAgMBAAECggEAazkHThmwiEC1cH0dEzLVb1faALbIitHAkygtgognjb+n7rATx1Jm
    Rt5xZaEFBQqWFWEyHPzRePxF1nx4tL8JVydaPTZLCQ2nWp9Y70+dWTXGpY4C5nsSSWeojR6GD8qq
    Hxn9PtACQFDcgKIEfo6nxbSmIdjFFArNNe1kRDE5AZHtZi7Q6JDRewp6mESrSGED1JodQ4xJoEZl
    1HPvMTxcGGQk/8EZOWXaGvGuBEfIMc33g61YxxhWXb6Rf7x8QKpa2cRLbqN+74wdiWyQUAcSjZSi
    LzeY0a4h7DKkhBEHWXT4svrXsF1RjMRpTi8amxNgUP7RSSTiF9iT6fpGpnwWKQKBgQDsP18lwMjl
    blt8mKqrL9SKVMoOLKUaci9WNV14qEUgNp/RIqjflS0wasbRo7suix2Cwd58ZVAmueuH5W9ZM9NP
    A9RP5vnm8fqfqMZIq+Z7ORhry5QpGlOo0tKkik716kTRXl5w3O/YcR8wBZ7Xzwh467OYcRMNnr2i
    8F5eT4Ny5wKBgQCo/sQrc4KqsYwdWWZW+O92jIylxgtCQsZNg1cXql91IuB3lx1HnDaN/R2MeCkp
    ok+hYXWB0848321x+vYdL9ivLUrnHpNoycFEuhqNTYbyZWnq1tKPz9RDhPIwEmlQVW3dU9hWEjF5
    6sa4NXP7/lSiYaQe0FS4BYQ7KCwahxw5zwKBgQCyCYv92oxLguBFRJQR0EjfOsjO58xA4t5TnIHl
    hQIbJa9JH1KetEBK5Z0Rrc9JYyOJP+sYWg2OMbyTPE+urMTJHjypPosEBUX3fmx3pbxbDosd6Vyt
    oR588uw1fdnFr5fPJMwNSCMkPRPgz8uGHYrn/dDpyAUw1XlaSsUDU+7e7wKBgDHCej6VD3d1Od12
    cmTPfar5bXxuWOhUwxEVyDImr17NOyzbaPqp64JZcjbnNq+UpD/Pc4sbs5FG9HHoREmJyhKikniF
    D0B+j5LN/X13w3FiHRLR2EQSHN0YqzsuYKYP0X6m7n9BciIE2ChrTNB5LbB2cZ3FF/zrWukURhA1
    kkEPAoGBAIpoB6ehuqTn7cisbXjaLqwzX35y50+KED2TamB1FkTjfU5YPsSnKBX9CfCeEd+yr08r
    mecHPUYVj5SpLlcpzx+n7taJCzNJ4SuE186qwHR+MGAS3reXsz5l5GVu7WSH2uKZ7OuXnzCJC4/r
    dx/f2C0wOi6fdC46fAZVACROoV9T`);for(var Y=Base64.decode(q),le=Y.length,Ce="",Te=0;Te<le;){var ke=Base64.encode(Y.substr(Te,256));Ce+=H.decrypt(ke),Te+=256}return Ce||!1}},{key:"_verifyLicense",value:(oe=_asyncToGenerator(_regeneratorRuntime().mark(function q(H){var Y,le,Ce,Te;return _regeneratorRuntime().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return Y=window.location.hostname.split(".").slice(-2).join("."),le=Y,Ce=this.messageHandler,ke.next=5,Ce.sendWithPromise("InitConfig",{license:H,appId:le});case 5:return Te=ke.sent,ke.abrupt("return",Te);case 7:case"end":return ke.stop()}},q,this)})),function(q){return oe.apply(this,arguments)})},{key:"_twoStepVerification",value:(we=_asyncToGenerator(_regeneratorRuntime().mark(function q(H){var Y,le,Ce,Te,ke,Ee=this;return _regeneratorRuntime().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this._verifyLicense(H);case 2:if(!(Y=Pe.sent)){Pe.next=13;break}return le=window.location.hostname.split(".").slice(-2).join("."),Ce=CryptoJS.MD5("".concat(this._license,"7").concat(le,"compdfkitonlinelicense")).toString(),Te={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({license:H,platform:7,app_id:le,signature:Ce})},Pe.next=9,fetch(this.optionUrl.baseUrl+this.optionUrl.verifyUrl,Te).then(function(Be){return Be.json()}).then(function(Be){if(Be.code===200){var $e=Ee._decrypt(Be.license);return $e||(alert("Invalid License"),!1)}return alert(Be.message),!1}).catch(function(Be){return alert("Network Error"),console.log({error:!0,message:Be.message}),!1});case 9:return ke=Pe.sent,Pe.next=12,this._verifyLicense(ke);case 12:Y=Pe.sent;case 13:if(Y){Pe.next=17;break}return Pe.abrupt("return",!0);case 17:Pe.t0=Y,Pe.next=Pe.t0===-100?20:Pe.t0===-101?22:Pe.t0===-102?24:Pe.t0===-103||Pe.t0===-104?26:Pe.t0===-105||Pe.t0===-106?28:Pe.t0===-1e3?30:32;break;case 20:return alert("The license is invalid"),Pe.abrupt("break",34);case 22:return alert("The license has expired"),Pe.abrupt("break",34);case 24:return alert("The license does not support the current platform"),Pe.abrupt("break",34);case 26:return alert("The license does not support your domain"),Pe.abrupt("break",34);case 28:case 30:return alert("License has not been initialized"),Pe.abrupt("break",34);case 32:return alert("Unknown error"),Pe.abrupt("break",34);case 34:return Pe.abrupt("return",!1);case 35:case"end":return Pe.stop()}},q,this)})),function(q){return we.apply(this,arguments)})},{key:"initConfig",value:(Se=_asyncToGenerator(_regeneratorRuntime().mark(function q(H){var Y,le,Ce,Te;return _regeneratorRuntime().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(H.license){ke.next=2;break}return ke.abrupt("return",!1);case 2:return this._license=H.license,ke.prev=3,ke.next=6,this.worker.promise;case 6:ke.next=12;break;case 8:return ke.prev=8,ke.t0=ke.catch(3),console.log(ke.t0),ke.abrupt("return");case 12:return ke.next=14,this._twoStepVerification(H.license);case 14:if(Y=ke.sent,H.webviewerServer==="Server"&&(this.webviewerServer=!0),!Y){ke.next=29;break}if(this.webviewerServer){ke.next=25;break}return ke.next=20,fetch("./lib/DroidSansFallbackFull.ttf");case 20:return le=ke.sent,ke.next=23,le.blob();case 23:Ce=ke.sent,_classPrivateFieldSet(this,_fonFile,new File([Ce],"DroidSansFallbackFull.ttf",{type:Ce.type}));case 25:return ke.next=27,this.messageHandler.sendWithPromise("InitDocument");case 27:Te=ke.sent,this.doc=Te;case 29:return ke.abrupt("return",Y);case 30:case"end":return ke.stop()}},q,this,[[3,8]])})),function(q){return Se.apply(this,arguments)})},{key:"initializeViewer",value:function(q){var H=q.container,Y=q.viewer,le=q.thumbnailView,Ce=q.annotationView,Te=q.findbarView,ke=q.toggleButton;this._initializeViewerComponents({container:H,viewer:Y,thumbnailView:le,annotationView:Ce,findbarView:Te,toggleButton:ke}),this.initBindEvents(),le&&Ce&&(this.bindEvents(),this.bindWindowEvents())}},{key:"setTool",value:function(q){var H=q.tool,Y=q.color;this.activeTool=H,this.color=Y,this.eventBus.dispatch("toolChanged",{tool:H,color:Y})}},{key:"initAnnotations",value:function(q){for(var H=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Y=0;Y<q.length;Y++)this.handleAnnotations(q[Y],!0),H&&this.pdfViewer.renderAnnotation(q[Y]);this.eventBus.dispatch("annotationChanged",{annotations:this.annotations})}},{key:"handleAnnotations",value:(ve=_asyncToGenerator(_regeneratorRuntime().mark(function q(H){var Y,le,Ce,Te,ke,Ee,Pe,Be,$e,Oe,Ne=arguments;return _regeneratorRuntime().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(Y=Ne.length>1&&Ne[1]!==void 0&&Ne[1],this.annotations||(this.annotations={}),!Y){J.next=6;break}this.initAddAnnotations(H),J.next=32;break;case 6:if(!(Number(H.pageIndex)+1>this.pagesCount)){J.next=8;break}return J.abrupt("return");case 8:if(this.pushAnnotations(H),this.webviewerServer&&H.type!=="stamp"){J.next=32;break}return"destPage"in H&&(H.doc=this.doc,H.pageHeight=this.pagesPtr[H.pageIndex].height),le=this.pagesPtr[H.pageIndex].pagePtr,J.next=14,this.messageHandler.sendWithPromise("CreateAnnotation",{doc:this.doc,pagePtr:le,annotation:H});case 14:if(Ce=J.sent,H.pagePtr=le,H.annotPtr=Ce,H.rect||!this.webviewerServer){J.next=32;break}return J.next=20,this.messageHandler.sendWithPromise("GetAnnotRect",{pagePtr:le,annotPtr:Ce});case 20:Te=J.sent,ke=this.pdfViewer.getPageView(H.pageIndex),Ee=ke.viewport.viewBox[2],Pe=ke.viewport.viewBox[3],Be=Te.right-Te.left,$e=Te.bottom-Te.top,Oe={left:(Ee-Be)/2,top:(Pe-$e)/2,right:(Ee+Be)/2,bottom:(Pe+$e)/2},H.rect=Oe;case 32:case"end":return J.stop()}},q,this)})),function(q){return ve.apply(this,arguments)})},{key:"initAddAnnotations",value:function(q){var H=q.pageIndex,Y=this.annotations;Y[H]||(Y[H]=[]),q.index!==void 0?Y[H][q.index]=q:Y[H].push(q),annotationStore.annotationsAll||(annotationStore.annotationsAll=Y)}},{key:"pushAnnotations",value:function(q){var H=q.pageIndex,Y=this.annotations;Y[H]||(Y[H]=[],this.pdfViewer._pages[H].annotations=Y[H]),annotationStore.annotationsAll||(annotationStore.annotationsAll=Y),Y[H].push(q)}},{key:"addAnnotations",value:function(q){this.handleAnnotationChange({type:"add",annotation:[q]})}},{key:"delAnnotations",value:function(q){this.handleAnnotationChange({type:"delete",annotation:[q]})}},{key:"addEvent",value:function(q,H){this.eventBus._on(q,H)}},{key:"removeEvent",value:function(q,H){this.eventBus._off(q,H)}},{key:"loadDocument",value:(Q=_asyncToGenerator(_regeneratorRuntime().mark(function q(H){var Y,le,Ce,Te,ke,Ee=this,Pe=arguments;return _regeneratorRuntime().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:if(Y=Pe.length>1&&Pe[1]!==void 0?Pe[1]:{},!this.pdfLoadingTask){Be.next=4;break}return Be.next=4,this.close();case 4:return Y.annotations&&parseAnnotationFromXml(Y.annotations),this.info=Y.info||null,this.pageChangedCallback=Y.pageChangedCallback||this.pageChangedCallback,this.scaleChangedCallback=Y.scaleChangedCallback||this.scaleChangedCallback,this.annotationsNumChangedCallback=Y.annotationsNumChangedCallback||this.annotationsNumChangedCallback,this.distanceChangedCallback=Y.distanceChangedCallback||this.distanceChangedCallback,this.annotations=null,annotationStore.annotationsAll=null,annotationStore.selectedName=null,this.fontFileInited=!1,this.saveAction=Y.saveAction||null,le={cMapUrl:CMAP_URL,cMapPacked:!0,enableXfa:!0},typeof H=="string"?le.url=H:H&&"byteLength"in H?le.data=H:H.url&&H.originalUrl&&(le.url=H.url),Ce=pdfExports.getDocument(le),this.pdfLoadingTask=Ce,this._docName=Y.filename||pdfExports.getPdfFilenameFromUrl(le.url),Te=function($e){return _classPrivateFieldSet(Ee,_pwd,$e)},ke=function($e,Oe){_classPrivateFieldGet(Ee,_oldPwd)&&Y.notUpdatePwd?(Te(_classPrivateFieldGet(Ee,_oldPwd)),$e(_classPrivateFieldGet(Ee,_oldPwd)),Ce.onPassword=null):Y.pwd?(Te(Y.pwd),$e(Y.pwd),Ce.onPassword=null):(Ee.passwordPrompt.setUpdateCallback($e,Oe,Te),Ee.passwordPrompt.open())},Ce.onPassword=ke,Ce.onProgress=function($e){var Oe=$e.loaded,Ne=$e.total;(Y.progress||Ee.progress).call(Ee,Oe/Ne)},Be.next=26,Ce.promise.then(function(){var $e=_asyncToGenerator(_regeneratorRuntime().mark(function Oe(Ne){return _regeneratorRuntime().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,Ne.getData().then(function(){var fe=_asyncToGenerator(_regeneratorRuntime().mark(function re(_e){var be,Ae,Le,Ve,Fe;return _regeneratorRuntime().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return Ee.pdfDocument=Ne,Y.notUpdatePwd||_classPrivateFieldSet(Ee,_oldPwd,_classPrivateFieldGet(Ee,_pwd)),be=new Uint8Array(_e),De.next=5,Ee.messageHandler.sendWithPromise("LoadFile",{buffer:be,fontFile:_classPrivateFieldGet(Ee,_fonFile),fontName:"DroidSansFallbackFull"});case 5:return De.next=7,Ee.messageHandler.sendWithPromise("LoadDocumentByStream",{doc:Ee.doc,fileId:0,length:be.length,password:_classPrivateFieldGet(Ee,_pwd)});case 7:return De.sent,Ee.contentEditAnnotationsManager.addTextEditor=function(We){var Re=We.pageNumber;if(Re>Ee.pagesCount||Re<1)throw new Error({message:"Invalid pageNumber"});Ee.toolMode!=="editor"&&Ee.setToolMode("editor"),Ee.currentPageNumber!==Re&&Ee.pdfViewer.scrollPageIntoView({pageNumber:Re});var He=Re-1,Ze=Ee.pdfViewer._pages[He];Ze&&Ze.addTextEditor(We)},Ee.contentEditAnnotationsManager.getEditAnnotation=function(){var We=_asyncToGenerator(_regeneratorRuntime().mark(function Re(He){var Ze,Xe,at;return _regeneratorRuntime().wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:if(!(He>Ee.pagesCount||He<1)){ut.next=2;break}throw new Error({message:"Invalid pageNumber"});case 2:if(Ee.toolMode!=="editor"&&Ee.setToolMode("editor"),Ee.currentPageNumber!==He&&Ee.pdfViewer.scrollPageIntoView({pageNumber:He}),Ze=He-1,!(Xe=Ee.pdfViewer._pages[Ze])){ut.next=11;break}return ut.next=9,Xe.getEditAnnotation();case 9:return at=ut.sent,ut.abrupt("return",at);case 11:case"end":return ut.stop()}},Re)}));return function(Re){return We.apply(this,arguments)}}(),Ae=null,De.next=13,Ee.initPage();case 13:if(!Ee.webviewerServer){De.next=25;break}return Ee.controller&&(Ee.controller.abort(),Ee.controller=null),(Le=new FormData).append("file",new Blob([_e],{type:"application/pdf"}),Ee._docName),Le.append("password",_classPrivateFieldGet(Ee,_pwd)),Ee.controller=new AbortController,Ve=Ee.controller.signal,Fe={method:"POST",headers:{Authorization:Ee._token},signal:Ve,body:Le},De.next=23,fetch(Ee.optionUrl.webviewBaseUrl+Ee.optionUrl.uploadUrl,Fe).then(function(We){return We.json()}).then(function(We){if(We.code==="200"){var Re=We.data;Ee._pdfId=Re.pdfId;var He=Re.annotateJson&&Re.annotateJson;Ae=Ee.convertAnnotation(He)}else We.code}).catch(function(We){if(We.name!=="AbortError")return console.log(We),{error:!0,message:We.message}});case 23:De.next=28;break;case 25:return De.next=27,Ee.getAnnotations();case 27:Ae=De.sent;case 28:Ae&&Ee.initAnnotations(Ae);case 29:case"end":return De.stop()}},re)}));return function(re){return fe.apply(this,arguments)}}());case 2:return J.next=4,Ee.load(Ne);case 4:return J.abrupt("return",{pwd:_classPrivateFieldGet(Ee,_pwd)});case 5:case"end":return J.stop()}},Oe)}));return function(Oe){return $e.apply(this,arguments)}}(),function($e){if(Ce===Ee.pdfLoadingTask){var Oe="loading_error";if($e instanceof pdfExports.InvalidPDFException)return Oe="invalid_file_error",console.warn("Invalid or corrupted PDF file."),new Promise(function(Ne,J){J("invalid_file_error")});if($e instanceof pdfExports.MissingPDFException)Oe="missing_file_error",console.warn("Missing PDF file.");else if($e instanceof pdfExports.UnexpectedResponseException)Oe="unexpected_response_error",console.warn("Unexpected server response.");else if($e){if($e.message==="No password given")return Oe="no_password_given",console.warn("No password given."),new Promise(function(Ne,J){J("no_password_given")});if($e.message==="Incorrect Password")return new Promise(function(Ne,J){J("incorrect_password")})}throw new Error(Oe)}});case 26:return Be.abrupt("return",Be.sent);case 27:case"end":return Be.stop()}},q,this)})),function(q){return Q.apply(this,arguments)})},{key:"getSelectedText",value:function(q){if(q){var H=this.pdfViewer._pages[q-1];if(H)return H.selectedText}return this.pdfViewer._pages.map(function(Y){return Y.selectedText}).filter(function(Y){return Y!==null}).join(`
`)}},{key:"convertAnnotation",value:function(q){var H=[];for(var Y in q){var le=q[Y];Array.isArray(le)||(le=[le]);for(var Ce=0;Ce<le.length;Ce++){le[Ce].type=Y;var Te=_classPrivateMethodGet(this,_formatAnnotation,_formatAnnotation2).call(this,le[Ce]);H.push(Te)}}return H}},{key:"getOutlines",value:function(){if(this.outlines)return this.outlines}},{key:"scrollPageIntoView",value:function(q){q.pageNumber}},{key:"search",value:(j=_asyncToGenerator(_regeneratorRuntime().mark(function q(H){var Y;return _regeneratorRuntime().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.next=2,this.messageHandler.sendWithPromise("Search",{pagesPtr:this.pagesPtr,value:H});case 2:return Y=le.sent,this.searchResults=Y,this.eventBus.dispatch("search",Y),Y.length?this.setActiveSearchResult():(this.clearSearchResults(),_classPrivateFieldSet(this,_activeSearchIndex,0)),le.abrupt("return",Y);case 7:case"end":return le.stop()}},q,this)})),function(q){return j.apply(this,arguments)})},{key:"setActiveSearchResult",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this.searchResults){var Y=q||this.searchResults[0],le=Y.quads[0],Ce=le.left*this.scale,Te=le.top*this.scale,ke=this.pdfViewer._pages[Y.pageNum-1];if(this.pdfViewer.currentPageNumber=Y.pageNum,scrollIntoView(ke.div,{left:Ce,top:Te}),q){var Ee=this.searchResults[_classPrivateFieldGet(this,_activeSearchIndex)];this.pdfViewer._pages[Ee.pageNum-1].clearActiveSearchResult(Ee),ke.setActiveSearchResult(q),_classPrivateFieldSet(this,_activeSearchIndex,H)}else ke.setActiveSearchResult(Y),_classPrivateFieldSet(this,_activeSearchIndex,0)}}},{key:"clearSearchResults",value:function(){for(var q=0;q<this.pdfViewer._pages.length;q++)this.pdfViewer._pages[q].clearSearchResults();this.searchResults=null}},{key:"initPage",value:(Z=_asyncToGenerator(_regeneratorRuntime().mark(function q(){var H,Y,le,Ce;return _regeneratorRuntime().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,this.messageHandler.sendWithPromise("GetPageCount",{doc:this.doc});case 2:H=Te.sent,this._pagesCount=H,this.pagesPtr=[],Y=0;case 6:if(!(Y<H)){Te.next=17;break}return Te.next=9,this.messageHandler.sendWithPromise("GetPageSize",{doc:this.doc,pageIndex:Y});case 9:return le=Te.sent,Te.next=12,this.messageHandler.sendWithPromise("InitText",{pagePtr:le.pagePtr});case 12:Ce=Te.sent,this.pagesPtr.push({doc:this.doc,pagePtr:le.pagePtr,textPtr:Ce,width:le.width,height:le.height});case 14:Y++,Te.next=6;break;case 17:case"end":return Te.stop()}},q,this)})),function(){return Z.apply(this,arguments)})},{key:"getAnnotations",value:(U=_asyncToGenerator(_regeneratorRuntime().mark(function q(){var H,Y,le,Ce,Te,ke,Ee,Pe,Be,$e;return _regeneratorRuntime().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:H=[],Y=this.pagesPtr,le=0;case 3:if(!(le<this.pagesCount)){Oe.next=33;break}return Ce=Y[le],Oe.next=7,this.messageHandler.sendWithPromise("InitAnnot",{pageIndex:le,pagePtr:Ce.pagePtr});case 7:Te=Oe.sent,ke=0;case 9:if(!(ke<Te.annotCount)){Oe.next=30;break}if(Ee=Te.annotations[ke],Pe=Ee.type,Be=AnnotationTypeString[Pe],Ee.pageIndex=le,Ee.type=Be,$e=null,Be!=="widget"){Oe.next=22;break}return Oe.next=19,this.messageHandler.sendWithPromise("GetWidgetAnnotation",{doc:this.doc,annotPtr:Ee.annotPtr,pagePtr:Ee.pagePtr,typeInt:Pe});case 19:$e=Oe.sent,Oe.next=25;break;case 22:return Oe.next=24,this.messageHandler.sendWithPromise("GetAnnotation",{doc:this.doc,annotPtr:Ee.annotPtr,pagePtr:Ee.pagePtr,typeInt:Pe,scale:this.scale});case 24:$e=Oe.sent;case 25:Object.assign(Ee,$e),H.push(Ee);case 27:ke++,Oe.next=9;break;case 30:le++,Oe.next=3;break;case 33:return this.pdfViewer.pagesPtr=this.pagesPtr,Oe.abrupt("return",H);case 35:case"end":return Oe.stop()}},q,this)})),function(){return U.apply(this,arguments)})},{key:"reRenderAnnotations",value:(X=_asyncToGenerator(_regeneratorRuntime().mark(function q(){var H,Y,le,Ce,Te,ke,Ee,Pe,Be,$e,Oe;return _regeneratorRuntime().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:this.annotations=null,H=[],Y=this.pagesPtr,le=0;case 4:if(!(le<Y.length)){Ne.next=34;break}return Ce=Y[le],Ne.next=8,this.messageHandler.sendWithPromise("InitAnnot",{pageIndex:le,pagePtr:Ce.pagePtr});case 8:Te=Ne.sent,ke=0;case 10:if(!(ke<Te.annotCount)){Ne.next=31;break}if(Ee=Te.annotations[ke],Pe=Ee.type,Be=AnnotationTypeString[Pe],Ee.pageIndex=le,Ee.type=Be,$e=null,Be!=="widget"){Ne.next=23;break}return Ne.next=20,this.messageHandler.sendWithPromise("GetWidgetAnnotation",{doc:this.doc,annotPtr:Ee.annotPtr,pagePtr:Ee.pagePtr,typeInt:Pe});case 20:$e=Ne.sent,Ne.next=26;break;case 23:return Ne.next=25,this.messageHandler.sendWithPromise("GetAnnotation",{doc:this.doc,annotPtr:Ee.annotPtr,pagePtr:Ee.pagePtr,typeInt:Pe,scale:this.scale});case 25:$e=Ne.sent;case 26:Object.assign(Ee,$e),H.push(Ee);case 28:ke++,Ne.next=10;break;case 31:le++,Ne.next=4;break;case 34:for(Oe=0;Oe<H.length;Oe++)this.annotations||(this.annotations={}),this.pushAnnotations(H[Oe]),this.pdfViewer.renderAnnotation(H[Oe]);this.eventBus.dispatch("annotationChanged",{annotations:this.annotations});case 36:case"end":return Ne.stop()}},q,this)})),function(){return X.apply(this,arguments)})},{key:"supportsFullscreen",get:function(){return shadow$1(this,"supportsFullscreen",document.webkitFullscreenEnabled||document.mozFullscreenEnabled||document.fullscreenEnabled)}},{key:"removeAllAnnotations",value:function(){this.pdfViewer.annotationStorage&&this.pdfViewer.annotationStorage.cleanup()}},{key:"importAnnotations",value:(D=_asyncToGenerator(_regeneratorRuntime().mark(function q(H){var Y,le,Ce,Te,ke,Ee,Pe=this;return _regeneratorRuntime().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Be.next=2,new Promise(function($e){var Oe=new FileReader;Oe.onload=function(Ne){var J=Ne.target.result;$e(J)},Pe.webviewerServer?Oe.readAsText(H):Oe.readAsArrayBuffer(H)});case 2:if(Y=Be.sent,!this.webviewerServer){Be.next=12;break}for(le=parseAnnotationFromXml(Y),Ce=[],Te=0;Te<le.length;Te++)ke=_classPrivateMethodGet(this,_formatAnnotation,_formatAnnotation2).call(this,le[Te]),Ce.push(ke);if(Ce.length){Be.next=9;break}return Be.abrupt("return");case 9:this.handleAnnotationChange({type:"add",annotation:Ce}),Be.next=17;break;case 12:return Ee=new Uint8Array(Y),Be.next=15,this.messageHandler.sendWithPromise("XFDFImportAnnotations",{doc:this.doc,xfdfBuffer:Ee});case 15:this.emptyAnnotations(),this.reRenderAnnotations();case 17:case"end":return Be.stop()}},q,this)})),function(q){return D.apply(this,arguments)})},{key:"saveAnnotations",value:function(){if(this.pdfDocument&&this.info){var q,H=[],Y=_createForOfIteratorHelper(this.pdfViewer.annotationStorage._storage);try{for(Y.s();!(q=Y.n()).done;){var le=_slicedToArray(q.value,2),Ce=(le[0],le[1]);H.push(Ce.annotationObj)}}catch(Te){Y.e(Te)}finally{Y.f()}this.uploadAnnotations({append_objects:H,tid:this.info.tid})}}},{key:"initApiUrl",value:function(q){this.optionUrl=q}},{key:"setPassword",value:function(q){if(this.webviewerServer){var H={method:"POST",headers:{"Content-Type":"application/json",Authorization:this._token},body:JSON.stringify({pdfId:this._pdfId,annotateHandles:[{operate:"set-password",userPassword:q}]})};return fetch(this.optionUrl.webviewBaseUrl+this.optionUrl.editUrl,H).then(function(Y){return Y.json()}).then(function(Y){return Y.code==="200"}).catch(function(Y){return console.log(Y),!1})}return this.saveAction="set",_classPrivateFieldSet(this,_pwd,q),!0}},{key:"removePassword",value:function(){if(this.webviewerServer){var q={method:"POST",headers:{"Content-Type":"application/json",Authorization:this._token},body:JSON.stringify({pdfId:this._pdfId,annotateHandles:[{operate:"remove-password"}]})};return fetch(this.optionUrl.webviewBaseUrl+this.optionUrl.editUrl,q).then(function(H){return H.json()}).then(function(H){return H.code==="200"}).catch(function(H){return console.log(H),!1})}return _classPrivateFieldGet(this,_pwd)&&(this.saveAction="remove",_classPrivateFieldSet(this,_pwd,"")),!0}},{key:"getOptionUrl",value:function(){return this.optionUrl}},{key:"uploadAnnotations",value:function(q){var H={method:"POST",headers:{Accept:"application/json","Content-type":"application/json"}};q.append_objects.length&&(H.body=JSON.stringify(q),fetch(this.optionUrl.baseUrl+this.optionUrl.saveAnnotations+"?f="+this.info.token,H).then(function(Y){return alert("Save Success"),Y.json()}).then(function(Y){return Y}).catch(function(Y){return{error:!0,message:Y.message}}))}},{key:"toggleSidebar",value:function(){this.pdfSidebar.toggle()}},{key:"load",value:(N=_asyncToGenerator(_regeneratorRuntime().mark(function q(H){var Y,le,Ce,Te,ke,Ee,Pe=this;return _regeneratorRuntime().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return this.pdfLinkService.setDocument(H),(Y=this.pdfViewer).setDocument(H,this.annotations,this.pagesPtr),le=Y.firstPagePromise,Y.onePageRendered,Y.pagesPromise,H.getDownloadInfo().then(function($e){var Oe=$e.length;Pe._contentLength=Oe,Pe.downloadComplete=!0,le.then(function(){Pe.eventBus.dispatch("documentloaded",{source:Pe})})}),this.pdfThumbnailViewer&&this.pdfThumbnailViewer.setDocument(H),Ce=this.doc,Te=this.messageHandler,Be.next=10,Te.sendWithPromise("GetOutlines",{doc:Ce});case 10:ke=Be.sent,Ee=function $e(Oe,Ne,J){var fe=new Outline({outline:Oe,index:Ne,doc:Ce,messageHandler:Te,parent:J});return Oe.children.forEach(function(re,_e){fe.children.push($e(re,_e,fe))}),fe},ke.forEach(function($e,Oe){var Ne=Ee($e,Oe,null);Pe.outlines.push(Ne)}),le.then(function($e){Pe.setInitialView(null,{rotation:null,sidebarView:0,scrollMode:-1,spreadMode:-1})}),this.eventBus.dispatch("documentinit",{source:this});case 15:case"end":return Be.stop()}},q,this)})),function(q){return N.apply(this,arguments)})},{key:"initBindEvents",value:function(){var q=this.eventBus;this._boundEvents,q._on("scalechanging",this.webViewerScaleChanging.bind(this))}},{key:"bindEvents",value:function(){var q=this.eventBus;this._boundEvents,q._on("resize",this.webViewerResize.bind(this)),q._on("pagerendered",this.webViewerPageRendered.bind(this)),q._on("updateviewarea",this.webViewerUpdateViewarea.bind(this)),q._on("pagechanging",this.webViewerPageChanging.bind(this)),q._on("rotationchanging",this.webViewerRotationChanging.bind(this)),q._on("sidebarviewchanged",this.webViewerSidebarViewChanged.bind(this)),q._on("presentationmodechanged",this.webViewerPresentationModeChanged.bind(this)),q._on("presentationmode",this.webViewerPresentationMode.bind(this)),q._on("nextpage",this.webViewerNextPage.bind(this)),q._on("previouspage",this.webViewerPreviousPage.bind(this)),q._on("zoomin",this.webViewerZoomIn.bind(this)),q._on("zoomout",this.webViewerZoomOut.bind(this)),q._on("pagenumberchanged",this.webViewerPageNumberChanged.bind(this)),q._on("scalechanged",this.webViewerScaleChanged.bind(this)),q._on("rotatecw",this.webViewerRotateCw.bind(this)),q._on("rotateccw",this.webViewerRotateCcw.bind(this)),q._on("switchscrollmode",this.webViewerSwitchScrollMode.bind(this)),q._on("scrollmodechanged",this.webViewerScrollModeChanged.bind(this)),q._on("switchspreadmode",this.webViewerSwitchSpreadMode.bind(this)),q._on("spreadmodechanged",this.webViewerSpreadModeChanged.bind(this)),q._on("findfromurlhash",this.webViewerFindFromUrlHash.bind(this)),q._on("updatefindmatchescount",this.webViewerUpdateFindMatchesCount.bind(this)),q._on("updatefindcontrolstate",this.webViewerUpdateFindControlState.bind(this)),q._on("fileinputchange",this.webViewerFileInputChange.bind(this)),q._on("openfile",this.webViewerOpenFile.bind(this)),q._on("switchannotationeditormode",this.webViewerSwitchAnnotationEditorMode.bind(this)),q._on("annotationsCountChanged",this.webViewerAnnotationsCountChanged.bind(this)),q._on("distanceChanged",this.webViewerDistanceChanged.bind(this)),q._on("annotationChange",this.handleAnnotationChange.bind(this)),q._on("createSignature",this.handleCreateSignature.bind(this)),q._on("handleField",this.handleField.bind(this)),q._on("pageNumberChanged",this.pageNumberChanged.bind(this))}},{key:"bindWindowEvents",value:function(){var q=this.eventBus,H=this._boundEvents;H.windowResize=function(){q.dispatch("resize",{source:window})},H.windowHashChange=function(){q.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})},H.windowUpdateFromSandbox=function(Y){q.dispatch("updatefromsandbox",{source:window,detail:Y.detail})},window.addEventListener("resize",H.windowResize),window.addEventListener("hashchange",H.windowHashChange),window.addEventListener("updatefromsandbox",H.windowUpdateFromSandbox)}},{key:"close",value:(O=_asyncToGenerator(_regeneratorRuntime().mark(function q(){var H,Y,le,Ce,Te;return _regeneratorRuntime().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(this.pdfLoadingTask){ke.next=2;break}return ke.abrupt("return");case 2:return(Ce=[]).push(this.pdfLoadingTask.destroy()),this.pdfLoadingTask=null,this.pdfDocument&&(this.pdfDocument=null,(Te=this.pdfThumbnailViewer)===null||Te===void 0||Te.setDocument(null),this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null)),this.isInitialViewSet=!1,this.downloadComplete=!1,this.url="",this.baseUrl="",this._downloadUrl="",this.documentInfo=null,this.saveAction=null,this.metadata=null,this._contentDispositionFilename=null,this._contentLength=null,this._saveInProgress=!1,this._hasAnnotationEditors=!1,(H=this.pdfSidebar)===null||H===void 0||H.reset(),(Y=this.pdfOutlineViewer)===null||Y===void 0||Y.reset(),(le=this.pdfAttachmentViewer)===null||le===void 0||le.reset(),this.outlines=[],_classPrivateFieldSet(this,_pwd,""),this._pdfId=null,this.annotations=null,ke.next=27,Promise.all(Ce);case 27:case"end":return ke.stop()}},q,this)})),function(){return O.apply(this,arguments)})},{key:"handleInk",value:function(q){var H=JSON.parse(JSON.stringify(q)),Y="",le=[];Array.isArray(H.inklist)?le=H.inklist:le.push(H.inklist);for(var Ce=0;Ce<le.length;Ce++)Y=Y+le[Ce].replaceAll(";",",")+"//";return H.inklist=Y,H}},{key:"handleAnnotationChange",value:(F=_asyncToGenerator(_regeneratorRuntime().mark(function q(H){var Y,le,Ce,Te,ke,Ee,Pe,Be,$e,Oe,Ne;return _regeneratorRuntime().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(Y=H.annotation,this.annotationHistory.push(Y),le=[],Ce=["textfield","checkbox","radiobutton","listbox","combobox","pushbutton"],H.type!=="add"){J.next=24;break}Array.isArray(Y)||(Y=[Y]),Te=Y.length,ke=0;case 8:if(!(ke<Te)){J.next=22;break}if(!(Number(Y[ke].pageIndex)+1>this.pagesCount)){J.next=11;break}return J.abrupt("continue",19);case 11:return Ce.includes(Y[ke].type)?Y[ke].operate="add-form":Y[ke].operate="add-annot",J.next=14,this.handleAnnotations(Y[ke]);case 14:this.pdfViewer&&this.pdfViewer.renderAnnotation(Y[ke],!!H.show),Y[ke].targetPage=1*Y[ke].pageIndex+1,(Ee=JSON.parse(JSON.stringify(Y[ke]))).inklist&&(Ee=this.handleInk(Ee)),le.push(Ee);case 19:ke++,J.next=8;break;case 22:J.next=48;break;case 24:if(Pe=this.annotations[Y.pageIndex]){J.next=27;break}return J.abrupt("return");case 27:if(Be=findIndex(Y.name,Pe),this.webviewerServer&&(Y.index=Be+1),H.type!=="delete"){J.next=35;break}Pe.splice(Be,1),Pe.length||delete this.annotations[Y.pageIndex],this.webviewerServer||this.messageHandler.sendWithPromise("RemoveAnnot",{annotPtr:Y.annotPtr}),J.next=44;break;case 35:if(H.type!=="empty"){J.next=41;break}return Pe.splice(Be,1),Pe.length||delete this.annotations[Y.pageIndex],J.abrupt("return");case 41:this.webviewerServer||(Y.doc=this.doc,this.messageHandler.sendWithPromise("EditAnnotation",{annotation:Y})),$e=Pe[Be],Pe[Be]=_objectSpread2$1(_objectSpread2$1({},$e),Y);case 44:Y.targetPage=Y.pageIndex+1,(Oe=Y).inklist&&(Oe=this.handleInk(Oe)),le.push(Oe);case 48:if(this.eventBus.dispatch("annotationChanged",{annotations:this.annotations}),!this.webviewerServer){J.next=55;break}return _classPrivateMethodGet(this,_convertAnnotationsForBackend,_convertAnnotationsForBackend2).call(this,le),Ne={method:"POST",headers:{"Content-Type":"application/json",Authorization:this._token},body:JSON.stringify({pdfId:this._pdfId,annotateHandles:le})},J.next=54,fetch(this.optionUrl.webviewBaseUrl+this.optionUrl.editUrl,Ne).then(function(fe){return fe.json()}).then(function(fe){return fe.code==="200"}).catch(function(fe){return console.log(fe)});case 54:return J.abrupt("return",J.sent);case 55:return J.abrupt("return",!0);case 56:case"end":return J.stop()}},q,this)})),function(q){return F.apply(this,arguments)})},{key:"emptyAnnotations",value:function(){var q=this.annotations;if(this.annotations)for(var H in q)this.pdfViewer._pages[H].emptyAnnotations()}},{key:"handleCreateSignature",value:function(q){this.addAnnotations(q)}},{key:"webViewerDistanceChanged",value:function(q){this.distanceChangedCallback(q.distance)}},{key:"progress",value:function(q){if(!this.downloadComplete){var H=Math.round(100*q);H<=this.percent||(this.percent=H)}}},{key:"flattenPdfDownload",value:(I=_asyncToGenerator(_regeneratorRuntime().mark(function q(){var H,Y,le,Ce=this;return _regeneratorRuntime().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:if(!this._token||!this._pdfId){Te.next=5;break}return H={method:"POST",headers:{"Content-Type":"application/json",Authorization:this._token},body:JSON.stringify({pdfId:this._pdfId})},Te.abrupt("return",fetch(this.optionUrl.webviewBaseUrl+this.optionUrl.flattenUrl,H).then(function(){var ke=_asyncToGenerator(_regeneratorRuntime().mark(function Ee(Pe){var Be;return _regeneratorRuntime().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:if(!Pe.headers.get("content-type").startsWith("application/json")){$e.next=8;break}return $e.next=4,Pe.json();case 4:return Be=$e.sent,$e.abrupt("return",Promise.reject(Be));case 8:return $e.abrupt("return",Pe.blob());case 9:case"end":return $e.stop()}},Ee)}));return function(Ee){return ke.apply(this,arguments)}}()).then(function(ke){return FileSaver_minExports.saveAs(ke,Ce._docName),!0}).catch(function(ke){return console.log(ke),!1}));case 5:return Y=2,this.saveAction&&this.saveAction!=="set"?this.saveAction==="remove"&&(Y=3):Y=2,Te.next=9,this.messageHandler.sendWithPromise("FlattenPage",{doc:this.doc,pagesPtr:this.pagesPtr,saveType:Y,password:_classPrivateFieldGet(this,_pwd),oldPassword:_classPrivateFieldGet(this,_oldPwd)});case 9:return le=Te.sent,FileSaver_minExports.saveAs(le,this._docName),Te.abrupt("return",!0);case 12:case"end":return Te.stop()}},q,this)})),function(){return I.apply(this,arguments)})},{key:"download",value:(M=_asyncToGenerator(_regeneratorRuntime().mark(function q(){var H,Y,le,Ce,Te,ke,Ee=this,Pe=arguments;return _regeneratorRuntime().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:if(H=Pe.length>0&&Pe[0]!==void 0&&Pe[0],le=Pe.length>2?Pe[2]:void 0,!(Y=Pe.length>1?Pe[1]:void 0)){Be.next=7;break}Y.forEach(function($e){FileSaver_minExports.saveAs($e.url,$e.fileName)}),Be.next=19;break;case 7:if(!this._token||!this._pdfId){Be.next=12;break}return Ce={method:"POST",headers:{"Content-Type":"application/json",Authorization:this._token},body:JSON.stringify({pdfId:this._pdfId})},Be.abrupt("return",fetch(this.optionUrl.webviewBaseUrl+this.optionUrl.saveUrl,Ce).then(function(){var $e=_asyncToGenerator(_regeneratorRuntime().mark(function Oe(Ne){var J;return _regeneratorRuntime().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(!Ne.headers.get("content-type").startsWith("application/json")){fe.next=8;break}return fe.next=4,Ne.json();case 4:return J=fe.sent,fe.abrupt("return",Promise.reject(J));case 8:return fe.abrupt("return",Ne.blob());case 9:case"end":return fe.stop()}},Oe)}));return function(Oe){return $e.apply(this,arguments)}}()).then(function($e){return H&&FileSaver_minExports.saveAs($e,Ee._docName),$e}).catch(function($e){return console.log($e),!1}));case 12:return Te=2,this.saveAction&&this.saveAction!=="set"?this.saveAction==="remove"&&(Te=3):Te=2,Be.next=16,this.messageHandler.sendWithPromise("SaveDocumentByStream",{doc:this.doc,saveType:le||Te,password:_classPrivateFieldGet(this,_pwd),oldPassword:_classPrivateFieldGet(this,_oldPwd)});case 16:return ke=Be.sent,H&&FileSaver_minExports.saveAs(ke,this._docName),Be.abrupt("return",ke);case 19:case"end":return Be.stop()}},q,this)})),function(){return M.apply(this,arguments)})},{key:"exportXfdf",value:(T=_asyncToGenerator(_regeneratorRuntime().mark(function q(){var H,Y,le,Ce,Te=arguments;return _regeneratorRuntime().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(H=Te.length>0&&Te[0]!==void 0&&Te[0],Y="",!this.webviewerServer){ke.next=8;break}return ke.next=5,fetch(this.optionUrl.webviewBaseUrl+this.optionUrl.downloadAnnotation+"?pdfId="+this._pdfId,{method:"GET",headers:{"Content-Type":"application/json",Authorization:this._token}}).then(function(){var Ee=_asyncToGenerator(_regeneratorRuntime().mark(function Pe(Be){var $e;return _regeneratorRuntime().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(!Be.headers.get("content-type").startsWith("application/json")){Oe.next=8;break}return Oe.next=4,Be.json();case 4:return $e=Oe.sent,Oe.abrupt("return",Promise.reject($e));case 8:return Oe.abrupt("return",Be.text());case 9:case"end":return Oe.stop()}},Pe)}));return function(Pe){return Ee.apply(this,arguments)}}()).then(function(Ee){return Ee}).catch(function(Ee){return console.log(Ee),!1});case 5:Y=ke.sent,ke.next=11;break;case 8:return ke.next=10,this.messageHandler.sendWithPromise("XFDFExportAnnotations",{doc:this.doc});case 10:Y=ke.sent;case 11:if(!H){ke.next=18;break}return le=this._docName.replace(/\.pdf$/,".xfdf"),Ce=new Blob([Y],{type:"application/xml"}),FileSaver_minExports.saveAs(Ce,le),ke.abrupt("return",!0);case 18:return ke.abrupt("return",Y);case 19:case"end":return ke.stop()}},q,this)})),function(){return T.apply(this,arguments)})},{key:"getScrollViewElement",value:function(){return this.scrollContainer}},{key:"getSelectedPage",value:function(q,H){for(var Y=null,le=null,Ce=0;Ce<this.pagesCount;Ce++){var Te,ke=this.pdfViewer._pages[Ce].div,Ee=ke.offsetLeft,Pe=Ee+ke.clientWidth,Be=ke.offsetTop+((Te=ke.offsetParent)===null||Te===void 0?void 0:Te.offsetTop),$e=Be+ke.clientHeight;if(Y===null&&q.x<=Pe&&q.x>=Ee&&q.y<=$e&&q.y>=Be&&(Y=Ce+1),le===null&&H.x<=Pe&&H.x>=Ee&&H.y<=$e&&H.y>=Be&&(le=Ce+1),Y!==null&&le!==null)break}if(Y>le){var Oe=[le,Y];Y=Oe[0],le=Oe[1]}return{first:Y,last:le}}},{key:"pageToWindow",value:function(q,H){var Y;if(H>this.page&&H<1)return null;var le=this.pdfViewer._pages[H-1].div,Ce=le.offsetLeft,Te=le.offsetTop+((Y=le.offsetParent)===null||Y===void 0?void 0:Y.offsetTop),ke=this.scale;return{x:q.x*ke+Ce,y:q.y*ke+Te}}},{key:"windowToPage",value:function(q,H){var Y;if(H>this.page&&H<1)return null;var le=this.pdfViewer._pages[H-1].div,Ce=le.offsetLeft,Te=le.offsetTop+((Y=le.offsetParent)===null||Y===void 0?void 0:Y.offsetTop),ke=this.scale;return{pageNumber:H,x:(q.x-Ce)/ke,y:(q.y-Te)/ke}}},{key:"_initializeViewerComponents",value:function(q){var H=q.container,Y=q.viewer,le=q.thumbnailView,Ce=q.annotationView;q.findbarView;var Te=q.toggleButton;this.scrollContainer=H;var ke=this;this.scrollContainer.addEventListener("click",function(Be){ke.eventBus.dispatch("click",Be)}),this.viewerContainer=Y;var Ee=new PDFRenderingQueue;Ee.onIdle=this._cleanup.bind(this),this.pdfRenderingQueue=Ee;var Pe=new PDFLinkService;this.pdfLinkService=Pe,this.pdfViewer=new PDFViewer(_defineProperty$1({container:H,viewer:Y,messageHandler:this.messageHandler,annotationStore,tool:{tool:this.activeTool,color:this.color},annotationView:Ce,renderingQueue:Ee,linkService:Pe,renderer:"canvas",textLayerMode:1,enablePrintAutoRotate:!0,eventBus:this.eventBus,$t:this.$t,doc:this.doc},"messageHandler",this.messageHandler)),Ee.setViewer(this.pdfViewer),Pe.setViewer(this.pdfViewer),le&&(this.pdfThumbnailViewer=new PDFThumbnailViewer({container:le,renderingQueue:Ee,linkService:Pe}),Ee.setThumbnailViewer(this.pdfThumbnailViewer)),this.pdfCursorTools=new PDFCursorTools({container:H,eventBus:this.eventBus,cursorToolOnLoad:0}),this.supportsFullscreen&&(this.pdfPresentationMode=new PDFPresentationMode({container:H,pdfViewer:this.pdfViewer,eventBus:this.eventBus})),this.passwordPrompt=new PasswordPrompt({dialog:document.getElementById("passwordDialog"),label:document.getElementById("passwordText"),input:document.getElementById("password"),submitButton:document.getElementById("passwordSubmit"),cancelButton:document.getElementById("passwordCancel"),$t:this.$t}),Te&&(this.pdfSidebar=new PDFSidebar({elements:{toggleButton:Te},pdfViewer:this.pdfViewer,pdfThumbnailViewer:this.pdfThumbnailViewer,eventBus:this.eventBus}),this.pdfSidebar.onToggled=this.forceRendering.bind(this))}},{key:"setInitialView",value:function(q){var H=this,Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Y.rotation,Y.sidebarView;var le,Ce,Te=Y.scrollMode,ke=Y.spreadMode;this.isInitialViewSet=!0,Ce=ke,isValidScrollMode(le=Te)&&(H.pdfViewer.scrollMode=le),isValidSpreadMode(Ce)&&(H.pdfViewer.spreadMode=Ce),this.pdfViewer.currentScaleValue||(this.pdfViewer.currentScaleValue=DEFAULT_SCALE_VALUE),this.pdfViewer.forceRendering()}},{key:"requestFullScreenMode",value:function(){var q;(q=this.pdfPresentationMode)===null||q===void 0||q.request()}},{key:"_cleanup",value:function(){var q;this.pdfDocument&&(this.pdfViewer.cleanup(),(q=this.pdfThumbnailViewer)===null||q===void 0||q.cleanup(),this.pdfDocument.cleanup(this.pdfViewer.renderer==="svg"))}},{key:"cleanup",value:function(){this._cleanup()}},{key:"zoomIn",value:function(q){this.pdfViewer.isInPresentationMode||this.pdfViewer.increaseScale({drawingDelay:400})}},{key:"zoomOut",value:function(q){this.pdfViewer.isInPresentationMode||this.pdfViewer.decreaseScale({drawingDelay:400})}},{key:"nextPage",value:function(){return this.pdfViewer.nextPage()}},{key:"previousPage",value:function(){return this.pdfViewer.previousPage()}},{key:"pageNumberChanged",value:function(q){q!==""&&this.pdfLinkService.goToPage(q),q!==this.pdfViewer.currentPageNumber.toString()&&q!==this.pdfViewer.currentPageLabel&&this.toolbar&&this.toolbar.setPageNumber(pdfViewer.currentPageNumber,pdfViewer.currentPageLabel)}},{key:"scrollTo",value:function(q){var H=q.left,Y=q.top;scrollIntoView(this.viewerContainer,{left:H,top:Y})}},{key:"webViewerAnnotationsCountChanged",value:function(q){this.annotationsNumChangedCallback(q.annotationsCount)}},{key:"forceRendering",value:function(){this.pdfRenderingQueue.printing=!!this.printService,this.pdfRenderingQueue.isThumbnailViewEnabled=this.pdfSidebar.visibleView===SidebarView.THUMBS,this.pdfRenderingQueue.renderHighestPriority()}},{key:"webViewerResize",value:function(){var q=this.pdfDocument,H=this.pdfViewer;if((!this.pdfRenderingQueue.printing||!window.matchMedia("print").matches)&&q){var Y=H.currentScaleValue;Y!=="auto"&&Y!=="page-fit"&&Y!=="page-width"||H.resize(Y)}}},{key:"webViewerPageRendered",value:function(q){var H,Y=q.pageNumber;if(q.error,((H=this.pdfSidebar)===null||H===void 0?void 0:H.visibleView)===SidebarView.THUMBS){var le=this.pdfViewer.getPageView(Y-1),Ce=this.pdfThumbnailViewer.getThumbnail(Y-1);le&&Ce&&Ce.setImage(le)}}},{key:"annotationMode",get:function(){return this._annotationMode},set:function(q){this._annotationMode=q}},{key:"webViewerSwitchAnnotationEditorMode",value:function(q){this.pdfViewer.annotationEditorMode=q.mode}},{key:"switchTool",value:function(q){this.pdfCursorTools.switchTool(q)}},{key:"webViewerUpdateViewarea",value:function(q){var H,Y=q.location;this.isInitialViewSet&&((H=this.store)===null||H===void 0||H.setMultiple({page:Y.pageNumber,zoom:Y.scale,scrollLeft:Y.left,scrollTop:Y.top,rotation:Y.rotation}).catch(function(){})),_classPrivateFieldGet(this,_textSearch)&&_classPrivateFieldGet(this,_textSearch).updateMatch()}},{key:"webViewerScrollModeChanged",value:function(q){var H;this.isInitialViewSet&&!this.pdfViewer.isInPresentationMode&&((H=this.store)===null||H===void 0||H.set("scrollMode",q.mode).catch(function(){}))}},{key:"webViewerScaleChanging",value:function(q){this.scaleChangedCallback&&this.scaleChangedCallback(q.scale)}},{key:"webViewerRotationChanging",value:function(q){this.pdfThumbnailViewer.pagesRotation=q.pagesRotation,this.forceRendering(),this.pdfViewer.currentPageNumber=q.pageNumber}},{key:"webViewerPageChanging",value:function(q){var H,Y=q.pageNumber;q.pageLabel,((H=this.pdfSidebar)===null||H===void 0?void 0:H.visibleView)===SidebarView.THUMBS&&this.pdfThumbnailViewer.scrollThumbnailIntoView(Y),this.pageChangedCallback(this.page)}},{key:"webViewerSidebarViewChanged",value:function(q){var H,Y=q.view;this.pdfRenderingQueue.isThumbnailViewEnabled=Y===SidebarView.THUMBS,this.isInitialViewSet&&((H=this.store)===null||H===void 0||H.set("sidebarView",Y).catch(function(){}))}},{key:"webViewerPageMode",value:function(q){var H,Y=q.mode;switch(Y){case"thumbs":H=SidebarView.THUMBS;break;case"bookmarks":case"outline":H=SidebarView.OUTLINE;break;case"attachments":H=SidebarView.ATTACHMENTS;break;case"layers":H=SidebarView.LAYERS;break;case"none":H=SidebarView.NONE;break;default:return void console.error('Invalid "pagemode" hash parameter: '+Y)}this.pdfSidebar.switchView(H,!0)}},{key:"webViewerNamedAction",value:(E=_asyncToGenerator(_regeneratorRuntime().mark(function q(H){var Y;return _regeneratorRuntime().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:le.t0=H.action,le.next=le.t0==="GoToPage"?3:le.t0==="Print"?5:le.t0==="SaveAs"?11:13;break;case 3:return this.appConfig.toolbar.pageNumber.select(),le.abrupt("break",13);case 5:return le.next=7,this.download(!1,null,3);case 7:return Y=le.sent,this.triggerPrinting(Y),le.abrupt("return",Y);case 11:return this.downloadOrSave(),le.abrupt("break",13);case 13:case"end":return le.stop()}},q,this)})),function(q){return E.apply(this,arguments)})},{key:"triggerPrinting",value:function(q){var H=q instanceof Blob?URL.createObjectURL(q):q;H=decodeURIComponent(H),printJS({url:H,printable:H,type:"pdf",showModal:!1})}},{key:"webViewerPresentationModeChanged",value:function(q){this.pdfViewer.presentationModeState=q.state}},{key:"webViewerPresentationMode",value:function(){this.requestPresentationMode()}},{key:"webViewerNextPage",value:function(){this.pdfViewer.nextPage()}},{key:"webViewerPreviousPage",value:function(){this.pdfViewer.previousPage()}},{key:"webViewerZoomIn",value:function(){this.zoomIn()}},{key:"webViewerZoomOut",value:function(){this.zoomOut()}},{key:"webViewerPageNumberChanged",value:function(q){var H=this.pdfViewer;q.value!==""&&this.pdfLinkService.goToPage(q.value),q.value!==H.currentPageNumber.toString()&&q.value!==H.currentPageLabel&&this.toolbar.setPageNumber(H.currentPageNumber,H.currentPageLabel)}},{key:"webViewerScaleChanged",value:function(q){this.pdfViewer.currentScaleValue=q}},{key:"webViewerRotateCw",value:function(){this.rotatePages(90)}},{key:"webViewerRotateCcw",value:function(){this.rotatePages(-90)}},{key:"webViewerSwitchScrollMode",value:function(q){this.pdfViewer.scrollMode=q}},{key:"webViewerSwitchSpreadMode",value:function(q){this.pdfViewer.spreadMode=q}},{key:"rotatePages",value:(S=_asyncToGenerator(_regeneratorRuntime().mark(function q(H,Y){var le=this;return _regeneratorRuntime().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return H.forEach(function(){var Te=_asyncToGenerator(_regeneratorRuntime().mark(function ke(Ee){return _regeneratorRuntime().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(!(Ee>=le.pagesCount||Ee<0)){Pe.next=2;break}return Pe.abrupt("return");case 2:return Pe.next=4,le.messageHandler.sendWithPromise("RotatePage",{pagePtr:le.pagesPtr[Ee].pagePtr,rotation:Y});case 4:case"end":return Pe.stop()}},ke)}));return function(ke){return Te.apply(this,arguments)}}()),Ce.next=3,this.updatePages();case 3:case"end":return Ce.stop()}},q,this)})),function(q,H){return S.apply(this,arguments)})},{key:"webViewerSpreadModeChanged",value:function(q){var H;this.isInitialViewSet&&!this.pdfViewer.isInPresentationMode&&((H=this.store)===null||H===void 0||H.set("spreadMode",q.mode).catch(function(){}))}},{key:"webViewerFindFromUrlHash",value:function(q){this.eventBus.dispatch("find",{source:q.source,type:"",query:q.query,phraseSearch:q.phraseSearch,caseSensitive:!1,entireWord:!1,highlightAll:!0,findPrevious:!1,matchDiacritics:!0})}},{key:"webViewerUpdateFindMatchesCount",value:function(q){var H=q.matchesCount;this.supportsIntegratedFind?this.externalServices.updateFindMatchesCount(H):this.findBar.updateResultsCount(H)}},{key:"webViewerUpdateFindControlState",value:function(q){var H=q.state,Y=q.previous,le=q.matchesCount,Ce=q.rawQuery;this.supportsIntegratedFind?this.externalServices.updateFindControlState({result:H,findPrevious:Y,matchesCount:le,rawQuery:Ce}):this.findBar.updateUIState(H,Y,le)}},{key:"webViewerFileInputChange",value:function(q){var H;if((H=this.pdfViewer)===null||H===void 0||!H.isInPresentationMode){var Y=q.fileInput.files[0],le=URL.createObjectURL(Y);Y.name&&(le={url:le,originalUrl:Y.name}),this.open(le)}}},{key:"webViewerOpenFile",value:function(q){this.appConfig.openFileInput.click()}},{key:"setToolMode",value:(k=_asyncToGenerator(_regeneratorRuntime().mark(function q(H){var Y,le,Ce,Te,ke;return _regeneratorRuntime().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(Y=this.toolMode,this.toolMode=H,H!=="editor"||this.fontFileInited){Ee.next=5;break}return Ee.next=5,this.initFontFile();case 5:if(this.eventBus.dispatch("toolModeChanged",H),Y!=="editor"||this.toolMode==="editor"){Ee.next=9;break}return Ee.next=9,this.updateTextPtr();case 9:for(le in this.annotations)for(Ce=0;Ce<this.annotations[le].length;Ce++)Te=this.annotations[le][Ce],(ke=document.getElementById(Te.name))&&(this.toolMode!=="form"?Te.isHidden==1?(ke.style.display="none",ke.style.pointerEvents="none"):Te.isHidden==0&&(ke.style.display="block",ke.style.pointerEvents="auto"):(ke.style.display="block",ke.style.pointerEvents="auto"));case 10:case"end":return Ee.stop()}},q,this)})),function(q){return k.apply(this,arguments)})},{key:"updateTextPtr",value:(x=_asyncToGenerator(_regeneratorRuntime().mark(function q(){var H,Y,le,Ce=this;return _regeneratorRuntime().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,this.messageHandler.sendWithPromise("ClearPage",{doc:this.doc});case 2:H=0;case 3:if(!(H<this.pagesCount)){Te.next=17;break}return Te.next=6,this.messageHandler.sendWithPromise("ClearText",{textPtr:this.pagesPtr[H].textPtr});case 6:return Te.next=8,this.messageHandler.sendWithPromise("GetPageSize",{doc:this.doc,pageIndex:H});case 8:return Y=Te.sent,Te.next=11,this.messageHandler.sendWithPromise("InitText",{pagePtr:Y.pagePtr});case 11:le=Te.sent,this.pagesPtr[H].textPtr=le,this.pagesPtr[H].pagePtr=Y.pagePtr;case 14:H++,Te.next=3;break;case 17:this.pdfViewer.pagesPtr=this.pagesPtr,this.pdfViewer._pages.forEach(function(ke){ke.pagesPtr=Ce.pagesPtr}),this.pdfViewer.refresh();case 20:case"end":return Te.stop()}},q,this)})),function(){return x.apply(this,arguments)})},{key:"setPropertyPanel",value:function(q){this.eventBus.dispatch("propertyPanelChanged",q)}},{key:"setContentEditorProperty",value:function(q,H){q==="text"?this.eventBus.dispatch("textPropertyChanged",H):q==="image"&&this.eventBus.dispatch("imagePropertyChanged",H)}},{key:"setInitProperty",value:function(){this.activeTool==="textfield"?this.eventBus.dispatch("initTextfieldName"):this.activeTool==="checkbox"?this.eventBus.dispatch("initCheckboxName"):this.activeTool==="radiobutton"?this.eventBus.dispatch("initRadioButtonName"):this.activeTool==="pushbutton"&&this.eventBus.dispatch("initPushButtonName")}},{key:"handleField",value:function(q){var H=q.id,Y=q.key,le=q.value;if(H){var Ce=Object.values(annotationStore.annotationsAll).reduce(function(ke,Ee){return ke.concat(Ee)},[]).find(function(ke){return ke.name===H});if(Y&&(le||le===0)){var Te={name:H};Te[Y]=le,this.eventBus.dispatch("setProperty",Te)}return Ce}}},{key:"handleSign",value:function(q,H){q!=="create"||this.InkSign||(this.InkSign=new InkSign({pdfViewer:this.pdfViewer,eventBus:this.eventBus})),this.InkSign&&(q!=="clear"&&q!=="create"||this.InkSign.clear(),q==="save"&&this.InkSign.toImage(H),q==="reset"&&(this.InkSign.reset(),this.InkSign=null),q==="update"&&this.InkSign.update(H))}},{key:"handleStamp",value:function(q){if(q){var H=q.stampContainer,Y=q.page,le=this.pdfViewer.getPageView(Y-1),Ce=null,Te=null;if(le&&H){var ke=le.viewport.viewBox[2],Ee=le.viewport.viewBox[3],Pe=H.width,Be=H.height;Ce={left:(ke-Pe)/2,top:(Ee-Be)/2,right:(ke+Pe)/2,bottom:(Ee+Be)/2}}q.stampType==="standard"&&(Te={operate:"add-annot",type:"stamp",pageIndex:Y-1,rect:Ce,stampColor:"white",date:new Date,stampType:"standard",contents:H.alt}),q.stampType==="dynamic"&&(Te={operate:"add-annot",type:"stamp",date:new Date,pageIndex:Y-1,contents:q.text,time:q.time,stampColor:q.color,stampType:"text"}),Te.stampShape=0,this.addAnnotations(Te)}}},{key:"compare",value:(w=_asyncToGenerator(_regeneratorRuntime().mark(function q(H){var Y;return _regeneratorRuntime().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.next=2,this.messageHandler.sendWithPromise("CompareDocument",{data:H});case 2:if(Y=le.sent,H.type!==1){le.next=7;break}return le.abrupt("return",[{filename:H.leftFile.name.replace(/(\.pdf)/,"_".concat(this.$t("compare.byComPDFKit"),".pdf")),url:URL.createObjectURL(Y[0])},{filename:H.rightFile.name.replace(/(\.pdf)/,"_".concat(this.$t("compare.byComPDFKit"),".pdf")),url:URL.createObjectURL(Y[1])},{filename:this.$t("compare.byComPDFKit")+".pdf",url:URL.createObjectURL(Y[2])}]);case 7:if(H.type!==2){le.next=9;break}return le.abrupt("return",{filename:this._docName,url:URL.createObjectURL(Y)});case 9:case"end":return le.stop()}},q,this)})),function(q){return w.apply(this,arguments)})},{key:"checkPassword",value:(y=_asyncToGenerator(_regeneratorRuntime().mark(function q(H){var Y,le,Ce,Te,ke,Ee=this,Pe=arguments;return _regeneratorRuntime().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Y=Pe.length>1&&Pe[1]!==void 0&&Pe[1],le={cMapUrl:CMAP_URL,cMapPacked:!0,enableXfa:!0},typeof H=="string"?le.url=H:H&&"byteLength"in H?le.data=H:H.url&&H.originalUrl&&(le.url=H.url),Ce=pdfExports.getDocument(le),this.pdfLoadingTask=Ce,Te="",ke=function($e){return Te=$e},Ce.onPassword=function($e,Oe){Ee.passwordPrompt.setUpdateCallback($e,Oe,ke),Ee.passwordPrompt.open()},Be.next=10,Ce.promise.then(function(){return Te&&!Y&&_classPrivateFieldSet(Ee,_pwd,Te),Te}).catch(function($e){return!1});case 10:return Be.abrupt("return",Be.sent);case 11:case"end":return Be.stop()}},q,this)})),function(q){return y.apply(this,arguments)})},{key:"handleCreateStatus",value:function(q){var H=q.bool,Y=q.fileData;annotationStore.creating=H,annotationStore.fileData=Y}},{key:"initFontFile",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function q(){return _regeneratorRuntime().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:try{this.pdfViewer.setFontFile(_classPrivateFieldGet(this,_fonFile)),this.fontFileInited=!0}catch(Y){console.log(Y)}case 1:case"end":return H.stop()}},q,this)})),function(){return g.apply(this,arguments)})},{key:"getPages",value:(_=_asyncToGenerator(_regeneratorRuntime().mark(function q(H){var Y,le,Ce,Te;return _regeneratorRuntime().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,this.messageHandler.sendWithPromise("GetPageCount",{doc:H});case 2:Y=ke.sent,le=[],Ce=0;case 5:if(!(Ce<Y)){ke.next=13;break}return ke.next=8,this.messageHandler.sendWithPromise("GetPageSize",{doc:H,pageIndex:Ce});case 8:Te=ke.sent,le.push({pagePtr:Te.pagePtr,width:Te.width,height:Te.height});case 10:Ce++,ke.next=5;break;case 13:return ke.abrupt("return",le);case 14:case"end":return ke.stop()}},q,this)})),function(q){return _.apply(this,arguments)})},{key:"getMinRadioSize",value:function(q,H,Y){var le=Math.min(Y.width/q,Y.height/H);return{width:q*le,height:H*le}}},{key:"getDocEditorPages",value:(m=_asyncToGenerator(_regeneratorRuntime().mark(function q(H){var Y,le,Ce,Te,ke,Ee,Pe,Be,$e,Oe,Ne,J,fe,re,_e,be,Ae,Le,Ve,Fe,De,We,Re,He=arguments;return _regeneratorRuntime().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(Y=He.length>1&&He[1]!==void 0?He[1]:0,le=He.length>2&&He[2]!==void 0?He[2]:null,this.docEditorCopy){Ze.next=10;break}return Ze.next=5,this.messageHandler.sendWithPromise("createEditorDoc",{doc:this.doc,password:_classPrivateFieldGet(this,_oldPwd)||_classPrivateFieldGet(this,_pwd)});case 5:return Ce=Ze.sent,Ze.next=8,this.getPages(Ce);case 8:Te=Ze.sent,this.docEditorCopy={doc:Ce,pages:Te};case 10:ke=this.docEditorCopy.pages,Ee=window.devicePixelRatio||1,Pe=[],Be=[],$e=0;case 15:if(!($e<(le!=null?le:ke.length))){Ze.next=45;break}if(this.toolMode==="document"){Ze.next=18;break}return Ze.abrupt("break",45);case 18:return Oe=ke[$e+Y],Ne=Pe.pop()||document.createElement("canvas"),J=Be.pop()||Ne.getContext("2d",{alpha:!1}),fe=this.getMinRadioSize(Oe.width,Oe.height,H),re=fe.width,_e=fe.height,be=Math.round(re*Ee),Ae=Math.round(_e*Ee),Ze.next=26,this.messageHandler.sendWithPromise("RenderPageBitmap",{pagePtr:Oe.pagePtr,x:0,y:0,width:be,height:Ae});case 26:Le=Ze.sent,Ve=Le.imageArray,Ne.width=be,Ne.height=Ae,Fe=J.createImageData(Ne.width,Ne.height),De=new Uint8ClampedArray(Ve.buffer),Fe.data.set(De),J.putImageData(Fe,0,0),We=Ne.toDataURL("image/png",1),Re={type:"page",img:We,size:{width:Oe.width,height:Oe.height},rotation:0},this.eventBus.dispatch("getDocEditorPages",{index:$e+Y,pageData:Re}),Ne.width=0,Ne.height=0,J.clearRect(0,0,be,Ae),Pe.push(Ne),Be.push(J);case 42:$e++,Ze.next=15;break;case 45:Pe.forEach(function(Xe){return URL.revokeObjectURL(Xe.toDataURL())}),Pe.length=0,Be.length=0;case 48:case"end":return Ze.stop()}},q,this)})),function(q){return m.apply(this,arguments)})},{key:"updatePages",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function q(){var H,Y;return _regeneratorRuntime().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.next=2,this.messageHandler.sendWithPromise("SaveDocumentByStream",{doc:this.doc,saveType:2,password:_classPrivateFieldGet(this,_oldPwd),oldPassword:_classPrivateFieldGet(this,_oldPwd)});case 2:return H=le.sent,Y=this.saveAction,le.next=6,this.loadDocument(URL.createObjectURL(H),{filename:this._docName,notUpdatePwd:!0,saveAction:Y});case 6:this.eventBus.dispatch("onPagesUpdated");case 7:case"end":return le.stop()}},q,this)})),function(){return v.apply(this,arguments)})},{key:"insertBlankPage",value:(f=_asyncToGenerator(_regeneratorRuntime().mark(function q(){var H,Y,le,Ce,Te=arguments;return _regeneratorRuntime().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(Y=Te.length>1&&Te[1]!==void 0?Te[1]:595,le=Te.length>2&&Te[2]!==void 0?Te[2]:842,!((H=Te.length>0&&Te[0]!==void 0?Te[0]:0)>this.pagesCount||H<0)){ke.next=5;break}return ke.abrupt("return");case 5:return ke.next=7,this.messageHandler.sendWithPromise("InsertPage",{doc:this.doc,index:H,width:Y,height:le});case 7:if(Ce=ke.sent){ke.next=11;break}return console.warn("insert page",Ce),ke.abrupt("return");case 11:return ke.next=13,this.updatePages();case 13:case"end":return ke.stop()}},q,this)})),function(){return f.apply(this,arguments)})},{key:"insertPages",value:(d=_asyncToGenerator(_regeneratorRuntime().mark(function q(H){var Y,le,Ce,Te,ke,Ee=arguments;return _regeneratorRuntime().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(Y=Ee.length>1&&Ee[1]!==void 0?Ee[1]:0,le=Ee.length>2&&Ee[2]!==void 0?Ee[2]:[0],Ce=Ee.length>3&&Ee[3]!==void 0?Ee[3]:"",!(!H||Y>=this.pagesCount||Y<0)){Pe.next=5;break}return Pe.abrupt("return");case 5:if(Te=null,!Array.isArray(le)){Pe.next=10;break}Te=le.join(","),Pe.next=15;break;case 10:if(le!=="all"){Pe.next=14;break}Te="all",Pe.next=15;break;case 14:return Pe.abrupt("return");case 15:return Pe.next=17,this.messageHandler.sendWithPromise("ImportPagesAtIndex",{doc:this.doc,file:H,range:Te,index:Y,password:Ce});case 17:if(ke=Pe.sent){Pe.next=21;break}return console.warn("insert pdf",ke),Pe.abrupt("return");case 21:return Pe.next=23,this.updatePages();case 23:case"end":return Pe.stop()}},q,this)})),function(q){return d.apply(this,arguments)})},{key:"removePages",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function q(H){var Y=this;return _regeneratorRuntime().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return H.sort(function(Ce,Te){return Te-Ce}),H.forEach(function(){var Ce=_asyncToGenerator(_regeneratorRuntime().mark(function Te(ke){var Ee;return _regeneratorRuntime().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(!(ke>=Y.pagesCount||ke<0)){Pe.next=2;break}return Pe.abrupt("return");case 2:return Pe.next=4,Y.messageHandler.sendWithPromise("RemovePage",{doc:Y.doc,index:ke});case 4:(Ee=Pe.sent)||console.warn("delete",Ee);case 6:case"end":return Pe.stop()}},Te)}));return function(Te){return Ce.apply(this,arguments)}}()),le.next=4,this.updatePages();case 4:case"end":return le.stop()}},q,this)})),function(q){return u.apply(this,arguments)})},{key:"copyPages",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function q(H){var Y=this;return _regeneratorRuntime().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return H.sort(function(Ce,Te){return Te-Ce}),H.forEach(function(){var Ce=_asyncToGenerator(_regeneratorRuntime().mark(function Te(ke){var Ee;return _regeneratorRuntime().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(!(ke>=Y.pagesCount||ke<0)){Pe.next=2;break}return Pe.abrupt("return");case 2:return Pe.next=4,Y.messageHandler.sendWithPromise("CopyPage",{doc:Y.doc,index:ke});case 4:(Ee=Pe.sent)||console.warn("copy",Ee);case 6:case"end":return Pe.stop()}},Te)}));return function(Te){return Ce.apply(this,arguments)}}()),le.next=4,this.updatePages();case 4:case"end":return le.stop()}},q,this)})),function(q){return s.apply(this,arguments)})},{key:"extractPages",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function q(H){var Y,le;return _regeneratorRuntime().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Y=H.join(","),Ce.next=3,this.messageHandler.sendWithPromise("ExtractPage",{doc:this.doc,range:Y});case 3:return(le=Ce.sent)||console.warn("extract",0),Ce.abrupt("return",le);case 6:case"end":return Ce.stop()}},q,this)})),function(q){return o.apply(this,arguments)})},{key:"movePages",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function q(H,Y){var le,Ce,Te,ke,Ee;return _regeneratorRuntime().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:H.sort(function(Be,$e){return Be-$e}),Y=Math.min(this.pagesCount,Y),Y=Math.max(0,Y),le=0;case 4:if(!(le<H.length)){Pe.next=18;break}if(Ce=void 0,Te=void 0,!(H[le]>=this.pagesCount||H[le]<0)){Pe.next=8;break}return Pe.abrupt("continue",15);case 8:if(H[le]===Y)Ce=H[le],Te=Y;else if(H[le]>Y)if(Ce=H[le],H.includes(Y))for(Te=Y,ke=0;ke<H.length;ke++)H[ke]===Te&&Ce!==Te&&Te++;else Te=Y;else Ce=H[le]-le,Te=Y-1;if(!H.includes(Ce)||!H.includes(Te)||Ce!==Te){Pe.next=11;break}return Pe.abrupt("continue",15);case 11:return Pe.next=13,this.messageHandler.sendWithPromise("MovePage",{doc:this.doc,index:Ce,targetIndex:Te});case 13:(Ee=Pe.sent)||console.warn("move",Ee);case 15:le++,Pe.next=4;break;case 18:return Pe.next=20,this.updatePages();case 20:case"end":return Pe.stop()}},q,this)})),function(q,H){return r.apply(this,arguments)})},{key:"saveDocumentEdit",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function q(H){var Y,le,Ce,Te,ke,Ee,Pe,Be,$e,Oe,Ne,J,fe,re,_e=this;return _regeneratorRuntime().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(Y=this.docEditorCopy.doc,le=function(){var Ae=_asyncToGenerator(_regeneratorRuntime().mark(function Le(){return _regeneratorRuntime().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:return Ve.next=2,_e.messageHandler.sendWithPromise("ClearDocument",Y);case 2:_e.docEditorCopy=null;case 3:case"end":return Ve.stop()}},Le)}));return function(){return Ae.apply(this,arguments)}}(),_typeof$1(H)==="object"){be.next=21;break}if(H!=="cancel"){be.next=7;break}return be.next=6,le();case 6:return be.abrupt("return");case 7:return this.saveAction==="remove"&&_classPrivateFieldSet(this,_pwd,""),be.next=10,this.messageHandler.sendWithPromise("SaveDocumentByStream",{doc:Y,saveType:this.saveAction==="remove"?3:2,password:_classPrivateFieldGet(this,_pwd),oldPassword:_classPrivateFieldGet(this,_oldPwd)});case 10:if(Ce=be.sent,Te=this._docName,H!=="saveAs"){be.next=14;break}return be.abrupt("return",{blobData:Ce,filename:Te});case 14:return ke=URL.createObjectURL(Ce),this.saveAction==="set"&&_classPrivateFieldGet(this,_oldPwd)!==_classPrivateFieldGet(this,_pwd)&&_classPrivateFieldSet(this,_oldPwd,_classPrivateFieldGet(this,_pwd)),be.next=18,this.loadDocument(ke,{filename:Te,notUpdatePwd:!0});case 18:return be.next=20,le();case 20:return be.abrupt("return",ke);case 21:if(H.type!=="insert"){be.next=37;break}if(!H.file){be.next=33;break}return be.next=25,this.messageHandler.sendWithPromise("ImportPagesAtIndex",{doc:Y,file:H.file,range:H.range,index:H.pageIndex,password:H.password});case 25:return(Ee=be.sent)||console.warn("insert pdf",Ee),be.next=29,this.getPages(Y);case 29:return this.docEditorCopy.pages=be.sent,be.abrupt("return",this.docEditorCopy.pages.length);case 33:return be.next=35,this.messageHandler.sendWithPromise("InsertPage",{doc:Y,index:H.pageIndex,width:H.size.width,height:H.size.height});case 35:(Pe=be.sent)||console.warn("insert page",Pe);case 37:if(H.type==="delete"&&H.selectedPageIndexArray.forEach(function(){var Ae=_asyncToGenerator(_regeneratorRuntime().mark(function Le(Ve){var Fe;return _regeneratorRuntime().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.next=2,_e.messageHandler.sendWithPromise("RemovePage",{doc:Y,index:Ve});case 2:(Fe=De.sent)||console.warn("delete",Fe);case 4:case"end":return De.stop()}},Le)}));return function(Le){return Ae.apply(this,arguments)}}()),H.type==="rotate"&&H.selectedPageIndexArray.forEach(function(){var Ae=_asyncToGenerator(_regeneratorRuntime().mark(function Le(Ve){return _regeneratorRuntime().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=2,_e.messageHandler.sendWithPromise("RotatePage",{pagePtr:_e.docEditorCopy.pages[Ve].pagePtr,rotation:H.rotation});case 2:case"end":return Fe.stop()}},Le)}));return function(Le){return Ae.apply(this,arguments)}}()),H.type==="copy"&&H.selectedPageIndexArray.forEach(function(){var Ae=_asyncToGenerator(_regeneratorRuntime().mark(function Le(Ve){var Fe;return _regeneratorRuntime().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.next=2,_e.messageHandler.sendWithPromise("CopyPage",{doc:Y,index:Ve});case 2:(Fe=De.sent)||console.warn("copy",Fe);case 4:case"end":return De.stop()}},Le)}));return function(Le){return Ae.apply(this,arguments)}}()),H.type!=="extract"){be.next=47;break}return be.next=43,this.messageHandler.sendWithPromise("ExtractPage",{doc:Y,range:H.range,separateFile:H.separateFile});case 43:if((Be=be.sent)||console.warn("extract",0),H.separateFile){for($e=new JSZip,Oe=[],Ne=0;Ne<Be.length;Ne++)J=Be[Ne],Oe.push({blobData:J.blobData,filename:J.name+".pdf"});Oe.forEach(function(Ae){$e.file(Ae.filename,Ae.blobData,{binary:!0})}),$e.generateAsync({type:"blob"}).then(function(Ae){FileSaver_minExports.saveAs(Ae,"extracted documents.zip")})}else fe=this._docName,FileSaver_minExports.saveAs(Be,fe);return be.abrupt("return");case 47:if(H.type!=="move"){be.next=52;break}return be.next=50,this.messageHandler.sendWithPromise("MovePage",{doc:Y,index:H.pageIndex,targetIndex:H.targetPageIndex});case 50:(re=be.sent)||console.warn("move",re);case 52:return be.next=54,this.getPages(Y);case 54:this.docEditorCopy.pages=be.sent;case 55:case"end":return be.stop()}},q,this)})),function(q){return n.apply(this,arguments)})},{key:"addEditorImage",value:function(q){if(q){var H=q.imageBase64,Y=q.width,le=q.height,Ce=q.pageNum,Te=this.pdfViewer.getPageView(Ce-1);if(Te){var ke,Ee,Pe=.9*Te.viewport.viewBox[2],Be=.9*Te.viewport.viewBox[3],$e=Y/le;$e>Pe/Be?(ke=Pe,Ee=Pe/$e):(ke=Be*$e,Ee=Be);var Oe=Math.min(Pe,ke),Ne=Math.min(Be,Ee),J={left:(Pe-Oe)/2+.1*Te.viewport.viewBox[2],top:(Be-Ne)/2+.1*Te.viewport.viewBox[3],right:(Pe+Oe)/2,bottom:(Be+Ne)/2};Te.contentContainer.addImageEditor({rect:J,imageBase64:H})}}}}]),e}();function _formatRect2(e){var n=e.page,r=this.pagesPtr[n].height,o=e.rect.split(",");return{left:round(o[0],2),bottom:round(r-Number(o[1]),2),right:round(o[2],2),top:round(r-Number(o[3]),2)}}function _formatCoords2(e){for(var n=[],r=e.page,o=this.pagesPtr[r].height,s=e.coords.split(","),u=0;u+7<s.length;u+=8){var d=round(s[u],2),f=round(o-Number(s[u+1]),2),v=round(s[u+2],2);round(o-Number(s[u+3]),2),round(s[u+4],2);var m=round(o-Number(s[u+5]),2);round(s[u+6],2),round(o-Number(s[u+7]),2);var _=Math.min(d,v),g=Math.max(d,v),y=Math.min(f,m),w=Math.max(f,m);n.push({PointX:_,PointY:y}),n.push({PointX:g,PointY:y}),n.push({PointX:_,PointY:w}),n.push({PointX:g,PointY:w})}return n}function _formatLinePoints2(e){var n=e.page,r=this.pagesPtr[n].height,o=[],s=e.start.split(","),u=e.end.split(",");return o.push(round(s[0],2)),o.push(round(r-Number(s[1]),2)),o.push(round(u[0],2)),o.push(round(r-Number(u[1]),2)),o}function _formatInkPointes2(e){var n=e.page,r=this.pagesPtr[n].height,o=[],s=e.inklist.gesture;Array.isArray(s)||(s=[s]);for(var u=0;u<s.length;u++){s[u][s[u].length-1]===";"&&(s[u]=s[u].slice(0,s[u].length-1));var d=s[u].split(";").map(function(f){var v=f.split(",");return{PointX:round(v[0],2),PointY:round(r-Number(v[1]),2)}});o.push(d)}return o}function _formatAnnotation2(e){var n={};switch(n.type=e.type,e.rect&&(n.rect=_classPrivateMethodGet(this,_formatRect,_formatRect2).call(this,e)),n.date=parseAdobePDFTimestamp(e.creationdate),n.pageIndex=Number(e.page),n.index&&(n.index=Number(e.index)),n.contents=e.content||"",n.opacity=round(e.opacity,2)||1,e.type){case"freetext":var r=e.textStyle.fontName;if(r=r[0].toUpperCase()+r.slice(1),n.fontName=r,n.fontSize=round(e.textStyle.fontSize,0),n.color=e.textStyle.fontColor,n.textAlignment=e.justification,n.contents=e["contents-richtext"]||e.content,e["contents-richtext"]){var o=new DOMParser().parseFromString(e["contents-richtext"],"text/xml");o.getElementsByTagName("parsererror").length>0?n.contents=e["contents-richtext"]:n.contents=o.firstElementChild.innerText}break;case"text":n.color=e.color;break;case"highlight":case"underline":case"strikeout":case"squiggly":n.color=e.color,n.quadPoints=_classPrivateMethodGet(this,_formatCoords,_formatCoords2).call(this,e);break;case"line":n.linePoints=_classPrivateMethodGet(this,_formatLinePoints,_formatLinePoints2).call(this,e),n.tail=e.tail,n.head=e.head,n.borderColor=e.color,n.borderWidth=round(e.width,2);break;case"square":case"circle":n.borderColor=e.color,n.borderWidth=round(e.width,2),e["interior-opacity"]&&(n.fillTransparency=round(e["interior-opacity"],2)),e["interior-color"]&&(n.fillColor=e["interior-color"]);break;case"ink":n.borderColor=e.color,n.borderWidth=round(e.width,2),n.inkPointes=_classPrivateMethodGet(this,_formatInkPointes,_formatInkPointes2).call(this,e);break;case"link":e.Dest&&e.Dest.XYZ?(n.destPage=Number(e.Dest.XYZ.Page)+1,n.url=""):e.OnActivation&&e.OnActivation.Action.URI&&(n.url=e.OnActivation.Action.URI.URI,n.destPage="");break;case"stamp":n.contents=e.icon,e.image&&(n.image=e.image),n.stampType=e["stamp-type"];break;case"textfield":e["background-color"]&&(n.backgroundColor=e["background-color"]),n.borderStyle=e.borderStyle||"solid",n.borderWidth=e.width&&round(e.width,2)||1,e["border-color"]&&(n.borderColor=e["border-color"]);var s=e.textStyle.fontName;n.isBold=/bold/i.test(s),n.isItalic=/(oblique|italic)/i.test(s),n.fontName=s.split("-")[0],n.fontSize=round(e.textStyle.fontSize,0),n.color=e.textStyle.fontColor,n.textAlignment=e.textStyle.alignment,n.contents=e.value,n.fieldName=e.fieldname,n.isMultiLine=e.textStyle.multiLine==="true"?1:0,n.isHidden=e.flags&&e.flags!=="invisible"?0:1;break;case"checkbox":case"radiobutton":e["background-color"]&&(n.backgroundColor=e["background-color"]),n.borderStyle=e.borderStyle||"solid",n.borderWidth=e.width&&round(e.width,2)||1,e["border-color"]&&(n.borderColor=e["border-color"]),n.fieldName=e.fieldname,n.isHidden=e.flags&&e.flags!=="invisible"?0:1,n.isChecked=e.value==="Yes"?1:0,n.checkStyle=Number(e.styleCA);break;case"combobox":case"listbox":if(e["background-color"]&&(n.backgroundColor=e["background-color"]),n.borderStyle=e.borderStyle||"solid",n.borderWidth=e.width&&round(e.width,2)||1,e["border-color"]&&(n.borderColor=e["border-color"]),n.fieldName=e.fieldname,e.textStyle&&e.textStyle.fontName){var u=e.textStyle.fontName;u=u[0].toUpperCase()+u.slice(1),n.fontName=u,n.fontSize=round(e.textStyle.fontSize,0)}n.color=e.textStyle.fontColor,n.isBold=e.textStyle.blod==="true",n.isItalic=e.textStyle.italic==="true",n.isMultiLine=e.textStyle.multiLine==="true"?1:0,n.isHidden=e.flags||e.flags!=="invisible"?0:1,n.items=_classPrivateMethodGet(this,_getItems,_getItems2).call(this,e),n.selected=round(e.select,0)-1;break;case"pushbutton":var d=e.OnActivation&&e.OnActivation.Action;if(d&&d.URI?(n.url=d.URI.URI,n.destPage="",n.actionType=6):d&&d.Dest&&d.Dest.XYZ&&(n.destPage=Number(d.Dest.XYZ.Page)+1,n.url="",n.actionType=1),e["background-color"]&&(n.backgroundColor=e["background-color"]),n.borderStyle=e.borderStyle||"solid",n.borderWidth=e.width&&round(e.width,2)||1,e["border-color"]&&(n.borderColor=e["border-color"]),n.fieldName=e.fieldname,e.textStyle.fontName){var f=e.textStyle.fontName;f=f[0].toUpperCase()+f.slice(1),n.fontName=f}else n.fontName="Helvetica";n.fontSize=round(e.textStyle.fontSize,0),n.color=e.textStyle.fontColor,n.isBold=e.textStyle.blod==="true",n.isItalic=e.textStyle.italic==="true",n.title=e.styleCA,n.isHidden=e.flags||e.flags!=="invisible"?0:1}return n}function _getItems2(e){for(var n=[],r=e.opt,o=0;o<r.length;o++)n.push({Value:r[o].value,String:r[o].key});return n}function _convertAnnotationsForBackend2(e){for(var n=0;n<e.length;n++){var r=e[n],o=this.pagesPtr[r.pageIndex].height;switch(r.type){case"text":r.borderColor=r.color,r.fillTransparency=1,delete r.color;break;case"freetext":r.fillColor=r.bgColor,r.textColor=r.color,delete r.color,delete r.bgColor;break;case"highlight":case"underline":case"strikeout":case"squiggly":r.borderColor=r.color,delete r.color;break;case"square":case"circle":if(r.arrow=!1,!r.linePoints){var s=r.rect,u=s.left,d=s.top,f=s.right,v=s.bottom;r.linePoints=[u,v,f,d]}r.opacity||r.opacity===0||(r.transparency=1);break;case"line":r.tail==="OpenArrow"||r.arrow?r.arrow=!0:r.arrow=!1;break;case"stamp":r.stampType==="standard"?r.standardStampType=r.contents:r.stampType==="text"?(r.textStampFirststring=r.contents,r.textStampSecondstring=r.time,r.textStampColor=r.stampColor,r.textStampShape=r.stampShape,delete r.time,delete r.stampColor,delete r.stampShape):r.stampType==="image"&&(r.type="image",delete r.annotPtr,delete r.imageData,delete r.pagePtr),delete r.contents;break;case"textfield":r.type="text-field",r.color&&(r.textColor=r.color),r.textAlignment&&(r.alignment=ALIGNMAP[r.textAlignment]||0),r.format="0",delete r.color,delete r.textAlignment;break;case"checkbox":r.type="check-box";break;case"radiobutton":r.type="radio-button";break;case"listbox":r.type="list-box",r.color&&(r.textColor=r.color),"selected"in r&&(r.selecte=r.selected),delete r.selected,delete r.color;break;case"combobox":r.type="combo-box",r.color&&(r.textColor=r.color),delete r.color;break;case"pushbutton":r.type="push-button",r.color&&(r.textColor=r.color),"destPage"in r&&(r.destPage=r.destPage-1),delete r.color}for(var m in r.operate==="mod-form"&&(r.color&&(r.textColor=r.color),"destPage"in r&&(r.destPage=r.destPage-1),delete r.color),r)switch(m){case"rect":r.rect=_classPrivateMethodGet(this,_formatRectForBackend,_formatRectForBackend2).call(this,r.rect,r.pageIndex);break;case"linePoints":r.linePoints=_classPrivateMethodGet(this,_formatLinePointsForBackend,_formatLinePointsForBackend2).call(this,r.linePoints,r.pageIndex);break;case"borderWidth":r.lineWidth=r.borderWidth,delete r.borderWidth;break;case"isChecked":r.select=r.isChecked,delete r.isChecked;break;case"checkStyle":r.style=r.checkStyle,delete r.checkStyle;break;case"selected":r.selecte=r.selected,delete r.selected;break;case"items":for(var _=r.items,g="",y=0;y<_.length;y++)y===0?g=_[y].Value:g+=",".concat(_[y].Value);r.options=g,delete r.items;break;case"textAlignment":r.textAlignment&&(r.alignment=ALIGNMAP[r.textAlignment]||0),delete r.textAlignment;break;case"contents":r.content=r.contents,delete r.contents;break;case"opacity":r.transparency=r.opacity,delete r.opacity;break;case"quadPoints":for(var w=r.quadPoints,x="",k=0;k<w.length;k++)x+=k===0?w[k].PointX:",".concat(w[k].PointX),x+=",".concat(o-w[k].PointY);r.quadPoints=x;break;case"inkPointes":for(var S=r.inkPointes,E="",T=0;T<S.length;T++){for(var M=S[T],I=0;I+1<M.length;I+=2)E+=I===0?M[I].PointX:",".concat(M[I].PointX),E+=",".concat(o-M[I+1].PointY);E+="//"}delete r.inkPointes,r.inklist=E;break;case"title":r.operate.indexOf("form")>-1&&(r.title&&(r.value=r.title),delete r.title)}}}function _formatRectForBackend2(e,n){var r=this.pagesPtr[n].height,o=e.left,s=e.top,u=e.right,d=r-s,f=r-e.bottom;return"".concat(o,",").concat(f,",").concat(u,",").concat(d)}function _formatLinePointsForBackend2(e,n){var r=this.pagesPtr[n].height,o=r-e[1],s=r-e[3];return"".concat(e[0],",").concat(o,",").concat(e[2],",").concat(s)}var PDFWorker=function(){function e(){_classCallCheck(this,e),_defineProperty$1(this,"destroyed",!1),this._promiseCapability=new PromiseExt,this._messageHandler=null,this._webWorker=null,this._initialize()}return _createClass(e,[{key:"_initialize",value:function(){var n=this;try{var r=new Worker("./lib/PDFWorker.js"),o=new MessageHandler("main","worker",r);this._messageHandler=o;var s=function(){r.removeEventListener("error",u),o.destroy(),r.terminate(),n.destroyed?n._promiseCapability.reject(new Error("Worker was destroyed")):console.error("The worker has been disabled.")},u=function(){n._webWorker||s()};r.addEventListener("error",u),o.on("test",function(f){r.removeEventListener("error",u),n.destroyed?s():f&&(n._messageHandler=o,n._webWorker=r,n._promiseCapability.resolve(!0))}),o.on("ready",function(f){if(r.removeEventListener("error",u),n.destroyed)s();else try{d(),o.send("Ready",!0)}catch{console.error("The worker has been disabled.")}});var d=function(){var f=new Uint8Array;o.send("test",f)};d()}catch(f){console.log(f),console.log("The worker has been disabled.")}}},{key:"promise",get:function(){return this._promiseCapability.promise}},{key:"messageHandler",get:function(){return this._messageHandler}},{key:"destroy",value:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}}]),e}();const documentViewerMap=new Map,setDocumentViewer=(e,n,r)=>{if(n)documentViewerMap.set(e,n);else{const o=new ComPDFKitViewer(r);documentViewerMap.set(e,o)}},deleteDocumentViewer=e=>{documentViewerMap.delete(e)},getDocumentViewer=(e=1)=>documentViewerMap.get(e),getDocumentViewers=()=>Array.from(documentViewerMap.values()),loadDocument=(e,n,r)=>core.getDocumentViewer(r).loadDocument(e,n),initializeViewer=({container:e,viewer:n,thumbnailView:r,annotationView:o,outlineView:s,toggleButton:u},d)=>core.getDocumentViewer(d).initializeViewer({container:e,viewer:n,thumbnailView:r,annotationView:o,outlineView:s,toggleButton:u}),toggleSidebar=()=>core.getDocumentViewer().toggleSidebar(),getPagesCount=()=>core.getDocumentViewer().pagesCount,nextPage=()=>core.getDocumentViewer().nextPage(),previousPage=()=>core.getDocumentViewer().previousPage(),getCurrentPage=()=>core.getDocumentViewer().page,rotateClockwise=()=>core.getDocumentViewer().webViewerRotateCw(),rotateCounterclockwise=()=>core.getDocumentViewer().webViewerRotateCcw(),zoomIn=e=>core.getDocumentViewer(e).zoomIn(),zoomOut=e=>core.getDocumentViewer(e).zoomOut(),pageNumberChanged=e=>core.getDocumentViewer().pageNumberChanged(e.value),scaleChanged=(e,n)=>core.getDocumentViewer(n).webViewerScaleChanged(e),getScale=()=>core.getDocumentViewer().scale,switchAnnotationEditorMode=e=>core.getDocumentViewer().webViewerSwitchAnnotationEditorMode({mode:e}),switchTool=e=>core.getDocumentViewer().switchTool(e),requestFullScreenMode=()=>core.getDocumentViewer().requestFullScreenMode(),saveAnnotations=()=>core.getDocumentViewer().saveAnnotations(),removeAllAnnotations=()=>core.getDocumentViewer().removeAllAnnotations(),getOptionUrl=()=>core.getDocumentViewer().getOptionUrl(),importAnnotations=e=>core.getDocumentViewer().importAnnotations(e),switchSpreadMode=e=>core.getDocumentViewer().webViewerSwitchSpreadMode(e),webViewerNamedAction=(e,n)=>core.getDocumentViewer().webViewerNamedAction({action:e,close:n}),switchScrollMode=e=>core.getDocumentViewer().webViewerSwitchScrollMode(e),initConfig=(e,n=1)=>core.getDocumentViewer(n).initConfig(e),download=(e=!0,n)=>core.getDocumentViewer().download(e,n),addEvent=(e,n)=>core.getDocumentViewer().addEvent(e,n),removeEvent=(e,n)=>core.getDocumentViewer().removeEvent(e,n),setTool=({tool:e,color:n})=>core.getDocumentViewer().setTool({tool:e,color:n}),exportXfdf=(e=!1)=>core.getDocumentViewer().exportXfdf(e),webViewerPageMode=e=>core.getDocumentViewer().webViewerPageMode({mode:e}),setToolMode=e=>core.getDocumentViewer().setToolMode(e),setPropertyPanel=e=>core.getDocumentViewer().setPropertyPanel(e),setInitProperty=()=>core.getDocumentViewer().setInitProperty(),setDefaultSelect=e=>core.getDocumentViewer().setDefaultSelect(e),handleField=(e,n,r)=>core.getDocumentViewer().handleField(e,n,r),handleSign=(e,n)=>core.getDocumentViewer().handleSign(e,n),handleStamp=e=>core.getDocumentViewer().handleStamp(e),flattenPdfDownload=e=>core.getDocumentViewer().flattenPdfDownload(e),compare=e=>core.getDocumentViewer().compare(e),setPassword=e=>core.getDocumentViewer().setPassword(e),removePassword=()=>core.getDocumentViewer().removePassword(),checkPassword=(e,n)=>core.getDocumentViewer().checkPassword(e,n),handleCreateStatus=({bool:e,fileData:n})=>core.getDocumentViewer().handleCreateStatus({bool:e,fileData:n}),triggerPrinting=e=>core.getDocumentViewer().triggerPrinting(e),setContentEditorProperty=(e,n)=>core.getDocumentViewer().setContentEditorProperty(e,n),getOutlines=()=>core.getDocumentViewer().getOutlines(),search=(e,n)=>core.getDocumentViewer(1).search(e),setActiveSearchResult=(e,n,r)=>core.getDocumentViewer(1).setActiveSearchResult(e,n),clearSearchResults=e=>core.getDocumentViewer(1).clearSearchResults(),init=(e=1)=>core.getDocumentViewer(e).init(),getSelectedText=()=>core.getDocumentViewer().getSelectedText(),getDocEditorPages=(e,n,r)=>core.getDocumentViewer().getDocEditorPages(e,n,r),saveDocumentEdit=e=>core.getDocumentViewer().saveDocumentEdit(e),getScrollViewElement=(e=1)=>core.getDocumentViewer(e).getScrollViewElement(),getSelectedPage=(e,n,r=1)=>core.getDocumentViewer(r).getSelectedPage(e,n),pageToWindow=(e,n=1,r=1)=>core.getDocumentViewer(r).pageToWindow(e,n),windowToPage=(e,n=1,r=1)=>core.getDocumentViewer(r).windowToPage(e,n),addEditorImage=e=>core.getDocumentViewer().addEditorImage(e),core={getDocumentViewer,setDocumentViewer,getDocumentViewers,deleteDocumentViewer,loadDocument,initializeViewer,toggleSidebar,getPagesCount,nextPage,previousPage,getCurrentPage,rotateClockwise,rotateCounterclockwise,zoomIn,zoomOut,pageNumberChanged,scaleChanged,getScale,switchAnnotationEditorMode,switchTool,requestFullScreenMode,saveAnnotations,removeAllAnnotations,getOptionUrl,importAnnotations,switchSpreadMode,webViewerNamedAction,switchScrollMode,initConfig,download,addEvent,removeEvent,setTool,exportXfdf,webViewerPageMode,setToolMode,setPropertyPanel,setInitProperty,setDefaultSelect,handleField,handleSign,handleStamp,flattenPdfDownload,compare,setPassword,removePassword,checkPassword,handleCreateStatus,triggerPrinting,setContentEditorProperty,getOutlines,search,setActiveSearchResult,clearSearchResults,init,getSelectedText,getDocEditorPages,saveDocumentEdit,getScrollViewElement,getSelectedPage,pageToWindow,windowToPage,addEditorImage},useViewerStore=defineStore({id:"viewer",state:()=>({language:"en",fullMode:!1,currentPage:0,searchStatus:!1,scale:"",oldScale:"",newScale:"",themeMode:"Light",pageMode:0,webviewerMode:"Standalone",scrollMode:"Vertical",pageLabels:[],zoomLevel:["auto","page-fit",.5,1,1.25,1.5,2,2.5],activeTab:0,activeStickNote:!1,activeActiveMeasure:!1,activeHand:!1,verified:!1,activeElements:{leftPanel:!1,rightPanel:!1,pageModePanel:!1,stampPanel:!1,linkPanel:!1,compareSettingDialog:!1,languageDialog:!1,setPasswordModal:!1,signCreatePanel:!1,downloadSettingDialog:!1,printSettingDialog:!1,contentEditorPanel:!1,contentEditorPreventDialog:!1,docEditorPreventDialog:!1,insertPageSettingDialog:!1,deletePageDialog:!1,extractPageSettingDialog:!1,movePageSettingDialog:!1},activeElementsTab:{leftPanelTab:"THUMBS",rightPanelTab:"GENERAL",stampPanelTab:"STANDARD",signPanelTab:"trackpad"},headers:[{type:"toggleElementButton",img:"icon-header-sidebar-line",element:"leftPanel",dataElement:"leftPanelButton",title:"Left Panel",class:"toggle-button"},{type:"divider",hidden:["small-mobile"]},{type:"pageDisplayButton",dataElement:"pageDisplayButton",element:"pageDisplayButton",title:"Page Display"},{type:"fullScreenButton",dataElement:"fullScreenButton",element:"fullScreenButton",title:"Full Screen"},{type:"handToolButton",dataElement:"handToolButton",element:"handToolButton",title:"Pan Tool"},{type:"divider",hidden:["small-mobile"]},{type:"zoomOverlay",dataElement:"zoomOverlayButton",element:"zoomOverlay",hiddenOnMobileDevice:!0},{type:"divider",hidden:["small-mobile"]},{type:"themeMode",dataElement:"themeMode",element:"themeMode"},{type:"stickyNoteButton",dataElement:"stickyNoteButton",element:"stickyNoteButton"},{type:"measureButton",dataElement:"measureButton",element:"measureButton",hidden:!0},{type:"compareButton",dataElement:"compareButton",element:"compareButton",hidden:!0},{type:"saveButton",dataElement:"saveButton",element:"saveButton",hidden:!0}],rightHeaders:[{type:"openFileButton",dataElement:"openFileButton",element:"openFileButton",title:"Open File"},{type:"searchButton",dataElement:"searchButton",element:"searchButton",title:"Search"},{type:"toggleRightPanelButton",img:"icon-header-sidebar-line",element:"rightPanel",dataElement:"rightPanelButton",title:"Right Panel",id:"propertyPanelButton"},{type:"pageModeButton",dataElement:"pageModeButton",element:"pageModeButton"},{type:"downloadButton",dataElement:"downloadButton",element:"downloadButton",title:"Download"},{type:"flattenButton",dataElement:"flattenButton",element:"flattenButton",title:"Save as Flattened PDF"},{type:"printButton",dataElement:"printButton",element:"printButton",title:"Print"},{type:"languageButton",dataElement:"languageButton",element:"languageButton",title:"Language"}],toolMode:"view",tools:[{element:"view",dataElement:"toolMenu-View"},{element:"annotation",dataElement:"toolMenu-Annotation"},{element:"form",dataElement:"toolMenu-Form"},{element:"sign",dataElement:"toolMenu-Sign"},{element:"security",dataElement:"toolMenu-Security"},{element:"compare",dataElement:"toolMenu-Compare"},{element:"editor",dataElement:"toolMenu-Editor"},{element:"document",dataElement:"toolMenu-Document"}],toolItems:{annotation:[{type:"annotation",tools:[{type:"note",dataElement:"note"},{type:"highlight",dataElement:"highlight"},{type:"underline",dataElement:"underline"},{type:"strikeout",dataElement:"strikeout"},{type:"squiggly",dataElement:"squiggly"},{type:"circle",dataElement:"circle"},{type:"square",dataElement:"square"},{type:"arrow",dataElement:"arrow"},{type:"line",dataElement:"line"},{type:"freetext",dataElement:"freetext"},{type:"stamp",dataElement:"stamp"},{type:"image",dataElement:"image"},{type:"link",dataElement:"link"}]}],form:[{type:"textFieldButton",dataElement:"textFieldButton",element:"textFieldButton",title:"Form Field"},{type:"checkBoxButton",dataElement:"checkBoxButton",element:"checkBoxButton",title:"Check Box"},{type:"radioButton",dataElement:"radioButton",element:"radioButton",title:"Radio Button"},{type:"listBox",dataElement:"listBox",element:"listBox",title:"List Box"},{type:"comboBox",dataElement:"comboBox",element:"comboBox",title:"Combo Box"},{type:"pushButton",dataElement:"pushButton",element:"pushButton",title:"Push Button"}],security:[{type:"securitySelect",dataElement:"securitySelect",element:"securitySelect",title:"Security"},{type:"watermarkSelect",dataElement:"watermarkSelect",element:"watermarkSelect",title:"Watermark"}],compare:[{type:"comparedToolbar"}],editor:[{type:"contentEditorToolbar"}]},downloading:!1,downloadError:"",popoverChanged:!1,compareStatus:"",upload:!0,uploadLoading:!1,compareMode:"content",contentEditorType:"text"}),getters:{getLanguage(){return this.language},getFullMode(){return this.fullMode},getCurrentPage(){return this.currentPage},getThemeMode(){return this.themeMode},getPageMode(){return this.pageMode},getScrollMode(){return this.scrollMode},getWebviewerMode(){return this.webviewerMode},getActiveHeaderItems(){return this.headers},getActiveRightHeaderItems(){return this.rightHeaders},isElementOpen:e=>n=>e.activeElements[n],getActiveElementTab:e=>n=>e.activeElementsTab[n],getScale(){return Math.round(this.scale*100)},getOldScale(){return Math.round(this.oldScale*100)},getNewScale(){return Math.round(this.newScale*100)},getActiveStickNote(){return this.activeStickNote},getActiveMeasure(){return this.activeActiveMeasure},getActiveHand(){return this.activeHand},getSearchStatus(){return this.searchStatus},getToolMode(){return this.toolMode},getTools(){return this.tools},getToolItems(){return this.toolItems},getDownloading(){return this.downloading},getDownloadError(){return this.downloadError},getPopoverChanged(){return this.popoverChanged},getCompareStatus(){return this.compareStatus},getUpload(){return this.upload},getUploadLoading(){return this.uploadLoading},getCompareMode(){return this.compareMode},getVerified(){return this.verified},getContentEditorType(){return this.contentEditorType}},actions:{resetSetting(){this.fullMode=!1,this.currentPage=0,this.scale="",this.themeMode="Light",this.pageMode=0,this.scrollMode="Vertical",this.activeTab=0,this.searchStatus=!1,this.activeElements={leftPanel:!1,rightPanel:!1,pageModePanel:!1,stampPanel:!1,linkPanel:!1,compareSettingDialog:!1,languageDialog:!1,contentEditorPreventDialog:!1,docEditorPreventDialog:!1,setPasswordModal:!1,signCreatePanel:!1,downloadSettingDialog:!1,printSettingDialog:!1,contentEditorPanel:!1,insertPageSettingDialog:!1,deletePageDialog:!1,extractPageSettingDialog:!1,movePageSettingDialog:!1},this.activeElementsTab={leftPanelTab:"THUMBS",rightPanelTab:"GENERAL",stampPanelTab:"STANDARD",signPanelTab:"trackpad"}},resetPanels(){this.searchStatus=!1,this.activeElements={leftPanel:!1,rightPanel:!1,pageModePanel:!1,stampPanel:!1}},setLanguage(e){this.language=e},setVierified(e){this.verified=e},setFullMode(e){return this.fullMode=e},setCurrentPage(e){this.currentPage=e},setThemeMode(e){this.themeMode=e},setPageMode(e){this.pageMode=e},setScrollMode(e){this.scrollMode=e},setWebviewerMode(e){this.webviewerMode=e},setCurrentScale(e){this.scale=e},setOldCurrentScale(e){this.oldScale=e},setNewCurrentScale(e){this.newScale=e},openElement(e){this.activeElements[e]=!0},closeElement(e){this.activeElements[e]=!1},toggleElement(e){this.activeElements[e]?this.closeElement(e):this.openElement(e),e==="signCreatePanel"&&this.activeElements[e]&&this.setActiveSignWay("trackpad")},setActiveElementTab(e,n){this.activeElementsTab[e]=n},toggleActiveStickNote(){this.activeStickNote=!this.activeStickNote},closeActiveStickNote(){this.activeStickNote=!1},toggleActiveMeasure(){this.activeActiveMeasure=!this.activeActiveMeasure},closeActiveMeasure(){this.activeActiveMeasure=!1},toggleActiveHand(e){this.activeHand=e},closeActiveHand(){this.activeHand=!1},setSearchStatus(e){this.searchStatus=e},setActiceToolMode(e){this.toolMode=e,this.activeElements.stampPanel=!1,this.activeElements.linkPanel=!1,this.activeElements.contentEditorPanel=!1,core.setToolMode(e)},setDownloading(e){this.downloading=e},setDownloadError(e){this.downloadError=e},setActiveSignWay(e){this.activeElementsTab.signPanelTab=e,this.activeElementsTab.signPanelTab==="trackpad"&&core.handleSign("create")},setPopoverChanged(e){this.popoverChanged=e},setCompareStatus(e){this.compareStatus=e},setUpload(e){this.upload=e},setUploadLoading(e){this.uploadLoading=e},setCompareMode(e){this.compareMode=e},setContentEditorType(e){this.contentEditorType=e}}}),type=["ink","line","square","circle","freetext","text","highlight","underline","squiggly","strikeout","image","stamp"],useDocumentStore=defineStore({id:"document",state:()=>({totalPages:0,loadingProgress:0,annotationsCount:0,info:null,measure:{precision:1,scale:{origin:{num:1,unit:"pt"},actual:{num:1,unit:"pt"}},distance:0},optionUrl:null,markupTool:"highlight",highlight:{color:"#FFEC66"},underline:{color:"#FF0000"},squiggly:{color:"#FF0000"},strikeout:{color:"#FF0000"},shapeTool:"square",square:{color:"#FF0000",opacity:"0.8",stroke:"1pt"},circle:{color:"#FF0000",opacity:"0.8",stroke:"1pt"},arrow:{color:"#FF0000",opacity:"0.8",stroke:"1pt"},line:{color:"#FF0000",opacity:"0.8",stroke:"1pt"},ink:{color:"#FF0000",opacity:"0.8",stroke:"2pt"},freetext:{color:"#000000"},text:{color:"#FF0000"},activeTool:"",annotations:null,textfield:{color:"#DDE9FF"},checkbox:{color:"#DDE9FF",borderColor:"#43474D"},radiobutton:{color:"#DDE9FF",borderColor:"#43474D"},listbox:{color:"#DDE9FF",borderColor:"#43474D"},combobox:{color:"#DDE9FF",borderColor:"#43474D"},pushbutton:{color:"#DDE9FF",borderColor:"#43474D"},link:{color:"#DDE9FF"},propertyPanel:{fieldName:"",isHidden:"0",title:"",backgroundColor:"#DDE9FF",color:"#000000",fontName:"Helvetica",fontStyle:"normal",fontSize:"14",textAlignment:"0",contents:"",isMultiLine:!1,project:"",projectList:"",checkStyle:0,isChecked:"",actionType:"0",text:"OK",url:"",destPage:"",items:[],item:null,deleteItemIndex:null,moveOption:null},compareFiles:{oldFile:null,oldFilePassword:"",newFile:null,newFilePassword:""},compareSettings:{oldFileColor:"#FBBDBF",newFileColor:"#93B9FD"},currentPdfData:null,fileHasPwd:!1,pwd:null,compareResult:null,outlines:[],activeOutlineId:null,searchResults:[],docEditorOperationList:[]}),getters:{getTotalPages(){return this.totalPages},getLoadingProgress(){return this.loadingProgress},getAnnotationsCount(){return this.annotationsCount+" annotation"+(this.annotationsCount>1?"s":"")},getMeasure(){return this.measure},getPrecision(){return this.measure.precision===1?.1:.01},getInfo(){return this.info},getOptionUrl(){return this.optionUrl},getMarkupToolState(){return this.markupTool},getLineType(){return this.line.type},getActiveToolColor(){if(this.activeTool)return this[this.activeTool].color},getActiveTool(){return this.activeTool},getShapeToolState(){return this.shapeTool},getAllAnnotations(){const e={annotations:{},annotationsCount:0},n=this.annotations;for(const r in n){const o=n[r],s=o.length;if(s)for(let u=0;u<s;u++){if(o[u]&&o[u].type==="line"&&(o[u].tail||o[u].head)&&!(o[u].tail==="None"&&o[u].head==="None")){if(o[u].head&&o[u].head!=="OpenArrow"&&o[u].head!=="None"&&o[u].head!=="Unknown"||o[u].tail&&o[u].tail!=="OpenArrow"&&o[u].tail!=="None"&&o[u].tail!=="Unknown")continue}type.includes(o[u].type)&&(e.annotations[r]||(e.annotations[r]={pageAnnotationsCount:0,annotations:[]}),e.annotations[r].pageAnnotationsCount++,e.annotationsCount++,e.annotations[r].annotations.push(o[u]))}}return e},getAnnotations(e){return this.annotations&&this.annotations[e]},getCompareFile(e){return n=>e.compareFiles[n]},getCompareFiles(){return this.compareFiles},getCompareSetting(e){return n=>e.compareSettings[n]},getCurrentPdfData(){return this.currentPdfData},getFilehasPwd(){return this.fileHasPwd},getPassword(){return this.pwd},getCompareResult(){return this.compareResult},getOutlines(){return this.outlines},getActiveOutlineId(){return this.activeOutlineId},getSearchResults(){return this.searchResults},getDocEditorOperationList(){return this.docEditorOperationList}},actions:{resetSetting(){this.totalPages=0,this.loadingProgress=0,this.annotationsCount=0,this.annotations=null,this.outlines=[],this.activeOutlineId=null,this.searchResults=[],this.docEditorOperationList=[]},setTotalPages(e){this.totalPages=e},setLoadingProgress(e){this.loadingProgress=e},setAnnotationsCount(e){this.annotationsCount=e},setOptionUrl(e){this.optionUrl=e},setToken(e){this.info=e},setDistance(e){this.measure.distance=Math.round(e*10)/10},setMarkupToolState(e){this.markupTool=e},setMarkupToolColor(e){this[this.markupTool]=e},setShapeToolState(e){this.shapeTool=e},setLineType(e){this.line.type=e},setLineColor(e){this.line.color=e},setActiveTool(e){this.activeTool=e},setActiveToolColor(e){this.activeTool&&(this[this.activeTool].color=e,core.setTool({tool:this.activeTool,color:e}))},setToolState(e){var n;this.activeTool===e||!e?(this.activeTool="",core.setTool({tool:"",color:""})):(this.activeTool=e,core.setTool({tool:e,color:((n=this[e])==null?void 0:n.color)||""}),(this.activeTool==="textfield"||this.activeTool==="checkbox"||this.activeTool==="radiobutton"||this.activeTool==="pushbutton")&&core.setInitProperty())},initAnnotations(e){this.annotations=null,this.annotations=e},setAnnotations(e,n){const r=this.annotations;if(n==="add")r[e[page]]||(r[page]=[]),r[page].push(e);else{const o=r[e[page]],s=o.findIndex(u=>u.index===e.index);n==="delete"?o[s].isDelete=!0:o[s]={...o[s],...e}}},setPropertyPanel(e){let n={};for(const r in e)for(const o in this.propertyPanel)r===o&&(n[o]=e[r]);core.setPropertyPanel(n)},setCompareFiles(e,n){this.compareFiles[e]=n},initCompareFiles(){this.compareFiles.oldFile=null,this.compareFiles.oldFilePassword="",this.compareFiles.newFile=null,this.compareFiles.newFilePassword=""},setCompareSetting(e,n){this.compareSettings[e]=n},initCompareSetting(){this.compareSettings={oldFileColor:"#FBBDBF",newFileColor:"#93B9FD"}},setCurrentPdfData(e,n){e&&n?(this.currentPdfData||(this.currentPdfData={}),this.currentPdfData.pdf=e,this.currentPdfData.options=n):e?this.currentPdfData.pdf=e:this.currentPdfData=null},setFileHasPwd(e){this.fileHasPwd=e},setPassword(e){this.pwd=e},setCompareResult(e){this.compareResult=e},setOutline(e){this.outlines=e},setActiveOutlineId(e){this.activeOutlineId=e},setSearchResults(e){this.searchResults=e},setDocEditorOperationList(e){e==="reset"?this.docEditorOperationList=[]:e&&this.docEditorOperationList.push(e)}}}),MessageError=""+new URL("icon-message-error.5be23fbd.svg",import.meta.url).href,SignCreatePanel_vue_vue_type_style_index_0_lang="",_hoisted_1$2i={class:"signatures-popup"},_hoisted_2$28={class:"sign-popup-header"},_hoisted_3$1Z={class:"paint-container"},_hoisted_4$K={id:"trackpadCanvas",width:"578",height:"240"},_hoisted_5$m={class:"keyboard-paint"},_hoisted_6$j=["placeholder"],_hoisted_7$d={class:"image-paint"},_hoisted_8$c={class:"property-container"},_hoisted_9$9={class:"width-tool"},_hoisted_10$a={class:"font-tool"},_hoisted_11$9=createBaseVNode("option",{value:"Arial"},"Arial",-1),_hoisted_12$8=createBaseVNode("option",{value:"Courier New"},"Courier New",-1),_hoisted_13$8=createBaseVNode("option",{value:"Times New Roman"},"Times New Roman",-1),_hoisted_14$8=[_hoisted_11$9,_hoisted_12$8,_hoisted_13$8],_hoisted_15$8={class:"color-tool"},_hoisted_16$7={class:"colors-container"},_hoisted_17$6={class:"cell-container"},_hoisted_18$6=createBaseVNode("span",{class:"cell red"},null,-1),_hoisted_19$6=[_hoisted_18$6],_hoisted_20$6={class:"cell-container"},_hoisted_21$6=createBaseVNode("span",{class:"cell black"},null,-1),_hoisted_22$6=[_hoisted_21$6],_hoisted_23$6={class:"cell-container"},_hoisted_24$6=createBaseVNode("span",{class:"cell blue"},null,-1),_hoisted_25$5=[_hoisted_24$6],_hoisted_26$5={class:"buttons-container"},_hoisted_27$4={class:"right-btns"},_sfc_main$2E={__name:"SignCreatePanel",setup(e){const n=getCurrentInstance().appContext.app.config.globalProperties,r=useViewerStore(),o=useDocumentStore(),s=computed(()=>r.getActiveElementTab("signPanelTab")),u=computed(()=>r.getToolMode),d=computed(()=>o.getActiveTool),f=ref(""),v=ref(""),m=ref(5),_=ref("#000000"),g=ref("Courier New");watch(()=>u.value,(O,N)=>{if(!(N==="sign"&&O==="view")&&O!==N){x();const D=document.getElementById("sign-image-save");D&&D.remove()}}),watch(()=>m.value,(O,N)=>{const D=/^\d+$/;O!==""&&(O>10||O<=0||!D.test(O))&&(m.value=N),s.value==="trackpad"&&core.handleSign("update",{width:m.value,color:_.value})}),watch(()=>_.value,(O,N)=>{if(core.handleSign("update",{width:m.value,color:_.value}),s.value==="keyboard"){let D=document.querySelector(".keyboard-paint input");D&&(D.style.color=_.value)}});const y=O=>{r.setActiveSignWay(O),x(),k()},w=O=>{r.toggleElement("signCreatePanel"),O==="cancel"&&s.value==="trackpad"&&core.handleSign("reset"),s.value!=="trackpad"&&x(),k(),r.setActiceToolMode("view"),document.body.style.overflow="auto"},x=()=>{if(s.value==="keyboard"&&(f.value=""),s.value==="image"||d.value==="image"){v.value="";let O=document.querySelector(".image-paint"),N=document.querySelector(".image-paint input"),D=document.querySelector(".image-paint a"),X=document.querySelector(".image-paint img");O&&(X&&(O.removeChild(X),N.value=""),D&&(D.style.display="block"))}s.value==="trackpad"&&core.handleSign("clear")},k=()=>{if(_.value!=="#000000"&&(_.value="#000000"),g.value!=="Courier New"){g.value="Courier New";let O=document.querySelector(".keyboard-paint input");O&&(O.style.fontFamily="Courier New")}m.value!==5&&(m.value=5,core.handleSign("update",{width:m.value,color:_.value}))},S=O=>{let N=O.target.files[0];if(N.size>1024*1024){window.$message.error(n.$t("signatures.uploadError"),{duration:5e3,icon:()=>h("img",{src:MessageError})}),O.target.value="";return}u.value==="annotation"&&o.setToolState("image"),core.handleCreateStatus({bool:!0,fileData:N});const D=new FileReader;D.readAsDataURL(N),D.onload=function(){v.value=D.result;let X=document.querySelector(".image-paint"),U=document.querySelector(".image-paint a");if(X){let Z=document.createElement("img");Z.setAttribute("src",v.value),Z.style.maxHeight=220+"px",Z.style.maxWidth=568+"px",U.style.display="none",X.append(Z)}if(d.value==="image"){const Z=new Image;Z.onload=function(){T()},Z.src=v.value}}},E=O=>{u.value==="annotation"&&o.setToolState("image")},T=()=>{let O="",N=0,D=0;if((s.value==="image"&&v.value!==""||d.value==="image"&&v.value!=="")&&(O=v.value),s.value==="keyboard"&&f.value!==""){let X=document.createElement("canvas"),U=document.createElement("canvas"),Z=X.getContext("2d");Z.font="46px "+g.value;let j=Z.measureText(f.value).width;U.width=j,U.height=60,Z=U.getContext("2d"),Z.font="46px "+g.value,Z.fillStyle="white",Z.fillRect(0,0,j,60),Z.fillStyle=_.value,Z.fillText(f.value,0,50),N=j,D=60,O=U.toDataURL()}if(O){let X=document.querySelector(".content");if(X){let U=document.getElementById("sign-image-save");U||(U=document.createElement("img"),U.style.position="absolute",U.style.zIndex=10,U.style.pointerEvents="none",U.style.maxHeight="220px",U.style.maxWidth="568px",U.style.border="2px solid blue",U.style.cursor="crosshair",U.id="sign-image-save"),U.setAttribute("src",O),U.style.left="50%",U.style.top="50%",U.style.display="hidden",X.append(U),U.offsetWidth>0&&U.offsetHeight>0&&(N=U.offsetWidth,D=U.offsetHeight);let Z=Math.min(parseInt(N/2),568/2),j=Math.min(parseInt(D/2),220/2);U.style.left="calc(50% -"+Z+")",U.style.top="calc(50% -"+j+")",U.style.display="block",X.onmousemove=function(Q){U.style.left=Q.clientX-Z+"px",U.style.top=Q.clientY-j+"px"}}}s.value==="trackpad"&&core.handleSign("save",{width:m.value,color:_.value}),d.value==="image"?x():w()},M=O=>{O.target.value||(m.value=1)},I=O=>{_.value=O},F=O=>{let N=document.querySelector(".keyboard-paint input");N&&(N.style.fontFamily=O.target.value)};return(O,N)=>{const D=__unplugin_components_1$8;return openBlock(),createElementBlock("div",_hoisted_1$2i,[createBaseVNode("div",_hoisted_2$28,[createBaseVNode("div",{onClick:N[0]||(N[0]=X=>y("trackpad")),class:normalizeClass({active:unref(s)==="trackpad"})},toDisplayString$1(O.$t("signatures.trackpad")),3),createBaseVNode("div",{onClick:N[1]||(N[1]=X=>y("keyboard")),class:normalizeClass({active:unref(s)==="keyboard"})},toDisplayString$1(O.$t("signatures.keyboard")),3),createBaseVNode("div",{onClick:N[2]||(N[2]=X=>y("image")),class:normalizeClass({active:unref(s)==="image"})},toDisplayString$1(O.$t("signatures.image")),3)]),createBaseVNode("div",_hoisted_3$1Z,[withDirectives(createBaseVNode("canvas",_hoisted_4$K,null,512),[[vShow,unref(s)==="trackpad"]]),withDirectives(createBaseVNode("div",_hoisted_5$m,[withDirectives(createBaseVNode("input",{type:"text",placeholder:O.$t("signatures.signHere"),"onUpdate:modelValue":N[3]||(N[3]=X=>f.value=X)},null,8,_hoisted_6$j),[[vModelText,f.value]])],512),[[vShow,unref(s)==="keyboard"]]),withDirectives(createBaseVNode("div",_hoisted_7$d,[createBaseVNode("a",null,[createTextVNode(toDisplayString$1(O.$t("signatures.selectFile")),1),createBaseVNode("input",{type:"file",id:"signImageInput",onChange:S,accept:".png, .jpg, .jpeg",onClick:E},null,32)])],512),[[vShow,unref(s)==="image"]])]),createBaseVNode("div",_hoisted_8$c,[withDirectives(createBaseVNode("div",_hoisted_9$9,[createBaseVNode("span",null,toDisplayString$1(O.$t("signatures.lineWidth")),1),createVNode(unref(NSlider),{value:m.value,"onUpdate:value":N[4]||(N[4]=X=>m.value=X),step:1,max:10,min:1,class:"width-slider"},{thumb:withCtx(()=>[createVNode(D)]),_:1},8,["value"]),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":N[5]||(N[5]=X=>m.value=X),type:"text",pattern:"\\d*",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onBlur:M},null,544),[[vModelText,m.value]])],512),[[vShow,unref(s)==="trackpad"]]),withDirectives(createBaseVNode("div",_hoisted_10$a,[createBaseVNode("span",null,toDisplayString$1(O.$t("font")),1),withDirectives(createBaseVNode("select",{id:"fontFamily","onUpdate:modelValue":N[6]||(N[6]=X=>g.value=X),onChange:F},_hoisted_14$8,544),[[vModelSelect,g.value]])],512),[[vShow,unref(s)==="keyboard"]]),withDirectives(createBaseVNode("div",_hoisted_15$8,[createBaseVNode("span",null,toDisplayString$1(O.$t("color")),1),createBaseVNode("div",_hoisted_16$7,[createBaseVNode("span",_hoisted_17$6,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:_.value==="#FF0000"}]),onClick:N[7]||(N[7]=X=>I("#FF0000"))},_hoisted_19$6,2)]),createBaseVNode("span",_hoisted_20$6,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:_.value==="#000000"}]),onClick:N[8]||(N[8]=X=>I("#000000"))},_hoisted_22$6,2)]),createBaseVNode("span",_hoisted_23$6,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:_.value==="#2D77FA"}]),onClick:N[9]||(N[9]=X=>I("#2D77FA"))},_hoisted_25$5,2)])])],512),[[vShow,unref(s)==="trackpad"||unref(s)==="keyboard"]])]),createBaseVNode("div",_hoisted_26$5,[createBaseVNode("div",{class:"button",onClick:x},toDisplayString$1(O.$t("signatures.clear")),1),createBaseVNode("div",_hoisted_27$4,[createBaseVNode("div",{class:"button",onClick:N[10]||(N[10]=X=>w("cancel"))},toDisplayString$1(O.$t("cancel")),1),createBaseVNode("div",{class:"button blue",onClick:T},toDisplayString$1(O.$t("signatures.save")),1)])])])}}},_sfc_main$2D={},_hoisted_1$2h={width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$27=createBaseVNode("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:"#FF5050",stroke:"#FF5050","stroke-linejoin":"round"},null,-1),_hoisted_3$1Y=createBaseVNode("path",{d:"M30 18L18 30",stroke:"white","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),_hoisted_4$J=createBaseVNode("path",{d:"M18 18L30 30",stroke:"white","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),_hoisted_5$l=[_hoisted_2$27,_hoisted_3$1Y,_hoisted_4$J];function _sfc_render$1v(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2h,_hoisted_5$l)}const __unplugin_components_13$1=_export_sfc(_sfc_main$2D,[["render",_sfc_render$1v]]),Button_vue_vue_type_style_index_0_lang="",_hoisted_1$2g=["disabled","title"],_sfc_main$2C={__name:"Button",props:{title:String,isActive:Boolean,disabled:Boolean||void 0,className:String,mediaQueryClassName:String,img:String,onClick:Function},setup(e){const{img:n}=e,r=s=>{s==null||s.stopPropagation(),s==null||s.preventDefault()},o=n==null?void 0:n.trim().startsWith("data:");return n&&!o&&(!n.includes(".")||n.startsWith("<svg")),(s,u)=>(openBlock(),createElementBlock("button",{class:normalizeClass(["button",{active:e.isActive,disabled:e.disabled,[e.mediaQueryClassName]:e.mediaQueryClassName,[e.className]:e.className}]),onClick:u[0]||(u[0]=d=>e.disabled||!e.onClick?r():e.onClick(d)),onDblclick:u[1]||(u[1]=d=>e.disabled?r:s.onDoubleClick),onMouseup:u[2]||(u[2]=d=>e.disabled?r:s.onDoubleClick),disabled:e.disabled,title:e.title},[renderSlot(s.$slots,"default")],42,_hoisted_1$2g))}},_sfc_main$2B={},_hoisted_1$2f={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$26=createBaseVNode("path",{d:"M13 1L1 13",stroke:"#BABABA","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),_hoisted_3$1X=createBaseVNode("path",{d:"M1 1L13 13",stroke:"#BABABA","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),_hoisted_4$I=[_hoisted_2$26,_hoisted_3$1X];function _sfc_render$1u(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2f,_hoisted_4$I)}const __unplugin_components_11$1=_export_sfc(_sfc_main$2B,[["render",_sfc_render$1u]]),_sfc_main$2A={},_hoisted_1$2e={width:"60",height:"60",viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$25=createStaticVNode('<circle cx="47.0455" cy="16.3636" r="2.04545" fill="white"></circle><circle cx="53.1819" cy="32.0454" r="2.72727" fill="white"></circle><circle cx="47.0453" cy="47.0456" r="3.40909" fill="white"></circle><circle cx="31.3639" cy="53.8636" r="4.09091" fill="white"></circle><circle cx="15.6819" cy="47.7273" r="4.77273" fill="white"></circle><circle cx="9.54537" cy="32.0454" r="5.45455" fill="white"></circle><circle cx="15.6818" cy="17.0455" r="6.13636" fill="white"></circle><circle cx="31.3636" cy="9.54548" r="6.81818" fill="white"></circle>',8),_hoisted_10$9=[_hoisted_2$25];function _sfc_render$1t(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2e,_hoisted_10$9)}const __unplugin_components_10$3=_export_sfc(_sfc_main$2A,[["render",_sfc_render$1t]]),_sfc_main$2z={},_hoisted_1$2d={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$24=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.8 12.6V3.29999H11.7561L11.2345 3.85884L11.9655 4.54115L12.3 4.18279V12.6H3.8ZM2.6 13.2V3.29999H0V2.29999H2.6V0.399994H3.8V2.29999H12.8H13.3V2.79999V12.6H16V13.8H13.3V15.6H12.3V13.8H3.2H2.6V13.2ZM14.2055 2.14115L14.7655 1.54115L14.0345 0.858835L13.4745 1.45884L14.2055 2.14115ZM9.72553 6.94115L10.8455 5.74115L10.1145 5.05884L8.99447 6.25883L9.72553 6.94115ZM7.48553 9.34115L8.60553 8.14115L7.87447 7.45883L6.75447 8.65883L7.48553 9.34115ZM5.24553 11.7412L6.36553 10.5412L5.63447 9.85884L4.51447 11.0588L5.24553 11.7412Z",fill:"currentColor"},null,-1),_hoisted_3$1W=[_hoisted_2$24];function _sfc_render$1s(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2d,_hoisted_3$1W)}const __unplugin_components_10$2=_export_sfc(_sfc_main$2z,[["render",_sfc_render$1s]]),_sfc_main$2y={},_hoisted_1$2c={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$23=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.8537 7.17423L8.5001 10.5279L8.5001 1.60001V1.10001H7.5001V1.60001L7.5001 10.5277L4.14666 7.17423L3.7931 6.82068L3.086 7.52778L3.43955 7.88134L7.64664 12.0884C7.8419 12.2837 8.15849 12.2837 8.35375 12.0884L12.5608 7.88134L12.9144 7.52778L12.2073 6.82068L11.8537 7.17423ZM1.6001 13.9H1.1001V14.9H1.6001H14.4001H14.9001V13.9H14.4001H1.6001Z",fill:"currentColor"},null,-1),_hoisted_3$1V=[_hoisted_2$23];function _sfc_render$1r(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2c,_hoisted_3$1V)}const __unplugin_components_9$4=_export_sfc(_sfc_main$2y,[["render",_sfc_render$1r]]),_sfc_main$2x={},_hoisted_1$2b={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$22=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.904297 1.60429H0.404297V2.10429V11.5177V12.0177H0.904297H3.57684V13.2072V14.2072H4.57684H9.59007V13.532L9.59996 12.8L6.91751 11.5177L4.57684 12.9057V5.7938H14.6032V10.1729H15.6032V5.7938V4.7938H14.6032H13.4307V2.10429V1.60429H12.9307H0.904297ZM12.4307 4.7938V2.60429H1.4043V11.0177H3.57684V5.7938V4.7938H4.57684H12.4307ZM11.7263 8.42116C12.1681 8.42116 12.5263 8.06071 12.5263 7.61607C12.5263 7.17143 12.1681 6.81098 11.7263 6.81098C11.2845 6.81098 10.9263 7.17143 10.9263 7.61607C10.9263 8.06071 11.2845 8.42116 11.7263 8.42116ZM12.3683 9.91808L12.0502 9.53231L12.8218 8.89613L13.1399 9.2819L14.3095 10.7004L14.9841 11.5185H13.9237H10.3999H9.89994V10.5185H10.3999H12.8634L12.3683 9.91808ZM12.5638 13.9004L12.8819 14.2861L12.1104 14.9223L11.7923 14.5365L10.6227 13.1181L9.94808 12.3H11.0084H14.5322H15.0322V13.3H14.5322H12.0688L12.5638 13.9004Z",fill:"currentColor"},null,-1),_hoisted_3$1U=[_hoisted_2$22];function _sfc_render$1q(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2b,_hoisted_3$1U)}const __unplugin_components_8$3=_export_sfc(_sfc_main$2x,[["render",_sfc_render$1q]]),_sfc_main$2w={},_hoisted_1$2a={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$21=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.5 7.5H13.1353H1.5H0.5V6.5V1.60353V0.5L1.5 0.966667L13.3571 6.5L15.5 7.5ZM10.9924 6.5H1.5V2.0702L10.9924 6.5ZM15.5 8.5H0.5V15.5L15.5 8.5Z",fill:"currentColor"},null,-1),_hoisted_3$1T=[_hoisted_2$21];function _sfc_render$1p(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2a,_hoisted_3$1T)}const __unplugin_components_7$2=_export_sfc(_sfc_main$2w,[["render",_sfc_render$1p]]),_sfc_main$2v={},_hoisted_1$29={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$20=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.52941 14.5H0L7.52941 1.5V14.5ZM9.47059 13.5H14.2652L9.47059 5.2218V13.5ZM16 14.5H14.8444H9.47059H8.47059V13.5V3.49524V1.5L9.47059 3.22656L15.4208 13.5L16 14.5Z",fill:"currentColor"},null,-1),_hoisted_3$1S=[_hoisted_2$20];function _sfc_render$1o(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$29,_hoisted_3$1S)}const __unplugin_components_6$3=_export_sfc(_sfc_main$2v,[["render",_sfc_render$1o]]),_sfc_main$2u={},_hoisted_1$28={width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1$=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.35355 2.26779L9.70711 2.62134L9.35355 2.97489L7.23223 5.09621L6.52513 4.38911L7.86416 3.05007L7.55768 3.0735C4.69176 3.52528 2.5 6.00714 2.5 9C2.5 12.3137 5.18629 15 8.5 15C11.8137 15 14.5 12.3137 14.5 9C14.5 7.01498 13.5366 5.25507 12.0496 4.16209L12.6419 3.35635C14.3741 4.62964 15.5 6.68338 15.5 9C15.5 12.866 12.366 16 8.5 16C4.63401 16 1.5 12.866 1.5 9C1.5 5.49977 4.06855 2.60038 7.4237 2.08231C7.52022 2.0674 7.61737 2.05447 7.71511 2.04356L6.52513 0.853572L7.23223 0.146465L9.35355 2.26779Z",fill:"currentColor"},null,-1),_hoisted_3$1R=[_hoisted_2$1$];function _sfc_render$1n(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$28,_hoisted_3$1R)}const __unplugin_components_5$6=_export_sfc(_sfc_main$2u,[["render",_sfc_render$1n]]),_sfc_main$2t={},_hoisted_1$27={width:"14",height:"16",viewBox:"0 0 14 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1_=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.14645 2.26779L5.79289 2.62134L6.14645 2.97489L8.26777 5.09621L8.97487 4.38911L7.63584 3.05007L7.94232 3.0735C10.8082 3.52528 13 6.00714 13 9C13 12.3137 10.3137 15 7 15C3.68629 15 1 12.3137 1 9C1 7.01498 1.96344 5.25507 3.45037 4.16209L2.85811 3.35635C1.12586 4.62964 0 6.68338 0 9C0 12.866 3.13401 16 7 16C10.866 16 14 12.866 14 9C14 5.49977 11.4314 2.60038 8.0763 2.08231C7.97978 2.0674 7.88263 2.05447 7.78489 2.04356L8.97487 0.853572L8.26777 0.146465L6.14645 2.26779Z",fill:"currentColor"},null,-1),_hoisted_3$1Q=[_hoisted_2$1_];function _sfc_render$1m(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$27,_hoisted_3$1Q)}const __unplugin_components_4$6=_export_sfc(_sfc_main$2t,[["render",_sfc_render$1m]]),_sfc_main$2s={},_hoisted_1$26={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1Z=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16 4V3H3.00079V4H16ZM16 8V7H0.000976562V8H16ZM16 11V12H6.00061V11H16Z",fill:"currentColor"},null,-1),_hoisted_3$1P=[_hoisted_2$1Z];function _sfc_render$1l(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$26,_hoisted_3$1P)}const __unplugin_components_3$b=_export_sfc(_sfc_main$2s,[["render",_sfc_render$1l]]),_sfc_main$2r={},_hoisted_1$25={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1Y=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16 4V3H0V4H16ZM16 12V11H0V12H16ZM13 7V8H3V7H13Z",fill:"currentColor"},null,-1),_hoisted_3$1O=[_hoisted_2$1Y];function _sfc_render$1k(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$25,_hoisted_3$1O)}const __unplugin_components_2$c=_export_sfc(_sfc_main$2r,[["render",_sfc_render$1k]]),_sfc_main$2q={},_hoisted_1$24={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1X=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13 4V3H0V4H13ZM16 8V7H0V8H16ZM10 11V12H0V11H10Z",fill:"currentColor"},null,-1),_hoisted_3$1N=[_hoisted_2$1X];function _sfc_render$1j(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$24,_hoisted_3$1N)}const __unplugin_components_1$7=_export_sfc(_sfc_main$2q,[["render",_sfc_render$1j]]),ContentEditorPanel_vue_vue_type_style_index_0_scoped_af925465_lang="",ContentEditorPanel_vue_vue_type_style_index_1_lang="",_withScopeId=e=>(pushScopeId("data-v-af925465"),e=e(),popScopeId(),e),_hoisted_1$23={class:"title"},_hoisted_2$1W={class:"edit-container"},_hoisted_3$1M={class:"color"},_hoisted_4$H={class:"color-title"},_hoisted_5$k={class:"colors-container"},_hoisted_6$i={class:"cell-container"},_hoisted_7$c=_withScopeId(()=>createBaseVNode("span",{class:"cell red"},null,-1)),_hoisted_8$b=[_hoisted_7$c],_hoisted_9$8={class:"cell-container"},_hoisted_10$8=_withScopeId(()=>createBaseVNode("span",{class:"cell yellow"},null,-1)),_hoisted_11$8=[_hoisted_10$8],_hoisted_12$7={class:"cell-container"},_hoisted_13$7=_withScopeId(()=>createBaseVNode("span",{class:"cell blue"},null,-1)),_hoisted_14$7=[_hoisted_13$7],_hoisted_15$7={class:"opacity"},_hoisted_16$6={class:"opacity-title"},_hoisted_17$5={class:"tool"},_hoisted_18$5={class:"text"},_hoisted_19$5={class:"text-title"},_hoisted_20$5={class:"content-block"},_hoisted_21$5={class:"text-align"},_hoisted_22$5={class:"edit-container"},_hoisted_23$5={class:"overview"},_hoisted_24$5=["src"],_hoisted_25$4={class:"rotate"},_hoisted_26$4={class:"content-title"},_hoisted_27$3={class:"buttons"},_hoisted_28$3=["title"],_hoisted_29$2=["title"],_hoisted_30$2={class:"flips"},_hoisted_31$2={class:"content-title"},_hoisted_32$2={class:"buttons"},_hoisted_33$2=["title"],_hoisted_34$2=["title"],_hoisted_35$2={class:"opacity"},_hoisted_36$2={class:"opacity-title"},_hoisted_37$2={class:"tool"},_hoisted_38$2={class:"tools"},_hoisted_39$2={class:"content-title"},_hoisted_40$2={class:"buttons"},_hoisted_41$2=["title"],_hoisted_42$2=["title"],_hoisted_43$2=["title"],_sfc_main$2p={__name:"ContentEditorPanel",setup(e){const n=useViewerStore();useDocumentStore();const o=getCurrentInstance().appContext.app.config.globalProperties.$t;let s=reactive({color:"#000000",opacity:100,fontFamily:"Helvetica",fontStyle:0,alignType:2,fontSize:14}),u=ref("100%");const f=[25,50,75,100].map(F=>({label:`${F}%`,value:`${F}%`,class:"edit-select"})),m=["Helvetica","Courier","Times-Roman","DroidSansFallbackFull"].map(F=>({label:F,value:F,class:"edit-select"})),_=computed(()=>[{label:o("regular"),value:0,class:"edit-select"},{label:o("bold"),value:1,class:"edit-select"},{label:o("boldOblique"),value:3,class:"edit-select"},{label:o("oblique"),value:2,class:"edit-select"}]),g=[12,14,16,20,24,28],y=g.map(F=>({label:`${F} pt`,value:F,class:"edit-select"})),w=computed(()=>n.isElementOpen("contentEditorPanel")),x=computed(()=>n.getContentEditorType),k=ref("");watch(()=>s.fontFamily,(F,O)=>{core.setContentEditorProperty(x.value,{fontFamily:F})}),watch(()=>s.fontStyle,(F,O)=>{core.setContentEditorProperty(x.value,{fontStyle:F})}),watch(()=>s.opacity,(F,O)=>{u.value=F+"%",core.setContentEditorProperty(x.value,{opacity:s.opacity})}),watch(()=>s.fontSize,(F,O)=>{typeof F=="number"&&core.setContentEditorProperty(x.value,{fontSize:s.fontSize})});const S=F=>{s.color=F,core.setContentEditorProperty(x.value,{color:F})},E=()=>{s.opacity=Number.isNaN(Number.parseInt(u.value))?100:Number.parseInt(u.value)},T=F=>{s.alignType=F,core.setContentEditorProperty(x.value,{alignType:s.alignType})},M=F=>{for(const O in F){O==="type"&&n.setContentEditorType(F[O]),O==="isOpen"&&(F.isOpen?n.openElement("contentEditorPanel"):n.closeElement("contentEditorPanel")),O==="imageUrl"&&(k.value=F[O]);for(const N in s)O===N&&(s[N]=F[O],O==="fontSize"&&!g.includes(F.fontSize)&&(s.fontSize=F.fontSize+" pt"))}};core.addEvent("contentPropertyChange",M);const I=(F,O)=>{core.setContentEditorProperty(x.value,{[F]:O})};return(F,O)=>{const N=__unplugin_components_1$8,D=__unplugin_components_1$7,X=__unplugin_components_2$c,U=__unplugin_components_3$b,Z=__unplugin_components_4$6,j=__unplugin_components_5$6,Q=__unplugin_components_6$3,ve=__unplugin_components_7$2,Se=__unplugin_components_8$3,we=__unplugin_components_9$4,oe=__unplugin_components_10$2;return openBlock(),createElementBlock("div",{class:normalizeClass(["editor-panel",{closed:!unref(w)}]),id:"editorPanel"},[createBaseVNode("div",_hoisted_1$23,toDisplayString$1(unref(x)==="text"?unref(o)("editorPanel.textProp"):unref(o)("editorPanel.imageProp")),1),withDirectives(createBaseVNode("div",_hoisted_2$1W,[createBaseVNode("div",_hoisted_3$1M,[createBaseVNode("div",_hoisted_4$H,toDisplayString$1(unref(o)("editorPanel.fontColor")),1),createBaseVNode("div",_hoisted_5$k,[createBaseVNode("span",_hoisted_6$i,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(s).color==="#FF0000"}]),onClick:O[0]||(O[0]=ne=>S("#FF0000"))},_hoisted_8$b,2)]),createBaseVNode("span",_hoisted_9$8,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(s).color==="#FFEC66"}]),onClick:O[1]||(O[1]=ne=>S("#FFEC66"))},_hoisted_11$8,2)]),createBaseVNode("span",_hoisted_12$7,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(s).color==="#2D77FA"}]),onClick:O[2]||(O[2]=ne=>S("#2D77FA"))},_hoisted_14$7,2)])])]),createBaseVNode("div",_hoisted_15$7,[createBaseVNode("div",_hoisted_16$6,toDisplayString$1(unref(o)("opacity")),1),createBaseVNode("div",_hoisted_17$5,[createVNode(unref(NSlider),{value:unref(s).opacity,"onUpdate:value":O[3]||(O[3]=ne=>unref(s).opacity=ne),tooltip:!1,step:1,max:100,min:0,class:"width-slider"},{thumb:withCtx(()=>[createVNode(N)]),_:1},8,["value"]),createVNode(unref(NSelect),{value:unref(u),"onUpdate:value":[O[4]||(O[4]=ne=>isRef(u)?u.value=ne:u=ne),E],options:unref(f),to:"#editorPanel"},null,8,["value","options"])])]),createBaseVNode("div",_hoisted_18$5,[createBaseVNode("div",_hoisted_19$5,toDisplayString$1(unref(o)("font")),1),createVNode(unref(NSelect),{value:unref(s).fontFamily,"onUpdate:value":O[5]||(O[5]=ne=>unref(s).fontFamily=ne),options:unref(m),to:"#editorPanel",class:"text-family"},null,8,["value","options"]),createBaseVNode("div",_hoisted_20$5,[createVNode(unref(NSelect),{value:unref(s).fontStyle,"onUpdate:value":O[6]||(O[6]=ne=>unref(s).fontStyle=ne),options:unref(_),to:"#editorPanel",class:"font-style-select"},null,8,["value","options"]),createVNode(unref(NSelect),{value:unref(s).fontSize,"onUpdate:value":O[7]||(O[7]=ne=>unref(s).fontSize=ne),options:unref(y),to:"#editorPanel",class:"font-size-select"},null,8,["value","options"])]),createBaseVNode("div",_hoisted_21$5,[createBaseVNode("div",{class:normalizeClass({active:unref(s).alignType===2}),onClick:O[8]||(O[8]=ne=>T(2))},[createBaseVNode("span",{class:normalizeClass({border:unref(s).alignType===3})},[createVNode(D)],2)],2),createBaseVNode("div",{class:normalizeClass({active:unref(s).alignType===5}),onClick:O[9]||(O[9]=ne=>T(5))},[createBaseVNode("span",{class:normalizeClass({border:unref(s).alignType===2})},[createVNode(X)],2)],2),createBaseVNode("div",{class:normalizeClass({active:unref(s).alignType===3}),onClick:O[10]||(O[10]=ne=>T(3))},[createBaseVNode("span",null,[createVNode(U)])],2)])])],512),[[vShow,unref(x)==="text"]]),withDirectives(createBaseVNode("div",_hoisted_22$5,[createBaseVNode("div",_hoisted_23$5,[withDirectives(createBaseVNode("img",{src:k.value},null,8,_hoisted_24$5),[[vShow,k.value]])]),createBaseVNode("div",_hoisted_25$4,[createBaseVNode("div",_hoisted_26$4,toDisplayString$1(unref(o)("editorPanel.rotate")),1),createBaseVNode("div",_hoisted_27$3,[createBaseVNode("div",{onClick:O[11]||(O[11]=ne=>I("rotate","-90")),title:unref(o)("editorPanel.rotateLeft")},[createVNode(Z),createTextVNode(toDisplayString$1(unref(o)("editorPanel.rotateLeft")),1)],8,_hoisted_28$3),createBaseVNode("div",{onClick:O[12]||(O[12]=ne=>I("rotate","90")),title:unref(o)("editorPanel.rotateRight")},[createVNode(j),createTextVNode(toDisplayString$1(unref(o)("editorPanel.rotateRight")),1)],8,_hoisted_29$2)])]),createBaseVNode("div",_hoisted_30$2,[createBaseVNode("div",_hoisted_31$2,toDisplayString$1(unref(o)("editorPanel.flip")),1),createBaseVNode("div",_hoisted_32$2,[createBaseVNode("div",{onClick:O[13]||(O[13]=ne=>I("flip","x")),title:unref(o)("editorPanel.flipHorizontal")},[createBaseVNode("span",null,[createVNode(Q)])],8,_hoisted_33$2),createBaseVNode("div",{onClick:O[14]||(O[14]=ne=>I("flip","y")),title:unref(o)("editorPanel.flipVertical")},[createBaseVNode("span",null,[createVNode(ve)])],8,_hoisted_34$2)])]),createBaseVNode("div",_hoisted_35$2,[createBaseVNode("div",_hoisted_36$2,toDisplayString$1(unref(o)("opacity")),1),createBaseVNode("div",_hoisted_37$2,[createVNode(unref(NSlider),{value:unref(s).opacity,"onUpdate:value":O[15]||(O[15]=ne=>unref(s).opacity=ne),tooltip:!1,step:1,max:100,min:0,class:"width-slider"},{thumb:withCtx(()=>[createVNode(N)]),_:1},8,["value"]),createVNode(unref(NSelect),{value:unref(u),"onUpdate:value":[O[16]||(O[16]=ne=>isRef(u)?u.value=ne:u=ne),E],options:unref(f),to:"#editorPanel"},null,8,["value","options"])])]),createBaseVNode("div",_hoisted_38$2,[createBaseVNode("div",_hoisted_39$2,toDisplayString$1(unref(o)("editorPanel.tools")),1),createBaseVNode("div",_hoisted_40$2,[createBaseVNode("div",{onClick:O[17]||(O[17]=ne=>I("tool","replace")),title:unref(o)("editorPanel.replace")},[createBaseVNode("span",null,[createVNode(Se)])],8,_hoisted_41$2),createBaseVNode("div",{onClick:O[18]||(O[18]=ne=>I("tool","export")),title:unref(o)("editorPanel.export")},[createBaseVNode("span",null,[createVNode(we)])],8,_hoisted_42$2),createBaseVNode("div",{onClick:O[19]||(O[19]=ne=>I("tool","crop")),title:unref(o)("editorPanel.crop")},[createBaseVNode("span",null,[createVNode(oe)])],8,_hoisted_43$2)])])],512),[[vShow,unref(x)==="image"]])],2)}}},__unplugin_components_9$3=_export_sfc(_sfc_main$2p,[["__scopeId","data-v-af925465"]]),_sfc_main$2o={},_hoisted_1$22={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1V=createBaseVNode("g",{id:"btn / close"},[createBaseVNode("circle",{id:"Ellipse 2704",cx:"8",cy:"8",r:"7",fill:"#999999"}),createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.07107 7.29289L4.88909 4.11091L4.18198 4.81802L7.36396 8L4.18198 11.182L4.88909 11.8891L8.07107 8.70711L11.253 11.8891L11.9602 11.182L8.77817 8L11.9602 4.81802L11.253 4.11091L8.07107 7.29289Z",fill:"white"})],-1),_hoisted_3$1L=[_hoisted_2$1V];function _sfc_render$1i(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$22,_hoisted_3$1L)}const __unplugin_components_0$m=_export_sfc(_sfc_main$2o,[["render",_sfc_render$1i]]),LinkPanel_vue_vue_type_style_index_0_lang="",_hoisted_1$21={class:"sidebar-title"},_hoisted_2$1U={class:"sidebar-tabs-header"},_hoisted_3$1K={class:"sidebar-content"},_hoisted_4$G=["placeholder"],_sfc_main$2n={__name:"LinkPanel",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=ref("url"),s=computed(()=>n.isElementOpen("linkPanel")),u=computed(()=>r.getActiveTool);computed(()=>n.getCurrentPage);const d=computed(()=>r.getTotalPages);let f=ref(""),v=ref(""),m=ref("");watch(()=>u.value,(E,T)=>{E!=="link"&&n.closeElement("linkPanel")}),watch(()=>s.value,(E,T)=>{E&&(o.value=f.value?"url":v.value?"page":m.value?"email":"url")}),watch(()=>v.value,(E,T)=>{const M=/^\d+$/;E!==""&&(E>d.value||E<=0||!M.test(E))&&(v.value=T)});const _=E=>{o.value=E},g=()=>o.value==="url"&&w(f.value)||o.value==="page"&&v.value||o.value==="email"&&y(m.value),y=E=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(E),w=E=>/^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/i.test(E),x=()=>{if(o.value==="url")r.setPropertyPanel({destPage:"",url:f.value});else if(o.value==="page")r.setPropertyPanel({url:"",destPage:v.value});else if(o.value==="email"){const E=m.value.startsWith("mailto:");r.setPropertyPanel({destPage:"",url:E?m.value:"mailto:"+m.value})}n.closeElement("linkPanel")},k=E=>{E?(E.url&&E.url.startsWith("mailto:")?(m.value=E.url.replace("mailto:",""),f.value="",v.value="",o.value="email"):E.url?(f.value=E.url,m.value="",v.value="",o.value="url"):E.destPage?(v.value=E.destPage,f.value="",m.value="",o.value="page"):(v.value="",f.value="",m.value="",o.value="url"),n.openElement("linkPanel")):n.closeElement("linkPanel")};core.addEvent("linkPanelChange",k);const S=()=>{o.value==="url"?f.value="":o.value==="page"?v.value="":o.value==="email"&&(m.value="")};return(E,T)=>{const M=_sfc_main$2C,I=__unplugin_components_0$m;return openBlock(),createElementBlock("div",{class:normalizeClass(["link-panel",{closed:!unref(s)}]),id:"linkPanel"},[createBaseVNode("div",_hoisted_1$21,toDisplayString$1(E.$t("linkPanel.linkTo")),1),createBaseVNode("div",_hoisted_2$1U,[createVNode(M,{className:o.value==="url"?"active":"",isActive:o.value==="url",onClick:T[0]||(T[0]=F=>_("url"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(E.$t("linkPanel.url")),1)]),_:1},8,["className","isActive"]),createVNode(M,{className:o.value==="page"?"active":"",isActive:o.value==="page",onClick:T[1]||(T[1]=F=>_("page"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(E.$t("linkPanel.goToPages")),1)]),_:1},8,["className","isActive"]),createVNode(M,{className:o.value==="email"?"active":"",isActive:o.value==="email",onClick:T[2]||(T[2]=F=>_("email"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(E.$t("linkPanel.email")),1)]),_:1},8,["className","isActive"])]),createBaseVNode("div",_hoisted_3$1K,[createBaseVNode("div",{class:normalizeClass(["input-container",{hidden:o.value!=="url"}])},[withDirectives(createBaseVNode("input",{type:"text",placeholder:"https://www.compdf.com","onUpdate:modelValue":T[3]||(T[3]=F=>isRef(f)?f.value=F:f=F)},null,512),[[vModelText,unref(f)]]),withDirectives(createVNode(I,{onClick:S},null,512),[[vShow,unref(f)]])],2),createBaseVNode("div",{class:normalizeClass(["input-container",{hidden:o.value!=="page"}])},[withDirectives(createBaseVNode("input",{type:"text",pattern:"\\d*",placeholder:`1~${unref(d)}`,"onUpdate:modelValue":T[4]||(T[4]=F=>isRef(v)?v.value=F:v=F),onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))"},null,8,_hoisted_4$G),[[vModelText,unref(v)]]),withDirectives(createVNode(I,{onClick:S},null,512),[[vShow,unref(v)]])],2),createBaseVNode("div",{class:normalizeClass(["input-container",{hidden:o.value!=="email"}])},[withDirectives(createBaseVNode("input",{type:"text",placeholder:"support@compdf.com","onUpdate:modelValue":T[5]||(T[5]=F=>isRef(m)?m.value=F:m=F)},null,512),[[vModelText,unref(m)]]),withDirectives(createVNode(I,{onClick:S},null,512),[[vShow,unref(m)]])],2),createBaseVNode("div",{class:normalizeClass(["save rect-button blue",{disabled:!g()}]),onClick:x},toDisplayString$1(E.$t("linkPanel.go")),3)])],2)}}},_imports_0=""+new URL("../images/stamp/Approved.png",import.meta.url).href,_imports_1=""+new URL("../images/stamp/NotApproved.png",import.meta.url).href,_imports_2=""+new URL("../images/stamp/Completed.png",import.meta.url).href,_imports_3=""+new URL("../images/stamp/Final.png",import.meta.url).href,_imports_4=""+new URL("../images/stamp/Draft.png",import.meta.url).href,_imports_5=""+new URL("../images/stamp/Confidential.png",import.meta.url).href,_imports_6=""+new URL("../images/stamp/ForPublicRelease.png",import.meta.url).href,_imports_7=""+new URL("../images/stamp/NotForPublicRelease.png",import.meta.url).href,_imports_8=""+new URL("../images/stamp/ForComment.png",import.meta.url).href,_imports_9=""+new URL("../images/stamp/Void.png",import.meta.url).href,_imports_10=""+new URL("../images/stamp/PreliminaryResults.png",import.meta.url).href,_imports_11=""+new URL("../images/stamp/InformationOnly.png",import.meta.url).href,_imports_12=""+new URL("../images/stamp/Witness.png",import.meta.url).href,_imports_13=""+new URL("../images/stamp/InitialHere.png",import.meta.url).href,_imports_14=""+new URL("../images/stamp/SignHere.png",import.meta.url).href,_imports_15=""+new URL("../images/stamp/revised.png",import.meta.url).href,StampPanel_vue_vue_type_style_index_0_lang="",_hoisted_1$20={class:"sidebar-title"},_hoisted_2$1T={class:"sidebar-tabs-header"},_hoisted_3$1J={class:"sidebar-content"},_hoisted_4$F={class:"dynamic-stamp red"},_hoisted_5$j=createBaseVNode("p",{class:"title"},"REVISED",-1),_hoisted_6$h={class:"dynamic-stamp green"},_hoisted_7$b=createBaseVNode("p",{class:"title"},"REVISED",-1),_sfc_main$2m={__name:"StampPanel",setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useViewerStore(),s=useDocumentStore(),u=computed(()=>o.getActiveElementTab("stampPanelTab")),d=computed(()=>o.isElementOpen("stampPanel")),f=computed(()=>s.getActiveTool),v=computed(()=>o.getCurrentPage),m=ref("");onMounted(()=>{g(),setInterval(g,1e3)}),watch(()=>f.value,(x,k)=>{x!=="stamp"&&o.closeElement("stampPanel")}),watch(()=>d.value,(x,k)=>{x&&_("STANDARD")});const _=x=>{o.setActiveElementTab("stampPanelTab",x)},g=()=>{const x=new Date;m.value=y(x)},y=x=>{const k=x.getFullYear(),S=String(x.getMonth()+1).padStart(2,"0"),E=String(x.getDate()).padStart(2,"0"),T=String(x.getHours()).padStart(2,"0"),M=String(x.getMinutes()).padStart(2,"0"),I=String(x.getSeconds()).padStart(2,"0");return`${E}/${S}/${k} ${T}:${M}:${I}`},w=x=>{const k=x instanceof PointerEvent||x instanceof MouseEvent||typeof x=="object",S={page:v.value,stampType:k?"standard":"dynamic"};k?S.stampContainer=x.target:(S.color=x,S.shape="0",S.stampContainer={width:190,height:36},S.text="REVISED",S.time=m.value),core.handleStamp(S),window.innerWidth<=640&&(s.setToolState("stamp"),o.toggleActiveHand(!1),n(0),r(0),o.closeElement("stampPanel"))};return(x,k)=>{const S=_sfc_main$2C;return openBlock(),createElementBlock("div",{class:normalizeClass(["stamp-panel",{closed:!unref(d)}])},[createBaseVNode("div",_hoisted_1$20,toDisplayString$1(x.$t("header.stamp")),1),createBaseVNode("div",_hoisted_2$1T,[createVNode(S,{className:unref(u)==="STANDARD"?"active":"",isActive:unref(u)==="STANDARD",onClick:k[0]||(k[0]=E=>_("STANDARD"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(x.$t("stampPanel.standard")),1)]),_:1},8,["className","isActive"]),createVNode(S,{className:unref(u)==="DYNAMIC"?"active":"",isActive:unref(u)==="DYNAMIC",onClick:k[1]||(k[1]=E=>_("DYNAMIC"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(x.$t("stampPanel.dynamic")),1)]),_:1},8,["className","isActive"])]),createBaseVNode("div",_hoisted_3$1J,[createBaseVNode("div",{class:normalizeClass(["standard-container",{hidden:unref(u)!=="STANDARD"}])},[createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_0,alt:"Approved"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_1,alt:"NotApproved"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_2,alt:"Completed"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_3,alt:"Final"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_4,alt:"Draft"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_5,alt:"Confidential"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_6,alt:"ForPublicRelease"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_7,alt:"NotForPublicRelease"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_8,alt:"ForComment"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_9,alt:"Void"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_10,alt:"PreliminaryResults"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_11,alt:"InformationOnly"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_12,alt:"Witness"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_13,alt:"InitialHere"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_14,alt:"SignHere"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_15,alt:"revised"})])],2),createBaseVNode("div",{class:normalizeClass(["customize-container",{hidden:unref(u)!=="DYNAMIC"}])},[createBaseVNode("div",{class:"block",onClick:k[2]||(k[2]=E=>w(1))},[createBaseVNode("div",_hoisted_4$F,[_hoisted_5$j,createBaseVNode("p",null,toDisplayString$1(m.value),1)])]),createBaseVNode("div",{class:"block",onClick:k[3]||(k[3]=E=>w(2))},[createBaseVNode("div",_hoisted_6$h,[_hoisted_7$b,createBaseVNode("p",null,toDisplayString$1(m.value),1)])])],2)])],2)}}},_sfc_main$2l={},_hoisted_1$1$={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1S=createBaseVNode("mask",{id:"path-1-inside-1_334_4981",fill:"white"},[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.58408 11.3387C4.3368 11.6625 7.20552 10.7684 9.31754 8.65635C11.1899 6.78404 12.105 4.31705 12.0631 1.86338C12.9045 2.2377 13.6927 2.76991 14.3828 3.46C17.399 6.47625 17.399 11.3666 14.3828 14.3828C11.3665 17.3991 6.47623 17.3991 3.45998 14.3828C2.57505 13.4979 1.94975 12.4516 1.58408 11.3387Z"})],-1),_hoisted_3$1I=createBaseVNode("path",{d:"M1.58412 11.3387L1.75933 9.849L-0.574465 9.57451L0.159076 11.807L1.58412 11.3387ZM12.0631 1.86337L12.6728 0.492869L10.5232 -0.46347L10.5634 1.889L12.0631 1.86337ZM8.25692 7.59568C6.48322 9.36938 4.07577 10.1214 1.75933 9.849L1.40891 12.8285C4.59792 13.2035 7.9279 12.1673 10.3782 9.717L8.25692 7.59568ZM10.5634 1.889C10.5986 3.95285 9.82995 6.02265 8.25692 7.59568L10.3782 9.717C12.5498 7.54541 13.6115 4.68123 13.5629 1.83774L10.5634 1.889ZM11.4535 3.23387C12.1295 3.5346 12.7642 3.96264 13.3222 4.52064L15.4435 2.39932C14.6213 1.57714 13.6796 0.940768 12.6728 0.492869L11.4535 3.23387ZM13.3222 4.52064C15.7526 6.95111 15.7526 10.8917 13.3222 13.3221L15.4435 15.4435C19.0455 11.8414 19.0455 6.00136 15.4435 2.39932L13.3222 4.52064ZM13.3222 13.3221C10.8917 15.7526 6.95115 15.7526 4.52068 13.3221L2.39936 15.4435C6.0014 19.0455 11.8415 19.0455 15.4435 15.4435L13.3222 13.3221ZM4.52068 13.3221C3.80572 12.6072 3.30315 11.7652 3.00916 10.8705L0.159076 11.807C0.596442 13.1381 1.34447 14.3886 2.39936 15.4435L4.52068 13.3221Z",fill:"currentColor",mask:"url(#path-1-inside-1_334_4981)"},null,-1),_hoisted_4$E=[_hoisted_2$1S,_hoisted_3$1I];function _sfc_render$1h(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1$,_hoisted_4$E)}const __unplugin_components_2$b=_export_sfc(_sfc_main$2l,[["render",_sfc_render$1h]]),_sfc_main$2k={},_hoisted_1$1_={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1R=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.99938 3.50634C9.58517 3.50634 9.24938 3.17055 9.24938 2.75634V1.57727C9.24938 1.16306 9.58517 0.827271 9.99938 0.827271C10.4136 0.827271 10.7494 1.16306 10.7494 1.57727V2.75634C10.7494 3.17055 10.4136 3.50634 9.99938 3.50634ZM14.7034 9.9044C14.7034 12.5498 12.5589 14.6944 9.91347 14.6944C7.26804 14.6944 5.1235 12.5498 5.1235 9.9044C5.1235 7.25898 7.26804 5.11444 9.91347 5.11444C12.5589 5.11444 14.7034 7.25898 14.7034 9.9044ZM14.5886 4.34193C14.2954 4.63444 14.2954 5.1087 14.5886 5.40121C14.8819 5.69373 15.3574 5.69373 15.6507 5.40121L16.4865 4.56749C16.7798 4.27497 16.7798 3.80071 16.4865 3.5082C16.1933 3.21569 15.7178 3.21569 15.4245 3.5082L14.5886 4.34193ZM16.4906 9.97809C16.4906 9.56388 16.8264 9.22809 17.2406 9.22809H18.4227C18.837 9.22809 19.1727 9.56388 19.1727 9.97809C19.1727 10.3923 18.837 10.7281 18.4227 10.7281H17.2406C16.8264 10.7281 16.4906 10.3923 16.4906 9.97809ZM15.6507 14.555C15.3574 14.2624 14.8819 14.2624 14.5887 14.555C14.2954 14.8475 14.2954 15.3217 14.5887 15.6142L15.4245 16.448C15.7178 16.7405 16.1933 16.7405 16.4866 16.448C16.7798 16.1555 16.7798 15.6812 16.4866 15.3887L15.6507 14.555ZM9.99947 16.4497C10.4137 16.4497 10.7495 16.7855 10.7495 17.1997V18.3788C10.7495 18.793 10.4137 19.1288 9.99947 19.1288C9.58526 19.1288 9.24947 18.793 9.24947 18.3788V17.1997C9.24947 16.7855 9.58526 16.4497 9.99947 16.4497ZM5.41081 15.6142C5.70408 15.3217 5.70408 14.8474 5.41081 14.5549C5.11754 14.2624 4.64205 14.2624 4.34878 14.5549L3.51289 15.3887C3.21962 15.6812 3.21962 16.1554 3.51289 16.4479C3.80616 16.7405 4.28165 16.7405 4.57492 16.4479L5.41081 15.6142ZM3.50939 9.97805C3.50939 10.3923 3.1736 10.728 2.75939 10.728H1.57727C1.16306 10.728 0.827271 10.3923 0.827271 9.97805C0.827271 9.56384 1.16306 9.22805 1.57727 9.22805H2.75939C3.1736 9.22805 3.50939 9.56384 3.50939 9.97805ZM4.34874 5.40119C4.64201 5.6937 5.1175 5.6937 5.41077 5.40119C5.70405 5.10867 5.70405 4.63442 5.41077 4.3419L4.57489 3.50818C4.28162 3.21566 3.80613 3.21566 3.51286 3.50818C3.21958 3.80069 3.21958 4.27495 3.51286 4.56746L4.34874 5.40119Z",fill:"currentColor"},null,-1),_hoisted_3$1H=[_hoisted_2$1R];function _sfc_render$1g(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1_,_hoisted_3$1H)}const __unplugin_components_0$l=_export_sfc(_sfc_main$2k,[["render",_sfc_render$1g]]),_sfc_main$2j={},_hoisted_1$1Z={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1Q=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M22.5 5H2.5V19H22.5V5ZM6.34628 13.75L6.6731 12.7365H8.05023L8.37455 13.75H8.96333L7.66353 10H7.05979L5.76 13.75H6.34628ZM7.90054 12.2687H6.82279L7.33921 10.6575H7.38162L7.90054 12.2687ZM12 18V6H13V18H12ZM18.0694 12.6923C18.0694 13.3498 17.6078 13.75 16.8394 13.75H15.36V10H16.807C17.4831 10 17.8897 10.3586 17.8897 10.933V10.9381C17.8897 11.328 17.6128 11.6788 17.2585 11.7412V11.7853C17.745 11.8399 18.0694 12.1985 18.0694 12.6871V12.6923ZM15.9188 11.5956H16.5825C17.0764 11.5956 17.3334 11.4033 17.3334 11.0395V11.0343C17.3334 10.6809 17.0914 10.4756 16.6773 10.4756H15.9188V11.5956ZM16.7272 13.2744H15.9188V12.04H16.6947C17.2211 12.04 17.498 12.2479 17.498 12.6507V12.6559C17.498 13.0587 17.2311 13.2744 16.7272 13.2744Z",fill:"currentColor"},null,-1),_hoisted_3$1G=[_hoisted_2$1Q];function _sfc_render$1f(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1Z,_hoisted_3$1G)}const __unplugin_components_5$5=_export_sfc(_sfc_main$2j,[["render",_sfc_render$1f]]),_sfc_main$2i={},_hoisted_1$1Y={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1P=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.5 4V20H20.5V4H3.5ZM4 12.5H20V11.5H4V12.5ZM11.4511 9.23649L11.1107 10.25H10.5L11.854 6.5H12.4828L13.8368 10.25H13.2235L12.8857 9.23649H11.4511ZM11.6071 8.76871H12.7297L12.1892 7.15748H12.145L11.6071 8.76871ZM13.8222 16.3923C13.8222 17.0498 13.3415 17.45 12.5411 17.45H11V13.7H12.5073C13.2115 13.7 13.6351 14.0586 13.6351 14.633V14.6382C13.6351 15.028 13.3467 15.3788 12.9777 15.4412V15.4854C13.4844 15.5399 13.8222 15.8986 13.8222 16.3871V16.3923ZM11.5821 15.2956H12.2734C12.7879 15.2956 13.0556 15.1033 13.0556 14.7395V14.7343C13.0556 14.3809 12.8035 14.1756 12.3721 14.1756H11.5821V15.2956ZM12.4241 16.9744H11.5821V15.74H12.3903C12.9387 15.74 13.2271 15.9479 13.2271 16.3507V16.3559C13.2271 16.7587 12.9491 16.9744 12.4241 16.9744Z",fill:"currentColor"},null,-1),_hoisted_3$1F=[_hoisted_2$1P];function _sfc_render$1e(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1Y,_hoisted_3$1F)}const __unplugin_components_4$5=_export_sfc(_sfc_main$2i,[["render",_sfc_render$1e]]),_sfc_main$2h={},_hoisted_1$1X={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1O=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11 15H1V21H11V15ZM23 15H13V21H23V15Z",fill:"currentColor"},null,-1),_hoisted_3$1E=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1 3H8L11 6.2V13H1V3Z",fill:"currentColor"},null,-1),_hoisted_4$D=[_hoisted_2$1O,_hoisted_3$1E];function _sfc_render$1d(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1X,_hoisted_4$D)}const __unplugin_components_3$a=_export_sfc(_sfc_main$2h,[["render",_sfc_render$1d]]),_sfc_main$2g={},_hoisted_1$1W={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1N=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11 5H1V19H11V5ZM19 5H13V19H23V9.2L19 5Z",fill:"currentColor"},null,-1),_hoisted_3$1D=[_hoisted_2$1N];function _sfc_render$1c(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1W,_hoisted_3$1D)}const __unplugin_components_2$a=_export_sfc(_sfc_main$2g,[["render",_sfc_render$1c]]),_sfc_main$2f={},_hoisted_1$1V={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1M=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6 4H14L18 8.2V20H6V4Z",fill:"currentColor"},null,-1),_hoisted_3$1C=[_hoisted_2$1M];function _sfc_render$1b(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1V,_hoisted_3$1C)}const __unplugin_components_0$k=_export_sfc(_sfc_main$2f,[["render",_sfc_render$1b]]),RightPanelPageMode_vue_vue_type_style_index_0_lang="",_hoisted_1$1U={class:"sidebar-title"},_hoisted_2$1L={class:"mode-container"},_hoisted_3$1B={class:"mode-item"},_hoisted_4$C={class:"mode-tabs"},_hoisted_5$i={class:"mode-item"},_hoisted_6$g={class:"mode-tabs"},_hoisted_7$a={class:"mode-item"},_hoisted_8$a={class:"mode-tabs"},_sfc_main$2e={__name:"RightPanelPageMode",setup(e){const n=useViewerStore(),r=computed(()=>n.isElementOpen("pageModePanel")),o=computed(()=>n.getScrollMode),s=computed(()=>n.getPageMode),u=computed(()=>n.getThemeMode),d=(m,_)=>{n.setScrollMode(m),core.switchScrollMode(_)},f=m=>{core.switchSpreadMode(m),n.setPageMode(m)},v=m=>{m!==u.value&&n.setThemeMode(m)};return(m,_)=>{const g=__unplugin_components_0$k,y=_sfc_main$2C,w=__unplugin_components_2$a,x=__unplugin_components_3$a,k=__unplugin_components_4$5,S=__unplugin_components_5$5,E=__unplugin_components_0$l,T=__unplugin_components_2$b;return openBlock(),createElementBlock("div",{class:normalizeClass(["right-panel-page",{closed:!unref(r)}])},[createBaseVNode("div",_hoisted_1$1U,toDisplayString$1(m.$t("header.viewSetting")),1),createBaseVNode("div",_hoisted_2$1L,[createBaseVNode("div",_hoisted_3$1B,[createBaseVNode("h2",null,toDisplayString$1(m.$t("pageModePanel.displayMode")),1),createBaseVNode("div",_hoisted_4$C,[createVNode(y,{class:normalizeClass({active:unref(s)===0}),onClick:_[0]||(_[0]=M=>f(0)),title:m.$t("pageModePanel.singlePage")},{default:withCtx(()=>[createVNode(g)]),_:1},8,["class","title"]),createVNode(y,{class:normalizeClass({active:unref(s)===1}),onClick:_[1]||(_[1]=M=>f(1)),title:m.$t("pageModePanel.twoPages")},{default:withCtx(()=>[createVNode(w)]),_:1},8,["class","title"]),createVNode(y,{class:normalizeClass({active:unref(s)===2}),onClick:_[2]||(_[2]=M=>f(2)),title:m.$t("pageModePanel.coverMode")},{default:withCtx(()=>[createVNode(x)]),_:1},8,["class","title"])])]),createBaseVNode("div",_hoisted_5$i,[createBaseVNode("h2",null,toDisplayString$1(m.$t("pageModePanel.splitView")),1),createBaseVNode("div",_hoisted_6$g,[createVNode(y,{class:normalizeClass({active:unref(o)==="Vertical"}),onClick:_[3]||(_[3]=M=>d("Vertical",0)),title:m.$t("pageModePanel.vertical")},{default:withCtx(()=>[createVNode(k)]),_:1},8,["class","title"]),createVNode(y,{class:normalizeClass({active:unref(o)==="Horizontal"}),onClick:_[4]||(_[4]=M=>d("Horizontal",1)),title:m.$t("pageModePanel.horizontal")},{default:withCtx(()=>[createVNode(S)]),_:1},8,["class","title"])])]),createBaseVNode("div",_hoisted_7$a,[createBaseVNode("h2",null,toDisplayString$1(m.$t("pageModePanel.themes")),1),createBaseVNode("div",_hoisted_8$a,[createVNode(y,{onClick:_[5]||(_[5]=M=>v("Light")),class:normalizeClass({active:unref(u)==="Light"}),title:m.$t("header.light")},{default:withCtx(()=>[createVNode(E)]),_:1},8,["class","title"]),createVNode(y,{onClick:_[6]||(_[6]=M=>v("Dark")),class:normalizeClass({active:unref(u)==="Dark"}),title:m.$t("header.dark")},{default:withCtx(()=>[createVNode(T)]),_:1},8,["class","title"])])])])],2)}}},_sfc_main$2d={},_hoisted_1$1T={width:"10",height:"11",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1K=createBaseVNode("path",{d:"M5 0.0517578C5.2793 0.0517578 5.47803 0.245117 5.47803 0.524414V7.59814L5.44043 8.74219L7.04639 6.98047L8.271 5.77734C8.35693 5.69141 8.48047 5.64844 8.60938 5.64844C8.87793 5.64844 9.07129 5.85254 9.07129 6.11572C9.07129 6.24463 9.02832 6.35742 8.92627 6.46484L5.35986 10.0366C5.25781 10.144 5.13428 10.1978 5 10.1978C4.86572 10.1978 4.74219 10.144 4.64014 10.0366L1.0791 6.46484C0.977051 6.35742 0.928711 6.24463 0.928711 6.11572C0.928711 5.85254 1.12207 5.64844 1.39062 5.64844C1.51953 5.64844 1.64844 5.69141 1.729 5.77734L2.95361 6.98047L4.56494 8.74756L4.52197 7.59814V0.524414C4.52197 0.245117 4.7207 0.0517578 5 0.0517578Z",fill:"currentColor"},null,-1),_hoisted_3$1A=[_hoisted_2$1K];function _sfc_render$1a(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1T,_hoisted_3$1A)}const __unplugin_components_5$4=_export_sfc(_sfc_main$2d,[["render",_sfc_render$1a]]),_sfc_main$2c={},_hoisted_1$1S={width:"10",height:"11",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1J=createBaseVNode("path",{d:"M5 10.1978C4.7207 10.1978 4.52197 10.0044 4.52197 9.7251V2.65137L4.56494 1.50195L2.95361 3.26904L1.729 4.47217C1.64844 4.55811 1.51953 4.60107 1.39062 4.60107C1.12207 4.60107 0.928711 4.39697 0.928711 4.13379C0.928711 4.00488 0.977051 3.89209 1.0791 3.78467L4.64014 0.212891C4.74219 0.105469 4.86572 0.0517578 5 0.0517578C5.13428 0.0517578 5.25781 0.105469 5.35986 0.212891L8.92627 3.78467C9.02832 3.89209 9.07129 4.00488 9.07129 4.13379C9.07129 4.39697 8.87793 4.60107 8.60938 4.60107C8.48047 4.60107 8.35693 4.55811 8.271 4.47217L7.04639 3.26904L5.44043 1.50732L5.47803 2.65137V9.7251C5.47803 10.0044 5.2793 10.1978 5 10.1978Z",fill:"currentColor"},null,-1),_hoisted_3$1z=[_hoisted_2$1J];function _sfc_render$19(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1S,_hoisted_3$1z)}const __unplugin_components_4$4=_export_sfc(_sfc_main$2c,[["render",_sfc_render$19]]),_sfc_main$2b={},_hoisted_1$1R={width:"10",height:"2",viewBox:"0 0 10 2",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1I=createBaseVNode("path",{d:"M1.04688 1.61084C0.789062 1.61084 0.568848 1.39062 0.568848 1.12744C0.568848 0.864258 0.789062 0.649414 1.04688 0.649414H8.95312C9.21094 0.649414 9.43115 0.864258 9.43115 1.12744C9.43115 1.39062 9.21094 1.61084 8.95312 1.61084H1.04688Z",fill:"currentColor"},null,-1),_hoisted_3$1y=[_hoisted_2$1I];function _sfc_render$18(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1R,_hoisted_3$1y)}const __unplugin_components_3$9=_export_sfc(_sfc_main$2b,[["render",_sfc_render$18]]),_sfc_main$2a={},_hoisted_1$1Q={width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1H=createBaseVNode("path",{d:"M5 9.6499C4.73682 9.6499 4.52197 9.44043 4.52197 9.18262V5.61084H1.04688C0.789062 5.61084 0.568848 5.39062 0.568848 5.12744C0.568848 4.86426 0.789062 4.64941 1.04688 4.64941H4.52197V1.07227C4.52197 0.814453 4.73682 0.60498 5 0.60498C5.26318 0.60498 5.4834 0.814453 5.4834 1.07227V4.64941H8.95312C9.21094 4.64941 9.43115 4.86426 9.43115 5.12744C9.43115 5.39062 9.21094 5.61084 8.95312 5.61084H5.4834V9.18262C5.4834 9.44043 5.26318 9.6499 5 9.6499Z",fill:"currentColor"},null,-1),_hoisted_3$1x=[_hoisted_2$1H];function _sfc_render$17(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1Q,_hoisted_3$1x)}const __unplugin_components_2$9=_export_sfc(_sfc_main$2a,[["render",_sfc_render$17]]),_sfc_main$29={},_hoisted_1$1P={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1G=createBaseVNode("rect",{width:"14",height:"14",rx:"1",fill:"#2D77FA"},null,-1),_hoisted_3$1w=createBaseVNode("path",{d:"M10.2784 5.27848L5.84653 9.71032L4.20261 8.06642",stroke:"white","stroke-width":"1.5","stroke-linecap":"square"},null,-1),_hoisted_4$B=[_hoisted_2$1G,_hoisted_3$1w];function _sfc_render$16(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1P,_hoisted_4$B)}const __unplugin_components_0$j=_export_sfc(_sfc_main$29,[["render",_sfc_render$16]]),_hoisted_1$1O=createBaseVNode("div",{class:"divider"},null,-1),_hoisted_2$1F=createBaseVNode("div",{class:"divider"},null,-1),_sfc_main$28={__name:"RightPanelTabs",props:["activePanelTab"],setup(e){const n=useViewerStore(),r=(o,s)=>{n.setActiveElementTab("rightPanelTab",o)};return(o,s)=>{const u=_sfc_main$2C;return openBlock(),createElementBlock(Fragment,null,[createVNode(u,{className:e.activePanelTab==="GENERAL"?"active":"",dataElement:"GENERAL",isActive:e.activePanelTab==="GENERAL",onClick:s[0]||(s[0]=d=>r("GENERAL"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(o.$t("rightPanel.general")),1)]),_:1},8,["className","isActive"]),_hoisted_1$1O,createVNode(u,{className:e.activePanelTab==="APPEARANCE"?"active":"",dataElement:"APPEARANCE",isActive:e.activePanelTab==="APPEARANCE",onClick:s[1]||(s[1]=d=>r("APPEARANCE"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(o.$t("rightPanel.appearance")),1)]),_:1},8,["className","isActive"]),_hoisted_2$1F,createVNode(u,{className:e.activePanelTab==="PREFERENCE"?"active":"",dataElement:"PREFERENCE",isActive:e.activePanelTab==="PREFERENCE",onClick:s[2]||(s[2]=d=>r("PREFERENCE"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(o.$t("rightPanel.preferences")),1)]),_:1},8,["className","isActive"])],64)}}},RightPanel_vue_vue_type_style_index_0_lang="",_hoisted_1$1N={class:"sidebar-title"},_hoisted_2$1E={class:"sidebar-tabs-header"},_hoisted_3$1v={class:"sidebar-content"},_hoisted_4$A={class:"content-block"},_hoisted_5$h={key:0,class:"error-text"},_hoisted_6$f={key:0,class:"content-block"},_hoisted_7$9={class:"content-block"},_hoisted_8$9={value:"0"},_hoisted_9$7={value:"1"},_hoisted_10$7={class:"content-block"},_hoisted_11$7={class:"wider"},_hoisted_12$6={class:"colors-container"},_hoisted_13$6={class:"cell-container"},_hoisted_14$6=createBaseVNode("span",{class:"cell light-red"},null,-1),_hoisted_15$6=[_hoisted_14$6],_hoisted_16$5={class:"cell-container"},_hoisted_17$4=createBaseVNode("span",{class:"cell white"},null,-1),_hoisted_18$4=[_hoisted_17$4],_hoisted_19$4={class:"cell-container"},_hoisted_20$4=createBaseVNode("span",{class:"cell light-yellow"},null,-1),_hoisted_21$4=[_hoisted_20$4],_hoisted_22$4={class:"cell-container"},_hoisted_23$4=createBaseVNode("span",{class:"cell light-blue"},null,-1),_hoisted_24$4=[_hoisted_23$4],_hoisted_25$3={class:"content-block"},_hoisted_26$3={class:"wider"},_hoisted_27$2={class:"colors-container"},_hoisted_28$2={class:"cell-container"},_hoisted_29$1=createBaseVNode("span",{class:"cell red"},null,-1),_hoisted_30$1=[_hoisted_29$1],_hoisted_31$1={class:"cell-container"},_hoisted_32$1=createBaseVNode("span",{class:"cell black"},null,-1),_hoisted_33$1=[_hoisted_32$1],_hoisted_34$1={class:"cell-container"},_hoisted_35$1=createBaseVNode("span",{class:"cell blue"},null,-1),_hoisted_36$1=[_hoisted_35$1],_hoisted_37$1={class:"content-block"},_hoisted_38$1=createBaseVNode("option",{value:"Helvetica"},"Helvetica",-1),_hoisted_39$1=createBaseVNode("option",{value:"Courier"},"Courier",-1),_hoisted_40$1=createBaseVNode("option",{value:"Times"},"Times-Roman",-1),_hoisted_41$1=[_hoisted_38$1,_hoisted_39$1,_hoisted_40$1],_hoisted_42$1={class:"content-block"},_hoisted_43$1={class:"text-style"},_hoisted_44$1={value:"normal"},_hoisted_45$1={value:"bold"},_hoisted_46$1={value:"italic"},_hoisted_47$1={value:"boldItalic"},_hoisted_48$1=createStaticVNode('<option value="12">12</option><option value="14">14</option><option value="16">16</option><option value="20">20</option><option value="24">24</option><option value="28">28</option>',6),_hoisted_54$1=[_hoisted_48$1],_hoisted_55$1={class:"content-block"},_hoisted_56$1={value:"left"},_hoisted_57$1={value:"center"},_hoisted_58$1={value:"right"},_hoisted_59$1={class:"content-block"},_hoisted_60$1={class:"content-block"},_hoisted_61$1={class:"content-block"},_hoisted_62$1={value:"0"},_hoisted_63$1={value:"1"},_hoisted_64$1={value:"2"},_hoisted_65$1={value:"3"},_hoisted_66$1={value:"4"},_hoisted_67={value:"5"},_hoisted_68={class:"content-block"},_hoisted_69={class:"content-block"},_hoisted_70={value:"1"},_hoisted_71={value:"6"},_hoisted_72={class:"content-block"},_hoisted_73=["placeholder"],_hoisted_74={class:"content-block"},_hoisted_75={class:"content-block"},_hoisted_76={class:"button-content"},_hoisted_77={class:"content-block"},_hoisted_78={class:"button-content item-list"},_hoisted_79=["onClick"],_hoisted_80={class:"buttons"},_sfc_main$27={__name:"RightPanel",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=getCurrentInstance().appContext.app.config.globalProperties,s=computed(()=>{if(v.value==="form"){if(w.value==="textfield")return o.$t("header.textField");if(w.value==="checkbox")return o.$t("header.checkbox");if(w.value==="radiobutton")return o.$t("header.radioButton");if(w.value==="pushbutton")return o.$t("header.button");if(w.value==="listbox")return o.$t("header.listBox");if(w.value==="combobox")return o.$t("header.comboButton")}}),u=computed(()=>n.getActiveElementTab("rightPanelTab")),d=computed(()=>n.isElementOpen("rightPanel"));computed(()=>r.getActiveTool);const f=computed(()=>r.getTotalPages),v=computed(()=>n.getToolMode);let m=reactive(r.propertyPanel),_=m.destPage,g=m.url;ref("Helvetica");const y=ref(!1),w=ref(null);let x=ref(null),k=ref(null),S=ref([]),E=ref(!0);const T=Q=>{if(Q==="fieldName"&&r.setPropertyPanel({fieldName:m.fieldName}),Q==="title"&&r.setPropertyPanel({title:m.title}),Q==="destPage"){const ve=m.destPage;ve!==""&&ve!=_&&(r.setPropertyPanel({actionType:1,destPage:ve.toString()}),_=ve)}else if(Q==="url"){let ve=m.url;ve!==""?(!ve.startsWith("http://")&&!ve.startsWith("https://")&&(ve="https://"+ve),r.setPropertyPanel({url:ve,actionType:6}),g=ve):m.url=g}};watch(()=>d.value,(Q,ve)=>{Q&&n.closeElement("pageModePanel")}),watch(()=>m.isHidden,(Q,ve)=>{r.setPropertyPanel({isHidden:Q})}),watch(()=>m.backgroundColor,(Q,ve)=>{r.setPropertyPanel({backgroundColor:Q})}),watch(()=>m.color,(Q,ve)=>{r.setPropertyPanel({color:Q})}),watch(()=>m.fontName,(Q,ve)=>{r.setPropertyPanel({fontName:Q})}),watch(()=>m.fontStyle,(Q,ve)=>{r.setPropertyPanel({fontStyle:Q})}),watch(()=>m.fontSize,(Q,ve)=>{r.setPropertyPanel({fontSize:Q})}),watch(()=>m.textAlignment,(Q,ve)=>{r.setPropertyPanel({textAlignment:Q})}),watch(()=>m.contents,(Q,ve)=>{Q===""&&(Q=" "),r.setPropertyPanel({contents:Q})}),watch(()=>m.isMultiLine,(Q,ve)=>{r.setPropertyPanel({isMultiLine:Q})}),watch(()=>m.projectList,(Q,ve)=>{r.setPropertyPanel({projectList:Q})}),watch(()=>m.checkStyle,(Q,ve)=>{r.setPropertyPanel({checkStyle:parseInt(Q)})}),watch(()=>m.isChecked,(Q,ve)=>{r.setPropertyPanel({isChecked:Q})}),watch(()=>m.actionType,(Q,ve)=>{(Q==="1"&&m.destPage!==""||Q==="2"&&m.url!=="")&&r.setPropertyPanel({actionType:Q})}),watch(()=>m.destPage,(Q,ve)=>{const Se=/^\d+$/;Q!==""&&(Q>f.value||Q<=0||!Se.test(Q))&&(m.destPage=ve)});const M=Q=>{if(x.value="",Q)w.value=Q.type.replace("-",""),(w.value==="listbox"||w.value==="combobox"||w.value==="pushbutton")&&n.setActiveElementTab("rightPanelTab","PREFERENCE");else{w.value=null;return}for(const ve in Q)for(const Se in m)ve===Se&&(Se==="items"?S.value=Array.from(Q[ve]):m[Se]=Q[ve])};core.addEvent("propertyChange",M);const I=(Q,ve)=>{m[Q]=ve},F=()=>{m.isChecked=!m.isChecked},O=Q=>{y.value=Q};core.addEvent("judgeRadioBtnIsOne",O);const N=Q=>{E.value=Q};core.addEvent("judgeCheckboxIsOne",N);const D=(Q,ve)=>{k.value=Q,x.value=ve},X=()=>{for(var Q=0;Q<S.value.length;Q++)if(S.value[Q]===x.value)return;if(x.value)S.value.push({Value:x.value,String:x.value});else return;k.value=null,r.setPropertyPanel({item:x.value}),x.value=""},U=()=>{for(var Q=0;Q<S.value.length;Q++)S.value[Q]===S.value[k.value]&&(S.value.splice(Q,1),r.setPropertyPanel({deleteItemIndex:Q,selected:0}),x.value="",k.value=null)},Z=()=>{if(!!k.value){for(var Q=0;Q<S.value.length;Q++)if(S.value[Q]===S.value[k.value]){S.value.splice(Q-1,2,S.value[Q],S.value[Q-1]),r.setPropertyPanel({moveOption:{fromIndex:Q,toIndex:Q-1}}),k.value-=1;break}}},j=()=>{if(k.value!==S.value.length-1){for(var Q=0;Q<S.value.length;Q++)if(S.value[Q]===S.value[k.value]&&Q<S.value.length-1){S.value.splice(Q,2,S.value[Q+1],S.value[Q]),r.setPropertyPanel({moveOption:{fromIndex:Q,toIndex:Q+1}}),k.value+=1;break}}};return(Q,ve)=>{const Se=_sfc_main$28,we=__unplugin_components_0$j,oe=__unplugin_components_2$9,ne=__unplugin_components_3$9,q=__unplugin_components_4$4,H=__unplugin_components_5$4;return openBlock(),createElementBlock("div",{class:normalizeClass(["right-panel",{closed:!unref(d)}])},[createBaseVNode("div",_hoisted_1$1N,toDisplayString$1(unref(s)),1),createBaseVNode("div",_hoisted_2$1E,[createVNode(Se,{activePanelTab:unref(u)},null,8,["activePanelTab"])]),createBaseVNode("div",_hoisted_3$1v,[withDirectives(createBaseVNode("div",{class:"radio-top-tip"},toDisplayString$1(Q.$t("rightPanel.radioBtnTip1")),513),[[vShow,y.value&&w.value==="radiobutton"]]),createBaseVNode("div",{class:normalizeClass(["general-container",{hidden:unref(u)!=="GENERAL"}])},[createBaseVNode("div",_hoisted_4$A,[createBaseVNode("h2",null,toDisplayString$1(Q.$t("rightPanel.name")),1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":ve[0]||(ve[0]=Y=>unref(m).fieldName=Y),onBlur:ve[1]||(ve[1]=Y=>T("fieldName"))},null,544),[[vModelText,unref(m).fieldName]]),unref(E)?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_5$h,toDisplayString$1(Q.$t("rightPanel.differentNameError")),1))]),w.value==="pushbutton"&&unref(v)==="form"?(openBlock(),createElementBlock("div",_hoisted_6$f,[createBaseVNode("h2",null,toDisplayString$1(Q.$t("rightPanel.buttonText")),1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":ve[2]||(ve[2]=Y=>unref(m).title=Y),onBlur:ve[3]||(ve[3]=Y=>T("title"))},null,544),[[vModelText,unref(m).title]])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_7$9,[createBaseVNode("h2",null,toDisplayString$1(Q.$t("rightPanel.formField")),1),withDirectives(createBaseVNode("select",{name:"field",id:"field","onUpdate:modelValue":ve[4]||(ve[4]=Y=>unref(m).isHidden=Y)},[createBaseVNode("option",_hoisted_8$9,toDisplayString$1(Q.$t("rightPanel.visible")),1),createBaseVNode("option",_hoisted_9$7,toDisplayString$1(Q.$t("rightPanel.hidden")),1)],512),[[vModelSelect,unref(m).isHidden]])])],2),createBaseVNode("div",{class:normalizeClass(["appearance-container",{hidden:unref(u)!=="APPEARANCE"}])},[createBaseVNode("div",_hoisted_10$7,[createBaseVNode("h2",_hoisted_11$7,toDisplayString$1(Q.$t("rightPanel.backgroundColor")),1),createBaseVNode("div",_hoisted_12$6,[createBaseVNode("span",_hoisted_13$6,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(m).backgroundColor==="#FBBDBF"}]),onClick:ve[5]||(ve[5]=Y=>I("backgroundColor","#FBBDBF"))},_hoisted_15$6,2)]),createBaseVNode("span",_hoisted_16$5,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(m).backgroundColor==="#FFFFFF"}]),onClick:ve[6]||(ve[6]=Y=>I("backgroundColor","#FFFFFF"))},_hoisted_18$4,2)]),createBaseVNode("span",_hoisted_19$4,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(m).backgroundColor==="#FDF4B2"||unref(m).backgroundColor==="#FDF4B1"}]),onClick:ve[7]||(ve[7]=Y=>I("backgroundColor","#FDF4B2"))},_hoisted_21$4,2)]),createBaseVNode("span",_hoisted_22$4,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(m).backgroundColor==="#DDE9FF"}]),onClick:ve[8]||(ve[8]=Y=>I("backgroundColor","#DDE9FF"))},_hoisted_24$4,2)])])]),(w.value==="textfield"||w.value==="pushbutton"||w.value==="combobox"||w.value==="listbox")&&unref(v)==="form"?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",_hoisted_25$3,[createBaseVNode("h2",_hoisted_26$3,toDisplayString$1(Q.$t("font")),1),createBaseVNode("div",_hoisted_27$2,[createBaseVNode("span",_hoisted_28$2,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(m).color==="#FF0000"}]),onClick:ve[9]||(ve[9]=Y=>I("color","#FF0000"))},_hoisted_30$1,2)]),createBaseVNode("span",_hoisted_31$1,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(m).color==="#000000"}]),onClick:ve[10]||(ve[10]=Y=>I("color","#000000"))},_hoisted_33$1,2)]),createBaseVNode("span",_hoisted_34$1,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(m).color==="#2D77FA"||unref(m).color==="#2D77F9"}]),onClick:ve[11]||(ve[11]=Y=>I("color","#2D77FA"))},_hoisted_36$1,2)])])]),createBaseVNode("div",_hoisted_37$1,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":ve[12]||(ve[12]=Y=>unref(m).fontName=Y)},_hoisted_41$1,512),[[vModelSelect,unref(m).fontName]])]),createBaseVNode("div",_hoisted_42$1,[createBaseVNode("div",_hoisted_43$1,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":ve[13]||(ve[13]=Y=>unref(m).fontStyle=Y),class:"font-family-select"},[createBaseVNode("option",_hoisted_44$1,toDisplayString$1(Q.$t("regular")),1),createBaseVNode("option",_hoisted_45$1,toDisplayString$1(Q.$t("bold")),1),createBaseVNode("option",_hoisted_46$1,toDisplayString$1(Q.$t("oblique")),1),createBaseVNode("option",_hoisted_47$1,toDisplayString$1(Q.$t("boldOblique")),1)],512),[[vModelSelect,unref(m).fontStyle]]),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":ve[14]||(ve[14]=Y=>unref(m).fontSize=Y),class:"font-size-select"},_hoisted_54$1,512),[[vModelSelect,unref(m).fontSize]])])])],64)):createCommentVNode("",!0)],2),createBaseVNode("div",{class:normalizeClass(["preferences-container",{hidden:unref(u)!=="PREFERENCE"}])},[w.value==="textfield"&&unref(v)==="form"?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",_hoisted_55$1,[createBaseVNode("h2",null,toDisplayString$1(Q.$t("rightPanel.alignment")),1),withDirectives(createBaseVNode("select",{name:"alignment",id:"alignment","onUpdate:modelValue":ve[15]||(ve[15]=Y=>unref(m).textAlignment=Y)},[createBaseVNode("option",_hoisted_56$1,toDisplayString$1(Q.$t("rightPanel.left")),1),createBaseVNode("option",_hoisted_57$1,toDisplayString$1(Q.$t("rightPanel.center")),1),createBaseVNode("option",_hoisted_58$1,toDisplayString$1(Q.$t("rightPanel.right")),1)],512),[[vModelSelect,unref(m).textAlignment]])]),createBaseVNode("div",_hoisted_59$1,[createBaseVNode("h2",null,toDisplayString$1(Q.$t("rightPanel.defaultValue")),1),withDirectives(createBaseVNode("textarea",{name:"default-value",id:"default-value",rows:"3","onUpdate:modelValue":ve[16]||(ve[16]=Y=>unref(m).contents=Y)},null,512),[[vModelText,unref(m).contents]])]),createBaseVNode("div",_hoisted_60$1,[createBaseVNode("div",{class:"check-box",onClick:ve[17]||(ve[17]=Y=>unref(m).isMultiLine=!unref(m).isMultiLine)},[createBaseVNode("div",{class:normalizeClass(["check",{active:unref(m).isMultiLine}])},[withDirectives(createVNode(we,null,null,512),[[vShow,unref(m).isMultiLine]])],2),createBaseVNode("span",null,toDisplayString$1(Q.$t("rightPanel.multiLine")),1)])])],64)):createCommentVNode("",!0),(w.value==="checkbox"||w.value==="radiobutton")&&unref(v)==="form"?(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("div",_hoisted_61$1,[createBaseVNode("h2",null,toDisplayString$1(Q.$t("rightPanel.buttonStyle")),1),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":ve[18]||(ve[18]=Y=>unref(m).checkStyle=Y)},[createBaseVNode("option",_hoisted_62$1,toDisplayString$1(Q.$t("rightPanel.check")),1),createBaseVNode("option",_hoisted_63$1,toDisplayString$1(Q.$t("rightPanel.circle")),1),createBaseVNode("option",_hoisted_64$1,toDisplayString$1(Q.$t("rightPanel.cross")),1),createBaseVNode("option",_hoisted_65$1,toDisplayString$1(Q.$t("rightPanel.diamond")),1),createBaseVNode("option",_hoisted_66$1,toDisplayString$1(Q.$t("rightPanel.square")),1),createBaseVNode("option",_hoisted_67,toDisplayString$1(Q.$t("rightPanel.star")),1)],512),[[vModelSelect,unref(m).checkStyle]])]),createBaseVNode("div",_hoisted_68,[createBaseVNode("div",{class:"check-box",onClick:F},[createBaseVNode("div",{class:normalizeClass(["check",{active:unref(m).isChecked}])},[withDirectives(createVNode(we,null,null,512),[[vShow,unref(m).isChecked]])],2),createBaseVNode("span",null,toDisplayString$1(Q.$t("rightPanel.defaultChecked")),1)])])],64)):createCommentVNode("",!0),w.value==="pushbutton"&&unref(v)==="form"?(openBlock(),createElementBlock(Fragment,{key:2},[createBaseVNode("div",_hoisted_69,[createBaseVNode("h2",null,toDisplayString$1(Q.$t("rightPanel.selectAction")),1),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":ve[19]||(ve[19]=Y=>unref(m).actionType=Y)},[withDirectives(createBaseVNode("option",{value:"0"},toDisplayString$1(Q.$t("rightPanel.none")),513),[[vShow,unref(m).actionType==0]]),createBaseVNode("option",_hoisted_70,toDisplayString$1(Q.$t("rightPanel.goPage")),1),createBaseVNode("option",_hoisted_71,toDisplayString$1(Q.$t("rightPanel.openLink")),1)],512),[[vModelSelect,unref(m).actionType]])]),withDirectives(createBaseVNode("div",_hoisted_72,[createBaseVNode("h2",null,toDisplayString$1(Q.$t("rightPanel.goPage")),1),withDirectives(createBaseVNode("input",{type:"text",pattern:"\\d*",placeholder:Q.$t("rightPanel.addPage"),"onUpdate:modelValue":ve[20]||(ve[20]=Y=>unref(m).destPage=Y),onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onBlur:ve[21]||(ve[21]=Y=>T("destPage"))},null,40,_hoisted_73),[[vModelText,unref(m).destPage]])],512),[[vShow,unref(m).actionType==1]]),withDirectives(createBaseVNode("div",_hoisted_74,[createBaseVNode("h2",null,toDisplayString$1(Q.$t("rightPanel.openLink")),1),withDirectives(createBaseVNode("input",{type:"text",placeholder:"https://","onUpdate:modelValue":ve[22]||(ve[22]=Y=>unref(m).url=Y),onBlur:ve[23]||(ve[23]=Y=>T("url"))},null,544),[[vModelText,unref(m).url]])],512),[[vShow,unref(m).actionType==6]])],64)):createCommentVNode("",!0),(w.value==="combobox"||w.value==="listbox")&&unref(v)==="form"?(openBlock(),createElementBlock(Fragment,{key:3},[createBaseVNode("div",_hoisted_75,[createBaseVNode("h2",null,toDisplayString$1(Q.$t("rightPanel.item")),1),createBaseVNode("div",_hoisted_76,[withDirectives(createBaseVNode("input",{type:"text",class:"item","onUpdate:modelValue":ve[24]||(ve[24]=Y=>isRef(x)?x.value=Y:x=Y)},null,512),[[vModelText,unref(x),void 0,{trim:!0}]]),createBaseVNode("div",{class:normalizeClass(["operate-button",{disabled:!unref(x)}]),onClick:X},[createVNode(oe)],2)])]),createBaseVNode("div",_hoisted_77,[createBaseVNode("h2",null,toDisplayString$1(Q.$t("rightPanel.itemList")),1),createBaseVNode("div",_hoisted_78,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(S),(Y,le)=>(openBlock(),createElementBlock("li",{key:le,class:normalizeClass({active:le===unref(k)}),onClick:Ce=>D(le,Y.Value)},toDisplayString$1(Y.Value),11,_hoisted_79))),128))]),createBaseVNode("div",_hoisted_80,[createBaseVNode("div",{class:normalizeClass(["operate-button",{disabled:!unref(k)&&unref(k)!==0}]),onClick:U},[createVNode(ne)],2),createBaseVNode("div",{class:normalizeClass(["operate-button",{disabled:unref(k)===0||!unref(k)}]),onClick:Z},[createVNode(q)],2),createBaseVNode("div",{class:normalizeClass(["operate-button",{disabled:unref(k)===unref(S).length-1||!unref(k)&&unref(k)!==0}]),onClick:j},[createVNode(H)],2)])])])],64)):createCommentVNode("",!0)],2),withDirectives(createBaseVNode("div",{class:"radio-bottom-tip"},toDisplayString$1(Q.$t("rightPanel.radioBtnTip2")),513),[[vShow,w.value==="radiobutton"]]),withDirectives(createBaseVNode("div",{class:"radio-bottom-tip"},toDisplayString$1(Q.$t("rightPanel.listBoxTip")),513),[[vShow,w.value==="combobox"]])])],2)}}},Dialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1M={key:0,class:"dialog"},_hoisted_2$1D={class:"dialog-container"},_hoisted_3$1u={key:0,class:"close"},_sfc_main$26={__name:"Dialog",props:["show","dialogName","close"],setup(e){const{show:n,dialogName:r,close:o}=e,s=useViewerStore(),u=()=>{s.closeElement(r)};return(d,f)=>{const v=__unplugin_components_11$1;return e.show?(openBlock(),createElementBlock("div",_hoisted_1$1M,[createBaseVNode("div",_hoisted_2$1D,[e.close?(openBlock(),createElementBlock("div",_hoisted_3$1u,[createVNode(v,{onClick:u})])):createCommentVNode("",!0),createBaseVNode("header",null,[renderSlot(d.$slots,"header")]),createBaseVNode("main",null,[renderSlot(d.$slots,"default")]),createBaseVNode("footer",null,[renderSlot(d.$slots,"footer")])])])):createCommentVNode("",!0)}}},MovePageSettingDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1L={key:0,class:"move-page-popup"},_hoisted_2$1C=["placeholder"],_sfc_main$25={__name:"MovePageSettingDialog",props:["totalPages","selectedPageList"],emits:["movePage"],setup(e,{emit:n}){const r=e,o=useViewerStore(),s="movePageSettingDialog",u=computed(()=>o.isElementOpen(s)),d=ref("");let f=!1;const v=computed(()=>{if(typeof d.value!="number")return!0;const k=r.selectedPageList;return!!(k.length===1&&(k[0]===d.value||k[0]===d.value-1)||k.length>1&&m(k)&&(k.includes(d.value)||k.includes(d.value-1)))}),m=k=>{k.sort(function(E,T){return E-T});for(var S=0;S<k.length-1;S++)if(k[S]+1!==k[S+1])return!1;return!0},_=()=>{o.closeElement(s),d.value=""},g=async()=>{n("movePage",d.value),_()},y=k=>{if(f)return;const S=k.target.valueAsNumber;isNaN(S)&&(k.target.value=""),S>r.totalPages&&(d.value=r.totalPages),S===0&&(k.target.value=S.toFixed(0))},w=()=>{f=!0},x=()=>{f=!1};return(k,S)=>{const E=_sfc_main$26;return unref(u)?(openBlock(),createElementBlock("div",_hoisted_1$1L,[createVNode(E,{show:unref(u),dialogName:s,close:!0},{header:withCtx(()=>[createBaseVNode("p",null,toDisplayString$1(k.$t("documentEditor.moveTo")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:unref(v)}]),onClick:g},toDisplayString$1(k.$t("ok")),3)]),default:withCtx(()=>[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":S[0]||(S[0]=T=>d.value=T),type:"number",pattern:"\\d*",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onInput:y,placeholder:k.$t("documentEditor.inputPageTip"),onCompositionstart:w,onCompositionend:x},null,40,_hoisted_2$1C),[[vModelText,d.value,void 0,{number:!0}]])]),_:1},8,["show"])])):createCommentVNode("",!0)}}},_sfc_main$24={},_hoisted_1$1K={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1B=createBaseVNode("g",{id:"ic_btn_radio_dis"},[createBaseVNode("circle",{id:"ic",cx:"7",cy:"7",r:"5.625",fill:"white",stroke:"#666666"})],-1),_hoisted_3$1t=[_hoisted_2$1B];function _sfc_render$15(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1K,_hoisted_3$1t)}const __unplugin_components_1$6=_export_sfc(_sfc_main$24,[["render",_sfc_render$15]]),_sfc_main$23={},_hoisted_1$1J={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1A=createBaseVNode("g",{id:"ic_btn_radio_sel"},[createBaseVNode("circle",{id:"Radio",cx:"7",cy:"7",r:"6.125",fill:"#1460F3"}),createBaseVNode("circle",{id:"Radio_2",cx:"7",cy:"7",r:"2.625",fill:"white"})],-1),_hoisted_3$1s=[_hoisted_2$1A];function _sfc_render$14(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1J,_hoisted_3$1s)}const __unplugin_components_0$i=_export_sfc(_sfc_main$23,[["render",_sfc_render$14]]),ExtractPageSettingDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1I={key:0,class:"extract-page-setting-popup"},_hoisted_2$1z={class:"title"},_hoisted_3$1r={class:"container"},_hoisted_4$z={class:"select-content"},_hoisted_5$g={key:0,class:"disabled-btn"},_hoisted_6$e={class:"addition"},_hoisted_7$8=["placeholder"],_hoisted_8$8={class:"check-content"},_sfc_main$22={__name:"ExtractPageSettingDialog",props:["selectedPageList","totalPages"],emits:["extractPage"],setup(e,{emit:n}){const r=e,o=useViewerStore(),s="extractPageSettingDialog",u=computed(()=>o.isElementOpen(s)),d=ref("custom"),f=ref(""),v=ref(""),m=ref(!1),_=ref(!1);let g="";watch(()=>u.value,(T,M)=>{if(T){const I=r.selectedPageList.map(function(F){return F+1}).join(",");g=k(I),f.value=v.value=g}});const y=()=>{o.closeElement(s),d.value="custom"},w=async()=>{const T={range:d.value==="custom"?f.value:d.value,separateFile:m.value,deleteAfter:d.value==="all"?!1:_.value};n("extractPage",T),y()},x=()=>{v.value=k(f.value),f.value=v.value},k=T=>{const M=r.totalPages,F=T.replace(/\s/g,"").match(/\d+-\d+|\d+|\d+/g);if(F){const O=F.flatMap(U=>{if(U.includes("-")){const[Z,j]=U.split("-"),Q=Math.min(Z,j),ve=Math.min(Math.max(Z,j),M);return Array.from({length:ve-Q+1},(Se,we)=>String(Number(Q)+we))}else return Math.min(Math.max(U,1),M)}).sort((U,Z)=>U-Z),N=[];let D=O[0],X=O[0];for(let U=1;U<O.length;U++){const Z=O[U],j=Number(X);Number(Z)-j>1&&(N.push(S(D,X)),D=Z),X=Z}return N.push(S(D,X)),N.join(", ")}return g},S=(T,M)=>T===M?T.toString():`${T}-${M}`,E=computed(()=>{if(d.value==="all"||r.totalPages===1&&d.value!=="even"||r.totalPages>1&&d.value==="custom"&&f.value==="1-"+r.totalPages)return!0});return(T,M)=>{const I=__unplugin_components_0$i,F=__unplugin_components_1$6,O=__unplugin_components_0$j,N=_sfc_main$26;return unref(u)?(openBlock(),createElementBlock("div",_hoisted_1$1I,[createVNode(N,{show:unref(u),dialogName:s,close:!1},{header:withCtx(()=>[createBaseVNode("p",null,toDisplayString$1(T.$t("documentEditor.extract")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:y},toDisplayString$1(T.$t("cancel")),1),createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:d.value==="pdf"&&(!T.inputFile||d.value==="custom"&&!v.value)}]),onClick:w},toDisplayString$1(T.$t("documentEditor.extract")),3)]),default:withCtx(()=>[createBaseVNode("p",_hoisted_2$1z,toDisplayString$1(T.$t("documentEditor.dialog.pageRange")),1),createBaseVNode("div",_hoisted_3$1r,[createBaseVNode("div",_hoisted_4$z,[createBaseVNode("div",{onClick:M[0]||(M[0]=D=>d.value="all"),class:"option"},[d.value==="all"?(openBlock(),createBlock(I,{key:0})):(openBlock(),createBlock(F,{key:1})),createTextVNode(toDisplayString$1(T.$t("documentEditor.dialog.allPages")),1)]),createBaseVNode("div",{onClick:M[1]||(M[1]=D=>d.value="odd"),class:"option"},[d.value==="odd"?(openBlock(),createBlock(I,{key:0})):(openBlock(),createBlock(F,{key:1})),createTextVNode(toDisplayString$1(T.$t("documentEditor.dialog.oddPage")),1)]),createBaseVNode("div",{onClick:M[2]||(M[2]=D=>d.value="even"),class:normalizeClass(["option",{disabled:e.totalPages===1}])},[e.totalPages===1?(openBlock(),createElementBlock("div",_hoisted_5$g)):d.value==="even"?(openBlock(),createBlock(I,{key:1})):(openBlock(),createBlock(F,{key:2})),createTextVNode(" "+toDisplayString$1(T.$t("documentEditor.dialog.evenPage")),1)],2),createBaseVNode("div",{onClick:M[4]||(M[4]=D=>d.value="custom"),class:"option custom-page"},[d.value==="custom"?(openBlock(),createBlock(I,{key:0})):(openBlock(),createBlock(F,{key:1})),createTextVNode(toDisplayString$1(T.$t("documentEditor.dialog.page"))+" ",1),createBaseVNode("div",_hoisted_6$e,[withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":M[3]||(M[3]=D=>f.value=D),placeholder:T.$t("documentEditor.dialog.pageTip"),onBlur:x},null,40,_hoisted_7$8),[[vModelText,f.value]]),createBaseVNode("span",null,"/ "+toDisplayString$1(e.totalPages),1)])])])]),createBaseVNode("div",_hoisted_8$8,[createBaseVNode("div",{class:"check-box",onClick:M[5]||(M[5]=D=>m.value=!m.value)},[createBaseVNode("div",{class:normalizeClass(["check",{active:m.value}])},[withDirectives(createVNode(O,null,null,512),[[vShow,m.value]])],2),createBaseVNode("span",null,toDisplayString$1(T.$t("documentEditor.eachPage")),1)]),createBaseVNode("div",{class:normalizeClass(["check-box",{disabled:unref(E)}]),onClick:M[6]||(M[6]=()=>{unref(E)||(_.value=!_.value)})},[createBaseVNode("div",{class:normalizeClass(["check",{active:_.value}])},[withDirectives(createVNode(O,null,null,512),[[vShow,_.value&&!unref(E)]])],2),createBaseVNode("span",null,toDisplayString$1(T.$t("documentEditor.deleteAfter")),1)],2)])]),_:1},8,["show"])])):createCommentVNode("",!0)}}},_sfc_main$21={},_hoisted_1$1H={width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1y=createBaseVNode("path",{d:"M20 36.6667C29.2047 36.6667 36.6667 29.2047 36.6667 20C36.6667 10.7952 29.2047 3.33333 20 3.33333C10.7952 3.33333 3.33333 10.7952 3.33333 20C3.33333 29.2047 10.7952 36.6667 20 36.6667Z",fill:"#FFC061"},null,-1),_hoisted_3$1q=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M21.6667 12.5C21.6667 11.5795 20.9205 10.8333 20 10.8333C19.0795 10.8333 18.3333 11.5795 18.3333 12.5L18.3333 22.5C18.3333 23.4205 19.0795 24.1667 20 24.1667C20.9205 24.1667 21.6667 23.4205 21.6667 22.5L21.6667 12.5ZM20.1667 29.3333C21.0871 29.3333 21.8333 28.5871 21.8333 27.6667C21.8333 26.7462 21.0871 26 20.1667 26C19.2462 26 18.5 26.7462 18.5 27.6667C18.5 28.5871 19.2462 29.3333 20.1667 29.3333Z",fill:"white"},null,-1),_hoisted_4$y=[_hoisted_2$1y,_hoisted_3$1q];function _sfc_render$13(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1H,_hoisted_4$y)}const __unplugin_components_1$5=_export_sfc(_sfc_main$21,[["render",_sfc_render$13]]),DeletePageDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1G={key:0,class:"delete-page-popup"},_sfc_main$20={__name:"DeletePageDialog",props:["selectedPageList"],emits:["deletePage"],setup(e,{emit:n}){const r=e,{locale:o}=useI18n(),s=useViewerStore(),u="deletePageDialog",d=computed(()=>s.isElementOpen(u)),f=computed(()=>r.selectedPageList.sort((_,g)=>_-g).map(_=>_+1).join(", ")),v=()=>{s.closeElement(u)},m=async()=>{n("deletePage"),v()};return(_,g)=>{const y=__unplugin_components_1$5,w=_sfc_main$26;return unref(d)?(openBlock(),createElementBlock("div",_hoisted_1$1G,[createVNode(w,{show:unref(d),dialogName:u,close:!1},{footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:v},toDisplayString$1(_.$t("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:m},toDisplayString$1(_.$t("documentEditor.delete")),1)]),default:withCtx(()=>[createVNode(y),createBaseVNode("p",null,toDisplayString$1(_.$t("documentEditor.deleteConfirmText"))+toDisplayString$1(unref(o)==="en"?` ${unref(f)}?`:""),1)]),_:1},8,["show"])])):createCommentVNode("",!0)}}},_sfc_main$1$={},_hoisted_1$1F={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1x=createBaseVNode("path",{d:"M6.82225 3.96144L6.99439 4.05909H7.19231H11.75V13.25H1.25V2.75H4.6867L6.82225 3.96144Z",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$1p=createBaseVNode("path",{d:"M1.55867 13.25L3.84383 6.75H14.4413L12.1562 13.25H1.55867Z",fill:"transparent",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_4$x=[_hoisted_2$1x,_hoisted_3$1p];function _sfc_render$12(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1F,_hoisted_4$x)}const __unplugin_components_3$8=_export_sfc(_sfc_main$1$,[["render",_sfc_render$12]]),_sfc_main$1_={},_hoisted_1$1E={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1w=createBaseVNode("g",{id:"ic_btn_arrow_down"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.0596 5.90869L11.9398 6.72429L8.24969 10.7068L4.55957 6.72429L5.4398 5.90869L8.24969 8.94084L11.0596 5.90869Z",fill:"#757780"})],-1),_hoisted_3$1o=[_hoisted_2$1w];function _sfc_render$11(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1E,_hoisted_3$1o)}const __unplugin_components_2$8=_export_sfc(_sfc_main$1_,[["render",_sfc_render$11]]),InsertPageSettingDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1D={key:0,class:"add-page-setting-popup"},_hoisted_2$1v={class:"title"},_hoisted_3$1n={class:"container"},_hoisted_4$w={class:"select-content"},_hoisted_5$f={key:0,class:"addition"},_hoisted_6$d=createBaseVNode("option",{value:"A3"},"A3",-1),_hoisted_7$7=createBaseVNode("option",{value:"A4"},"A4",-1),_hoisted_8$7=createBaseVNode("option",{value:"A5"},"A5",-1),_hoisted_9$6=[_hoisted_6$d,_hoisted_7$7,_hoisted_8$7],_hoisted_10$6={key:1,class:"addition"},_hoisted_11$6={class:"file-input-underbox"},_hoisted_12$5={key:2,class:"addition from-pdf"},_hoisted_13$5={class:"addition"},_hoisted_14$5={value:"all"},_hoisted_15$5={value:"odd"},_hoisted_16$4={value:"even"},_hoisted_17$3={value:"custom"},_hoisted_18$3=["placeholder"],_hoisted_19$3={class:"title"},_hoisted_20$3={class:"container"},_hoisted_21$3={class:"select-content"},_hoisted_22$3={class:"left"},_hoisted_23$3={key:0,class:"right"},_hoisted_24$3={class:"addition"},_hoisted_25$2=["max"],_hoisted_26$2={class:"addition"},_hoisted_27$1={value:0},_hoisted_28$1={value:1},_sfc_main$1Z={__name:"InsertPageSettingDialog",props:["selectedPageList","totalPages"],emits:["insertPage"],setup(e,{emit:n}){const r=e,o=useViewerStore(),s="insertPageSettingDialog",u=computed(()=>o.isElementOpen(s)),d=ref("blank"),f=ref("A4"),v=ref(null),m=ref("all"),_=ref(""),g=ref(""),y=ref("first"),w=ref(1),x=ref(1),k=ref("");watch(()=>u.value,(D,X)=>{D&&(r.selectedPageList.length>0&&(y.value="custom"),w.value=r.selectedPageList[0]+1)});const S=()=>{o.closeElement(s),d.value="blank",f.value="A3",v.value=null,m.value="all",_.value="",g.value="",y.value="first",x.value=1,k.value=""},E=async()=>{const D={type:d.value==="pdf"?"pdf":"blank"};if(d.value==="custom"){const X={A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210}};D.size={width:X[f.value].width/25.4*72,height:X[f.value].height/25.4*72}}d.value==="pdf"&&v.value&&(D.file=v.value,D.range=m.value==="custom"?_.value:m.value,D.password=k.value),y.value==="custom"?(D.place=w.value-1+x.value,D.targetPlace=x.value):y.value==="last"?D.place=r.totalPages:D.place=0,n("insertPage",D),S()},T=async D=>{if(!D.target.files[0])return;let X=URL.createObjectURL(D.target.files[0]);const U=await core.checkPassword(X,!0);if(U===!1){D.target.value="";return}v.value=D.target.files[0],k.value=U},M=D=>{const X=D.target.valueAsNumber;X>r.totalPages?w.value=r.totalPages:X<1&&(w.value=1)},I=()=>{w.value||(w.value=1)},F=()=>{g.value=O(_.value),_.value=g.value},O=D=>{const U=D.replace(/\s/g,"").match(/\d+-\d+|\d+|\d+/g);if(U){const Z=U.flatMap(Se=>{if(Se.includes("-")){const[we,oe]=Se.split("-"),ne=Math.max(1,Math.min(we,oe)),q=Math.max(1,we,oe);return Array.from({length:q-ne+1},(H,Y)=>String(Number(ne)+Y))}else return Math.max(1,Se)}).sort((Se,we)=>Se-we),j=[];let Q=Z[0],ve=Z[0];for(let Se=1;Se<Z.length;Se++){const we=Z[Se],oe=Number(ve);Number(we)-oe>1&&(j.push(N(Q,ve)),Q=we),ve=we}return j.push(N(Q,ve)),j.join(", ")}return"1"},N=(D,X)=>D===X?D.toString():`${D}-${X}`;return(D,X)=>{const U=__unplugin_components_0$i,Z=__unplugin_components_1$6,j=__unplugin_components_2$8,Q=__unplugin_components_3$8,ve=_sfc_main$26;return unref(u)?(openBlock(),createElementBlock("div",_hoisted_1$1D,[createVNode(ve,{show:unref(u),dialogName:s,close:!1},{footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:S},toDisplayString$1(D.$t("cancel")),1),createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:d.value==="pdf"&&(!v.value||m.value==="custom"&&!g.value)}]),onClick:E},toDisplayString$1(D.$t("documentEditor.insert")),3)]),default:withCtx(()=>{var Se,we;return[createBaseVNode("p",_hoisted_2$1v,toDisplayString$1(D.$t("documentEditor.dialog.insertPages")),1),createBaseVNode("div",_hoisted_3$1n,[createBaseVNode("div",_hoisted_4$w,[createBaseVNode("div",{onClick:X[0]||(X[0]=oe=>d.value="blank"),class:"option"},[d.value==="blank"?(openBlock(),createBlock(U,{key:0})):(openBlock(),createBlock(Z,{key:1})),createTextVNode(toDisplayString$1(D.$t("documentEditor.dialog.blankPage")),1)]),createBaseVNode("div",{onClick:X[1]||(X[1]=oe=>d.value="custom"),class:"option"},[d.value==="custom"?(openBlock(),createBlock(U,{key:0})):(openBlock(),createBlock(Z,{key:1})),createTextVNode(toDisplayString$1(D.$t("documentEditor.dialog.customPage")),1)]),d.value==="custom"?(openBlock(),createElementBlock("div",_hoisted_5$f,[withDirectives(createBaseVNode("select",{name:"customPageSize","onUpdate:modelValue":X[2]||(X[2]=oe=>f.value=oe)},_hoisted_9$6,512),[[vModelSelect,f.value]]),createVNode(j)])):createCommentVNode("",!0),createBaseVNode("div",{onClick:X[3]||(X[3]=oe=>d.value="pdf"),class:"option"},[d.value==="pdf"?(openBlock(),createBlock(U,{key:0})):(openBlock(),createBlock(Z,{key:1})),createTextVNode(toDisplayString$1(D.$t("documentEditor.dialog.fromPdf")),1)]),d.value==="pdf"?(openBlock(),createElementBlock("div",_hoisted_10$6,[createBaseVNode("div",_hoisted_11$6,[createBaseVNode("span",{class:normalizeClass({uploaded:(Se=v.value)==null?void 0:Se.name})},toDisplayString$1(((we=v.value)==null?void 0:we.name)||D.$t("documentEditor.dialog.selectFile")),3),createVNode(Q)]),createBaseVNode("input",{type:"file",onChange:T,accept:".pdf"},null,32)])):createCommentVNode("",!0),d.value==="pdf"?(openBlock(),createElementBlock("div",_hoisted_12$5,[createBaseVNode("span",null,toDisplayString$1(D.$t("documentEditor.dialog.pageRange")),1),createBaseVNode("div",null,[createBaseVNode("div",_hoisted_13$5,[withDirectives(createBaseVNode("select",{name:"inputFileRange","onUpdate:modelValue":X[4]||(X[4]=oe=>m.value=oe)},[createBaseVNode("option",_hoisted_14$5,toDisplayString$1(D.$t("documentEditor.dialog.allPages")),1),createBaseVNode("option",_hoisted_15$5,toDisplayString$1(D.$t("documentEditor.dialog.oddPage")),1),createBaseVNode("option",_hoisted_16$4,toDisplayString$1(D.$t("documentEditor.dialog.evenPage")),1),createBaseVNode("option",_hoisted_17$3,toDisplayString$1(D.$t("documentEditor.dialog.customRange")),1)],512),[[vModelSelect,m.value]]),createVNode(j)]),m.value==="custom"?withDirectives((openBlock(),createElementBlock("input",{key:0,type:"text","onUpdate:modelValue":X[5]||(X[5]=oe=>_.value=oe),placeholder:D.$t("documentEditor.dialog.pageTip"),onBlur:F},null,40,_hoisted_18$3)),[[vModelText,_.value]]):createCommentVNode("",!0)])])):createCommentVNode("",!0)])]),createBaseVNode("p",_hoisted_19$3,toDisplayString$1(D.$t("documentEditor.dialog.insertTo")),1),createBaseVNode("div",_hoisted_20$3,[createBaseVNode("div",_hoisted_21$3,[createBaseVNode("div",{onClick:X[6]||(X[6]=oe=>y.value="first"),class:"option"},[y.value==="first"?(openBlock(),createBlock(U,{key:0})):(openBlock(),createBlock(Z,{key:1})),createTextVNode(toDisplayString$1(D.$t("documentEditor.dialog.firstPage")),1)]),createBaseVNode("div",{onClick:X[7]||(X[7]=oe=>y.value="last"),class:"option"},[y.value==="last"?(openBlock(),createBlock(U,{key:0})):(openBlock(),createBlock(Z,{key:1})),createTextVNode(toDisplayString$1(D.$t("documentEditor.dialog.lastPage")),1)]),createBaseVNode("div",{onClick:X[10]||(X[10]=oe=>y.value="custom"),class:normalizeClass(["option",{"custom-page":y.value==="custom"}])},[createBaseVNode("div",_hoisted_22$3,[y.value==="custom"?(openBlock(),createBlock(U,{key:0})):(openBlock(),createBlock(Z,{key:1})),createTextVNode(toDisplayString$1(D.$t("documentEditor.dialog.page")),1)]),y.value==="custom"?(openBlock(),createElementBlock("div",_hoisted_23$3,[createBaseVNode("div",_hoisted_24$3,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":X[8]||(X[8]=oe=>w.value=oe),type:"number",max:e.totalPages,min:"1",pattern:"\\d*",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onInput:M,onBlur:I},null,40,_hoisted_25$2),[[vModelText,w.value,void 0,{number:!0}]]),createBaseVNode("span",null,"/ "+toDisplayString$1(e.totalPages),1)]),createBaseVNode("div",_hoisted_26$2,[withDirectives(createBaseVNode("select",{name:"targetPlace","onUpdate:modelValue":X[9]||(X[9]=oe=>x.value=oe)},[createBaseVNode("option",_hoisted_27$1,toDisplayString$1(D.$t("documentEditor.dialog.before")),1),createBaseVNode("option",_hoisted_28$1,toDisplayString$1(D.$t("documentEditor.dialog.after")),1)],512),[[vModelSelect,x.value]]),createVNode(j)])])):createCommentVNode("",!0)],2)])])]}),_:1},8,["show"])])):createCommentVNode("",!0)}}},_sfc_main$1Y={},_hoisted_1$1C={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1u=createBaseVNode("g",{id:"toolbar / pageedit / all select"},[createBaseVNode("path",{id:"Union","fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.5 2.5H6.5V13.5H17.5V2.5ZM6.5 1H5V2.5V2.9342H2H1.25V3.6842V18V18.75H2H16.3158H17.0658V18V15H17.5H19V13.5V2.5V1H17.5H6.5ZM2.75 4.4342H5V13.5V15H6.5H15.5658V17.25H2.75V4.4342ZM15.4446 6.94453L15.9749 6.4142L14.9142 5.35355L14.3839 5.88388L11.1016 9.16615L10.2177 8.28227L9.68734 7.75195L8.62667 8.8126L9.15701 9.34293L10.5712 10.7571L11.1016 11.2875L11.6319 10.7571L15.4446 6.94453Z",fill:"currentColor"})],-1),_hoisted_3$1m=[_hoisted_2$1u];function _sfc_render$10(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1C,_hoisted_3$1m)}const __unplugin_components_10$1=_export_sfc(_sfc_main$1Y,[["render",_sfc_render$10]]),_sfc_main$1X={},_hoisted_1$1B={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1t=createBaseVNode("g",{id:"toolbar / pageedit / unselect"},[createBaseVNode("path",{id:"Union","fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.5 2.5H6.5V13.5H17.5V2.5ZM6.5 1H5V2.5V2.9342H2H1.25V3.6842V18V18.75H2H16.3158H17.0658V18V15H17.5H19V13.5V2.5V1H17.5H6.5ZM2.75 4.4342H5V13.5V15H6.5H15.5658V17.25H2.75V4.4342ZM8 8.75H16V7.25H8V8.75Z",fill:"currentColor"})],-1),_hoisted_3$1l=[_hoisted_2$1t];function _sfc_render$$(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1B,_hoisted_3$1l)}const __unplugin_components_9$2=_export_sfc(_sfc_main$1X,[["render",_sfc_render$$]]),_sfc_main$1W={},_hoisted_1$1A={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1s=createBaseVNode("g",{id:"toolbar / pageedit / reverse"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.9019 1.75H1.25V18.25H14.75V5.95882L10.9019 1.75ZM10.24 3.25L13.25 6.542V16.75H2.75V3.25H10.24ZM19.624 6.83397L16.25 1.77292V18.25H17.75V6.729L18.376 7.66603L19.624 6.83397Z",fill:"currentColor"})],-1),_hoisted_3$1k=[_hoisted_2$1s];function _sfc_render$_(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1A,_hoisted_3$1k)}const __unplugin_components_8$2=_export_sfc(_sfc_main$1W,[["render",_sfc_render$_]]),_sfc_main$1V={},_hoisted_1$1z={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1r=createBaseVNode("g",{id:"toolbar / pageedit / replace"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.25 1H13.3107L17.75 5.43934V10.75H16.25V6.061L12.689 2.5H3.75V17H10V18.5H2.25V1ZM14.3454 12.7983L15.3689 11.7017L18.9028 15H11V13.5H15.097L14.3454 12.7983ZM14.5339 19.5L15.5574 18.4034L14.8058 17.7017H18.9028V16.2017H11L14.5339 19.5Z",fill:"currentColor"})],-1),_hoisted_3$1j=[_hoisted_2$1r];function _sfc_render$Z(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1z,_hoisted_3$1j)}const __unplugin_components_7$1=_export_sfc(_sfc_main$1V,[["render",_sfc_render$Z]]),_sfc_main$1U={},_hoisted_1$1y={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1q=createBaseVNode("g",{id:"toolbar / pageedit / extract"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.25 1.25H13.3107L17.75 5.68934V11H16.25V6.311L12.689 2.75H3.75V17.25H10V18.75H2.25V1.25ZM16.0174 16.25L15.1768 17.091L16.2374 18.1516L18.8891 15.5L16.2374 12.8483L15.1768 13.909L16.0174 14.75H11V16.25H16.0174Z",fill:"currentColor"})],-1),_hoisted_3$1i=[_hoisted_2$1q];function _sfc_render$Y(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1y,_hoisted_3$1i)}const __unplugin_components_6$2=_export_sfc(_sfc_main$1U,[["render",_sfc_render$Y]]),_sfc_main$1T={},_hoisted_1$1x={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1p=createBaseVNode("g",{id:"toolbar / pageedit / copy"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.75 0.75H14.3866L18.25 4.69386V16.25H15.25V19.25H1.75V3.75H4.75V0.75ZM4.75 16.25H13.75V17.75H3.25V5.25H4.75V16.25ZM16.75 5.306L13.756 2.25H6.25V14.75H16.75V5.306ZM14.1974 7.35361C13.8798 6.13053 12.7917 5.25 11.5202 5.25C9.98499 5.25 8.75 6.52361 8.75 8.08333V8.91667L8.75503 9.08874C8.84189 10.569 10.0418 11.75 11.5202 11.75C12.8491 11.75 13.9777 10.7882 14.2357 9.47867L12.764 9.18872L12.7319 9.3182C12.5675 9.86695 12.0782 10.25 11.5202 10.25C10.8239 10.25 10.25 9.65813 10.25 8.91667V8.08333L10.2566 7.94617C10.3222 7.2702 10.8674 6.75 11.5202 6.75C12.1213 6.75 12.6427 7.19453 12.7641 7.81182L14.2359 7.52247L14.1974 7.35361Z",fill:"currentColor"})],-1),_hoisted_3$1h=[_hoisted_2$1p];function _sfc_render$X(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1x,_hoisted_3$1h)}const __unplugin_components_5$3=_export_sfc(_sfc_main$1T,[["render",_sfc_render$X]]),_sfc_main$1S={},_hoisted_1$1w={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1o=createBaseVNode("g",{id:"toolbar / pageedit / rotate left"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 9.75V1.75H18.5V9.75V10.5V18.25H2V9.75H10ZM11.5 9.75V3.25H17V9.75H11.5ZM3.5 11.25V16.75H17.001V11.25H3.5ZM1.53769 5.46967L0.477028 6.53033L3.12868 9.18198L5.78033 6.53033L4.71967 5.46967L3.80559 6.38355C3.89386 5.03216 4.82757 3.82648 6.20838 3.4565C6.98256 3.24905 7.78597 3.33465 8.48622 3.68044L8.67454 3.78117L9.42454 2.48213C8.34118 1.85665 7.05293 1.67728 5.82015 2.00761C3.81662 2.54445 2.45713 4.28512 2.31137 6.24287L1.53769 5.46967Z",fill:"currentColor"})],-1),_hoisted_3$1g=[_hoisted_2$1o];function _sfc_render$W(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1w,_hoisted_3$1g)}const __unplugin_components_4$3=_export_sfc(_sfc_main$1S,[["render",_sfc_render$W]]),_sfc_main$1R={},_hoisted_1$1v={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1n=createBaseVNode("g",{id:"toolbar / pageedit / rotate left"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 9.75V1.75H1.5V9.75V10.5V18.25H18V9.75H10ZM8.5 9.75V3.25H3V9.75H8.5ZM16.5 11.25V16.75H2.999V11.25H16.5ZM18.4623 5.46967L19.523 6.53033L16.8713 9.18198L14.2197 6.53033L15.2803 5.46967L16.1944 6.38355C16.1061 5.03216 15.1724 3.82648 13.7916 3.4565C13.0174 3.24905 12.214 3.33465 11.5138 3.68044L11.3255 3.78117L10.5755 2.48213C11.6588 1.85665 12.9471 1.67728 14.1798 2.00761C16.1834 2.54445 17.5429 4.28512 17.6886 6.24287L18.4623 5.46967Z",fill:"currentColor"})],-1),_hoisted_3$1f=[_hoisted_2$1n];function _sfc_render$V(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1v,_hoisted_3$1f)}const __unplugin_components_3$7=_export_sfc(_sfc_main$1R,[["render",_sfc_render$V]]),_sfc_main$1Q={},_hoisted_1$1u={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1m=createBaseVNode("g",{id:"toolbar / pageedit / delete"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M13 2.75V1.25H7V2.75H13ZM19 5.75V4.25H16.75H3.25H1V5.75H3.25V18.75H16.75V5.75H19ZM4.75 17.25V5.75H15.25V17.25H4.75ZM8.75 8.5V14.5H7.25V8.5H8.75ZM12.75 8.5V14.5H11.25V8.5H12.75Z",fill:"currentColor"})],-1),_hoisted_3$1e=[_hoisted_2$1m];function _sfc_render$U(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1u,_hoisted_3$1e)}const __unplugin_components_2$7=_export_sfc(_sfc_main$1Q,[["render",_sfc_render$U]]),_sfc_main$1P={},_hoisted_1$1t={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1l=createBaseVNode("g",{id:"toolbar / pageedit / insert"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.25 1.25H13.3107L17.75 5.68934V11H16.25V6.311L12.689 2.75H3.75V17.25H10V18.75H2.25V1.25ZM14.75 18H13.25V15.75H11V14.25H13.25V12H14.75V14.25H17V15.75H14.75V18Z",fill:"currentColor"})],-1),_hoisted_3$1d=[_hoisted_2$1l];function _sfc_render$T(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1t,_hoisted_3$1d)}const __unplugin_components_0$h=_export_sfc(_sfc_main$1P,[["render",_sfc_render$T]]);navigator.userAgent.indexOf("Edge")>-1;navigator.userAgent.indexOf("Edg/")>-1;navigator.userAgent.indexOf("Trident/7.0")>-1;navigator.userAgent.toLowerCase().indexOf("firefox")>-1;const checkForIOS13=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,isIOS=window.navigator.userAgent.match(/(iPad|iPhone|iPod)/i)||checkForIOS13,isAndroid=window.navigator.userAgent.match(/Android/i),isMobileDevice=isIOS||isAndroid||window.navigator.userAgent.match(/webOS|BlackBerry|IEMobile|Opera Mini/i);navigator.appVersion.indexOf("Mac")>-1;navigator.appVersion.indexOf("Windows")>-1;(function(){const e=window.navigator.userAgent.match(/OPR/),n=window.navigator.userAgent.match(/Maxthon/),r=window.navigator.userAgent.match(/Edge/);return window.navigator.userAgent.match(/Chrome\/(.*?) /)&&!e&&!n&&!r})();/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||/^((?!chrome|android).)*$/.test(navigator.userAgent);window.navigator.userAgent.match(/CriOS\/(.*?) /);window.navigator.userAgent.match(/(FxiOS)\/(.*?) /);const DocumentEditorContainer_vue_vue_type_style_index_0_lang="",_hoisted_1$1s={class:"tools-container"},_hoisted_2$1k=["onClick"],_hoisted_3$1c=["src"],_sfc_main$1O={__name:"DocumentEditorContainer",props:["Sortable"],setup(e){const{Sortable:n}=e,r=useViewerStore(),o=useDocumentStore(),s=reactive({pageList:[],selectedPageList:[]});let{pageList:u,selectedPageList:d}=s;const f=ref(null),v=ref(-2),m=ref(-2),_=ref(!1),g=ref(null),y=ref(0),w=ref(null),x=window.devicePixelRatio||1,k=window.innerWidth<768;let S=null;onMounted(()=>{n.create(f.value,{multiDrag:!0,selectedClass:"sortable-selected",dragClass:"sortable-drag",sort:!1,forceFallback:!0,fallbackTolerance:isMobileDevice?0:20,onStart:ne,onEnd:H,delay:isMobileDevice?200:0});const{width:ke,height:Ee}=g.value[0].getBoundingClientRect(),Pe={width:ke,height:Ee};core.getDocEditorPages(Pe),window.addEventListener("resize",Ce),Ce()}),onUnmounted(()=>{core.removeEvent("getDocEditorPages",T),window.addEventListener("resize",Ce)});const E=core.getPagesCount();for(let ke=0;ke<E;ke++)u.push({type:"page"});const T=ke=>{const{index:Ee,pageData:Pe}=ke;u[Ee]=Pe};core.addEvent("getDocEditorPages",T);const M=()=>{r.openElement("deletePageDialog")},I=async ke=>{const Ee={type:"insert",pageIndex:ke.place};if(ke.type==="blank"){const Pe=ke.targetPlace?u[ke.place-1]:u[ke.place]||u[ke.place-1],Be={type:ke.type,rotation:0,size:ke.size||{width:Pe.size.width,height:Pe.size.height}};u.splice(ke.place,0,Be),Ee.size=Be.size,core.saveDocumentEdit(Ee)}else if(ke.type==="pdf"){Ee.file=ke.file,Ee.range=ke.range,Ee.password=ke.password||"";const{width:Pe,height:Be}=g.value[0].getBoundingClientRect(),$e=await core.saveDocumentEdit(Ee),Oe=u.length;for(let J=0;J<$e-Oe;J++)u.splice(ke.place+J,0,{type:"page"});const Ne={width:Pe,height:Be};core.getDocEditorPages(Ne,ke.place,$e-Oe)}o.setDocEditorOperationList(Ee),d.length=0},F=ke=>{const{width:Ee,height:Pe}=ke,Be=k?140:204,$e=k?141:216,Oe=Ee/x,Ne=Pe/x,J=Be/Oe,fe=$e/Ne;let re=Math.min(J,fe);re>1&&(re=1);const _e=Oe*re,be=Ne*re;return{width:_e,height:be}},O=ke=>{const Ee=d.indexOf(ke);Ee===-1?d.push(ke):d.splice(Ee,1)},N=()=>{if(d.length<u.length){d.length=0;for(let ke=0;ke<u.length;ke++)d.push(ke)}else d.length=0},D=()=>{r.openElement("insertPageSettingDialog")},X=()=>{d.sort((Ee,Pe)=>Pe-Ee),d.forEach(Ee=>{u.splice(Ee,1)});const ke={type:"delete",selectedPageIndexArray:Array.from(d)};core.saveDocumentEdit(ke),o.setDocEditorOperationList(ke),d.length=0},U=ke=>{d.forEach(Pe=>{const Be=u[Pe];Be.rotation+=ke,(Be.rotation>3||Be.rotation<-3)&&(Be.rotation=0)});const Ee={type:"rotate",selectedPageIndexArray:Array.from(d),rotation:ke};core.saveDocumentEdit(Ee),o.setDocEditorOperationList(Ee)},Z=ke=>new Map([[-3,-270],[-2,180],[-1,-90],[0,0],[1,90],[2,180],[3,270]]).get(ke),j=()=>{d.sort((Ee,Pe)=>Pe-Ee),d.forEach(Ee=>{u.splice(Ee,0,{...u[Ee]})});const ke={type:"copy",selectedPageIndexArray:Array.from(d)};core.saveDocumentEdit(ke),o.setDocEditorOperationList(ke),d.length=0},Q=()=>{const ke=document.createElement("input");ke.type="file",ke.accept=".pdf",ke.click(),ke.addEventListener("change",async function(Ee){const Pe=Ee.target.files[0],Be=d[0];let $e=URL.createObjectURL(Pe);const Oe=await core.checkPassword($e,!0);Oe!==!1&&(I({type:"pdf",file:Pe,range:"all",place:Be,password:Oe}),X())})},ve=()=>{r.openElement("extractPageSettingDialog")},Se=async ke=>{let Ee=ke.range.replace(/\s/g,"");const Pe=u.length;ke.range==="all"?Ee="1-"+Pe:ke.range==="odd"?Ee=Array.from({length:Pe},(Ne,J)=>J+1).filter(Ne=>Ne%2!==0).join(","):ke.range==="even"&&(Ee=Array.from({length:Pe},(Ne,J)=>J+1).filter(Ne=>Ne%2===0).join(","));let Be=Ee.split(","),$e=[];Be.forEach(Ne=>{if(Ne.includes("-")){let[J,fe]=Ne.split("-").map(re=>parseInt(re));for(let re=J;re<=fe;re++)$e.push(re-1)}else Ne&&$e.push(parseInt(Ne)-1)});const Oe={type:"extract",range:ke.separateFile?$e:Ee,separateFile:ke.separateFile};if(await core.saveDocumentEdit(Oe),o.setDocEditorOperationList(Oe),ke.deleteAfter){$e.reverse().forEach(J=>{u.splice(J,1)});const Ne={type:"delete",selectedPageIndexArray:$e};core.saveDocumentEdit(Ne),o.setDocEditorOperationList(Ne),d.length=0}},we=()=>{r.openElement("movePageSettingDialog")},oe=ke=>{if(d.length===1||d.length<2&&v.value>=0||d.length>1&&v.value>=0&&!d.includes(v.value)){const Ee=d.length===1&&d.includes(v.value)||d.length===1&&v.value<0,Pe=Ee?d[0]:[v.value],Be=Pe>ke?ke:ke-1;if(Pe===Be)return;const[$e]=u.splice(Pe,1);u.splice(Be,0,$e);const Oe={type:"move",pageIndex:Pe,targetPageIndex:Be};core.saveDocumentEdit(Oe),o.setDocEditorOperationList(Oe),Ee&&(d[0]=Be)}else{d.sort((Ee,Pe)=>Ee-Pe);for(let Ee=0;Ee<d.length;Ee++){let Pe,Be;if(d[Ee]===ke)Pe=d[Ee],Be=ke;else if(d[Ee]>ke)if(Pe=d[Ee],d.includes(ke)){Be=ke;for(let Ne=0;Ne<d.length;Ne++)d[Ne]===Be&&Pe!==Be&&Be++}else Be=ke;else Pe=d[Ee]-Ee,Be=ke-1;if(d.includes(Pe)&&d.includes(Be)&&Pe===Be)continue;const[$e]=u.splice(Pe,1);u.splice(Be,0,$e);const Oe={type:"move",pageIndex:Pe,targetPageIndex:Be};core.saveDocumentEdit(Oe),o.setDocEditorOperationList(Oe),d[Ee]=d[Ee]>ke?Be:Be-Ee}}},ne=ke=>{v.value=ke.oldIndex,f.value.addEventListener(isMobileDevice?"touchmove":"mousemove",q),isMobileDevice&&(document.body.style.overscrollBehavior="none",document.body.style.userSelect="none",document.getElementById("app").style.touchAction="none",w.value.style.overflow="hidden")},q=ke=>{d.length>1&&d.includes(v.value)&&f.value.querySelector(".sortable-drag").style.setProperty("--after-content","'"+d.length+"'");let Ee=isMobileDevice?document.elementFromPoint(ke.touches[0].clientX,ke.touches[0].clientY):ke.target;const Pe=f.value.children;for(let Be=0;Be<Pe.length;Be++){const $e=Pe[Be];if($e.contains(Ee)){const Oe=$e.getBoundingClientRect(),Ne=isMobileDevice?ke.touches[0].clientX-Oe.left:ke.offsetX+30;_.value=Ne<Oe.width/2,_.value?m.value=Be-1:m.value=Be}}isMobileDevice&&Te(ke.touches[0].clientY)},H=()=>{f.value.removeEventListener(isMobileDevice?"touchmove":"mousemove",q),m.value>-2&&!Y(m.value)&&oe(m.value+1),v.value=-2,m.value=-2,isMobileDevice&&(document.body.style.overscrollBehavior="auto",document.body.style.userSelect="auto",document.getElementById("app").style.touchAction="auto",w.value.style.overflow="auto")},Y=ke=>{if(![ke-1,ke,ke+1].includes(m.value+1))return!1;if(d.includes(v.value)){if(d.length===1&&(d[0]===m.value+1||d[0]===m.value)||d.length>1&&le(d)&&(d.includes(m.value+1)||d.includes(m.value)))return!0}else if([v.value,v.value-1].includes(m.value))return!0;return!1},le=ke=>{ke.sort(function(Pe,Be){return Pe-Be});for(var Ee=0;Ee<ke.length-1;Ee++)if(ke[Ee]+1!==ke[Ee+1])return!1;return!0},Ce=()=>{const ke=window.innerWidth,Ee=ke>767?280:170;y.value=parseInt(ke%Ee/2)},Te=ke=>{const Pe=w.value,$e=Pe.getBoundingClientRect().height,Oe=ke,Ne=Pe.scrollHeight;Oe<=100||Oe>=$e-100?(clearInterval(S),S=setInterval(()=>{Oe<=100?(Pe.scrollTop-=10,Pe.scrollTop<=0&&clearInterval(S)):Oe>=$e-100&&(Pe.scrollTop+=10,Pe.scrollTop+$e>=Ne&&clearInterval(S))},10)):clearInterval(S)};return(ke,Ee)=>{const Pe=__unplugin_components_0$h,Be=_sfc_main$2C,$e=__unplugin_components_2$7,Oe=__unplugin_components_3$7,Ne=__unplugin_components_4$3,J=__unplugin_components_5$3,fe=__unplugin_components_6$2,re=__unplugin_components_7$1,_e=__unplugin_components_8$2,be=__unplugin_components_9$2,Ae=__unplugin_components_10$1,Le=_sfc_main$1Z,Ve=_sfc_main$20,Fe=_sfc_main$22,De=_sfc_main$25;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{class:"document-editor-container",ref_key:"docEditorContainer",ref:w},[createBaseVNode("div",_hoisted_1$1s,[createVNode(Be,{class:"with-text",onClick:D},{default:withCtx(()=>[createVNode(Pe),createBaseVNode("span",null,toDisplayString$1(ke.$t("documentEditor.insert")),1)]),_:1}),createVNode(Be,{class:normalizeClass(["with-text",{disabled:!unref(d).length||unref(d).length==unref(u).length}]),onClick:M},{default:withCtx(()=>[createVNode($e),createBaseVNode("span",null,toDisplayString$1(ke.$t("documentEditor.delete")),1)]),_:1},8,["class"]),createVNode(Be,{class:normalizeClass(["with-text",{disabled:!unref(d).length}]),onClick:Ee[0]||(Ee[0]=We=>U(1))},{default:withCtx(()=>[createVNode(Oe),createBaseVNode("span",null,toDisplayString$1(ke.$t("documentEditor.rotateRight")),1)]),_:1},8,["class"]),createVNode(Be,{class:normalizeClass(["with-text",{disabled:!unref(d).length}]),onClick:Ee[1]||(Ee[1]=We=>U(-1))},{default:withCtx(()=>[createVNode(Ne),createBaseVNode("span",null,toDisplayString$1(ke.$t("documentEditor.rotateLeft")),1)]),_:1},8,["class"]),createVNode(Be,{class:normalizeClass(["with-text",{disabled:!unref(d).length}]),onClick:j},{default:withCtx(()=>[createVNode(J),createBaseVNode("span",null,toDisplayString$1(ke.$t("documentEditor.copy")),1)]),_:1},8,["class"]),createVNode(Be,{class:normalizeClass(["with-text",{disabled:!unref(d).length}]),onClick:ve},{default:withCtx(()=>[createVNode(fe),createBaseVNode("span",null,toDisplayString$1(ke.$t("documentEditor.extract")),1)]),_:1},8,["class"]),createVNode(Be,{class:normalizeClass(["with-text",{disabled:!unref(d).length}]),onClick:Q},{default:withCtx(()=>[createVNode(re),createBaseVNode("span",null,toDisplayString$1(ke.$t("documentEditor.replace")),1)]),_:1},8,["class"]),createVNode(Be,{class:normalizeClass(["with-text",{disabled:!unref(d).length}]),onClick:we},{default:withCtx(()=>[createVNode(_e),createBaseVNode("span",null,toDisplayString$1(ke.$t("documentEditor.move")),1)]),_:1},8,["class"]),createVNode(Be,{class:"select-all",onClick:N},{default:withCtx(()=>[unref(d).length===unref(u).length?(openBlock(),createBlock(be,{key:0})):(openBlock(),createBlock(Ae,{key:1}))]),_:1})]),createBaseVNode("div",{class:"page-container",ref_key:"dragContainer",ref:f,style:normalizeStyle({"margin-left":y.value+"px"})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(u),(We,Re)=>(openBlock(),createElementBlock("div",{key:`${We.type} - ${Re}`,class:normalizeClass(["page",{selected:unref(d).includes(Re),"drag-indicate-right":m.value===Re&&!_.value,"drag-indicate-left":m.value+1===Re&&_.value,"drag-indicate-disable":v.value>=0&&m.value>=-1&&Y(Re),"has-hover":!unref(isMobileDevice)&&v.value<0&&!unref(d).includes(Re)}]),ref_for:!0,ref_key:"imgBoxEl",ref:g},[createBaseVNode("div",{class:"img-box",onClick:He=>O(Re)},[We.img?(openBlock(),createElementBlock("img",{key:0,src:We.img,style:normalizeStyle(`transform: rotate(${Z(We.rotation)}deg);`)},null,12,_hoisted_3$1c)):We.type==="blank"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass({"blank-page":We.type==="blank"}),style:normalizeStyle({transform:"rotate("+Z(We.rotation)+"deg)",width:F(We.size).width+"px",height:F(We.size).height+"px"})},null,6)):createCommentVNode("",!0)],8,_hoisted_2$1k),createBaseVNode("p",null,toDisplayString$1(Re+1),1)],2))),128))],4)],512),createVNode(Le,{onInsertPage:I,selectedPageList:unref(d),totalPages:unref(u).length},null,8,["selectedPageList","totalPages"]),createVNode(Ve,{onDeletePage:X,selectedPageList:unref(d)},null,8,["selectedPageList"]),createVNode(Fe,{onExtractPage:Se,totalPages:unref(u).length,selectedPageList:unref(d)},null,8,["totalPages","selectedPageList"]),createVNode(De,{onMovePage:oe,totalPages:unref(u).length,selectedPageList:unref(d)},null,8,["totalPages","selectedPageList"])],64)}}},PrintSettingDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1r={key:0,class:"print-setting-popup"},_hoisted_2$1j={class:"select-content"},_sfc_main$1N={__name:"PrintSettingDialog",setup(e){const{triggerPrinting:n}=core,r=useViewerStore(),o=useDocumentStore(),s="printSettingDialog",u=computed(()=>r.isElementOpen(s)),d=computed(()=>o.getCompareResult),f=ref("old"),v=()=>{r.closeElement(s)},m=async()=>{let _=null;f.value==="old"?_=d.value.oldFile.url:f.value==="new"&&(_=d.value.newFile.url),v(),r.setDownloading(!0);try{await n(_),r.setDownloading(!1)}catch(g){console.log(g)}};return(_,g)=>{const y=__unplugin_components_0$i,w=__unplugin_components_1$6,x=_sfc_main$26;return unref(u)?(openBlock(),createElementBlock("div",_hoisted_1$1r,[createVNode(x,{show:unref(u),dialogName:s,close:!1},{header:withCtx(()=>[createBaseVNode("p",null,toDisplayString$1(_.$t("compare.printSetting")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:v},toDisplayString$1(_.$t("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:m},toDisplayString$1(_.$t("ok")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_2$1j,[createBaseVNode("div",{onClick:g[0]||(g[0]=k=>f.value="old"),class:"option"},[f.value==="old"?(openBlock(),createBlock(y,{key:0})):(openBlock(),createBlock(w,{key:1})),createTextVNode(toDisplayString$1(_.$t("compare.printOldFile")),1)]),createBaseVNode("div",{onClick:g[1]||(g[1]=k=>f.value="new"),class:"option"},[f.value==="new"?(openBlock(),createBlock(y,{key:0})):(openBlock(),createBlock(w,{key:1})),createTextVNode(toDisplayString$1(_.$t("compare.printNewFile")),1)])])]),_:1},8,["show"])])):createCommentVNode("",!0)}}};var FileSaver_min={exports:{}};(function(e,n){(function(r,o){o()})(commonjsGlobal$1,function(){function r(m,_){return typeof _>"u"?_={autoBom:!1}:typeof _!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),_={autoBom:!_}),_.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\uFEFF",m],{type:m.type}):m}function o(m,_,g){var y=new XMLHttpRequest;y.open("GET",m),y.responseType="blob",y.onload=function(){v(y.response,_,g)},y.onerror=function(){console.error("could not download file")},y.send()}function s(m){var _=new XMLHttpRequest;_.open("HEAD",m,!1);try{_.send()}catch{}return 200<=_.status&&299>=_.status}function u(m){try{m.dispatchEvent(new MouseEvent("click"))}catch{var _=document.createEvent("MouseEvents");_.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(_)}}var d=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal$1=="object"&&commonjsGlobal$1.global===commonjsGlobal$1?commonjsGlobal$1:void 0,f=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),v=d.saveAs||(typeof window!="object"||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(m,_,g){var y=d.URL||d.webkitURL,w=document.createElement("a");_=_||m.name||"download",w.download=_,w.rel="noopener",typeof m=="string"?(w.href=m,w.origin===location.origin?u(w):s(w.href)?o(m,_,g):u(w,w.target="_blank")):(w.href=y.createObjectURL(m),setTimeout(function(){y.revokeObjectURL(w.href)},4e4),setTimeout(function(){u(w)},0))}:"msSaveOrOpenBlob"in navigator?function(m,_,g){if(_=_||m.name||"download",typeof m!="string")navigator.msSaveOrOpenBlob(r(m,g),_);else if(s(m))o(m,_,g);else{var y=document.createElement("a");y.href=m,y.target="_blank",setTimeout(function(){u(y)})}}:function(m,_,g,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof m=="string")return o(m,_,g);var w=m.type==="application/octet-stream",x=/constructor/i.test(d.HTMLElement)||d.safari,k=/CriOS\/[\d]+/.test(navigator.userAgent);if((k||w&&x||f)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var M=S.result;M=k?M:M.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=M:location=M,y=null},S.readAsDataURL(m)}else{var E=d.URL||d.webkitURL,T=E.createObjectURL(m);y?y.location=T:location.href=T,y=null,setTimeout(function(){E.revokeObjectURL(T)},4e4)}});d.saveAs=v.saveAs=v,e.exports=v})})(FileSaver_min);const DownloadSettingDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1q={key:0,class:"download-setting-popup"},_hoisted_2$1i={class:"select-content"},_sfc_main$1M={__name:"DownloadSettingDialog",setup(e){const n=useViewerStore(),r=useDocumentStore(),o="downloadSettingDialog",s=computed(()=>n.isElementOpen(o)),u=computed(()=>r.getCompareResult),d=ref(1),f=()=>{n.closeElement(o)},v=async()=>{const m=[];d.value===1?m.push(u.value.mergeFile):d.value===2&&m.push(u.value.oldFile,u.value.newFile),f(),n.setDownloading(!0);try{m.forEach(_=>{FileSaver_min.exports.saveAs(_.url,_.filename)}),n.setDownloading(!1)}catch(_){console.log(_)}};return(m,_)=>{const g=__unplugin_components_0$i,y=__unplugin_components_1$6,w=_sfc_main$26;return unref(s)?(openBlock(),createElementBlock("div",_hoisted_1$1q,[createVNode(w,{show:unref(s),dialogName:o,close:!0},{header:withCtx(()=>[createBaseVNode("p",null,toDisplayString$1(m.$t("compare.downloadOptions")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:f},toDisplayString$1(m.$t("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:v},toDisplayString$1(m.$t("ok")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_2$1i,[createBaseVNode("div",{onClick:_[0]||(_[0]=x=>d.value=2),class:"option"},[d.value===2?(openBlock(),createBlock(g,{key:0})):(openBlock(),createBlock(y,{key:1})),createTextVNode(toDisplayString$1(m.$t("compare.downloadTwoFiles")),1)]),createBaseVNode("div",{onClick:_[1]||(_[1]=x=>d.value=1),class:"option"},[d.value===1?(openBlock(),createBlock(g,{key:0})):(openBlock(),createBlock(y,{key:1})),createTextVNode(toDisplayString$1(m.$t("compare.downloadOneFile")),1)])])]),_:1},8,["show"])])):createCommentVNode("",!0)}}};function getHash(){let e=window.location.href,n=e?e.indexOf("#"):-1;return 0<=n?e.substring(n+1):""}function getHashParameters(e,n){let r=typeof n,o=getHash().split("&").reduce(function(s,u){return u=u.split("="),s[decodeURIComponent(u[0])]=decodeURIComponent(u[1]),s},{});if(r==="boolean"&&typeof o[e]<"u"){if(r=o[e],r==="true"||r==="1")return!0;if(r==="false"||r==="0")return!1}return o[e]||n}const CompareSettingDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1p={key:0,class:"compare-setting-popup"},_hoisted_2$1h={class:"mode pc"},_hoisted_3$1b={class:"dialog-content"},_hoisted_4$v={class:"mode mobile"},_hoisted_5$e={class:"compare-items"},_hoisted_6$c={class:"title"},_hoisted_7$6={class:"row"},_hoisted_8$6={class:"row"},_hoisted_9$5={class:"opacity"},_hoisted_10$5={class:"title"},_hoisted_11$5={class:"row"},_hoisted_12$4={class:"percent-input"},_hoisted_13$4={class:"row"},_hoisted_14$4={class:"percent-input"},_hoisted_15$4={class:"mark-color"},_hoisted_16$3={class:"title"},_hoisted_17$2={class:"row"},_hoisted_18$2={class:"select color-select"},_hoisted_19$2={class:"colors-container mark"},_hoisted_20$2={class:"cell-container"},_hoisted_21$2={class:"cell-outer"},_hoisted_22$2={class:"drop-down"},_hoisted_23$2={class:"colors-container mark"},_hoisted_24$2={class:"cell-container"},_hoisted_25$1=["onClick"],_hoisted_26$1={class:"row"},_hoisted_27={class:"select color-select"},_hoisted_28={class:"colors-container mark"},_hoisted_29={class:"cell-container"},_hoisted_30={class:"cell-outer"},_hoisted_31={class:"drop-down"},_hoisted_32={class:"colors-container mark"},_hoisted_33={class:"cell-container"},_hoisted_34=["onClick"],_hoisted_35={class:"row"},_hoisted_36={class:"select"},_hoisted_37={class:"row"},_hoisted_38={class:"select color-select"},_hoisted_39={class:"colors-container mark"},_hoisted_40={class:"cell-container"},_hoisted_41={class:"cell-outer"},_hoisted_42={class:"drop-down"},_hoisted_43={class:"colors-container mark"},_hoisted_44={class:"cell-container"},_hoisted_45=["onClick"],_hoisted_46={class:"row"},_hoisted_47={class:"select color-select"},_hoisted_48={class:"colors-container mark"},_hoisted_49={class:"cell-container"},_hoisted_50={class:"cell-outer"},_hoisted_51={class:"drop-down"},_hoisted_52={class:"colors-container mark"},_hoisted_53={class:"cell-container"},_hoisted_54=["onClick"],_hoisted_55={class:"row"},_hoisted_56={class:"select color-select"},_hoisted_57={class:"colors-container mark"},_hoisted_58={class:"cell-container"},_hoisted_59={class:"cell-outer"},_hoisted_60={class:"drop-down"},_hoisted_61={class:"colors-container mark"},_hoisted_62={class:"cell-container"},_hoisted_63=["onClick"],_hoisted_64={class:"dialog-footer mobile"},_hoisted_65={class:"loading"},_hoisted_66={class:"loading-compare-tip"},_sfc_main$1L={__name:"CompareSettingDialog",setup(e){const{t:n}=useI18n(),{compare:r,loadDocument:o,getOptionUrl:s}=core,u=useViewerStore(),d=useDocumentStore();getCurrentInstance().appContext.app.config.globalProperties;const f="compareSettingDialog",v=computed(()=>u.isElementOpen(f)),m=computed(()=>d.getCompareFiles),_=computed(()=>u.getCompareMode),g=ref(50),y=ref(50),w=computed(()=>d.getCompareSetting("oldFileColor")),x=computed(()=>d.getCompareSetting("newFileColor")),k=ref("0"),S=[{label:n("compare.normal"),value:"0"},{label:n("compare.multiply"),value:"1"},{label:n("compare.screen"),value:"2"},{label:n("compare.overlay"),value:"3"},{label:n("compare.darken"),value:"4"},{label:n("compare.lighten"),value:"5"},{label:n("compare.colorDodge"),value:"6"},{label:n("compare.colorBurn"),value:"7"},{label:n("compare.hardLight"),value:"8"},{label:n("compare.softLight"),value:"9"},{label:n("compare.difference"),value:"10"},{label:n("compare.exclusion"),value:"11"},{label:n("compare.hue"),value:"12"},{label:n("compare.saturation"),value:"13"},{label:n("compare.colour"),value:"14"},{label:n("compare.luminosity"),value:"15"}],E=ref(!0),T=ref(!0),M=ref("#93B9FD"),I=ref("#C0FFEC"),F=ref("#FBBDBF"),O=["#FBBDBF","#93B9FD","#FFF6B3","#C0FFEC"],N=ref(null),D=ref(null),X=ref(null),U=ref(null),Z=ref(null),j=ref(!1),Q=ref(null),ve=ref(null);watch(()=>g.value,(Te,ke)=>{const Ee=/^\d+$/;Te!==""&&(Te>100||Te<0||!Ee.test(Te))&&(g.value=ke)}),watch(()=>y.value,(Te,ke)=>{const Ee=/^\d+$/;Te!==""&&(Te>100||Te<0||!Ee.test(Te))&&(y.value=ke)});const Se=async()=>{const Te={leftFile:m.value.oldFile,leftFilePassword:m.value.oldFilePassword,rightFile:m.value.newFile,rightFilePassword:m.value.newFilePassword};if(_.value==="content"){let ke=E.value,Ee=T.value;!ke&&!Ee&&(ke=Ee=!0);const Pe={type:1,textCompare:ke,imgCompare:Ee,replaceColor:M.value,insertColor:I.value,deleteColor:F.value};Object.assign(Te,Pe)}else{const ke={type:2,inTransparency:g.value+"",newTransparency:y.value+"",coverType:k.value,inColor:w.value,newColor:x.value};Object.assign(Te,ke)}try{u.closeElement(f),j.value=!0;const ke=await r(Te);if(ke&&ke.url){d.resetSetting();const Ee={filename:n("compare.byComPDFKit")+".pdf",progress:d.setLoadingProgress,pageChangedCallback:u.setCurrentPage,scaleChangedCallback:u.setCurrentScale,annotationsNumChangedCallback:d.setAnnotationsCount,distanceChangedCallback:d.setDistance,notUpdatePwd:!0};await o(ke.url,Ee),j.value=!1;const Pe=core.getPagesCount(),Be=core.getScale();d.setTotalPages(Pe),u.setCurrentScale(Be),u.setCurrentPage(1),u.setUpload(!0),u.setCompareStatus("finished")}else if(ke&&Array.isArray(ke)){const Ee=ke[0],Pe=ke[1];d.setCompareResult({oldFile:Ee,newFile:Pe,mergeFile:ke[2]}),H(Ee.url,Ee.fileName,2),H(Pe.url,Pe.fileName,3),j.value=!1,u.setCompareStatus("next")}else j.value=!1,u.setDownloadError("Compared"),_.value==="cover"&&u.setCompareStatus("finished")}catch(ke){if(console.log(ke),j.value=!1,u.setDownloadError("Compared"),ke==="invalid_file_error"||ke==="no_password_given"||ke==="incorrect_password"){u.setUpload(!1),d.setLoadingProgress(0),u.resetSetting();const Ee=document.getElementById("fileInput");Ee.value=""}}},we=Te=>{Te.target.value||(g.value=1)},oe=Te=>{Te.target.value||(y.value=1)},ne=(Te,ke)=>{Te==="old"?d.setCompareSetting("oldFileColor",ke):Te==="new"?d.setCompareSetting("newFileColor",ke):Te==="replace"?M.value=ke:Te==="insert"?I.value=ke:Te==="delete"&&(F.value=ke),_.value==="content"?(X.value.setShow(!1),U.value.setShow(!1),Z.value.setShow(!1)):(N.value.setShow(!1),D.value.setShow(!1))},q=()=>{u.closeElement(f)};async function H(Te,ke=null,Ee){u.setUploadLoading(!0);let Pe=null;Ee===2?Pe=d.getCompareFile("oldFilePassword"):Ee===3&&(Pe=d.getCompareFile("newFilePassword"));const Be={extension:getHashParameters("extension",null),filename:ke||getHashParameters("filename",null),externalPath:getHashParameters("p",""),documentId:getHashParameters("did",null),progress:d.setLoadingProgress,pageChangedCallback:u.setCurrentPage,scaleChangedCallback:Ee===2?le():Ce(),annotationsNumChangedCallback:d.setAnnotationsCount,distanceChangedCallback:d.setDistance,notUploadPdf:!0};Pe&&(Be.pwd=Pe);try{await o(Te,Be,Ee)}catch($e){console.log($e),u.setDownloadError("Loaded")}u.setUploadLoading(!1)}const Y=Te=>{u.setCompareMode(Te)},le=Te=>{Q.value=Te},Ce=Te=>{ve.value=Te};return(Te,ke)=>{const Ee=__unplugin_components_0$j,Pe=__unplugin_components_1$8,Be=__unplugin_components_2$8,$e=_sfc_main$26,Oe=__unplugin_components_10$3;return openBlock(),createElementBlock(Fragment,null,[unref(v)?(openBlock(),createElementBlock("div",_hoisted_1$1p,[createVNode($e,{show:unref(v),dialogName:f,close:!1},{header:withCtx(()=>[createBaseVNode("div",_hoisted_2$1h,[createBaseVNode("div",{class:normalizeClass({selected:unref(_)==="content"}),onClick:ke[0]||(ke[0]=Ne=>Y("content"))},toDisplayString$1(Te.$t("compare.contentComparison")),3),createBaseVNode("div",{class:normalizeClass({selected:unref(_)==="cover"}),onClick:ke[1]||(ke[1]=Ne=>Y("cover"))},toDisplayString$1(Te.$t("compare.overlayComparison")),3)])]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:q},toDisplayString$1(Te.$t("compare.return")),1),createBaseVNode("div",{class:"rect-button blue",onClick:Se},toDisplayString$1(Te.$t("compare.compare")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_3$1b,[createBaseVNode("div",_hoisted_4$v,[createBaseVNode("div",{class:normalizeClass({selected:unref(_)==="content"}),onClick:ke[2]||(ke[2]=Ne=>Y("content"))},toDisplayString$1(Te.$t("compare.contentComparison")),3),createBaseVNode("div",{class:normalizeClass({selected:unref(_)==="cover"}),onClick:ke[3]||(ke[3]=Ne=>Y("cover"))},toDisplayString$1(Te.$t("compare.overlayComparison")),3)]),withDirectives(createBaseVNode("div",_hoisted_5$e,[createBaseVNode("p",_hoisted_6$c,toDisplayString$1(Te.$t("compare.compareItems")),1),createBaseVNode("div",_hoisted_7$6,[createBaseVNode("div",{class:"check-box",onClick:ke[4]||(ke[4]=Ne=>E.value=!E.value)},[createBaseVNode("div",{class:normalizeClass(["check",{active:E.value}])},[withDirectives(createVNode(Ee,null,null,512),[[vShow,E.value]])],2),createBaseVNode("span",null,toDisplayString$1(Te.$t("compare.text")),1)])]),createBaseVNode("div",_hoisted_8$6,[createBaseVNode("div",{class:"check-box",onClick:ke[5]||(ke[5]=Ne=>T.value=!T.value)},[createBaseVNode("div",{class:normalizeClass(["check",{active:T.value}])},[withDirectives(createVNode(Ee,null,null,512),[[vShow,T.value]])],2),createBaseVNode("span",null,toDisplayString$1(Te.$t("compare.images")),1)])])],512),[[vShow,unref(_)==="content"]]),withDirectives(createBaseVNode("div",_hoisted_9$5,[createBaseVNode("p",_hoisted_10$5,toDisplayString$1(Te.$t("opacity")),1),createBaseVNode("div",_hoisted_11$5,[createBaseVNode("span",null,toDisplayString$1(Te.$t("compare.oldFile")),1),createVNode(unref(NSlider),{value:g.value,"onUpdate:value":ke[6]||(ke[6]=Ne=>g.value=Ne),step:10,max:100,min:0},{thumb:withCtx(()=>[createVNode(Pe)]),_:1},8,["value"]),createBaseVNode("div",_hoisted_12$4,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":ke[7]||(ke[7]=Ne=>g.value=Ne),type:"number",step:"10",pattern:"\\d*",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onBlur:we},null,544),[[vModelText,g.value]])])]),createBaseVNode("div",_hoisted_13$4,[createBaseVNode("span",null,toDisplayString$1(Te.$t("compare.newFile")),1),createVNode(unref(NSlider),{value:y.value,"onUpdate:value":ke[8]||(ke[8]=Ne=>y.value=Ne),step:10,max:100,min:0},{thumb:withCtx(()=>[createVNode(Pe)]),_:1},8,["value"]),createBaseVNode("div",_hoisted_14$4,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":ke[9]||(ke[9]=Ne=>y.value=Ne),type:"number",step:"10",pattern:"\\d*",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onBlur:oe},null,544),[[vModelText,y.value]])])])],512),[[vShow,unref(_)==="cover"]]),createBaseVNode("div",_hoisted_15$4,[createBaseVNode("p",_hoisted_16$3,toDisplayString$1(Te.$t("compare.colorMark")),1),unref(_)==="cover"?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",_hoisted_17$2,[createBaseVNode("span",null,toDisplayString$1(Te.$t("compare.oldFile")),1),createVNode(unref(NPopover),{ref_key:"oldColorPopover",ref:N,placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,"z-index":72,class:"color-popover"},{trigger:withCtx(()=>[createBaseVNode("div",_hoisted_18$2,[createBaseVNode("div",_hoisted_19$2,[createBaseVNode("span",_hoisted_20$2,[createBaseVNode("span",_hoisted_21$2,[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${unref(w)};`)},null,4)])])]),createVNode(Be)])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_22$2,[(openBlock(),createElementBlock(Fragment,null,renderList(O,(Ne,J)=>createBaseVNode("div",{class:"drop-item",key:J},[createBaseVNode("div",_hoisted_23$2,[createBaseVNode("span",_hoisted_24$2,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(w)===Ne}]),onClick:fe=>ne("old",Ne)},[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${Ne};`)},null,4)],10,_hoisted_25$1)])])])),64))])]),_:1},512)]),createBaseVNode("div",_hoisted_26$1,[createBaseVNode("span",null,toDisplayString$1(Te.$t("compare.newFile")),1),createVNode(unref(NPopover),{ref_key:"newColorPopover",ref:D,placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,"z-index":72,class:"color-popover"},{trigger:withCtx(()=>[createBaseVNode("div",_hoisted_27,[createBaseVNode("div",_hoisted_28,[createBaseVNode("span",_hoisted_29,[createBaseVNode("span",_hoisted_30,[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${unref(x)};`)},null,4)])])]),createVNode(Be)])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_31,[(openBlock(),createElementBlock(Fragment,null,renderList(O,(Ne,J)=>createBaseVNode("div",{class:"drop-item",key:J},[createBaseVNode("div",_hoisted_32,[createBaseVNode("span",_hoisted_33,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(x)===Ne}]),onClick:fe=>ne("new",Ne)},[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${Ne};`)},null,4)],10,_hoisted_34)])])])),64))])]),_:1},512)]),createBaseVNode("div",_hoisted_35,[createBaseVNode("span",null,toDisplayString$1(Te.$t("compare.blendMode")),1),createVNode(unref(NPopselect),{value:k.value,"onUpdate:value":ke[10]||(ke[10]=Ne=>k.value=Ne),options:S,trigger:"click",placement:"bottom-start"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_36,[createBaseVNode("span",null,toDisplayString$1(S[parseInt(k.value)].label),1),createVNode(Be)])]),_:1},8,["value"])])],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("div",_hoisted_37,[createBaseVNode("span",null,toDisplayString$1(Te.$t("compare.replacedContent")),1),createVNode(unref(NPopover),{ref_key:"replaceColorPopover",ref:X,placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,"z-index":72,class:"color-popover"},{trigger:withCtx(()=>[createBaseVNode("div",_hoisted_38,[createBaseVNode("div",_hoisted_39,[createBaseVNode("span",_hoisted_40,[createBaseVNode("span",_hoisted_41,[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${M.value};`)},null,4)])])]),createVNode(Be)])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_42,[(openBlock(),createElementBlock(Fragment,null,renderList(O,(Ne,J)=>createBaseVNode("div",{class:"drop-item",key:J},[createBaseVNode("div",_hoisted_43,[createBaseVNode("span",_hoisted_44,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:M.value===Ne}]),onClick:fe=>ne("replace",Ne)},[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${Ne};`)},null,4)],10,_hoisted_45)])])])),64))])]),_:1},512)]),createBaseVNode("div",_hoisted_46,[createBaseVNode("span",null,toDisplayString$1(Te.$t("compare.insertedContent")),1),createVNode(unref(NPopover),{ref_key:"insertColorPopover",ref:U,placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,"z-index":72,class:"color-popover"},{trigger:withCtx(()=>[createBaseVNode("div",_hoisted_47,[createBaseVNode("div",_hoisted_48,[createBaseVNode("span",_hoisted_49,[createBaseVNode("span",_hoisted_50,[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${I.value};`)},null,4)])])]),createVNode(Be)])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_51,[(openBlock(),createElementBlock(Fragment,null,renderList(O,(Ne,J)=>createBaseVNode("div",{class:"drop-item",key:J},[createBaseVNode("div",_hoisted_52,[createBaseVNode("span",_hoisted_53,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:I.value===Ne}]),onClick:fe=>ne("insert",Ne)},[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${Ne};`)},null,4)],10,_hoisted_54)])])])),64))])]),_:1},512)]),createBaseVNode("div",_hoisted_55,[createBaseVNode("span",null,toDisplayString$1(Te.$t("compare.deletedContent")),1),createVNode(unref(NPopover),{ref_key:"deleteColorPopover",ref:Z,placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,"z-index":72,class:"color-popover"},{trigger:withCtx(()=>[createBaseVNode("div",_hoisted_56,[createBaseVNode("div",_hoisted_57,[createBaseVNode("span",_hoisted_58,[createBaseVNode("span",_hoisted_59,[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${F.value};`)},null,4)])])]),createVNode(Be)])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_60,[(openBlock(),createElementBlock(Fragment,null,renderList(O,(Ne,J)=>createBaseVNode("div",{class:"drop-item",key:J},[createBaseVNode("div",_hoisted_61,[createBaseVNode("span",_hoisted_62,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:F.value===Ne}]),onClick:fe=>ne("delete",Ne)},[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${Ne};`)},null,4)],10,_hoisted_63)])])])),64))])]),_:1},512)])],64))]),createBaseVNode("div",_hoisted_64,[createBaseVNode("div",{class:"rect-button white",onClick:q},toDisplayString$1(Te.$t("compare.return")),1),createBaseVNode("div",{class:"rect-button blue",onClick:Se},toDisplayString$1(Te.$t("compare.compare")),1)])])]),_:1},8,["show"])])):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["mask",{active:j.value}])},[withDirectives(createBaseVNode("div",_hoisted_65,[createVNode(Oe)],512),[[vShow,j.value]]),createBaseVNode("div",_hoisted_66,[createBaseVNode("span",null,toDisplayString$1(Te.$t("compare.comingSoon")),1)])],2)],64)}}},_sfc_main$1K={},_hoisted_1$1o={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},_hoisted_2$1g=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.7331 15.7936C15.026 16.0864 15.5009 16.0864 15.7937 15.7936C16.0866 15.5007 16.0866 15.0258 15.7937 14.7329L11.3743 10.3135L15.7938 5.89408C16.0867 5.60119 16.0867 5.12631 15.7938 4.83342C15.5009 4.54052 15.026 4.54053 14.7331 4.83342L10.3137 9.25284L5.89425 4.8334C5.60136 4.54051 5.12649 4.54051 4.83359 4.8334C4.5407 5.12629 4.5407 5.60117 4.83359 5.89406L9.25303 10.3135L4.83361 14.7329C4.54072 15.0258 4.54072 15.5007 4.83361 15.7936C5.1265 16.0865 5.60138 16.0865 5.89427 15.7936L10.3137 11.3742L14.7331 15.7936Z",fill:"currentColor"},null,-1),_hoisted_3$1a=[_hoisted_2$1g];function _sfc_render$S(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1o,_hoisted_3$1a)}const __unplugin_components_1$4=_export_sfc(_sfc_main$1K,[["render",_sfc_render$S]]),_sfc_main$1J={},_hoisted_1$1n={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1f=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.625 9.375V3.75H9.375V9.375H3.75V10.625H9.375V16.25H10.625V10.625H16.25V9.375H10.625Z",fill:"currentColor"},null,-1),_hoisted_3$19=[_hoisted_2$1f];function _sfc_render$R(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1n,_hoisted_3$19)}const __unplugin_components_3$6=_export_sfc(_sfc_main$1J,[["render",_sfc_render$R]]),_sfc_main$1I={},_hoisted_1$1m={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1e=createBaseVNode("rect",{x:"3.75",y:"9.375",width:"12.5",height:"1.25",fill:"currentColor"},null,-1),_hoisted_3$18=[_hoisted_2$1e];function _sfc_render$Q(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1m,_hoisted_3$18)}const __unplugin_components_1$3=_export_sfc(_sfc_main$1I,[["render",_sfc_render$Q]]),_sfc_main$1H={},_hoisted_1$1l={width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1d=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.00635 5.51037L8.01045 10.5001L12.0063 5.50012L4.00635 5.51037Z",fill:"currentColor"},null,-1),_hoisted_3$17=[_hoisted_2$1d];function _sfc_render$P(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1l,_hoisted_3$17)}const __unplugin_components_8$1=_export_sfc(_sfc_main$1H,[["render",_sfc_render$P]]),ZoomOverlay_vue_vue_type_style_index_0_lang="",_hoisted_1$1k={class:"zoom-overlay"},_hoisted_2$1c={class:"input-container"},_hoisted_3$16=["onKeydown"],_hoisted_4$u={class:"drop-down-zoom"},_hoisted_5$d=createBaseVNode("span",null,"%",-1),_hoisted_6$b={class:"drop-down zoom"},_sfc_main$1G={__name:"ZoomOverlay",props:["docNum"],setup(e){const{docNum:n}=e,r=ref(null),{proxy:{$forceUpdate:o}}=getCurrentInstance(),s=useViewerStore(),u=computed(()=>n===2?s.getOldScale:n===3?s.getNewScale:s.getScale),d=computed(()=>s.getUpload),f=()=>{u.value<=5||core.zoomOut(n)},v=()=>{u.value>1e3||core.zoomIn(n)},m=w=>{const x=/^(\d){0,4}$/,k=w.target.value;x.test(k)||k===""?n===2?s.setOldCurrentScale(k/100):n===3?s.setNewCurrentScale(k/100):s.setCurrentScale(k/100):(n===2?s.setOldCurrentScale(s.getOldScale/100):n===3?s.setNewCurrentScale(s.getNewScale/100):s.setCurrentScale(s.getScale/100),o())},_=w=>{let x="";if(w.target&&w.target.value?x=w.target.value:x=w,!x){u.value=s.getScale;return}if(/^(\d){0,4}$/.test(x)){let S=Math.max(5,x);S=Math.min(1e3,S),n===2?s.setOldCurrentScale(S/100):n===3?s.setNewCurrentScale(S/100):s.setCurrentScale(S/100),core.scaleChanged(S/100,n)}else n===2?s.setOldCurrentScale(s.getOldScale/100):n===3?s.setNewCurrentScale(s.getNewScale/100):s.setCurrentScale(s.getScale/100),o();r.value.setShow(!1)},g=computed(()=>u.value?u.value.toString().length*9:0),y=w=>{w.target.value?_(w):_("100")};return(w,x)=>{const k=__unplugin_components_8$1,S=__unplugin_components_1$3,E=_sfc_main$2C,T=__unplugin_components_3$6;return openBlock(),createElementBlock("div",_hoisted_1$1k,[createBaseVNode("div",_hoisted_2$1c,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":x[0]||(x[0]=M=>isRef(u)?u.value=M:null),type:"text",pattern:"\\d*",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onInput:m,onKeydown:withKeys(_,["enter"]),onBlur:y,style:normalizeStyle({width:unref(g)+"px"})},null,44,_hoisted_3$16),[[vModelText,unref(u)]]),createBaseVNode("div",_hoisted_4$u,[_hoisted_5$d,createVNode(unref(NPopover),{ref_key:"popover",ref:r,placement:"bottom",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,"z-index":72,disabled:!unref(d)},{trigger:withCtx(()=>[createVNode(k,{class:"arrow-left"})]),default:withCtx(()=>[createBaseVNode("div",_hoisted_6$b,[createBaseVNode("div",{class:"drop-item",onClick:x[1]||(x[1]=M=>_("10"))},"10%"),createBaseVNode("div",{class:"drop-item",onClick:x[2]||(x[2]=M=>_("25"))},"25%"),createBaseVNode("div",{class:"drop-item",onClick:x[3]||(x[3]=M=>_("50"))},"50%"),createBaseVNode("div",{class:"drop-item",onClick:x[4]||(x[4]=M=>_("100"))},"100%"),createBaseVNode("div",{class:"drop-item",onClick:x[5]||(x[5]=M=>_("150"))},"150%"),createBaseVNode("div",{class:"drop-item",onClick:x[6]||(x[6]=M=>_("200"))},"200%"),createBaseVNode("div",{class:"drop-item",onClick:x[7]||(x[7]=M=>_("300"))},"300%"),createBaseVNode("div",{class:"drop-item",onClick:x[8]||(x[8]=M=>_("400"))},"400%"),createBaseVNode("div",{class:"drop-item",onClick:x[9]||(x[9]=M=>_("500"))},"500%"),createBaseVNode("div",{class:"drop-item",onClick:x[10]||(x[10]=M=>_("1000"))},"1000%")])]),_:1},8,["disabled"])])]),createVNode(E,{img:"icon-header-zoom-out",onClick:f,title:w.$t("header.zoomOut"),class:normalizeClass({disabled:!unref(d)})},{default:withCtx(()=>[createVNode(S)]),_:1},8,["title","class"]),createVNode(E,{img:"icon-header-zoom-in",onClick:v,title:w.$t("header.zoomIn"),class:normalizeClass({disabled:!unref(d)})},{default:withCtx(()=>[createVNode(T)]),_:1},8,["title","class"])])}}},CompareDocumentContainer_vue_vue_type_style_index_0_lang="",_hoisted_1$1j={class:"old"},_hoisted_2$1b={class:"file-type"},_hoisted_3$15={class:"upload-tip"},_hoisted_4$t=createBaseVNode("br",null,null,-1),_hoisted_5$c={class:"rect-button white"},_hoisted_6$a={key:1,class:"uploaded pc"},_hoisted_7$5={class:"header-info"},_hoisted_8$5={class:"file-name"},_hoisted_9$4={class:"drop-area mobile"},_hoisted_10$4={class:"upload-tip mobile"},_hoisted_11$4={class:"text"},_hoisted_12$3={class:"rect-button white"},_hoisted_13$3={key:0,class:"file-name"},_hoisted_14$3={class:"new"},_hoisted_15$3={class:"file-type"},_hoisted_16$2={class:"upload-tip"},_hoisted_17$1=createBaseVNode("br",null,null,-1),_hoisted_18$1={class:"rect-button white"},_hoisted_19$1={key:1,class:"uploaded pc"},_hoisted_20$1={class:"header-info"},_hoisted_21$1={class:"file-name"},_hoisted_22$1={class:"drop-area mobile"},_hoisted_23$1={class:"upload-tip"},_hoisted_24$1={class:"text"},_hoisted_25={class:"rect-button white"},_hoisted_26={key:0,class:"file-name"},_sfc_main$1F={__name:"CompareDocumentContainer",props:{docNum:Number},setup(e){const{loadDocument:n,initializeViewer:r,init:o}=core,s=useViewerStore(),u=useDocumentStore(),d=computed(()=>s.getToolMode),f=computed(()=>s.getCompareStatus),v=ref(),m=ref(),_=ref(),g=ref();let y=computed(()=>u.getCompareFile("oldFile")),w=computed(()=>u.getCompareFile("newFile")),x=ref(!1),k=ref(!1);const S=computed(()=>s.getVerified);watch(()=>d.value,(U,Z)=>{Z==="compare"&&U!==Z&&(T(),N()),U==="compare"&&U!==Z&&setTimeout(()=>{S.value||alert("Invalid license"),O()},1)});const E=async(U,Z)=>{if(!U.target.files[0])return;let j=URL.createObjectURL(U.target.files[0]);const Q=await core.checkPassword(j);if(Q===!1){U.target.value="";return}const ve=U.target.files[0].name;Z==="old"&&(u.setCompareFiles("oldFile",U.target.files[0]),u.setCompareFiles("oldFilePassword",Q),D(j,ve,2)),Z==="new"&&(u.setCompareFiles("newFile",U.target.files[0]),u.setCompareFiles("newFilePassword",Q),D(j,ve,3))},T=U=>{U==="old"?(u.setCompareFiles("oldFile",null),u.setCompareFiles("oldFilePassword","")):U==="new"?(u.setCompareFiles("newFile",null),u.setCompareFiles("newFilePassword","")):u.initCompareFiles(),s.setCompareStatus("")},M=async(U,Z)=>{U.preventDefault();const j=U.dataTransfer.files;if(x.value=!1,k.value=!1,j[0].type!=="application/pdf")return;let Q=URL.createObjectURL(j[0]);const ve=await core.checkPassword(Q);if(ve===!1){U.target.value="";return}const Se=j[0].name;Z==="old"&&(u.setCompareFiles("oldFile",j[0]),u.setCompareFiles("oldFilePassword",ve),D(Q,Se,2)),Z==="new"&&(u.setCompareFiles("newFile",j[0]),u.setCompareFiles("newFilePassword",ve),D(Q,Se,3))},I=U=>{U==="old"&&(x.value=!0),U==="new"&&(k.value=!0)},F=U=>{const Z=document.getElementById("oldDropArea"),j=document.getElementById("newDropArea");let Q=U.relatedTarget;for(;Q;){if(Q===Z||Z.contains(Q)||Q===j||j.contains(Q))return;Q=Q.parentElement}x.value=!1,k.value=!1},O=()=>{core.setDocumentViewer(2,null,{$t:instance.$t}),core.setDocumentViewer(3,null,{$t:instance.$t}),o(2),r({container:v.value,viewer:m.value},2),o(3),r({container:_.value,viewer:g.value},3)},N=()=>{core.deleteDocumentViewer(2),core.deleteDocumentViewer(3)};async function D(U,Z,j){s.setUpload(!0),s.setUploadLoading(!0),await X(U,Z,j),s.setUploadLoading(!1)}async function X(U,Z,j){let Q=null;j===2?Q=u.getCompareFile("oldFilePassword"):j===3&&(Q=u.getCompareFile("newFilePassword"));const ve={extension:getHashParameters("extension",null),filename:getHashParameters("filename",null)||Z,externalPath:getHashParameters("p",""),documentId:getHashParameters("did",null),progress:u.setLoadingProgress,pageChangedCallback:s.setCurrentPage,scaleChangedCallback:j===2?s.setOldCurrentScale:s.setNewCurrentScale,annotationsNumChangedCallback:u.setAnnotationsCount,distanceChangedCallback:u.setDistance,notUploadPdf:!0};Q&&(ve.pwd=Q);try{await n(U,ve,j)}catch(Se){console.log(Se),(Se==="invalid_file_error"||Se==="no_password_given"||Se==="incorrect_password")&&(s.setUpload(!1),u.setLoadingProgress(0),s.resetSetting())}}return(U,Z)=>{const j=_sfc_main$1G,Q=__unplugin_components_1$4,ve=_sfc_main$1L,Se=_sfc_main$1M,we=_sfc_main$1N;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{class:normalizeClass(["compare-document-container",{under:unref(d)!=="compare"||unref(d)==="compare"&&unref(f)==="finished"}])},[createBaseVNode("div",_hoisted_1$1j,[createBaseVNode("div",_hoisted_2$1b,toDisplayString$1(U.$t("compare.oldFile")),1),createBaseVNode("div",{class:normalizeClass(["file-content",{"no-file":!unref(y)}])},[unref(y)?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["drop-area pc",{"drag-over":unref(x)}]),id:"oldDropArea",onDragover:Z[1]||(Z[1]=withModifiers(()=>{},["prevent"])),onDragenter:Z[2]||(Z[2]=oe=>I("old")),onDragleave:F,onDrop:Z[3]||(Z[3]=oe=>M(oe,"old"))},[createBaseVNode("div",_hoisted_3$15,[createBaseVNode("p",null,[createTextVNode(toDisplayString$1(U.$t("compare.dropFile[0]")),1),_hoisted_4$t,createTextVNode(toDisplayString$1(U.$t("compare.dropFile[1]")),1)]),createBaseVNode("div",_hoisted_5$c,[createTextVNode(toDisplayString$1(U.$t("compare.chooseOldFile")),1),createBaseVNode("input",{type:"file",onChange:Z[0]||(Z[0]=oe=>E(oe,"old")),accept:".pdf"},null,32)])])],34)),unref(y)?(openBlock(),createElementBlock("div",_hoisted_6$a,[createBaseVNode("div",_hoisted_7$5,[createVNode(j,{docNum:2}),createBaseVNode("p",_hoisted_8$5,toDisplayString$1(unref(y).name),1),createVNode(Q,{class:"close",onClick:Z[4]||(Z[4]=oe=>T("old"))})])])):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["old-file-container file-container pc",{"no-file":!unref(y)}]),ref_key:"oldFileContainer",ref:v},[createBaseVNode("div",{ref_key:"oldViewerContainer",ref:m,class:"document"},null,512)],2),createBaseVNode("div",_hoisted_9$4,[createBaseVNode("div",_hoisted_10$4,[createBaseVNode("div",_hoisted_11$4,[createBaseVNode("p",null,toDisplayString$1(U.$t("compare.oldFile")),1)]),createBaseVNode("div",_hoisted_12$3,[createTextVNode(toDisplayString$1(U.$t("compare.chooseOldFile"))+" ",1),createBaseVNode("input",{type:"file",onChange:Z[5]||(Z[5]=oe=>E(oe,"old")),accept:".pdf"},null,32),unref(y)?(openBlock(),createElementBlock("p",_hoisted_13$3,toDisplayString$1(unref(y).name),1)):createCommentVNode("",!0)])])])],2)]),createBaseVNode("div",_hoisted_14$3,[createBaseVNode("div",_hoisted_15$3,toDisplayString$1(U.$t("compare.newFile")),1),createBaseVNode("div",{class:normalizeClass(["file-content",{"no-file":!unref(w)}])},[unref(w)?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["drop-area pc",{"drag-over":unref(k)}]),id:"newDropArea",onDragover:Z[7]||(Z[7]=withModifiers(()=>{},["prevent"])),onDragenter:Z[8]||(Z[8]=oe=>I("new")),onDragleave:F,onDrop:Z[9]||(Z[9]=oe=>M(oe,"new"))},[createBaseVNode("div",_hoisted_16$2,[createBaseVNode("p",null,[createTextVNode(toDisplayString$1(U.$t("compare.dropFile[0]")),1),_hoisted_17$1,createTextVNode(toDisplayString$1(U.$t("compare.dropFile[1]")),1)]),createBaseVNode("div",_hoisted_18$1,[createTextVNode(toDisplayString$1(U.$t("compare.chooseNewFile")),1),createBaseVNode("input",{type:"file",onChange:Z[6]||(Z[6]=oe=>E(oe,"new")),accept:".pdf"},null,32)])])],34)),unref(w)?(openBlock(),createElementBlock("div",_hoisted_19$1,[createBaseVNode("div",_hoisted_20$1,[createVNode(j,{docNum:3}),createBaseVNode("p",_hoisted_21$1,toDisplayString$1(unref(w).name),1),createVNode(Q,{class:"close",onClick:Z[10]||(Z[10]=oe=>T("new"))})])])):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["new-file-container file-container pc",{"no-file":!unref(w)}]),ref_key:"newFileContainer",ref:_},[createBaseVNode("div",{ref_key:"newViewerContainer",ref:g,class:"document"},null,512)],2),createBaseVNode("div",_hoisted_22$1,[createBaseVNode("div",_hoisted_23$1,[createBaseVNode("div",_hoisted_24$1,[createBaseVNode("p",null,toDisplayString$1(U.$t("compare.newFile")),1)]),createBaseVNode("div",_hoisted_25,[createTextVNode(toDisplayString$1(U.$t("compare.chooseNewFile"))+" ",1),createBaseVNode("input",{type:"file",onChange:Z[11]||(Z[11]=oe=>E(oe,"new")),accept:".pdf"},null,32),unref(w)?(openBlock(),createElementBlock("p",_hoisted_26,toDisplayString$1(unref(w).name),1)):createCommentVNode("",!0)])])])],2)])],2),createVNode(ve),createVNode(Se),createVNode(we)],64)}}},MeasurePop_vue_vue_type_style_index_0_lang="",_hoisted_1$1i={key:0,class:"measure-pop"},_hoisted_2$1a=createBaseVNode("div",null,"Scale",-1),_hoisted_3$14=createBaseVNode("option",{value:"pt"},"pt",-1),_hoisted_4$s=[_hoisted_3$14],_hoisted_5$b=createBaseVNode("span",null,"=",-1),_hoisted_6$9=createBaseVNode("option",{value:"pt"},"pt",-1),_hoisted_7$4=[_hoisted_6$9],_hoisted_8$4={class:"precision"},_hoisted_9$3=createBaseVNode("div",{class:"precision-text"},"Precision",-1),_hoisted_10$3={class:"precision-content"},_hoisted_11$3=createBaseVNode("option",{value:"0.1"},"0.1",-1),_hoisted_12$2=[_hoisted_11$3],_hoisted_13$2={class:"distance"},_hoisted_14$2=createBaseVNode("div",null,"Distance",-1),_hoisted_15$2={class:"distance-content"},_sfc_main$1E={__name:"MeasurePop",props:["item"],setup(e){const n=useViewerStore(),r=computed(()=>n.getActiveMeasure),o=useDocumentStore(),s=computed(()=>o.getMeasure),u=computed(()=>o.getPrecision);return(d,f)=>unref(r)?(openBlock(),createElementBlock("div",_hoisted_1$1i,[_hoisted_2$1a,createBaseVNode("div",null,[withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":f[0]||(f[0]=v=>unref(s).scale.origin.num=v)},null,512),[[vModelText,unref(s).scale.origin.num]]),withDirectives(createBaseVNode("select",{class:"unit-input","onUpdate:modelValue":f[1]||(f[1]=v=>unref(s).scale.origin.unit=v)},_hoisted_4$s,512),[[vModelSelect,unref(s).scale.origin.unit]]),_hoisted_5$b,withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":f[2]||(f[2]=v=>unref(s).scale.actual.num=v)},null,512),[[vModelText,unref(s).scale.actual.num]]),withDirectives(createBaseVNode("select",{class:"unit-input","onUpdate:modelValue":f[3]||(f[3]=v=>unref(s).scale.actual.unit=v)},_hoisted_7$4,512),[[vModelSelect,unref(s).scale.actual.unit]])]),createBaseVNode("div",_hoisted_8$4,[_hoisted_9$3,createBaseVNode("div",_hoisted_10$3,[withDirectives(createBaseVNode("select",{class:"precision-input","onUpdate:modelValue":f[4]||(f[4]=v=>isRef(u)?u.value=v:null)},_hoisted_12$2,512),[[vModelSelect,unref(u)]])])]),createBaseVNode("div",_hoisted_13$2,[_hoisted_14$2,createBaseVNode("div",_hoisted_15$2,toDisplayString$1(unref(s).distance+" "+unref(s).scale.actual.unit),1)])])):createCommentVNode("",!0)}},PreventDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1h={key:0,class:"edit-dialog"},_hoisted_2$19={class:"edit"},_hoisted_3$13={class:"close"},_hoisted_4$r={class:"warning"},_hoisted_5$a={class:"title"},_hoisted_6$8={class:"des"},_sfc_main$1D={__name:"PreventDialog",setup(e){const n=useViewerStore(),r=computed(()=>n.isElementOpen("contentEditorPreventDialog")),o=computed(()=>n.isElementOpen("docEditorPreventDialog")),s=()=>n.closeElement(r.value?"contentEditorPreventDialog":"docEditorPreventDialog");return(u,d)=>{const f=__unplugin_components_11$1,v=__unplugin_components_1$5;return unref(r)||unref(o)?(openBlock(),createElementBlock("div",_hoisted_1$1h,[createBaseVNode("div",_hoisted_2$19,[createBaseVNode("div",_hoisted_3$13,[createVNode(f,{onClick:s})]),createBaseVNode("div",_hoisted_4$r,[createVNode(v)]),createBaseVNode("div",_hoisted_5$a,toDisplayString$1(u.$t("prevent.title")),1),createBaseVNode("div",_hoisted_6$8,toDisplayString$1(unref(r)?u.$t("prevent.description"):u.$t("prevent.description1")),1),createBaseVNode("div",{class:"button",onClick:s},toDisplayString$1(u.$t("ok")),1)])])):createCommentVNode("",!0)}}},_sfc_main$1C={},_hoisted_1$1g={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$18=createBaseVNode("circle",{cx:"8",cy:"8",r:"6.5",fill:"white",stroke:"#666666"},null,-1),_hoisted_3$12=[_hoisted_2$18];function _sfc_render$O(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1g,_hoisted_3$12)}const __unplugin_components_3$5=_export_sfc(_sfc_main$1C,[["render",_sfc_render$O]]),_sfc_main$1B={},_hoisted_1$1f={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$17=createBaseVNode("circle",{cx:"8",cy:"8",r:"7",fill:"#1460F3"},null,-1),_hoisted_3$11=createBaseVNode("circle",{cx:"8",cy:"8",r:"3",fill:"white"},null,-1),_hoisted_4$q=[_hoisted_2$17,_hoisted_3$11];function _sfc_render$N(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1f,_hoisted_4$q)}const __unplugin_components_2$6=_export_sfc(_sfc_main$1B,[["render",_sfc_render$N]]),_sfc_main$1A={},_hoisted_1$1e={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$16=createBaseVNode("path",{d:"M13 1L1 13",stroke:"#BABABA","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),_hoisted_3$10=createBaseVNode("path",{d:"M1 1L13 13",stroke:"#BABABA","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),_hoisted_4$p=[_hoisted_2$16,_hoisted_3$10];function _sfc_render$M(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1e,_hoisted_4$p)}const __unplugin_components_0$g=_export_sfc(_sfc_main$1A,[["render",_sfc_render$M]]),LanguageDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1d={class:"language-setting-popup"},_hoisted_2$15={class:"wrapper"},_hoisted_3$$={className:"header-container"},_hoisted_4$o=createBaseVNode("span",{class:"title"},null,-1),_hoisted_5$9={class:"content"},_hoisted_6$7={class:"title"},_sfc_main$1z={__name:"LanguageDialog",setup(e){const{locale:n}=useI18n(),r=useViewerStore(),o=computed(()=>r.isElementOpen("languageDialog")),s=()=>{r.closeElement("languageDialog"),f.value=u.value},u=computed(()=>r.getLanguage),d=ref(u.value),f=ref(u.value);watch(u,_=>{_!==d.value&&(d.value=_,f.value=_)}),watch(f,_=>{_!==d.value&&(d.value=_)});const v=_=>{f.value=_},m=()=>{n.value=f.value,r.setLanguage(f.value),window.localStorage.setItem("currentLanguage",f.value),r.closeElement("languageDialog")};return(_,g)=>{const y=__unplugin_components_0$g,w=_sfc_main$2C,x=__unplugin_components_2$6,k=__unplugin_components_3$5;return withDirectives((openBlock(),createElementBlock("div",_hoisted_1$1d,[createBaseVNode("div",_hoisted_2$15,[createBaseVNode("div",_hoisted_3$$,[_hoisted_4$o,createVNode(w,{className:"close-button",onClick:s},{default:withCtx(()=>[createVNode(y)]),_:1})]),createBaseVNode("div",_hoisted_5$9,[createBaseVNode("div",_hoisted_6$7,toDisplayString$1(_.$t("header.language")),1),createBaseVNode("div",{class:"item",onClick:g[0]||(g[0]=S=>v("en"))},[d.value==="en"?(openBlock(),createBlock(x,{key:0})):(openBlock(),createBlock(k,{key:1})),createTextVNode(" English ")]),createBaseVNode("div",{class:"item",onClick:g[1]||(g[1]=S=>v("zh-CN"))},[d.value==="zh-CN"?(openBlock(),createBlock(x,{key:0})):(openBlock(),createBlock(k,{key:1})),createTextVNode(" \u7B80\u4F53\u4E2D\u6587 ")]),createBaseVNode("span",{class:"set-btn",onClick:m},toDisplayString$1(_.$t("ok")),1)])])],512)),[[vShow,unref(o)]])}}},ModalContainer_vue_vue_type_style_index_0_lang="",_hoisted_1$1c={className:"modal-container"},_hoisted_2$14={className:"wrapper"},_hoisted_3$_={className:"header-container"},_hoisted_4$n={class:"title"},_sfc_main$1y={__name:"ModalContainer",props:["title","onCloseClick"],setup(e){return(n,r)=>{const o=__unplugin_components_0$g,s=_sfc_main$2C;return openBlock(),createElementBlock("div",_hoisted_1$1c,[createBaseVNode("div",_hoisted_2$14,[createBaseVNode("div",_hoisted_3$_,[createBaseVNode("span",_hoisted_4$n,toDisplayString$1(e.title),1),createVNode(s,{className:"close-button",onClick:e.onCloseClick},{default:withCtx(()=>[createVNode(o)]),_:1},8,["onClick"])]),renderSlot(n.$slots,"default")])])}}},_sfc_main$1x={},_hoisted_1$1b={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$13=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.3033 12.5962L3.40381 2.69666L2.6967 3.40376L12.5962 13.3033L13.3033 12.5962ZM2 7.99996C2 7.99996 2.69777 6.96095 3.82074 5.94202L9.58576 11.707C9.08063 11.8902 8.54892 12 8 12C4.68629 12 2 7.99996 2 7.99996ZM14 7.99996C14 7.99996 13.3022 9.03896 12.1793 10.0579L6.41424 4.29288C6.91937 4.10972 7.45108 3.99996 8 3.99996C11.3137 3.99996 14 7.99996 14 7.99996Z",fill:"currentColor"},null,-1),_hoisted_3$Z=[_hoisted_2$13];function _sfc_render$L(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1b,_hoisted_3$Z)}const __unplugin_components_4$2=_export_sfc(_sfc_main$1x,[["render",_sfc_render$L]]),_sfc_main$1w={},_hoisted_1$1a={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$12=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 12C11.3137 12 14 8 14 8C14 8 11.3137 4 8 4C4.68629 4 2 8 2 8C2 8 4.68629 12 8 12ZM8 10C9.10457 10 10 9.10457 10 8C10 6.89543 9.10457 6 8 6C6.89543 6 6 6.89543 6 8C6 9.10457 6.89543 10 8 10Z",fill:"currentColor"},null,-1),_hoisted_3$Y=[_hoisted_2$12];function _sfc_render$K(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1a,_hoisted_3$Y)}const __unplugin_components_3$4=_export_sfc(_sfc_main$1w,[["render",_sfc_render$K]]),_sfc_main$1v={},_hoisted_1$19={width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$11=createBaseVNode("path",{d:"M32.5 19.2321V13.1607C32.5 8.46629 28.6944 4.66071 24 4.66071V4.66071C19.3056 4.66071 15.5 8.46628 15.5 13.1607V19.2321",stroke:"#93B9FD","stroke-width":"4"},null,-1),_hoisted_3$X=createBaseVNode("rect",{x:"7",y:"16.8036",width:"34",height:"26.7143",rx:"2",fill:"currentColor"},null,-1),_hoisted_4$m=createBaseVNode("rect",{x:"15",y:"28",width:"18",height:"3",fill:"white"},null,-1),_hoisted_5$8=[_hoisted_2$11,_hoisted_3$X,_hoisted_4$m];function _sfc_render$J(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$19,_hoisted_5$8)}const __unplugin_components_2$5=_export_sfc(_sfc_main$1v,[["render",_sfc_render$J]]),MessageSuccess=""+new URL("icon-message-success.1e76b45a.svg",import.meta.url).href,SetPassword_vue_vue_type_style_index_0_lang="",_hoisted_1$18={class:"password-container"},_hoisted_2$10={class:"password-title"},_hoisted_3$W={class:"input-container"},_hoisted_4$l=["type","placeholder"],_hoisted_5$7={class:"wrong-password"},_hoisted_6$6={class:"note"},_sfc_main$1u={__name:"SetPassword",setup(e){const n=getCurrentInstance().appContext.app.config.globalProperties,r=useViewerStore(),o=ref(!1),s=ref(""),u=ref(!1),d=ref(!1),f=computed(()=>r.isElementOpen("setPasswordModal"));watch(()=>s.value,(g,y)=>{g&&(g=g.replace(/\s/g,""),g=g.replace(/[^a-zA-Z0-9!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/,""),g=g.replace(/[\u4e00-\u9fa5\uFE30-\uFFA0]/,""),s.value=g),g.length&&(d.value=!1)});const v=()=>{r.closeElement("setPasswordModal"),o.value=!1,s.value="",d.value=!1},m=async()=>{if(!s.value.length||u.value)return;if(_())d.value=!1;else{d.value=!0;return}u.value=!0;const g=await core.setPassword(s.value);v(),g?window.$message.success(n.$t("passwordDialog.setPwdSuccess"),{duration:3e3,icon:()=>h("img",{src:MessageSuccess})}):window.$message.error(n.$t("passwordDialog.setPwdFailure"),{duration:3e3,icon:()=>h("img",{src:MessageError})}),u.value=!1},_=()=>/^(?=.*[a-zA-Z]+$|.*\d+$|.*[@$!%*?&]+$)[a-zA-Z\d@$!%*?&]{1,20}$/.test(s.value);return(g,y)=>{const w=__unplugin_components_2$5,x=__unplugin_components_3$4,k=__unplugin_components_4$2,S=_sfc_main$1y;return withDirectives((openBlock(),createElementBlock("div",_hoisted_1$18,[createVNode(S,{onCloseClick:v},{default:withCtx(()=>[createVNode(w,{class:"lock-icon"}),createBaseVNode("div",_hoisted_2$10,toDisplayString$1(g.$t("passwordDialog.encryptPdf")),1),createBaseVNode("div",_hoisted_3$W,[withDirectives(createBaseVNode("input",{type:o.value?"text":"password",name:"password","onUpdate:modelValue":y[0]||(y[0]=E=>s.value=E),maxlength:"20",placeholder:g.$t("passwordDialog.enterPwdPlaceholder")},null,8,_hoisted_4$l),[[vModelDynamic,s.value]]),createBaseVNode("span",{class:"eye-btn",onClick:y[1]||(y[1]=E=>o.value=!o.value)},[o.value?(openBlock(),createBlock(x,{key:0})):(openBlock(),createBlock(k,{key:1}))])]),withDirectives(createBaseVNode("div",_hoisted_5$7,[createBaseVNode("p",null,toDisplayString$1(g.$t("passwordDialog.supportTip")),1)],512),[[vShow,d.value]]),createBaseVNode("span",{class:normalizeClass(["set-btn",{disabled:!s.value}]),onClick:m},toDisplayString$1(g.$t("passwordDialog.encrypt")),3),createBaseVNode("div",_hoisted_6$6,[createBaseVNode("p",null,toDisplayString$1(g.$t("passwordDialog.note[0]")),1),createBaseVNode("p",null,toDisplayString$1(g.$t("passwordDialog.note[1]")),1),createBaseVNode("p",null,toDisplayString$1(g.$t("passwordDialog.note[2]")),1)])]),_:1})],512)),[[vShow,unref(f)]])}}},EnterPassword_vue_vue_type_style_index_0_lang="",_hoisted_1$17={id:"passwordDialog",class:"password-dialog"},_hoisted_2$$={class:"password-container"},_hoisted_3$V={class:"modal-container"},_hoisted_4$k={class:"wrapper"},_hoisted_5$6={class:"header-container"},_hoisted_6$5=createBaseVNode("span",{class:"title"},null,-1),_hoisted_7$3={class:"password-title"},_hoisted_8$3={class:"input-container"},_hoisted_9$2=["type","placeholder"],_hoisted_10$2=createBaseVNode("div",{class:"wrong-password",id:"passwordText"},null,-1),_hoisted_11$2={class:"set-btn",id:"passwordSubmit"},_sfc_main$1t={__name:"EnterPassword",setup(e){const n=ref(!1),r=o=>{o.param===!0||o.param===!1?n.value=o.param:n.value=!n.value};return(o,s)=>{const u=__unplugin_components_0$g,d=_sfc_main$2C,f=__unplugin_components_2$5,v=__unplugin_components_3$4,m=__unplugin_components_4$2;return openBlock(),createElementBlock("div",_hoisted_1$17,[createBaseVNode("div",_hoisted_2$$,[createBaseVNode("div",_hoisted_3$V,[createBaseVNode("div",_hoisted_4$k,[createBaseVNode("div",_hoisted_5$6,[_hoisted_6$5,createVNode(d,{class:"close-button",id:"passwordCancel"},{default:withCtx(()=>[createVNode(u)]),_:1})]),createVNode(f,{class:"lock-icon"}),createBaseVNode("div",_hoisted_7$3,toDisplayString$1(o.$t("passwordDialog.enterPwd")),1),createBaseVNode("div",_hoisted_8$3,[createBaseVNode("input",{id:"password",type:n.value?"text":"password",name:"password",placeholder:o.$t("passwordDialog.enterPwdPlaceholder")},null,8,_hoisted_9$2),createBaseVNode("span",{class:"eye-btn",id:"eyeVisible",onClick:r},[n.value?(openBlock(),createBlock(v,{key:0})):(openBlock(),createBlock(m,{key:1}))])]),_hoisted_10$2,createBaseVNode("span",_hoisted_11$2,toDisplayString$1(o.$t("ok")),1)])])])])}}},_sfc_main$1s={},_hoisted_1$16={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$_=createBaseVNode("path",{d:"M7 4.07123L13 10.071L7 16.0709",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$U=[_hoisted_2$_];function _sfc_render$I(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$16,_hoisted_3$U)}const __unplugin_components_3$3=_export_sfc(_sfc_main$1s,[["render",_sfc_render$I]]),_sfc_main$1r={},_hoisted_1$15={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$Z=createBaseVNode("path",{d:"M13 4.07123L7 10.071L13 16.0709",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$T=[_hoisted_2$Z];function _sfc_render$H(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$15,_hoisted_3$T)}const __unplugin_components_1$2=_export_sfc(_sfc_main$1r,[["render",_sfc_render$H]]),PageNavOverlay_vue_vue_type_style_index_0_lang="",_hoisted_1$14={key:0,class:"page-nav"},_hoisted_2$Y={class:"form-container"},_hoisted_3$S=["onKeydown"],_sfc_main$1q={__name:"PageNavOverlay",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=ref(n.getCurrentPage);effect(()=>o.value=n.getCurrentPage);const s=computed(()=>n.getFullMode),u=computed(()=>n.getCurrentPage===1),d=computed(()=>r.getTotalPages),f=computed(()=>d.value===n.getCurrentPage);watch(o,(g,y)=>{g!==""&&d.value!==0&&(g>d.value||g<=0)&&(o.value=y)});const v=()=>{core.previousPage()&&n.setCurrentPage(core.getCurrentPage())},m=()=>{core.nextPage()&&n.setCurrentPage(core.getCurrentPage())},_=g=>{if(g.target.blur(),!g.target.value){o.value=n.getCurrentPage;return}core.pageNumberChanged(g.target)};return(g,y)=>{const w=__unplugin_components_1$2,x=_sfc_main$2C,k=__unplugin_components_3$3;return unref(d)>0&&!unref(s)?(openBlock(),createElementBlock("div",_hoisted_1$14,[createVNode(x,{className:"side-arrow-container",img:"icon-previous-left",title:unref(u)?null:g.$t("previousPage"),onClick:v,disabled:unref(u)},{default:withCtx(()=>[createVNode(w)]),_:1},8,["title","disabled"]),createBaseVNode("div",_hoisted_2$Y,[withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":y[0]||(y[0]=S=>o.value=S),onInput:y[1]||(y[1]=(...S)=>g.onChange&&g.onChange(...S)),onBlur:_,onKeydown:withKeys(_,["enter"]),tabIndex:"-1",style:normalizeStyle({width:o.value.toString().length*8+"px"}),pattern:"\\d*",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))"},null,44,_hoisted_3$S),[[vModelText,o.value]]),createBaseVNode("span",null,toDisplayString$1(`/${unref(d)}`),1)]),createVNode(x,{className:"side-arrow-container",img:"icon-next-right",title:unref(f)?null:g.$t("nextPage"),onClick:m,disabled:unref(f)},{default:withCtx(()=>[createVNode(k)]),_:1},8,["title","disabled"])])):createCommentVNode("",!0)}}},DocumentContainer_vue_vue_type_style_index_0_lang="",_hoisted_1$13=createStaticVNode('<div id="printServiceDialog" class="print-dialog"><div class="print-container"><div class="print-title">Preparing document for printing\u2026</div><div class="print-progress"><progress value="0" max="100"></progress><span class="relative-progress">0%</span></div></div></div>',1),_hoisted_2$X={key:0,class:"loading-state"},_hoisted_3$R={class:"upload-container"},_hoisted_4$j={for:"fileInput"},_sfc_main$1p={__name:"DocumentContainer",setup(e){const{loadDocument:n,initializeViewer:r,initConfig:o}=core,s=ref(),u=ref(),d=useViewerStore(),f=useDocumentStore(),v=computed(()=>d.getActiveHand),m=computed(()=>d.isElementOpen("leftPanel")),_=computed(()=>m.value?260:0),g=computed(()=>d.isElementOpen("rightPanel")||d.isElementOpen("pageModePanel")||d.isElementOpen("stampPanel")||d.isElementOpen("linkPanel")?220:0),y=computed(()=>d.getToolMode),w=computed(()=>d.getCompareStatus),x=computed(()=>["view","sign","document"].includes(d.getToolMode)||y.value==="compare"&&w.value!=="finished"?0:44),k=computed(()=>d.getUploadLoading&&d.getUpload),S=computed(()=>d.getActiveElementTab("leftPanelTab")),E=computed(()=>d.getUpload);async function T(F){const O=F.target.files[0];if(!O)return;m.value&&core.toggleSidebar(),d.$patch({fullMode:!1,currentPage:0,scale:"",themeMode:"Light",pageMode:0,scrollMode:"Vertical",activeTab:0,searchStatus:!1,activeElements:{leftPanel:!1,rightPanel:!1},activeElementsTab:{leftPanelTab:"THUMBS",rightPanelTab:"GENERAL"}}),f.resetSetting(),core.clearSearchResults(),f.setToolState(""),d.setActiceToolMode("view"),d.setUploadLoading(!0);let N=O.name;d.setUpload(!0);let D=URL.createObjectURL(O);await I(D,N),d.setUploadLoading(!1)}const M=computed(()=>f.getLoadingProgress);async function I(F,O=null){const N={extension:getHashParameters("extension",null),filename:getHashParameters("filename",null)||O,externalPath:getHashParameters("p",""),documentId:getHashParameters("did",null),progress:f.setLoadingProgress,pageChangedCallback:d.setCurrentPage,scaleChangedCallback:d.setCurrentScale,annotationsNumChangedCallback:f.setAnnotationsCount,distanceChangedCallback:f.setDistance};try{const{pwd:U}=await n(F,N);f.setFileHasPwd(!!U),f.setPassword(U),f.setCurrentPdfData(F,N),f.setOutline(core.getOutlines());const Z=j=>{j!==y.value&&d.setActiceToolMode(j)};core.addEvent("toolModeChanged",Z)}catch(U){if(console.log(U),U==="invalid_file_error"||U==="no_password_given"||U==="incorrect_password"){d.setUpload(!1),d.resetSetting();const Z=document.getElementById("fileInput");Z.value="",f.setCurrentPdfData();return}}const D=core.getPagesCount(),X=core.getScale();f.setTotalPages(D),d.setCurrentPage(1),d.setCurrentScale(X)}return window.instance.initOptions=async F=>{const O=await o(F),N=F&&F.webviewerServer?F.webviewerServer:"Standalone";if(d.setWebviewerMode(N),!O)return;d.setVierified(O);const D=document.querySelector(".thumbnail-view"),X=document.querySelector(".annotation-view"),U=document.querySelector(".outline-view"),Z=document.querySelector(".findbar-view");r({container:s.value,viewer:u.value,thumbnailView:D,outlineView:U,annotationView:X,findbarView:Z,toggleButton:document.querySelector(".toggle-button")});let j=getHashParameters("d","");j=j?JSON.parse(j):"",j=Array.isArray(j)?j:[j];const Q=d.activeTab||0;j=j[Q],j?(d.setUpload(!0),d.setUploadLoading(!0),await I(j),d.setUploadLoading(!1)):d.setUpload(!1),core.addEvent("onPagesUpdated",()=>{f.setOutline(core.getOutlines());const ve=core.getPagesCount(),Se=core.getScale();f.setTotalPages(ve),d.setCurrentPage(1),d.setCurrentScale(Se);const we=d.getScrollMode,oe=d.getPageMode,ne=we==="Vertical"?0:1;core.switchScrollMode(ne),core.switchSpreadMode(oe)})},window.instances.UI.loadDocument=async F=>{if(!F)return;m.value&&core.toggleSidebar(),d.$patch({fullMode:!1,currentPage:0,scale:"",themeMode:"Light",pageMode:0,scrollMode:"Vertical",activeTab:0,searchStatus:!1,activeElements:{leftPanel:!1,rightPanel:!1},activeElementsTab:{leftPanelTab:"THUMBS",rightPanelTab:"GENERAL"}}),f.resetSetting(),core.clearSearchResults(),f.setToolState(""),d.setActiceToolMode("view"),d.setUploadLoading(!0);let O=F.name;d.setUpload(!0);let N=typeof F=="string"?F:URL.createObjectURL(F);await I(N,O),d.setUploadLoading(!1)},(F,O)=>{const N=_sfc_main$1q,D=_sfc_main$1t,X=_sfc_main$1u,U=_sfc_main$1z,Z=_sfc_main$1D,j=_sfc_main$1E;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{ref_key:"mainContainer",ref:s,class:normalizeClass(["document-container",{"no-select":unref(v),under:unref(y)==="compare"&&unref(w)!=="finished"||unref(y)==="document"}]),style:normalizeStyle({width:`calc(100% - ${unref(_)}px - ${unref(g)}px)`,"margin-left":`${unref(_)}px`,"margin-right":`${unref(g)}px`,"margin-top":`${unref(x)}px`})},[createBaseVNode("div",{ref_key:"viewerContainer",ref:u,class:"document"},null,512),createVNode(N,{style:normalizeStyle({left:`calc(50% + ${unref(_)/2}px - ${unref(g)/2}px)`})},null,8,["style"])],6),createVNode(D),_hoisted_1$13,createVNode(X),createVNode(U),createVNode(Z),createVNode(j),unref(k)&&unref(M)<100?(openBlock(),createElementBlock("div",_hoisted_2$X,toDisplayString$1(F.$t("loading"))+"...",1)):createCommentVNode("",!0),withDirectives(createBaseVNode("div",_hoisted_3$R,[createBaseVNode("input",{id:"fileInput",type:"file",accept:".pdf",onChange:T},null,32),createBaseVNode("label",_hoisted_4$j,toDisplayString$1(F.$t("upload")),1)],512),[[vShow,!unref(E)&&unref(M)<=0&&unref(S)!=="COMPARISON"&&["compare","view"].includes(unref(y))]])],64)}}},SearchItem_vue_vue_type_style_index_0_lang="",_hoisted_1$12={key:0,class:"page-title"},_hoisted_2$W=["innerHTML"],_sfc_main$1o={__name:"SearchItem",props:["searchResults","result","currentIndex"],setup(e){const{searchResults:n,result:r,currentIndex:o}=e,s=o===0?o:o-1,u=n[o],d=n[s],f=d===u,v=d.pageNum!==u.pageNum,m=new RegExp(r.searchValue,"gi"),_=r.content.replace(m,function(g,y){return`<span class="highlight">${g}</span>`});return(g,y)=>(openBlock(),createElementBlock(Fragment,null,[f||v?(openBlock(),createElementBlock("div",_hoisted_1$12,toDisplayString$1(e.result.pageNum),1)):createCommentVNode("",!0),createBaseVNode("div",{class:"item-content",innerHTML:unref(_)},null,8,_hoisted_2$W)],64))}},SearchContent_vue_vue_type_style_index_0_lang="",_hoisted_1$11={class:"search-number"},_hoisted_2$V=createBaseVNode("div",{id:"findResultsCount",class:"toolbarLabel"},null,-1),_hoisted_3$Q={class:"search-container"},_hoisted_4$i={key:1,class:"no-annotations"},_sfc_main$1n={__name:"SearchContent",setup(e){const n=useDocumentStore(),r=computed(()=>n.getSearchResults);return(o,s)=>{const u=_sfc_main$1o;return openBlock(),createElementBlock(Fragment,null,[withDirectives(createBaseVNode("div",_hoisted_1$11,[_hoisted_2$V,createBaseVNode("div",null,toDisplayString$1(o.$t("leftPanel.page")),1)],512),[[vShow,unref(r).length]]),createBaseVNode("div",_hoisted_3$Q,[unref(r).length?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(unref(r),(d,f)=>(openBlock(),createBlock(u,{key:d,searchResults:unref(r),result:d,currentIndex:f},null,8,["searchResults","result","currentIndex"]))),128)):(openBlock(),createElementBlock("div",_hoisted_4$i,toDisplayString$1(o.$t("leftPanel.noResults")),1))])],64)}}};var FUNC_ERROR_TEXT="Expected a function",NAN=0/0,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal=typeof commonjsGlobal$1=="object"&&commonjsGlobal$1&&commonjsGlobal$1.Object===Object&&commonjsGlobal$1,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root.Date.now()};function debounce(e,n,r){var o,s,u,d,f,v,m=0,_=!1,g=!1,y=!0;if(typeof e!="function")throw new TypeError(FUNC_ERROR_TEXT);n=toNumber(n)||0,isObject$1(r)&&(_=!!r.leading,g="maxWait"in r,u=g?nativeMax(toNumber(r.maxWait)||0,n):u,y="trailing"in r?!!r.trailing:y);function w(O){var N=o,D=s;return o=s=void 0,m=O,d=e.apply(D,N),d}function x(O){return m=O,f=setTimeout(E,n),_?w(O):d}function k(O){var N=O-v,D=O-m,X=n-N;return g?nativeMin(X,u-D):X}function S(O){var N=O-v,D=O-m;return v===void 0||N>=n||N<0||g&&D>=u}function E(){var O=now();if(S(O))return T(O);f=setTimeout(E,k(O))}function T(O){return f=void 0,y&&o?w(O):(o=s=void 0,d)}function M(){f!==void 0&&clearTimeout(f),m=0,o=v=s=f=void 0}function I(){return f===void 0?d:T(now())}function F(){var O=now(),N=S(O);if(o=arguments,s=this,v=O,N){if(f===void 0)return x(v);if(g)return f=setTimeout(E,n),w(v)}return f===void 0&&(f=setTimeout(E,n)),d}return F.cancel=M,F.flush=I,F}function isObject$1(e){var n=typeof e;return!!e&&(n=="object"||n=="function")}function isObjectLike(e){return!!e&&typeof e=="object"}function isSymbol(e){return typeof e=="symbol"||isObjectLike(e)&&objectToString.call(e)==symbolTag}function toNumber(e){if(typeof e=="number")return e;if(isSymbol(e))return NAN;if(isObject$1(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=isObject$1(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=e.replace(reTrim,"");var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}var lodash_debounce=debounce;const SearchHeader_vue_vue_type_style_index_0_lang="",_hoisted_1$10={id:"findbar",class:"findbar"},_hoisted_2$U={id:"findbarInputContainer",class:"findbar-input-container"},_hoisted_3$P={class:"input-container"},_hoisted_4$h=["placeholder"],_hoisted_5$5={class:"button-container"},_sfc_main$1m={__name:"SearchHeader",setup(e){const r=ref(!1),o=ref(""),s=useDocumentStore(),u=useViewerStore(),d=ref([]),f=ref(0),v=()=>{const k=d.value,S=f.value;if(k.length>0){const E=S<=0?k.length-1:S-1;core.setActiveSearchResult(toRaw(k[E]),E),f.value=E}},m=()=>{const k=d.value,S=f.value;if(k.length>0){const E=S===k.length-1?0:S+1;core.setActiveSearchResult(toRaw(k[E]),E),f.value=E}},_=()=>{r.value=!1,o.value="",s.setSearchResults([]),core.clearSearchResults(),d.value=[]},g=lodash_debounce(async k=>{if(k&&k.length>0){r.value=!0;const S=await core.search(k);s.setSearchResults(S),d.value=S}else _()},200),y=k=>{g(k)};watch(o,()=>{y(o.value),f.value=0});const w=computed(()=>u.getActiveElementTab("leftPanelTab")),x=computed(()=>u.isElementOpen("leftPanel"));return watch([w,x],()=>{(w.value!=="SEARCH"||!x.value)&&(core.clearSearchResults(),o.value="",f.value=0)}),(k,S)=>{const E=__unplugin_components_0$m,T=__unplugin_components_1$2,M=_sfc_main$2C,I=__unplugin_components_3$3;return openBlock(),createElementBlock("div",_hoisted_1$10,[createBaseVNode("div",_hoisted_2$U,[createBaseVNode("div",_hoisted_3$P,[withDirectives(createBaseVNode("input",{type:"text",autocomplete:"off",placeholder:k.$t("leftPanel.searchPdf"),"onUpdate:modelValue":S[0]||(S[0]=F=>o.value=F)},null,8,_hoisted_4$h),[[vModelText,o.value]]),createVNode(E,{id:"emptyInput",class:normalizeClass(["empty-input",!o.value&&"hidden"]),onClick:_},null,8,["class"])]),createBaseVNode("div",_hoisted_5$5,[createVNode(M,{img:"icon-previous-left",id:"findPrevious",class:normalizeClass(["toolbarButton",!d.value.length&&"disabled"]),title:k.$t("leftPanel.previousPhrase"),onClick:v},{default:withCtx(()=>[createVNode(T)]),_:1},8,["class","title"]),createVNode(M,{img:"icon-next-right",id:"findNext",class:normalizeClass(["toolbarButton",!d.value.length&&"disabled"]),title:k.$t("leftPanel.nextPhrase"),onClick:m},{default:withCtx(()=>[createVNode(I)]),_:1},8,["class","title"])])])])}}},_sfc_main$1l={};function _sfc_render$G(e,n){const r=_sfc_main$1m,o=_sfc_main$1n;return openBlock(),createElementBlock(Fragment,null,[createVNode(r),createVNode(o)],64)}const __unplugin_components_5$2=_export_sfc(_sfc_main$1l,[["render",_sfc_render$G]]),Icon_vue_vue_type_style_index_0_lang="",_hoisted_1$$=["xlink:href"],_sfc_main$1k={__name:"Icon",props:["className","color","glyph","fillColor","strokeColor","disabled"],setup(e){const n=e,r={filter:n.color};n.disabled||(r.color=n.color);const o=computed(()=>`#${n.glyph}`);return(s,u)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["icon",[e.className,{disabled:e.disabled}]]),style:r},[(openBlock(),createElementBlock("svg",mergeProps({class:"svg-icon","aria-hidden":"true"},toHandlers(s.$attrs,!0)),[createBaseVNode("use",{"xlink:href":unref(o)},null,8,_hoisted_1$$)],16))],2))}};var _a;const isClient=typeof window<"u",isString$1=e=>typeof e=="string";isClient&&((_a=window==null?void 0:window.navigator)==null?void 0:_a.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function resolveUnref(e){return typeof e=="function"?e():unref(e)}function promiseTimeout(e,n=!1,r="Timeout"){return new Promise((o,s)=>{setTimeout(n?()=>s(r):o,e)})}function createUntil(e,n=!1){function r(g,{flush:y="sync",deep:w=!1,timeout:x,throwOnTimeout:k}={}){let S=null;const T=[new Promise(M=>{S=watch(e,I=>{g(I)!==n&&(S==null||S(),M(I))},{flush:y,deep:w,immediate:!0})})];return x!=null&&T.push(promiseTimeout(x,k).then(()=>resolveUnref(e)).finally(()=>S==null?void 0:S())),Promise.race(T)}function o(g,y){if(!isRef(g))return r(I=>I===g,y);const{flush:w="sync",deep:x=!1,timeout:k,throwOnTimeout:S}=y!=null?y:{};let E=null;const M=[new Promise(I=>{E=watch([e,g],([F,O])=>{n!==(F===O)&&(E==null||E(),I(F))},{flush:w,deep:x,immediate:!0})})];return k!=null&&M.push(promiseTimeout(k,S).then(()=>resolveUnref(e)).finally(()=>(E==null||E(),resolveUnref(e)))),Promise.race(M)}function s(g){return r(y=>Boolean(y),g)}function u(g){return o(null,g)}function d(g){return o(void 0,g)}function f(g){return r(Number.isNaN,g)}function v(g,y){return r(w=>{const x=Array.from(w);return x.includes(g)||x.includes(resolveUnref(g))},y)}function m(g){return _(1,g)}function _(g=1,y){let w=-1;return r(()=>(w+=1,w>=g),y)}return Array.isArray(resolveUnref(e))?{toMatch:r,toContains:v,changed:m,changedTimes:_,get not(){return createUntil(e,!n)}}:{toMatch:r,toBe:o,toBeTruthy:s,toBeNull:u,toBeNaN:f,toBeUndefined:d,changed:m,changedTimes:_,get not(){return createUntil(e,!n)}}}function until(e){return createUntil(e)}var axios$3={exports:{}},axios$2={exports:{}},bind$2=function e(n,r){return function(){for(var s=new Array(arguments.length),u=0;u<s.length;u++)s[u]=arguments[u];return n.apply(r,s)}},bind$1=bind$2,toString=Object.prototype.toString,kindOf=function(e){return function(n){var r=toString.call(n);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function kindOfTest(e){return e=e.toLowerCase(),function(r){return kindOf(r)===e}}function isArray(e){return Array.isArray(e)}function isUndefined(e){return typeof e>"u"}function isBuffer(e){return e!==null&&!isUndefined(e)&&e.constructor!==null&&!isUndefined(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e){var n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&isArrayBuffer(e.buffer),n}function isString(e){return typeof e=="string"}function isNumber(e){return typeof e=="number"}function isObject(e){return e!==null&&typeof e=="object"}function isPlainObject(e){if(kindOf(e)!=="object")return!1;var n=Object.getPrototypeOf(e);return n===null||n===Object.prototype}var isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList");function isFunction(e){return toString.call(e)==="[object Function]"}function isStream(e){return isObject(e)&&isFunction(e.pipe)}function isFormData(e){var n="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||toString.call(e)===n||isFunction(e.toString)&&e.toString()===n)}var isURLSearchParams=kindOfTest("URLSearchParams");function trim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function forEach(e,n){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),isArray(e))for(var r=0,o=e.length;r<o;r++)n.call(null,e[r],r,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.call(null,e[s],s,e)}function merge(){var e={};function n(s,u){isPlainObject(e[u])&&isPlainObject(s)?e[u]=merge(e[u],s):isPlainObject(s)?e[u]=merge({},s):isArray(s)?e[u]=s.slice():e[u]=s}for(var r=0,o=arguments.length;r<o;r++)forEach(arguments[r],n);return e}function extend$1(e,n,r){return forEach(n,function(s,u){r&&typeof s=="function"?e[u]=bind$1(s,r):e[u]=s}),e}function stripBOM(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function inherits(e,n,r,o){e.prototype=Object.create(n.prototype,o),e.prototype.constructor=e,r&&Object.assign(e.prototype,r)}function toFlatObject(e,n,r){var o,s,u,d={};n=n||{};do{for(o=Object.getOwnPropertyNames(e),s=o.length;s-- >0;)u=o[s],d[u]||(n[u]=e[u],d[u]=!0);e=Object.getPrototypeOf(e)}while(e&&(!r||r(e,n))&&e!==Object.prototype);return n}function endsWith(e,n,r){e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=n.length;var o=e.indexOf(n,r);return o!==-1&&o===r}function toArray(e){if(!e)return null;var n=e.length;if(isUndefined(n))return null;for(var r=new Array(n);n-- >0;)r[n]=e[n];return r}var isTypedArray=function(e){return function(n){return e&&n instanceof e}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),utils$b={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend:extend$1,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,isTypedArray,isFileList},utils$a=utils$b;function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$1=function e(n,r,o){if(!r)return n;var s;if(o)s=o(r);else if(utils$a.isURLSearchParams(r))s=r.toString();else{var u=[];utils$a.forEach(r,function(v,m){v===null||typeof v>"u"||(utils$a.isArray(v)?m=m+"[]":v=[v],utils$a.forEach(v,function(g){utils$a.isDate(g)?g=g.toISOString():utils$a.isObject(g)&&(g=JSON.stringify(g)),u.push(encode(m)+"="+encode(g))}))}),s=u.join("&")}if(s){var d=n.indexOf("#");d!==-1&&(n=n.slice(0,d)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n},utils$9=utils$b;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function e(n,r,o){return this.handlers.push({fulfilled:n,rejected:r,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function e(n){this.handlers[n]&&(this.handlers[n]=null)};InterceptorManager$1.prototype.forEach=function e(n){utils$9.forEach(this.handlers,function(o){o!==null&&n(o)})};var InterceptorManager_1=InterceptorManager$1,utils$8=utils$b,normalizeHeaderName$1=function e(n,r){utils$8.forEach(n,function(s,u){u!==r&&u.toUpperCase()===r.toUpperCase()&&(n[r]=s,delete n[u])})},utils$7=utils$b;function AxiosError$2(e,n,r,o,s){Error.call(this),this.message=e,this.name="AxiosError",n&&(this.code=n),r&&(this.config=r),o&&(this.request=o),s&&(this.response=s)}utils$7.inherits(AxiosError$2,Error,{toJSON:function e(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var prototype=AxiosError$2.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){descriptors[e]={value:e}});Object.defineProperties(AxiosError$2,descriptors);Object.defineProperty(prototype,"isAxiosError",{value:!0});AxiosError$2.from=function(e,n,r,o,s,u){var d=Object.create(prototype);return utils$7.toFlatObject(e,d,function(v){return v!==Error.prototype}),AxiosError$2.call(d,e.message,n,r,o,s),d.name=e.name,u&&Object.assign(d,u),d};var AxiosError_1=AxiosError$2,transitional={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},utils$6=utils$b;function toFormData$1(e,n){n=n||new FormData;var r=[];function o(u){return u===null?"":utils$6.isDate(u)?u.toISOString():utils$6.isArrayBuffer(u)||utils$6.isTypedArray(u)?typeof Blob=="function"?new Blob([u]):Buffer.from(u):u}function s(u,d){if(utils$6.isPlainObject(u)||utils$6.isArray(u)){if(r.indexOf(u)!==-1)throw Error("Circular reference detected in "+d);r.push(u),utils$6.forEach(u,function(v,m){if(!utils$6.isUndefined(v)){var _=d?d+"."+m:m,g;if(v&&!d&&typeof v=="object"){if(utils$6.endsWith(m,"{}"))v=JSON.stringify(v);else if(utils$6.endsWith(m,"[]")&&(g=utils$6.toArray(v))){g.forEach(function(y){!utils$6.isUndefined(y)&&n.append(_,o(y))});return}}s(v,_)}}),r.pop()}else n.append(d,o(u))}return s(e),n}var toFormData_1=toFormData$1,settle,hasRequiredSettle;function requireSettle(){if(hasRequiredSettle)return settle;hasRequiredSettle=1;var e=AxiosError_1;return settle=function(r,o,s){var u=s.config.validateStatus;!s.status||!u||u(s.status)?r(s):o(new e("Request failed with status code "+s.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))},settle}var cookies,hasRequiredCookies;function requireCookies(){if(hasRequiredCookies)return cookies;hasRequiredCookies=1;var e=utils$b;return cookies=e.isStandardBrowserEnv()?function(){return{write:function(o,s,u,d,f,v){var m=[];m.push(o+"="+encodeURIComponent(s)),e.isNumber(u)&&m.push("expires="+new Date(u).toGMTString()),e.isString(d)&&m.push("path="+d),e.isString(f)&&m.push("domain="+f),v===!0&&m.push("secure"),document.cookie=m.join("; ")},read:function(o){var s=document.cookie.match(new RegExp("(^|;\\s*)("+o+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(o){this.write(o,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),cookies}var isAbsoluteURL$1=function e(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)},combineURLs$1=function e(n,r){return r?n.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):n},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function e(n,r){return n&&!isAbsoluteURL(r)?combineURLs(n,r):r},parseHeaders,hasRequiredParseHeaders;function requireParseHeaders(){if(hasRequiredParseHeaders)return parseHeaders;hasRequiredParseHeaders=1;var e=utils$b,n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return parseHeaders=function(o){var s={},u,d,f;return o&&e.forEach(o.split(`
`),function(m){if(f=m.indexOf(":"),u=e.trim(m.substr(0,f)).toLowerCase(),d=e.trim(m.substr(f+1)),u){if(s[u]&&n.indexOf(u)>=0)return;u==="set-cookie"?s[u]=(s[u]?s[u]:[]).concat([d]):s[u]=s[u]?s[u]+", "+d:d}}),s},parseHeaders}var isURLSameOrigin,hasRequiredIsURLSameOrigin;function requireIsURLSameOrigin(){if(hasRequiredIsURLSameOrigin)return isURLSameOrigin;hasRequiredIsURLSameOrigin=1;var e=utils$b;return isURLSameOrigin=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a"),s;function u(d){var f=d;return r&&(o.setAttribute("href",f),f=o.href),o.setAttribute("href",f),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:o.pathname.charAt(0)==="/"?o.pathname:"/"+o.pathname}}return s=u(window.location.href),function(f){var v=e.isString(f)?u(f):f;return v.protocol===s.protocol&&v.host===s.host}}():function(){return function(){return!0}}(),isURLSameOrigin}var CanceledError_1,hasRequiredCanceledError;function requireCanceledError(){if(hasRequiredCanceledError)return CanceledError_1;hasRequiredCanceledError=1;var e=AxiosError_1,n=utils$b;function r(o){e.call(this,o==null?"canceled":o,e.ERR_CANCELED),this.name="CanceledError"}return n.inherits(r,e,{__CANCEL__:!0}),CanceledError_1=r,CanceledError_1}var parseProtocol,hasRequiredParseProtocol;function requireParseProtocol(){return hasRequiredParseProtocol||(hasRequiredParseProtocol=1,parseProtocol=function(n){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return r&&r[1]||""}),parseProtocol}var xhr,hasRequiredXhr;function requireXhr(){if(hasRequiredXhr)return xhr;hasRequiredXhr=1;var e=utils$b,n=requireSettle(),r=requireCookies(),o=buildURL$1,s=buildFullPath$1,u=requireParseHeaders(),d=requireIsURLSameOrigin(),f=transitional,v=AxiosError_1,m=requireCanceledError(),_=requireParseProtocol();return xhr=function(y){return new Promise(function(x,k){var S=y.data,E=y.headers,T=y.responseType,M;function I(){y.cancelToken&&y.cancelToken.unsubscribe(M),y.signal&&y.signal.removeEventListener("abort",M)}e.isFormData(S)&&e.isStandardBrowserEnv()&&delete E["Content-Type"];var F=new XMLHttpRequest;if(y.auth){var O=y.auth.username||"",N=y.auth.password?unescape(encodeURIComponent(y.auth.password)):"";E.Authorization="Basic "+btoa(O+":"+N)}var D=s(y.baseURL,y.url);F.open(y.method.toUpperCase(),o(D,y.params,y.paramsSerializer),!0),F.timeout=y.timeout;function X(){if(!!F){var j="getAllResponseHeaders"in F?u(F.getAllResponseHeaders()):null,Q=!T||T==="text"||T==="json"?F.responseText:F.response,ve={data:Q,status:F.status,statusText:F.statusText,headers:j,config:y,request:F};n(function(we){x(we),I()},function(we){k(we),I()},ve),F=null}}if("onloadend"in F?F.onloadend=X:F.onreadystatechange=function(){!F||F.readyState!==4||F.status===0&&!(F.responseURL&&F.responseURL.indexOf("file:")===0)||setTimeout(X)},F.onabort=function(){!F||(k(new v("Request aborted",v.ECONNABORTED,y,F)),F=null)},F.onerror=function(){k(new v("Network Error",v.ERR_NETWORK,y,F,F)),F=null},F.ontimeout=function(){var Q=y.timeout?"timeout of "+y.timeout+"ms exceeded":"timeout exceeded",ve=y.transitional||f;y.timeoutErrorMessage&&(Q=y.timeoutErrorMessage),k(new v(Q,ve.clarifyTimeoutError?v.ETIMEDOUT:v.ECONNABORTED,y,F)),F=null},e.isStandardBrowserEnv()){var U=(y.withCredentials||d(D))&&y.xsrfCookieName?r.read(y.xsrfCookieName):void 0;U&&(E[y.xsrfHeaderName]=U)}"setRequestHeader"in F&&e.forEach(E,function(Q,ve){typeof S>"u"&&ve.toLowerCase()==="content-type"?delete E[ve]:F.setRequestHeader(ve,Q)}),e.isUndefined(y.withCredentials)||(F.withCredentials=!!y.withCredentials),T&&T!=="json"&&(F.responseType=y.responseType),typeof y.onDownloadProgress=="function"&&F.addEventListener("progress",y.onDownloadProgress),typeof y.onUploadProgress=="function"&&F.upload&&F.upload.addEventListener("progress",y.onUploadProgress),(y.cancelToken||y.signal)&&(M=function(j){!F||(k(!j||j&&j.type?new m:j),F.abort(),F=null)},y.cancelToken&&y.cancelToken.subscribe(M),y.signal&&(y.signal.aborted?M():y.signal.addEventListener("abort",M))),S||(S=null);var Z=_(D);if(Z&&["http","https","file"].indexOf(Z)===-1){k(new v("Unsupported protocol "+Z+":",v.ERR_BAD_REQUEST,y));return}F.send(S)})},xhr}var _null,hasRequired_null;function require_null(){return hasRequired_null||(hasRequired_null=1,_null=null),_null}var utils$5=utils$b,normalizeHeaderName=normalizeHeaderName$1,AxiosError$1=AxiosError_1,transitionalDefaults=transitional,toFormData=toFormData_1,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,n){!utils$5.isUndefined(e)&&utils$5.isUndefined(e["Content-Type"])&&(e["Content-Type"]=n)}function getDefaultAdapter(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=requireXhr()),e}function stringifySafely(e,n,r){if(utils$5.isString(e))try{return(n||JSON.parse)(e),utils$5.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(r||JSON.stringify)(e)}var defaults$4={transitional:transitionalDefaults,adapter:getDefaultAdapter(),transformRequest:[function e(n,r){if(normalizeHeaderName(r,"Accept"),normalizeHeaderName(r,"Content-Type"),utils$5.isFormData(n)||utils$5.isArrayBuffer(n)||utils$5.isBuffer(n)||utils$5.isStream(n)||utils$5.isFile(n)||utils$5.isBlob(n))return n;if(utils$5.isArrayBufferView(n))return n.buffer;if(utils$5.isURLSearchParams(n))return setContentTypeIfUnset(r,"application/x-www-form-urlencoded;charset=utf-8"),n.toString();var o=utils$5.isObject(n),s=r&&r["Content-Type"],u;if((u=utils$5.isFileList(n))||o&&s==="multipart/form-data"){var d=this.env&&this.env.FormData;return toFormData(u?{"files[]":n}:n,d&&new d)}else if(o||s==="application/json")return setContentTypeIfUnset(r,"application/json"),stringifySafely(n);return n}],transformResponse:[function e(n){var r=this.transitional||defaults$4.transitional,o=r&&r.silentJSONParsing,s=r&&r.forcedJSONParsing,u=!o&&this.responseType==="json";if(u||s&&utils$5.isString(n)&&n.length)try{return JSON.parse(n)}catch(d){if(u)throw d.name==="SyntaxError"?AxiosError$1.from(d,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):d}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:require_null()},validateStatus:function e(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$5.forEach(["delete","get","head"],function e(n){defaults$4.headers[n]={}});utils$5.forEach(["post","put","patch"],function e(n){defaults$4.headers[n]=utils$5.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$4,utils$4=utils$b,defaults$3=defaults_1,transformData$1=function e(n,r,o){var s=this||defaults$3;return utils$4.forEach(o,function(d){n=d.call(s,n,r)}),n},isCancel$1,hasRequiredIsCancel;function requireIsCancel(){return hasRequiredIsCancel||(hasRequiredIsCancel=1,isCancel$1=function(n){return!!(n&&n.__CANCEL__)}),isCancel$1}var utils$3=utils$b,transformData=transformData$1,isCancel=requireIsCancel(),defaults$2=defaults_1,CanceledError=requireCanceledError();function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError}var dispatchRequest$1=function e(n){throwIfCancellationRequested(n),n.headers=n.headers||{},n.data=transformData.call(n,n.data,n.headers,n.transformRequest),n.headers=utils$3.merge(n.headers.common||{},n.headers[n.method]||{},n.headers),utils$3.forEach(["delete","get","head","post","put","patch","common"],function(s){delete n.headers[s]});var r=n.adapter||defaults$2.adapter;return r(n).then(function(s){return throwIfCancellationRequested(n),s.data=transformData.call(n,s.data,s.headers,n.transformResponse),s},function(s){return isCancel(s)||(throwIfCancellationRequested(n),s&&s.response&&(s.response.data=transformData.call(n,s.response.data,s.response.headers,n.transformResponse))),Promise.reject(s)})},utils$2=utils$b,mergeConfig$2=function e(n,r){r=r||{};var o={};function s(_,g){return utils$2.isPlainObject(_)&&utils$2.isPlainObject(g)?utils$2.merge(_,g):utils$2.isPlainObject(g)?utils$2.merge({},g):utils$2.isArray(g)?g.slice():g}function u(_){if(utils$2.isUndefined(r[_])){if(!utils$2.isUndefined(n[_]))return s(void 0,n[_])}else return s(n[_],r[_])}function d(_){if(!utils$2.isUndefined(r[_]))return s(void 0,r[_])}function f(_){if(utils$2.isUndefined(r[_])){if(!utils$2.isUndefined(n[_]))return s(void 0,n[_])}else return s(void 0,r[_])}function v(_){if(_ in r)return s(n[_],r[_]);if(_ in n)return s(void 0,n[_])}var m={url:d,method:d,data:d,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:v};return utils$2.forEach(Object.keys(n).concat(Object.keys(r)),function(g){var y=m[g]||u,w=y(g);utils$2.isUndefined(w)&&y!==v||(o[g]=w)}),o},data,hasRequiredData;function requireData(){return hasRequiredData||(hasRequiredData=1,data={version:"0.27.2"}),data}var VERSION=requireData().version,AxiosError=AxiosError_1,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(e,n){validators$1[e]=function(o){return typeof o===e||"a"+(n<1?"n ":" ")+e}});var deprecatedWarnings={};validators$1.transitional=function e(n,r,o){function s(u,d){return"[Axios v"+VERSION+"] Transitional option '"+u+"'"+d+(o?". "+o:"")}return function(u,d,f){if(n===!1)throw new AxiosError(s(d," has been removed"+(r?" in "+r:"")),AxiosError.ERR_DEPRECATED);return r&&!deprecatedWarnings[d]&&(deprecatedWarnings[d]=!0,console.warn(s(d," has been deprecated since v"+r+" and will be removed in the near future"))),n?n(u,d,f):!0}};function assertOptions(e,n,r){if(typeof e!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);for(var o=Object.keys(e),s=o.length;s-- >0;){var u=o[s],d=n[u];if(d){var f=e[u],v=f===void 0||d(f,u,e);if(v!==!0)throw new AxiosError("option "+u+" must be "+v,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new AxiosError("Unknown option "+u,AxiosError.ERR_BAD_OPTION)}}var validator$1={assertOptions,validators:validators$1},utils$1=utils$b,buildURL=buildURL$1,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,buildFullPath=buildFullPath$1,validator=validator$1,validators=validator.validators;function Axios$1(e){this.defaults=e,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function e(n,r){typeof n=="string"?(r=r||{},r.url=n):r=n||{},r=mergeConfig$1(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var o=r.transitional;o!==void 0&&validator.assertOptions(o,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1);var s=[],u=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(r)===!1||(u=u&&w.synchronous,s.unshift(w.fulfilled,w.rejected))});var d=[];this.interceptors.response.forEach(function(w){d.push(w.fulfilled,w.rejected)});var f;if(!u){var v=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(v,s),v=v.concat(d),f=Promise.resolve(r);v.length;)f=f.then(v.shift(),v.shift());return f}for(var m=r;s.length;){var _=s.shift(),g=s.shift();try{m=_(m)}catch(y){g(y);break}}try{f=dispatchRequest(m)}catch(y){return Promise.reject(y)}for(;d.length;)f=f.then(d.shift(),d.shift());return f};Axios$1.prototype.getUri=function e(n){n=mergeConfig$1(this.defaults,n);var r=buildFullPath(n.baseURL,n.url);return buildURL(r,n.params,n.paramsSerializer)};utils$1.forEach(["delete","get","head","options"],function e(n){Axios$1.prototype[n]=function(r,o){return this.request(mergeConfig$1(o||{},{method:n,url:r,data:(o||{}).data}))}});utils$1.forEach(["post","put","patch"],function e(n){function r(o){return function(u,d,f){return this.request(mergeConfig$1(f||{},{method:n,headers:o?{"Content-Type":"multipart/form-data"}:{},url:u,data:d}))}}Axios$1.prototype[n]=r(),Axios$1.prototype[n+"Form"]=r(!0)});var Axios_1=Axios$1,CancelToken_1,hasRequiredCancelToken;function requireCancelToken(){if(hasRequiredCancelToken)return CancelToken_1;hasRequiredCancelToken=1;var e=requireCanceledError();function n(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var o;this.promise=new Promise(function(d){o=d});var s=this;this.promise.then(function(u){if(!!s._listeners){var d,f=s._listeners.length;for(d=0;d<f;d++)s._listeners[d](u);s._listeners=null}}),this.promise.then=function(u){var d,f=new Promise(function(v){s.subscribe(v),d=v}).then(u);return f.cancel=function(){s.unsubscribe(d)},f},r(function(d){s.reason||(s.reason=new e(d),o(s.reason))})}return n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.prototype.subscribe=function(o){if(this.reason){o(this.reason);return}this._listeners?this._listeners.push(o):this._listeners=[o]},n.prototype.unsubscribe=function(o){if(!!this._listeners){var s=this._listeners.indexOf(o);s!==-1&&this._listeners.splice(s,1)}},n.source=function(){var o,s=new n(function(d){o=d});return{token:s,cancel:o}},CancelToken_1=n,CancelToken_1}var spread,hasRequiredSpread;function requireSpread(){return hasRequiredSpread||(hasRequiredSpread=1,spread=function(n){return function(o){return n.apply(null,o)}}),spread}var isAxiosError,hasRequiredIsAxiosError;function requireIsAxiosError(){if(hasRequiredIsAxiosError)return isAxiosError;hasRequiredIsAxiosError=1;var e=utils$b;return isAxiosError=function(r){return e.isObject(r)&&r.isAxiosError===!0},isAxiosError}var utils=utils$b,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults$1=defaults_1;function createInstance(e){var n=new Axios(e),r=bind(Axios.prototype.request,n);return utils.extend(r,Axios.prototype,n),utils.extend(r,n),r.create=function(s){return createInstance(mergeConfig(e,s))},r}var axios$1=createInstance(defaults$1);axios$1.Axios=Axios;axios$1.CanceledError=requireCanceledError();axios$1.CancelToken=requireCancelToken();axios$1.isCancel=requireIsCancel();axios$1.VERSION=requireData().version;axios$1.toFormData=toFormData_1;axios$1.AxiosError=AxiosError_1;axios$1.Cancel=axios$1.CanceledError;axios$1.all=function e(n){return Promise.all(n)};axios$1.spread=requireSpread();axios$1.isAxiosError=requireIsAxiosError();axios$2.exports=axios$1;axios$2.exports.default=axios$1;(function(e){e.exports=axios$2.exports})(axios$3);const axios=getDefaultExportFromCjs$1(axios$3.exports);var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,n,r)=>n in e?__defProp(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,__spreadValues=(e,n)=>{for(var r in n||(n={}))__hasOwnProp.call(n,r)&&__defNormalProp(e,r,n[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(n))__propIsEnum.call(n,r)&&__defNormalProp(e,r,n[r]);return e},__spreadProps=(e,n)=>__defProps(e,__getOwnPropDescs(n));function useAxios(...e){const n=typeof e[0]=="string"?e[0]:void 0,r=isString$1(n)?1:0;let o={},s=axios,u={immediate:!!r,shallow:!0};const d=F=>!!(F!=null&&F.request);e.length>0+r&&(d(e[0+r])?s=e[0+r]:o=e[0+r]),e.length>1+r&&d(e[1+r])&&(s=e[1+r]),(e.length===2+r&&!d(e[1+r])||e.length===3+r)&&(u=e[e.length-1]);const f=shallowRef(),v=u.shallow?shallowRef():ref(),m=ref(!1),_=ref(!1),g=ref(!1),y=shallowRef(),w=axios.CancelToken.source;let x=w();const k=F=>{m.value||!_.value||(x.cancel(F),x=w(),g.value=!0,_.value=!1,m.value=!1)},S=F=>{_.value=F,m.value=!F},E=()=>new Promise((F,O)=>{until(m).toBe(!0).then(()=>F(I)).catch(O)}),T=(F,O)=>E().then(F,O),M=(F=n,O={})=>{y.value=void 0;const N=typeof F=="string"?F:n!=null?n:O.url;return N===void 0?(y.value=new axios$3.exports.AxiosError(axios$3.exports.AxiosError.ERR_INVALID_URL),m.value=!0,{then:T}):(k(),S(!0),s(N,__spreadProps(__spreadValues(__spreadValues({},o),typeof F=="object"?F:O),{cancelToken:x.token})).then(D=>{var X;f.value=D;const U=D.data;v.value=U,(X=u.onSuccess)==null||X.call(u,U)}).catch(D=>{var X;y.value=D,(X=u.onError)==null||X.call(u,D)}).finally(()=>S(!1)),{then:T})};u.immediate&&n&&M();const I={response:f,data:v,error:y,finished:m,loading:_,isFinished:m,isLoading:_,cancel:k,isAborted:g,canceled:g,aborted:g,isCanceled:g,abort:k,execute:M};return __spreadProps(__spreadValues({},I),{then:T})}const Compare_vue_vue_type_style_index_0_lang="",_hoisted_1$_=createBaseVNode("div",{class:"file-text"},[createBaseVNode("span",{class:"circle circle-red"}),createBaseVNode("p",null,"First File")],-1),_hoisted_2$T=createBaseVNode("div",{class:"file-text"},[createBaseVNode("span",{class:"circle circle-blue"}),createBaseVNode("p",null,"Second File")],-1),_sfc_main$1j={__name:"Compare",setup(e){const{loadDocument:n,getOptionUrl:r}=core,o=ref(),s=ref(),u=useViewerStore(),d=useDocumentStore();let f=reactive({firstFile:null,secondFile:null});const v=ref(!1),m=w=>w.click(),_=computed(()=>!(f.firstFile&&f.secondFile)),g=(w,x)=>{w.preventDefault(),f[x]=w.target.files[0]},y=async()=>{const w=r();if(!v.value&&!_.value){v.value=!0;const x=new FormData;x.append("firstFile",f.firstFile),x.append("secondFile",f.secondFile);const{data:k,isFinished:S}=await useAxios(`${w.compareBaseUrl||w.baseUrl}${w.compareUrl}`,{method:"POST",data:x,responseType:"arraybuffer"});if(S.value){v.value=!1;const E={progress:d.setLoadingProgress,pageChangedCallback:u.setCurrentPage,scaleChangedCallback:u.setCurrentScale,annotationsNumChangedCallback:d.setAnnotationsCount,distanceChangedCallback:d.setDistance};await n(k.value,E),u.toggleElement("leftPanel"),core.toggleSidebar();const T=core.getPagesCount(),M=core.getScale();d.setTotalPages(T),u.setCurrentScale(M),u.setCurrentPage(1)}}};return(w,x)=>{const k=_sfc_main$1k;return openBlock(),createElementBlock(Fragment,null,[_hoisted_1$_,createBaseVNode("button",{onClick:x[0]||(x[0]=S=>m(o.value))},"Select File"),createBaseVNode("input",{ref_key:"firstFileInput",ref:o,class:"hidden",type:"file",onChange:x[1]||(x[1]=S=>g(S,"firstFile")),accept:".pdf"},null,544),createBaseVNode("p",null,toDisplayString$1(unref(f).firstFile&&unref(f).firstFile.name),1),_hoisted_2$T,createBaseVNode("button",{onClick:x[2]||(x[2]=S=>m(s.value))},"Select File"),createBaseVNode("input",{ref_key:"secondFileInput",ref:s,class:"hidden",type:"file",onChange:x[3]||(x[3]=S=>g(S,"secondFile")),accept:".pdf"},null,544),createBaseVNode("p",null,toDisplayString$1(unref(f).secondFile&&unref(f).secondFile.name),1),createBaseVNode("button",{class:normalizeClass(["compare-button",{disabled:unref(_)}]),onClick:y},[createTextVNode(" Compare "),v.value?(openBlock(),createBlock(k,{key:0,glyph:"icon-loading",class:normalizeClass(w.iconClassName)},null,8,["class"])):createCommentVNode("",!0)],2)],64)}}},_sfc_main$1i={},_hoisted_1$Z={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$S=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.01025 4L11 8.0041L6 12L6.01025 4Z",fill:"currentColor"},null,-1),_hoisted_3$O=[_hoisted_2$S];function _sfc_render$F(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$Z,_hoisted_3$O)}const __unplugin_components_0$f=_export_sfc(_sfc_main$1i,[["render",_sfc_render$F]]),Outlines_vue_vue_type_style_index_0_lang="",_hoisted_1$Y={class:"outlines"},_hoisted_2$R={class:"outline-item-title"},_sfc_main$1h={__name:"Outlines",props:{outline:{type:Object,required:!0}},setup(e,{emit:n}){const{outline:r}=e,o=useDocumentStore(),s="-",u=w=>{const x=w.title;return`${d(w)}${s}${x}`},d=w=>f(w).reverse().join(s),f=w=>{const x=[];let k=w;for(;k;)x.push(k.index),k=k.parent;return x},v=computed(()=>u(r)),m=ref(!1),_=computed(()=>o.getActiveOutlineId===v.value),g=()=>{o.setActiveOutlineId(v.value),core.pageNumberChanged({value:r.pageNumber})},y=w=>{w.stopPropagation(),m.value=!m.value};return(w,x)=>{const k=__unplugin_components_0$f,S=resolveComponent("Outlines",!0);return openBlock(),createElementBlock("div",_hoisted_1$Y,[createBaseVNode("div",{class:normalizeClass(["outline-item",unref(_)&&"selected"]),onClick:g},[createBaseVNode("div",{class:normalizeClass(["outline-item-toggle",m.value&&"active"]),style:normalizeStyle({marginLeft:12*e.outline.level+"px"})},[e.outline.children.length?(openBlock(),createBlock(k,{key:0,onClick:y})):createCommentVNode("",!0)],6),createBaseVNode("div",_hoisted_2$R,toDisplayString$1(e.outline.title),1)],2),m.value?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(e.outline.children,E=>(openBlock(),createBlock(S,{outline:E},null,8,["outline"]))),256)):createCommentVNode("",!0)])}}},OutlinesPanel_vue_vue_type_style_index_0_lang="",_hoisted_1$X={class:"outline"},_hoisted_2$Q={class:"outline-title"},_hoisted_3$N={key:0,class:"outlines-container"},_hoisted_4$g={key:1,class:"no-outlines"},_sfc_main$1g={__name:"OutlinesPanel",setup(e){const n=useDocumentStore(),r=computed(()=>n.getOutlines);return(o,s)=>{const u=_sfc_main$1h;return openBlock(),createElementBlock("div",_hoisted_1$X,[createBaseVNode("div",_hoisted_2$Q,toDisplayString$1(o.$t("leftPanel.outlines")),1),unref(r).length?(openBlock(),createElementBlock("div",_hoisted_3$N,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(r),d=>(openBlock(),createBlock(u,{outline:d},null,8,["outline"]))),256))])):(openBlock(),createElementBlock("div",_hoisted_4$g,toDisplayString$1(o.$t("leftPanel.noOutlines")),1))])}}},_sfc_main$1f={},_hoisted_1$W={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$P=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.982 9.97521C13.1875 9.28619 14 7.98798 14 6.5C14 4.29086 12.2091 2.5 10 2.5C7.79086 2.5 6 4.29086 6 6.5C6 7.98798 6.81248 9.2862 8.018 9.97522C8.10745 10.1032 8.5 10.6962 8.5 11.25C8.5 11.875 8 12.5 8 12.5H2V14H18V12.5H12C12 12.5 11.5 11.875 11.5 11.25C11.5 10.6962 11.8926 10.1032 11.982 9.97521ZM18 17.5V16H2V17.5H18Z",fill:"currentColor"},null,-1),_hoisted_3$M=[_hoisted_2$P];function _sfc_render$E(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$W,_hoisted_3$M)}const __unplugin_components_10=_export_sfc(_sfc_main$1f,[["render",_sfc_render$E]]),_sfc_main$1e={},_hoisted_1$V={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$O=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18 3H2V15H5V18L10 15H18V3ZM5 6H11V7.5H5V6ZM5 9.5H15V11H5V9.5Z",fill:"currentColor"},null,-1),_hoisted_3$L=[_hoisted_2$O];function _sfc_render$D(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$V,_hoisted_3$L)}const __unplugin_components_0$e=_export_sfc(_sfc_main$1e,[["render",_sfc_render$D]]),_sfc_main$1d={},_hoisted_1$U={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$N=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.75 2.75V6H15.25V4.25H10.75V16.25H12.3337V17.75H7.66699V16.25H9.25V4.25H4.75V6H3.25V2.75H16.75Z",fill:"currentColor"},null,-1),_hoisted_3$K=[_hoisted_2$N];function _sfc_render$C(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$U,_hoisted_3$K)}const __unplugin_components_9$1=_export_sfc(_sfc_main$1d,[["render",_sfc_render$C]]),_sfc_main$1c={},_hoisted_1$T={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$M=createBaseVNode("circle",{cx:"10",cy:"10",r:"7",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$J=[_hoisted_2$M];function _sfc_render$B(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$T,_hoisted_3$J)}const __unplugin_components_5$1=_export_sfc(_sfc_main$1c,[["render",_sfc_render$B]]),_sfc_main$1b={},_hoisted_1$S={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$L=createBaseVNode("rect",{x:"2",y:"4",width:"16",height:"12",rx:"1",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$I=[_hoisted_2$L];function _sfc_render$A(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$S,_hoisted_3$I)}const __unplugin_components_6$1=_export_sfc(_sfc_main$1b,[["render",_sfc_render$A]]),_sfc_main$1a={},_hoisted_1$R={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$K=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.99164 3.52673L9.24244 3.56122L9.31142 5.05963L10.0606 5.02514L14.0731 4.84043L3.46978 15.4438L2.93945 15.9741L4.00011 17.0348L4.53044 16.5044L15.3467 5.68818L15.5465 10.0282L15.581 10.7774L17.0794 10.7084L17.0449 9.95918L16.769 3.96553L16.7345 3.21632L15.9853 3.25081L9.99164 3.52673Z",fill:"currentColor"},null,-1),_hoisted_3$H=[_hoisted_2$K];function _sfc_render$z(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$R,_hoisted_3$H)}const __unplugin_components_7=_export_sfc(_sfc_main$1a,[["render",_sfc_render$z]]),_sfc_main$19={},_hoisted_1$Q={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$J=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.4697 3.46967L17.5304 4.53033L3.53039 18.5303L2.46973 17.4697L16.4697 3.46967Z",fill:"currentColor"},null,-1),_hoisted_3$G=[_hoisted_2$J];function _sfc_render$y(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$Q,_hoisted_3$G)}const __unplugin_components_8=_export_sfc(_sfc_main$19,[["render",_sfc_render$y]]),_sfc_main$18={},_hoisted_1$P={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$I=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.57675 19.1757L1 17.7787L2.23629 17.3267L3.39858 16.9142L4.48804 16.5416L5.17445 16.3153L5.82936 16.1069L6.4531 15.9162L7.04603 15.7435L7.60849 15.5886L8.14082 15.4517L8.64337 15.3328C8.72467 15.3145 8.80474 15.297 8.88359 15.2802L9.34212 15.1884L9.77173 15.1147C11.0868 14.91 11.972 14.9785 12.4769 15.3262C12.7932 15.544 13.0243 15.7942 13.1655 16.0808C13.4151 16.5876 13.3721 16.9889 13.1388 17.5664L13.0118 17.8607L13.1178 17.8549C13.3318 17.8376 13.6024 17.7943 13.926 17.7239L14.1265 17.6785L14.3516 17.6235L14.8394 17.4928C14.9249 17.4688 15.0125 17.4435 15.1022 17.4171L15.6652 17.245L16.2781 17.0452L16.9408 16.8178L17.653 16.5629L18.4146 16.2803L19 17.6741L17.9462 18.0639L17.2946 18.2959L16.6828 18.5054L16.1097 18.6922C15.925 18.7507 15.7466 18.8054 15.5744 18.8563L15.076 18.9974C14.9159 19.0406 14.7618 19.0799 14.6135 19.1154L14.186 19.2101C13.0235 19.4455 12.271 19.399 11.8322 19.0549C11.4563 18.7602 11.3001 18.3582 11.3527 17.9256C11.3673 17.8051 11.3855 17.7161 11.4219 17.6072L11.4922 17.4224L11.6818 16.9751L11.7255 16.8448C11.7439 16.7759 11.7424 16.7393 11.7305 16.715C11.7102 16.674 11.6563 16.6156 11.5457 16.5395C11.436 16.4639 11.2053 16.4374 10.8597 16.4606L10.6123 16.4834C10.5683 16.4885 10.5228 16.4941 10.476 16.5004L10.1783 16.5455L9.84745 16.6054L9.48395 16.6803L9.08816 16.7701C9.01952 16.7863 8.94956 16.8031 8.87827 16.8206L8.43479 16.933L7.95999 17.0604L7.45428 17.203L6.63861 17.4454L5.75561 17.7221L4.80659 18.0333L3.79289 18.3792L3.08181 18.6292L2.34296 18.8946L1.57675 19.1757Z",fill:"#64BC38"},null,-1),_hoisted_3$F=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.7275 1.00012L16.9702 5.24276L14.8385 7.37449L10.5958 3.13185L12.7275 1.00012ZM9.8887 3.83896L3.53515 10.1925L2.12094 15.8494L7.77779 14.4352L14.1313 8.0816L9.8887 3.83896Z",fill:"currentColor"},null,-1),_hoisted_4$f=[_hoisted_2$I,_hoisted_3$F];function _sfc_render$x(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$P,_hoisted_4$f)}const __unplugin_components_4$1=_export_sfc(_sfc_main$18,[["render",_sfc_render$x]]),_sfc_main$17={},_hoisted_1$O={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$H=createBaseVNode("rect",{y:"17",width:"20",height:"1.5",fill:"#FF0000"},null,-1),_hoisted_3$E=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13 14H13.9922L12.8923 11.25H7.10772L6.00776 14H7V15H3V14H4.39223L9.30364 1.72146H10.6964L15.6078 14H17V15H13V14ZM7.5077 10.25H12.4923L10 4.019L7.5077 10.25Z",fill:"currentColor"},null,-1),_hoisted_4$e=[_hoisted_2$H,_hoisted_3$E];function _sfc_render$w(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$O,_hoisted_4$e)}const __unplugin_components_1$1=_export_sfc(_sfc_main$17,[["render",_sfc_render$w]]),_sfc_main$16={},_hoisted_1$N={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$G=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.3494 15.3928H13.2139V16.3928H17.4996V15.3928H15.9649L10.6964 2.22146H9.30364L4.03508 15.3929H2.5V16.3929H6.78571V15.3929H5.65062L10 4.519L14.3494 15.3928Z",fill:"currentColor"},null,-1),_hoisted_3$D=createBaseVNode("rect",{y:"10.5",width:"20",height:"1.5",fill:"#FF0000"},null,-1),_hoisted_4$d=[_hoisted_2$G,_hoisted_3$D];function _sfc_render$v(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$N,_hoisted_4$d)}const __unplugin_components_2$4=_export_sfc(_sfc_main$16,[["render",_sfc_render$v]]),_sfc_main$15={},_hoisted_1$M={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$F=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13 14H13.9922L12.8923 11.25H7.10772L6.00776 14H7V15H3V14H4.39223L9.30364 1.72146H10.6964L15.6078 14H17V15H13V14ZM7.5077 10.25H12.4923L10 4.019L7.5077 10.25Z",fill:"currentColor"},null,-1),_hoisted_3$C=createBaseVNode("path",{d:"M5.08299 17.9328L5.22219 18.0199C6.28806 18.7527 7.65967 18.7912 8.75772 18.1356L8.93809 18.0199C9.52914 17.6135 10.2863 17.5845 10.9011 17.9328L11.0403 18.0199C12.1062 18.7527 13.4778 18.7912 14.5759 18.1356L14.7562 18.0199C15.3473 17.6135 16.1045 17.5845 16.7193 17.9328L16.8585 18.0199C17.0638 18.161 17.2824 18.2777 17.5107 18.3686C17.8854 18.5177 18.3064 18.3253 18.451 17.9389C18.5956 17.5525 18.4091 17.1183 18.0344 16.9692C17.9483 16.9349 17.8647 16.8942 17.784 16.8471L17.6653 16.7718C16.5994 16.039 15.2278 16.0004 14.1298 16.6561L13.9494 16.7718C13.3584 17.1781 12.6011 17.2072 11.9864 16.8589L11.8472 16.7718C10.7813 16.039 9.40969 16.0004 8.31164 16.6561L8.13126 16.7718C7.54022 17.1781 6.78301 17.2072 6.16823 16.8589L6.02902 16.7718C4.96316 16.039 3.59155 16.0004 2.4935 16.6561L2.31312 16.7718C2.23868 16.823 2.16125 16.8684 2.08133 16.908L1.95963 16.9629C1.5862 17.1154 1.40339 17.5513 1.55131 17.9364C1.69922 18.3215 2.12186 18.51 2.49529 18.3575C2.64087 18.298 2.78242 18.228 2.91898 18.1478L3.11995 18.0199C3.711 17.6135 4.46821 17.5845 5.08299 17.9328Z",fill:"#FF0000"},null,-1),_hoisted_4$c=[_hoisted_2$F,_hoisted_3$C];function _sfc_render$u(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$M,_hoisted_4$c)}const __unplugin_components_3$2=_export_sfc(_sfc_main$15,[["render",_sfc_render$u]]),_sfc_main$14={},_hoisted_1$L={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$E=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2 2H20L18 18H0L2 2Z",fill:"#FEF87C"},null,-1),_hoisted_3$B=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6078 15.5L10.6964 3.22145H9.30364L4.39223 15.5H3V16.5H7V15.5H6.00776L7.10772 12.75H12.8923L13.9922 15.5H13V16.5H17V15.5H15.6078ZM12.4923 11.75L10 5.51899L7.5077 11.75H12.4923Z",fill:"currentColor"},null,-1),_hoisted_4$b=[_hoisted_2$E,_hoisted_3$B];function _sfc_render$t(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$L,_hoisted_4$b)}const __unplugin_components_0$d=_export_sfc(_sfc_main$14,[["render",_sfc_render$t]]);var dayjs_min={exports:{}};(function(e,n){(function(r,o){e.exports=o()})(commonjsGlobal$1,function(){var r=1e3,o=6e4,s=36e5,u="millisecond",d="second",f="minute",v="hour",m="day",_="week",g="month",y="quarter",w="year",x="date",k="Invalid Date",S=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,E=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,T={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Q){var ve=["th","st","nd","rd"],Se=Q%100;return"["+Q+(ve[(Se-20)%10]||ve[Se]||ve[0])+"]"}},M=function(Q,ve,Se){var we=String(Q);return!we||we.length>=ve?Q:""+Array(ve+1-we.length).join(Se)+Q},I={s:M,z:function(Q){var ve=-Q.utcOffset(),Se=Math.abs(ve),we=Math.floor(Se/60),oe=Se%60;return(ve<=0?"+":"-")+M(we,2,"0")+":"+M(oe,2,"0")},m:function Q(ve,Se){if(ve.date()<Se.date())return-Q(Se,ve);var we=12*(Se.year()-ve.year())+(Se.month()-ve.month()),oe=ve.clone().add(we,g),ne=Se-oe<0,q=ve.clone().add(we+(ne?-1:1),g);return+(-(we+(Se-oe)/(ne?oe-q:q-oe))||0)},a:function(Q){return Q<0?Math.ceil(Q)||0:Math.floor(Q)},p:function(Q){return{M:g,y:w,w:_,d:m,D:x,h:v,m:f,s:d,ms:u,Q:y}[Q]||String(Q||"").toLowerCase().replace(/s$/,"")},u:function(Q){return Q===void 0}},F="en",O={};O[F]=T;var N=function(Q){return Q instanceof Z},D=function Q(ve,Se,we){var oe;if(!ve)return F;if(typeof ve=="string"){var ne=ve.toLowerCase();O[ne]&&(oe=ne),Se&&(O[ne]=Se,oe=ne);var q=ve.split("-");if(!oe&&q.length>1)return Q(q[0])}else{var H=ve.name;O[H]=ve,oe=H}return!we&&oe&&(F=oe),oe||!we&&F},X=function(Q,ve){if(N(Q))return Q.clone();var Se=typeof ve=="object"?ve:{};return Se.date=Q,Se.args=arguments,new Z(Se)},U=I;U.l=D,U.i=N,U.w=function(Q,ve){return X(Q,{locale:ve.$L,utc:ve.$u,x:ve.$x,$offset:ve.$offset})};var Z=function(){function Q(Se){this.$L=D(Se.locale,null,!0),this.parse(Se)}var ve=Q.prototype;return ve.parse=function(Se){this.$d=function(we){var oe=we.date,ne=we.utc;if(oe===null)return new Date(NaN);if(U.u(oe))return new Date;if(oe instanceof Date)return new Date(oe);if(typeof oe=="string"&&!/Z$/i.test(oe)){var q=oe.match(S);if(q){var H=q[2]-1||0,Y=(q[7]||"0").substring(0,3);return ne?new Date(Date.UTC(q[1],H,q[3]||1,q[4]||0,q[5]||0,q[6]||0,Y)):new Date(q[1],H,q[3]||1,q[4]||0,q[5]||0,q[6]||0,Y)}}return new Date(oe)}(Se),this.$x=Se.x||{},this.init()},ve.init=function(){var Se=this.$d;this.$y=Se.getFullYear(),this.$M=Se.getMonth(),this.$D=Se.getDate(),this.$W=Se.getDay(),this.$H=Se.getHours(),this.$m=Se.getMinutes(),this.$s=Se.getSeconds(),this.$ms=Se.getMilliseconds()},ve.$utils=function(){return U},ve.isValid=function(){return this.$d.toString()!==k},ve.isSame=function(Se,we){var oe=X(Se);return this.startOf(we)<=oe&&oe<=this.endOf(we)},ve.isAfter=function(Se,we){return X(Se)<this.startOf(we)},ve.isBefore=function(Se,we){return this.endOf(we)<X(Se)},ve.$g=function(Se,we,oe){return U.u(Se)?this[we]:this.set(oe,Se)},ve.unix=function(){return Math.floor(this.valueOf()/1e3)},ve.valueOf=function(){return this.$d.getTime()},ve.startOf=function(Se,we){var oe=this,ne=!!U.u(we)||we,q=U.p(Se),H=function(Be,$e){var Oe=U.w(oe.$u?Date.UTC(oe.$y,$e,Be):new Date(oe.$y,$e,Be),oe);return ne?Oe:Oe.endOf(m)},Y=function(Be,$e){return U.w(oe.toDate()[Be].apply(oe.toDate("s"),(ne?[0,0,0,0]:[23,59,59,999]).slice($e)),oe)},le=this.$W,Ce=this.$M,Te=this.$D,ke="set"+(this.$u?"UTC":"");switch(q){case w:return ne?H(1,0):H(31,11);case g:return ne?H(1,Ce):H(0,Ce+1);case _:var Ee=this.$locale().weekStart||0,Pe=(le<Ee?le+7:le)-Ee;return H(ne?Te-Pe:Te+(6-Pe),Ce);case m:case x:return Y(ke+"Hours",0);case v:return Y(ke+"Minutes",1);case f:return Y(ke+"Seconds",2);case d:return Y(ke+"Milliseconds",3);default:return this.clone()}},ve.endOf=function(Se){return this.startOf(Se,!1)},ve.$set=function(Se,we){var oe,ne=U.p(Se),q="set"+(this.$u?"UTC":""),H=(oe={},oe[m]=q+"Date",oe[x]=q+"Date",oe[g]=q+"Month",oe[w]=q+"FullYear",oe[v]=q+"Hours",oe[f]=q+"Minutes",oe[d]=q+"Seconds",oe[u]=q+"Milliseconds",oe)[ne],Y=ne===m?this.$D+(we-this.$W):we;if(ne===g||ne===w){var le=this.clone().set(x,1);le.$d[H](Y),le.init(),this.$d=le.set(x,Math.min(this.$D,le.daysInMonth())).$d}else H&&this.$d[H](Y);return this.init(),this},ve.set=function(Se,we){return this.clone().$set(Se,we)},ve.get=function(Se){return this[U.p(Se)]()},ve.add=function(Se,we){var oe,ne=this;Se=Number(Se);var q=U.p(we),H=function(Ce){var Te=X(ne);return U.w(Te.date(Te.date()+Math.round(Ce*Se)),ne)};if(q===g)return this.set(g,this.$M+Se);if(q===w)return this.set(w,this.$y+Se);if(q===m)return H(1);if(q===_)return H(7);var Y=(oe={},oe[f]=o,oe[v]=s,oe[d]=r,oe)[q]||1,le=this.$d.getTime()+Se*Y;return U.w(le,this)},ve.subtract=function(Se,we){return this.add(-1*Se,we)},ve.format=function(Se){var we=this,oe=this.$locale();if(!this.isValid())return oe.invalidDate||k;var ne=Se||"YYYY-MM-DDTHH:mm:ssZ",q=U.z(this),H=this.$H,Y=this.$m,le=this.$M,Ce=oe.weekdays,Te=oe.months,ke=function($e,Oe,Ne,J){return $e&&($e[Oe]||$e(we,ne))||Ne[Oe].slice(0,J)},Ee=function($e){return U.s(H%12||12,$e,"0")},Pe=oe.meridiem||function($e,Oe,Ne){var J=$e<12?"AM":"PM";return Ne?J.toLowerCase():J},Be={YY:String(this.$y).slice(-2),YYYY:this.$y,M:le+1,MM:U.s(le+1,2,"0"),MMM:ke(oe.monthsShort,le,Te,3),MMMM:ke(Te,le),D:this.$D,DD:U.s(this.$D,2,"0"),d:String(this.$W),dd:ke(oe.weekdaysMin,this.$W,Ce,2),ddd:ke(oe.weekdaysShort,this.$W,Ce,3),dddd:Ce[this.$W],H:String(H),HH:U.s(H,2,"0"),h:Ee(1),hh:Ee(2),a:Pe(H,Y,!0),A:Pe(H,Y,!1),m:String(Y),mm:U.s(Y,2,"0"),s:String(this.$s),ss:U.s(this.$s,2,"0"),SSS:U.s(this.$ms,3,"0"),Z:q};return ne.replace(E,function($e,Oe){return Oe||Be[$e]||q.replace(":","")})},ve.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},ve.diff=function(Se,we,oe){var ne,q=U.p(we),H=X(Se),Y=(H.utcOffset()-this.utcOffset())*o,le=this-H,Ce=U.m(this,H);return Ce=(ne={},ne[w]=Ce/12,ne[g]=Ce,ne[y]=Ce/3,ne[_]=(le-Y)/6048e5,ne[m]=(le-Y)/864e5,ne[v]=le/s,ne[f]=le/o,ne[d]=le/r,ne)[q]||le,oe?Ce:U.a(Ce)},ve.daysInMonth=function(){return this.endOf(g).$D},ve.$locale=function(){return O[this.$L]},ve.locale=function(Se,we){if(!Se)return this.$L;var oe=this.clone(),ne=D(Se,we,!0);return ne&&(oe.$L=ne),oe},ve.clone=function(){return U.w(this.$d,this)},ve.toDate=function(){return new Date(this.valueOf())},ve.toJSON=function(){return this.isValid()?this.toISOString():null},ve.toISOString=function(){return this.$d.toISOString()},ve.toString=function(){return this.$d.toUTCString()},Q}(),j=Z.prototype;return X.prototype=j,[["$ms",u],["$s",d],["$m",f],["$H",v],["$W",m],["$M",g],["$y",w],["$D",x]].forEach(function(Q){j[Q[1]]=function(ve){return this.$g(ve,Q[0],Q[1])}}),X.extend=function(Q,ve){return Q.$i||(Q(ve,Z,X),Q.$i=!0),X},X.locale=D,X.isDayjs=N,X.unix=function(Q){return X(1e3*Q)},X.en=O[F],X.Ls=O,X.p={},X})})(dayjs_min);const dayjs=dayjs_min.exports,AnnotationContent_vue_vue_type_style_index_0_lang="",_hoisted_1$K={class:"annotation-view"},_hoisted_2$D={class:"page-title"},_hoisted_3$A=["onClick"],_hoisted_4$a={class:"item-header"},_hoisted_5$4={key:0,class:"item-content"},_hoisted_6$4={key:1,class:"no-annotations"},_sfc_main$13={__name:"AnnotationContent",setup(e){const n=useDocumentStore();let r=computed(()=>n.getAllAnnotations);const o=({annotations:u})=>{var f;n.initAnnotations(u);const d=getCurrentInstance();(f=d==null?void 0:d.proxy)==null||f.$forceUpdate()};core.addEvent("annotationChanged",o);const s=u=>{core.pageNumberChanged({value:(u*1+1).toString()})};return(u,d)=>{const f=__unplugin_components_0$d,v=__unplugin_components_3$2,m=__unplugin_components_2$4,_=__unplugin_components_1$1,g=__unplugin_components_4$1,y=__unplugin_components_8,w=__unplugin_components_7,x=__unplugin_components_6$1,k=__unplugin_components_5$1,S=__unplugin_components_9$1,E=__unplugin_components_0$e,T=__unplugin_components_10;return openBlock(),createElementBlock("div",_hoisted_1$K,[unref(r).annotationsCount>0?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(unref(r).annotations,(M,I)=>(openBlock(),createElementBlock("div",null,[M.pageAnnotationsCount>0?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",_hoisted_2$D,[createBaseVNode("span",null,toDisplayString$1(u.$t("leftPanel.page"))+" "+toDisplayString$1(I*1+1),1),createBaseVNode("span",null,toDisplayString$1(M.pageAnnotationsCount),1)]),(openBlock(!0),createElementBlock(Fragment,null,renderList(M.annotations,F=>(openBlock(),createElementBlock(Fragment,null,[!F.isDelete&&F.type!=="link"?(openBlock(),createElementBlock("div",{key:0,class:"annotation-item",onClick:O=>s(F.pageIndex)},[createBaseVNode("div",_hoisted_4$a,[F.type==="highlight"?(openBlock(),createBlock(f,{key:0})):F.type==="squiggly"?(openBlock(),createBlock(v,{key:1})):F.type==="strikeout"?(openBlock(),createBlock(m,{key:2})):F.type==="underline"?(openBlock(),createBlock(_,{key:3})):F.type==="ink"?(openBlock(),createBlock(g,{key:4})):F.type==="line"&&((F.tail==="None"||F.tail==="Unknown")&&(F.head==="None"||F.head==="Unknown")||!F.tail&&!F.head)?(openBlock(),createBlock(y,{key:5})):F.type==="line"&&(F.tail==="OpenArrow"||F.head==="OpenArrow"||F.arrow)?(openBlock(),createBlock(w,{key:6})):F.type==="square"?(openBlock(),createBlock(x,{key:7})):F.type==="circle"?(openBlock(),createBlock(k,{key:8})):F.type==="freetext"?(openBlock(),createBlock(S,{key:9})):F.type==="text"?(openBlock(),createBlock(E,{key:10})):F.type==="image"||F.type==="stamp"?(openBlock(),createBlock(T,{key:11})):createCommentVNode("",!0),createBaseVNode("span",null,toDisplayString$1(unref(dayjs)(F.date).format("DD/MM/YYYY HH:mm:ss")),1)]),F.contents?(openBlock(),createElementBlock("div",_hoisted_5$4,toDisplayString$1(F.contents),1)):createCommentVNode("",!0)],8,_hoisted_3$A)):createCommentVNode("",!0)],64))),256))],64)):createCommentVNode("",!0)]))),256)):(openBlock(),createElementBlock("div",_hoisted_6$4,toDisplayString$1(u.$t("leftPanel.noAnnotations")),1))])}}},_sfc_main$12={},_hoisted_1$J={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$C=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.6374 2.96451C10.3413 2.67483 9.8613 2.67483 9.56523 2.96451L5.46391 6.97719C5.16784 7.26687 5.16784 7.73652 5.46391 8.0262C5.75999 8.31588 6.24002 8.31588 6.53609 8.0262L9.25012 5.37083L9.25012 12.8271C9.25012 13.2413 9.58591 13.5771 10.0001 13.5771C10.4143 13.5771 10.7501 13.2413 10.7501 12.8271L10.7501 5.17281L13.6665 8.0262C13.9626 8.31588 14.4426 8.31588 14.7387 8.0262C15.0348 7.73652 15.0348 7.26687 14.7387 6.97719L10.6374 2.96451ZM4 15.7516C3.58579 15.7516 3.25 16.0873 3.25 16.5016C3.25 16.9158 3.58579 17.2516 4 17.2516H16C16.4142 17.2516 16.75 16.9158 16.75 16.5016C16.75 16.0873 16.4142 15.7516 16 15.7516H4Z",fill:"currentColor"},null,-1),_hoisted_3$z=[_hoisted_2$C];function _sfc_render$s(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$J,_hoisted_3$z)}const __unplugin_components_2$3=_export_sfc(_sfc_main$12,[["render",_sfc_render$s]]),_sfc_main$11={},_hoisted_1$I={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$B=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.56181 13.8733C9.85977 14.1611 10.3429 14.1611 10.6408 13.8733L14.7421 9.91282C15.0401 9.62509 15.0401 9.15858 14.7421 8.87085C14.4442 8.58311 13.9611 8.58311 13.6631 8.87085L10.75 11.6839L10.75 4C10.75 3.58579 10.4142 3.25 10 3.25C9.58581 3.25 9.25002 3.58579 9.25002 4L9.25003 11.4883L6.53951 8.87085C6.24155 8.58311 5.75846 8.58311 5.46049 8.87085C5.16253 9.15858 5.16253 9.62509 5.46049 9.91282L9.56181 13.8733ZM4 15.7543C3.58579 15.7543 3.25 16.0901 3.25 16.5043C3.25 16.9185 3.58579 17.2543 4 17.2543H16C16.4142 17.2543 16.75 16.9185 16.75 16.5043C16.75 16.0901 16.4142 15.7543 16 15.7543H4Z",fill:"currentColor"},null,-1),_hoisted_3$y=[_hoisted_2$B];function _sfc_render$r(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$I,_hoisted_3$y)}const __unplugin_components_0$c=_export_sfc(_sfc_main$11,[["render",_sfc_render$r]]),uploadFile=e=>new Promise((n,r)=>{const o=document.createElement("input");o.type="file",o.style.display="none",o.accept=e,o.onchange=()=>{o.files&&(n(o.files[0]),o.remove())},document.body.appendChild(o),o.click()}),AnnotationHeader_vue_vue_type_style_index_0_lang="",_hoisted_1$H={class:"annotation-header"},_hoisted_2$A={class:"annotation-header-buttons"},_sfc_main$10={__name:"AnnotationHeader",setup(e){const n=useDocumentStore(),r=useViewerStore(),{removeAllAnnotations:o,importAnnotations:s,exportXfdf:u}=core,d=()=>{uploadFile(".xfdf").then(g=>{s(g)})},f=computed(()=>n.getTotalPages),v=computed(()=>n.getAllAnnotations);computed(()=>n.getOptionUrl);const m=computed(()=>n.info);m.value&&m.value.token&&atob(m.value.token).replace(".pdf",".xfdf");const _=async()=>{try{r.setDownloading(!0);const g=await u(!0);r.setDownloading(!1),g||r.setDownloadError("Downloaded")}catch(g){console.log(g),r.setDownloading(!1),r.setDownloadError("Downloaded")}};return(g,y)=>{const w=__unplugin_components_0$c,x=_sfc_main$2C,k=__unplugin_components_2$3;return openBlock(),createElementBlock("div",_hoisted_1$H,[createBaseVNode("h2",null,toDisplayString$1(g.$t("leftPanel.annotations")),1),createBaseVNode("div",_hoisted_2$A,[createVNode(x,{className:"button-icon",img:"icon-export",onClick:d,title:g.$t("leftPanel.importAnnotations"),disabled:unref(f)<=0},{default:withCtx(()=>[createVNode(w)]),_:1},8,["title","disabled"]),createVNode(x,{className:"button-icon",img:"icon-import",onClick:_,title:g.$t("leftPanel.exportAnnotations"),disabled:!unref(v)||unref(v).annotationsCount===0},{default:withCtx(()=>[createVNode(k)]),_:1},8,["title","disabled"])])])}}},_sfc_main$$={},_hoisted_1$G={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$z=createBaseVNode("g",{id:"sidetabbar / search"},[createBaseVNode("path",{id:"Union","fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.19403 11.0422C2.33414 9.1823 2.33414 6.16682 4.19403 4.30693C6.05392 2.44704 9.06939 2.44704 10.9293 4.30693C12.7892 6.16682 12.7892 9.1823 10.9293 11.0422C9.06939 12.9021 6.05392 12.9021 4.19403 11.0422ZM3.13337 3.24627C0.68769 5.69195 0.68769 9.65717 3.13337 12.1028C5.39959 14.3691 8.97056 14.5354 11.4283 12.6017L13.6531 14.8265C13.946 15.1194 14.4209 15.1194 14.7137 14.8265C15.0066 14.5336 15.0066 14.0588 14.7137 13.7659L12.4889 11.541C14.4224 9.08333 14.2561 5.51246 11.9899 3.24627C9.54427 0.800597 5.57904 0.800597 3.13337 3.24627Z",fill:"currentColor"})],-1),_hoisted_3$x=[_hoisted_2$z];function _sfc_render$q(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$G,_hoisted_3$x)}const __unplugin_components_5=_export_sfc(_sfc_main$$,[["render",_sfc_render$q]]),_sfc_main$_={},_hoisted_1$F={width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$y=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 2.5H11.2V10.7H3V2.5ZM1.5 1H3H11.2H12.7V2.5V3.8H14H15.5V5.3V13.5V15H14H5.8H4.3V13.5V12.2H3H1.5V10.7V2.5V1ZM5.8 12.2V13.5H14V5.3H12.7V10.7V12.2H11.2H5.8Z",fill:"currentColor"},null,-1),_hoisted_3$w=[_hoisted_2$y];function _sfc_render$p(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$F,_hoisted_3$w)}const __unplugin_components_4=_export_sfc(_sfc_main$_,[["render",_sfc_render$p]]),_sfc_main$Z={},_hoisted_1$E={width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$x=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.5 1H2.1L0.5 15H14.9L16.5 1ZM8.84885 2.8143L12.5693 12.1154H13.7692V13.1154H10.6923V12.1154H11.4922L10.7384 10.2308H6.03048L5.27689 12.1154H6.07692V13.1154H3V12.1154H4.19995L7.92038 2.8143H8.84885ZM8.384 4.345L10.3384 9.23077H6.43035L8.384 4.345Z",fill:"currentColor"},null,-1),_hoisted_3$v=[_hoisted_2$x];function _sfc_render$o(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$E,_hoisted_3$v)}const __unplugin_components_3$1=_export_sfc(_sfc_main$Z,[["render",_sfc_render$o]]),_sfc_main$Y={},_hoisted_1$D={width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$w=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.5 1.5H1.5V4.5H4.5V1.5ZM4.5 6.5H1.5V9.5H4.5V6.5ZM1.5 11.5H4.5V14.5H1.5V11.5ZM15.5 3.75V2.25H6.5V3.75H15.5ZM15.5 7.25V8.75H6.5V7.25H15.5ZM15.5 13.75V12.25H6.5V13.75H15.5Z",fill:"currentColor"},null,-1),_hoisted_3$u=[_hoisted_2$w];function _sfc_render$n(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$D,_hoisted_3$u)}const __unplugin_components_2$2=_export_sfc(_sfc_main$Y,[["render",_sfc_render$n]]),_sfc_main$X={},_hoisted_1$C={width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$v=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.25 1H2.5V1.75V14.25V15H3.25H13.749H14.499V14.25V8V5.65625V5.36131L14.2981 5.14538L10.6638 1.23913L10.4413 1H10.1147H8.49949H3.25ZM4 13.5V2.5H8.49949H8.75V6V6.75H9.5H12.999V8V13.5H4ZM12.3466 5.25L10.25 2.99648V5.25H12.3466Z",fill:"currentColor"},null,-1),_hoisted_3$t=[_hoisted_2$v];function _sfc_render$m(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$C,_hoisted_3$t)}const __unplugin_components_0$b=_export_sfc(_sfc_main$X,[["render",_sfc_render$m]]),_sfc_main$W={__name:"LeftPanelTabs",props:["activePanelTab"],setup(e){const n=computed(()=>o.isElementOpen("leftPanel")),r=computed(()=>o.getActiveElementTab("leftPanelTab")),o=useViewerStore(),s=(u,d)=>{u!==r.value&&(o.setActiveElementTab("leftPanelTab",u),u==="SEARCH"?(core.webViewerNamedAction("FindOpen"),o.setSearchStatus(!0)):(core.clearSearchResults(),o.setSearchStatus(!1)),setTimeout(()=>{core.webViewerPageMode(d)},0))};return(u,d)=>{const f=__unplugin_components_0$b,v=_sfc_main$2C,m=__unplugin_components_2$2,_=__unplugin_components_3$1,g=__unplugin_components_4,y=__unplugin_components_5;return openBlock(),createElementBlock(Fragment,null,[createVNode(v,{className:unref(r)==="THUMBS"?"active":"",img:"icon-thumbnail",title:u.$t("leftPanel.thumbnails"),dataElement:"THUMBS",isActive:unref(r)==="THUMBS",onClick:d[0]||(d[0]=w=>s("THUMBS","thumbs"))},{default:withCtx(()=>[createVNode(f)]),_:1},8,["className","title","isActive"]),createVNode(v,{className:unref(r)==="OUTLINE"?"active":"",img:"icon-outline",title:u.$t("leftPanel.outlines"),dataElement:"OUTLINE",isActive:unref(r)==="OUTLINE",onClick:d[1]||(d[1]=w=>s("OUTLINE","outline"))},{default:withCtx(()=>[createVNode(m)]),_:1},8,["className","title","isActive"]),createVNode(v,{className:unref(r)==="ANNOTATION"?"active":"",img:"icon-annotation",title:u.$t("leftPanel.annotations"),dataElement:"ANNOTATION",isActive:unref(r)==="ANNOTATION",onClick:d[2]||(d[2]=w=>s("ANNOTATION","none"))},{default:withCtx(()=>[createVNode(_)]),_:1},8,["className","title","isActive"]),unref(n)&&unref(r)==="LAYER"?(openBlock(),createBlock(v,{key:0,className:unref(r)==="LAYER"?"active":"",img:"icon-view-layers",title:u.$t("leftPanel.layers"),dataElement:"Layers",isActive:unref(r)==="LAYER",onClick:d[3]||(d[3]=w=>s("LAYER","layers"))},{default:withCtx(()=>[createVNode(g)]),_:1},8,["className","title","isActive"])):createCommentVNode("",!0),unref(n)&&unref(r)==="COMPARISON"?(openBlock(),createBlock(v,{key:1,className:unref(r)==="COMPARISON"?"active":"",img:"icon-compare",title:"Compare",dataElement:"COMPARISON",isActive:unref(r)==="COMPARISON",onClick:d[4]||(d[4]=w=>s("COMPARISON"))},null,8,["className","isActive"])):createCommentVNode("",!0),createVNode(v,{className:unref(r)==="SEARCH"?"active":"",img:"icon-search",title:u.$t("leftPanel.search"),dataElement:"Search",isActive:unref(r)==="SEARCH",onClick:d[5]||(d[5]=w=>s("SEARCH","none"))},{default:withCtx(()=>[createVNode(y)]),_:1},8,["className","title","isActive"])],64)}}},LeftPanel_vue_vue_type_style_index_0_lang="",_hoisted_1$B={class:"sidebar-tabs-header"},_hoisted_2$u={class:"sidebar-content"},_hoisted_3$s=createBaseVNode("div",{class:"thumbnail-view"},null,-1),_hoisted_4$9=createBaseVNode("div",{class:"layer-view"},null,-1),_sfc_main$V={__name:"LeftPanel",setup(e){const n=useViewerStore(),r=computed(()=>n.getActiveElementTab("leftPanelTab")),o=computed(()=>n.isElementOpen("leftPanel"));return(s,u)=>{const d=_sfc_main$W,f=_sfc_main$10,v=_sfc_main$13,m=_sfc_main$1g,_=_sfc_main$1j,g=__unplugin_components_5$2;return openBlock(),createElementBlock("div",{class:normalizeClass(["left-panel",{closed:!unref(o)}]),id:"leftPanel"},[createBaseVNode("div",_hoisted_1$B,[createVNode(d,{activePanelTab:unref(r)},null,8,["activePanelTab"])]),createBaseVNode("div",_hoisted_2$u,[createBaseVNode("div",{class:normalizeClass(["thumbnail-container",{hidden:unref(r)!=="THUMBS"}])},[createBaseVNode("h2",null,toDisplayString$1(s.$t("leftPanel.thumbnails")),1),_hoisted_3$s],2),createBaseVNode("div",{class:normalizeClass(["annotation-container",{hidden:unref(r)!=="ANNOTATION"}])},[createVNode(f),createVNode(v)],2),withDirectives(createVNode(m,null,null,512),[[vShow,unref(r)==="OUTLINE"]]),createBaseVNode("div",{class:normalizeClass(["layer-view-container",{hidden:unref(r)!=="LAYER"}])},[createBaseVNode("h2",null,toDisplayString$1(s.$t("leftPanel.layers")),1),_hoisted_4$9],2),createBaseVNode("div",{class:normalizeClass(["compare-container",{hidden:unref(r)!=="COMPARISON"}])},[createVNode(_)],2)]),createBaseVNode("div",{class:normalizeClass(["findbar-container",{hidden:unref(r)!=="SEARCH"}])},[createVNode(g)],2)],2)}}},_sfc_main$U={},_hoisted_1$A={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$t=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.5 3H1.75V3.75V16.25V17H2.5H19H19.75V16.25V10H18.25V15.5H18.2147L12.8718 10.8178L10.5643 13.25L6.29496 9.75L3.25 12.9595V4.5H13.75V3H2.5ZM14.5 8.25C14.5 9.07843 13.8284 9.75 13 9.75C12.1716 9.75 11.5 9.07843 11.5 8.25C11.5 7.42157 12.1716 6.75 13 6.75C13.8284 6.75 14.5 7.42157 14.5 8.25ZM16.75 6.75H14.5V5.25H16.75V3H18.25V5.25H20.5V6.75H18.25V9H16.75V6.75Z",fill:"currentColor"},null,-1),_hoisted_3$r=[_hoisted_2$t];function _sfc_render$l(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$A,_hoisted_3$r)}const __unplugin_components_2$1=_export_sfc(_sfc_main$U,[["render",_sfc_render$l]]),_sfc_main$T={},_hoisted_1$z={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$s=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.25 3H1.5V3.75V16.25V17H2.25H18.75H19.5V16.25V10H18V15.5H3V4.5H13.5V3H2.25ZM12.5 8V5.5H4.5V8H6V7H7.75V13H7V14.5H10V13H9.25V7H11V8H12.5ZM16.75 6.75H14.5V5.25H16.75V3H18.25V5.25H20.5V6.75H18.25V9H16.75V6.75Z",fill:"currentColor"},null,-1),_hoisted_3$q=[_hoisted_2$s];function _sfc_render$k(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$z,_hoisted_3$q)}const __unplugin_components_0$a=_export_sfc(_sfc_main$T,[["render",_sfc_render$k]]),ContentEditorToolBar_vue_vue_type_style_index_0_scoped_fe2646a6_lang="",_hoisted_1$y={class:"edit-tool"},_sfc_main$S={__name:"ContentEditorToolBar",setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),s=useViewerStore(),u=computed(()=>o.getActiveTool),d=computed(()=>s.getCurrentPage),f=m=>{o.setToolState(m),s.toggleActiveHand(!1),n(0),r(0),u.value==="addImage"&&isMobileDevice&&document.getElementById("editorImageInput").click()},v=m=>{const _=m.target.files[0];if(_.size>2*1024*1024){window.$message.error(instance.$t("editorPanel.maximum"),{duration:3e3,icon:()=>h("img",{src:MessageError})}),m.target.value="";return}if(_){const g=new FileReader;g.onload=function(y){const w=new Image;w.onload=function(){const x={imageBase64:y.target.result,width:w.width,height:w.height,pageNum:d.value};console.log(x),core.addEditorImage(x)},w.onerror=function(x){console.log(x)},w.src=y.target.result},g.onerror=function(y){console.log(y)},g.readAsDataURL(_)}};return(m,_)=>{const g=__unplugin_components_0$a,y=_sfc_main$2C,w=__unplugin_components_2$1;return openBlock(),createElementBlock("div",_hoisted_1$y,[createVNode(y,{class:normalizeClass(["operate",{active:unref(u)==="addText"}]),onClick:_[0]||(_[0]=x=>f("addText")),title:"Add Text"},{default:withCtx(()=>[createVNode(g),createTextVNode(toDisplayString$1(m.$t("header.addText")),1)]),_:1},8,["class"]),createVNode(y,{class:normalizeClass(["operate",{active:unref(u)==="addImage"}]),onClick:_[1]||(_[1]=x=>f("addImage")),title:"Add Image"},{default:withCtx(()=>[createVNode(w),createTextVNode(toDisplayString$1(m.$t("header.addImage")),1),unref(isMobileDevice)?(openBlock(),createElementBlock("input",{key:0,type:"file",id:"editorImageInput",accept:".png, .jpg, .jpeg",style:{display:"none"},onChange:v},null,32)):createCommentVNode("",!0)]),_:1},8,["class"])])}}},__unplugin_components_9=_export_sfc(_sfc_main$S,[["__scopeId","data-v-fe2646a6"]]),ComparedToolbar_vue_vue_type_style_index_0_lang="",_hoisted_1$x={class:"compare-toolbar"},_hoisted_2$r={class:"file-color"},_sfc_main$R={__name:"ComparedToolbar",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>r.getCompareSetting("oldFileColor")),s=computed(()=>r.getCompareSetting("newFileColor")),u=()=>{n.setCompareStatus("end"),r.initCompareFiles()};return(d,f)=>{const v=_sfc_main$1G,m=__unplugin_components_1$4;return openBlock(),createElementBlock("div",_hoisted_1$x,[createVNode(v),createBaseVNode("div",_hoisted_2$r,[createBaseVNode("div",null,[createBaseVNode("div",{class:"color",style:normalizeStyle({"background-color":unref(o)})},null,4),createBaseVNode("span",null,toDisplayString$1(d.$t("compare.oldFile")),1)]),createBaseVNode("div",null,[createBaseVNode("div",{class:"color",style:normalizeStyle({"background-color":unref(s)})},null,4),createBaseVNode("span",null,toDisplayString$1(d.$t("compare.newFile")),1)])]),createVNode(m,{class:"close",onClick:u})])}}},SecuritySelect_vue_vue_type_style_index_0_lang="",_hoisted_1$w={class:"drop-down"},_sfc_main$Q={__name:"SecuritySelect",props:["item"],setup(e){const n=getCurrentInstance().appContext.app.config.globalProperties,r=ref(!1),o=useDocumentStore(),s=useViewerStore(),u=ref(null);computed(()=>o.getActiveTool);const d=computed(()=>u.value&&u.value.getMergedShow()),f=computed(()=>o.getFilehasPwd),v=computed(()=>s.getWebviewerMode),m=()=>{u.value.setShow(!1),s.openElement("setPasswordModal")},_=async()=>{if(!f.value&&v.value!=="Standalone"||(u.value.setShow(!1),r.value))return;r.value=!0,await core.removePassword()?window.$message.success(n.$t("passwordDialog.removePwdSuccess"),{duration:3e3,icon:()=>h("img",{src:MessageSuccess})}):window.$message.error(n.$t("passwordDialog.removePwdFailure"),{duration:3e3,icon:()=>h("img",{src:MessageError})}),r.value=!1};return(g,y)=>{const w=__unplugin_components_8$1,x=_sfc_main$2C;return openBlock(),createBlock(unref(NPopover),{ref_key:"popover",ref:u,placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,"z-index":72,class:"security-popover"},{trigger:withCtx(()=>[createVNode(x,{class:normalizeClass(["security-button",{active:unref(d)}])},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(g.$t("header.security")),1),createVNode(w,{class:"arrow-left"})]),_:1},8,["class"])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$w,[createBaseVNode("div",{class:"drop-item",onClick:m},toDisplayString$1(g.$t("header.setPassword")),1),createBaseVNode("div",{class:normalizeClass(["drop-item",{disabled:!unref(f)&&unref(v)!=="Standalone"}]),onClick:_},toDisplayString$1(g.$t("header.removePassword")),3)])]),_:1},512)}}},_sfc_main$P={},_hoisted_1$v={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$q=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20 3H0V17H20V3ZM9.5918 10.3271C9.5918 12.3794 8.41406 13.6626 6.54199 13.6626C4.65674 13.6626 3.48779 12.3794 3.48779 10.3271C3.48779 8.27051 4.67432 6.99609 6.54199 6.99609C8.40967 6.99609 9.5918 8.2749 9.5918 10.3271ZM4.8457 10.3271C4.8457 11.6719 5.49609 12.5376 6.54199 12.5376C7.57471 12.5376 8.23389 11.6719 8.23389 10.3271C8.23389 8.97803 7.57031 8.12109 6.54199 8.12109C5.50928 8.12109 4.8457 8.97803 4.8457 10.3271ZM12.1758 13.5V11.562L12.8042 10.8062L14.6455 13.5H16.2363L13.7622 9.93604L16.0737 7.15869H14.5972L12.2549 10.0063H12.1758V7.15869H10.8486V13.5H12.1758Z",fill:"currentColor"},null,-1),_hoisted_3$p=[_hoisted_2$q];function _sfc_render$j(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$v,_hoisted_3$p)}const __unplugin_components_18=_export_sfc(_sfc_main$P,[["render",_sfc_render$j]]),_sfc_main$O={__name:"PushButton",props:["item"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),s=useViewerStore(),u=computed(()=>o.getActiveTool),d=f=>{o.setToolState(f),s.toggleActiveHand(!1),n(0),r(0)};return(f,v)=>{const m=__unplugin_components_18,_=_sfc_main$2C;return openBlock(),createBlock(_,{class:normalizeClass(["with-text",{active:unref(u)==="pushbutton"}]),title:f.$t("header.button"),onClick:v[0]||(v[0]=g=>d("pushbutton"))},{default:withCtx(()=>[createVNode(m),createBaseVNode("span",null,toDisplayString$1(f.$t("header.button")),1)]),_:1},8,["title","class"])}}},_sfc_main$N={},_hoisted_1$u={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$p=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.25 2.25H19.75V10.75H15.75V17.75H0.25V10.75V9.25V2.25ZM1.75 10.75H14.25V16.25H1.75V10.75ZM18.25 9.25H15.75H1.75V3.75H18.25V9.25ZM15 8L17 5.5H13L15 8Z",fill:"currentColor"},null,-1),_hoisted_3$o=[_hoisted_2$p];function _sfc_render$i(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$u,_hoisted_3$o)}const __unplugin_components_17=_export_sfc(_sfc_main$N,[["render",_sfc_render$i]]),_sfc_main$M={__name:"ComboBox",props:["item"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),s=useViewerStore(),u=computed(()=>o.getActiveTool),d=f=>{o.setToolState(f),s.toggleActiveHand(!1),n(0),r(0)};return(f,v)=>{const m=__unplugin_components_17,_=_sfc_main$2C;return openBlock(),createBlock(_,{class:normalizeClass(["with-text",{active:unref(u)==="combobox"}]),title:f.$t("header.comboButton"),onClick:v[0]||(v[0]=g=>d("combobox"))},{default:withCtx(()=>[createVNode(m),createBaseVNode("span",null,toDisplayString$1(f.$t("header.comboButton")),1)]),_:1},8,["title","class"])}}},_sfc_main$L={},_hoisted_1$t={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$o=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.75 2.25H0.25V17.75H19.75V2.25ZM18.25 10.75V16.25H1.75V10.75H18.25ZM18.25 9.25V3.75H1.75V9.25H18.25ZM6 5.5H3V7.5H6V5.5ZM3 12.5H6V14.5H3V12.5Z",fill:"currentColor"},null,-1),_hoisted_3$n=[_hoisted_2$o];function _sfc_render$h(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$t,_hoisted_3$n)}const __unplugin_components_16=_export_sfc(_sfc_main$L,[["render",_sfc_render$h]]),_sfc_main$K={__name:"ListBox",props:["item"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),s=useViewerStore(),u=computed(()=>o.getActiveTool),d=f=>{o.setToolState(f),s.toggleActiveHand(!1),n(0),r(0)};return(f,v)=>{const m=__unplugin_components_16,_=_sfc_main$2C;return openBlock(),createBlock(_,{class:normalizeClass(["with-text",{active:unref(u)==="listbox"}]),title:f.$t("header.listBox"),onClick:v[0]||(v[0]=g=>d("listbox"))},{default:withCtx(()=>[createVNode(m),createBaseVNode("span",null,toDisplayString$1(f.$t("header.listBox")),1)]),_:1},8,["title","class"])}}},_sfc_main$J={},_hoisted_1$s={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$n=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 1.25C5.16751 1.25 1.25 5.16751 1.25 10C1.25 14.8325 5.16751 18.75 10 18.75C14.8325 18.75 18.75 14.8325 18.75 10C18.75 5.16751 14.8325 1.25 10 1.25ZM10 2.75C14.0041 2.75 17.25 5.99594 17.25 10C17.25 14.0041 14.0041 17.25 10 17.25C5.99594 17.25 2.75 14.0041 2.75 10C2.75 5.99594 5.99594 2.75 10 2.75ZM10 13C11.6569 13 13 11.6569 13 10C13 8.34315 11.6569 7 10 7C8.34315 7 7 8.34315 7 10C7 11.6569 8.34315 13 10 13Z",fill:"currentColor"},null,-1),_hoisted_3$m=[_hoisted_2$n];function _sfc_render$g(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$s,_hoisted_3$m)}const __unplugin_components_15=_export_sfc(_sfc_main$J,[["render",_sfc_render$g]]),_sfc_main$I={__name:"RadioButton",props:["item"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),s=useViewerStore(),u=computed(()=>o.getActiveTool),d=f=>{o.setToolState(f),s.toggleActiveHand(!1),n(0),r(0)};return(f,v)=>{const m=__unplugin_components_15,_=_sfc_main$2C;return openBlock(),createBlock(_,{class:normalizeClass(["with-text",{active:unref(u)==="radiobutton"}]),title:f.$t("header.radioButton"),onClick:v[0]||(v[0]=g=>d("radiobutton"))},{default:withCtx(()=>[createVNode(m),createBaseVNode("span",null,toDisplayString$1(f.$t("header.radioButton")),1)]),_:1},8,["title","class"])}}},_sfc_main$H={},_hoisted_1$r={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$m=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18.25 1.75H1.75V18.25H18.25V1.75ZM16.75 3.25V16.75H3.25V3.25H16.75ZM15.532 7.52861L14.468 6.47139L9.038 11.935L6.53204 9.41291L5.46796 10.4701L9.03873 14.0641L15.532 7.52861Z",fill:"currentColor"},null,-1),_hoisted_3$l=[_hoisted_2$m];function _sfc_render$f(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$r,_hoisted_3$l)}const __unplugin_components_14=_export_sfc(_sfc_main$H,[["render",_sfc_render$f]]),_sfc_main$G={__name:"CheckBoxButton",props:["item"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),s=useViewerStore(),u=computed(()=>o.getActiveTool),d=f=>{o.setToolState(f),s.toggleActiveHand(!1),n(0),r(0)};return(f,v)=>{const m=__unplugin_components_14,_=_sfc_main$2C;return openBlock(),createBlock(_,{class:normalizeClass(["with-text",{active:unref(u)==="checkbox"}]),title:f.$t("header.checkbox"),onClick:v[0]||(v[0]=g=>d("checkbox"))},{default:withCtx(()=>[createVNode(m),createBaseVNode("span",null,toDisplayString$1(f.$t("header.checkbox")),1)]),_:1},8,["title","class"])}}},_sfc_main$F={},_hoisted_1$q={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$l=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.25 2.25H19.75V17.75H0.25V2.25ZM18.25 11.75V3.75H1.75V16.25H13.75L18.25 11.75ZM11.25 5.5V8H9.75V7H8V13H8.75V14.5H5.75V13H6.5V7H4.75V8H3.25V5.5H11.25Z",fill:"currentColor"},null,-1),_hoisted_3$k=[_hoisted_2$l];function _sfc_render$e(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$q,_hoisted_3$k)}const __unplugin_components_13=_export_sfc(_sfc_main$F,[["render",_sfc_render$e]]),_sfc_main$E={__name:"TextFieldButton",props:["item"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),s=useViewerStore(),u=computed(()=>o.getActiveTool),d=f=>{o.setToolState(f),s.toggleActiveHand(!1),n(0),r(0)};return(f,v)=>{const m=__unplugin_components_13,_=_sfc_main$2C;return openBlock(),createBlock(_,{class:normalizeClass(["with-text",{active:unref(u)==="textfield"}]),title:f.$t("header.textField"),onClick:v[0]||(v[0]=g=>d("textfield"))},{default:withCtx(()=>[createVNode(m),createBaseVNode("span",null,toDisplayString$1(f.$t("header.textField")),1)]),_:1},8,["title","class"])}}},_sfc_main$D={},_hoisted_1$p={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$k=createBaseVNode("g",{id:"subtoolbar / mytools / links"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M18.8388 7.17154L14.331 11.6793L13.2703 10.6187L16.7175 7.17154L12.8284 3.28245L9.38125 6.7296L8.32059 5.66894L12.8284 1.16113L18.8388 7.17154ZM6.7296 9.38125L3.28245 12.8284L7.17154 16.7175L10.6187 13.2703L11.6793 14.331L7.17154 18.8388L1.16113 12.8284L5.66894 8.32059L6.7296 9.38125ZM9.11608 11.9445L11.9445 9.11608L10.8839 8.05542L8.05542 10.8839L9.11608 11.9445Z",fill:"currentColor"})],-1),_hoisted_3$j=[_hoisted_2$k];function _sfc_render$d(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$p,_hoisted_3$j)}const __unplugin_components_12=_export_sfc(_sfc_main$D,[["render",_sfc_render$d]]),_sfc_main$C={},_hoisted_1$o={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$j=createBaseVNode("g",{id:"subtoolbar / mytools / image"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.25 3.25H18.75V16.75H1.25V3.25ZM17.25 4.75H2.75V13.2095L5.79496 10L10.0643 13.5L12.3718 11.0678L17.1442 15.25H17.25V4.75ZM14.5 9C15.3284 9 16 8.32843 16 7.5C16 6.67157 15.3284 6 14.5 6C13.6716 6 13 6.67157 13 7.5C13 8.32843 13.6716 9 14.5 9Z",fill:"currentColor"})],-1),_hoisted_3$i=[_hoisted_2$j];function _sfc_render$c(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$o,_hoisted_3$i)}const __unplugin_components_11=_export_sfc(_sfc_main$C,[["render",_sfc_render$c]]),_sfc_main$B={__name:"StickyNoteButton",props:["item"],setup(e){const{switchAnnotationEditorMode:n,switchTool:r}=core,o=useViewerStore(),s=useDocumentStore(),u=v=>{s.setToolState(v),o.toggleActiveHand(!1)},d=computed(()=>s.getActiveTool);computed(()=>o.getActiveStickNote);const f=()=>{u("text"),o.toggleActiveStickNote(),n(0),r(0),o.closeActiveHand(),o.closeActiveMeasure()};return(v,m)=>{const _=__unplugin_components_0$e,g=_sfc_main$2C;return openBlock(),createBlock(g,mergeProps({isActive:unref(d)==="text"},{...e.item},{onClick:f,title:v.$t("header.note")}),{default:withCtx(()=>[createVNode(_)]),_:1},16,["isActive","title"])}}},Annotate_vue_vue_type_style_index_0_lang="",_hoisted_1$n={key:1,class:"markup-container"},_hoisted_2$i={key:3,class:"shape-container"},_hoisted_3$h=createBaseVNode("div",{class:"divider pc"},null,-1),_hoisted_4$8={key:0,class:"colors-container"},_hoisted_5$3={class:"cell-container"},_hoisted_6$3=createBaseVNode("span",{class:"cell red"},null,-1),_hoisted_7$2=[_hoisted_6$3],_hoisted_8$2={class:"cell-container"},_hoisted_9$1=createBaseVNode("span",{class:"cell yellow"},null,-1),_hoisted_10$1=[_hoisted_9$1],_hoisted_11$1={class:"cell-container"},_hoisted_12$1=createBaseVNode("span",{class:"cell blue"},null,-1),_hoisted_13$1=[_hoisted_12$1],_hoisted_14$1={class:"cell-container"},_hoisted_15$1=createBaseVNode("span",{class:"cell green"},null,-1),_hoisted_16$1=[_hoisted_15$1],_sfc_main$A={__name:"Annotate",props:["item"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),s=useViewerStore(),u=computed(()=>o.getActiveTool),d=computed(()=>["highlight","underline","squiggly","strikeout"].includes(u.value)),f=["highlight","underline","squiggly","strikeout","square","circle","arrow","line","ink"],v=computed(()=>["square","circle","arrow","line"].includes(u.value)),m=computed(()=>o.getMarkupToolState),_=computed(()=>o.getShapeToolState),g=computed(()=>o.getActiveToolColor),y=E=>{o.setToolState(E),s.toggleActiveHand(!1),n(0),r(0),E==="stamp"?s.toggleElement("stampPanel"):s.closeElement("stampPanel"),u.value==="image"&&document.getElementById("signImageInput").click()},w=E=>{o.setMarkupToolState(E),y(E)},x=E=>{o.setShapeToolState(E),y(E)},k=E=>{o.setActiveToolColor(E)},S=()=>{u.value==="image"&&y("image")};return core.addEvent("imageChange",S),onUnmounted(()=>{core.removeEvent("imageChange",S)}),(E,T)=>{const M=_sfc_main$B,I=__unplugin_components_0$d,F=_sfc_main$2C,O=__unplugin_components_1$1,N=__unplugin_components_2$4,D=__unplugin_components_3$2,X=__unplugin_components_4$1,U=__unplugin_components_5$1,Z=__unplugin_components_6$1,j=__unplugin_components_7,Q=__unplugin_components_8,ve=__unplugin_components_9$1,Se=__unplugin_components_10,we=__unplugin_components_11,oe=__unplugin_components_12;return openBlock(),createElementBlock(Fragment,null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.item,(ne,q)=>(openBlock(),createElementBlock(Fragment,{key:`${ne.type}-${ne.dataElement||q}`},[ne.type==="note"&&!ne.hidden?(openBlock(),createBlock(M,{key:0,"data-element":ne.dataElement},null,8,["data-element"])):["highlight","underline","strikeout","squiggly"].includes(ne.type)?(openBlock(),createElementBlock("div",_hoisted_1$n,[ne.type==="highlight"&&!ne.hidden?(openBlock(),createBlock(F,{key:0,"data-element":ne.dataElement,class:normalizeClass({active:unref(d)&&unref(m)==="highlight"}),onClick:T[0]||(T[0]=withModifiers(H=>w("highlight"),["stop"])),title:E.$t("header.highlight")},{default:withCtx(()=>[createVNode(I)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0),ne.type==="underline"&&!ne.hidden?(openBlock(),createBlock(F,{key:1,"data-element":ne.dataElement,class:normalizeClass({active:unref(d)&&unref(m)==="underline"}),onClick:T[1]||(T[1]=withModifiers(H=>w("underline"),["stop"])),title:E.$t("header.underline")},{default:withCtx(()=>[createVNode(O)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0),ne.type==="strikeout"&&!ne.hidden?(openBlock(),createBlock(F,{key:2,"data-element":ne.dataElement,class:normalizeClass({active:unref(d)&&unref(m)==="strikeout"}),onClick:T[2]||(T[2]=withModifiers(H=>w("strikeout"),["stop"])),title:E.$t("header.strikeout")},{default:withCtx(()=>[createVNode(N)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0),ne.type==="squiggly"&&!ne.hidden?(openBlock(),createBlock(F,{key:3,"data-element":ne.dataElement,class:normalizeClass({active:unref(d)&&unref(m)==="squiggly"}),onClick:T[3]||(T[3]=withModifiers(H=>w("squiggly"),["stop"])),title:E.$t("header.squiggly")},{default:withCtx(()=>[createVNode(D)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0)])):createCommentVNode("",!0),ne.type==="note"&&!ne.hidden?(openBlock(),createBlock(F,{key:2,"data-element":ne.dataElement,class:normalizeClass({active:unref(u)==="ink"}),onClick:T[4]||(T[4]=H=>y("ink")),title:E.$t("header.ink")},{default:withCtx(()=>[createVNode(X)]),_:2},1032,["data-element","class","title"])):["circle","square","arrow","line"].includes(ne.type)?(openBlock(),createElementBlock("div",_hoisted_2$i,[ne.type==="circle"&&!ne.hidden?(openBlock(),createBlock(F,{key:0,"data-element":ne.dataElement,class:normalizeClass({active:unref(v)&&unref(_)==="circle"}),onClick:T[5]||(T[5]=withModifiers(H=>x("circle"),["stop"])),title:E.$t("header.circle")},{default:withCtx(()=>[createVNode(U)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0),ne.type==="square"&&!ne.hidden?(openBlock(),createBlock(F,{key:1,"data-element":ne.dataElement,class:normalizeClass({active:unref(v)&&unref(_)==="square"}),onClick:T[6]||(T[6]=withModifiers(H=>x("square"),["stop"])),title:E.$t("header.square")},{default:withCtx(()=>[createVNode(Z)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0),ne.type==="arrow"&&!ne.hidden?(openBlock(),createBlock(F,{key:2,"data-element":ne.dataElement,class:normalizeClass({active:unref(v)&&unref(_)==="arrow"}),onClick:T[7]||(T[7]=withModifiers(H=>x("arrow"),["stop"])),title:E.$t("header.arrow")},{default:withCtx(()=>[createVNode(j)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0),ne.type==="line"&&!ne.hidden?(openBlock(),createBlock(F,{key:3,"data-element":ne.dataElement,class:normalizeClass({active:unref(v)&&unref(_)==="line"}),onClick:T[8]||(T[8]=withModifiers(H=>x("line"),["stop"])),title:E.$t("header.line")},{default:withCtx(()=>[createVNode(Q)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0)])):ne.type==="freetext"&&!ne.hidden?(openBlock(),createBlock(F,{key:4,"data-element":ne.dataElement,class:normalizeClass({active:unref(u)==="freetext"}),onClick:T[9]||(T[9]=H=>y("freetext")),title:E.$t("header.freetext")},{default:withCtx(()=>[createVNode(ve)]),_:2},1032,["data-element","class","title"])):ne.type==="stamp"&&!ne.hidden?(openBlock(),createBlock(F,{key:5,"data-element":ne.dataElement,class:normalizeClass({active:unref(u)==="stamp"}),onClick:T[10]||(T[10]=H=>y("stamp")),title:E.$t("header.stamp")},{default:withCtx(()=>[createVNode(Se)]),_:2},1032,["data-element","class","title"])):ne.type==="image"&&!ne.hidden?(openBlock(),createBlock(F,{key:6,"data-element":ne.dataElement,class:normalizeClass({active:unref(u)==="image"}),onClick:T[11]||(T[11]=H=>y("image")),title:E.$t("header.image")},{default:withCtx(()=>[createVNode(we)]),_:2},1032,["data-element","class","title"])):ne.type==="link"&&!ne.hidden?(openBlock(),createBlock(F,{key:7,"data-element":ne.dataElement,class:normalizeClass({active:unref(u)==="link"}),onClick:T[12]||(T[12]=H=>y("link")),title:E.$t("header.link")},{default:withCtx(()=>[createVNode(oe)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0)],64))),128)),_hoisted_3$h,f.includes(unref(u))?(openBlock(),createElementBlock("div",_hoisted_4$8,[createBaseVNode("span",_hoisted_5$3,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(g)==="#FF0000"}]),onClick:T[13]||(T[13]=ne=>k("#FF0000"))},_hoisted_7$2,2)]),createBaseVNode("span",_hoisted_8$2,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(g)==="#FFEC66"}]),onClick:T[14]||(T[14]=ne=>k("#FFEC66"))},_hoisted_10$1,2)]),createBaseVNode("span",_hoisted_11$1,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(g)==="#2D77FA"}]),onClick:T[15]||(T[15]=ne=>k("#2D77FA"))},_hoisted_13$1,2)]),createBaseVNode("span",_hoisted_14$1,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(g)==="#64BC38"}]),onClick:T[16]||(T[16]=ne=>k("#64BC38"))},_hoisted_16$1,2)])])):createCommentVNode("",!0)],64)}}},Toolbar_vue_vue_type_style_index_0_scoped_06b01e6c_lang="",_sfc_main$z={__name:"Toolbar",props:["toolMode"],setup(e){const n=useViewerStore(),r=n.getToolItems,o=computed(()=>n.getCompareStatus);return(s,u)=>{const d=_sfc_main$A,f=_sfc_main$E,v=_sfc_main$G,m=_sfc_main$I,_=_sfc_main$K,g=_sfc_main$M,y=_sfc_main$O,w=_sfc_main$Q,x=_sfc_main$R,k=__unplugin_components_9;return openBlock(),createElementBlock("div",{class:normalizeClass(["toolbar",{hidden:["view","sign","document"].includes(e.toolMode)||e.toolMode==="compare"&&unref(o)!=="finished",security:e.toolMode==="security",editor:e.toolMode==="editor"}])},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(r)[e.toolMode],(S,E)=>(openBlock(),createElementBlock(Fragment,{key:`${S.type}-${S.dataElement||E}`},[S.type==="annotation"?(openBlock(),createBlock(d,{key:0,item:S.tools},null,8,["item"])):S.type==="textFieldButton"&&!S.hidden?(openBlock(),createBlock(f,{key:1,item:S,"data-element":S.dataElement},null,8,["item","data-element"])):S.type==="checkBoxButton"&&!S.hidden?(openBlock(),createBlock(v,{key:2,item:S,"data-element":S.dataElement},null,8,["item","data-element"])):S.type==="radioButton"&&!S.hidden?(openBlock(),createBlock(m,{key:3,item:S,"data-element":S.dataElement},null,8,["item","data-element"])):S.type==="listBox"&&!S.hidden?(openBlock(),createBlock(_,{key:4,item:S,"data-element":S.dataElement},null,8,["item","data-element"])):S.type==="comboBox"&&!S.hidden?(openBlock(),createBlock(g,{key:5,item:S,"data-element":S.dataElement},null,8,["item","data-element"])):S.type==="pushButton"&&!S.hidden?(openBlock(),createBlock(y,{key:6,item:S,"data-element":S.dataElement},null,8,["item","data-element"])):S.type==="securitySelect"?(openBlock(),createBlock(w,{key:7,item:S},null,8,["item"])):S.type==="comparedToolbar"?(openBlock(),createBlock(x,{key:8})):S.type==="contentEditorToolbar"?(openBlock(),createBlock(k,{key:9})):createCommentVNode("",!0)],64))),128))],2)}}},__unplugin_components_1=_export_sfc(_sfc_main$z,[["__scopeId","data-v-06b01e6c"]]),DocumentEditorHeader_vue_vue_type_style_index_0_lang="",_hoisted_1$m={class:"header-items document-editor-header"},_hoisted_2$h={class:"right-container"},_sfc_main$y={__name:"DocumentEditorHeader",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>r.getDocEditorOperationList),s=computed(()=>n.getToolMode),u=computed(()=>n.getScrollMode),d=computed(()=>n.getPageMode);watch(s,(_,g)=>{g==="document"&&r.setDocEditorOperationList("reset")});const f=()=>{r.setToolState(""),n.setActiceToolMode("view"),n.setCompareStatus(""),core.saveDocumentEdit("cancel")},v=async()=>{r.resetSetting(),r.setToolState(""),n.setActiceToolMode("view"),n.setUpload(!1),n.setUploadLoading(!0);const _=n.getScale,{newUrl:g}=await core.saveDocumentEdit();r.setCurrentPdfData(g);const y=core.getPagesCount();r.setTotalPages(y),r.setOutline(core.getOutlines()),n.setCurrentPage(1),core.switchScrollMode(u.value==="Vertical"?0:1),core.switchSpreadMode(d.value),n.setCurrentScale(_/100),core.scaleChanged(_/100),n.setUploadLoading(!1),n.setUpload(!0)},m=async()=>{const{blobData:_,filename:g}=await core.saveDocumentEdit("saveAs");FileSaver_min.exports.saveAs(_,g)};return(_,g)=>(openBlock(),createElementBlock("div",_hoisted_1$m,[createBaseVNode("div",{class:"rect-button white",onClick:f},toDisplayString$1(_.$t("cancel")),1),createBaseVNode("div",_hoisted_2$h,[createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:!unref(o).length}]),onClick:v},toDisplayString$1(_.$t("documentEditor.save")),3),createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:!unref(o).length}]),onClick:m},toDisplayString$1(_.$t("documentEditor.saveAs")),3)])]))}},_sfc_main$x={},_hoisted_1$l={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$g=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.25 1.25H5H15H15.75V2V5.25H18H18.75V6V15V15.75H18H15V17.5V19H13.5H6.5H5V17.5V15.75H2H1.25V15V6V5.25H2H4.25V2V1.25ZM14.25 2.75V5.25H5.75V2.75H14.25ZM15 14.25H17.25V6.75H2.75V14.25H5V12.5V11H6.5H13.5H15V12.5V14.25ZM6.5 12.5H13.5V17.5H6.5V12.5ZM15 10C15.5523 10 16 9.55229 16 9C16 8.44772 15.5523 8 15 8C14.4477 8 14 8.44772 14 9C14 9.55229 14.4477 10 15 10Z",fill:"currentColor"},null,-1),_hoisted_3$g=[_hoisted_2$g];function _sfc_render$b(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$l,_hoisted_3$g)}const __unplugin_components_0$9=_export_sfc(_sfc_main$x,[["render",_sfc_render$b]]),_sfc_main$w={__name:"PrintButton",props:["item"],setup(e){const n=useViewerStore(),r=computed(()=>n.getToolMode),o=computed(()=>n.getCompareMode),s=async()=>{if(r.value==="compare"&&o.value==="content"){n.openElement("printSettingDialog");return}n.setDownloading(!0);try{const u=await core.webViewerNamedAction("Print");n.setDownloading(!1),u||n.setDownloadError("Print")}catch(u){console.log(u)}};return(u,d)=>{const f=__unplugin_components_0$9,v=_sfc_main$2C;return openBlock(),createBlock(v,mergeProps({...e.item},{onClick:s,title:u.$t("header.print")}),{default:withCtx(()=>[createVNode(f)]),_:1},16,["title"])}}},_sfc_main$v={},_hoisted_1$k={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$f=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.3596 8.35973L10.7499 11.9694L10.7499 2C10.7499 1.58579 10.4142 1.25 9.99994 1.25C9.58573 1.25 9.24994 1.58579 9.24994 2L9.24994 11.9694L5.64024 8.35973C5.34735 8.06683 4.87247 8.06683 4.57958 8.35973C4.28669 8.65262 4.28669 9.12749 4.57958 9.42039L9.46961 14.3104C9.7625 14.6033 10.2374 14.6033 10.5303 14.3104L15.4203 9.42039C15.7132 9.12749 15.7132 8.65262 15.4203 8.35973C15.1274 8.06683 14.6525 8.06683 14.3596 8.35973ZM2.99994 16.1538C2.58573 16.1538 2.24994 16.4896 2.24994 16.9038C2.24994 17.318 2.58573 17.6538 2.99994 17.6538H17.3076C17.7218 17.6538 18.0576 17.318 18.0576 16.9038C18.0576 16.4896 17.7218 16.1538 17.3076 16.1538H2.99994Z",fill:"currentColor"},null,-1),_hoisted_3$f=[_hoisted_2$f];function _sfc_render$a(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$k,_hoisted_3$f)}const __unplugin_components_0$8=_export_sfc(_sfc_main$v,[["render",_sfc_render$a]]),DownloadButton_vue_vue_type_style_index_0_lang="",_sfc_main$u={__name:"DownloadButton",setup(e){const n=useViewerStore(),r=computed(()=>n.getToolMode),o=computed(()=>n.getCompareMode),{download:s}=core,u=async()=>{if(r.value==="compare"&&o.value==="content"){n.openElement("downloadSettingDialog");return}n.setDownloading(!0);try{const d=await s();n.setDownloading(!1),d||n.setDownloadError("Downloaded")}catch(d){console.log(d)}};return(d,f)=>{const v=__unplugin_components_0$8,m=_sfc_main$2C;return openBlock(),createBlock(m,{onClick:u,title:d.$t("header.download")},{default:withCtx(()=>[createVNode(v)]),_:1},8,["title"])}}},CompareButtons_vue_vue_type_style_index_0_lang="",_hoisted_1$j={class:"compare-buttons"},_sfc_main$t={__name:"CompareButtons",setup(e){const{loadDocument:n}=core,r=useViewerStore(),o=useDocumentStore(),s=computed(()=>r.getCompareStatus),u=computed(()=>o.getCompareFile("oldFile")&&o.getCompareFile("newFile")&&s.value!=="finished"),d=computed(()=>o.getCurrentPdfData),f=()=>{r.closeElement("compareSettingDialog"),o.setToolState(""),r.setActiceToolMode("view"),s.value&&v(),r.setCompareStatus("")},v=async()=>{if(d.value){r.setUploadLoading(!0),o.setTotalPages(0);try{const y=d.value;y.options.notUpdatePwd=!0,await n(y.pdf,y.options)}catch(y){if(console.log(y),y==="invalid_file_error"||y==="no_password_given"||y==="incorrect_password"){r.setUpload(!1),o.setLoadingProgress(0),r.resetSetting();const w=document.getElementById("fileInput");w.value="",o.setCurrentPdfData();return}}r.setUploadLoading(!1);const _=core.getPagesCount(),g=core.getScale();o.setTotalPages(_),r.setCurrentPage(1),r.setCurrentScale(g)}},m=()=>{r.openElement("compareSettingDialog"),o.initCompareSetting(),r.setCompareMode("content")};return(_,g)=>(openBlock(),createElementBlock("div",_hoisted_1$j,[createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:!unref(u)}]),onClick:m},toDisplayString$1(_.$t("compare.startCompare")),3),createBaseVNode("div",{class:"rect-button white",onClick:f},toDisplayString$1(_.$t("compare.exit")),1)]))}},CToolButton_vue_vue_type_style_index_0_scoped_9189b754_lang="",_hoisted_1$i=["title"],_sfc_main$s={__name:"CToolButton",props:["item"],setup(e){const{item:n}=e,r=useViewerStore(),o=useDocumentStore(),{type:s,title:u,disabled:d,className:f,toolName:v}=n,m=["highlight","underline","squiggly","strikeout"],_=["square","circle","arrow","line"],g=["ink","freetext","stamp","image","link"],y=["textfield","checkbox","radiobutton","listbox","combobox","pushbutton"];computed(()=>{if(m.includes(v))return"markup";if(_.includes(v))return"shape";if(g.includes(v))return"annotation";if(y.includes(v))return"form"});const w=computed(()=>o.getActiveTool),x=computed(()=>v===w.value),k=M=>{o.setToolState(M),r.toggleActiveHand(!1),core.switchTool(0),core.switchAnnotationEditorMode(0),M==="stamp"?r.toggleElement("stampPanel"):r.closeElement("stampPanel"),w.value==="image"&&document.getElementById("signImageInput").click()},S=M=>{o.setMarkupToolState(M),k(M)},E=M=>{o.setShapeToolState(M),k(M)},T=()=>{m.includes(v)&&S(v),_.includes(v)&&E(v),g.includes(v)&&k(v),y.includes(v)&&k(v)};return(M,I)=>{const F=__unplugin_components_0$d,O=__unplugin_components_1$1,N=__unplugin_components_2$4,D=__unplugin_components_3$2,X=__unplugin_components_4$1,U=__unplugin_components_5$1,Z=__unplugin_components_6$1,j=__unplugin_components_7,Q=__unplugin_components_8,ve=__unplugin_components_9$1,Se=__unplugin_components_10,we=__unplugin_components_11,oe=__unplugin_components_12,ne=__unplugin_components_13,q=__unplugin_components_14,H=__unplugin_components_15,Y=__unplugin_components_16,le=__unplugin_components_17,Ce=__unplugin_components_18;return openBlock(),createElementBlock("div",{class:normalizeClass(["button custom-button",{active:unref(x),[unref(s)]:unref(s),[unref(f)]:unref(f),"with-text":y.includes(unref(v))}]),onClick:I[0]||(I[0]=Te=>T()),title:unref(u)},[unref(v)==="highlight"?(openBlock(),createBlock(F,{key:0})):createCommentVNode("",!0),unref(v)==="underline"?(openBlock(),createBlock(O,{key:1})):createCommentVNode("",!0),unref(v)==="strikeout"?(openBlock(),createBlock(N,{key:2})):createCommentVNode("",!0),unref(v)==="squiggly"?(openBlock(),createBlock(D,{key:3})):createCommentVNode("",!0),unref(v)==="ink"?(openBlock(),createBlock(X,{key:4})):createCommentVNode("",!0),unref(v)==="circle"?(openBlock(),createBlock(U,{key:5})):createCommentVNode("",!0),unref(v)==="square"?(openBlock(),createBlock(Z,{key:6})):createCommentVNode("",!0),unref(v)==="arrow"?(openBlock(),createBlock(j,{key:7})):createCommentVNode("",!0),unref(v)==="line"?(openBlock(),createBlock(Q,{key:8})):createCommentVNode("",!0),unref(v)==="freetext"?(openBlock(),createBlock(ve,{key:9})):createCommentVNode("",!0),unref(v)==="stamp"?(openBlock(),createBlock(Se,{key:10})):createCommentVNode("",!0),unref(v)==="image"?(openBlock(),createBlock(we,{key:11})):createCommentVNode("",!0),unref(v)==="link"?(openBlock(),createBlock(oe,{key:12})):createCommentVNode("",!0),unref(v)==="textfield"?(openBlock(),createElementBlock(Fragment,{key:13},[createVNode(ne),createBaseVNode("span",null,toDisplayString$1(M.$t("header.textField")),1)],64)):createCommentVNode("",!0),unref(v)==="checkbox"?(openBlock(),createElementBlock(Fragment,{key:14},[createVNode(q),createBaseVNode("span",null,toDisplayString$1(M.$t("header.checkbox")),1)],64)):createCommentVNode("",!0),unref(v)==="radiobutton"?(openBlock(),createElementBlock(Fragment,{key:15},[createVNode(H),createBaseVNode("span",null,toDisplayString$1(M.$t("header.radioButton")),1)],64)):createCommentVNode("",!0),unref(v)==="listbox"?(openBlock(),createElementBlock(Fragment,{key:16},[createVNode(Y),createBaseVNode("span",null,toDisplayString$1(M.$t("header.listBox")),1)],64)):createCommentVNode("",!0),unref(v)==="combobox"?(openBlock(),createElementBlock(Fragment,{key:17},[createVNode(le),createBaseVNode("span",null,toDisplayString$1(M.$t("header.comboButton")),1)],64)):createCommentVNode("",!0),unref(v)==="pushbutton"?(openBlock(),createElementBlock(Fragment,{key:18},[createVNode(Ce),createBaseVNode("span",null,toDisplayString$1(M.$t("header.button")),1)],64)):createCommentVNode("",!0)],10,_hoisted_1$i)}}},__unplugin_components_3=_export_sfc(_sfc_main$s,[["__scopeId","data-v-9189b754"]]),_hoisted_1$h=["data-element","disabled","title"],_hoisted_2$e=["innerHTML"],_hoisted_3$e=["src"],_sfc_main$r={__name:"ToggleButton",props:["item"],setup(e){const{item:n}=e,r=useViewerStore();useDocumentStore();const{type:o,img:s,dataElement:u,title:d,disabled:f,className:v,element:m}=n,_=s==null?void 0:s.trim().toLowerCase().startsWith("<svg"),g=x=>{x==null||x.stopPropagation(),x==null||x.preventDefault()},y=computed(()=>r.isElementOpen(m)),w=()=>{r.toggleElement(m)};return(x,k)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["button custom-button",{active:unref(y),[unref(o)]:unref(o),disabled:unref(f),[unref(v)]:unref(v)}]),"data-element":unref(u),onClick:k[0]||(k[0]=S=>unref(f)||!w?g():w()),disabled:unref(f),title:unref(d)},[unref(s)?(openBlock(),createElementBlock(Fragment,{key:0},[unref(_)?(openBlock(),createElementBlock("div",{key:0,innerHTML:unref(s),class:"img"},null,8,_hoisted_2$e)):(openBlock(),createElementBlock("img",{key:1,src:unref(s),alt:"",class:"img"},null,8,_hoisted_3$e))],64)):createCommentVNode("",!0)],10,_hoisted_1$h))}},StatefulButton_vue_vue_type_style_index_0_lang="",_hoisted_1$g=["data-element","disabled","title"],_hoisted_2$d=["innerHTML"],_hoisted_3$d=["src"],_hoisted_4$7={key:1,class:"text"},_sfc_main$q={__name:"StatefulButton",props:["item"],setup(e){const{item:n}=e;useViewerStore(),useDocumentStore();const{type:r,dataElement:o,title:s,disabled:u,className:d,initialState:f,states:v,mount:m,unmount:_}=n,g=I=>{I==null||I.stopPropagation(),I==null||I.preventDefault()},y=ref(f),w=v[y.value],x=ref(!1),{img:k}=w,S=k==null?void 0:k.trim().toLowerCase().startsWith("<svg"),E=()=>{T(),w.onClick(w)},T=()=>{y.value=f},M=computed(()=>w.getContent instanceof Function?w.getContent(w):w.getContent);return m&&onMounted(()=>{m()}),_&&onUnmounted(()=>{_()}),(I,F)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["button custom-button",{active:x.value,[unref(r)]:unref(r),disabled:unref(u),[unref(d)]:unref(d)}]),"data-element":unref(o),onClick:F[0]||(F[0]=O=>unref(u)||!E?g():E()),onDblclick:F[1]||(F[1]=O=>unref(u)?g:I.onDoubleClick),onMouseup:F[2]||(F[2]=O=>unref(u)?g:I.onDoubleClick),disabled:unref(u),title:unref(s)},[unref(k)?(openBlock(),createElementBlock(Fragment,{key:0},[unref(S)?(openBlock(),createElementBlock("div",{key:0,innerHTML:unref(k),class:"img"},null,8,_hoisted_2$d)):(openBlock(),createElementBlock("img",{key:1,src:unref(k),alt:"",class:"img"},null,8,_hoisted_3$d))],64)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString$1(unref(M))+" ",1),e.item.dropItem?(openBlock(),createElementBlock("span",_hoisted_4$7,toDisplayString$1(e.item.text),1)):createCommentVNode("",!0)],42,_hoisted_1$g))}},_hoisted_1$f=["data-element","disabled","title"],_hoisted_2$c=["innerHTML"],_hoisted_3$c=["src"],_hoisted_4$6={key:1,class:"text"},_sfc_main$p={__name:"ActionButton",props:["item"],setup(e){const{item:n}=e;useViewerStore(),useDocumentStore();const{type:r,img:o,dataElement:s,onClick:u,title:d,disabled:f,className:v}=n,m=o==null?void 0:o.trim().toLowerCase().startsWith("<svg"),_=g=>{g==null||g.stopPropagation(),g==null||g.preventDefault()};return(g,y)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["button custom-button",{[unref(r)]:unref(r),disabled:unref(f),[unref(v)]:unref(v)}]),"data-element":unref(s),onClick:y[0]||(y[0]=w=>unref(f)||!unref(u)?_():unref(u)(w)),onDblclick:y[1]||(y[1]=w=>unref(f)?_:g.onDoubleClick),onMouseup:y[2]||(y[2]=w=>unref(f)?_:g.onDoubleClick),disabled:unref(f),title:unref(d)},[unref(o)?(openBlock(),createElementBlock(Fragment,{key:0},[unref(m)?(openBlock(),createElementBlock("div",{key:0,innerHTML:unref(o),class:"img"},null,8,_hoisted_2$c)):(openBlock(),createElementBlock("img",{key:1,src:unref(o),alt:"",class:"img"},null,8,_hoisted_3$c))],64)):createCommentVNode("",!0),e.item.dropItem?(openBlock(),createElementBlock("span",_hoisted_4$6,toDisplayString$1(e.item.text),1)):createCommentVNode("",!0)],42,_hoisted_1$f))}},CustomButton_vue_vue_type_style_index_0_lang="",_sfc_main$o={__name:"CustomButton",props:["item"],setup(e){const{item:n}=e,{type:r}=n;return(o,s)=>{const u=_sfc_main$p,d=_sfc_main$q,f=_sfc_main$r,v=__unplugin_components_3;return openBlock(),createElementBlock(Fragment,null,[unref(r)==="actionButton"?(openBlock(),createBlock(u,{key:0,item:e.item},null,8,["item"])):createCommentVNode("",!0),unref(r)==="statefulButton"?(openBlock(),createBlock(d,{key:1,item:e.item},null,8,["item"])):createCommentVNode("",!0),unref(r)==="toggleButton"?(openBlock(),createBlock(f,{key:2,item:e.item},null,8,["item"])):createCommentVNode("",!0),unref(r)==="toolButton"?(openBlock(),createBlock(v,{key:3,item:e.item},null,8,["item"])):createCommentVNode("",!0)],64)}}},_sfc_main$n={},_hoisted_1$e={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$b=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.66731 5.69934H4.95164C5.55909 7.3715 6.21384 8.67697 7.20164 9.69698C8.25354 8.61248 9.07042 7.29169 9.66731 5.69934ZM7.10864 12.0565C8.00383 12.7036 9.11299 13.2183 10.5512 13.6401C10.8845 13.7378 11.2212 13.6119 11.4102 13.3203C11.737 12.816 11.5079 12.0098 10.9339 11.8314C9.98576 11.5368 9.19688 11.1854 8.52747 10.7657C9.81068 9.40566 10.8127 7.73499 11.5524 5.69934H12.728C13.1647 5.69934 13.5188 5.34529 13.5188 4.90854C13.5188 4.47179 13.1647 4.11774 12.728 4.11774H8.17084V2.83101C8.17084 2.37206 7.79878 2 7.33983 2C6.88087 2 6.50881 2.37206 6.50881 2.83101V4.11774H2.03207C1.59533 4.11774 1.24127 4.47179 1.24127 4.90854C1.24127 5.34529 1.59533 5.69934 2.03207 5.69934H3.17484C3.98444 7.92894 4.71182 9.60401 5.82738 10.8859C4.7777 11.6477 3.55589 12.2507 2.15289 12.7164C1.62074 12.893 1.42241 13.6068 1.71639 14.0842C1.91795 14.4116 2.29391 14.5417 2.6569 14.4151C4.36046 13.821 5.84041 13.0462 7.10864 12.0565ZM16.8629 16.017C16.8673 16.017 16.8712 16.0198 16.8725 16.024L17.2645 17.2744C17.3999 17.7062 17.7999 18 18.2524 18C18.9559 18 19.4545 17.3134 19.2369 16.6444L16.6144 8.58416C16.404 7.93763 15.8014 7.49998 15.1215 7.49998C14.4429 7.49998 13.8411 7.93598 13.6297 8.5808L10.9734 16.6831C10.7605 17.3323 11.2442 18 11.9275 18C12.3586 18 12.7416 17.7248 12.8792 17.3162L13.3142 16.024C13.3156 16.0198 13.3195 16.017 13.324 16.017H16.8629ZM16.2459 14.1065C16.2772 14.2326 16.1817 14.3546 16.0518 14.3546H14.1174C13.9868 14.3546 13.8913 14.2315 13.9237 14.105L14.9064 10.2685C14.9579 10.0672 15.2442 10.0683 15.2942 10.27L16.2459 14.1065Z",fill:"currentColor"},null,-1),_hoisted_3$b=[_hoisted_2$b];function _sfc_render$9(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$e,_hoisted_3$b)}const __unplugin_components_6=_export_sfc(_sfc_main$n,[["render",_sfc_render$9]]),_sfc_main$m={},_hoisted_1$d={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$a=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6 1.25H5.25V2V4H6.75V2.75H14.0533L17.25 6.75603V17.1111V17.25H6.75V16H5.25V18V18.75H6H18H18.75V18V17.1111V6.49346V6.23089L18.5862 6.02566L15.0005 1.5322L14.7753 1.25H14.4143H6ZM2 4.95819H1.25V5.70819V15V16.1967L2.32698 15.675L4.83876 14.4582H11.7778H12.5278V13.7082V5.70819V4.95819H11.7778H2ZM2.75 13.8033V6.45819H11.0278V12.9582H4.66667H4.49457L4.33969 13.0332L2.75 13.8033ZM9.11107 11.8166H4.66663V10.3166H9.11107V11.8166ZM4.66663 8.97222H9.11107V7.47222H4.66663V8.97222Z",fill:"currentColor"},null,-1),_hoisted_3$a=[_hoisted_2$a];function _sfc_render$8(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$d,_hoisted_3$a)}const __unplugin_components_0$7=_export_sfc(_sfc_main$m,[["render",_sfc_render$8]]),FlattenButton_vue_vue_type_style_index_0_lang="",_sfc_main$l={__name:"FlattenButton",props:["item"],setup(e){const n=useViewerStore(),{flattenPdfDownload:r}=core,o=async()=>{n.setDownloading(!0);try{const s=await r();n.setDownloading(!1),s||n.setDownloadError("Downloaded")}catch(s){console.log(s)}};return(s,u)=>{const d=__unplugin_components_0$7,f=_sfc_main$2C;return openBlock(),createBlock(f,mergeProps({...e.item},{onClick:o}),{default:withCtx(()=>[createVNode(d)]),_:1},16)}}},_sfc_main$k={},_hoisted_1$c={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$9=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.62109 10C2.62109 5.92468 5.9248 2.62097 10.0001 2.62097C14.0755 2.62097 17.3792 5.92468 17.3792 10C17.3792 14.0753 14.0755 17.379 10.0001 17.379C5.9248 17.379 2.62109 14.0753 2.62109 10ZM10.0001 1.12097C5.09637 1.12097 1.12109 5.09625 1.12109 10C1.12109 14.9038 5.09637 18.879 10.0001 18.879C14.9039 18.879 18.8792 14.9038 18.8792 10C18.8792 5.09625 14.9039 1.12097 10.0001 1.12097ZM6.02432 11.5C6.71468 11.5 7.27432 10.9404 7.27432 10.25C7.27432 9.55967 6.71468 9.00003 6.02432 9.00003C5.33396 9.00003 4.77432 9.55967 4.77432 10.25C4.77432 10.9404 5.33396 11.5 6.02432 11.5ZM10.0888 11.5C10.7792 11.5 11.3388 10.9404 11.3388 10.25C11.3388 9.55967 10.7792 9.00003 10.0888 9.00003C9.39848 9.00003 8.83884 9.55967 8.83884 10.25C8.83884 10.9404 9.39848 11.5 10.0888 11.5ZM15.4034 10.25C15.4034 10.9404 14.8437 11.5 14.1534 11.5C13.463 11.5 12.9034 10.9404 12.9034 10.25C12.9034 9.55967 13.463 9.00003 14.1534 9.00003C14.8437 9.00003 15.4034 9.55967 15.4034 10.25Z",fill:"currentColor"},null,-1),_hoisted_3$9=[_hoisted_2$9];function _sfc_render$7(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$c,_hoisted_3$9)}const __unplugin_components_0$6=_export_sfc(_sfc_main$k,[["render",_sfc_render$7]]),Dropdown_vue_vue_type_style_index_0_lang="",_hoisted_1$b={class:"drop-down"},_hoisted_2$8=["data-element"],_hoisted_3$8=["data-element"],_hoisted_4$5=["data-element"],_hoisted_5$2=["data-element"],_hoisted_6$2=["data-element"],_sfc_main$j={__name:"Dropdown",props:["rightItems"],setup(e){const n=useViewerStore(),r=ref(null),{download:o,webViewerNamedAction:s,flattenPdfDownload:u}=core,d=computed(()=>n.getPopoverChanged),f=computed(()=>r.value&&r.value.getMergedShow()),v=computed(()=>n.getUpload);watch(()=>d.value,(w,x)=>{w&&(r.value.setShow(!1),n.setPopoverChanged(!1))});const m=async()=>{n.setDownloading(!0);try{const w=await o();n.setDownloading(!1),w||n.setDownloadError("Downloaded")}catch(w){console.log(w)}},_=async()=>{n.setDownloading(!0);try{const w=await u();n.setDownloading(!1),w||n.setDownloadError("Downloaded")}catch(w){console.log(w)}},g=async()=>{n.setDownloading(!0);try{const w=await s("Print");n.setDownloading(!1),w||n.setDownloadError("Print")}catch(w){console.log(w)}},y=()=>{n.openElement("languageDialog")};return(w,x)=>{const k=__unplugin_components_0$6,S=__unplugin_components_8$1,E=_sfc_main$2C,T=_sfc_main$u,M=_sfc_main$l,I=_sfc_main$w,F=__unplugin_components_6,O=_sfc_main$o;return openBlock(),createBlock(unref(NPopover),{ref_key:"popover",ref:r,placement:"top-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,"z-index":72},{trigger:withCtx(()=>[createVNode(E,{class:normalizeClass({active:unref(f),disabled:!unref(v)})},{default:withCtx(()=>[createVNode(k),createVNode(S,{class:"arrow-left"})]),_:1},8,["class"])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$b,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.rightItems,(N,D)=>(openBlock(),createElementBlock(Fragment,{key:`${N.type}-${N.dataElement||D}`},[N.type==="downloadButton"&&!N.hidden?(openBlock(),createElementBlock("div",{key:0,"data-element":N.dataElement,class:"drop-item",onClick:m},[createVNode(T),createTextVNode(toDisplayString$1(w.$t("header.download")),1)],8,_hoisted_2$8)):createCommentVNode("",!0),N.type==="flattenButton"&&!N.hidden?(openBlock(),createElementBlock("div",{key:1,"data-element":N.dataElement,class:"drop-item",onClick:_},[createVNode(M),createTextVNode(toDisplayString$1(w.$t("header.flatten")),1)],8,_hoisted_3$8)):createCommentVNode("",!0),N.type==="printButton"&&!N.hidden?(openBlock(),createElementBlock("div",{key:2,"data-element":N.dataElement,class:"drop-item",onClick:g},[createVNode(I),createTextVNode(toDisplayString$1(w.$t("header.print")),1)],8,_hoisted_4$5)):createCommentVNode("",!0),N.type==="languageButton"&&!N.hidden?(openBlock(),createElementBlock("div",{key:3,"data-element":N.dataElement,class:"drop-item",onClick:y},[createVNode(E,{title:w.$t("header.language")},{default:withCtx(()=>[createVNode(F)]),_:1},8,["title"]),createTextVNode(" "+toDisplayString$1(w.$t("header.language")),1)],8,_hoisted_5$2)):createCommentVNode("",!0),N.name==="customButton"&&N.dropItem&&!N.hidden?(openBlock(),createElementBlock("div",{key:4,"data-element":N.dataElement,class:"drop-item"},[createVNode(O,{item:N},null,8,["item"])],8,_hoisted_6$2)):createCommentVNode("",!0)],64))),128))])]),_:1},512)}}},_sfc_main$i={},_hoisted_1$a={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$7=createBaseVNode("path",{d:"M18.3327 10C18.3327 10 14.6017 16.25 9.99935 16.25C5.39698 16.25 1.66602 10 1.66602 10C1.66602 10 5.39698 3.75 9.99935 3.75C14.6017 3.75 18.3327 10 18.3327 10Z",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$7=createBaseVNode("circle",{cx:"10",cy:"10",r:"2",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_4$4=[_hoisted_2$7,_hoisted_3$7];function _sfc_render$6(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$a,_hoisted_4$4)}const __unplugin_components_0$5=_export_sfc(_sfc_main$i,[["render",_sfc_render$6]]),_sfc_main$h={__name:"PageMode",setup(e){const n=useViewerStore(),r=computed(()=>n.isElementOpen("pageModePanel")),o=()=>{r.value?n.closeElement("pageModePanel"):n.openElement("pageModePanel")};return(s,u)=>{const d=__unplugin_components_0$5,f=_sfc_main$2C;return openBlock(),createBlock(f,{class:normalizeClass({active:unref(r)}),onClick:o,title:s.$t("header.viewSetting")},{default:withCtx(()=>[createVNode(d)]),_:1},8,["class","title"])}}},_sfc_main$g={__name:"OpenFileButton",props:["item"],setup(e){const n=()=>{window.instance.changeFile()};return(r,o)=>{const s=_sfc_main$1k,u=_sfc_main$2C;return openBlock(),createBlock(u,mergeProps({...e.item},{onClick:n,title:r.$t("header.openFile")}),{default:withCtx(()=>[createVNode(s,{glyph:"icon-open-file"})]),_:1},16,["title"])}}},_sfc_main$f={},_hoisted_1$9={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$6=createBaseVNode("rect",{x:"12",y:"8",width:"6",height:"9",fill:"#999999"},null,-1),_hoisted_3$6=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.5 3.5H17.5V7.25H12H2.5V3.5ZM12.75 8.75H17.5V16.5H12.75V8.75ZM11.25 16.5V8.75H2.5V16.5H11.25ZM17.5 2H19V3.5V16.5V18H17.5H2.5H1V16.5V3.5V2H2.5H17.5Z",fill:"currentColor"},null,-1),_hoisted_4$3=[_hoisted_2$6,_hoisted_3$6];function _sfc_render$5(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$9,_hoisted_4$3)}const __unplugin_components_0$4=_export_sfc(_sfc_main$f,[["render",_sfc_render$5]]),_sfc_main$e={__name:"index",props:["item"],setup(e){const{item:n}=e,r=useViewerStore(),o=computed(()=>r.getToolMode),s=computed(()=>r.isElementOpen(n.element)),u=computed(()=>r.isElementOpen("contentEditorPanel"));computed(()=>r.getContentEditorType);let d=ref(!0),f=ref(!0);watch(()=>u.value,(_,g)=>{f.value=!u.value&&!document.querySelector(".frame-container.selected")}),watch(o,(_,g)=>{g==="form"&&_!=="form"&&(r.closeElement(n.element),core.toggleSidebar())});const v=()=>{setTimeout(()=>{d.value=document.getElementsByClassName("outline-container").length===0,!(o.value==="form"&&d.value&&document.getElementsByClassName("right-panel")[0].className.indexOf("closed")!==-1)&&(o.value==="form"?r.toggleElement(n.element):o.value==="editor"&&r.toggleElement("contentEditorPanel"),core.toggleSidebar())},1)},m=_=>{f.value=_,d.value=document.getElementsByClassName("outline-container").length===0};return core.addEvent("changeRightPanelBtnDisabled",m),(_,g)=>{const y=__unplugin_components_0$4,w=_sfc_main$2C;return openBlock(),createBlock(w,mergeProps({isActive:unref(s)||unref(u)},{...e.item},{onClick:v,class:{disabled:unref(d)&&unref(f)||unref(o)!=="form"&&unref(o)!=="editor"},title:_.$t("header.rightPanel")}),{default:withCtx(()=>[createVNode(y)]),_:1},16,["isActive","class","title"])}}},_sfc_main$d={},_hoisted_1$8={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$5=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.10986 13.9354C2.71178 11.5373 2.71178 7.64923 5.10986 5.25114C7.50795 2.85306 11.396 2.85306 13.7941 5.25114C16.1922 7.64923 16.1922 11.5373 13.7941 13.9354C11.396 16.3335 7.50795 16.3335 5.10986 13.9354ZM4.0492 4.19048C1.06533 7.17436 1.06533 12.0122 4.0492 14.996C6.85416 17.801 11.2974 17.9692 14.2988 15.5006L17.1989 18.4006C17.4918 18.6935 17.9666 18.6935 18.2595 18.4006C18.5524 18.1078 18.5524 17.6329 18.2595 17.34L15.3595 14.4399C17.8279 11.4385 17.6597 6.99539 14.8548 4.19048C11.8709 1.20661 7.03307 1.20661 4.0492 4.19048Z",fill:"currentColor"},null,-1),_hoisted_3$5=[_hoisted_2$5];function _sfc_render$4(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$8,_hoisted_3$5)}const __unplugin_components_0$3=_export_sfc(_sfc_main$d,[["render",_sfc_render$4]]),_hoisted_1$7={class:"search-container"},_sfc_main$c={__name:"index",props:["item"],setup(e){const n=useViewerStore(),r=computed(()=>n.getSearchStatus),o=computed(()=>n.getUpload),s=computed(()=>n.isElementOpen("leftPanel")),u=computed(()=>n.getActiveElementTab("leftPanelTab")),d=()=>{core.webViewerNamedAction("Find"),s.value&&u.value!=="SEARCH"?n.setSearchStatus(!0):s.value?(n.setSearchStatus(!1),n.toggleElement("leftPanel"),core.toggleSidebar()):(n.setSearchStatus(!0),n.toggleElement("leftPanel"),core.toggleSidebar()),n.setActiveElementTab("leftPanelTab","SEARCH")};return(f,v)=>{const m=__unplugin_components_0$3,_=_sfc_main$2C;return openBlock(),createElementBlock("div",_hoisted_1$7,[createVNode(_,mergeProps({id:"viewFind"},{...e.item},{isActive:unref(r)&&unref(s),onClick:d,class:{disabled:!unref(o)},title:f.$t("header.search")}),{default:withCtx(()=>[createVNode(m)]),_:1},16,["isActive","class","title"])])}}},_sfc_main$b={__name:"ViewRotationControls",setup(e){const n=()=>{core.rotateCounterclockwise()},r=()=>{core.rotateClockwise()};return(o,s)=>{const u=_sfc_main$2C;return openBlock(),createElementBlock(Fragment,null,[createVNode(u,{img:"icon-header-counter-clockwise",title:"Rotate Counterclockwise",onClick:n}),createVNode(u,{img:"icon-header-clockwise",title:"Rotate Clockwise",onClick:r})],64)}}},ThemeMode_vue_vue_type_style_index_0_lang="",_hoisted_1$6={class:"theme-mode"},_sfc_main$a={__name:"ThemeMode",setup(e){const n=useViewerStore(),r=computed(()=>n.getThemeMode),o=computed(()=>n.getUpload);watch(r,()=>{document.documentElement.classList.toggle("dark")});const s=u=>{u!==r.value&&n.setThemeMode(u)};return(u,d)=>{const f=__unplugin_components_0$l,v=_sfc_main$2C,m=__unplugin_components_2$b;return openBlock(),createElementBlock("div",_hoisted_1$6,[createVNode(v,{onClick:d[0]||(d[0]=_=>s("Light")),class:normalizeClass({active:unref(r)==="Light",disabled:!unref(o)}),title:u.$t("header.light")},{default:withCtx(()=>[createVNode(f)]),_:1},8,["class","title"]),createVNode(v,{onClick:d[1]||(d[1]=_=>s("Dark")),class:normalizeClass({active:unref(r)==="Dark",disabled:!unref(o)}),title:u.$t("header.dark")},{default:withCtx(()=>[createVNode(m)]),_:1},8,["class","title"])])}}},_sfc_main$9={},_hoisted_1$5={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$4=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.7463 7.94055L8.43134 3.20358C8.38986 2.6073 8.82031 2.08322 9.40947 2.01273L9.46546 2.00656C9.75502 1.97416 10.0451 2.06271 10.2681 2.25159C10.4911 2.44047 10.6276 2.71317 10.6457 3.00614L10.9886 8.17061C10.999 8.31659 11.1097 8.43516 11.2537 8.45444C11.3176 8.46288 11.382 8.44409 11.4315 8.40258C11.481 8.36108 11.5111 8.30063 11.5145 8.23584L11.7612 3.47595C11.7918 2.85998 12.3116 2.38523 12.923 2.41468H12.9309C13.5429 2.44972 14.0111 2.97745 13.9773 3.59407L13.7218 8.51438C13.7137 8.66679 13.8235 8.79975 13.9738 8.81936C14.1225 8.83876 14.2625 8.73915 14.2914 8.59018L14.8006 6.02337C14.9178 5.41517 15.497 5.01851 16.0954 5.13574L16.1041 5.13751C16.7058 5.25854 17.0969 5.84695 16.979 6.45353L16.3684 9.53687C15.8189 13.3474 15.0586 15.5052 14.3946 16.4246C13.3649 17.8508 11.5573 17.8667 10.1251 17.8667C8.69381 17.8667 7.16012 17.5291 6.44796 16.9993C5.73492 16.4696 4.77079 15.2575 4.15837 13.9327L4.16712 13.9283C4.11876 13.8639 4.0774 13.7945 4.04376 13.7212L3.105 11.685C2.84552 11.1243 3.08338 10.4577 3.63781 10.1918L3.64656 10.1874C3.91235 10.0626 4.21656 10.0497 4.49179 10.1517C4.76702 10.2536 4.99055 10.4619 5.11287 10.7304C5.62206 11.8234 5.94227 12.324 6.07526 12.2324C6.27386 12.0949 6.12075 11.7176 5.85478 9.21249C5.67578 7.53039 5.45319 5.85328 5.18724 4.18289C5.07653 3.5968 5.44002 3.02581 6.01489 2.88273L6.07526 2.86775C6.35866 2.79957 6.65742 2.85178 6.90147 3.01215C7.14552 3.17252 7.3134 3.42693 7.36572 3.71571L8.168 8.02341C8.19642 8.17613 8.33897 8.27937 8.49171 8.25787C8.64561 8.23564 8.75656 8.09774 8.7463 7.94143V7.94055Z",fill:"currentColor"},null,-1),_hoisted_3$4=[_hoisted_2$4];function _sfc_render$3(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$5,_hoisted_3$4)}const __unplugin_components_0$2=_export_sfc(_sfc_main$9,[["render",_sfc_render$3]]),_sfc_main$8={__name:"HandButton",props:["item"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useViewerStore(),s=useDocumentStore(),u=computed(()=>o.getActiveHand),d=()=>{window.getSelection().empty(),o.toggleActiveHand(!u.value);const f=u.value?1:0;n(f),r(0),o.closeActiveStickNote(),core.webViewerNamedAction("Find",4),s.setToolState(""),o.setSearchStatus(!1)};return(f,v)=>{const m=__unplugin_components_0$2,_=_sfc_main$2C;return openBlock(),createBlock(_,mergeProps({isActive:unref(u),img:"icon-hand-tool"},{...e.item},{onClick:d,title:f.$t("header.pan")}),{default:withCtx(()=>[createVNode(m)]),_:1},16,["isActive","title"])}}},_sfc_main$7={},_hoisted_1$4={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.5 3.5H16.5V16.5H3.5V3.5ZM2 2H3.5H16.5H18V3.5V16.5V18H16.5H3.5H2V16.5V3.5V2ZM14.2461 14.9961H11.6868V13.4961H13.4961V11.6893H14.9961V14.2461V14.9961H14.2461ZM13.4961 6.5H11.6868V5H14.2461H14.9961V5.75V8.3078H13.4961V6.5ZM6.5 6.5H8.30664V5H5.75H5V5.75V8.3078H6.5V6.5ZM5.75 14.9961H8.30664V13.4961H6.5V11.6893H5V14.2461V14.9961H5.75Z",fill:"currentColor"},null,-1),_hoisted_3$3=[_hoisted_2$3];function _sfc_render$2(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$4,_hoisted_3$3)}const __unplugin_components_0$1=_export_sfc(_sfc_main$7,[["render",_sfc_render$2]]),FullScreenButton_vue_vue_type_style_index_0_lang="",_sfc_main$6={__name:"FullScreenButton",props:["item"],setup(e){const{requestFullScreenMode:n}=core,r=useViewerStore(),o=useDocumentStore(),s=computed(()=>r.isElementOpen("leftPanel"));core.addEvent("presentationmodechanged",({state:d})=>{d===1?r.setFullMode(!1):d===3&&r.setFullMode(!0)});const u=()=>{const d=navigator.userAgent.match(/(iPad)/)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;s.value&&(window.innerWidth<930||d)&&(r.toggleElement("leftPanel"),core.toggleSidebar());const f=document.getElementById("sign-image-save");f&&f.remove(),n(),o.setToolState("")};return(d,f)=>{const v=__unplugin_components_0$1,m=_sfc_main$2C;return openBlock(),createBlock(m,mergeProps({img:"icon-full-screen",className:"full-screen"},{...e.item},{onClick:u,title:d.$t("header.fullScreen")}),{default:withCtx(()=>[createVNode(v)]),_:1},16,["title"])}}},_sfc_main$5={};function _sfc_render$1(e,n){return openBlock(),createElementBlock("div")}const __unplugin_components_2=_export_sfc(_sfc_main$5,[["render",_sfc_render$1]]),_sfc_main$4={},_hoisted_1$3={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2=createBaseVNode("rect",{x:"2",y:"8",width:"6",height:"9",fill:"#999999"},null,-1),_hoisted_3$2=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.5 3.5H2.5V7.25H8H17.5V3.5ZM7.25 8.75H2.5V16.5H7.25V8.75ZM8.75 16.5V8.75H17.5V16.5H8.75ZM2.5 2H1V3.5V16.5V18H2.5H17.5H19V16.5V3.5V2H17.5H2.5Z",fill:"currentColor"},null,-1),_hoisted_4$2=[_hoisted_2$2,_hoisted_3$2];function _sfc_render(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3,_hoisted_4$2)}const __unplugin_components_0=_export_sfc(_sfc_main$4,[["render",_sfc_render]]),_sfc_main$3={__name:"ToggleElementButton",props:["item"],setup(e){const{item:n}=e,r=useViewerStore(),o=computed(()=>r.isElementOpen(n.element)),s=computed(()=>r.getActiveElementTab("leftPanelTab")),u=()=>{s.value==="SEARCH"&&core.webViewerNamedAction("Find"),r.toggleElement(n.element),core.toggleSidebar()};return(d,f)=>{const v=__unplugin_components_0,m=_sfc_main$2C;return openBlock(),createBlock(m,mergeProps({isActive:unref(o)},{...e.item},{onClick:u,title:d.$t("header.leftPanel")}),{default:withCtx(()=>[createVNode(v)]),_:1},16,["isActive","title"])}}},HeaderItems_vue_vue_type_style_index_0_lang="",_hoisted_1$2={key:0,class:"header-items"},_hoisted_2$1={class:"drop-menu"},_hoisted_3$1={class:"drop-down narrower"},_hoisted_4$1=["data-element"],_hoisted_5$1=["data-element"],_hoisted_6$1=["data-element"],_hoisted_7$1=["data-element"],_hoisted_8$1=["data-element"],_hoisted_9=["data-element"],_hoisted_10=["data-element"],_hoisted_11=["data-element"],_hoisted_12={key:0,class:"tool-menu"},_hoisted_13=["data-element"],_hoisted_14=["data-element"],_hoisted_15=["data-element"],_hoisted_16=["data-element"],_hoisted_17=["data-element"],_hoisted_18=["data-element"],_hoisted_19=["data-element"],_hoisted_20=["data-element"],_hoisted_21={class:"right-container"},_hoisted_22={key:1,class:"header-items"},_hoisted_23=createBaseVNode("div",{class:"divider"},null,-1),_hoisted_24={class:"right-container"},_sfc_main$2={__name:"HeaderItems",props:["items","rightItems","toolMode"],setup(e){const n=e,{switchTool:r,switchAnnotationEditorMode:o}=core,u=getCurrentInstance().appContext.app.config.globalProperties.$t,d=useViewerStore(),f=useDocumentStore(),v=ref(null),m=computed(()=>d.getCompareStatus),_=computed(()=>d.getUpload),g=computed(()=>d.getTools);let y=computed(()=>{const E={view:u("header.viewer"),form:u("header.forms"),annotation:u("header.annotations"),sign:u("header.signatures"),security:u("header.security"),compare:u("header.compare"),editor:u("header.editor"),document:u("header.document")};return E[n.toolMode]?E[n.toolMode]:""});const w=computed(()=>d.getWebviewerMode),x=computed(()=>d.getVerified),k=E=>{if(!x.value){alert("Invalid license");return}if(w.value!=="Standalone"&&["editor","document"].includes(E)){E==="editor"?d.openElement("contentEditorPreventDialog"):d.openElement("docEditorPreventDialog");return}d.setActiceToolMode(E),f.setToolState(""),d.toggleActiveHand(!1),r(0),o(0),v.value.setShow(!1),(E==="compare"||E==="document")&&d.resetPanels()},S=()=>{d.toggleElement("signCreatePanel"),d.setActiceToolMode("sign"),f.setToolState(""),d.toggleActiveHand(!1),r(0),o(0),v.value.setShow(!1),document.body.style.overflow="hidden"};return(E,T)=>{const M=_sfc_main$o,I=_sfc_main$3,F=__unplugin_components_2,O=_sfc_main$6,N=_sfc_main$8,D=_sfc_main$1G,X=_sfc_main$a,U=_sfc_main$b,Z=__unplugin_components_8$1,j=_sfc_main$c,Q=_sfc_main$e,ve=_sfc_main$g,Se=_sfc_main$h,we=_sfc_main$j,oe=_sfc_main$t,ne=_sfc_main$u,q=_sfc_main$w,H=_sfc_main$y;return e.toolMode!=="compare"&&e.toolMode!=="document"?(openBlock(),createElementBlock("div",_hoisted_1$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.items,(Y,le)=>(openBlock(),createElementBlock(Fragment,{key:`${Y.type}-${Y.dataElement||le}`},[Y.name==="customButton"&&!Y.hidden&&!Y.dropItem?(openBlock(),createBlock(M,{key:0,item:Y},null,8,["item"])):Y.type==="toggleElementButton"&&!Y.hidden?(openBlock(),createBlock(I,{key:1,item:Y,class:normalizeClass({disabled:!unref(_)}),"data-element":Y.dataElement},null,8,["item","class","data-element"])):Y.type==="toolButton"&&!Y.hidden?(openBlock(),createBlock(F,{key:2,item:Y,"data-element":Y.dataElement},null,8,["item","data-element"])):Y.type==="fullScreenButton"&&!Y.hidden?(openBlock(),createBlock(O,{key:3,item:Y,class:normalizeClass({disabled:!unref(_)}),"data-element":Y.dataElement},null,8,["item","class","data-element"])):Y.type==="handToolButton"&&!Y.hidden?(openBlock(),createBlock(N,{key:4,item:Y,class:normalizeClass({disabled:!unref(_)}),"data-element":Y.dataElement},null,8,["item","class","data-element"])):Y.type==="zoomOverlay"&&!Y.hidden?(openBlock(),createBlock(D,{key:5,"data-element":Y.dataElement},null,8,["data-element"])):Y.type==="themeMode"&&!Y.hidden?(openBlock(),createBlock(X,{key:6,"data-element":Y.dataElement},null,8,["data-element"])):Y.type==="viewRotationControls"&&!Y.hidden?(openBlock(),createBlock(U,{key:7,"data-element":Y.dataElement},null,8,["data-element"])):["spacer","divider"].includes(Y.type)?(openBlock(),createElementBlock("div",{key:8,class:normalizeClass(Y.type)},null,2)):createCommentVNode("",!0)],64))),128)),createBaseVNode("div",{class:normalizeClass(["tool-container mobile",{"events-none":!unref(_)}])},[unref(g).length?(openBlock(),createBlock(unref(NPopover),{key:0,ref_key:"popoverMode",ref:v,placement:"bottom-end",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0},{trigger:withCtx(()=>[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("span",null,toDisplayString$1(unref(y)),1),createVNode(Z,{class:"arrow-left"})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_3$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(g),(Y,le)=>(openBlock(),createElementBlock(Fragment,{key:`${Y.dataElement||le}`},[Y.element==="view"&&!Y.hidden?(openBlock(),createElementBlock("div",{key:0,"data-element":Y.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="view"}]),onClick:T[0]||(T[0]=Ce=>k("view"))},toDisplayString$1(unref(u)("header.viewer")),11,_hoisted_4$1)):Y.element==="annotation"&&!Y.hidden?(openBlock(),createElementBlock("div",{key:1,"data-element":Y.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="annotation"}]),onClick:T[1]||(T[1]=Ce=>k("annotation"))},toDisplayString$1(unref(u)("header.annotations")),11,_hoisted_5$1)):Y.element==="form"&&!Y.hidden?(openBlock(),createElementBlock("div",{key:2,"data-element":Y.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="form"}]),onClick:T[2]||(T[2]=Ce=>k("form"))},toDisplayString$1(unref(u)("header.forms")),11,_hoisted_6$1)):Y.element==="sign"&&!Y.hidden?(openBlock(),createElementBlock("div",{key:3,"data-element":Y.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="sign"}]),onClick:T[3]||(T[3]=Ce=>S())},toDisplayString$1(unref(u)("header.signatures")),11,_hoisted_7$1)):Y.element==="security"&&!Y.hidden?(openBlock(),createElementBlock("div",{key:4,"data-element":Y.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="security"}]),onClick:T[4]||(T[4]=Ce=>k("security"))},toDisplayString$1(unref(u)("header.security")),11,_hoisted_8$1)):Y.element==="compare"&&!Y.hidden?(openBlock(),createElementBlock("div",{key:5,"data-element":Y.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="compare"}]),onClick:T[5]||(T[5]=Ce=>k("compare"))},toDisplayString$1(unref(u)("header.compare")),11,_hoisted_9)):Y.element==="editor"&&!Y.hidden?(openBlock(),createElementBlock("div",{key:6,"data-element":Y.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="editor"}]),onClick:T[6]||(T[6]=Ce=>k("editor"))},toDisplayString$1(unref(u)("header.editor")),11,_hoisted_10)):Y.element==="document"&&!Y.hidden?(openBlock(),createElementBlock("div",{key:7,"data-element":Y.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="document"}]),onClick:T[7]||(T[7]=Ce=>k("document"))},toDisplayString$1(unref(u)("header.document")),11,_hoisted_11)):createCommentVNode("",!0)],64))),128))])]),_:1},512)):createCommentVNode("",!0)],2),createBaseVNode("div",{class:normalizeClass(["tool-container pc",{"events-none":!unref(_)}])},[unref(g).length?(openBlock(),createElementBlock("div",_hoisted_12,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(g),(Y,le)=>(openBlock(),createElementBlock(Fragment,{key:`${Y.dataElement||le}`},[Y.element==="view"&&!Y.hidden?(openBlock(),createElementBlock("div",{key:0,"data-element":Y.dataElement,class:normalizeClass(["item",{active:e.toolMode==="view"}]),onClick:T[8]||(T[8]=Ce=>k("view"))},toDisplayString$1(unref(u)("header.viewer")),11,_hoisted_13)):Y.element==="annotation"&&!Y.hidden?(openBlock(),createElementBlock("div",{key:1,"data-element":Y.dataElement,class:normalizeClass(["item",{active:e.toolMode==="annotation"}]),onClick:T[9]||(T[9]=Ce=>k("annotation"))},toDisplayString$1(unref(u)("header.annotations")),11,_hoisted_14)):Y.element==="form"&&!Y.hidden?(openBlock(),createElementBlock("div",{key:2,"data-element":Y.dataElement,class:normalizeClass(["item",{active:e.toolMode==="form"}]),onClick:T[10]||(T[10]=Ce=>k("form"))},toDisplayString$1(unref(u)("header.forms")),11,_hoisted_15)):Y.element==="sign"&&!Y.hidden?(openBlock(),createElementBlock("div",{key:3,"data-element":Y.dataElement,class:normalizeClass(["item",{active:e.toolMode==="sign"}]),onClick:T[11]||(T[11]=Ce=>S())},toDisplayString$1(unref(u)("header.signatures")),11,_hoisted_16)):Y.element==="security"&&!Y.hidden?(openBlock(),createElementBlock("div",{key:4,"data-element":Y.dataElement,class:normalizeClass(["item",{active:e.toolMode==="security"}]),onClick:T[12]||(T[12]=Ce=>k("security"))},toDisplayString$1(unref(u)("header.security")),11,_hoisted_17)):Y.element==="compare"&&!Y.hidden?(openBlock(),createElementBlock("div",{key:5,"data-element":Y.dataElement,class:normalizeClass(["item",{active:e.toolMode==="compare"}]),onClick:T[13]||(T[13]=Ce=>k("compare"))},toDisplayString$1(unref(u)("header.compare")),11,_hoisted_18)):Y.element==="editor"&&!Y.hidden?(openBlock(),createElementBlock("div",{key:6,"data-element":Y.dataElement,class:normalizeClass(["item",{active:e.toolMode==="editor"}]),onClick:T[14]||(T[14]=Ce=>k("editor"))},toDisplayString$1(unref(u)("header.editor")),11,_hoisted_19)):Y.element==="document"&&!Y.hidden?(openBlock(),createElementBlock("div",{key:7,"data-element":Y.dataElement,class:normalizeClass(["item",{active:e.toolMode==="document"}]),onClick:T[15]||(T[15]=Ce=>k("document"))},toDisplayString$1(unref(u)("header.document")),11,_hoisted_20)):createCommentVNode("",!0)],64))),128))])):createCommentVNode("",!0)],2),createBaseVNode("div",_hoisted_21,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.rightItems,(Y,le)=>(openBlock(),createElementBlock(Fragment,{key:`${Y.type}-${Y.dataElement||le}`},[Y.name==="customButton"&&!Y.hidden&&!Y.dropItem?(openBlock(),createBlock(M,{key:0,item:Y,"data-element":Y.dataElement},null,8,["item","data-element"])):Y.type==="searchButton"&&!Y.hidden?(openBlock(),createBlock(j,{key:1,item:Y,"data-element":Y.dataElement},null,8,["item","data-element"])):Y.type==="toggleRightPanelButton"&&!Y.hidden?(openBlock(),createBlock(Q,{key:2,item:Y,disabled:!unref(_),"data-element":Y.dataElement},null,8,["item","disabled","data-element"])):Y.type==="openFileButton"&&!Y.hidden?(openBlock(),createBlock(ve,{key:3,item:Y,"data-element":Y.dataElement},null,8,["item","data-element"])):Y.type==="pageModeButton"&&!Y.hidden?(openBlock(),createBlock(Se,{key:4,class:normalizeClass({disabled:!unref(_)}),"data-element":Y.dataElement},null,8,["class","data-element"])):["spacer","divider"].includes(Y.type)?(openBlock(),createElementBlock("div",{key:5,class:normalizeClass(Y.type)},null,2)):createCommentVNode("",!0)],64))),128)),createVNode(we,{class:normalizeClass({disabled:!unref(_)}),rightItems:e.rightItems},null,8,["class","rightItems"])])])):e.toolMode==="compare"?(openBlock(),createElementBlock("div",_hoisted_22,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.items,(Y,le)=>(openBlock(),createElementBlock(Fragment,{key:`${Y.type}-${Y.dataElement||le}`},[Y.type==="fullScreenButton"&&!Y.hidden?(openBlock(),createBlock(O,{key:0,item:Y,class:normalizeClass({disabled:unref(m)!=="finished"}),"data-element":Y.dataElement},null,8,["item","class","data-element"])):createCommentVNode("",!0)],64))),128)),_hoisted_23,createVNode(oe),createBaseVNode("div",_hoisted_24,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.rightItems,(Y,le)=>(openBlock(),createElementBlock(Fragment,{key:`${Y.type}-${Y.dataElement||le}`},[Y.type==="downloadButton"&&!Y.hidden?(openBlock(),createBlock(ne,{key:0,item:Y,class:normalizeClass({disabled:unref(m)!=="finished"&&unref(m)!=="next"}),"data-element":Y.dataElement},null,8,["item","class","data-element"])):createCommentVNode("",!0),Y.type==="printButton"&&!Y.hidden?(openBlock(),createBlock(q,{key:1,item:Y,class:normalizeClass({disabled:unref(m)!=="finished"&&unref(m)!=="next"}),"data-element":Y.dataElement},null,8,["item","class","data-element"])):createCommentVNode("",!0)],64))),128))])])):e.toolMode==="document"?(openBlock(),createBlock(H,{key:2})):createCommentVNode("",!0)}}},Header_vue_vue_type_style_index_0_lang="",_hoisted_1$1={class:"header"},_sfc_main$1={__name:"Header",setup(e){const n=useViewerStore(),r=n.getActiveHeaderItems,o=n.getActiveRightHeaderItems,s=computed(()=>n.getToolMode);return(u,d)=>{const f=_sfc_main$2,v=__unplugin_components_1;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$1,[createVNode(f,{items:unref(r),rightItems:unref(o),toolMode:unref(s)},null,8,["items","rightItems","toolMode"])]),createVNode(v,{toolMode:unref(s)},null,8,["toolMode"])],64)}}},initDocument=(e={})=>{const n=new ComPDFKitViewer(e);window.instance=n,core.setDocumentViewer(1,n)};/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ownKeys(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,o)}return r}function _objectSpread2(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ownKeys(Object(r),!0).forEach(function(o){_defineProperty(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function _typeof(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(n){return typeof n}:_typeof=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(e)}function _defineProperty(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function _extends(){return _extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(e,n){if(e==null)return{};var r={},o=Object.keys(e),s,u;for(u=0;u<o.length;u++)s=o[u],!(n.indexOf(s)>=0)&&(r[s]=e[s]);return r}function _objectWithoutProperties(e,n){if(e==null)return{};var r=_objectWithoutPropertiesLoose(e,n),o,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)o=u[s],!(n.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,o)||(r[o]=e[o]))}return r}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _unsupportedIterableToArray(e,n){if(!!e){if(typeof e=="string")return _arrayLikeToArray(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,n)}}function _arrayLikeToArray(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var version="1.15.2";function userAgent(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(e,n,r){e.addEventListener(n,r,!IE11OrLess&&captureMode)}function off(e,n,r){e.removeEventListener(n,r,!IE11OrLess&&captureMode)}function matches(e,n){if(!!n){if(n[0]===">"&&(n=n.substring(1)),e)try{if(e.matches)return e.matches(n);if(e.msMatchesSelector)return e.msMatchesSelector(n);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(n)}catch{return!1}return!1}}function getParentOrHost(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function closest(e,n,r,o){if(e){r=r||document;do{if(n!=null&&(n[0]===">"?e.parentNode===r&&matches(e,n):matches(e,n))||o&&e===r)return e;if(e===r)break}while(e=getParentOrHost(e))}return null}var R_SPACE=/\s+/g;function toggleClass(e,n,r){if(e&&n)if(e.classList)e.classList[r?"add":"remove"](n);else{var o=(" "+e.className+" ").replace(R_SPACE," ").replace(" "+n+" "," ");e.className=(o+(r?" "+n:"")).replace(R_SPACE," ")}}function css(e,n,r){var o=e&&e.style;if(o){if(r===void 0)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(r=e.currentStyle),n===void 0?r:r[n];!(n in o)&&n.indexOf("webkit")===-1&&(n="-webkit-"+n),o[n]=r+(typeof r=="string"?"":"px")}}function matrix(e,n){var r="";if(typeof e=="string")r=e;else do{var o=css(e,"transform");o&&o!=="none"&&(r=o+" "+r)}while(!n&&(e=e.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(r)}function find(e,n,r){if(e){var o=e.getElementsByTagName(n),s=0,u=o.length;if(r)for(;s<u;s++)r(o[s],s);return o}return[]}function getWindowScrollingElement(){var e=document.scrollingElement;return e||document.documentElement}function getRect(e,n,r,o,s){if(!(!e.getBoundingClientRect&&e!==window)){var u,d,f,v,m,_,g;if(e!==window&&e.parentNode&&e!==getWindowScrollingElement()?(u=e.getBoundingClientRect(),d=u.top,f=u.left,v=u.bottom,m=u.right,_=u.height,g=u.width):(d=0,f=0,v=window.innerHeight,m=window.innerWidth,_=window.innerHeight,g=window.innerWidth),(n||r)&&e!==window&&(s=s||e.parentNode,!IE11OrLess))do if(s&&s.getBoundingClientRect&&(css(s,"transform")!=="none"||r&&css(s,"position")!=="static")){var y=s.getBoundingClientRect();d-=y.top+parseInt(css(s,"border-top-width")),f-=y.left+parseInt(css(s,"border-left-width")),v=d+u.height,m=f+u.width;break}while(s=s.parentNode);if(o&&e!==window){var w=matrix(s||e),x=w&&w.a,k=w&&w.d;w&&(d/=k,f/=x,g/=x,_/=k,v=d+_,m=f+g)}return{top:d,left:f,bottom:v,right:m,width:g,height:_}}}function isScrolledPast(e,n,r){for(var o=getParentAutoScrollElement(e,!0),s=getRect(e)[n];o;){var u=getRect(o)[r],d=void 0;if(r==="top"||r==="left"?d=s>=u:d=s<=u,!d)return o;if(o===getWindowScrollingElement())break;o=getParentAutoScrollElement(o,!1)}return!1}function getChild(e,n,r,o){for(var s=0,u=0,d=e.children;u<d.length;){if(d[u].style.display!=="none"&&d[u]!==Sortable.ghost&&(o||d[u]!==Sortable.dragged)&&closest(d[u],r.draggable,e,!1)){if(s===n)return d[u];s++}u++}return null}function lastChild(e,n){for(var r=e.lastElementChild;r&&(r===Sortable.ghost||css(r,"display")==="none"||n&&!matches(r,n));)r=r.previousElementSibling;return r||null}function index(e,n){var r=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==Sortable.clone&&(!n||matches(e,n))&&r++;return r}function getRelativeScrollOffset(e){var n=0,r=0,o=getWindowScrollingElement();if(e)do{var s=matrix(e),u=s.a,d=s.d;n+=e.scrollLeft*u,r+=e.scrollTop*d}while(e!==o&&(e=e.parentNode));return[n,r]}function indexOfObject(e,n){for(var r in e)if(!!e.hasOwnProperty(r)){for(var o in n)if(n.hasOwnProperty(o)&&n[o]===e[r][o])return Number(r)}return-1}function getParentAutoScrollElement(e,n){if(!e||!e.getBoundingClientRect)return getWindowScrollingElement();var r=e,o=!1;do if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var s=css(r);if(r.clientWidth<r.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||r.clientHeight<r.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!r.getBoundingClientRect||r===document.body)return getWindowScrollingElement();if(o||n)return r;o=!0}}while(r=r.parentNode);return getWindowScrollingElement()}function extend(e,n){if(e&&n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e}function isRectEqual(e,n){return Math.round(e.top)===Math.round(n.top)&&Math.round(e.left)===Math.round(n.left)&&Math.round(e.height)===Math.round(n.height)&&Math.round(e.width)===Math.round(n.width)}var _throttleTimeout;function throttle(e,n){return function(){if(!_throttleTimeout){var r=arguments,o=this;r.length===1?e.call(o,r[0]):e.apply(o,r),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},n)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(e,n,r){e.scrollLeft+=n,e.scrollTop+=r}function clone(e){var n=window.Polymer,r=window.jQuery||window.Zepto;return n&&n.dom?n.dom(e).cloneNode(!0):r?r(e).clone(!0)[0]:e.cloneNode(!0)}function setRect(e,n){css(e,"position","absolute"),css(e,"top",n.top),css(e,"left",n.left),css(e,"width",n.width),css(e,"height",n.height)}function unsetRect(e){css(e,"position",""),css(e,"top",""),css(e,"left",""),css(e,"width",""),css(e,"height","")}function getChildContainingRectFromElement(e,n,r){var o={};return Array.from(e.children).forEach(function(s){var u,d,f,v;if(!(!closest(s,n.draggable,e,!1)||s.animated||s===r)){var m=getRect(s);o.left=Math.min((u=o.left)!==null&&u!==void 0?u:1/0,m.left),o.top=Math.min((d=o.top)!==null&&d!==void 0?d:1/0,m.top),o.right=Math.max((f=o.right)!==null&&f!==void 0?f:-1/0,m.right),o.bottom=Math.max((v=o.bottom)!==null&&v!==void 0?v:-1/0,m.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var expando="Sortable"+new Date().getTime();function AnimationStateManager(){var e=[],n;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(s){if(!(css(s,"display")==="none"||s===Sortable.ghost)){e.push({target:s,rect:getRect(s)});var u=_objectSpread2({},e[e.length-1].rect);if(s.thisAnimationDuration){var d=matrix(s,!0);d&&(u.top-=d.f,u.left-=d.e)}s.fromRect=u}})}},addAnimationState:function(o){e.push(o)},removeAnimationState:function(o){e.splice(indexOfObject(e,{target:o}),1)},animateAll:function(o){var s=this;if(!this.options.animation){clearTimeout(n),typeof o=="function"&&o();return}var u=!1,d=0;e.forEach(function(f){var v=0,m=f.target,_=m.fromRect,g=getRect(m),y=m.prevFromRect,w=m.prevToRect,x=f.rect,k=matrix(m,!0);k&&(g.top-=k.f,g.left-=k.e),m.toRect=g,m.thisAnimationDuration&&isRectEqual(y,g)&&!isRectEqual(_,g)&&(x.top-g.top)/(x.left-g.left)===(_.top-g.top)/(_.left-g.left)&&(v=calculateRealTime(x,y,w,s.options)),isRectEqual(g,_)||(m.prevFromRect=_,m.prevToRect=g,v||(v=s.options.animation),s.animate(m,x,g,v)),v&&(u=!0,d=Math.max(d,v),clearTimeout(m.animationResetTimer),m.animationResetTimer=setTimeout(function(){m.animationTime=0,m.prevFromRect=null,m.fromRect=null,m.prevToRect=null,m.thisAnimationDuration=null},v),m.thisAnimationDuration=v)}),clearTimeout(n),u?n=setTimeout(function(){typeof o=="function"&&o()},d):typeof o=="function"&&o(),e=[]},animate:function(o,s,u,d){if(d){css(o,"transition",""),css(o,"transform","");var f=matrix(this.el),v=f&&f.a,m=f&&f.d,_=(s.left-u.left)/(v||1),g=(s.top-u.top)/(m||1);o.animatingX=!!_,o.animatingY=!!g,css(o,"transform","translate3d("+_+"px,"+g+"px,0)"),this.forRepaintDummy=repaint(o),css(o,"transition","transform "+d+"ms"+(this.options.easing?" "+this.options.easing:"")),css(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){css(o,"transition",""),css(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},d)}}}}function repaint(e){return e.offsetWidth}function calculateRealTime(e,n,r,o){return Math.sqrt(Math.pow(n.top-e.top,2)+Math.pow(n.left-e.left,2))/Math.sqrt(Math.pow(n.top-r.top,2)+Math.pow(n.left-r.left,2))*o.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function e(n){for(var r in defaults)defaults.hasOwnProperty(r)&&!(r in n)&&(n[r]=defaults[r]);plugins.forEach(function(o){if(o.pluginName===n.pluginName)throw"Sortable: Cannot mount plugin ".concat(n.pluginName," more than once")}),plugins.push(n)},pluginEvent:function e(n,r,o){var s=this;this.eventCanceled=!1,o.cancel=function(){s.eventCanceled=!0};var u=n+"Global";plugins.forEach(function(d){!r[d.pluginName]||(r[d.pluginName][u]&&r[d.pluginName][u](_objectSpread2({sortable:r},o)),r.options[d.pluginName]&&r[d.pluginName][n]&&r[d.pluginName][n](_objectSpread2({sortable:r},o)))})},initializePlugins:function e(n,r,o,s){plugins.forEach(function(f){var v=f.pluginName;if(!(!n.options[v]&&!f.initializeByDefault)){var m=new f(n,r,n.options);m.sortable=n,m.options=n.options,n[v]=m,_extends(o,m.defaults)}});for(var u in n.options)if(!!n.options.hasOwnProperty(u)){var d=this.modifyOption(n,u,n.options[u]);typeof d<"u"&&(n.options[u]=d)}},getEventProperties:function e(n,r){var o={};return plugins.forEach(function(s){typeof s.eventProperties=="function"&&_extends(o,s.eventProperties.call(r[s.pluginName],n))}),o},modifyOption:function e(n,r,o){var s;return plugins.forEach(function(u){!n[u.pluginName]||u.optionListeners&&typeof u.optionListeners[r]=="function"&&(s=u.optionListeners[r].call(n[u.pluginName],o))}),s}};function dispatchEvent(e){var n=e.sortable,r=e.rootEl,o=e.name,s=e.targetEl,u=e.cloneEl,d=e.toEl,f=e.fromEl,v=e.oldIndex,m=e.newIndex,_=e.oldDraggableIndex,g=e.newDraggableIndex,y=e.originalEvent,w=e.putSortable,x=e.extraEventProperties;if(n=n||r&&r[expando],!!n){var k,S=n.options,E="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!IE11OrLess&&!Edge?k=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(k=document.createEvent("Event"),k.initEvent(o,!0,!0)),k.to=d||r,k.from=f||r,k.item=s||r,k.clone=u,k.oldIndex=v,k.newIndex=m,k.oldDraggableIndex=_,k.newDraggableIndex=g,k.originalEvent=y,k.pullMode=w?w.lastPutMode:void 0;var T=_objectSpread2(_objectSpread2({},x),PluginManager.getEventProperties(o,n));for(var M in T)k[M]=T[M];r&&r.dispatchEvent(k),S[E]&&S[E].call(n,k)}}var _excluded=["evt"],pluginEvent=function e(n,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=o.evt,u=_objectWithoutProperties(o,_excluded);PluginManager.pluginEvent.bind(Sortable)(n,r,_objectSpread2({dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,dragStarted:moved,putSortable,activeSortable:Sortable.active,originalEvent:s,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(f){_dispatchEvent({sortable:r,name:f,originalEvent:s})}},u))};function _dispatchEvent(e){dispatchEvent(_objectSpread2({putSortable,cloneEl,targetEl:dragEl,rootEl,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex},e))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists=typeof document<"u",PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(!!documentExists){if(IE11OrLess)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),_detectDirection=function e(n,r){var o=css(n),s=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),u=getChild(n,0,r),d=getChild(n,1,r),f=u&&css(u),v=d&&css(d),m=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+getRect(u).width,_=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+getRect(d).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(u&&f.float&&f.float!=="none"){var g=f.float==="left"?"left":"right";return d&&(v.clear==="both"||v.clear===g)?"vertical":"horizontal"}return u&&(f.display==="block"||f.display==="flex"||f.display==="table"||f.display==="grid"||m>=s&&o[CSSFloatProperty]==="none"||d&&o[CSSFloatProperty]==="none"&&m+_>s)?"vertical":"horizontal"},_dragElInRowColumn=function e(n,r,o){var s=o?n.left:n.top,u=o?n.right:n.bottom,d=o?n.width:n.height,f=o?r.left:r.top,v=o?r.right:r.bottom,m=o?r.width:r.height;return s===f||u===v||s+d/2===f+m/2},_detectNearestEmptySortable=function e(n,r){var o;return sortables.some(function(s){var u=s[expando].options.emptyInsertThreshold;if(!(!u||lastChild(s))){var d=getRect(s),f=n>=d.left-u&&n<=d.right+u,v=r>=d.top-u&&r<=d.bottom+u;if(f&&v)return o=s}}),o},_prepareGroup=function e(n){function r(u,d){return function(f,v,m,_){var g=f.options.group.name&&v.options.group.name&&f.options.group.name===v.options.group.name;if(u==null&&(d||g))return!0;if(u==null||u===!1)return!1;if(d&&u==="clone")return u;if(typeof u=="function")return r(u(f,v,m,_),d)(f,v,m,_);var y=(d?f:v).options.group.name;return u===!0||typeof u=="string"&&u===y||u.join&&u.indexOf(y)>-1}}var o={},s=n.group;(!s||_typeof(s)!="object")&&(s={name:s}),o.name=s.name,o.checkPull=r(s.pull,!0),o.checkPut=r(s.put),o.revertClone=s.revertClone,n.group=o},_hideGhostForTarget=function e(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function e(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&!ChromeForAndroid&&document.addEventListener("click",function(e){if(ignoreNextClick)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function e(n){if(dragEl){n=n.touches?n.touches[0]:n;var r=_detectNearestEmptySortable(n.clientX,n.clientY);if(r){var o={};for(var s in n)n.hasOwnProperty(s)&&(o[s]=n[s]);o.target=o.rootEl=r,o.preventDefault=void 0,o.stopPropagation=void 0,r[expando]._onDragOver(o)}}},_checkOutsideTargetEl=function e(n){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(n.target)};function Sortable(e,n){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=n=_extends({},n),e[expando]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(d,f){d.setData("Text",f.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sortable.supportPointer!==!1&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};PluginManager.initializePlugins(this,e,r);for(var o in r)!(o in n)&&(n[o]=r[o]);_prepareGroup(n);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=n.forceFallback?!1:supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),n.supportPointer?on(e,"pointerdown",this._onTapStart):(on(e,"mousedown",this._onTapStart),on(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(e,"dragover",this),on(e,"dragenter",this)),sortables.push(this.el),n.store&&n.store.get&&this.sort(n.store.get(this)||[]),_extends(this,AnimationStateManager())}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function e(n){!this.el.contains(n)&&n!==this.el&&(lastTarget=null)},_getDirection:function e(n,r){return typeof this.options.direction=="function"?this.options.direction.call(this,n,r,dragEl):this.options.direction},_onTapStart:function e(n){if(!!n.cancelable){var r=this,o=this.el,s=this.options,u=s.preventOnFilter,d=n.type,f=n.touches&&n.touches[0]||n.pointerType&&n.pointerType==="touch"&&n,v=(f||n).target,m=n.target.shadowRoot&&(n.path&&n.path[0]||n.composedPath&&n.composedPath()[0])||v,_=s.filter;if(_saveInputCheckedState(o),!dragEl&&!(/mousedown|pointerdown/.test(d)&&n.button!==0||s.disabled)&&!m.isContentEditable&&!(!this.nativeDraggable&&Safari&&v&&v.tagName.toUpperCase()==="SELECT")&&(v=closest(v,s.draggable,o,!1),!(v&&v.animated)&&lastDownEl!==v)){if(oldIndex=index(v),oldDraggableIndex=index(v,s.draggable),typeof _=="function"){if(_.call(this,n,v,this)){_dispatchEvent({sortable:r,rootEl:m,name:"filter",targetEl:v,toEl:o,fromEl:o}),pluginEvent("filter",r,{evt:n}),u&&n.cancelable&&n.preventDefault();return}}else if(_&&(_=_.split(",").some(function(g){if(g=closest(m,g.trim(),o,!1),g)return _dispatchEvent({sortable:r,rootEl:g,name:"filter",targetEl:v,fromEl:o,toEl:o}),pluginEvent("filter",r,{evt:n}),!0}),_)){u&&n.cancelable&&n.preventDefault();return}s.handle&&!closest(m,s.handle,o,!1)||this._prepareDragStart(n,f,v)}}},_prepareDragStart:function e(n,r,o){var s=this,u=s.el,d=s.options,f=u.ownerDocument,v;if(o&&!dragEl&&o.parentNode===u){var m=getRect(o);if(rootEl=u,dragEl=o,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=o,activeGroup=d.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(r||n).clientX,clientY:(r||n).clientY},tapDistanceLeft=tapEvt.clientX-m.left,tapDistanceTop=tapEvt.clientY-m.top,this._lastX=(r||n).clientX,this._lastY=(r||n).clientY,dragEl.style["will-change"]="all",v=function(){if(pluginEvent("delayEnded",s,{evt:n}),Sortable.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!FireFox&&s.nativeDraggable&&(dragEl.draggable=!0),s._triggerDragStart(n,r),_dispatchEvent({sortable:s,name:"choose",originalEvent:n}),toggleClass(dragEl,d.chosenClass,!0)},d.ignore.split(",").forEach(function(_){find(dragEl,_.trim(),_disableDraggable)}),on(f,"dragover",nearestEmptyInsertDetectEvent),on(f,"mousemove",nearestEmptyInsertDetectEvent),on(f,"touchmove",nearestEmptyInsertDetectEvent),on(f,"mouseup",s._onDrop),on(f,"touchend",s._onDrop),on(f,"touchcancel",s._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:n}),d.delay&&(!d.delayOnTouchOnly||r)&&(!this.nativeDraggable||!(Edge||IE11OrLess))){if(Sortable.eventCanceled){this._onDrop();return}on(f,"mouseup",s._disableDelayedDrag),on(f,"touchend",s._disableDelayedDrag),on(f,"touchcancel",s._disableDelayedDrag),on(f,"mousemove",s._delayedDragTouchMoveHandler),on(f,"touchmove",s._delayedDragTouchMoveHandler),d.supportPointer&&on(f,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(v,d.delay)}else v()}},_delayedDragTouchMoveHandler:function e(n){var r=n.touches?n.touches[0]:n;Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function e(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function e(){var n=this.el.ownerDocument;off(n,"mouseup",this._disableDelayedDrag),off(n,"touchend",this._disableDelayedDrag),off(n,"touchcancel",this._disableDelayedDrag),off(n,"mousemove",this._delayedDragTouchMoveHandler),off(n,"touchmove",this._delayedDragTouchMoveHandler),off(n,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function e(n,r){r=r||n.pointerType=="touch"&&n,!this.nativeDraggable||r?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):r?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function e(n,r){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:r}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var o=this.options;!n&&toggleClass(dragEl,o.dragClass,!1),toggleClass(dragEl,o.ghostClass,!0),Sortable.active=this,n&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:r})}else this._nulling()},_emulateDragOver:function e(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var n=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),r=n;n&&n.shadowRoot&&(n=n.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),n!==r);)r=n;if(dragEl.parentNode[expando]._isOutsideThisEl(n),r)do{if(r[expando]){var o=void 0;if(o=r[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:n,rootEl:r}),o&&!this.options.dragoverBubble)break}n=r}while(r=r.parentNode);_unhideGhostForTarget()}},_onTouchMove:function e(n){if(tapEvt){var r=this.options,o=r.fallbackTolerance,s=r.fallbackOffset,u=n.touches?n.touches[0]:n,d=ghostEl&&matrix(ghostEl,!0),f=ghostEl&&d&&d.a,v=ghostEl&&d&&d.d,m=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),_=(u.clientX-tapEvt.clientX+s.x)/(f||1)+(m?m[0]-ghostRelativeParentInitialScroll[0]:0)/(f||1),g=(u.clientY-tapEvt.clientY+s.y)/(v||1)+(m?m[1]-ghostRelativeParentInitialScroll[1]:0)/(v||1);if(!Sortable.active&&!awaitingDragStarted){if(o&&Math.max(Math.abs(u.clientX-this._lastX),Math.abs(u.clientY-this._lastY))<o)return;this._onDragStart(n,!0)}if(ghostEl){d?(d.e+=_-(lastDx||0),d.f+=g-(lastDy||0)):d={a:1,b:0,c:0,d:1,e:_,f:g};var y="matrix(".concat(d.a,",").concat(d.b,",").concat(d.c,",").concat(d.d,",").concat(d.e,",").concat(d.f,")");css(ghostEl,"webkitTransform",y),css(ghostEl,"mozTransform",y),css(ghostEl,"msTransform",y),css(ghostEl,"transform",y),lastDx=_,lastDy=g,touchEvt=u}n.cancelable&&n.preventDefault()}},_appendGhost:function e(){if(!ghostEl){var n=this.options.fallbackOnBody?document.body:rootEl,r=getRect(dragEl,!0,PositionGhostAbsolutely,!0,n),o=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=n;css(ghostRelativeParent,"position")==="static"&&css(ghostRelativeParent,"transform")==="none"&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),r.top+=ghostRelativeParent.scrollTop,r.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),toggleClass(ghostEl,o.ghostClass,!1),toggleClass(ghostEl,o.fallbackClass,!0),toggleClass(ghostEl,o.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",r.top),css(ghostEl,"left",r.left),css(ghostEl,"width",r.width),css(ghostEl,"height",r.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,n.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function e(n,r){var o=this,s=n.dataTransfer,u=o.options;if(pluginEvent("dragStart",this,{evt:n}),Sortable.eventCanceled){this._onDrop();return}pluginEvent("setupClone",this),Sortable.eventCanceled||(cloneEl=clone(dragEl),cloneEl.removeAttribute("id"),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),o.cloneId=_nextTick(function(){pluginEvent("clone",o),!Sortable.eventCanceled&&(o.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),o._hideClone(),_dispatchEvent({sortable:o,name:"clone"}))}),!r&&toggleClass(dragEl,u.dragClass,!0),r?(ignoreNextClick=!0,o._loopId=setInterval(o._emulateDragOver,50)):(off(document,"mouseup",o._onDrop),off(document,"touchend",o._onDrop),off(document,"touchcancel",o._onDrop),s&&(s.effectAllowed="move",u.setData&&u.setData.call(o,s,dragEl)),on(document,"drop",o),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,o._dragStartId=_nextTick(o._dragStarted.bind(o,r,n)),on(document,"selectstart",o),moved=!0,Safari&&css(document.body,"user-select","none")},_onDragOver:function e(n){var r=this.el,o=n.target,s,u,d,f=this.options,v=f.group,m=Sortable.active,_=activeGroup===v,g=f.sort,y=putSortable||m,w,x=this,k=!1;if(_silent)return;function S(ne,q){pluginEvent(ne,x,_objectSpread2({evt:n,isOwner:_,axis:w?"vertical":"horizontal",revert:d,dragRect:s,targetRect:u,canSort:g,fromSortable:y,target:o,completed:T,onMove:function(Y,le){return _onMove(rootEl,r,dragEl,s,Y,getRect(Y),n,le)},changed:M},q))}function E(){S("dragOverAnimationCapture"),x.captureAnimationState(),x!==y&&y.captureAnimationState()}function T(ne){return S("dragOverCompleted",{insertion:ne}),ne&&(_?m._hideClone():m._showClone(x),x!==y&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:m.options.ghostClass,!1),toggleClass(dragEl,f.ghostClass,!0)),putSortable!==x&&x!==Sortable.active?putSortable=x:x===Sortable.active&&putSortable&&(putSortable=null),y===x&&(x._ignoreWhileAnimating=o),x.animateAll(function(){S("dragOverAnimationComplete"),x._ignoreWhileAnimating=null}),x!==y&&(y.animateAll(),y._ignoreWhileAnimating=null)),(o===dragEl&&!dragEl.animated||o===r&&!o.animated)&&(lastTarget=null),!f.dragoverBubble&&!n.rootEl&&o!==document&&(dragEl.parentNode[expando]._isOutsideThisEl(n.target),!ne&&nearestEmptyInsertDetectEvent(n)),!f.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),k=!0}function M(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,f.draggable),_dispatchEvent({sortable:x,name:"change",toEl:r,newIndex,newDraggableIndex,originalEvent:n})}if(n.preventDefault!==void 0&&n.cancelable&&n.preventDefault(),o=closest(o,f.draggable,r,!0),S("dragOver"),Sortable.eventCanceled)return k;if(dragEl.contains(n.target)||o.animated&&o.animatingX&&o.animatingY||x._ignoreWhileAnimating===o)return T(!1);if(ignoreNextClick=!1,m&&!f.disabled&&(_?g||(d=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,m,dragEl,n))&&v.checkPut(this,m,dragEl,n))){if(w=this._getDirection(n,o)==="vertical",s=getRect(dragEl),S("dragOverValid"),Sortable.eventCanceled)return k;if(d)return parentEl=rootEl,E(),this._hideClone(),S("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),T(!0);var I=lastChild(r,f.draggable);if(!I||_ghostIsLast(n,w,this)&&!I.animated){if(I===dragEl)return T(!1);if(I&&r===n.target&&(o=I),o&&(u=getRect(o)),_onMove(rootEl,r,dragEl,s,o,u,n,!!o)!==!1)return E(),I&&I.nextSibling?r.insertBefore(dragEl,I.nextSibling):r.appendChild(dragEl),parentEl=r,M(),T(!0)}else if(I&&_ghostIsFirst(n,w,this)){var F=getChild(r,0,f,!0);if(F===dragEl)return T(!1);if(o=F,u=getRect(o),_onMove(rootEl,r,dragEl,s,o,u,n,!1)!==!1)return E(),r.insertBefore(dragEl,F),parentEl=r,M(),T(!0)}else if(o.parentNode===r){u=getRect(o);var O=0,N,D=dragEl.parentNode!==r,X=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||s,o.animated&&o.toRect||u,w),U=w?"top":"left",Z=isScrolledPast(o,"top","top")||isScrolledPast(dragEl,"top","top"),j=Z?Z.scrollTop:void 0;lastTarget!==o&&(N=u[U],pastFirstInvertThresh=!1,isCircumstantialInvert=!X&&f.invertSwap||D),O=_getSwapDirection(n,o,u,w,X?1:f.swapThreshold,f.invertedSwapThreshold==null?f.swapThreshold:f.invertedSwapThreshold,isCircumstantialInvert,lastTarget===o);var Q;if(O!==0){var ve=index(dragEl);do ve-=O,Q=parentEl.children[ve];while(Q&&(css(Q,"display")==="none"||Q===ghostEl))}if(O===0||Q===o)return T(!1);lastTarget=o,lastDirection=O;var Se=o.nextElementSibling,we=!1;we=O===1;var oe=_onMove(rootEl,r,dragEl,s,o,u,n,we);if(oe!==!1)return(oe===1||oe===-1)&&(we=oe===1),_silent=!0,setTimeout(_unsilent,30),E(),we&&!Se?r.appendChild(dragEl):o.parentNode.insertBefore(dragEl,we?Se:o),Z&&scrollBy(Z,0,j-Z.scrollTop),parentEl=dragEl.parentNode,N!==void 0&&!isCircumstantialInvert&&(targetMoveDistance=Math.abs(N-getRect(o)[U])),M(),T(!0)}if(r.contains(dragEl))return T(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function e(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function e(){var n=this.el.ownerDocument;off(n,"mouseup",this._onDrop),off(n,"touchend",this._onDrop),off(n,"pointerup",this._onDrop),off(n,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function e(n){var r=this.el,o=this.options;if(newIndex=index(dragEl),newDraggableIndex=index(dragEl,o.draggable),pluginEvent("drop",this,{evt:n}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,o.draggable),Sortable.eventCanceled){this._nulling();return}awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(r,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),n&&(moved&&(n.cancelable&&n.preventDefault(),!o.dropBubble&&n.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&putSortable.lastPutMode!=="clone")&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:n}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:n}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:n}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:n}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:n})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:n}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:n})),Sortable.active&&((newIndex==null||newIndex===-1)&&(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:n}),this.save()))),this._nulling()},_nulling:function e(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(n){n.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function e(n){switch(n.type){case"drop":case"dragend":this._onDrop(n);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(n),_globalDragOver(n));break;case"selectstart":n.preventDefault();break}},toArray:function e(){for(var n=[],r,o=this.el.children,s=0,u=o.length,d=this.options;s<u;s++)r=o[s],closest(r,d.draggable,this.el,!1)&&n.push(r.getAttribute(d.dataIdAttr)||_generateId(r));return n},sort:function e(n,r){var o={},s=this.el;this.toArray().forEach(function(u,d){var f=s.children[d];closest(f,this.options.draggable,s,!1)&&(o[u]=f)},this),r&&this.captureAnimationState(),n.forEach(function(u){o[u]&&(s.removeChild(o[u]),s.appendChild(o[u]))}),r&&this.animateAll()},save:function e(){var n=this.options.store;n&&n.set&&n.set(this)},closest:function e(n,r){return closest(n,r||this.options.draggable,this.el,!1)},option:function e(n,r){var o=this.options;if(r===void 0)return o[n];var s=PluginManager.modifyOption(this,n,r);typeof s<"u"?o[n]=s:o[n]=r,n==="group"&&_prepareGroup(o)},destroy:function e(){pluginEvent("destroy",this);var n=this.el;n[expando]=null,off(n,"mousedown",this._onTapStart),off(n,"touchstart",this._onTapStart),off(n,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(n,"dragover",this),off(n,"dragenter",this)),Array.prototype.forEach.call(n.querySelectorAll("[draggable]"),function(r){r.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=n=null},_hideClone:function e(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function e(n){if(n.lastPutMode!=="clone"){this._hideClone();return}if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode==rootEl&&!this.options.group.revertClone?rootEl.insertBefore(cloneEl,dragEl):nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}};function _globalDragOver(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function _onMove(e,n,r,o,s,u,d,f){var v,m=e[expando],_=m.options.onMove,g;return window.CustomEvent&&!IE11OrLess&&!Edge?v=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent("move",!0,!0)),v.to=n,v.from=e,v.dragged=r,v.draggedRect=o,v.related=s||n,v.relatedRect=u||getRect(n),v.willInsertAfter=f,v.originalEvent=d,e.dispatchEvent(v),_&&(g=_.call(m,v,d)),g}function _disableDraggable(e){e.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(e,n,r){var o=getRect(getChild(r.el,0,r.options,!0)),s=getChildContainingRectFromElement(r.el,r.options,ghostEl),u=10;return n?e.clientX<s.left-u||e.clientY<o.top&&e.clientX<o.right:e.clientY<s.top-u||e.clientY<o.bottom&&e.clientX<o.left}function _ghostIsLast(e,n,r){var o=getRect(lastChild(r.el,r.options.draggable)),s=getChildContainingRectFromElement(r.el,r.options,ghostEl),u=10;return n?e.clientX>s.right+u||e.clientY>o.bottom&&e.clientX>o.left:e.clientY>s.bottom+u||e.clientX>o.right&&e.clientY>o.top}function _getSwapDirection(e,n,r,o,s,u,d,f){var v=o?e.clientY:e.clientX,m=o?r.height:r.width,_=o?r.top:r.left,g=o?r.bottom:r.right,y=!1;if(!d){if(f&&targetMoveDistance<m*s){if(!pastFirstInvertThresh&&(lastDirection===1?v>_+m*u/2:v<g-m*u/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)y=!0;else if(lastDirection===1?v<_+targetMoveDistance:v>g-targetMoveDistance)return-lastDirection}else if(v>_+m*(1-s)/2&&v<g-m*(1-s)/2)return _getInsertDirection(n)}return y=y||d,y&&(v<_+m*u/2||v>g-m*u/2)?v>_+m/2?1:-1:0}function _getInsertDirection(e){return index(dragEl)<index(e)?1:-1}function _generateId(e){for(var n=e.tagName+e.className+e.src+e.href+e.textContent,r=n.length,o=0;r--;)o+=n.charCodeAt(r);return o.toString(36)}function _saveInputCheckedState(e){savedInputChecked.length=0;for(var n=e.getElementsByTagName("input"),r=n.length;r--;){var o=n[r];o.checked&&savedInputChecked.push(o)}}function _nextTick(e){return setTimeout(e,0)}function _cancelNextTick(e){return clearTimeout(e)}documentExists&&on(document,"touchmove",function(e){(Sortable.active||awaitingDragStarted)&&e.cancelable&&e.preventDefault()});Sortable.utils={on,off,css,find,is:function e(n,r){return!!closest(n,r,n,!1)},extend,throttle,closest,toggleClass,clone,index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild};Sortable.get=function(e){return e[expando]};Sortable.mount=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n[0].constructor===Array&&(n=n[0]),n.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),o.utils)),PluginManager.mount(o)})};Sortable.create=function(e,n){return new Sortable(e,n)};Sortable.version=version;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this))}return e.prototype={dragStarted:function(r){var o=r.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):o.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(r){var o=r.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(r){this._handleAutoScroll(r,!0)},_handleAutoScroll:function(r,o){var s=this,u=(r.touches?r.touches[0]:r).clientX,d=(r.touches?r.touches[0]:r).clientY,f=document.elementFromPoint(u,d);if(touchEvt$1=r,o||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(r,this.options,f,o);var v=getParentAutoScrollElement(f,!0);scrolling&&(!pointerElemChangedInterval||u!==lastAutoScrollX||d!==lastAutoScrollY)&&(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var m=getParentAutoScrollElement(document.elementFromPoint(u,d),!0);m!==v&&(v=m,clearAutoScrolls()),autoScroll(r,s.options,m,o)},10),lastAutoScrollX=u,lastAutoScrollY=d)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(f,!0)===getWindowScrollingElement()){clearAutoScrolls();return}autoScroll(r,this.options,getParentAutoScrollElement(f,!1),!1)}}},_extends(e,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(e){clearInterval(e.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle(function(e,n,r,o){if(!!n.scroll){var s=(e.touches?e.touches[0]:e).clientX,u=(e.touches?e.touches[0]:e).clientY,d=n.scrollSensitivity,f=n.scrollSpeed,v=getWindowScrollingElement(),m=!1,_;scrollRootEl!==r&&(scrollRootEl=r,clearAutoScrolls(),scrollEl=n.scroll,_=n.scrollFn,scrollEl===!0&&(scrollEl=getParentAutoScrollElement(r,!0)));var g=0,y=scrollEl;do{var w=y,x=getRect(w),k=x.top,S=x.bottom,E=x.left,T=x.right,M=x.width,I=x.height,F=void 0,O=void 0,N=w.scrollWidth,D=w.scrollHeight,X=css(w),U=w.scrollLeft,Z=w.scrollTop;w===v?(F=M<N&&(X.overflowX==="auto"||X.overflowX==="scroll"||X.overflowX==="visible"),O=I<D&&(X.overflowY==="auto"||X.overflowY==="scroll"||X.overflowY==="visible")):(F=M<N&&(X.overflowX==="auto"||X.overflowX==="scroll"),O=I<D&&(X.overflowY==="auto"||X.overflowY==="scroll"));var j=F&&(Math.abs(T-s)<=d&&U+M<N)-(Math.abs(E-s)<=d&&!!U),Q=O&&(Math.abs(S-u)<=d&&Z+I<D)-(Math.abs(k-u)<=d&&!!Z);if(!autoScrolls[g])for(var ve=0;ve<=g;ve++)autoScrolls[ve]||(autoScrolls[ve]={});(autoScrolls[g].vx!=j||autoScrolls[g].vy!=Q||autoScrolls[g].el!==w)&&(autoScrolls[g].el=w,autoScrolls[g].vx=j,autoScrolls[g].vy=Q,clearInterval(autoScrolls[g].pid),(j!=0||Q!=0)&&(m=!0,autoScrolls[g].pid=setInterval(function(){o&&this.layer===0&&Sortable.active._onTouchMove(touchEvt$1);var Se=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*f:0,we=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*f:0;typeof _=="function"&&_.call(Sortable.dragged.parentNode[expando],we,Se,e,touchEvt$1,autoScrolls[this.layer].el)!=="continue"||scrollBy(autoScrolls[this.layer].el,we,Se)}.bind({layer:g}),24))),g++}while(n.bubbleScroll&&y!==v&&(y=getParentAutoScrollElement(y,!1)));scrolling=m}},30),drop=function e(n){var r=n.originalEvent,o=n.putSortable,s=n.dragEl,u=n.activeSortable,d=n.dispatchSortableEvent,f=n.hideGhostForTarget,v=n.unhideGhostForTarget;if(!!r){var m=o||u;f();var _=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r,g=document.elementFromPoint(_.clientX,_.clientY);v(),m&&!m.el.contains(g)&&(d("spill"),this.onSpill({dragEl:s,putSortable:o}))}};function Revert(){}Revert.prototype={startIndex:null,dragStart:function e(n){var r=n.oldDraggableIndex;this.startIndex=r},onSpill:function e(n){var r=n.dragEl,o=n.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var s=getChild(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(r,s):this.sortable.el.appendChild(r),this.sortable.animateAll(),o&&o.animateAll()},drop};_extends(Revert,{pluginName:"revertOnSpill"});function Remove(){}Remove.prototype={onSpill:function e(n){var r=n.dragEl,o=n.putSortable,s=o||this.sortable;s.captureAnimationState(),r.parentNode&&r.parentNode.removeChild(r),s.animateAll()},drop};_extends(Remove,{pluginName:"removeOnSpill"});var multiDragElements=[],multiDragClones=[],lastMultiDragSelect,multiDragSortable,initialFolding=!1,folding=!1,dragStarted=!1,dragEl$1,clonesFromRect,clonesHidden;function MultiDragPlugin(){function e(n){for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));n.options.avoidImplicitDeselect||(n.options.supportPointer?on(document,"pointerup",this._deselectMultiDrag):(on(document,"mouseup",this._deselectMultiDrag),on(document,"touchend",this._deselectMultiDrag))),on(document,"keydown",this._checkKeyDown),on(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(s,u){var d="";multiDragElements.length&&multiDragSortable===n?multiDragElements.forEach(function(f,v){d+=(v?", ":"")+f.textContent}):d=u.textContent,s.setData("Text",d)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(r){var o=r.dragEl;dragEl$1=o},delayEnded:function(){this.isMultiDrag=~multiDragElements.indexOf(dragEl$1)},setupClone:function(r){var o=r.sortable,s=r.cancel;if(!!this.isMultiDrag){for(var u=0;u<multiDragElements.length;u++)multiDragClones.push(clone(multiDragElements[u])),multiDragClones[u].sortableIndex=multiDragElements[u].sortableIndex,multiDragClones[u].draggable=!1,multiDragClones[u].style["will-change"]="",toggleClass(multiDragClones[u],this.options.selectedClass,!1),multiDragElements[u]===dragEl$1&&toggleClass(multiDragClones[u],this.options.chosenClass,!1);o._hideClone(),s()}},clone:function(r){var o=r.sortable,s=r.rootEl,u=r.dispatchSortableEvent,d=r.cancel;!this.isMultiDrag||this.options.removeCloneOnHide||multiDragElements.length&&multiDragSortable===o&&(insertMultiDragClones(!0,s),u("clone"),d())},showClone:function(r){var o=r.cloneNowShown,s=r.rootEl,u=r.cancel;!this.isMultiDrag||(insertMultiDragClones(!1,s),multiDragClones.forEach(function(d){css(d,"display","")}),o(),clonesHidden=!1,u())},hideClone:function(r){var o=this;r.sortable;var s=r.cloneNowHidden,u=r.cancel;!this.isMultiDrag||(multiDragClones.forEach(function(d){css(d,"display","none"),o.options.removeCloneOnHide&&d.parentNode&&d.parentNode.removeChild(d)}),s(),clonesHidden=!0,u())},dragStartGlobal:function(r){r.sortable,!this.isMultiDrag&&multiDragSortable&&multiDragSortable.multiDrag._deselectMultiDrag(),multiDragElements.forEach(function(o){o.sortableIndex=index(o)}),multiDragElements=multiDragElements.sort(function(o,s){return o.sortableIndex-s.sortableIndex}),dragStarted=!0},dragStarted:function(r){var o=this,s=r.sortable;if(!!this.isMultiDrag){if(this.options.sort&&(s.captureAnimationState(),this.options.animation)){multiDragElements.forEach(function(d){d!==dragEl$1&&css(d,"position","absolute")});var u=getRect(dragEl$1,!1,!0,!0);multiDragElements.forEach(function(d){d!==dragEl$1&&setRect(d,u)}),folding=!0,initialFolding=!0}s.animateAll(function(){folding=!1,initialFolding=!1,o.options.animation&&multiDragElements.forEach(function(d){unsetRect(d)}),o.options.sort&&removeMultiDragElements()})}},dragOver:function(r){var o=r.target,s=r.completed,u=r.cancel;folding&&~multiDragElements.indexOf(o)&&(s(!1),u())},revert:function(r){var o=r.fromSortable,s=r.rootEl,u=r.sortable,d=r.dragRect;multiDragElements.length>1&&(multiDragElements.forEach(function(f){u.addAnimationState({target:f,rect:folding?getRect(f):d}),unsetRect(f),f.fromRect=d,o.removeAnimationState(f)}),folding=!1,insertMultiDragElements(!this.options.removeCloneOnHide,s))},dragOverCompleted:function(r){var o=r.sortable,s=r.isOwner,u=r.insertion,d=r.activeSortable,f=r.parentEl,v=r.putSortable,m=this.options;if(u){if(s&&d._hideClone(),initialFolding=!1,m.animation&&multiDragElements.length>1&&(folding||!s&&!d.options.sort&&!v)){var _=getRect(dragEl$1,!1,!0,!0);multiDragElements.forEach(function(y){y!==dragEl$1&&(setRect(y,_),f.appendChild(y))}),folding=!0}if(!s)if(folding||removeMultiDragElements(),multiDragElements.length>1){var g=clonesHidden;d._showClone(o),d.options.animation&&!clonesHidden&&g&&multiDragClones.forEach(function(y){d.addAnimationState({target:y,rect:clonesFromRect}),y.fromRect=clonesFromRect,y.thisAnimationDuration=null})}else d._showClone(o)}},dragOverAnimationCapture:function(r){var o=r.dragRect,s=r.isOwner,u=r.activeSortable;if(multiDragElements.forEach(function(f){f.thisAnimationDuration=null}),u.options.animation&&!s&&u.multiDrag.isMultiDrag){clonesFromRect=_extends({},o);var d=matrix(dragEl$1,!0);clonesFromRect.top-=d.f,clonesFromRect.left-=d.e}},dragOverAnimationComplete:function(){folding&&(folding=!1,removeMultiDragElements())},drop:function(r){var o=r.originalEvent,s=r.rootEl,u=r.parentEl,d=r.sortable,f=r.dispatchSortableEvent,v=r.oldIndex,m=r.putSortable,_=m||this.sortable;if(!!o){var g=this.options,y=u.children;if(!dragStarted)if(g.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),toggleClass(dragEl$1,g.selectedClass,!~multiDragElements.indexOf(dragEl$1)),~multiDragElements.indexOf(dragEl$1))multiDragElements.splice(multiDragElements.indexOf(dragEl$1),1),lastMultiDragSelect=null,dispatchEvent({sortable:d,rootEl:s,name:"deselect",targetEl:dragEl$1,originalEvent:o});else{if(multiDragElements.push(dragEl$1),dispatchEvent({sortable:d,rootEl:s,name:"select",targetEl:dragEl$1,originalEvent:o}),o.shiftKey&&lastMultiDragSelect&&d.el.contains(lastMultiDragSelect)){var w=index(lastMultiDragSelect),x=index(dragEl$1);if(~w&&~x&&w!==x){var k,S;for(x>w?(S=w,k=x):(S=x,k=w+1);S<k;S++)~multiDragElements.indexOf(y[S])||(toggleClass(y[S],g.selectedClass,!0),multiDragElements.push(y[S]),dispatchEvent({sortable:d,rootEl:s,name:"select",targetEl:y[S],originalEvent:o}))}}else lastMultiDragSelect=dragEl$1;multiDragSortable=_}if(dragStarted&&this.isMultiDrag){if(folding=!1,(u[expando].options.sort||u!==s)&&multiDragElements.length>1){var E=getRect(dragEl$1),T=index(dragEl$1,":not(."+this.options.selectedClass+")");if(!initialFolding&&g.animation&&(dragEl$1.thisAnimationDuration=null),_.captureAnimationState(),!initialFolding&&(g.animation&&(dragEl$1.fromRect=E,multiDragElements.forEach(function(I){if(I.thisAnimationDuration=null,I!==dragEl$1){var F=folding?getRect(I):E;I.fromRect=F,_.addAnimationState({target:I,rect:F})}})),removeMultiDragElements(),multiDragElements.forEach(function(I){y[T]?u.insertBefore(I,y[T]):u.appendChild(I),T++}),v===index(dragEl$1))){var M=!1;multiDragElements.forEach(function(I){if(I.sortableIndex!==index(I)){M=!0;return}}),M&&(f("update"),f("sort"))}multiDragElements.forEach(function(I){unsetRect(I)}),_.animateAll()}multiDragSortable=_}(s===u||m&&m.lastPutMode!=="clone")&&multiDragClones.forEach(function(I){I.parentNode&&I.parentNode.removeChild(I)})}},nullingGlobal:function(){this.isMultiDrag=dragStarted=!1,multiDragClones.length=0},destroyGlobal:function(){this._deselectMultiDrag(),off(document,"pointerup",this._deselectMultiDrag),off(document,"mouseup",this._deselectMultiDrag),off(document,"touchend",this._deselectMultiDrag),off(document,"keydown",this._checkKeyDown),off(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(r){if(!(typeof dragStarted<"u"&&dragStarted)&&multiDragSortable===this.sortable&&!(r&&closest(r.target,this.options.draggable,this.sortable.el,!1))&&!(r&&r.button!==0))for(;multiDragElements.length;){var o=multiDragElements[0];toggleClass(o,this.options.selectedClass,!1),multiDragElements.shift(),dispatchEvent({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:o,originalEvent:r})}},_checkKeyDown:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},_extends(e,{pluginName:"multiDrag",utils:{select:function(r){var o=r.parentNode[expando];!o||!o.options.multiDrag||~multiDragElements.indexOf(r)||(multiDragSortable&&multiDragSortable!==o&&(multiDragSortable.multiDrag._deselectMultiDrag(),multiDragSortable=o),toggleClass(r,o.options.selectedClass,!0),multiDragElements.push(r))},deselect:function(r){var o=r.parentNode[expando],s=multiDragElements.indexOf(r);!o||!o.options.multiDrag||!~s||(toggleClass(r,o.options.selectedClass,!1),multiDragElements.splice(s,1))}},eventProperties:function(){var r=this,o=[],s=[];return multiDragElements.forEach(function(u){o.push({multiDragElement:u,index:u.sortableIndex});var d;folding&&u!==dragEl$1?d=-1:folding?d=index(u,":not(."+r.options.selectedClass+")"):d=index(u),s.push({multiDragElement:u,index:d})}),{items:_toConsumableArray(multiDragElements),clones:[].concat(multiDragClones),oldIndicies:o,newIndicies:s}},optionListeners:{multiDragKey:function(r){return r=r.toLowerCase(),r==="ctrl"?r="Control":r.length>1&&(r=r.charAt(0).toUpperCase()+r.substr(1)),r}}})}function insertMultiDragElements(e,n){multiDragElements.forEach(function(r,o){var s=n.children[r.sortableIndex+(e?Number(o):0)];s?n.insertBefore(r,s):n.appendChild(r)})}function insertMultiDragClones(e,n){multiDragClones.forEach(function(r,o){var s=n.children[r.sortableIndex+(e?Number(o):0)];s?n.insertBefore(r,s):n.appendChild(r)})}function removeMultiDragElements(){multiDragElements.forEach(function(e){e!==dragEl$1&&e.parentNode&&e.parentNode.removeChild(e)})}Sortable.mount(new AutoScrollPlugin);Sortable.mount(Remove,Revert);const index_vue_vue_type_style_index_0_lang="",_hoisted_1={class:"content"},_hoisted_2={class:"loading"},_hoisted_3={class:"error-dialog"},_hoisted_4={class:"close-btn"},_hoisted_5={class:"fail-logo"},_hoisted_6={class:"text"},_hoisted_7={class:"mask active"},_hoisted_8=createBaseVNode("div",{id:"printContainer"},null,-1),_sfc_main={__name:"index",setup(e){Sortable.mount(new MultiDragPlugin);const n=useViewerStore(),r=computed(()=>n.getThemeMode),o=computed(()=>n.getDownloading),s=computed(()=>n.getDownloadError),u=computed(()=>n.isElementOpen("signCreatePanel")),d=computed(()=>n.getPopoverChanged),f=computed(()=>n.getToolMode),v=getCurrentInstance().appContext.app.config.globalProperties;provide("themeMode",r),initDocument({$t:v.$t}),window.instance.changeFile=()=>{document.getElementById("fileInput").click(),u.value&&(n.toggleElement("signCreatePanel"),n.setActiceToolMode("view")),d.value||n.setPopoverChanged(!0),f.value==="document"&&core.saveDocumentEdit("cancel")};const m=()=>{n.setDownloadError("")};return(_,g)=>{const y=_sfc_main$1,w=_sfc_main$V,x=_sfc_main$1p,k=_sfc_main$1F,S=_sfc_main$1O,E=_sfc_main$27,T=_sfc_main$2e,M=_sfc_main$2m,I=_sfc_main$2n,F=__unplugin_components_9$3,O=__unplugin_components_10$3,N=__unplugin_components_11$1,D=_sfc_main$2C,X=__unplugin_components_13$1,U=_sfc_main$2E,Z=__unplugin_components_15$1;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{id:"outerContainer",class:normalizeClass(["app",{dark:unref(r)==="Dark"}])},[createVNode(y),createBaseVNode("div",_hoisted_1,[createVNode(w),createVNode(x),createVNode(k),unref(f)==="document"?(openBlock(),createBlock(S,{key:0,Sortable:unref(Sortable)},null,8,["Sortable"])):createCommentVNode("",!0),createVNode(E),createVNode(T),createVNode(M),createVNode(I),createVNode(F)]),createBaseVNode("div",{class:normalizeClass(["mask",{active:unref(o)||unref(s)!==""}])},[withDirectives(createBaseVNode("div",_hoisted_2,[createVNode(O)],512),[[vShow,unref(o)]]),withDirectives(createBaseVNode("div",_hoisted_3,[createBaseVNode("div",_hoisted_4,[createVNode(D,{onClick:m},{default:withCtx(()=>[createVNode(N)]),_:1})]),createBaseVNode("div",_hoisted_5,[createVNode(X)]),createBaseVNode("div",_hoisted_6,toDisplayString$1(unref(s))+" failed",1),createBaseVNode("div",{class:"confirm-btn",onClick:m},"OK")],512),[[vShow,unref(s)!==""]])],2),withDirectives(createBaseVNode("div",_hoisted_7,[createVNode(U)],512),[[vShow,unref(u)]])],2),_hoisted_8,createVNode(Z)],64)}}},store=createPinia();function setupStore(e){e.use(store)}const main="",disableElements=e=>n=>{var o;const r=[...e.getActiveHeaderItems,...e.getTools,...e.getActiveRightHeaderItems,...e.getToolItems.annotation[0].tools,...e.getToolItems.form];if(Array.isArray(n))for(let s=0;s<r.length;s++)n.forEach(u=>{r[s].dataElement===u&&(r[s].hidden=!0)});else if(typeof n=="string"){const s=r.find(u=>u.dataElement===n);s?(s.hidden=!0,e.toolMode===s.element&&e.setActiceToolMode((o=e.tools[0])==null?void 0:o.element)):console.warn("DataElement not found.")}else console.error("Wrong dataElements type.")},enableElements=e=>n=>{const r=[...e.getActiveHeaderItems,...e.getTools,...e.getActiveRightHeaderItems,...e.getToolItems.annotation[0].tools,...e.getToolItems.form];if(Array.isArray(n))for(let o=0;o<r.length;o++)n.forEach(s=>{r[o].dataElement===s&&(r[o].hidden=!1)});else if(typeof n=="string"){const o=r.find(s=>s.dataElement===n);o?o.hidden=!1:console.warn("DataElement not found.")}else console.error("Wrong dataElements type.")},setHeaderItems=e=>n=>{const r={headers:e.headers,rightHeaders:e.rightHeaders,tools:e.tools,toolItems:e.toolItems},o=Object.create(Header).initialize(e,r);n(o),Object.keys(r).forEach(s=>{const u=r[s];e[s]=u})},Header={initialize(e){return this.headers={headers:e.headers,rightHeaders:e.rightHeaders,tools:e.tools,toolItems:e.toolItems},this.toolButtonObjects=e.toolItems,this.headerGroup="headers",this.index=-1,this},get(e){if(this.index!==-1){const n=this.headers[this.headerGroup][this.index];Object.keys(n).forEach(r=>{delete this[r]})}if(this._setIndex(e),this.index===-1)console.warn(`${e} does not exist in ${this.headerGroup} header`);else{const n=this.headers[this.headerGroup][this.index];Object.keys(n).forEach(r=>{this[r]=n[r]})}return this},getItems(){return this.headers[this.headerGroup]},getHeader(e){const n=Object.keys(this.headers);return n.includes(e)?(this.headerGroup=e,this._resetIndex()):console.warn(`Header must be one of: ${n.join(" or ")}.`),this},insertBefore(e){return this.index===-1?console.warn("Please use .get(dataElement) first before using insertBefore"):this.headers[this.headerGroup].splice(this.index,0,e),this},insertAfter(e){return this.index===-1?console.warn("Please use .get(dataElement) first before using insertAfter"):(this.index++,this.headers[this.headerGroup].splice(this.index,0,e)),this},delete(e){let n;return typeof e=="number"?n=e:typeof e=="string"?this._getIndexOfElement(e)===-1?console.warn(`${e} does not exist in ${this.headerGroup} header`):n=this._getIndexOfElement(e):typeof e>"u"?this.index===-1?console.warn("Please use .get(dataElement) first before using delete()"):n=this.index:Array.isArray(e)?e.forEach(r=>{(typeof r=="number"||typeof r=="string")&&this.delete(r)}):console.warn("Argument must be empty, a number, a string or an array"),n!==void 0&&n!==-1&&(this.headers[this.headerGroup].splice(n,1),this._resetIndex()),this},shift(){return this.headers[this.headerGroup].shift(),this},unshift(...e){return this.headers[this.headerGroup].unshift(...e),this},push(...e){return this.headers[this.headerGroup].push(...e),this},pop(){return this.headers[this.headerGroup].pop(),this},update(e){return Array.isArray(e)?this._updateItems(e):console.warn("Argument must be an array"),this},_updateItems(e){return this.headers[this.headerGroup].length=0,this.headers[this.headerGroup].push(...e),this},_setIndex(e){this.index=this._getIndexOfElement(e)},_getIndexOfElement(e){return this.headers[this.headerGroup].findIndex(n=>{let r;return n.type==="toolButton"?r=this.toolButtonObjects[n.toolName].dataElement:r=n.dataElement,r===e})},_resetIndex(){this.index=-1}},setActiceToolMode=e=>n=>{const r=e.tools.find(o=>o.dataElement===n);r?(r.hidden&&(r.hidden=!1),e.setActiceToolMode(r.element)):console.warn("DataElement not found.")},{locale}=i18n.global,setLanguage=e=>n=>{n!=="zh-CN"&&n!=="en"&&(n="en"),locale.value=n,e.setLanguage(n),window.localStorage.setItem("currentLanguage",n)},getPassword=e=>()=>e.getPassword,defineWebViewerInstanceUIAPIs=()=>{const{locale:e}=i18n.global,n=useViewerStore(),r=useDocumentStore();n.setLanguage(e.value);const o="Core",s="UI",u={instance:window.instance},d={disableElements:disableElements(n),enableElements:enableElements(n),setHeaderItems:setHeaderItems(n),setActiceToolMode:setActiceToolMode(n),setLanguage:setLanguage(n),getPassword:getPassword(r)},f=core.getDocumentViewer(1);window.instances={[o]:{...u,...core,documentViewer:f,getDocumentViewers:()=>core.getDocumentViewers()},[s]:d}},app=createApp(_sfc_main);setupStore(app);defineWebViewerInstanceUIAPIs();app.use(i18n);app.mount("#app");
